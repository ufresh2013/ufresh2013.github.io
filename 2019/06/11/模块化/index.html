
<!DOCTYPE html>
<html lang="">


  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#202020">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    
        <meta name="keywords" content="">
        

          
              <meta name="description" content="æ¨¡å—åŒ–ï¼šCommonJS, AMD, CMD, ES6">
              

                <link rel="icon" type="image/x-icon" href="data:image/png;base64,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">
                <title>
                  æ¨¡å—åŒ–ï¼šCommonJS, AMD, CMD, ES6 [ å¼€å‘ç¬”è®° ]
                </title>
                
                  <!-- stylesheets list from config.yml -->
                  
                    <link rel="stylesheet" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css">
                    
                    <link rel="stylesheet" href="/css/microb.css">
                    
                      
  </head>

<body>
  <div class="container" id="content-outer">
    <div class="inner" id="content-inner">
        <div class="tab">
            <a href="/"><img src="/left.png" /></a>
            <span><a href="/">å¼€å‘ç¬”è®°</a></span>
            <!-- <span><a class="tab-search" href="/search/">æœç´¢</a></span> -->
            
              <span><a class="tab-title" id="#Basic" href="/#Basic">Basic</a></span>
            
              <span><a class="tab-title" id="#Browser" href="/#Browser">Browser</a></span>
            
              <span><a class="tab-title" id="#Bug" href="/#Bug">Bug</a></span>
            
              <span><a class="tab-title" id="#CSS" href="/#CSS">CSS</a></span>
            
              <span><a class="tab-title" id="#Debug" href="/#Debug">Debug</a></span>
            
              <span><a class="tab-title" id="#HTML" href="/#HTML">HTML</a></span>
            
              <span><a class="tab-title" id="#HTTP" href="/#HTTP">HTTP</a></span>
            
              <span><a class="tab-title" id="#JS" href="/#JS">JS</a></span>
            
              <span><a class="tab-title" id="#LeetCode" href="/#LeetCode">LeetCode</a></span>
            
              <span><a class="tab-title" id="#NodeJS" href="/#NodeJS">NodeJS</a></span>
            
              <span><a class="tab-title" id="#React" href="/#React">React</a></span>
            
              <span><a class="tab-title" id="#Vue" href="/#Vue">Vue</a></span>
            
              <span><a class="tab-title" id="#Work" href="/#Work">Work</a></span>
            
              <span><a class="tab-title" id="#è‰ç¨¿" href="/#è‰ç¨¿">è‰ç¨¿</a></span>
            
          </div>
      
  <div id="toc" class="toc-article">
    <!--<strong class="toc-title">ç›®å½•</strong>-->
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-æ¦‚è¿°"><span class="toc-text">1. æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-ES6æ¨¡å—"><span class="toc-text">1. ES6æ¨¡å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-CommonJS"><span class="toc-text">2. CommonJS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-AMDå’Œrequire-js"><span class="toc-text">3. AMDå’Œrequire.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-CMDä¸sea-js"><span class="toc-text">4. CMDä¸sea.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-åŒºåˆ«"><span class="toc-text">5. åŒºåˆ«</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-å€¼æ‹·è´-å€¼å¼•ç”¨"><span class="toc-text">5.1 å€¼æ‹·è´ / å€¼å¼•ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-è¿è¡Œæ—¶åŠ è½½-ç¼–è¯‘æ—¶åŠ è½½"><span class="toc-text">5.2 è¿è¡Œæ—¶åŠ è½½ / ç¼–è¯‘æ—¶åŠ è½½</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-é¿å…å˜é‡å†²çª"><span class="toc-text">6.é¿å…å˜é‡å†²çª</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å‚è€ƒèµ„æ–™"><span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li></ol>
  </div>


<div class="section">
  <article class="post" id="post">
    <header class="post-header text-center">
      <h1 class="title">
        æ¨¡å—åŒ–ï¼šCommonJS, AMD, CMD, ES6
      </h1>
      
      <time class="time" datetime="2019-06-11T02:22:01.000Z">
        2019-06-11
      </time>
      
      <hr>
    </header>
    <div class="post-content">
      <blockquote>
<p>æ¨¡å—åŒ–å¯ä»¥æé«˜ä»£ç å¤ç”¨ç‡ï¼Œæ–¹ä¾¿è¿›è¡Œä»£ç çš„ç®¡ç†ã€‚é€šå¸¸ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œåªå‘å¤–æš´éœ²ç‰¹å®šçš„å˜é‡å’Œå‡½æ•°ã€‚ç›®å‰æµè¡Œçš„jsæ¨¡å—åŒ–è§„èŒƒæœ‰CommonJS, AMD, CMD, ES6çš„æ¨¡å—ç³»ç»Ÿã€‚</p>
</blockquote>
<p><br></p>
<h3 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h3><p>å†å²ä¸Šï¼ŒJavascriptä¸€ç›´æ²¡æœ‰æ¨¡å—(module)ä½“ç³»ï¼Œæ— æ³•å°†ä¸€ä¸ªå¤§ç¨‹åºæ‹†åˆ†ä¸ºäº’ç›¸ä¾èµ–çš„å°æ–‡ä»¶ï¼Œå†ç”¨ç®€å•çš„æ–¹æ³•æ‹¼æ¥èµ·æ¥ã€‚åœ¨ES6ä¹‹å‰ï¼Œç¤¾åŒºæŒ‡å®šäº†ä¸€äº›æ¨¡å—åŠ è½½æ–¹æ¡ˆï¼Œä¸»è¦æœ‰CommonJSå’ŒADMï¼Œå‰è€…ç”¨äºæœåŠ¡å™¨ï¼Œåè€…ç”¨äºæµè§ˆå™¨ã€‚åæ¥ï¼ŒES6å®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œå®Œå…¨å¯ä»¥æ›¿ä»£CommonJSå’ŒAMDè§„èŒƒï¼Œæˆä¸ºäº†æµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šç”¨çš„æ¨¡å—è§£å†³æ–¹æ¡ˆã€‚</p>
<p><br></p>
<h3 id="1-ES6æ¨¡å—"><a href="#1-ES6æ¨¡å—" class="headerlink" title="1. ES6æ¨¡å—"></a>1. ES6æ¨¡å—</h3><p>æµè§ˆå™¨åŠ è½½ES6æ¨¡å—ï¼Œä¹Ÿä½¿ç”¨<code>&lt;script&gt;</code>æ ‡ç­¾ï¼Œè¦åŠ å…¥<code>type=&quot;module&quot;</code>å±æ€§ã€‚æµè§ˆå™¨ä¼šç­‰åˆ°æ•´ä¸ªé¡µé¢æ¸²æŸ“å®Œï¼Œå†æ‰§è¡Œæ¨¡å—è„šæœ¬ï¼Œç­‰åŒäºæ‰“å¼€<code>&lt;script&gt;</code>çš„<code>defer</code>å±æ€§ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span> <span class="attr">src</span>=<span class="string">"./foo.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>å¯¹äºå¤–éƒ¨çš„æ¨¡å—è„šæœ¬ï¼Œä»£ç æ˜¯åœ¨æ¨¡å—ä½œç”¨åŸŸä¸­è¿è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸè¿è¡Œã€‚æ¨¡å—å†…éƒ¨çš„é¡¶å±‚å˜é‡ï¼Œå¤–éƒ¨ä¸å¯è§ã€‚</li>
<li>æ¨¡å—ä¹‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>import</code>åŠ è½½å…¶ä»–æ¨¡å—ï¼Œéœ€è¦æä¾›ç»å¯¹ / ç›¸å¯¹urlï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>export</code>å‘½ä»¤è¾“å‡ºå¯¹å¤–æ¥å£</li>
<li>æ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„<code>this</code>å…³é”®å­—è¿”å›<code>undefined</code>ï¼Œè€Œä¸æ˜¯æŒ‡å‘<code>window</code>ã€‚å› æ­¤ï¼Œåœ¨æ¨¡å—é¡¶å±‚ä½¿ç”¨thiså…³é”®å­—ï¼Œæ˜¯æ— æ„ä¹‰çš„ã€‚</li>
<li><p>åŒä¸€ä¸ªæ¨¡å—å¦‚æœåŠ è½½å¤šæ¬¡ï¼Œå°†åªæ‰§è¡Œä¾æ¬¡</p>
</li>
<li><p>å®šä¹‰æ¨¡å—</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> basicNum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; basicNum, add &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¼•ç”¨æ¨¡å—</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; basicNum, add &#125; <span class="keyword">from</span> <span class="string">'./math'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  ele.textContent = add(<span class="number">99</span> + basicNum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>export default</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰è¾“å‡º</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123; basicNum, add &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥</span></span><br><span class="line"><span class="keyword">import</span> math <span class="keyword">from</span> <span class="string">'./math'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ele.textContent = math.add(<span class="number">99</span> + math.basicNum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br></p>
<h3 id="2-CommonJS"><a href="#2-CommonJS" class="headerlink" title="2. CommonJS"></a>2. CommonJS</h3><p>Node.jsæ˜¯commonJSè§„èŒƒçš„ä¸»è¦å®è·µè€…ï¼Œå®ƒçš„å››ä¸ªé‡è¦çš„ç¯å¢ƒå˜é‡ä¸ºæ¨¡å—åŒ–çš„å®ç°æä¾›æ”¯æŒ: <em><code>module</code></em>ã€<em><code>exports</code></em>ã€<em><code>require</code></em>ã€<em><code>global</code></em>ã€‚ç”¨<code>module.exports</code>å®šä¹‰å½“å‰æ¨¡å—å¯¹å¤–è¾“å‡ºçš„æ¥å£ï¼ˆä¸æ¨èç›´æ¥ç”¨exportsï¼‰ï¼Œç”¨<code>require</code>åŠ è½½æ¨¡å—ã€‚</p>
<p>CommonJSç”¨åŒæ­¥ä¸çš„æ–¹å¼åŠ è½½æ¨¡å—ã€‚åœ¨æœåŠ¡ç«¯ï¼Œæ¨¡å—æ–‡ä»¶éƒ½å­˜åœ¨æœ¬åœ°ç£ç›˜ï¼Œè¯»å–éå¸¸å¿«ï¼Œæ‰€ä»¥è¿™æ ·ä¸ä¼šæœ‰é—®é¢˜ã€‚ä½†åœ¨æµè§ˆå™¨ç«¯ï¼Œé™äºç½‘ç»œåŸå› ï¼Œæ›´åˆç†æ˜¯ä½¿ç”¨å¼‚æ­¥åŠ è½½ã€‚</p>
<ul>
<li><p>å®šä¹‰æ¨¡å—</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> basicNum = <span class="number">0</span>; </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  add: add,</span><br><span class="line">  basicNum: basicNum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¼•ç”¨æ¨¡å—</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•ç”¨è‡ªå®šä¹‰æ¨¡å—ï¼Œå‚æ•°ä¸ºæ–‡ä»¶è·¯å¾„ï¼Œå¯çœç•¥.js</span></span><br><span class="line"><span class="keyword">var</span> math = <span class="built_in">require</span>(<span class="string">'./math'</span>);</span><br><span class="line">math.add(<span class="number">2</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•ç”¨æ ¸å¿ƒæ¨¡å—ï¼Œä¸éœ€è¦å¸¦è·¯å¾„</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line">http.createService(...).listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br></p>
<h3 id="3-AMDå’Œrequire-js"><a href="#3-AMDå’Œrequire-js" class="headerlink" title="3. AMDå’Œrequire.js"></a>3. AMDå’Œrequire.js</h3><p>AMDè§„èŒƒé‡‡ç”¨å¼‚æ­¥æ–¹å¼åŠ è½½æ¨¡å—ï¼Œæ¨¡å—çš„åŠ è½½ä¸å½±å“å®ƒåé¢è¯­å¥çš„è¿è¡Œã€‚æ‰€æœ‰ä¾èµ–è¿™ä¸ªæ¨¡å—çš„è¯­å¥ï¼Œéƒ½å®šä¹‰åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­ï¼Œç­‰åˆ°åŠ è½½å®Œæˆä¹‹åï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°æ‰ä¼šè¿è¡Œã€‚</p>
<ul>
<li><p>å¼•ç”¨æ¨¡å—</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç½‘é¡µä¸­å¼•å…¥require.jså’Œmain.js</span></span><br><span class="line">&lt;script src=<span class="string">"js/require.js"</span> data-main=<span class="string">"js/main"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js å…¥å£æ–‡ä»¶/ä¸»æ¨¡å—</span></span><br><span class="line"><span class="comment">// 1. ç”¨require.config()æŒ‡å®šå„æ¨¡å—è·¯å¾„å’Œå¼•ç”¨å</span></span><br><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">  baseUrl: <span class="string">'js/lib'</span>,</span><br><span class="line">  paths: &#123;</span><br><span class="line">    <span class="string">'jquery'</span>: <span class="string">'jquery.min'</span>,  <span class="comment">// å®é™…è·¯å¾„ä¸ºjs/lib/jquery.min.js</span></span><br><span class="line">    <span class="string">'underscore'</span>: <span class="string">'underscore.min'</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. ä¾èµ–è¿™ä¸ªæ¨¡å—çš„ä¸€äº›æ“ä½œ</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">"jquery"</span>, <span class="string">"underscore"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">$, _</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// some code here</span></span><br><span class="line">  <span class="built_in">console</span>.log($);</span><br><span class="line">  <span class="built_in">console</span>.log(_);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®šä¹‰æ¨¡å—</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰math.jsæ¨¡å—</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> basicNum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    add: add,</span><br><span class="line">    basicNum: basicNum,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªä¾èµ–underscore.jsçš„æ¨¡å—</span></span><br><span class="line">define([<span class="string">'underscore'</span>],<span class="function"><span class="keyword">function</span>(<span class="params">_</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> classify = <span class="function"><span class="keyword">function</span>(<span class="params">list</span>)</span>&#123;</span><br><span class="line">    _.countBy(list,<span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> num &gt; <span class="number">30</span> ? <span class="string">'old'</span> : <span class="string">'young'</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    classify :classify</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•ç”¨æ¨¡å—ï¼Œå°†æ¨¡å—æ”¾åœ¨[]å†…</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'jquery'</span>, <span class="string">'math'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">$, math</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sum = math.add(<span class="number">10</span>,<span class="number">20</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br></p>
<h3 id="4-CMDä¸sea-js"><a href="#4-CMDä¸sea-js" class="headerlink" title="4. CMDä¸sea.js"></a>4. CMDä¸sea.js</h3><p>require.jsåœ¨ç”³æ˜ä¾èµ–çš„æ¨¡å—æ—¶ä¼šç¬¬ä¸€æ—¶é—´åŠ è½½å¹¶æ‰§è¡Œæ¨¡å—å†…çš„ä»£ç ã€‚CMDæ˜¯å¦ä¸€ç§jsæ¨¡å—åŒ–æ–¹æ¡ˆï¼Œä¸AMDå¾ˆç±»ä¼¼ã€‚AMDæ¨é€ä¾èµ–å‰ç½®ï¼Œæå‰æ‰§è¡Œï¼ŒCMDæ¨å´‡ä¾èµ–å°±è¿‘ï¼Œå»¶è¿Ÿæ‰§è¡Œã€‚æ­¤è§„èŒƒæ˜¯åœ¨sea.jsæ¨å¹¿è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AMDå†™æ³•</span></span><br><span class="line">define([<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  a.doSomething();</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>)&#123;</span><br><span class="line">    <span class="comment">// å³ä½¿æ²¡æœ‰ç”¨åˆ°æ¨¡å—bï¼Œä½†bè¿˜æ˜¯æå‰æ‰§è¡Œäº†</span></span><br><span class="line">    b.doSomething();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// CMDå†™æ³•</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åœ¨éœ€è¦æ—¶æ‰ç”³æ˜</span></span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>);</span><br><span class="line">  a.doSomething();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>sea.jsä½¿ç”¨æ–¹æ³•<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ¨¡å—</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'jquery.js'</span>);</span><br><span class="line">  <span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">  &#125;</span><br><span class="line">  exports.add = add;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ è½½æ¨¡å—</span></span><br><span class="line">seajs.use([<span class="string">'math.js'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">math</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sum = math.add(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="5-åŒºåˆ«"><a href="#5-åŒºåˆ«" class="headerlink" title="5. åŒºåˆ«"></a>5. åŒºåˆ«</h3><h4 id="5-1-å€¼æ‹·è´-å€¼å¼•ç”¨"><a href="#5-1-å€¼æ‹·è´-å€¼å¼•ç”¨" class="headerlink" title="5.1 å€¼æ‹·è´ / å€¼å¼•ç”¨"></a>5.1 å€¼æ‹·è´ / å€¼å¼•ç”¨</h4><p>commonJSæ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚</p>
<ul>
<li><p>commonJSæ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// commonjs.js</span></span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">3</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">incCounter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  counter++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCounter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> counter;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  counter: counter,</span><br><span class="line">  incCounter: incCounter,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">var</span> mod = <span class="built_in">require</span>(<span class="string">'./lib'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(mod.counter);    <span class="comment">// 3</span></span><br><span class="line">mod.incCounter();</span><br><span class="line"><span class="built_in">console</span>.log(mod.counter);    <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(mod.getCounter); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>JSå¼•æ“åœ¨é‡åˆ°ES6æ¨¡å—<code>import</code>å‘½ä»¤æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ªåªè¯»å¼•ç”¨ã€‚ç­‰è„šæœ¬çœŸæ­£æ‰§è¡Œçš„æ—¶å€™ï¼Œæ ¹æ®å¼•ç”¨ï¼Œåˆ°è¢«åŠ è½½çš„æ¨¡å—é‡Œé¢å»å–å€¼ã€‚ES6æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œä¸ä¼šç¼“å­˜å€¼ï¼Œæ¨¡å—é‡Œé¢çš„å˜é‡ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> counter = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">incCounter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  counter ++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="comment">// ES6æ¨¡å—è¾“å‡ºçš„å˜é‡counteræ˜¯æ´»çš„ï¼Œå®Œå…¨ååº”å…¶åœ¨æ¨¡å—lib.jså†…éƒ¨çš„å˜åŒ–</span></span><br><span class="line"><span class="keyword">import</span> &#123; counter, incCounter &#125; <span class="keyword">from</span> <span class="string">'./lib'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(counter);   <span class="comment">// 3</span></span><br><span class="line">incCounter();</span><br><span class="line"><span class="built_in">console</span>.log(counter);   <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å†ä¸¾ä¸€ä¸ªES6 moduleçš„ä¾‹å­ï¼Œè¿‡äº†500æ¯«ç§’ï¼Œfooçš„å€¼ä¼šä»bar -&gt; baz<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// m1.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> foo = <span class="string">"bar"</span>;</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> foo = <span class="string">'baz'</span>, <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// m2.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="string">'./m1.js'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(foo);</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(foo), <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// bar</span></span><br><span class="line"><span class="comment">// baz</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="5-2-è¿è¡Œæ—¶åŠ è½½-ç¼–è¯‘æ—¶åŠ è½½"><a href="#5-2-è¿è¡Œæ—¶åŠ è½½-ç¼–è¯‘æ—¶åŠ è½½" class="headerlink" title="5.2 è¿è¡Œæ—¶åŠ è½½ / ç¼–è¯‘æ—¶åŠ è½½"></a>5.2 è¿è¡Œæ—¶åŠ è½½ / ç¼–è¯‘æ—¶åŠ è½½</h4><p>commonJSå…ˆæ•´ä½“åŠ è½½fsæ¨¡å—ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå†ä»è¿™ä¸ªå¯¹è±¡ä¸Šé¢è¯»å–3ä¸ªæ–¹æ³•ã€‚å› ä¸ºåªæœ‰è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œè¿™ç§åŠ è½½ç§°ä¸ºâ€œè¿è¡Œæ—¶åŠ è½½â€ã€‚</p>
<p>ES6 moduleçš„å†™æ³•ï¼Œå®è´¨æ˜¯ä»fsæ¨¡å—åŠ è½½3ä¸ªæ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•ä¸åŠ è½½ã€‚ä½¿å¾—ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å‡ºå’Œè¾“å…¥çš„å…³ç³»ã€‚CommonJSå’ŒADMOæ¨¡å—ï¼Œéƒ½åªèƒ½åœ¨è¿è¡Œæ—¶ç¡®å®šè¿™äº›ä¸œè¥¿ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CommonJS</span></span><br><span class="line"><span class="keyword">let</span> &#123; stat, exists, readFile &#125; = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 module</span></span><br><span class="line"><span class="keyword">import</span> &#123; stat, exists, readFile &#125; <span class="keyword">from</span> <span class="string">'fs'</span>;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="6-é¿å…å˜é‡å†²çª"><a href="#6-é¿å…å˜é‡å†²çª" class="headerlink" title="6.é¿å…å˜é‡å†²çª"></a>6.é¿å…å˜é‡å†²çª</h3><p>æ¨¡å—åŒ–ä¸»è¦ç”¨æ¥æŠ½ç¦»å…¬ç”¨ä»£ç ï¼Œéš”ç¦»ä½œç”¨åŸŸï¼Œé¿å…å˜é‡å†²çªç­‰ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IIFE: ä½¿ç”¨è‡ªæ‰§è¡Œå‡½æ•°æ¥ç¼–å†™æ¨¡å—åŒ–ï¼Œåœ¨ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ä½œç”¨åŸŸä¸­æ‰§è¡Œä»£ç ï¼Œé¿å…å˜é‡å†²çª</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    data: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// AMD: ä½¿ç”¨require.jsæ¥ç¼–å†™æ¨¡å—åŒ–ï¼Œç‰¹ç‚¹ï¼šä¾èµ–å¿…é¡»æå‰å£°æ˜å¥½</span></span><br><span class="line">define(<span class="string">'./index.js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">code</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// codeå°±æ˜¯ index.js è¿”å›çš„å†…å®¹</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// CMD: ä½¿ç”¨seaJSæ¥ç¼–å†™æ¨¡å—åŒ–ï¼Œç‰¹ç‚¹ï¼šæ”¯æŒåŠ¨æ€å¼•å…¥ä¾èµ–æ–‡ä»¶</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> indexCode = <span class="built_in">require</span>(<span class="string">'./index.js'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// CommonJS: nodejsä¸­è‡ªå¸¦çš„æ¨¡å—åŒ–</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES Modules: ESå¼•å…¥çš„æ¨¡å—åŒ–ï¼Œæ”¯æŒimportæ¥å¼•å…¥ä¸€ä¸ªjs</span></span><br><span class="line"><span class="keyword">import</span> &#123; a &#125; <span class="keyword">from</span> <span class="string">'./index.js'</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul>
<li><a href="http://es6.ruanyifeng.com/#docs/module" target="_blank" rel="noopener">Moduleçš„è¯­æ³•</a></li>
<li><a href="http://es6.ruanyifeng.com/#docs/module-loader" target="_blank" rel="noopener">Module çš„åŠ è½½å®ç°</a></li>
<li><a href="https://juejin.im/post/5aaa37c8f265da23945f365c" target="_blank" rel="noopener">å‰ç«¯æ¨¡å—åŒ–ï¼šCommonJS,AMD,CMD,ES6</a></li>
</ul>

    </div>
  </article>
    
    <div class="post-nav">
      <div class="post-nav-item post-nav-next">
        
          <span>ã€ˆ </span>
          <a href="/2019/06/10/æ­£åˆ™è¡¨è¾¾å¼/" rel="next" title="ğŸ¤” æ­£åˆ™è¡¨è¾¾å¼">
          ğŸ¤” æ­£åˆ™è¡¨è¾¾å¼
          </a>
        
      </div>
  
      <div class="post-nav-item post-nav-prev">
        
          <a href="/2019/06/13/æµè§ˆå™¨/" rel="prev" title="ğŸ¤” ä»è¾“å…¥URLåˆ°é¡µé¢æ˜¾ç¤ºå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ(EventLoop)">
            ğŸ¤” ä»è¾“å…¥URLåˆ°é¡µé¢æ˜¾ç¤ºå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ(EventLoop)
          </a>
          <span>ã€‰</span>
        
      </div>
    </div>
  
</div>


<script>
var link = document.getElementsByClassName('toc-link');
var hash = decodeURIComponent(location.hash);
if (hash){
} else {
  link[0].classList.add('toc-link-active');
}

var h3 = document.getElementsByTagName('h3');
var h4 = document.getElementsByTagName('h4');
var h5 = document.getElementsByTagName('h5');
var link_arr = [];
function addToArr(arr){
  for(var i = 0; i < arr.length; i++){
    link_arr.push(arr[i].offsetTop);
  }
}
addToArr(h3);
addToArr(h4);
addToArr(h5);


var compare = function (x, y) {
    if (x < y) {
        return -1;
    } else if (x > y) {
        return 1;
    } else {
        return 0;
    }
}

link_arr.sort(compare);


window.onscroll = function(){
  var height = document.documentElement.scrollTop;
  for (var i = 0; i < link_arr.length; i++){
    if (link_arr[i] > height){
      for(var j = 0; j < link.length; j++){
        link[j].classList.remove('toc-link-active');
      }
      document.getElementsByClassName('toc-link')[i].classList.add('toc-link-active');
      break;
    } 
  }
}

</script>
    </div>
  </div>
  




    <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js"></script>
    
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // listen to any DOM change and automatically perform spacing via MutationObserver()
        pangu.autoSpacingPage();
      });

      window.addEventListener("load", event => {
        // åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ
        if ("serviceWorker" in navigator) {
          window.navigator.serviceWorker
            .register("/sw.js", {
              scope: "/"
            })
        }
      });
    </script>
</body>
</html>

