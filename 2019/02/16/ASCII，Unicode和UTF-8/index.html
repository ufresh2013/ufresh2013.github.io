
<!DOCTYPE html>
<html lang="">


  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#202020">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    
        <meta name="keywords" content="">
        

          
              <meta name="description" content="字符集和字符编码 Charset &amp; Encoding">
              

                <link rel="icon" type="image/x-icon" href="data:image/png;base64,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">
                <title>
                  字符集和字符编码 Charset &amp; Encoding [ 开发笔记 ]
                </title>
                
                  <!-- stylesheets list from config.yml -->
                  
                    <link rel="stylesheet" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css">
                    
                    <link rel="stylesheet" href="/css/microb.css">
                    
                      
  </head>

<body>
  <div class="container" id="content-outer">
    <div class="inner" id="content-inner">
        <div class="tab">
            <a href="/"><img src="/left.png" /></a>
            <span><a href="/">开发笔记</a></span>
            <!-- <span><a class="tab-search" href="/search/">搜索</a></span> -->
            
              <span><a class="tab-title" id="#Basic" href="/#Basic">Basic</a></span>
            
              <span><a class="tab-title" id="#Browser" href="/#Browser">Browser</a></span>
            
              <span><a class="tab-title" id="#Bug" href="/#Bug">Bug</a></span>
            
              <span><a class="tab-title" id="#CSS" href="/#CSS">CSS</a></span>
            
              <span><a class="tab-title" id="#Debug" href="/#Debug">Debug</a></span>
            
              <span><a class="tab-title" id="#HTML" href="/#HTML">HTML</a></span>
            
              <span><a class="tab-title" id="#HTTP" href="/#HTTP">HTTP</a></span>
            
              <span><a class="tab-title" id="#JS" href="/#JS">JS</a></span>
            
              <span><a class="tab-title" id="#LeetCode" href="/#LeetCode">LeetCode</a></span>
            
              <span><a class="tab-title" id="#NodeJS" href="/#NodeJS">NodeJS</a></span>
            
              <span><a class="tab-title" id="#React" href="/#React">React</a></span>
            
              <span><a class="tab-title" id="#Vue" href="/#Vue">Vue</a></span>
            
              <span><a class="tab-title" id="#Work" href="/#Work">Work</a></span>
            
              <span><a class="tab-title" id="#草稿" href="/#草稿">草稿</a></span>
            
          </div>
      
  <div id="toc" class="toc-article">
    <!--<strong class="toc-title">目录</strong>-->
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-历史渊源"><span class="toc-text">1. 历史渊源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-ASCII码"><span class="toc-text">1.1 ASCII码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-GBK"><span class="toc-text">1.2 GBK</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-Unicode"><span class="toc-text">1.3 Unicode</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-UFT-8"><span class="toc-text">1.4 UFT-8</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-Charset-and-Encoding"><span class="toc-text">1.5. Charset and Encoding</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-乱码"><span class="toc-text">2. 乱码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-转义字符"><span class="toc-text">3. 转义字符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-C"><span class="toc-text">3.1 C</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-html"><span class="toc-text">3.1 html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-js"><span class="toc-text">3.2 js</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-URL编码函数"><span class="toc-text">4. URL编码函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-浏览器编码"><span class="toc-text">4.1 浏览器编码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-escape"><span class="toc-text">4.2 escape</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-encodeURI"><span class="toc-text">4.3 encodeURI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-encodeURIComponent"><span class="toc-text">4.4 encodeURIComponent</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-ES6字符串"><span class="toc-text">5. ES6字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-UTF-16码位"><span class="toc-text">5.1 UTF-16码位</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-codePointAt"><span class="toc-text">5.2 codePointAt</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-fromCodePoint"><span class="toc-text">5.3 fromCodePoint</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-normalize"><span class="toc-text">5.4 normalize</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考资料"><span class="toc-text">参考资料</span></a></li></ol>
  </div>


<div class="section">
  <article class="post" id="post">
    <header class="post-header text-center">
      <h1 class="title">
        字符集和字符编码 Charset &amp; Encoding
      </h1>
      
      <time class="time" datetime="2019-02-16T09:57:46.000Z">
        2019-02-16
      </time>
      
      <hr>
    </header>
    <div class="post-content">
      <p>一直听说<code>ASCII</code>, <code>Unicode</code>, <code>UTF-8</code>这些词，但是不知道具体意思。痛定思痛，决定总结一下。<br><br></p>
<h3 id="1-历史渊源"><a href="#1-历史渊源" class="headerlink" title="1. 历史渊源"></a>1. 历史渊源</h3><h4 id="1-1-ASCII码"><a href="#1-1-ASCII码" class="headerlink" title="1.1 ASCII码"></a>1.1 ASCII码</h4><p>我们知道，在计算机内部，所有的信息最终都表示为一个二进制的字符串。每一个二进制位(bit)有0和1两种状态，因此8个二进制位可以组合出<code>256</code>中状态，这被称为一个字节(byte)。</p>
<p>上世纪60年代，美国制定了一套字符编码，对英语字符与二进制之间的关系，做了统一规定。这被称为<code>ASCII码(American Standard Code for Information Interchange)</code>，一直沿用至今。ASCII码一共规定了128个字符的编码。比如空格是32(二进制00100000)，大写的字母A是65(二进制01000001)。这128个符号，只占用了一个字节的后面7位，最前面的1位统一规定为0。<br><br></p>
<h4 id="1-2-GBK"><a href="#1-2-GBK" class="headerlink" title="1.2 GBK"></a>1.2 GBK</h4><p>后来，世界各地都开始使用计算机，但是很多国家用的不是英文，他们的字母里有很多是<code>ASCII</code>里没有的。等到中国人民用计算机之后，发现没有中文怎么办呢？</p>
<p>中国人的解决方案是：小于127号的还是继续使用，并且用2个大于127字节表示一个中文字符。在这些编码里，我们还把数学符号、罗马希腊的字母、日本的假名们都编进去了，连在ASCII里本来就有的数字、标点、字母都统统重新编了两个字节长的编码，这就是常说的 <em>全角</em> 字符，而原来在127号以下的那些就叫 <em>半角</em> 字符了。</p>
<p>这套编码方案被称为<code>GBK</code>标准。中国的程序员看到这一系列汉字编码的标准是好的，于是把它通称为<code>DBCS</code>(Double Byte Charecter Set 双字节字符集)。<br><br></p>
<h4 id="1-3-Unicode"><a href="#1-3-Unicode" class="headerlink" title="1.3 Unicode"></a>1.3 Unicode</h4><p>但是每个国家都搞自己的字符编码，自己只能看自己，别人的看不来，这不符合web开放的文化啊。</p>
<p>正在这时一个叫ISO（国际标准化组织）的国际组织决定解决这个问题。他们采用的方法很简单：废了所有地区性编码方案，重新搞了一个包括了地球上所有文化、所有字母和符号的编码！他们打算叫它”Universal Multiple-Octet Coded Character Set”，简称UCS, 俗称<code>Unicode</code>。</p>
<p><code>Unicode</code>开始制定时，计算机的存储器容量极大地发展了，空间不再成为问题。于是ISO就直接规定必须用<strong>两个字节</strong>， 16位来统一表示所有的字符，对于ASCII里那些“半角字符”， 也将其长度由原来的8位扩展至16位。这种大气的方案使得保存英文文本时会浪费多一倍的空间。</p>
<p><br></p>
<h4 id="1-4-UFT-8"><a href="#1-4-UFT-8" class="headerlink" title="1.4 UFT-8"></a>1.4 UFT-8</h4><p><strong>Unicode有两个严重的问题</strong>: 1. 怎样区别Unicode和ASCII？计算机怎么知道2个字节为1个字符，还是1个字节为1个字符。2. 计算机大部分内容还是英文，Unicode的编码方式很浪费空间。</p>
<p>Unicode在很长一段时间内无法推广。直到互联网的出现，强烈要求出现统一的编码方式。<code>UTF-8</code>就是互联网上使用最广的一种Unicode的实现方式。UTF-8最大的一个特点，就是它是一种<em>变长的编码方式</em>。它可以使用1~4个字节表示一个符号。UTF-8的编码规则很简单，只有两条：</p>
<ul>
<li><p>对于单字节的符号，字节的第一位设为0，后面7位为这个符号的unicode码。因此对于英文字母，UTF-8编码和ASCII码是相同的。</p>
</li>
<li><p>对于n字节的符号(n &gt; 1)， 第一个字节的前n位都设为1， 第n+1位设为0，后面字节的前两位一律设为10.剩下的没有提及的二进制位，全部为这个符号的unicode码。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Unicode符号范围       | UTF-8编码方式</span><br><span class="line">(十六进制)            | 二进制</span><br><span class="line">0000 0000-0000 007F | 0xxxxxxx</span><br><span class="line">0000 0080-0000 07FF | 110xxxxx 10xxxxxx</span><br><span class="line">0000 0800-0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx</span><br><span class="line">0001 0000-0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</span><br></pre></td></tr></table></figure>
<p><br></p>
<h4 id="1-5-Charset-and-Encoding"><a href="#1-5-Charset-and-Encoding" class="headerlink" title="1.5. Charset and Encoding"></a>1.5. Charset and Encoding</h4><p>所以, 字符集和字符编码，你可以这样理解</p>
<ul>
<li><p><em><code>Charset(Character set) 字符集</code></em><br>是对字符抽象表示的集合。包括世界上各种文字、符号。</p>
</li>
<li><p><em><code>Encoding(Character Encoding) 字符编码</code></em><br>建立字符集合和计算机系统对应的规则。简单来说就是，将字符转化为计算机可识别的二进制编码的规则。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=Content-Type content=&quot;text/html;charset=utf-8&quot;&gt;</span><br></pre></td></tr></table></figure>
<p><br> </p>
<h3 id="2-乱码"><a href="#2-乱码" class="headerlink" title="2. 乱码"></a>2. 乱码</h3><p>编码A和编码B采用不同方式来编码，当一个文件使用编码A在只有编码B的设备上解码，就会出现乱码。</p>
<p><br></p>
<h3 id="3-转义字符"><a href="#3-转义字符" class="headerlink" title="3. 转义字符"></a>3. 转义字符</h3><p>所有编程语言，都拥有转义字符。</p>
<p><em>出现转义字符的原因</em></p>
<ul>
<li>使用转义字符来表示没有现成文字代号的字符，如回车，换行，ASCII里的控制字符。</li>
<li>一些特定的字符在语言中被定义为特殊用途，失去了原来的意义。</li>
</ul>
<p><em>转义字符的作用</em></p>
<ul>
<li>用于表示不能直接显示的字符</li>
<li>将有特殊意义的字符转换回它原来的意义</li>
<li>处于网站安全，在数据写入数据库前，都会使用转义字符对一些敏感字符转义</li>
</ul>
<p><br></p>
<h4 id="3-1-C"><a href="#3-1-C" class="headerlink" title="3.1 C"></a>3.1 C</h4><p>所有ASCII码都可以用<code>\</code>加8进制数字来表示。C中定义了一些字母前加<code>\</code>来表示常见的，不能显示的ASCII字符，成为转义字符。</p>
<table>
<thead>
<tr>
<th>转义字符</th>
<th style="text-align:center">意义</th>
<th style="text-align:right">ASCII码值(十进制)</th>
</tr>
</thead>
<tbody>
<tr>
<td>\a</td>
<td style="text-align:center">响铃</td>
<td style="text-align:right">007</td>
</tr>
<tr>
<td>\b</td>
<td style="text-align:center">退格</td>
<td style="text-align:right">008</td>
</tr>
<tr>
<td>\f</td>
<td style="text-align:center">换页</td>
<td style="text-align:right">012</td>
</tr>
<tr>
<td>\n</td>
<td style="text-align:center">换行</td>
<td style="text-align:right">010</td>
</tr>
<tr>
<td>\r</td>
<td style="text-align:center">回车</td>
<td style="text-align:right">013</td>
</tr>
<tr>
<td>\t</td>
<td style="text-align:center">水平制表（跳到下一个tab）位置</td>
<td style="text-align:right">009</td>
</tr>
<tr>
<td>\v</td>
<td style="text-align:center">垂直制表</td>
<td style="text-align:right">011</td>
</tr>
<tr>
<td><code>\\</code></td>
<td style="text-align:center">代表一个反斜线字符<code>\</code></td>
<td style="text-align:right">092</td>
</tr>
<tr>
<td>\’</td>
<td style="text-align:center">代表一个单引号</td>
<td style="text-align:right">039</td>
</tr>
<tr>
<td>\”</td>
<td style="text-align:center">代表一个双引号字符</td>
<td style="text-align:right">034</td>
</tr>
<tr>
<td>\?</td>
<td style="text-align:center">代表一个问号</td>
<td style="text-align:right">063</td>
</tr>
<tr>
<td>\0</td>
<td style="text-align:center">空字符()</td>
<td style="text-align:right">000</td>
</tr>
<tr>
<td>\ddd</td>
<td style="text-align:center">1到3位八进制数所代表的任意字符</td>
<td style="text-align:right">三位八进制</td>
</tr>
<tr>
<td>\xhh</td>
<td style="text-align:center">1到2位十六进制所代表的任意字符</td>
<td style="text-align:right">二位十六进制</td>
</tr>
</tbody>
</table>
<p><br></p>
<h4 id="3-1-html"><a href="#3-1-html" class="headerlink" title="3.1 html"></a>3.1 html</h4><p>HTML中<code>&lt;</code>, <code>&gt;</code>, <code>&amp;</code>等有特殊含义(&lt;&gt;用于标签符，&amp;用于转义)，常用</p>
<table>
<thead>
<tr>
<th>显示</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">实体名称</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;</td>
<td style="text-align:center">小于</td>
<td style="text-align:center"><code>&amp;lt;</code></td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td style="text-align:center">大于</td>
<td style="text-align:center"><code>&amp;gt;</code></td>
</tr>
<tr>
<td>&amp;</td>
<td style="text-align:center">&amp;符号</td>
<td style="text-align:center"><code>&amp;amp;</code></td>
</tr>
<tr>
<td>“</td>
<td style="text-align:center">双引号</td>
<td style="text-align:center"><code>&amp;quot;</code></td>
</tr>
<tr>
<td></td>
<td style="text-align:center">不断行的空白格</td>
<td style="text-align:center"><code>&amp;nbsp;</code></td>
</tr>
</tbody>
</table>
<p><br></p>
<h4 id="3-2-js"><a href="#3-2-js" class="headerlink" title="3.2 js"></a>3.2 js</h4><p><code>\</code>反斜杠用来在文本字符串中插入特殊字符。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var txt = &quot;We are the so-called \&quot;Vikings\&quot; from the north.&quot;</span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th>代码</th>
<th style="text-align:center">输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>\’</td>
<td style="text-align:center">单引号</td>
</tr>
<tr>
<td>\”</td>
<td style="text-align:center">双引号</td>
</tr>
<tr>
<td>\&amp;</td>
<td style="text-align:center">和号</td>
</tr>
<tr>
<td><code>\\</code></td>
<td style="text-align:center">反斜杠</td>
</tr>
<tr>
<td>\n</td>
<td style="text-align:center">换行符</td>
</tr>
<tr>
<td>\r</td>
<td style="text-align:center">回车符</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="4-URL编码函数"><a href="#4-URL编码函数" class="headerlink" title="4. URL编码函数"></a>4. URL编码函数</h3><p>世界上有英文字母的网址<code>“http://www.baidu.com”</code>,但是没有希腊字母的网址<code>“http://www.aβγ.com”</code>。这是因为网络标准RFC 1738做了硬性规定：</p>
<blockquote>
<p>“…Only alphanumerics [0-9a-zA-Z], the special characters “$-_.+!*’(),” [not including the quotes - ed], and reserved characters used for their reserved purposes may be used unencoded within a URL.”</p>
</blockquote>
<p>只有字母和数字[0-9a-zA-Z],一些特殊符号<code>$-_.+!*&#39;(),</code>(不包括双引号),以及某些保留字，才可以不经过编码直接用于URL。这意味着，如果URL中有汉字，就必须编码后使用。但麻烦的是，RFC1738没有规定具体的编码方法，于是有了编码函数。</p>
<p><br></p>
<h4 id="4-1-浏览器编码"><a href="#4-1-浏览器编码" class="headerlink" title="4.1 浏览器编码"></a>4.1 浏览器编码</h4><p>当网址路径中包含汉字，<code>GET</code>和<code>POST</code>查询字符串中包含汉字时<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.haoroom.con/search?keywords=您好</span><br></pre></td></tr></table></figure></p>
<p>编码方法由网页的编码决定<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=xxxx&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="4-2-escape"><a href="#4-2-escape" class="headerlink" title="4.2 escape"></a>4.2 escape</h4><p><code>escape()</code>已被弃用，它的作用是返回字符的Unicode编码值。对应的解码函数是<code>unescape</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">javascript:escape(&quot;春节&quot;);</span><br><span class="line">// &quot;%u6625%u8282&quot;</span><br><span class="line"></span><br><span class="line">javascript:escape(&quot;hello word&quot;);</span><br><span class="line">// &quot;hello%20word&quot;</span><br></pre></td></tr></table></figure></p>
<p>无论网页的原始编码是什么，一旦被javascript编码，都会变成Unicode字符。也就是，Javascript的输入和输出都是unicode字符。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">javascript:escape(&quot;\u6625\u8282&quot;);</span><br><span class="line">// &quot;%u6625%u8282&quot;</span><br><span class="line"></span><br><span class="line">javascript:unescape(&quot;%u6625%u8282&quot;);</span><br><span class="line">// &quot;春节&quot;</span><br><span class="line"></span><br><span class="line">javascript:unescape(&quot;\u6625\u8282&quot;);</span><br><span class="line">// &quot;春节&quot;</span><br></pre></td></tr></table></figure></p>
<p>其次，<code>escape()</code>不对<code>+</code>编码。但是，网页在提交表单的时候，如果有空格，则会被转化为<code>+</code>字符。服务器处理数据的时候，会把<code>+</code>号处理成空格。所以，使用的时候要小心。</p>
<p><br></p>
<h4 id="4-3-encodeURI"><a href="#4-3-encodeURI" class="headerlink" title="4.3 encodeURI"></a>4.3 encodeURI</h4><p>对整个URI进行编码。除了常见的符号外， 对特殊符号<code>&#39;;/?:@&amp;=+$,#</code>不进行编码。编码后，输出符号是<code>UTF-8</code>形式，并且在每个字节上前加上<code>%</code>。对应的解码函数是<code>decodeURI</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">encodeURI(&apos;https://www.baidu.com/s?wd=中文&apos;)</span><br><span class="line">// &quot;https://www.baidu.com/s?wd=%E4%B8%AD%E6%96%87&quot;</span><br></pre></td></tr></table></figure>
<p>需要注意的是，它不对单引号<code>&#39;</code>编码。<br><br></p>
<h4 id="4-4-encodeURIComponent"><a href="#4-4-encodeURIComponent" class="headerlink" title="4.4 encodeURIComponent"></a>4.4 encodeURIComponent</h4><p>对于<code>&#39;;/?:@&amp;=+$,#</code>，这些在<code>encodeURI</code>中不被编码的符号，在<code>encodeURIComponent</code>中统统会被编码。对应的解码函数是<code>decodeURIComponent</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">encodeURIComponent(&quot;https://www.baidu.com/s?wd=中文&quot;)</span><br><span class="line">// &quot;https%3A%2F%2Fwww.baidu.com%2Fs%3Fwd%3D%E4%B8%AD%E6%96%87&quot;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="5-ES6字符串"><a href="#5-ES6字符串" class="headerlink" title="5. ES6字符串"></a>5. ES6字符串</h3><p>ES6加强了对Unicode的支持，并且扩展了字符串对象。</p>
<h4 id="5-1-UTF-16码位"><a href="#5-1-UTF-16码位" class="headerlink" title="5.1 UTF-16码位"></a>5.1 UTF-16码位</h4><p>在ES6出现前，Javascript字符串一直基于16位字符编码(UTF-16)进行构建。过去16位足以包含任何字符，直到Unicode引入扩展字符集，编码规则才不得不进行更改。为此，<code>UTF-16</code>引入了代理对，规定了用两个16位编码单元表示一个码位。<br>因此，字符串里的字符有两种:</p>
<ul>
<li>一种是由一个编码单元16位表示的BMP字符</li>
<li>另一种是由两个编码单元32位表示的辅助平面字符。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;\uD842\uDFB7&quot;</span><br><span class="line">// &quot;𠮷&quot;</span><br><span class="line"></span><br><span class="line">&quot;\u0061&quot;</span><br><span class="line">// &quot;a&quot;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h4 id="5-2-codePointAt"><a href="#5-2-codePointAt" class="headerlink" title="5.2 codePointAt"></a>5.2 codePointAt</h4><p><code>codePointAt</code>方法接受编码单元的位置而非字符位置作为参数，返回与字符串中给定位置对应的码位。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let text = &quot;𠮷a&quot;;</span><br><span class="line">console.log(text.charCodeAt(0)) // 55362</span><br><span class="line">console.log(text.charCodeAt(1)) // 57271</span><br><span class="line">console.log(text.charCodeAt(2)) // 97</span><br><span class="line"></span><br><span class="line">// codePointAt能够正确处理4个字节储存的字符，返回一个字符的码点。</span><br><span class="line">console.log(text.codePointAt(0)) // 134071</span><br><span class="line">console.log(text.codePointAt(1)) // 57271</span><br><span class="line">console.log(text.codePointAt(2)) // 97</span><br></pre></td></tr></table></figure></p>
<p>检测一个字符占用的编码单元数量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function is32Bit(c)&#123;</span><br><span class="line">	return c.codePointAt(0) &gt; 0xFFFF;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="5-3-fromCodePoint"><a href="#5-3-fromCodePoint" class="headerlink" title="5.3 fromCodePoint"></a>5.3 fromCodePoint</h4><p>根据指定的码位生成一个字符。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String.fromCodePoint(134071) // &quot;𠮷&quot;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="5-4-normalize"><a href="#5-4-normalize" class="headerlink" title="5.4 normalize"></a>5.4 normalize</h4><p>如果我们要对不同字符进行排序或对比，一定先把它们标准化为同一种形式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text.normalize()</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><br></p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul>
<li><a href="http://chunge2016.online/2017/05/19/ASCII%EF%BC%8CUnicode%E5%92%8CUTF-8-Charset-and-Encoding/" target="_blank" rel="noopener">ASCII，Unicode和UTF-8 (Charset and Encoding)</a></li>
<li><a href="https://www.cnblogs.com/liupp123/articles/8023861.html" target="_blank" rel="noopener">字符编码中ASCII、Unicode和UTF-8的区别</a></li>
<li><a href="https://baike.baidu.com/item/%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6/86397?fr=aladdin" target="_blank" rel="noopener">转义字符</a></li>
<li><a href="https://www.haorooms.com/post/js_escape_encodeURIComponent" target="_blank" rel="noopener">url的三个js编码函数escape(),encodeURI(),encodeURIComponent()简介</a></li>
<li><a href="http://es6.ruanyifeng.com/?search=char&amp;x=0&amp;y=0#docs/string#%E5%AD%97%E7%AC%A6%E7%9A%84-Unicode-%E8%A1%A8%E7%A4%BA%E6%B3%95" target="_blank" rel="noopener">字符串的扩展</a></li>
<li>《深入理解ES6》第二章 字符串和正则表达式</li>
</ul>

    </div>
  </article>
    
    <div class="post-nav">
      <div class="post-nav-item post-nav-next">
        
          <span>〈 </span>
          <a href="/2019/02/16/Web安全/" rel="next" title="Web安全">
          Web安全
          </a>
        
      </div>
  
      <div class="post-nav-item post-nav-prev">
        
          <a href="/2019/02/26/《Javascript高级程序设计》/" rel="prev" title="《Javascript高级程序设计》">
            《Javascript高级程序设计》
          </a>
          <span>〉</span>
        
      </div>
    </div>
  
</div>


<script>
var link = document.getElementsByClassName('toc-link');
var hash = decodeURIComponent(location.hash);
if (hash){
} else {
  link[0].classList.add('toc-link-active');
}

var h3 = document.getElementsByTagName('h3');
var h4 = document.getElementsByTagName('h4');
var h5 = document.getElementsByTagName('h5');
var link_arr = [];
function addToArr(arr){
  for(var i = 0; i < arr.length; i++){
    link_arr.push(arr[i].offsetTop);
  }
}
addToArr(h3);
addToArr(h4);
addToArr(h5);


var compare = function (x, y) {
    if (x < y) {
        return -1;
    } else if (x > y) {
        return 1;
    } else {
        return 0;
    }
}

link_arr.sort(compare);


window.onscroll = function(){
  var height = document.documentElement.scrollTop;
  for (var i = 0; i < link_arr.length; i++){
    if (link_arr[i] > height){
      for(var j = 0; j < link.length; j++){
        link[j].classList.remove('toc-link-active');
      }
      document.getElementsByClassName('toc-link')[i].classList.add('toc-link-active');
      break;
    } 
  }
}

</script>
    </div>
  </div>
  




    <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js"></script>
    
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // listen to any DOM change and automatically perform spacing via MutationObserver()
        pangu.autoSpacingPage();
      });

      window.addEventListener("load", event => {
        // 判断浏览器是否支持
        if ("serviceWorker" in navigator) {
          window.navigator.serviceWorker
            .register("/sw.js", {
              scope: "/"
            })
        }
      });
    </script>
</body>
</html>

