
<!DOCTYPE html>
<html lang="">


  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#202020">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    
        <meta name="keywords" content="">
        

          
              <meta name="description" content="Redux + React-Redux å·¥ä½œåŸç†">
              

                <link rel="icon" type="image/x-icon" href="data:image/png;base64,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">
                <title>
                  Redux + React-Redux å·¥ä½œåŸç† [ å¼€å‘ç¬”è®° ]
                </title>
                
                  <!-- stylesheets list from config.yml -->
                  
                    <link rel="stylesheet" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css">
                    
                    <link rel="stylesheet" href="/css/microb.css">
                    
                      
  </head>

<body>
  <div class="container" id="content-outer">
    <div class="inner" id="content-inner">
        <div class="tab">
            <a href="/"><img src="/left.png" /></a>
            <span><a href="/">å¼€å‘ç¬”è®°</a></span>
            <!-- <span><a class="tab-search" href="/search/">æœç´¢</a></span> -->
            
              <span><a class="tab-title" id="#Basic" href="/#Basic">Basic</a></span>
            
              <span><a class="tab-title" id="#Browser" href="/#Browser">Browser</a></span>
            
              <span><a class="tab-title" id="#Bug" href="/#Bug">Bug</a></span>
            
              <span><a class="tab-title" id="#CSS" href="/#CSS">CSS</a></span>
            
              <span><a class="tab-title" id="#Debug" href="/#Debug">Debug</a></span>
            
              <span><a class="tab-title" id="#HTML" href="/#HTML">HTML</a></span>
            
              <span><a class="tab-title" id="#HTTP" href="/#HTTP">HTTP</a></span>
            
              <span><a class="tab-title" id="#JS" href="/#JS">JS</a></span>
            
              <span><a class="tab-title" id="#LeetCode" href="/#LeetCode">LeetCode</a></span>
            
              <span><a class="tab-title" id="#NodeJS" href="/#NodeJS">NodeJS</a></span>
            
              <span><a class="tab-title" id="#React" href="/#React">React</a></span>
            
              <span><a class="tab-title" id="#Vue" href="/#Vue">Vue</a></span>
            
              <span><a class="tab-title" id="#Work" href="/#Work">Work</a></span>
            
              <span><a class="tab-title" id="#è‰ç¨¿" href="/#è‰ç¨¿">è‰ç¨¿</a></span>
            
          </div>
      
  <div id="toc" class="toc-article">
    <!--<strong class="toc-title">ç›®å½•</strong>-->
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-é€‚ç”¨åœºæ™¯"><span class="toc-text">1. é€‚ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Reduxæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ"><span class="toc-text">2. Reduxæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-å®ç°ä¸€ä¸ªRedux"><span class="toc-text">3. å®ç°ä¸€ä¸ªRedux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-è§†å›¾æ›´æ–°"><span class="toc-text">4. è§†å›¾æ›´æ–°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-useReducer-ä»£æ›¿-Redux"><span class="toc-text">5. useReducer ä»£æ›¿ Redux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-ç°åœ¨çš„Redux"><span class="toc-text">6. ç°åœ¨çš„Redux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å‚è€ƒèµ„æ–™"><span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li></ol>
  </div>


<div class="section">
  <article class="post" id="post">
    <header class="post-header text-center">
      <h1 class="title">
        Redux + React-Redux å·¥ä½œåŸç†
      </h1>
      
      <time class="time" datetime="2024-10-25T03:48:17.000Z">
        2024-10-25
      </time>
      
      <hr>
    </header>
    <div class="post-content">
      <blockquote>
<p>æ›¾å‡ ä½•æ—¶ï¼ŒRedux ä½œä¸º React å…¨å®¶æ¡¶çš„å›ºå®šæˆå‘˜ï¼Œå‡ ä¹æ˜¯é¢è¯•å¿…è€ƒé¢˜ã€‚Redux åšäº†ä»€ä¹ˆï¼Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼ŸåŸç†æ˜¯å•¥ï¼ŸHookså‡ºæ¥ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®ƒå—ï¼Ÿ</p>
</blockquote>
<h3 id="1-é€‚ç”¨åœºæ™¯"><a href="#1-é€‚ç”¨åœºæ™¯" class="headerlink" title="1. é€‚ç”¨åœºæ™¯"></a>1. é€‚ç”¨åœºæ™¯</h3><p>å½“ä¸€ä»½æ•°æ®éœ€è¦å…¨å±€å…±äº«æ—¶ï¼Œå¦‚æœä¸ä½¿ç”¨ Redux çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œä¸æŒ‰ç…§ä¸€å®šè§„å¾‹å¤„ç†çŠ¶æ€çš„è¯»å†™ï¼Œä½ çš„ä»£ç å¾ˆå¿«å°±ä¼šå˜æˆä¸€å›¢ä¹±éº»ã€‚<br>è¿™ä¸ªæ—¶å€™ä½ éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥åœ¨å…¨å±€åŒä¸€ä¸ªåœ°æ–¹æŸ¥è¯¢çŠ¶æ€ã€æ”¹å˜çŠ¶æ€ã€ä¼ æ’­çŠ¶æ€çš„å˜åŒ–ã€‚<br><em>Redux</em> å°±æ˜¯è¿™ä¸ªæœºåˆ¶ã€‚</p>
<p><br></p>
<h3 id="2-Reduxæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ"><a href="#2-Reduxæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ" class="headerlink" title="2. Reduxæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ"></a>2. Reduxæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ</h3><p>é¦–å…ˆï¼Œæ‰€æœ‰çš„çŠ¶æ€ï¼Œéƒ½ä¿å­˜åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œã€‚</p>
<ul>
<li><em><code>store</code></em>ï¼šä¿å­˜æ•°æ®çš„åœ°æ–¹</li>
<li><em><code>state</code></em>: æ˜¯storeå½“å‰æ—¶åˆ»çš„å¿«ç…§ï¼Œå¯ä»¥é€šè¿‡<code>store.getState()</code>è·å¾—</li>
<li><em><code>action</code></em>: è¡¨ç¤ºå½“å‰è¦æ‰§è¡Œçš„æ“ä½œï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ <code>const action = { type: &#39;ADD_TODO&#39;ï¼Œ payload: 1 }</code></li>
<li><em><code>dispatch</code></em>: æ˜¯å‘å‡ºActionçš„å”¯ä¸€åŠæ³•</li>
<li><em><code>reduer</code></em>: storeæ”¶åˆ°actionåï¼Œå¿…é¡»ç»™å‡ºä¸€ä¸ªå…¨æ–°çš„stateï¼Œè¿™æ ·viewæ‰å‘ç”Ÿå˜åŒ–ã€‚è¿™ç§stateçš„è®¡ç®—è¿‡ç¨‹å°±å«reducerã€‚<br>Reducer å‡½æ•°æœ€é‡è¦çš„ç‰¹å¾æ˜¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªçº¯å‡½æ•°ã€‚åªè¦æ˜¯åŒæ ·çš„è¾“å…¥ï¼Œå¿…å®šå¾—åˆ°åŒæ ·çš„è¾“å‡ºã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¿…é¡»æ˜¯å…¨æ–°çš„å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.assign(&#123;&#125;, state, &#123; thingToChange &#125;);</span><br><span class="line">  <span class="comment">// æˆ–è€…</span></span><br><span class="line">  <span class="keyword">return</span> &#123; ...state, ...newState &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<!-- - *`subscribe`*: Store å…è®¸ä½¿ç”¨store.subscribeæ–¹æ³•è®¾ç½®ç›‘å¬å‡½æ•°ï¼Œä¸€æ—¦ State å‘ç”Ÿå˜åŒ–ï¼Œå°±è‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚ -->
<p><br></p>
<p><em>æ•´ä¸ªæµç¨‹å¦‚ä¸‹ï¼š</em><br>è®©ç”¨æˆ·å‘å‡ºactionï¼ŒReducerå‡½æ•°ç®—å‡ºæ–°çš„State, Viewé‡æ–°æ¸²æŸ“ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> defaultState = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> reducer = <span class="function">(<span class="params">state = defaultState, action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'ADD'</span>:</span><br><span class="line">      <span class="keyword">return</span> state + action.payload;</span><br><span class="line">    <span class="keyword">default</span>: </span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// store.dispatchè§¦å‘reduerçš„è‡ªåŠ¨æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">const</span> state = reducer(<span class="number">1</span>, &#123;</span><br><span class="line">  type: <span class="string">'ADD'</span>,</span><br><span class="line">  payload: <span class="number">2</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="3-å®ç°ä¸€ä¸ªRedux"><a href="#3-å®ç°ä¸€ä¸ªRedux" class="headerlink" title="3. å®ç°ä¸€ä¸ªRedux"></a>3. å®ç°ä¸€ä¸ªRedux</h3><p>æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªRedux<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store</span></span><br><span class="line"><span class="keyword">const</span> createStore = <span class="function">(<span class="params">reducer</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> state;</span><br><span class="line">  <span class="keyword">let</span> listeners = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> getState = <span class="function"><span class="params">()</span> =&gt;</span> state;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dispatch = <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">    state = reducer(state, action);</span><br><span class="line">    listeners.forEach(<span class="function"><span class="params">listener</span> =&gt;</span> listener());</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> subscribe = <span class="function">(<span class="params">listener</span>) =&gt;</span> &#123;</span><br><span class="line">    listeners.push(listener);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      listeners = listeners.filter(<span class="function"><span class="params">l</span> =&gt;</span> l !== listener);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  dispatch(&#123;&#125;);</span><br><span class="line">  <span class="keyword">return</span> &#123; getState, dispatch, subscribe &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="4-è§†å›¾æ›´æ–°"><a href="#4-è§†å›¾æ›´æ–°" class="headerlink" title="4. è§†å›¾æ›´æ–°"></a>4. è§†å›¾æ›´æ–°</h3><p>æ•°æ®å’Œæ“ä½œæ•°æ®çš„é€»è¾‘æœ‰äº†ï¼Œå‰©ä¸‹çš„é—®é¢˜å°±æ˜¯ï¼Œè®¡ç®—å‡ºæ–°çš„stateåï¼Œæ€ä¹ˆè§¦å‘è§†å›¾æ›´æ–°ï¼Ÿ<br>è¿™æ—¶éœ€è¦ç”¨åˆ°<code>React-Redux</code>ã€‚<code>React-Redux</code>éœ€è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>stateå¯¹è±¡å¦‚ä½•è½¬åŒ–ä¸ºç»„ä»¶çš„å‚æ•°ï¼Ÿ</li>
<li>ç”¨æˆ·å‘å‡ºçš„Actionå¦‚ä½•ä»UIç»„ä»¶ä¼ å‡ºå»ï¼Ÿ</li>
</ul>
<p><code>React-Redux</code>æä¾› <em><code>connect</code></em>æ–¹æ³•ï¼Œç”¨connectåŒ…è£¹ä½ çš„ç»„ä»¶æ¥åˆ›å»ºä¸€ä¸ª<em>é«˜é˜¶ç»„ä»¶</em>ï¼Œå®ƒä¼šä¼ é€’dispatchæ–¹æ³•å’ŒReduxå‚¨å­˜çš„stateï¼Œå¹¶ä½œä¸ºpropsä¼ é€’åˆ°ç»„ä»¶ä¸­ã€‚</p>
<ul>
<li><em><code>connect</code></em><br>è®©ç»„ä»¶å˜æˆèƒ½å“åº”stateå˜åŒ–çš„ç»„ä»¶ã€‚<br><code>connect</code>æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼ŒmapStateToProps å’Œ mapDispatchToProps</li>
<li><em><code>mapStateToProps</code></em><br>ä¼šå°†stateæ˜ å°„åˆ°ç»„ä»¶çš„propsä¸Šã€‚å½“stateæ›´æ–°çš„æ—¶å€™ï¼Œä¼šè§¦å‘ UI ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</li>
<li><em><code>mapDispatchToProps</code></em><br>ä¼šreduxé‡Œçš„dispatchæ–¹æ³•ä¼ é€’åˆ°ç»„ä»¶çš„propsä¸Š</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> <span class="string">'../actions/actions'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;count, increment, decrement&#125; = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;The count is &#123;count&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;() =&gt; increment(count)&#125;&gt;+&lt;/</span>button&gt;</span><br><span class="line">        &lt;button onClick=&#123;() =&gt; decrement(count)&#125;&gt;-<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const mapStateToProps = store =&gt; (&#123;</span></span><br><span class="line"><span class="regexp">  count: store.count</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const mapDispatchToProps = dispatch =&gt; (&#123;</span></span><br><span class="line"><span class="regexp">  increment: count =&gt; dispatch(actions.increment(count)),</span></span><br><span class="line"><span class="regexp">  decrement: count =&gt; dispatch(actions.decrement(count))</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default connect(mapStateToProps, mapDispatchToProps)(App);</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="5-useReducer-ä»£æ›¿-Redux"><a href="#5-useReducer-ä»£æ›¿-Redux" class="headerlink" title="5. useReducer ä»£æ›¿ Redux"></a>5. useReducer ä»£æ›¿ Redux</h3><p>ä½†æ˜¯ï¼Œè‡ªä»hookså‡ºæ¥ä¹‹åï¼Œæ–°ç‰ˆ React ç»“åˆreducerå’ŒContextï¼Œå°±å¯ä»¥ç›´æ¥æ›¿ä»£Reduxã€‚<br>state å­˜åœ¨äºé¡¶å±‚ç»„ä»¶ä¸­ï¼Œç”± useReducer ç®¡ç†ï¼ŒContext è¿›è¡Œåˆ†å‘ã€‚å­ç»„ä»¶å¯ä»¥è½»æ¾è·å– state å’Œ dispatchã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext, useReducer &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> TasksContext = createContext(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> TasksDispatchContext = createContext(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">TasksProvider</span>(<span class="params">&#123; children &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [tasks, dispatch] = useReducer(tasksReducer, initialTasks);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;TasksContext.Provider value=&#123;tasks&#125;&gt;</span><br><span class="line">      &lt;TasksDispatchContext.Provider value=&#123;dispatch&#125;&gt;</span><br><span class="line">        &#123;children&#125;</span><br><span class="line">      &lt;<span class="regexp">/TasksDispatchContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>TasksContext.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„ä»¶ä¸­è·å–taskå’Œdispatch</span></span><br><span class="line"><span class="keyword">const</span> dispatch = useContext(TasksDispatchContext);</span><br><span class="line"><span class="keyword">const</span> tasks = useContext(TasksContext);</span><br></pre></td></tr></table></figure></p>
<p>ä¹Ÿå¯ä»¥å†å°è£…ä¸€å±‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useTasks</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> useContext(TasksContext);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useTasksDispatch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> useContext(TasksDispatchContext);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tasks = useTasks();</span><br><span class="line"><span class="keyword">const</span> dispatch = useTasksDispatch();</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="6-ç°åœ¨çš„Redux"><a href="#6-ç°åœ¨çš„Redux" class="headerlink" title="6. ç°åœ¨çš„Redux"></a>6. ç°åœ¨çš„Redux</h3><p>é‚£è¿˜ç”¨reduxå—ï¼Ÿæœ€æ–°ç‰ˆReduxåœ¨æä¾›ä»€ä¹ˆè§£å†³æ–¹æ¡ˆï¼Ÿæœ€æ–°åŒ…å«<code>Redux Toolkit</code><br>æˆ‘è§‰å¾—æ ¸å¿ƒä¼˜åŠ¿åªå‰©ä¸‹<em><code>createSlice</code></em>ï¼Œ è®©ä½ ä½¿ç”¨ Immer åº“ æ¥ç¼–å†™ reducerï¼Œä¸éœ€è¦ä½¿ç”¨æ‹“å±•è¿ç®—ç¬¦ï¼Œæ¶ˆé™¤æ„å¤–çš„ mutations<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createSlice &#125; <span class="keyword">from</span> <span class="string">"@reduxjs/toolkit"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todosSlice = createSlice(&#123;</span><br><span class="line">  name: <span class="string">"todos"</span>,</span><br><span class="line">  initialState: [],</span><br><span class="line">  reducers: &#123;</span><br><span class="line">    todoAdded(state, action) &#123;</span><br><span class="line">      state.push(&#123;</span><br><span class="line">        id: action.payload.id,</span><br><span class="line">        text: action.payload.text,</span><br><span class="line">        completed: <span class="literal">false</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    todoToggled(state, action) &#123;</span><br><span class="line">      <span class="keyword">const</span> todo = state.find(<span class="function">(<span class="params">todo</span>) =&gt;</span> todo.id === action.payload);</span><br><span class="line">      todo.completed = !todo.completed;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul>
<li><a href="https://tech.meituan.com/2017/04/27/vuex-code-analysis.html" target="_blank" rel="noopener">Vuexæ¡†æ¶åŸç†ä¸æºç åˆ†æ</a></li>
<li><a href="https://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html" target="_blank" rel="noopener">Redux å…¥é—¨æ•™ç¨‹</a></li>
<li><a href="https://juejin.cn/post/6844903934801215501?searchId=2025022315432084B513C608EBE9B0422F" target="_blank" rel="noopener">ã€è¯‘ã€‘ä¸è¦å†é—®æˆ‘React Hooksèƒ½å¦å–ä»£Reduxäº†</a></li>
<li><a href="https://react.docschina.org/learn/scaling-up-with-reducer-and-context" target="_blank" rel="noopener">ä½¿ç”¨ Reducer å’Œ Context æ‹“å±•ä½ çš„åº”ç”¨</a></li>
</ul>

    </div>
  </article>
    
    <div class="post-nav">
      <div class="post-nav-item post-nav-next">
        
          <span>ã€ˆ </span>
          <a href="/2024/08/25/Compositon-API/" rel="next" title="ğŸ¤” Vueå’ŒReactçš„åŒºåˆ«">
          ğŸ¤” Vueå’ŒReactçš„åŒºåˆ«
          </a>
        
      </div>
  
      <div class="post-nav-item post-nav-prev">
        
          <a href="/2024/11/06/æµå¼æ¸²æŸ“/" rel="prev" title="æµå¼æ¸²æŸ“ SSE">
            æµå¼æ¸²æŸ“ SSE
          </a>
          <span>ã€‰</span>
        
      </div>
    </div>
  
</div>


<script>
var link = document.getElementsByClassName('toc-link');
var hash = decodeURIComponent(location.hash);
if (hash){
} else {
  link[0].classList.add('toc-link-active');
}

var h3 = document.getElementsByTagName('h3');
var h4 = document.getElementsByTagName('h4');
var h5 = document.getElementsByTagName('h5');
var link_arr = [];
function addToArr(arr){
  for(var i = 0; i < arr.length; i++){
    link_arr.push(arr[i].offsetTop);
  }
}
addToArr(h3);
addToArr(h4);
addToArr(h5);


var compare = function (x, y) {
    if (x < y) {
        return -1;
    } else if (x > y) {
        return 1;
    } else {
        return 0;
    }
}

link_arr.sort(compare);


window.onscroll = function(){
  var height = document.documentElement.scrollTop;
  for (var i = 0; i < link_arr.length; i++){
    if (link_arr[i] > height){
      for(var j = 0; j < link.length; j++){
        link[j].classList.remove('toc-link-active');
      }
      document.getElementsByClassName('toc-link')[i].classList.add('toc-link-active');
      break;
    } 
  }
}

</script>
    </div>
  </div>
  




    <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js"></script>
    
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // listen to any DOM change and automatically perform spacing via MutationObserver()
        pangu.autoSpacingPage();
      });

      window.addEventListener("load", event => {
        // åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ
        if ("serviceWorker" in navigator) {
          window.navigator.serviceWorker
            .register("/sw.js", {
              scope: "/"
            })
        }
      });
    </script>
</body>
</html>

